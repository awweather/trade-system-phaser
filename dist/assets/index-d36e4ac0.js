var Mt=Object.defineProperty;var Rt=(s,t,n)=>t in s?Mt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var ht=(s,t,n)=>(Rt(s,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))f(T);new MutationObserver(T=>{for(const E of T)if(E.type==="childList")for(const h of E.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&f(h)}).observe(document,{childList:!0,subtree:!0});function n(T){const E={};return T.integrity&&(E.integrity=T.integrity),T.referrerPolicy&&(E.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?E.credentials="include":T.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function f(T){if(T.ep)return;T.ep=!0;const E=n(T);fetch(T.href,E)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var phaser={exports:{}};(function(s,t){(function(f,T){s.exports=T()})(commonjsGlobal,()=>(()=>{var n={6659:h=>{var S=Object.prototype.hasOwnProperty,e="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(e=!1));function y(r,a,v){this.fn=r,this.context=a,this.once=v||!1}function c(r,a,v,o,p){if(typeof v!="function")throw new TypeError("The listener must be a function");var m=new y(v,o||r,p),g=e?e+a:a;return r._events[g]?r._events[g].fn?r._events[g]=[r._events[g],m]:r._events[g].push(m):(r._events[g]=m,r._eventsCount++),r}function u(r,a){--r._eventsCount===0?r._events=new d:delete r._events[a]}function l(){this._events=new d,this._eventsCount=0}l.prototype.eventNames=function(){var a=[],v,o;if(this._eventsCount===0)return a;for(o in v=this._events)S.call(v,o)&&a.push(e?o.slice(1):o);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(v)):a},l.prototype.listeners=function(a){var v=e?e+a:a,o=this._events[v];if(!o)return[];if(o.fn)return[o.fn];for(var p=0,m=o.length,g=new Array(m);p<m;p++)g[p]=o[p].fn;return g},l.prototype.listenerCount=function(a){var v=e?e+a:a,o=this._events[v];return o?o.fn?1:o.length:0},l.prototype.emit=function(a,v,o,p,m,g){var x=e?e+a:a;if(!this._events[x])return!1;var C=this._events[x],M=arguments.length,R,P;if(C.fn){switch(C.once&&this.removeListener(a,C.fn,void 0,!0),M){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,v),!0;case 3:return C.fn.call(C.context,v,o),!0;case 4:return C.fn.call(C.context,v,o,p),!0;case 5:return C.fn.call(C.context,v,o,p,m),!0;case 6:return C.fn.call(C.context,v,o,p,m,g),!0}for(P=1,R=new Array(M-1);P<M;P++)R[P-1]=arguments[P];C.fn.apply(C.context,R)}else{var w=C.length,A;for(P=0;P<w;P++)switch(C[P].once&&this.removeListener(a,C[P].fn,void 0,!0),M){case 1:C[P].fn.call(C[P].context);break;case 2:C[P].fn.call(C[P].context,v);break;case 3:C[P].fn.call(C[P].context,v,o);break;case 4:C[P].fn.call(C[P].context,v,o,p);break;default:if(!R)for(A=1,R=new Array(M-1);A<M;A++)R[A-1]=arguments[A];C[P].fn.apply(C[P].context,R)}}return!0},l.prototype.on=function(a,v,o){return c(this,a,v,o,!1)},l.prototype.once=function(a,v,o){return c(this,a,v,o,!0)},l.prototype.removeListener=function(a,v,o,p){var m=e?e+a:a;if(!this._events[m])return this;if(!v)return u(this,m),this;var g=this._events[m];if(g.fn)g.fn===v&&(!p||g.once)&&(!o||g.context===o)&&u(this,m);else{for(var x=0,C=[],M=g.length;x<M;x++)(g[x].fn!==v||p&&!g[x].once||o&&g[x].context!==o)&&C.push(g[x]);C.length?this._events[m]=C.length===1?C[0]:C:u(this,m)}return this},l.prototype.removeAllListeners=function(a){var v;return a?(v=e?e+a:a,this._events[v]&&u(this,v)):(this._events=new d,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,h.exports=l},62270:(h,S,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82590),y=function(c,u,l,r){for(var a=c[0],v=1;v<c.length;v++){var o=c[v];d(o,a,u,l,r),a=o}return c};h.exports=y},61148:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),y=function(c,u,l,r,a){return d(c,"angle",u,l,r,a)};h.exports=y},22015:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){for(var c=0;c<e.length;c++){var u=e[c];d.call(y,u)}return e};h.exports=S},31060:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){y===void 0&&(y=0);for(var c=y;c<e.length;c++){var u=e[c],l=!0;for(var r in d)u[r]!==d[r]&&(l=!1);if(l)return u}return null};h.exports=S},52367:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){y===void 0&&(y=0);for(var c=y;c<e.length;c++){var u=e[c],l=!0;for(var r in d)u[r]!==d[r]&&(l=!1);if(l)return u}return null};h.exports=S},12673:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40327),y=e(84093),c=e(72632),u=e(72283),l=e(71030),r=new l({sys:{queueDepthSort:u,events:{once:u}}},0,0,1,1).setOrigin(0,0),a=function(v,o){o===void 0&&(o={});var p=o.hasOwnProperty("width"),m=o.hasOwnProperty("height"),g=c(o,"width",-1),x=c(o,"height",-1),C=c(o,"cellWidth",1),M=c(o,"cellHeight",C),R=c(o,"position",y.TOP_LEFT),P=c(o,"x",0),w=c(o,"y",0),A=0,G=0,O=g*C,L=x*M;r.setPosition(P,w),r.setSize(C,M);for(var I=0;I<v.length;I++)if(d(v[I],r,R),p&&g===-1)r.x+=C;else if(m&&x===-1)r.y+=M;else if(m&&!p){if(G+=M,r.y+=M,G===L&&(G=0,A+=C,r.y=w,r.x+=C,A===O))break}else if(A+=C,r.x+=C,A===O&&(A=0,G+=M,r.x=P,r.y+=M,G===L))break;return v};h.exports=a},691:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),y=function(c,u,l,r,a){return d(c,"alpha",u,l,r,a)};h.exports=y},3877:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),y=function(c,u,l,r,a){return d(c,"x",u,l,r,a)};h.exports=y},71020:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),y=function(c,u,l,r,a,v,o){return l==null&&(l=u),d(c,"x",u,r,v,o),d(c,"y",l,a,v,o)};h.exports=y},28970:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),y=function(c,u,l,r,a){return d(c,"y",u,l,r,a)};h.exports=y},82249:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){y===void 0&&(y=0),c===void 0&&(c=6.28);for(var u=y,l=(c-y)/e.length,r=d.x,a=d.y,v=d.radius,o=0;o<e.length;o++)e[o].x=r+v*Math.cos(u),e[o].y=a+v*Math.sin(u),u+=l;return e};h.exports=S},30285:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){y===void 0&&(y=0),c===void 0&&(c=6.28);for(var u=y,l=(c-y)/e.length,r=d.width/2,a=d.height/2,v=0;v<e.length;v++)e[v].x=d.x+r*Math.cos(u),e[v].y=d.y+a*Math.sin(u),u+=l;return e};h.exports=S},61557:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8570),y=function(c,u){for(var l=d(u,c.length),r=0;r<c.length;r++){var a=c[r],v=l[r];a.x=v.x,a.y=v.y}return c};h.exports=y},63549:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40053),y=e(77640),c=e(38487),u=function(l,r,a){a===void 0&&(a=0);var v=d(r,!1,l.length);a>0?y(v,a):a<0&&c(v,Math.abs(a));for(var o=0;o<l.length;o++)l[o].x=v[o].x,l[o].y=v[o].y;return l};h.exports=u},51629:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(58813),y=function(c,u,l){var r=d({x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2},l),a=d({x1:u.x2,y1:u.y2,x2:u.x3,y2:u.y3},l),v=d({x1:u.x3,y1:u.y3,x2:u.x1,y2:u.y1},l);r.pop(),a.pop(),v.pop(),r=r.concat(a,v);for(var o=r.length/c.length,p=0,m=0;m<c.length;m++){var g=c[m],x=r[Math.floor(p)];g.x=x.x,g.y=x.y,p+=o}return c};h.exports=y},1045:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){for(var c=0;c<e.length;c++){var u=e[c];u.anims&&u.anims.play(d,y)}return e};h.exports=S},6124:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u,l){c===void 0&&(c=0),u===void 0&&(u=0),l===void 0&&(l=1);var r,a=0,v=e.length;if(l===1)for(r=u;r<v;r++)e[r][d]+=y+a*c,a++;else for(r=u;r>=0;r--)e[r][d]+=y+a*c,a++;return e};h.exports=S},23646:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u,l){c===void 0&&(c=0),u===void 0&&(u=0),l===void 0&&(l=1);var r,a=0,v=e.length;if(l===1)for(r=u;r<v;r++)e[r][d]=y+a*c,a++;else for(r=u;r>=0;r--)e[r][d]=y+a*c,a++;return e};h.exports=S},4392:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(30977),y=function(c,u){for(var l=0;l<c.length;l++)d(u,c[l]);return c};h.exports=y},94985:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72006),y=function(c,u){for(var l=0;l<c.length;l++)d(u,c[l]);return c};h.exports=y},63305:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74077),y=function(c,u){for(var l=0;l<c.length;l++)d(u,c[l]);return c};h.exports=y},90739:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(30001),y=function(c,u){for(var l=0;l<c.length;l++)d(u,c[l]);return c};h.exports=y},91417:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99761),y=function(c,u){for(var l=0;l<c.length;l++)d(u,c[l]);return c};h.exports=y},26182:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),y=function(c,u,l,r,a){return d(c,"rotation",u,l,r,a)};h.exports=y},87299:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72395),y=e(53996),c=function(u,l,r){for(var a=l.x,v=l.y,o=0;o<u.length;o++){var p=u[o];d(p,a,v,r,Math.max(1,y(p.x,p.y,a,v)))}return u};h.exports=c},92194:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72395),y=function(c,u,l,r){var a=u.x,v=u.y;if(r===0)return c;for(var o=0;o<c.length;o++)d(c[o],a,v,l,r);return c};h.exports=y},30363:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),y=function(c,u,l,r,a){return d(c,"scaleX",u,l,r,a)};h.exports=y},51449:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),y=function(c,u,l,r,a,v,o){return l==null&&(l=u),d(c,"scaleX",u,r,v,o),d(c,"scaleY",l,a,v,o)};h.exports=y},64895:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),y=function(c,u,l,r,a){return d(c,"scaleY",u,l,r,a)};h.exports=y},30329:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a){return d(c,"alpha",u,l,r,a)};h.exports=y},43954:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r){return d(c,"blendMode",u,0,l,r)};h.exports=y},70688:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a){return d(c,"depth",u,l,r,a)};h.exports=y},8314:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){for(var c=0;c<e.length;c++)e[c].setInteractive(d,y);return e};h.exports=S},12894:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a,v,o){return l==null&&(l=u),d(c,"originX",u,r,v,o),d(c,"originY",l,a,v,o),c.forEach(function(p){p.updateDisplayOrigin()}),c};h.exports=y},38767:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a){return d(c,"rotation",u,l,r,a)};h.exports=y},18584:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a,v,o){return l==null&&(l=u),d(c,"scaleX",u,r,v,o),d(c,"scaleY",l,a,v,o)};h.exports=y},17381:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a){return d(c,"scaleX",u,l,r,a)};h.exports=y},74370:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a){return d(c,"scaleY",u,l,r,a)};h.exports=y},27773:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a,v,o){return l==null&&(l=u),d(c,"scrollFactorX",u,r,v,o),d(c,"scrollFactorY",l,a,v,o)};h.exports=y},75257:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a){return d(c,"scrollFactorX",u,l,r,a)};h.exports=y},54512:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a){return d(c,"scrollFactorY",u,l,r,a)};h.exports=y},69423:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u){for(var l=0;l<e.length;l++)e[l].setTint(d,y,c,u);return e};h.exports=S},58291:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r){return d(c,"visible",u,0,l,r)};h.exports=y},94833:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a){return d(c,"x",u,l,r,a)};h.exports=y},14284:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a,v,o){return l==null&&(l=u),d(c,"x",u,r,v,o),d(c,"y",l,a,v,o)};h.exports=y},96574:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),y=function(c,u,l,r,a){return d(c,"y",u,l,r,a)};h.exports=y},74086:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r,a){r===void 0&&(r=0),a===void 0&&(a=new d);var v,o,p=c.length;if(p===1)v=c[0].x,o=c[0].y,c[0].x=u,c[0].y=l;else{var m=1,g=0;r===0&&(g=p-1,m=p-2),v=c[g].x,o=c[g].y,c[g].x=u,c[g].y=l;for(var x=0;x<p;x++)if(!(m>=p||m===-1)){var C=c[m],M=C.x,R=C.y;C.x=v,C.y=o,v=M,o=R,r===0?m--:m++}}return a.x=v,a.y=o,a};h.exports=y},86347:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18592),y=function(c){return d(c)};h.exports=y},1558:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(5514),y=function(c,u,l,r,a){a===void 0&&(a=!1);var v=Math.abs(r-l)/c.length,o;if(a)for(o=0;o<c.length;o++)c[o][u]+=d(o*v,l,r);else for(o=0;o<c.length;o++)c[o][u]=d(o*v,l,r);return c};h.exports=y},9938:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(87736),y=function(c,u,l,r,a){a===void 0&&(a=!1);var v=Math.abs(r-l)/c.length,o;if(a)for(o=0;o<c.length;o++)c[o][u]+=d(o*v,l,r);else for(o=0;o<c.length;o++)c[o][u]=d(o*v,l,r);return c};h.exports=y},71060:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u){if(u===void 0&&(u=!1),e.length===0)return e;if(e.length===1)return u?e[0][d]+=(c+y)/2:e[0][d]=(c+y)/2,e;var l=Math.abs(c-y)/(e.length-1),r;if(u)for(r=0;r<e.length;r++)e[r][d]+=r*l+y;else for(r=0;r<e.length;r++)e[r][d]=r*l+y;return e};h.exports=S},11207:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){for(var d=0;d<e.length;d++)e[d].visible=!e[d].visible;return e};h.exports=S},24404:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1071),y=function(c,u,l){l===void 0&&(l=0);for(var r=0;r<c.length;r++){var a=c[r];a.x=d(a.x,u.left-l,u.right+l),a.y=d(a.y,u.top-l,u.bottom+l)}return c};h.exports=y},83979:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AlignTo:e(62270),Angle:e(61148),Call:e(22015),GetFirst:e(31060),GetLast:e(52367),GridAlign:e(12673),IncAlpha:e(691),IncX:e(3877),IncXY:e(71020),IncY:e(28970),PlaceOnCircle:e(82249),PlaceOnEllipse:e(30285),PlaceOnLine:e(61557),PlaceOnRectangle:e(63549),PlaceOnTriangle:e(51629),PlayAnimation:e(1045),PropertyValueInc:e(6124),PropertyValueSet:e(23646),RandomCircle:e(4392),RandomEllipse:e(94985),RandomLine:e(63305),RandomRectangle:e(90739),RandomTriangle:e(91417),Rotate:e(26182),RotateAround:e(87299),RotateAroundDistance:e(92194),ScaleX:e(30363),ScaleXY:e(51449),ScaleY:e(64895),SetAlpha:e(30329),SetBlendMode:e(43954),SetDepth:e(70688),SetHitArea:e(8314),SetOrigin:e(12894),SetRotation:e(38767),SetScale:e(18584),SetScaleX:e(17381),SetScaleY:e(74370),SetScrollFactor:e(27773),SetScrollFactorX:e(75257),SetScrollFactorY:e(54512),SetTint:e(69423),SetVisible:e(58291),SetX:e(94833),SetXY:e(14284),SetY:e(96574),ShiftPosition:e(74086),Shuffle:e(86347),SmootherStep:e(9938),SmoothStep:e(1558),Spread:e(71060),ToggleVisible:e(11207),WrapInRectangle:e(24404)}},85463:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=e(56694),c=e(16938),u=e(2406),l=e(71519),r=e(10850),a=e(28834),v=new y({initialize:function(p,m,g){this.manager=p,this.key=m,this.type="frame",this.frames=this.getFrames(p.textureManager,r(g,"frames",[]),r(g,"defaultTextureKey",null),r(g,"sortFrames",!0)),this.frameRate=r(g,"frameRate",null),this.duration=r(g,"duration",null),this.msPerFrame,this.skipMissedFrames=r(g,"skipMissedFrames",!0),this.delay=r(g,"delay",0),this.repeat=r(g,"repeat",0),this.repeatDelay=r(g,"repeatDelay",0),this.yoyo=r(g,"yoyo",!1),this.showBeforeDelay=r(g,"showBeforeDelay",!1),this.showOnStart=r(g,"showOnStart",!1),this.hideOnComplete=r(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(c.PAUSE_ALL,this.pause,this),this.manager.on(c.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(o,p,m,g){m===null&&g===null?(o.frameRate=24,o.duration=24/p*1e3):m&&g===null?(o.duration=m,o.frameRate=p/(m/1e3)):(o.frameRate=g,o.duration=p/g*1e3),o.msPerFrame=1e3/o.frameRate},addFrame:function(o){return this.addFrameAt(this.frames.length,o)},addFrameAt:function(o,p){var m=this.getFrames(this.manager.textureManager,p);if(m.length>0){if(o===0)this.frames=m.concat(this.frames);else if(o===this.frames.length)this.frames=this.frames.concat(m);else{var g=this.frames.slice(0,o),x=this.frames.slice(o);this.frames=g.concat(m,x)}this.updateFrameSequence()}return this},checkFrame:function(o){return o>=0&&o<this.frames.length},getFirstTick:function(o){o.accumulator=0,o.nextTick=o.msPerFrame+o.currentFrame.duration},getFrameAt:function(o){return this.frames[o]},getFrames:function(o,p,m,g){g===void 0&&(g=!0);var x=[],C,M,R=1,P,w;if(typeof p=="string"){if(w=p,!o.exists(w))return console.warn('Texture "%s" not found',w),x;var A=o.get(w),G=A.getFrameNames();g&&a(G),p=[],G.forEach(function(V){p.push({key:w,frame:V})})}if(!Array.isArray(p)||p.length===0)return x;for(P=0;P<p.length;P++){var O=p[P],L=r(O,"key",m);if(L){var I=r(O,"frame",0),F=o.getFrame(L,I);if(!F){console.warn('Texture "%s" not found',L);continue}M=new l(L,I,R,F),M.duration=r(O,"duration",0),M.isFirst=!C,C&&(C.nextFrame=M,M.prevFrame=C),x.push(M),C=M,R++}}if(x.length>0){M.isLast=!0,M.nextFrame=x[0],x[0].prevFrame=M;var D=1/(x.length-1);for(P=0;P<x.length;P++)x[P].progress=P*D}return x},getNextTick:function(o){o.accumulator-=o.nextTick,o.nextTick=o.msPerFrame+o.currentFrame.duration},getFrameByProgress:function(o){return o=d(o,0,1),u(o,this.frames,"progress")},nextFrame:function(o){var p=o.currentFrame;p.isLast?o.yoyo?this.handleYoyoFrame(o,!1):o.repeatCounter>0?o.inReverse&&o.forward?o.forward=!1:this.repeatAnimation(o):o.complete():this.updateAndGetNextTick(o,p.nextFrame)},handleYoyoFrame:function(o,p){if(p||(p=!1),o.inReverse===!p&&o.repeatCounter>0){(o.repeatDelay===0||o.pendingRepeat)&&(o.forward=p),this.repeatAnimation(o);return}if(o.inReverse!==p&&o.repeatCounter===0){o.complete();return}o.forward=p;var m=p?o.currentFrame.nextFrame:o.currentFrame.prevFrame;this.updateAndGetNextTick(o,m)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(o){var p=o.currentFrame;p.isFirst?o.yoyo?this.handleYoyoFrame(o,!0):o.repeatCounter>0?o.inReverse&&!o.forward?this.repeatAnimation(o):(o.forward=!0,this.repeatAnimation(o)):o.complete():this.updateAndGetNextTick(o,p.prevFrame)},updateAndGetNextTick:function(o,p){o.setCurrentFrame(p),this.getNextTick(o)},removeFrame:function(o){var p=this.frames.indexOf(o);return p!==-1&&this.removeFrameAt(p),this},removeFrameAt:function(o){return this.frames.splice(o,1),this.updateFrameSequence(),this},repeatAnimation:function(o){if(o._pendingStop===2){if(o._pendingStopValue===0)return o.stop();o._pendingStopValue--}o.repeatDelay>0&&!o.pendingRepeat?(o.pendingRepeat=!0,o.accumulator-=o.nextTick,o.nextTick+=o.repeatDelay):(o.repeatCounter--,o.forward?o.setCurrentFrame(o.currentFrame.nextFrame):o.setCurrentFrame(o.currentFrame.prevFrame),o.isPlaying&&(this.getNextTick(o),o.handleRepeat()))},toJSON:function(){var o={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(p){o.frames.push(p.toJSON())}),o},updateFrameSequence:function(){for(var o=this.frames.length,p=1/(o-1),m,g=0;g<o;g++)m=this.frames[g],m.index=g+1,m.isFirst=!1,m.isLast=!1,m.progress=g*p,g===0?(m.isFirst=!0,o===1?(m.isLast=!0,m.nextFrame=m,m.prevFrame=m):(m.isLast=!1,m.prevFrame=this.frames[o-1],m.nextFrame=this.frames[g+1])):g===o-1&&o>1?(m.isLast=!0,m.prevFrame=this.frames[o-2],m.nextFrame=this.frames[0]):o>1&&(m.prevFrame=this.frames[g-1],m.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(c.PAUSE_ALL,this.pause,this),this.manager.off(c.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var o=0;o<this.frames.length;o++)this.frames[o].destroy();this.frames=[],this.manager=null}});h.exports=v},71519:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l,r,a,v){v===void 0&&(v=!1),this.textureKey=u,this.textureFrame=l,this.index=r,this.frame=a,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=v},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});h.exports=y},90249:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85463),y=e(56694),c=e(33885),u=e(6659),l=e(16938),r=e(97081),a=e(72632),v=e(10850),o=e(83392),p=e(13401),m=e(76400),g=new y({Extends:u,initialize:function(C){u.call(this),this.game=C,this.textureManager=null,this.globalTimeScale=1,this.anims=new c,this.mixes=new c,this.paused=!1,this.name="AnimationManager",C.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(x,C,M){var R=this.anims,P=this.mixes,w=typeof x=="string"?x:x.key,A=typeof C=="string"?C:C.key;if(R.has(w)&&R.has(A)){var G=P.get(w);G||(G={}),G[A]=M,P.set(w,G)}return this},removeMix:function(x,C){var M=this.mixes,R=typeof x=="string"?x:x.key,P=M.get(R);if(P)if(C){var w=typeof C=="string"?C:C.key;P.hasOwnProperty(w)&&delete P[w]}else C||M.delete(R);return this},getMix:function(x,C){var M=this.mixes,R=typeof x=="string"?x:x.key,P=typeof C=="string"?C:C.key,w=M.get(R);return w&&w.hasOwnProperty(P)?w[P]:0},add:function(x,C){return this.anims.has(x)?(console.warn("Animation key exists: "+x),this):(C.key=x,this.anims.set(x,C),this.emit(l.ADD_ANIMATION,x,C),this)},exists:function(x){return this.anims.has(x)},createFromAseprite:function(x,C,M){var R=[],P=this.game.cache.json.get(x);if(!P)return console.warn("No Aseprite data found for: "+x),R;var w=this,A=v(P,"meta",null),G=v(P,"frames",null);if(A&&G){var O=v(A,"frameTags",[]);O.forEach(function(L){var I=[],F=a(L,"name",null),D=a(L,"from",0),V=a(L,"to",0),k=a(L,"direction","forward");if(F&&(!C||C&&C.indexOf(F)>-1)){for(var W=0,X=D;X<=V;X++){var H=X.toString(),$=G[H];if($){var z=a($,"duration",o.MAX_SAFE_INTEGER);I.push({key:x,frame:H,duration:z}),W+=z}}var b=W/I.length;I.forEach(function(U){U.duration-=b}),k==="reverse"&&(I=I.reverse());var B={key:F,frames:I,duration:W,yoyo:k==="pingpong"},N;M?M.anims&&(N=M.anims.create(B)):N=w.create(B),N&&R.push(N)}})}return R},create:function(x){var C=x.key,M=!1;return C&&(M=this.get(C),M?console.warn("AnimationManager key already exists: "+C):(M=new d(this,C,x),this.anims.set(C,M),this.emit(l.ADD_ANIMATION,C,M))),M},fromJSON:function(x,C){C===void 0&&(C=!1),C&&this.anims.clear(),typeof x=="string"&&(x=JSON.parse(x));var M=[];if(x.hasOwnProperty("anims")&&Array.isArray(x.anims)){for(var R=0;R<x.anims.length;R++)M.push(this.create(x.anims[R]));x.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=x.globalTimeScale)}else x.hasOwnProperty("key")&&x.type==="frame"&&M.push(this.create(x));return M},generateFrameNames:function(x,C){var M=v(C,"prefix",""),R=v(C,"start",0),P=v(C,"end",0),w=v(C,"suffix",""),A=v(C,"zeroPad",0),G=v(C,"outputArray",[]),O=v(C,"frames",!1);if(!this.textureManager.exists(x))return console.warn('Texture "%s" not found',x),G;var L=this.textureManager.get(x);if(!L)return G;var I;if(C)for(O||(O=p(R,P)),I=0;I<O.length;I++){var F=M+m(O[I],A,"0",1)+w;L.has(F)?G.push({key:x,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,x)}else for(O=L.getFrameNames(),I=0;I<O.length;I++)G.push({key:x,frame:O[I]});return G},generateFrameNumbers:function(x,C){var M=v(C,"start",0),R=v(C,"end",-1),P=v(C,"first",!1),w=v(C,"outputArray",[]),A=v(C,"frames",!1);if(!this.textureManager.exists(x))return console.warn('Texture "%s" not found',x),w;var G=this.textureManager.get(x);if(!G)return w;P&&G.has(P)&&w.push({key:x,frame:P}),A||(R===-1&&(R=G.frameTotal-2),A=p(M,R));for(var O=0;O<A.length;O++){var L=A[O];G.has(L)?w.push({key:x,frame:L}):console.warn('Frame "%s" not found in texture "%s"',L,x)}return w},get:function(x){return this.anims.get(x)},getAnimsFromTexture:function(x){for(var C=this.textureManager.get(x),M=C.key,R=this.anims.getArray(),P=[],w=0;w<R.length;w++)for(var A=R[w],G=A.frames,O=0;O<G.length;O++)if(G[O].textureKey===M){P.push(A.key);break}return P},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(l.PAUSE_ALL)),this},play:function(x,C){Array.isArray(C)||(C=[C]);for(var M=0;M<C.length;M++)C[M].anims.play(x);return this},staggerPlay:function(x,C,M,R){M===void 0&&(M=0),R===void 0&&(R=!0),Array.isArray(C)||(C=[C]);var P=C.length;R||P--;for(var w=0;w<C.length;w++){var A=M<0?Math.abs(M)*(P-w):M*w;C[w].anims.playAfterDelay(x,A)}return this},remove:function(x){var C=this.get(x);return C&&(this.emit(l.REMOVE_ANIMATION,x,C),this.anims.delete(x),this.removeMix(x)),C},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(l.RESUME_ALL)),this},toJSON:function(x){var C={anims:[],globalTimeScale:this.globalTimeScale};return x!==void 0&&x!==""?C.anims.push(this.anims.get(x).toJSON()):this.anims.each(function(M,R){C.anims.push(R.toJSON())}),C},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});h.exports=g},16569:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(33885),c=e(72632),u=e(16938),l=e(85463),r=new d({initialize:function(v){this.parent=v,this.animationManager=v.scene.sys.anims,this.animationManager.on(u.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(a){var v=this.parent;if(a===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,v;Array.isArray(a)||(a=[a]);for(var o=0;o<a.length;o++){var p=a[o];this.nextAnim?this.nextAnimsQueue.push(p):this.nextAnim=p}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(a){this.isPlaying&&this.stop();var v=this.animationManager,o=typeof a=="string"?a:c(a,"key",null),p=this.exists(o)?this.get(o):v.get(o);if(!p)console.warn("Missing animation: "+o);else{this.currentAnim=p;var m=p.getTotalFrames(),g=c(a,"frameRate",p.frameRate),x=c(a,"duration",p.duration);p.calculateDuration(this,m,x,g),this.delay=c(a,"delay",p.delay),this.repeat=c(a,"repeat",p.repeat),this.repeatDelay=c(a,"repeatDelay",p.repeatDelay),this.yoyo=c(a,"yoyo",p.yoyo),this.showBeforeDelay=c(a,"showBeforeDelay",p.showBeforeDelay),this.showOnStart=c(a,"showOnStart",p.showOnStart),this.hideOnComplete=c(a,"hideOnComplete",p.hideOnComplete),this.skipMissedFrames=c(a,"skipMissedFrames",p.skipMissedFrames),this.timeScale=c(a,"timeScale",this.timeScale);var C=c(a,"startFrame",0);C>p.getTotalFrames()&&(C=0);var M=p.frames[C];C===0&&!this.forward&&(M=p.getLastFrame()),this.currentFrame=M}return this.parent},pause:function(a){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),a!==void 0&&this.setCurrentFrame(a),this.parent},resume:function(a){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),a!==void 0&&this.setCurrentFrame(a),this.parent},playAfterDelay:function(a,v){if(!this.isPlaying)this.delayCounter=v,this.play(a,!0);else{var o=this.nextAnim,p=this.nextAnimsQueue;o&&p.unshift(o),this.nextAnim=a,this._pendingStop=1,this._pendingStopValue=v}return this.parent},playAfterRepeat:function(a,v){if(v===void 0&&(v=1),!this.isPlaying)this.play(a);else{var o=this.nextAnim,p=this.nextAnimsQueue;o&&p.unshift(o),this.repeatCounter!==-1&&v>this.repeatCounter&&(v=this.repeatCounter),this.nextAnim=a,this._pendingStop=2,this._pendingStopValue=v}return this.parent},play:function(a,v){v===void 0&&(v=!1);var o=this.currentAnim,p=this.parent,m=typeof a=="string"?a:a.key;if(v&&this.isPlaying&&o.key===m)return p;if(o&&this.isPlaying){var g=this.animationManager.getMix(o.key,a);if(g>0)return this.playAfterDelay(a,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(a)},playReverse:function(a,v){v===void 0&&(v=!1);var o=typeof a=="string"?a:a.key;return v&&this.isPlaying&&this.currentAnim.key===o?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(a))},startAnimation:function(a){this.load(a);var v=this.currentAnim,o=this.parent;return v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,v.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),o},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(u.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(u.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(u.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(u.ANIMATION_COMPLETE,u.ANIMATION_COMPLETE_KEY)},emitEvents:function(a,v){var o=this.currentAnim;if(o){var p=this.currentFrame,m=this.parent,g=p.textureFrame;m.emit(a,o,p,m,g),v&&m.emit(v+o.key,o,p,m,g)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var a=this.currentFrame;if(!a)return 0;var v=a.progress;return this.inReverse&&(v*=-1),v},setProgress:function(a){return this.forward||(a=1-a),this.setCurrentFrame(this.currentAnim.getFrameByProgress(a)),this.parent},setRepeat:function(a){return this.repeatCounter=a===-1?Number.MAX_VALUE:a,this.parent},globalRemove:function(a,v){v===void 0&&(v=this.currentAnim),this.isPlaying&&v.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(a,v){a===void 0&&(a=!1),v===void 0&&(v=!1);var o=this.currentAnim,p=this.parent;return o?(v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),o.getFirstTick(this),this.emitEvents(u.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!a,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(o.frames[0]),this.parent):p},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var a=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(a)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var a=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(a)}return this.parent},stopAfterDelay:function(a){return this._pendingStop=1,this._pendingStopValue=a,this.parent},stopAfterRepeat:function(a){return a===void 0&&(a=1),this.repeatCounter!==-1&&a>this.repeatCounter&&(a=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=a,this.parent},stopOnFrame:function(a){return this._pendingStop=3,this._pendingStopValue=a,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(a,v){var o=this.currentAnim;if(!(!this.isPlaying||!o||o.paused)){if(this.accumulator+=v*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=v,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?o.nextFrame(this):o.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var p=0;do this.forward?o.nextFrame(this):o.previousFrame(this),p++;while(this.isPlaying&&this.accumulator>this.nextTick&&p<60)}}},setCurrentFrame:function(a){var v=this.parent;return this.currentFrame=a,v.texture=a.frame.texture,v.frame=a.frame,v.isCropped&&v.frame.updateCropUVs(v._crop,v.flipX,v.flipY),a.setAlpha&&(v.alpha=a.alpha),v.setSizeToFrame(),v._originComponent&&(a.frame.customPivot?v.setOrigin(a.frame.pivotX,a.frame.pivotY):v.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(u.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===a&&this.stop()),v},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(a){return this.anims?this.anims.get(a):null},exists:function(a){return this.anims?this.anims.has(a):!1},create:function(a){var v=a.key,o=!1;return v&&(o=this.get(v),o?console.warn("Animation key already exists: "+v):(o=new l(this,v,a),this.anims||(this.anims=new y),this.anims.set(v,o))),o},createFromAseprite:function(a,v){return this.animationManager.createFromAseprite(a,v,this.parent)},generateFrameNames:function(a,v){return this.animationManager.generateFrameNames(a,v)},generateFrameNumbers:function(a,v){return this.animationManager.generateFrameNumbers(a,v)},remove:function(a){var v=this.get(a);return v&&(this.currentAnim===v&&this.stop(),this.anims.delete(a)),v},destroy:function(){this.animationManager.off(u.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});h.exports=r},44509:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="add"},84563:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationcomplete"},61586:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationcomplete-"},72175:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationrepeat"},568:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationrestart"},37690:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationstart"},58525:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationstop"},5243:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="animationupdate"},10598:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pauseall"},4860:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="remove"},31865:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resumeall"},16938:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD_ANIMATION:e(44509),ANIMATION_COMPLETE:e(84563),ANIMATION_COMPLETE_KEY:e(61586),ANIMATION_REPEAT:e(72175),ANIMATION_RESTART:e(568),ANIMATION_START:e(37690),ANIMATION_STOP:e(58525),ANIMATION_UPDATE:e(5243),PAUSE_ALL:e(10598),REMOVE_ANIMATION:e(4860),RESUME_ALL:e(31865)}},13517:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Animation:e(85463),AnimationFrame:e(71519),AnimationManager:e(90249),AnimationState:e(16569),Events:e(16938)}},23740:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(33885),c=e(6659),u=e(69773),l=new d({initialize:function(){this.entries=new y,this.events=new c},add:function(r,a){return this.entries.set(r,a),this.events.emit(u.ADD,this,r,a),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var a=this.get(r);return a&&(this.entries.delete(r),this.events.emit(u.REMOVE,this,r,a.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});h.exports=l},43474:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23740),y=e(56694),c=e(97081),u=new y({initialize:function(r){this.game=r,this.binary=new d,this.bitmapFont=new d,this.json=new d,this.physics=new d,this.shader=new d,this.audio=new d,this.video=new d,this.text=new d,this.html=new d,this.obj=new d,this.tilemap=new d,this.xml=new d,this.custom={},this.game.events.once(c.DESTROY,this.destroy,this)},addCustom:function(l){return this.custom.hasOwnProperty(l)||(this.custom[l]=new d),this.custom[l]},destroy:function(){for(var l=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<l.length;r++)this[l[r]].destroy(),this[l[r]]=null;for(var a in this.custom)this.custom[a].destroy();this.custom=null,this.game=null}});h.exports=u},94762:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="add"},75968:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="remove"},69773:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD:e(94762),REMOVE:e(75968)}},45820:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BaseCache:e(23740),CacheManager:e(43474),Events:e(69773)}},51052:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(75606),u=e(6659),l=e(89787),r=e(74118),a=e(69360),v=e(93222),o=e(93736),p=new d({Extends:u,Mixins:[y.AlphaSingle,y.Visible],initialize:function(g,x,C,M){g===void 0&&(g=0),x===void 0&&(x=0),C===void 0&&(C=0),M===void 0&&(M=0),u.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=g,this._y=x,this._width=C,this._height=M,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new a,this.transparent=!0,this.backgroundColor=v("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new o(C/2,M/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(m){this.renderList.push(m)},setOrigin:function(m,g){return m===void 0&&(m=.5),g===void 0&&(g=m),this.originX=m,this.originY=g,this},getScroll:function(m,g,x){x===void 0&&(x=new o);var C=this.width*.5,M=this.height*.5;return x.x=m-C,x.y=g-M,this.useBounds&&(x.x=this.clampX(x.x),x.y=this.clampY(x.y)),x},centerOnX:function(m){var g=this.width*.5;return this.midPoint.x=m,this.scrollX=m-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(m){var g=this.height*.5;return this.midPoint.y=m,this.scrollY=m-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(m,g){return this.centerOnX(m),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var m=this._bounds,g=this.width*.5,x=this.height*.5;this.midPoint.set(m.centerX,m.centerY),this.scrollX=m.centerX-g,this.scrollY=m.centerY-x}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(m){if(this.disableCull)return m;var g=this.matrix.matrix,x=g[0],C=g[1],M=g[2],R=g[3],P=x*R-C*M;if(!P)return m;var w=g[4],A=g[5],G=this.scrollX,O=this.scrollY,L=this.width,I=this.height,F=this.y,D=F+I,V=this.x,k=V+L,W=this.culledObjects,X=m.length;P=1/P,W.length=0;for(var H=0;H<X;++H){var $=m[H];if(!$.hasOwnProperty("width")||$.parentContainer){W.push($);continue}var z=$.width,b=$.height,B=$.x-G*$.scrollFactorX-z*$.originX,N=$.y-O*$.scrollFactorY-b*$.originY,U=B*x+N*M+w,Y=B*C+N*R+A,K=(B+z)*x+(N+b)*M+w,Z=(B+z)*C+(N+b)*R+A;K>V&&U<k&&Z>F&&Y<D&&W.push($)}return W},getWorldPoint:function(m,g,x){x===void 0&&(x=new o);var C=this.matrix.matrix,M=C[0],R=C[1],P=C[2],w=C[3],A=C[4],G=C[5],O=M*w-R*P;if(!O)return x.x=m,x.y=g,x;O=1/O;var L=w*O,I=-R*O,F=-P*O,D=M*O,V=(P*G-w*A)*O,k=(R*A-M*G)*O,W=Math.cos(this.rotation),X=Math.sin(this.rotation),H=this.zoomX,$=this.zoomY,z=this.scrollX,b=this.scrollY,B=m+(z*W-b*X)*H,N=g+(z*X+b*W)*$;return x.x=B*L+N*F+V,x.y=B*I+N*D+k,x},ignore:function(m){var g=this.id;Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++){var C=m[x];Array.isArray(C)?this.ignore(C):C.isParent?this.ignore(C.getChildren()):C.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var m=this.width,g=this.height,x=m*.5,C=g*.5,M=this.zoomX,R=this.zoomY,P=this.matrix,w=m*this.originX,A=g*this.originY,G=this.scrollX,O=this.scrollY;this.useBounds&&(G=this.clampX(G),O=this.clampY(O)),this.roundPixels&&(w=Math.round(w),A=Math.round(A)),this.scrollX=G,this.scrollY=O;var L=G+x,I=O+C;this.midPoint.set(L,I);var F=m/M,D=g/R;this.worldView.setTo(L-F/2,I-D/2,F,D),P.applyITRS(this.x+w,this.y+A,this.rotation,M,R),P.translate(-w,-A)},clampX:function(m){var g=this._bounds,x=this.displayWidth,C=g.x+(x-this.width)/2,M=Math.max(C,C+g.width-x);return m<C?m=C:m>M&&(m=M),m},clampY:function(m){var g=this._bounds,x=this.displayHeight,C=g.y+(x-this.height)/2,M=Math.max(C,C+g.height-x);return m<C?m=C:m>M&&(m=M),m},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(m){return m===void 0&&(m=0),this.rotation=c(m),this},setBackgroundColor:function(m){return m===void 0&&(m="rgba(0,0,0,0)"),this.backgroundColor=v(m),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(m,g,x,C,M){return M===void 0&&(M=!1),this._bounds.setTo(m,g,x,C),this.dirty=!0,this.useBounds=!0,M?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(m){m===void 0&&(m=new r);var g=this._bounds;return m.setTo(g.x,g.y,g.width,g.height),m},setName:function(m){return m===void 0&&(m=""),this.name=m,this},setPosition:function(m,g){return g===void 0&&(g=m),this.x=m,this.y=g,this},setRotation:function(m){return m===void 0&&(m=0),this.rotation=m,this},setRoundPixels:function(m){return this.roundPixels=m,this},setScene:function(m,g){g===void 0&&(g=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=m,this.isSceneCamera=g;var x=m.sys;return this.sceneManager=x.game.scene,this.scaleManager=x.scale,this.cameraManager=x.cameras,this.updateSystem(),this},setScroll:function(m,g){return g===void 0&&(g=m),this.scrollX=m,this.scrollY=g,this},setSize:function(m,g){return g===void 0&&(g=m),this.width=m,this.height=g,this},setViewport:function(m,g,x,C){return this.x=m,this.y=g,this.width=x,this.height=C,this},setZoom:function(m,g){return m===void 0&&(m=1),g===void 0&&(g=m),m===0&&(m=.001),g===0&&(g=.001),this.zoomX=m,this.zoomY=g,this},setMask:function(m,g){return g===void 0&&(g=!0),this.mask=m,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(m){return m===void 0&&(m=!1),m&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var m={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(m.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),m},update:function(){},setIsSceneCamera:function(m){return this.isSceneCamera=m,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var m=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;m&&!this._customViewport?g.customViewports++:!m&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=m}},destroy:function(){this.emit(l.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(m){this._x=m,this.updateSystem()}},y:{get:function(){return this._y},set:function(m){this._y=m,this.updateSystem()}},width:{get:function(){return this._width},set:function(m){this._width=m,this.updateSystem()}},height:{get:function(){return this._height},set:function(m){this._height=m,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(m){m!==this._scrollX&&(this._scrollX=m,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(m){m!==this._scrollY&&(this._scrollY=m,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(m){this._zoomX=m,this._zoomY=m,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(m){this._zoomX=m,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(m){this._zoomY=m,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(m){this._rotation=m,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});h.exports=p},47751:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(51052),y=e(79993),c=e(82897),u=e(56694),l=e(64937),r=e(53030),a=e(89787),v=e(42798),o=e(74118),p=e(93736),m=new u({Extends:d,Mixins:[l.PostPipeline],initialize:function(x,C,M,R){d.call(this,x,C,M,R),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new p(1,1),this.followOffset=new p,this.deadzone=null,this._follow=null},setDeadzone:function(g,x){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=x):this.deadzone=new o(0,0,g,x),this._follow){var C=this.width/2,M=this.height/2,R=this._follow.x-this.followOffset.x,P=this._follow.y-this.followOffset.y;this.midPoint.set(R,P),this.scrollX=R-C,this.scrollY=P-M}y(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,x,C,M,R,P){return this.fadeEffect.start(!1,g,x,C,M,!0,R,P)},fadeOut:function(g,x,C,M,R,P){return this.fadeEffect.start(!0,g,x,C,M,!0,R,P)},fadeFrom:function(g,x,C,M,R,P,w){return this.fadeEffect.start(!1,g,x,C,M,R,P,w)},fade:function(g,x,C,M,R,P,w){return this.fadeEffect.start(!0,g,x,C,M,R,P,w)},flash:function(g,x,C,M,R,P,w){return this.flashEffect.start(g,x,C,M,R,P,w)},shake:function(g,x,C,M,R){return this.shakeEffect.start(g,x,C,M,R)},pan:function(g,x,C,M,R,P,w){return this.panEffect.start(g,x,C,M,R,P,w)},rotateTo:function(g,x,C,M,R,P,w){return this.rotateToEffect.start(g,x,C,M,R,P,w)},zoomTo:function(g,x,C,M,R,P){return this.zoomEffect.start(g,x,C,M,R,P)},preRender:function(){this.renderList.length=0;var g=this.width,x=this.height,C=g*.5,M=x*.5,R=this.zoom,P=this.matrix,w=g*this.originX,A=x*this.originY,G=this._follow,O=this.deadzone,L=this.scrollX,I=this.scrollY;O&&y(O,this.midPoint.x,this.midPoint.y);var F=!1;if(this.roundPixels&&(w=Math.floor(w),A=Math.floor(A)),G&&!this.panEffect.isRunning){var D=this.lerp,V=G.x-this.followOffset.x,k=G.y-this.followOffset.y;this.roundPixels&&(V=Math.floor(V),k=Math.floor(k)),O?(V<O.x?L=v(L,L-(O.x-V),D.x):V>O.right&&(L=v(L,L+(V-O.right),D.x)),k<O.y?I=v(I,I-(O.y-k),D.y):k>O.bottom&&(I=v(I,I+(k-O.bottom),D.y))):(L=v(L,V-w,D.x),I=v(I,k-A,D.y)),F=!0}this.useBounds&&(L=this.clampX(L),I=this.clampY(I)),this.roundPixels&&(L=Math.floor(L),I=Math.floor(I)),this.scrollX=L,this.scrollY=I;var W=L+C,X=I+M;this.midPoint.set(W,X);var H=g/R,$=x/R,z=W-H/2,b=X-$/2;this.roundPixels&&(z=Math.floor(z),b=Math.floor(b)),this.worldView.setTo(z,b,H,$),P.applyITRS(Math.floor(this.x+w),Math.floor(this.y+A),this.rotation,R,R),P.translate(-w,-A),this.shakeEffect.preRender(),F&&this.emit(a.FOLLOW_UPDATE,this,G)},setLerp:function(g,x){return g===void 0&&(g=1),x===void 0&&(x=g),this.lerp.set(g,x),this},setFollowOffset:function(g,x){return g===void 0&&(g=0),x===void 0&&(x=0),this.followOffset.set(g,x),this},startFollow:function(g,x,C,M,R,P){x===void 0&&(x=!1),C===void 0&&(C=1),M===void 0&&(M=C),R===void 0&&(R=0),P===void 0&&(P=R),this._follow=g,this.roundPixels=x,C=c(C,0,1),M=c(M,0,1),this.lerp.set(C,M),this.followOffset.set(R,P);var w=this.width/2,A=this.height/2,G=g.x-R,O=g.y-P;return this.midPoint.set(G,O),this.scrollX=G-w,this.scrollY=O-A,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,x){this.visible&&(this.rotateToEffect.update(g,x),this.panEffect.update(g,x),this.zoomEffect.update(g,x),this.shakeEffect.update(g,x),this.flashEffect.update(g,x),this.fadeEffect.update(g,x))},destroy:function(){this.resetFX(),d.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});h.exports=m},62382:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47751),y=e(56694),c=e(72632),u=e(91963),l=e(94287),r=e(40444),a=e(7599),v=new y({initialize:function(p){this.scene=p,this.systems=p.sys,this.roundPixels=p.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,p.sys.events.once(a.BOOT,this.boot,this),p.sys.events.on(a.START,this.start,this)},boot:function(){var o=this.systems;o.settings.cameras?this.fromJSON(o.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new d(0,0,o.scale.width,o.scale.height).setScene(this.scene),o.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){if(!this.main){var o=this.systems;o.settings.cameras?this.fromJSON(o.settings.cameras):this.add(),this.main=this.cameras[0]}var p=this.systems.events;p.on(a.UPDATE,this.update,this),p.once(a.SHUTDOWN,this.shutdown,this)},add:function(o,p,m,g,x,C){o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),x===void 0&&(x=!1),C===void 0&&(C="");var M=new d(o,p,m,g);return M.setName(C),M.setScene(this.scene),M.setRoundPixels(this.roundPixels),M.id=this.getNextID(),this.cameras.push(M),x&&(this.main=M),M},addExisting:function(o,p){p===void 0&&(p=!1);var m=this.cameras.indexOf(o);return m===-1?(o.id=this.getNextID(),o.setRoundPixels(this.roundPixels),this.cameras.push(o),p&&(this.main=o),o):null},getNextID:function(){for(var o=this.cameras,p=1,m=0;m<32;m++){for(var g=!1,x=0;x<o.length;x++){var C=o[x];if(C&&C.id===p){g=!0;continue}}if(g)p=p<<1;else return p}return 0},getTotal:function(o){o===void 0&&(o=!1);for(var p=0,m=this.cameras,g=0;g<m.length;g++){var x=m[g];(!o||o&&x.visible)&&p++}return p},fromJSON:function(o){Array.isArray(o)||(o=[o]);for(var p=this.scene.sys.scale.width,m=this.scene.sys.scale.height,g=0;g<o.length;g++){var x=o[g],C=c(x,"x",0),M=c(x,"y",0),R=c(x,"width",p),P=c(x,"height",m),w=this.add(C,M,R,P);w.name=c(x,"name",""),w.zoom=c(x,"zoom",1),w.rotation=c(x,"rotation",0),w.scrollX=c(x,"scrollX",0),w.scrollY=c(x,"scrollY",0),w.roundPixels=c(x,"roundPixels",!1),w.visible=c(x,"visible",!0);var A=c(x,"backgroundColor",!1);A&&w.setBackgroundColor(A);var G=c(x,"bounds",null);if(G){var O=c(G,"x",0),L=c(G,"y",0),I=c(G,"width",p),F=c(G,"height",m);w.setBounds(O,L,I,F)}}return this},getCamera:function(o){for(var p=this.cameras,m=0;m<p.length;m++)if(p[m].name===o)return p[m];return null},getCamerasBelowPointer:function(o){for(var p=this.cameras,m=o.x,g=o.y,x=[],C=0;C<p.length;C++){var M=p[C];M.visible&&M.inputEnabled&&l(M,m,g)&&x.unshift(M)}return x},remove:function(o,p){p===void 0&&(p=!0),Array.isArray(o)||(o=[o]);for(var m=0,g=this.cameras,x=0;x<o.length;x++){var C=g.indexOf(o[x]);C!==-1&&(p?g[C].destroy():g[C].renderList=[],g.splice(C,1),m++)}return!this.main&&g[0]&&(this.main=g[0]),m},render:function(o,p){for(var m=this.scene,g=this.cameras,x=0;x<g.length;x++){var C=g[x];if(C.visible&&C.alpha>0){C.preRender();var M=this.getVisibleChildren(p.getChildren(),C);o.render(m,M,C)}}},getVisibleChildren:function(o,p){return o.filter(function(m){return m.willRender(p)})},resetAll:function(){for(var o=0;o<this.cameras.length;o++)this.cameras[o].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(o,p){for(var m=0;m<this.cameras.length;m++)this.cameras[m].update(o,p)},onResize:function(o,p,m,g,x){for(var C=0;C<this.cameras.length;C++){var M=this.cameras[C];M._x===0&&M._y===0&&M._width===g&&M._height===x&&M.setSize(p.width,p.height)}},resize:function(o,p){for(var m=0;m<this.cameras.length;m++)this.cameras[m].setSize(o,p)},shutdown:function(){this.main=void 0;for(var o=0;o<this.cameras.length;o++)this.cameras[o].destroy();this.cameras=[];var p=this.systems.events;p.off(a.UPDATE,this.update,this),p.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(a.START,this.start,this),this.systems.events.off(a.DESTROY,this.destroy,this),this.systems.game.scale.off(r.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});u.register("CameraManager",v,"cameras"),h.exports=v},92522:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=e(56694),c=e(89787),u=new y({initialize:function(r){this.camera=r,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,r,a,v,o,p,m,g){if(l===void 0&&(l=!0),r===void 0&&(r=1e3),a===void 0&&(a=0),v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=!1),m===void 0&&(m=null),g===void 0&&(g=this.camera.scene),!p&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=l,this.progress=0,this.red=a,this.green=v,this.blue=o,this.alpha=l?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=m,this._onUpdateScope=g;var x=l?c.FADE_OUT_START:c.FADE_IN_START;return this.camera.emit(x,this.camera,this,r,a,v,o),this.camera},update:function(l,r){this.isRunning&&(this._elapsed+=r,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(l){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(l,r){if(!this.isRunning&&!this.isComplete)return!1;var a=this.camera,v=this.red/255,o=this.green/255,p=this.blue/255;return l.drawFillRect(a.x,a.y,a.width,a.height,r(p,o,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var l=this.direction?c.FADE_OUT_COMPLETE:c.FADE_IN_COMPLETE;this.camera.emit(l,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});h.exports=u},22151:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=e(56694),c=e(89787),u=new y({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(l,r,a,v,o,p,m){return l===void 0&&(l=250),r===void 0&&(r=255),a===void 0&&(a=255),v===void 0&&(v=255),o===void 0&&(o=!1),p===void 0&&(p=null),m===void 0&&(m=this.camera.scene),!o&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,this.red=r,this.green=a,this.blue=v,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=m,this.camera.emit(c.FLASH_START,this.camera,this,l,r,a,v),this.camera)},update:function(l,r){this.isRunning&&(this._elapsed+=r,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(l){if(!this.isRunning)return!1;var r=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(l,r){if(!this.isRunning)return!1;var a=this.camera,v=this.red/255,o=this.green/255,p=this.blue/255;return l.drawFillRect(a.x,a.y,a.width,a.height,r(p,o,v,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});h.exports=u},37551:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=e(56694),c=e(35060),u=e(89787),l=e(93736),r=new y({initialize:function(v){this.camera=v,this.isRunning=!1,this.duration=0,this.source=new l,this.current=new l,this.destination=new l,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,v,o,p,m,g,x){o===void 0&&(o=1e3),p===void 0&&(p=c.Linear),m===void 0&&(m=!1),g===void 0&&(g=null),x===void 0&&(x=this.camera.scene);var C=this.camera;return!m&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source.set(C.scrollX,C.scrollY),this.destination.set(a,v),C.getScroll(a,v,this.current),typeof p=="string"&&c.hasOwnProperty(p)?this.ease=c[p]:typeof p=="function"&&(this.ease=p),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=x,this.camera.emit(u.PAN_START,this.camera,this,o,a,v)),C},update:function(a,v){if(this.isRunning){this._elapsed+=v;var o=d(this._elapsed/this.duration,0,1);this.progress=o;var p=this.camera;if(this._elapsed<this.duration){var m=this.ease(o);p.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*m,x=this.source.y+(this.current.y-this.source.y)*m;p.setScroll(g,x),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,o,g,x)}else p.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,p,o,p.scrollX,p.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});h.exports=r},1771:(h,S,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var d=e(82897),y=e(56694),c=e(89787),u=e(35060),l=new y({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(r,a,v,o,p,m,g){v===void 0&&(v=1e3),o===void 0&&(o=u.Linear),p===void 0&&(p=!1),m===void 0&&(m=null),g===void 0&&(g=this.camera.scene),a===void 0&&(a=!1),this.shortestPath=a;var x=r;r<0?(x=-1*r,this.clockwise=!1):this.clockwise=!0;var C=360*Math.PI/180;x=x-Math.floor(x/C)*C;var M=this.camera;if(!p&&this.isRunning)return M;if(this.isRunning=!0,this.duration=v,this.progress=0,this.source=M.rotation,this.destination=x,typeof o=="string"&&u.hasOwnProperty(o)?this.ease=u[o]:typeof o=="function"&&(this.ease=o),this._elapsed=0,this._onUpdate=m,this._onUpdateScope=g,this.shortestPath){var R=0,P=0;this.destination>this.source?R=Math.abs(this.destination-this.source):R=Math.abs(this.destination+C)-this.source,this.source>this.destination?P=Math.abs(this.source-this.destination):P=Math.abs(this.source+C)-this.destination,R<P?this.clockwise=!0:R>P&&(this.clockwise=!1)}return this.camera.emit(c.ROTATE_START,this.camera,this,v,x),M},update:function(r,a){if(this.isRunning){this._elapsed+=a;var v=d(this._elapsed/this.duration,0,1);this.progress=v;var o=this.camera;if(this._elapsed<this.duration){var p=this.ease(v);this.current=o.rotation;var m=0,g=360*Math.PI/180,x=this.destination,C=this.current;this.clockwise===!1&&(x=this.current,C=this.destination),x>=C?m=Math.abs(x-C):m=Math.abs(x+g)-C;var M=0;this.clockwise?M=o.rotation+m*p:M=o.rotation-m*p,o.rotation=M,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,v,M)}else o.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,v,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});h.exports=l},3241:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=e(56694),c=e(89787),u=e(93736),l=new y({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.intensity=new u,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(r,a,v,o,p){return r===void 0&&(r=100),a===void 0&&(a=.05),v===void 0&&(v=!1),o===void 0&&(o=null),p===void 0&&(p=this.camera.scene),!v&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,typeof a=="number"?this.intensity.set(a):this.intensity.set(a.x,a.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=o,this._onUpdateScope=p,this.camera.emit(c.SHAKE_START,this.camera,this,r,a),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,a){if(this.isRunning)if(this._elapsed+=a,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var v=this.intensity,o=this.camera.width,p=this.camera.height,m=this.camera.zoom;this._offsetX=(Math.random()*v.x*o*2-v.x*o)*m,this._offsetY=(Math.random()*v.y*p*2-v.y*p)*m,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(c.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});h.exports=l},13383:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=e(56694),c=e(35060),u=e(89787),l=new y({initialize:function(a){this.camera=a,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,a,v,o,p,m){a===void 0&&(a=1e3),v===void 0&&(v=c.Linear),o===void 0&&(o=!1),p===void 0&&(p=null),m===void 0&&(m=this.camera.scene);var g=this.camera;return!o&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source=g.zoom,this.destination=r,typeof v=="string"&&c.hasOwnProperty(v)?this.ease=c[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=m,this.camera.emit(u.ZOOM_START,this.camera,this,a,r)),g},update:function(r,a){this.isRunning&&(this._elapsed+=a,this.progress=d(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});h.exports=l},53030:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Fade:e(92522),Flash:e(22151),Pan:e(37551),Shake:e(3241),RotateTo:e(1771),Zoom:e(13383)}},39577:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="cameradestroy"},85373:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeincomplete"},92057:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeinstart"},1903:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeoutcomplete"},96131:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerafadeoutstart"},85409:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="cameraflashcomplete"},25500:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="cameraflashstart"},44071:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="followupdate"},19818:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerapancomplete"},80002:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerapanstart"},87966:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postrender"},74217:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},34805:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerarotatecomplete"},30408:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerarotatestart"},49856:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerashakecomplete"},69189:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerashakestart"},67657:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerazoomcomplete"},14229:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="camerazoomstart"},89787:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DESTROY:e(39577),FADE_IN_COMPLETE:e(85373),FADE_IN_START:e(92057),FADE_OUT_COMPLETE:e(1903),FADE_OUT_START:e(96131),FLASH_COMPLETE:e(85409),FLASH_START:e(25500),FOLLOW_UPDATE:e(44071),PAN_COMPLETE:e(19818),PAN_START:e(80002),POST_RENDER:e(87966),PRE_RENDER:e(74217),ROTATE_COMPLETE:e(34805),ROTATE_START:e(30408),SHAKE_COMPLETE:e(49856),SHAKE_START:e(69189),ZOOM_COMPLETE:e(67657),ZOOM_START:e(14229)}},32356:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Camera:e(47751),BaseCamera:e(51052),CameraManager:e(62382),Effects:e(53030),Events:e(89787)}},84219:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(10850),c=new d({initialize:function(l){this.camera=y(l,"camera",null),this.left=y(l,"left",null),this.right=y(l,"right",null),this.up=y(l,"up",null),this.down=y(l,"down",null),this.zoomIn=y(l,"zoomIn",null),this.zoomOut=y(l,"zoomOut",null),this.zoomSpeed=y(l,"zoomSpeed",.01),this.minZoom=y(l,"minZoom",.001),this.maxZoom=y(l,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=y(l,"speed",null);typeof r=="number"?(this.speedX=r,this.speedY=r):(this.speedX=y(l,"speed.x",0),this.speedY=y(l,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(this.active){u===void 0&&(u=1);var l=this.camera;this.up&&this.up.isDown?l.scrollY-=this.speedY*u|0:this.down&&this.down.isDown&&(l.scrollY+=this.speedY*u|0),this.left&&this.left.isDown?l.scrollX-=this.speedX*u|0:this.right&&this.right.isDown&&(l.scrollX+=this.speedX*u|0),this.zoomIn&&this.zoomIn.isDown?(l.zoom-=this.zoomSpeed,l.zoom<this.minZoom&&(l.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(l.zoom+=this.zoomSpeed,l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});h.exports=c},69370:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(10850),c=new d({initialize:function(l){this.camera=y(l,"camera",null),this.left=y(l,"left",null),this.right=y(l,"right",null),this.up=y(l,"up",null),this.down=y(l,"down",null),this.zoomIn=y(l,"zoomIn",null),this.zoomOut=y(l,"zoomOut",null),this.zoomSpeed=y(l,"zoomSpeed",.01),this.minZoom=y(l,"minZoom",.001),this.maxZoom=y(l,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=y(l,"acceleration",null);typeof r=="number"?(this.accelX=r,this.accelY=r):(this.accelX=y(l,"acceleration.x",0),this.accelY=y(l,"acceleration.y",0)),this.dragX=0,this.dragY=0;var a=y(l,"drag",null);typeof a=="number"?(this.dragX=a,this.dragY=a):(this.dragX=y(l,"drag.x",0),this.dragY=y(l,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var v=y(l,"maxSpeed",null);typeof v=="number"?(this.maxSpeedX=v,this.maxSpeedY=v):(this.maxSpeedX=y(l,"maxSpeed.x",0),this.maxSpeedY=y(l,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(this.active){u===void 0&&(u=1);var l=this.camera;this._speedX>0?(this._speedX-=this.dragX*u,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*u,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*u,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*u,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(l.scrollX-=this._speedX*u|0),this._speedY!==0&&(l.scrollY-=this._speedY*u|0),this._zoom!==0&&(l.zoom+=this._zoom,l.zoom<this.minZoom?l.zoom=this.minZoom:l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});h.exports=c},6524:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={FixedKeyControl:e(84219),SmoothedKeyControl:e(69370)}},44143:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Controls:e(6524),Scene2D:e(32356)}},86459:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={VERSION:"3.60.0",BlendModes:e(95723),ScaleModes:e(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};h.exports=d},14033:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(86459),c=e(18360),u=e(77290),l=e(72632),r=e(10850),a=e(42911),v=e(72283),o=e(5923),p=e(65641),m=e(93222),g=new d({initialize:function(C){C===void 0&&(C={});var M=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],R="#ffffff",P=r(C,"scale",null);this.width=r(P,"width",1024,C),this.height=r(P,"height",768,C),this.zoom=r(P,"zoom",1,C),this.parent=r(P,"parent",void 0,C),this.scaleMode=r(P,P?"mode":"scaleMode",0,C),this.expandParent=r(P,"expandParent",!0,C),this.autoRound=r(P,"autoRound",!1,C),this.autoCenter=r(P,"autoCenter",0,C),this.resizeInterval=r(P,"resizeInterval",500,C),this.fullscreenTarget=r(P,"fullscreenTarget",null,C),this.minWidth=r(P,"minWidth",0,C),this.maxWidth=r(P,"maxWidth",0,C),this.minHeight=r(P,"minHeight",0,C),this.maxHeight=r(P,"maxHeight",0,C),this.renderType=r(C,"type",y.AUTO),this.canvas=r(C,"canvas",null),this.context=r(C,"context",null),this.canvasStyle=r(C,"canvasStyle",null),this.customEnvironment=r(C,"customEnvironment",!1),this.sceneConfig=r(C,"scene",null),this.seed=r(C,"seed",[(Date.now()*Math.random()).toString()]),o.RND=new o.RandomDataGenerator(this.seed),this.gameTitle=r(C,"title",""),this.gameURL=r(C,"url","https://phaser.io"),this.gameVersion=r(C,"version",""),this.autoFocus=r(C,"autoFocus",!0),this.stableSort=r(C,"stableSort",-1),this.stableSort===-1&&(this.stableSort=u.browser.es2019?1:0),u.features.stableSort=this.stableSort,this.domCreateContainer=r(C,"dom.createContainer",!1),this.domPointerEvents=r(C,"dom.pointerEvents","none"),this.inputKeyboard=r(C,"input.keyboard",!0),this.inputKeyboardEventTarget=r(C,"input.keyboard.target",window),this.inputKeyboardCapture=r(C,"input.keyboard.capture",[]),this.inputMouse=r(C,"input.mouse",!0),this.inputMouseEventTarget=r(C,"input.mouse.target",null),this.inputMousePreventDefaultDown=r(C,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=r(C,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=r(C,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=r(C,"input.mouse.preventDefaultWheel",!0),this.inputTouch=r(C,"input.touch",u.input.touch),this.inputTouchEventTarget=r(C,"input.touch.target",null),this.inputTouchCapture=r(C,"input.touch.capture",!0),this.inputActivePointers=r(C,"input.activePointers",1),this.inputSmoothFactor=r(C,"input.smoothFactor",0),this.inputWindowEvents=r(C,"input.windowEvents",!0),this.inputGamepad=r(C,"input.gamepad",!1),this.inputGamepadEventTarget=r(C,"input.gamepad.target",window),this.disableContextMenu=r(C,"disableContextMenu",!1),this.audio=r(C,"audio",{}),this.hideBanner=r(C,"banner",null)===!1,this.hidePhaser=r(C,"banner.hidePhaser",!1),this.bannerTextColor=r(C,"banner.text",R),this.bannerBackgroundColor=r(C,"banner.background",M),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=r(C,"fps",null);var w=r(C,"render",null);this.pipeline=r(w,"pipeline",null,C),this.autoMobilePipeline=r(w,"autoMobilePipeline",!0,C),this.defaultPipeline=r(w,"defaultPipeline",p.MULTI_PIPELINE,C),this.antialias=r(w,"antialias",!0,C),this.antialiasGL=r(w,"antialiasGL",!0,C),this.mipmapFilter=r(w,"mipmapFilter","",C),this.desynchronized=r(w,"desynchronized",!1,C),this.roundPixels=r(w,"roundPixels",!1,C),this.pixelArt=r(w,"pixelArt",this.zoom!==1,C),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=r(w,"transparent",!1,C),this.clearBeforeRender=r(w,"clearBeforeRender",!0,C),this.preserveDrawingBuffer=r(w,"preserveDrawingBuffer",!1,C),this.premultipliedAlpha=r(w,"premultipliedAlpha",!0,C),this.failIfMajorPerformanceCaveat=r(w,"failIfMajorPerformanceCaveat",!1,C),this.powerPreference=r(w,"powerPreference","default",C),this.batchSize=r(w,"batchSize",4096,C),this.maxTextures=r(w,"maxTextures",-1,C),this.maxLights=r(w,"maxLights",10,C);var A=r(C,"backgroundColor",0);this.backgroundColor=m(A),this.transparent&&(this.backgroundColor=m(0),this.backgroundColor.alpha=0),this.preBoot=r(C,"callbacks.preBoot",v),this.postBoot=r(C,"callbacks.postBoot",v),this.physics=r(C,"physics",{}),this.defaultPhysicsSystem=r(this.physics,"default",!1),this.loaderBaseURL=r(C,"loader.baseURL",""),this.loaderPath=r(C,"loader.path",""),this.loaderMaxParallelDownloads=r(C,"loader.maxParallelDownloads",u.os.android?6:32),this.loaderCrossOrigin=r(C,"loader.crossOrigin",void 0),this.loaderResponseType=r(C,"loader.responseType",""),this.loaderAsync=r(C,"loader.async",!0),this.loaderUser=r(C,"loader.user",""),this.loaderPassword=r(C,"loader.password",""),this.loaderTimeout=r(C,"loader.timeout",0),this.loaderWithCredentials=r(C,"loader.withCredentials",!1),this.loaderImageLoadType=r(C,"loader.imageLoadType","XHR"),this.loaderLocalScheme=r(C,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=r(C,"fx.glow.quality",.1),this.glowFXDistance=r(C,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var G=r(C,"plugins",null),O=c.DefaultScene;G&&(Array.isArray(G)?this.defaultPlugins=G:a(G)&&(this.installGlobalPlugins=l(G,"global",[]),this.installScenePlugins=l(G,"scene",[]),Array.isArray(G.default)?O=G.default:Array.isArray(G.defaultMerge)&&(O=O.concat(G.defaultMerge)))),this.defaultPlugins=O;var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=r(C,"images.default",L+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=r(C,"images.missing",L+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=r(C,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=y.WEBGL:window.FORCE_CANVAS&&(this.renderType=y.CANVAS))}});h.exports=g},50150:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70616),y=e(61068),c=e(86459),u=e(90185),l=function(r){var a=r.config;if((a.customEnvironment||a.canvas)&&a.renderType===c.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!a.customEnvironment&&!a.canvas&&a.renderType!==c.HEADLESS)if(a.renderType===c.AUTO&&(a.renderType=u.webGL?c.WEBGL:c.CANVAS),a.renderType===c.WEBGL){if(!u.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(a.renderType===c.CANVAS){if(!u.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+a.renderType);a.antialias||y.disableSmoothing();var v=r.scale.baseSize,o=v.width,p=v.height;if(a.canvas?(r.canvas=a.canvas,r.canvas.width=o,r.canvas.height=p):r.canvas=y.create(r,o,p,a.renderType),a.canvasStyle&&(r.canvas.style=a.canvasStyle),a.antialias||d.setCrisp(r.canvas),a.renderType!==c.HEADLESS){var m,g;m=e(91135),g=e(11857),a.renderType===c.WEBGL?r.renderer=new g(r):(r.renderer=new m(r),r.context=r.renderer.gameContext)}};h.exports=l},77291:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86459),y=function(c){var u=c.config;if(!u.hideBanner){var l="WebGL";u.renderType===d.CANVAS?l="Canvas":u.renderType===d.HEADLESS&&(l="Headless");var r=u.audio,a=c.device.audio,v;if(a.webAudio&&!r.disableWebAudio?v="Web Audio":r.noAudio||!a.webAudio&&!a.audioData?v="No Audio":v="HTML5 Audio",c.device.browser.ie)window.console&&console.log("Phaser v"+d.VERSION+" / https://phaser.io");else{var o="",p=[o];if(Array.isArray(u.bannerBackgroundColor)){var m;u.bannerBackgroundColor.forEach(function(x){o=o.concat("%c "),p.push("background: "+x),m=x}),p[p.length-1]="color: "+u.bannerTextColor+"; background: "+m}else o=o.concat("%c "),p.push("color: "+u.bannerTextColor+"; background: "+u.bannerBackgroundColor);p.push("background: transparent"),u.gameTitle&&(o=o.concat(u.gameTitle),u.gameVersion&&(o=o.concat(" v"+u.gameVersion)),u.hidePhaser||(o=o.concat(" / ")));var g="";u.hidePhaser||(o=o.concat("Phaser v"+d.VERSION+g+" ("+l+" | "+v+")")),o=o.concat(" %c "+u.gameURL),p[0]=o,console.log.apply(console,p)}}};h.exports=y},15213:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99584),y=e(90249),c=e(43474),u=e(61068),l=e(56694),r=e(14033),a=e(85178),v=e(50150),o=e(81078),p=e(77291),m=e(77290),g=e(21546),x=e(6659),C=e(97081),M=e(69898),R=e(91963),P=e(49274),w=e(756),A=e(13553),G=e(38203),O=e(6237),L=e(26617),I=e(26493),F=e(84191),D=new l({initialize:function(k){this.config=new r(k),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new x,this.anims=new y(this),this.textures=new O(this),this.cache=new c(this),this.registry=new o(this,new x),this.input=new M(this,this.config),this.scene=new A(this,this.config.sceneConfig),this.device=m,this.scale=new w(this,this.config),this.sound=null,this.sound=F.create(this),this.loop=new L(this,this.config.fps),this.plugins=new P(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,g(this.boot.bind(this))},boot:function(){if(!R.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),v(this),a(this),p(this),d(this.canvas,this.config.parent),this.textures.once(G.READY,this.texturesReady,this),this.events.emit(C.BOOT)},texturesReady:function(){this.events.emit(C.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),I(this);var V=this.events;V.on(C.HIDDEN,this.onHidden,this),V.on(C.VISIBLE,this.onVisible,this),V.on(C.BLUR,this.onBlur,this),V.on(C.FOCUS,this.onFocus,this)},step:function(V,k){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var W=this.events;W.emit(C.PRE_STEP,V,k),W.emit(C.STEP,V,k),this.scene.update(V,k),W.emit(C.POST_STEP,V,k);var X=this.renderer;X.preRender(),W.emit(C.PRE_RENDER,X,V,k),this.scene.render(X),X.postRender(),W.emit(C.POST_RENDER,X,V,k)}},headlessStep:function(V,k){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var W=this.events;W.emit(C.PRE_STEP,V,k),W.emit(C.STEP,V,k),this.scene.update(V,k),W.emit(C.POST_STEP,V,k),this.scene.isProcessing=!1,W.emit(C.PRE_RENDER,null,V,k),W.emit(C.POST_RENDER,null,V,k)}},onHidden:function(){this.loop.pause(),this.events.emit(C.PAUSE)},pause:function(){var V=this.isPaused;this.isPaused=!0,V||this.events.emit(C.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(C.RESUME)},resume:function(){var V=this.isPaused;this.isPaused=!1,V&&this.events.emit(C.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(V,k){k===void 0&&(k=!1),this.pendingDestroy=!0,this.removeCanvas=V,this.noReturn=k},runDestroy:function(){this.scene.destroy(),this.events.emit(C.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(u.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});h.exports=D},26617:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(10850),c=e(72283),u=e(27385),l=new d({initialize:function(a,v){this.game=a,this.raf=new u,this.started=!1,this.running=!1,this.minFps=y(v,"min",5),this.targetFps=y(v,"target",60),this.fpsLimit=y(v,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=c,this.forceSetTimeOut=y(v,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=y(v,"deltaHistory",10),this.panicMax=y(v,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=y(v,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=Math.min(this._target,this.deltaHistory[a]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var a=0;a<this.deltaSmoothingMax;a++)this.deltaHistory[a]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r;var v=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(v,this.forceSetTimeOut,this._target)},smoothDelta:function(r){var a=this.deltaIndex,v=this.deltaHistory,o=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,r=Math.min(r,this._target)),r>this._min&&(r=v[a],r=Math.min(r,this._min)),v[a]=r,this.deltaIndex++,this.deltaIndex>=o&&(this.deltaIndex=0);for(var p=0,m=0;m<o;m++)p+=v[m];return p/=o,p},updateFPS:function(r){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0},stepLimitFPS:function(r){this.now=r;var a=Math.max(0,r-this.lastTime);this.rawDelta=a,this.time+=this.rawDelta,this.smoothStep&&(a=this.smoothDelta(a)),this.delta+=a,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(r,this.delta),this.delta=0),this.lastTime=r,this.frame++},step:function(r){this.now=r;var a=Math.max(0,r-this.lastTime);this.rawDelta=a,this.time+=this.rawDelta,this.smoothStep&&(a=this.smoothDelta(a)),this.delta=a,r>=this.nextFpsUpdate&&this.updateFPS(r),this.framesThisSecond++,this.callback(r,a),this.lastTime=r,this.frame++},tick:function(){var r=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(r):this.step(r)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){r===void 0&&(r=!1);var a=window.performance.now();if(!this.running){r&&(this.startTime+=-this.lastTime+(this.lastTime+a));var v=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(v,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=a+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});h.exports=l},26493:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97081),y=function(c){var u,l=c.events;if(document.hidden!==void 0)u="visibilitychange";else{var r=["webkit","moz","ms"];r.forEach(function(v){document[v+"Hidden"]!==void 0&&(document.hidden=function(){return document[v+"Hidden"]},u=v+"visibilitychange")})}var a=function(v){document.hidden||v.type==="pause"?l.emit(d.HIDDEN):l.emit(d.VISIBLE)};u&&document.addEventListener(u,a,!1),window.onblur=function(){l.emit(d.BLUR)},window.onfocus=function(){l.emit(d.FOCUS)},window.focus&&c.config.autoFocus&&window.focus()};h.exports=y},41651:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="blur"},5520:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},51673:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="contextlost"},25055:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},23767:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="focus"},57564:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="hidden"},38327:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},43807:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postrender"},73652:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="poststep"},780:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},13781:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prestep"},38247:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="ready"},29129:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},34994:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="step"},98704:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="visible"},97081:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BLUR:e(41651),BOOT:e(5520),CONTEXT_LOST:e(51673),DESTROY:e(25055),FOCUS:e(23767),HIDDEN:e(57564),PAUSE:e(38327),POST_RENDER:e(43807),POST_STEP:e(73652),PRE_RENDER:e(780),PRE_STEP:e(13781),READY:e(38247),RESUME:e(29129),STEP:e(34994),VISIBLE:e(98704)}},80293:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Config:e(14033),CreateRenderer:e(50150),DebugHeader:e(77291),Events:e(97081),TimeStep:e(26617),VisibilityHandler:e(26493)}},52780:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(81543),y=e(61068),c=e(10850),u=function(l){var r=c(l,"data",[]),a=c(l,"canvas",null),v=c(l,"palette",d),o=c(l,"pixelWidth",1),p=c(l,"pixelHeight",o),m=c(l,"resizeCanvas",!0),g=c(l,"clearCanvas",!0),x=c(l,"preRender",null),C=c(l,"postRender",null),M=Math.floor(Math.abs(r[0].length*o)),R=Math.floor(Math.abs(r.length*p));a||(a=y.create2D(this,M,R),m=!1,g=!1),m&&(a.width=M,a.height=R);var P=a.getContext("2d",{willReadFrequently:!0});g&&P.clearRect(0,0,M,R),x&&x(a,P);for(var w=0;w<r.length;w++)for(var A=r[w],G=0;G<A.length;G++){var O=A[G];O!=="."&&O!==" "&&(P.fillStyle=v[O],P.fillRect(G*o,w*p,o,p))}return C&&C(a,P),a};h.exports=u},84106:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={GenerateTexture:e(52780),Palettes:e(25235)}},81543:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ARNE16:e(81543),C64:e(75846),CGA:e(83206),JMP:e(13194),MSX:e(50686)}},63120:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(34631),c=e(38517),u=e(93736),l=new d({Extends:c,initialize:function(a,v,o,p){c.call(this,"CubicBezierCurve"),Array.isArray(a)&&(p=new u(a[6],a[7]),o=new u(a[4],a[5]),v=new u(a[2],a[3]),a=new u(a[0],a[1])),this.p0=a,this.p1=v,this.p2=o,this.p3=p},getStartPoint:function(r){return r===void 0&&(r=new u),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,a){a===void 0&&(a=new u);var v=this.p0,o=this.p1,p=this.p2,m=this.p3;return a.set(y(r,v.x,o.x,p.x,m.x),y(r,v.y,o.y,p.y,m.y))},draw:function(r,a){a===void 0&&(a=32);var v=this.getPoints(a);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var o=1;o<v.length;o++)r.lineTo(v[o].x,v[o].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});l.fromJSON=function(r){var a=r.points,v=new u(a[0],a[1]),o=new u(a[2],a[3]),p=new u(a[4],a[5]),m=new u(a[6],a[7]);return new l(v,o,p,m)},h.exports=l},38517:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(80222),c=e(74118),u=e(93736),l=new d({initialize:function(a){this.type=a,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new u,this._tmpVec2B=new u},draw:function(r,a){return a===void 0&&(a=32),r.strokePoints(this.getPoints(a))},getBounds:function(r,a){r||(r=new c),a===void 0&&(a=16);var v=this.getLength();a>v&&(a=v/2);var o=Math.max(1,Math.round(v/a));return y(this.getSpacedPoints(o),r)},getDistancePoints:function(r){var a=this.getLength(),v=Math.max(1,a/r);return this.getSpacedPoints(v)},getEndPoint:function(r){return r===void 0&&(r=new u),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(r===void 0&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var a=[],v,o=this.getPoint(0,this._tmpVec2A),p=0;a.push(0);for(var m=1;m<=r;m++)v=this.getPoint(m/r,this._tmpVec2B),p+=v.distance(o),a.push(p),o.copy(v);return this.cacheArcLengths=a,a},getPointAt:function(r,a){var v=this.getUtoTmapping(r);return this.getPoint(v,a)},getPoints:function(r,a,v){v===void 0&&(v=[]),r||(a?r=this.getLength()/a:r=this.defaultDivisions);for(var o=0;o<=r;o++)v.push(this.getPoint(o/r));return v},getRandomPoint:function(r){return r===void 0&&(r=new u),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,a,v){v===void 0&&(v=[]),r||(a?r=this.getLength()/a:r=this.defaultDivisions);for(var o=0;o<=r;o++){var p=this.getUtoTmapping(o/r,null,r);v.push(this.getPoint(p))}return v},getStartPoint:function(r){return r===void 0&&(r=new u),this.getPointAt(0,r)},getTangent:function(r,a){a===void 0&&(a=new u);var v=1e-4,o=r-v,p=r+v;return o<0&&(o=0),p>1&&(p=1),this.getPoint(o,this._tmpVec2A),this.getPoint(p,a),a.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,a){var v=this.getUtoTmapping(r);return this.getTangent(v,a)},getTFromDistance:function(r,a){return r<=0?0:this.getUtoTmapping(0,r,a)},getUtoTmapping:function(r,a,v){var o=this.getLengths(v),p=0,m=o.length,g;a?g=Math.min(a,o[m-1]):g=r*o[m-1];for(var x=0,C=m-1,M;x<=C;)if(p=Math.floor(x+(C-x)/2),M=o[p]-g,M<0)x=p+1;else if(M>0)C=p-1;else{C=p;break}if(p=C,o[p]===g)return p/(m-1);var R=o[p],P=o[p+1],w=P-R,A=(g-R)/w;return(p+A)/(m-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});h.exports=l},48835:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(38517),c=e(75606),u=e(10850),l=e(23701),r=e(93736),a=new d({Extends:y,initialize:function(o,p,m,g,x,C,M,R){if(typeof o=="object"){var P=o;o=u(P,"x",0),p=u(P,"y",0),m=u(P,"xRadius",0),g=u(P,"yRadius",m),x=u(P,"startAngle",0),C=u(P,"endAngle",360),M=u(P,"clockwise",!1),R=u(P,"rotation",0)}else g===void 0&&(g=m),x===void 0&&(x=0),C===void 0&&(C=360),M===void 0&&(M=!1),R===void 0&&(R=0);y.call(this,"EllipseCurve"),this.p0=new r(o,p),this._xRadius=m,this._yRadius=g,this._startAngle=c(x),this._endAngle=c(C),this._clockwise=M,this._rotation=c(R)},getStartPoint:function(v){return v===void 0&&(v=new r),this.getPoint(0,v)},getResolution:function(v){return v*2},getPoint:function(v,o){o===void 0&&(o=new r);for(var p=Math.PI*2,m=this._endAngle-this._startAngle,g=Math.abs(m)<Number.EPSILON;m<0;)m+=p;for(;m>p;)m-=p;m<Number.EPSILON&&(g?m=0:m=p),this._clockwise&&!g&&(m===p?m=-p:m=m-p);var x=this._startAngle+v*m,C=this.p0.x+this._xRadius*Math.cos(x),M=this.p0.y+this._yRadius*Math.sin(x);if(this._rotation!==0){var R=Math.cos(this._rotation),P=Math.sin(this._rotation),w=C-this.p0.x,A=M-this.p0.y;C=w*R-A*P+this.p0.x,M=w*P+A*R+this.p0.y}return o.set(C,M)},setXRadius:function(v){return this.xRadius=v,this},setYRadius:function(v){return this.yRadius=v,this},setWidth:function(v){return this.xRadius=v/2,this},setHeight:function(v){return this.yRadius=v/2,this},setStartAngle:function(v){return this.startAngle=v,this},setEndAngle:function(v){return this.endAngle=v,this},setClockwise:function(v){return this.clockwise=v,this},setRotation:function(v){return this.rotation=v,this},x:{get:function(){return this.p0.x},set:function(v){this.p0.x=v}},y:{get:function(){return this.p0.y},set:function(v){this.p0.y=v}},xRadius:{get:function(){return this._xRadius},set:function(v){this._xRadius=v}},yRadius:{get:function(){return this._yRadius},set:function(v){this._yRadius=v}},startAngle:{get:function(){return l(this._startAngle)},set:function(v){this._startAngle=c(v)}},endAngle:{get:function(){return l(this._endAngle)},set:function(v){this._endAngle=c(v)}},clockwise:{get:function(){return this._clockwise},set:function(v){this._clockwise=v}},angle:{get:function(){return l(this._rotation)},set:function(v){this._rotation=c(v)}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:l(this._startAngle),endAngle:l(this._endAngle),clockwise:this._clockwise,rotation:l(this._rotation)}}});a.fromJSON=function(v){return new a(v)},h.exports=a},58084:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(38517),c=e(80222),u=e(74118),l=e(93736),r=new d({Extends:y,initialize:function(v,o){y.call(this,"LineCurve"),Array.isArray(v)&&(o=new l(v[2],v[3]),v=new l(v[0],v[1])),this.p0=v,this.p1=o,this.arcLengthDivisions=1},getBounds:function(a){return a===void 0&&(a=new u),c([this.p0,this.p1],a)},getStartPoint:function(a){return a===void 0&&(a=new l),a.copy(this.p0)},getResolution:function(a){return a===void 0&&(a=1),a},getPoint:function(a,v){return v===void 0&&(v=new l),a===1?v.copy(this.p1):(v.copy(this.p1).subtract(this.p0).scale(a).add(this.p0),v)},getPointAt:function(a,v){return this.getPoint(a,v)},getTangent:function(a,v){return v===void 0&&(v=new l),v.copy(this.p1).subtract(this.p0).normalize(),v},getUtoTmapping:function(a,v,o){var p;if(v){var m=this.getLengths(o),g=m[m.length-1],x=Math.min(v,g);p=x/g}else p=a;return p},draw:function(a){return a.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),a},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(a){var v=a.points,o=new l(v[0],v[1]),p=new l(v[2],v[3]);return new r(o,p)},h.exports=r},64761:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(38517),c=e(16252),u=e(93736),l=new d({Extends:y,initialize:function(a,v,o){y.call(this,"QuadraticBezierCurve"),Array.isArray(a)&&(o=new u(a[4],a[5]),v=new u(a[2],a[3]),a=new u(a[0],a[1])),this.p0=a,this.p1=v,this.p2=o},getStartPoint:function(r){return r===void 0&&(r=new u),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,a){a===void 0&&(a=new u);var v=this.p0,o=this.p1,p=this.p2;return a.set(c(r,v.x,o.x,p.x),c(r,v.y,o.y,p.y))},draw:function(r,a){a===void 0&&(a=32);var v=this.getPoints(a);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var o=1;o<v.length;o++)r.lineTo(v[o].x,v[o].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});l.fromJSON=function(r){var a=r.points,v=new u(a[0],a[1]),o=new u(a[2],a[3]),p=new u(a[4],a[5]);return new l(v,o,p)},h.exports=l},11956:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14976),y=e(56694),c=e(38517),u=e(93736),l=new y({Extends:c,initialize:function(a){a===void 0&&(a=[]),c.call(this,"SplineCurve"),this.points=[],this.addPoints(a)},addPoints:function(r){for(var a=0;a<r.length;a++){var v=new u;typeof r[a]=="number"?(v.x=r[a],v.y=r[a+1],a++):Array.isArray(r[a])?(v.x=r[a][0],v.y=r[a][1]):(v.x=r[a].x,v.y=r[a].y),this.points.push(v)}return this},addPoint:function(r,a){var v=new u(r,a);return this.points.push(v),v},getStartPoint:function(r){return r===void 0&&(r=new u),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,a){a===void 0&&(a=new u);var v=this.points,o=(v.length-1)*r,p=Math.floor(o),m=o-p,g=v[p===0?p:p-1],x=v[p],C=v[p>v.length-2?v.length-1:p+1],M=v[p>v.length-3?v.length-1:p+2];return a.set(d(m,g.x,x.x,C.x,M.x),d(m,g.y,x.y,C.y,M.y))},toJSON:function(){for(var r=[],a=0;a<this.points.length;a++)r.push(this.points[a].x),r.push(this.points[a].y);return{type:this.type,points:r}}});l.fromJSON=function(r){return new l(r.points)},h.exports=l},73962:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Path:e(12822),MoveTo:e(53639),CubicBezier:e(63120),Curve:e(38517),Ellipse:e(48835),Line:e(58084),QuadraticBezier:e(64761),Spline:e(11956)}},53639:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(93736),c=new d({initialize:function(l,r){this.active=!1,this.p0=new y(l,r)},getPoint:function(u,l){return l===void 0&&(l=new y),l.copy(this.p0)},getPointAt:function(u,l){return this.getPoint(u,l)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});h.exports=c},12822:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(63120),c=e(48835),u=e(61286),l=e(58084),r=e(53639),a=e(64761),v=e(74118),o=e(11956),p=e(93736),m=e(83392),g=new d({initialize:function(C,M){C===void 0&&(C=0),M===void 0&&(M=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new p,this._tmpVec2A=new p,this._tmpVec2B=new p,typeof C=="object"?this.fromJSON(C):this.startPoint.set(C,M)},add:function(x){return this.curves.push(x),this},circleTo:function(x,C,M){return C===void 0&&(C=!1),this.ellipseTo(x,x,0,360,C,M)},closePath:function(){var x=this.curves[0].getPoint(0),C=this.curves[this.curves.length-1].getPoint(1);return x.equals(C)||this.curves.push(new l(C,x)),this},cubicBezierTo:function(x,C,M,R,P,w){var A=this.getEndPoint(),G,O,L;return x instanceof p?(G=x,O=C,L=M):(G=new p(M,R),O=new p(P,w),L=new p(x,C)),this.add(new y(A,G,O,L))},quadraticBezierTo:function(x,C,M,R){var P=this.getEndPoint(),w,A;return x instanceof p?(w=x,A=C):(w=new p(M,R),A=new p(x,C)),this.add(new a(P,w,A))},draw:function(x,C){for(var M=0;M<this.curves.length;M++){var R=this.curves[M];R.active&&R.draw(x,C)}return x},ellipseTo:function(x,C,M,R,P,w){var A=new c(0,0,x,C,M,R,P,w),G=this.getEndPoint(this._tmpVec2A),O=A.getStartPoint(this._tmpVec2B);return G.subtract(O),A.x=G.x,A.y=G.y,this.add(A)},fromJSON:function(x){this.curves=[],this.cacheLengths=[],this.startPoint.set(x.x,x.y),this.autoClose=x.autoClose;for(var C=0;C<x.curves.length;C++){var M=x.curves[C];switch(M.type){case"LineCurve":this.add(l.fromJSON(M));break;case"EllipseCurve":this.add(c.fromJSON(M));break;case"SplineCurve":this.add(o.fromJSON(M));break;case"CubicBezierCurve":this.add(y.fromJSON(M));break;case"QuadraticBezierCurve":this.add(a.fromJSON(M));break}}return this},getBounds:function(x,C){x===void 0&&(x=new v),C===void 0&&(C=16),x.x=Number.MAX_VALUE,x.y=Number.MAX_VALUE;for(var M=new v,R=m.MIN_SAFE_INTEGER,P=m.MIN_SAFE_INTEGER,w=0;w<this.curves.length;w++){var A=this.curves[w];A.active&&(A.getBounds(M,C),x.x=Math.min(x.x,M.x),x.y=Math.min(x.y,M.y),R=Math.max(R,M.right),P=Math.max(P,M.bottom))}return x.right=R,x.bottom=P,x},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var x=[],C=0,M=0;M<this.curves.length;M++)C+=this.curves[M].getLength(),x.push(C);return this.cacheLengths=x,x},getCurveAt:function(x){for(var C=x*this.getLength(),M=this.getCurveLengths(),R=0;R<M.length;){if(M[R]>=C)return this.curves[R];R++}return null},getEndPoint:function(x){return x===void 0&&(x=new p),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,x):x.copy(this.startPoint),x},getLength:function(){var x=this.getCurveLengths();return x[x.length-1]},getPoint:function(x,C){C===void 0&&(C=new p);for(var M=x*this.getLength(),R=this.getCurveLengths(),P=0;P<R.length;){if(R[P]>=M){var w=R[P]-M,A=this.curves[P],G=A.getLength(),O=G===0?0:1-w/G;return A.getPointAt(O,C)}P++}return null},getPoints:function(x){x===void 0&&(x=12);for(var C=[],M,R=0;R<this.curves.length;R++){var P=this.curves[R];if(P.active)for(var w=P.getResolution(x),A=P.getPoints(w),G=0;G<A.length;G++){var O=A[G];M&&M.equals(O)||(C.push(O),M=O)}}return this.autoClose&&C.length>1&&!C[C.length-1].equals(C[0])&&C.push(C[0]),C},getRandomPoint:function(x){return x===void 0&&(x=new p),this.getPoint(Math.random(),x)},getSpacedPoints:function(x){x===void 0&&(x=40);for(var C=[],M=0;M<=x;M++)C.push(this.getPoint(M/x));return this.autoClose&&C.push(C[0]),C},getStartPoint:function(x){return x===void 0&&(x=new p),x.copy(this.startPoint)},getTangent:function(x,C){C===void 0&&(C=new p);for(var M=x*this.getLength(),R=this.getCurveLengths(),P=0;P<R.length;){if(R[P]>=M){var w=R[P]-M,A=this.curves[P],G=A.getLength(),O=G===0?0:1-w/G;return A.getTangentAt(O,C)}P++}return null},lineTo:function(x,C){x instanceof p?this._tmpVec2B.copy(x):this._tmpVec2B.set(x,C);var M=this.getEndPoint(this._tmpVec2A);return this.add(new l([M.x,M.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(x){return x.unshift(this.getEndPoint()),this.add(new o(x))},moveTo:function(x,C){return x instanceof p?this.add(new r(x.x,x.y)):this.add(new r(x,C))},toJSON:function(){for(var x=[],C=0;C<this.curves.length;C++)x.push(this.curves[C].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:x}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});u.register("path",function(x,C){return new g(x,C)}),h.exports=g},81078:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(35026),c=new d({initialize:function(l,r){this.parent=l,this.events=r,r||(this.events=l.events?l.events:l),this.list={},this.values={},this._frozen=!1,!l.hasOwnProperty("sys")&&this.events&&this.events.once(y.DESTROY,this.destroy,this)},get:function(u){var l=this.list;if(Array.isArray(u)){for(var r=[],a=0;a<u.length;a++)r.push(l[u[a]]);return r}else return l[u]},getAll:function(){var u={};for(var l in this.list)this.list.hasOwnProperty(l)&&(u[l]=this.list[l]);return u},query:function(u){var l={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(u)&&(l[r]=this.list[r]);return l},set:function(u,l){if(this._frozen)return this;if(typeof u=="string")return this.setValue(u,l);for(var r in u)this.setValue(r,u[r]);return this},inc:function(u,l){if(this._frozen)return this;l===void 0&&(l=1);var r=this.get(u);return r===void 0&&(r=0),this.set(u,r+l),this},toggle:function(u){return this._frozen?this:(this.set(u,!this.get(u)),this)},setValue:function(u,l){if(this._frozen)return this;if(this.has(u))this.values[u]=l;else{var r=this,a=this.list,v=this.events,o=this.parent;Object.defineProperty(this.values,u,{enumerable:!0,configurable:!0,get:function(){return a[u]},set:function(p){if(!r._frozen){var m=a[u];a[u]=p,v.emit(y.CHANGE_DATA,o,u,p,m),v.emit(y.CHANGE_DATA_KEY+u,o,p,m)}}}),a[u]=l,v.emit(y.SET_DATA,o,u,l)}return this},each:function(u,l){for(var r=[this.parent,null,void 0],a=1;a<arguments.length;a++)r.push(arguments[a]);for(var v in this.list)r[1]=v,r[2]=this.list[v],u.apply(l,r);return this},merge:function(u,l){l===void 0&&(l=!0);for(var r in u)u.hasOwnProperty(r)&&(l||!l&&!this.has(r))&&this.setValue(r,u[r]);return this},remove:function(u){if(this._frozen)return this;if(Array.isArray(u))for(var l=0;l<u.length;l++)this.removeValue(u[l]);else return this.removeValue(u);return this},removeValue:function(u){if(this.has(u)){var l=this.list[u];delete this.list[u],delete this.values[u],this.events.emit(y.REMOVE_DATA,this.parent,u,l)}return this},pop:function(u){var l=void 0;return!this._frozen&&this.has(u)&&(l=this.list[u],delete this.list[u],delete this.values[u],this.events.emit(y.REMOVE_DATA,this.parent,u,l)),l},has:function(u){return this.list.hasOwnProperty(u)},setFreeze:function(u){return this._frozen=u,this},reset:function(){for(var u in this.list)delete this.list[u],delete this.values[u];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(y.CHANGE_DATA),this.events.off(y.SET_DATA),this.events.off(y.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(u){this._frozen=!!u}},count:{get:function(){var u=0;for(var l in this.list)this.list[l]!==void 0&&u++;return u}}});h.exports=c},76508:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(81078),c=e(91963),u=e(7599),l=new d({Extends:y,initialize:function(a){y.call(this,a,a.sys.events),this.scene=a,this.systems=a.sys,a.sys.events.once(u.BOOT,this.boot,this),a.sys.events.on(u.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){y.prototype.destroy.call(this),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});c.register("DataManagerPlugin",l,"data"),h.exports=l},73569:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="changedata"},15590:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="changedata-"},37669:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},87090:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removedata"},90142:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="setdata"},35026:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CHANGE_DATA:e(73569),CHANGE_DATA_KEY:e(15590),DESTROY:e(37669),REMOVE_DATA:e(87090),SET_DATA:e(90142)}},1999:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DataManager:e(81078),DataManagerPlugin:e(76508),Events:e(35026)}},10720:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1350),y={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function c(){if(typeof importScripts=="function")return y;y.audioData=!!window.Audio,y.webAudio=!!(window.AudioContext||window.webkitAudioContext);var u=document.createElement("audio"),l=!!u.canPlayType;try{if(l){var r=function(o,p){var m=u.canPlayType("audio/"+o).replace(/^no$/,"");return p?!!(m||u.canPlayType("audio/"+p).replace(/^no$/,"")):!!m};if(y.ogg=r('ogg; codecs="vorbis"'),y.opus=r('ogg; codecs="opus"',"opus"),y.mp3=r("mpeg"),y.wav=r("wav"),y.m4a=r("x-m4a"),y.aac=r("aac"),y.flac=r("flac","x-flac"),y.webm=r('webm; codecs="vorbis"'),u.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(d.edge)y.dolby=!0;else if(d.safari&&d.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var a=parseInt(RegExp.$1,10),v=parseInt(RegExp.$2,10);(a===10&&v>=11||a>10)&&(y.dolby=!0)}}}}catch{}return y}h.exports=c()},1350:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36580),y={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function c(){var u=navigator.userAgent;return/Edg\/\d+/.test(u)?(y.edge=!0,y.es2019=!0):/OPR/.test(u)?(y.opera=!0,y.es2019=!0):/Chrome\/(\d+)/.test(u)&&!d.windowsPhone?(y.chrome=!0,y.chromeVersion=parseInt(RegExp.$1,10),y.es2019=y.chromeVersion>69):/Firefox\D+(\d+)/.test(u)?(y.firefox=!0,y.firefoxVersion=parseInt(RegExp.$1,10),y.es2019=y.firefoxVersion>10):/AppleWebKit/.test(u)&&d.iOS?y.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(u)?(y.ie=!0,y.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(u)&&!d.windowsPhone?(y.safari=!0,y.safariVersion=parseInt(RegExp.$1,10),y.es2019=y.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(u)&&(y.ie=!0,y.trident=!0,y.tridentVersion=parseInt(RegExp.$1,10),y.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(u)&&(y.silk=!0),y}h.exports=c()},98581:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),y={supportInverseAlpha:!1,supportNewBlendModes:!1};function c(){var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",a="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",v=new Image;return v.onload=function(){var o=new Image;o.onload=function(){var p=d.create2D(o,6),m=p.getContext("2d",{willReadFrequently:!0});if(m.globalCompositeOperation="multiply",m.drawImage(v,0,0),m.drawImage(o,2,0),!m.getImageData(2,0,1,1))return!1;var g=m.getImageData(2,0,1,1).data;d.remove(o),y.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},o.src=r+"/wCKxvRF"+a},v.src=r+"AP804Oa6"+a,!1}function u(){var r=d.create2D(this,2),a=r.getContext("2d",{willReadFrequently:!0});a.fillStyle="rgba(10, 20, 30, 0.5)",a.fillRect(0,0,1,1);var v=a.getImageData(0,0,1,1);if(v===null)return!1;a.putImageData(v,1,0);var o=a.getImageData(1,0,1,1),p=o.data[0]===v.data[0]&&o.data[1]===v.data[1]&&o.data[2]===v.data[2]&&o.data[3]===v.data[3];return d.remove(this),p}function l(){return typeof importScripts!="function"&&document!==void 0&&(y.supportNewBlendModes=c(),y.supportInverseAlpha=u()),y}h.exports=l()},90185:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36580),y=e(1350),c=e(61068),u={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function l(){var a=new ArrayBuffer(4),v=new Uint8Array(a),o=new Uint32Array(a);return v[0]=161,v[1]=178,v[2]=195,v[3]=212,o[0]===3569595041?!0:o[0]===2712847316?!1:null}function r(){if(typeof importScripts=="function")return u;u.canvas=!!window.CanvasRenderingContext2D;try{u.localStorage=!!localStorage.getItem}catch{u.localStorage=!1}u.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,u.fileSystem=!!window.requestFileSystem;var a=!1,v=function(){if(window.WebGLRenderingContext)try{var o=c.createWebGL(this),p=o.getContext("webgl")||o.getContext("experimental-webgl"),m=c.create2D(this),g=m.getContext("2d",{willReadFrequently:!0}),x=g.createImageData(1,1);return a=x.data instanceof Uint8ClampedArray,c.remove(o),c.remove(m),!!p}catch{return!1}return!1};return u.webGL=v(),u.worker=!!window.Worker,u.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,u.getUserMedia=u.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,y.firefox&&y.firefoxVersion<21&&(u.getUserMedia=!1),!d.iOS&&(y.ie||y.firefox||y.chrome)&&(u.canvasBitBltShift=!0),(y.safari||y.mobileSafari)&&(u.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(u.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(u.littleEndian=l()),u.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&u.littleEndian!==null&&a,u}h.exports=r()},33553:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return S;var d,y="Fullscreen",c="FullScreen",u=["request"+y,"request"+c,"webkitRequest"+y,"webkitRequest"+c,"msRequest"+y,"msRequest"+c,"mozRequest"+c,"mozRequest"+y];for(d=0;d<u.length;d++)if(document.documentElement[u[d]]){S.available=!0,S.request=u[d];break}var l=["cancel"+c,"exit"+y,"webkitCancel"+c,"webkitExit"+y,"msCancel"+c,"msExit"+y,"mozCancel"+c,"mozExit"+y];if(S.available){for(d=0;d<l.length;d++)if(document[l[d]]){S.cancel=l[d];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(S.keyboard=!0),Object.defineProperty(S,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),S}h.exports=e()},95872:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1350),y={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function c(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(y.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(y.mspointer=!0),navigator.getGamepads&&(y.gamepads=!0),"onwheel"in window||d.ie&&"WheelEvent"in window?y.wheelEvent="wheel":"onmousewheel"in window?y.wheelEvent="mousewheel":d.firefox&&"MouseScrollEvent"in window&&(y.wheelEvent="DOMMouseScroll")),y}h.exports=c()},36580:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return S;var d=navigator.userAgent;/Windows/.test(d)?S.windows=!0:/Mac OS/.test(d)&&!/like Mac OS/.test(d)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(S.iOS=!0,S.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),S.iOSVersion=parseInt(RegExp.$1,10)):S.macOS=!0:/Android/.test(d)?S.android=!0:/Linux/.test(d)?S.linux=!0:/iP[ao]d|iPhone/i.test(d)?(S.iOS=!0,navigator.appVersion.match(/OS (\d+)/),S.iOSVersion=parseInt(RegExp.$1,10),S.iPhone=d.toLowerCase().indexOf("iphone")!==-1,S.iPad=d.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(d)||/\bKF[A-Z][A-Z]+/.test(d)||/Silk.*Mobile Safari/.test(d)?S.kindle=!0:/CrOS/.test(d)&&(S.chromeOS=!0),(/Windows Phone/i.test(d)||/IEMobile/i.test(d))&&(S.android=!1,S.iOS=!1,S.macOS=!1,S.windows=!0,S.windowsPhone=!0);var y=/Silk/.test(d);return(S.windows||S.macOS||S.linux&&!y||S.chromeOS)&&(S.desktop=!0),(S.windowsPhone||/Windows NT/i.test(d)&&/Touch/i.test(d))&&(S.desktop=!1),navigator.standalone&&(S.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(S.cordova=!0),window.ejecta!==void 0&&(S.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(S.node=!0),S.node&&typeof process.versions=="object"&&(S.nodeWebkit=!!process.versions["node-webkit"],S.electron=!!process.versions.electron),/Crosswalk/.test(d)&&(S.crosswalk=!0),S.pixelRatio=window.devicePixelRatio||1,S}h.exports=e()},53861:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),y={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function c(){if(typeof importScripts=="function")return y;var u=document.createElement("video"),l=!!u.canPlayType,r=/^no$/;try{l&&(u.canPlayType('video/ogg; codecs="theora"').replace(r,"")&&(y.ogg=!0),u.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(r,"")&&(y.h264=!0,y.mp4=!0),u.canPlayType("video/x-m4v").replace(r,"")&&(y.m4v=!0),u.canPlayType('video/webm; codecs="vp8, vorbis"').replace(r,"")&&(y.webm=!0),u.canPlayType('video/webm; codecs="vp9"').replace(r,"")&&(y.vp9=!0),u.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(r,"")&&(y.hls=!0))}catch{}return u.parentNode&&u.parentNode.removeChild(u),y.getVideoURL=function(a){Array.isArray(a)||(a=[a]);for(var v=0;v<a.length;v++){var o=d(a[v],"url",a[v]);if(o.indexOf("blob:")===0)return{url:o,type:""};var p;if(o.indexOf("data:")===0?p=o.split(",")[0].match(/\/(.*?);/):p=o.match(/\.([a-zA-Z0-9]+)($|\?)/),p=d(a[v],"type",p?p[1]:"").toLowerCase(),y[p])return{url:o,type:p}}return null},y}h.exports=c()},77290:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={os:e(36580),browser:e(1350),features:e(90185),input:e(95872),audio:e(10720),video:e(53861),fullscreen:e(33553),canvasFeatures:e(98581)}},65246:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new Float32Array(20),c=new d({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(u){return this._matrix.set(u),this._dirty=!0,this},reset:function(){var u=this._matrix;return u.fill(0),u[0]=1,u[6]=1,u[12]=1,u[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var u=this._data;return this._dirty&&(u.set(this._matrix),u[4]/=255,u[9]/=255,u[14]/=255,u[19]/=255,this._dirty=!1),u},brightness:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1);var r=u;return this.multiply([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],l)},saturate:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1);var r=u*2/3+1,a=(r-1)*-.5;return this.multiply([r,a,a,0,0,a,r,a,0,0,a,a,r,0,0,0,0,0,1,0],l)},desaturate:function(u){return u===void 0&&(u=!1),this.saturate(-1,u)},hue:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1),u=u/180*Math.PI;var r=Math.cos(u),a=Math.sin(u),v=.213,o=.715,p=.072;return this.multiply([v+r*(1-v)+a*-v,o+r*-o+a*-o,p+r*-p+a*(1-p),0,0,v+r*-v+a*.143,o+r*(1-o)+a*.14,p+r*-p+a*-.283,0,0,v+r*-v+a*-(1-v),o+r*-o+a*o,p+r*(1-p)+a*p,0,0,0,0,0,1,0],l)},grayscale:function(u,l){return u===void 0&&(u=1),l===void 0&&(l=!1),this.saturate(-u,l)},blackWhite:function(u){return u===void 0&&(u=!1),this.multiply(c.BLACK_WHITE,u)},contrast:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1);var r=u+1,a=-.5*(r-1);return this.multiply([r,0,0,0,a,0,r,0,0,a,0,0,r,0,a,0,0,0,1,0],l)},negative:function(u){return u===void 0&&(u=!1),this.multiply(c.NEGATIVE,u)},desaturateLuminance:function(u){return u===void 0&&(u=!1),this.multiply(c.DESATURATE_LUMINANCE,u)},sepia:function(u){return u===void 0&&(u=!1),this.multiply(c.SEPIA,u)},night:function(u,l){return u===void 0&&(u=.1),l===void 0&&(l=!1),this.multiply([u*-2,-u,0,0,0,-u,0,u,0,0,0,u,u*2,0,0,0,0,0,1,0],l)},lsd:function(u){return u===void 0&&(u=!1),this.multiply(c.LSD,u)},brown:function(u){return u===void 0&&(u=!1),this.multiply(c.BROWN,u)},vintagePinhole:function(u){return u===void 0&&(u=!1),this.multiply(c.VINTAGE,u)},kodachrome:function(u){return u===void 0&&(u=!1),this.multiply(c.KODACHROME,u)},technicolor:function(u){return u===void 0&&(u=!1),this.multiply(c.TECHNICOLOR,u)},polaroid:function(u){return u===void 0&&(u=!1),this.multiply(c.POLAROID,u)},shiftToBGR:function(u){return u===void 0&&(u=!1),this.multiply(c.SHIFT_BGR,u)},multiply:function(u,l){l===void 0&&(l=!1),l||this.reset();var r=this._matrix,a=y;return a.set(r),r.set([a[0]*u[0]+a[1]*u[5]+a[2]*u[10]+a[3]*u[15],a[0]*u[1]+a[1]*u[6]+a[2]*u[11]+a[3]*u[16],a[0]*u[2]+a[1]*u[7]+a[2]*u[12]+a[3]*u[17],a[0]*u[3]+a[1]*u[8]+a[2]*u[13]+a[3]*u[18],a[0]*u[4]+a[1]*u[9]+a[2]*u[14]+a[3]*u[19]+a[4],a[5]*u[0]+a[6]*u[5]+a[7]*u[10]+a[8]*u[15],a[5]*u[1]+a[6]*u[6]+a[7]*u[11]+a[8]*u[16],a[5]*u[2]+a[6]*u[7]+a[7]*u[12]+a[8]*u[17],a[5]*u[3]+a[6]*u[8]+a[7]*u[13]+a[8]*u[18],a[5]*u[4]+a[6]*u[9]+a[7]*u[14]+a[8]*u[19]+a[9],a[10]*u[0]+a[11]*u[5]+a[12]*u[10]+a[13]*u[15],a[10]*u[1]+a[11]*u[6]+a[12]*u[11]+a[13]*u[16],a[10]*u[2]+a[11]*u[7]+a[12]*u[12]+a[13]*u[17],a[10]*u[3]+a[11]*u[8]+a[12]*u[13]+a[13]*u[18],a[10]*u[4]+a[11]*u[9]+a[12]*u[14]+a[13]*u[19]+a[14],a[15]*u[0]+a[16]*u[5]+a[17]*u[10]+a[18]*u[15],a[15]*u[1]+a[16]*u[6]+a[17]*u[11]+a[18]*u[16],a[15]*u[2]+a[16]*u[7]+a[17]*u[12]+a[18]*u[17],a[15]*u[3]+a[16]*u[8]+a[17]*u[13]+a[18]*u[18],a[15]*u[4]+a[16]*u[9]+a[17]*u[14]+a[18]*u[19]+a[19]]),this._dirty=!0,this}});c.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],c.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],c.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],c.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],c.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],c.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],c.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],c.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],c.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],c.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],c.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],h.exports=c},39298:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72283),c=new d({initialize:function(l,r,a){this._rgb=[0,0,0],this.onChangeCallback=y,this.dirty=!1,this.set(l,r,a)},set:function(u,l,r){return u===void 0&&(u=0),l===void 0&&(l=0),r===void 0&&(r=0),this._rgb=[u,l,r],this.onChange(),this},equals:function(u,l,r){var a=this._rgb;return a[0]===u&&a[1]===l&&a[2]===r},onChange:function(){this.dirty=!0;var u=this._rgb;this.onChangeCallback.call(this,u[0],u[1],u[2])},r:{get:function(){return this._rgb[0]},set:function(u){this._rgb[0]=u,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(u){this._rgb[1]=u,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(u){this._rgb[2]=u,this.onChange()}},destroy:function(){this.onChangeCallback=null}});h.exports=c},84093:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};h.exports=S},32058:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),y=e(59994),c=e(73174),u=e(28417),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,y(a)+v),c(r,d(a)+o),r};h.exports=l},85535:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),y=e(40163),c=e(73174),u=e(74465),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,y(a)-v),c(r,d(a)+o),r};h.exports=l},9605:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),y=e(70271),c=e(73174),u=e(19298),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,y(a)+v),c(r,d(a)+o),r};h.exports=l},22529:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(21843),y=e(59994),c=e(29568),u=function(l,r,a,v){return a===void 0&&(a=0),v===void 0&&(v=0),d(l,y(r)+a,c(r)+v),l};h.exports=u},5739:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),y=e(40163),c=e(81711),u=e(74465),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,y(a)-v),c(r,d(a)+o),r};h.exports=l},40327:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),y=[];y[d.BOTTOM_CENTER]=e(32058),y[d.BOTTOM_LEFT]=e(85535),y[d.BOTTOM_RIGHT]=e(9605),y[d.CENTER]=e(22529),y[d.LEFT_CENTER]=e(5739),y[d.RIGHT_CENTER]=e(27683),y[d.TOP_CENTER]=e(96439),y[d.TOP_LEFT]=e(81447),y[d.TOP_RIGHT]=e(47888),y[d.LEFT_BOTTOM]=y[d.BOTTOM_LEFT],y[d.LEFT_TOP]=y[d.TOP_LEFT],y[d.RIGHT_BOTTOM]=y[d.BOTTOM_RIGHT],y[d.RIGHT_TOP]=y[d.TOP_RIGHT];var c=function(u,l,r,a,v){return y[r](u,l,a,v)};h.exports=c},27683:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),y=e(70271),c=e(81711),u=e(19298),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,y(a)+v),c(r,d(a)+o),r};h.exports=l},96439:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59994),y=e(47196),c=e(28417),u=e(84349),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),c(r,d(a)+v),u(r,y(a)-o),r};h.exports=l},81447:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40163),y=e(47196),c=e(74465),u=e(84349),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),c(r,d(a)-v),u(r,y(a)-o),r};h.exports=l},47888:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70271),y=e(47196),c=e(19298),u=e(84349),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),c(r,d(a)+v),u(r,y(a)-o),r};h.exports=l},46997:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BottomCenter:e(32058),BottomLeft:e(85535),BottomRight:e(9605),Center:e(22529),LeftCenter:e(5739),QuickSet:e(40327),RightCenter:e(27683),TopCenter:e(96439),TopLeft:e(81447),TopRight:e(47888)}},93545:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),y=e(98611),c={In:e(46997),To:e(86639)};c=y(!1,c,d),h.exports=c},27118:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),y=e(59994),c=e(28417),u=e(84349),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),c(r,y(a)+v),u(r,d(a)+o),r};h.exports=l},84469:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),y=e(40163),c=e(74465),u=e(84349),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),c(r,y(a)-v),u(r,d(a)+o),r};h.exports=l},51577:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),y=e(70271),c=e(19298),u=e(84349),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),c(r,y(a)+v),u(r,d(a)+o),r};h.exports=l},90271:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),y=e(40163),c=e(73174),u=e(19298),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,y(a)-v),c(r,d(a)+o),r};h.exports=l},30466:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),y=e(40163),c=e(81711),u=e(19298),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,y(a)-v),c(r,d(a)+o),r};h.exports=l},50087:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40163),y=e(47196),c=e(19298),u=e(84349),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),c(r,d(a)-v),u(r,y(a)-o),r};h.exports=l},82590:(h,S,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),y=[];y[d.BOTTOM_CENTER]=e(27118),y[d.BOTTOM_LEFT]=e(84469),y[d.BOTTOM_RIGHT]=e(51577),y[d.LEFT_BOTTOM]=e(90271),y[d.LEFT_CENTER]=e(30466),y[d.LEFT_TOP]=e(50087),y[d.RIGHT_BOTTOM]=e(13555),y[d.RIGHT_CENTER]=e(99049),y[d.RIGHT_TOP]=e(67788),y[d.TOP_CENTER]=e(78170),y[d.TOP_LEFT]=e(54145),y[d.TOP_RIGHT]=e(75548);var c=function(u,l,r,a,v){return y[r](u,l,a,v)};h.exports=c},13555:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),y=e(70271),c=e(73174),u=e(74465),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,y(a)+v),c(r,d(a)+o),r};h.exports=l},99049:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),y=e(70271),c=e(81711),u=e(74465),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,y(a)+v),c(r,d(a)+o),r};h.exports=l},67788:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70271),y=e(47196),c=e(74465),u=e(84349),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),c(r,d(a)+v),u(r,y(a)-o),r};h.exports=l},78170:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59994),y=e(47196),c=e(73174),u=e(28417),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,d(a)+v),c(r,y(a)-o),r};h.exports=l},54145:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40163),y=e(47196),c=e(73174),u=e(74465),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,d(a)-v),c(r,y(a)-o),r};h.exports=l},75548:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70271),y=e(47196),c=e(73174),u=e(19298),l=function(r,a,v,o){return v===void 0&&(v=0),o===void 0&&(o=0),u(r,d(a)+v),c(r,y(a)-o),r};h.exports=l},86639:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BottomCenter:e(27118),BottomLeft:e(84469),BottomRight:e(51577),LeftBottom:e(90271),LeftCenter:e(30466),LeftTop:e(50087),QuickSet:e(82590),RightBottom:e(13555),RightCenter:e(99049),RightTop:e(67788),TopCenter:e(78170),TopLeft:e(54145),TopRight:e(75548)}},21843:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28417),y=e(81711),c=function(u,l,r){return d(u,l),y(u,r)};h.exports=c},97328:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.y+e.height-e.height*e.originY};h.exports=S},7126:(h,S,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),y=e(40163),c=e(70271),u=e(47196),l=e(74118),r=function(a,v){v===void 0&&(v=new l);var o=y(a),p=u(a);return v.x=o,v.y=p,v.width=c(a)-o,v.height=d(a)-p,v};h.exports=r},59994:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.x-e.width*e.originX+e.width*.5};h.exports=S},29568:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.y-e.height*e.originY+e.height*.5};h.exports=S},40163:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.x-e.width*e.originX};h.exports=S},52088:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.width*e.originX};h.exports=S},23379:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.height*e.originY};h.exports=S},70271:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.x+e.width-e.width*e.originX};h.exports=S},47196:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.y-e.height*e.originY};h.exports=S},73174:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.y=d-e.height+e.height*e.originY,e};h.exports=S},28417:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.width*e.originX;return e.x=d+y-e.width*.5,e};h.exports=S},81711:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.height*e.originY;return e.y=d+y-e.height*.5,e};h.exports=S},74465:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x=d+e.width*e.originX,e};h.exports=S},19298:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x=d-e.width+e.width*e.originX,e};h.exports=S},84349:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.y=d+e.height*e.originY,e};h.exports=S},15252:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CenterOn:e(21843),GetBottom:e(97328),GetBounds:e(7126),GetCenterX:e(59994),GetCenterY:e(29568),GetLeft:e(40163),GetOffsetX:e(52088),GetOffsetY:e(23379),GetRight:e(70271),GetTop:e(47196),SetBottom:e(73174),SetCenterX:e(28417),SetCenterY:e(81711),SetLeft:e(74465),SetRight:e(19298),SetTop:e(84349)}},70616:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setCrisp:function(e){var d=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return d.forEach(function(y){e.style["image-rendering"]=y}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};h.exports=S},61068:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86459),y=e(8213),c=[],u=!1,l=function(){var r=function(M,R,P,w,A){R===void 0&&(R=1),P===void 0&&(P=1),w===void 0&&(w=d.CANVAS),A===void 0&&(A=!1);var G,O=o(w);return O===null?(O={parent:M,canvas:document.createElement("canvas"),type:w},w===d.CANVAS&&c.push(O),G=O.canvas):(O.parent=M,G=O.canvas),A&&(O.parent=G),G.width=R,G.height=P,u&&w===d.CANVAS&&y.disable(G.getContext("2d",{willReadFrequently:!1})),G},a=function(M,R,P){return r(M,R,P,d.CANVAS)},v=function(M,R,P){return r(M,R,P,d.WEBGL)},o=function(M){if(M===void 0&&(M=d.CANVAS),M===d.WEBGL)return null;for(var R=0;R<c.length;R++){var P=c[R];if(!P.parent&&P.type===M)return P}return null},p=function(M){var R=M instanceof HTMLCanvasElement;c.forEach(function(P){(R&&P.canvas===M||!R&&P.parent===M)&&(P.parent=null,P.canvas.width=1,P.canvas.height=1)})},m=function(){var M=0;return c.forEach(function(R){R.parent&&M++}),M},g=function(){return c.length-m()},x=function(){u=!0},C=function(){u=!1};return{create2D:a,create:r,createWebGL:v,disableSmoothing:x,enableSmoothing:C,first:o,free:g,pool:c,remove:p,total:m}};h.exports=l()},8213:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S="",e=function(){var d=function(l){for(var r=["i","webkitI","msI","mozI","oI"],a=0;a<r.length;a++){var v=r[a]+"mageSmoothingEnabled";if(v in l)return v}return null},y=function(l){return S===""&&(S=d(l)),S&&(l[S]=!0),l},c=function(l){return S===""&&(S=d(l)),S&&(l[S]=!1),l},u=function(l){return S!==null?l[S]:null};return{disable:c,enable:y,getPrefix:d,isEnabled:u}};h.exports=e()},59271:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d===void 0&&(d="none"),e.style.msTouchAction=d,e.style["ms-touch-action"]=d,e.style["touch-action"]=d,e};h.exports=S},36505:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d===void 0&&(d="none");var y=["-webkit-","-khtml-","-moz-","-ms-",""];return y.forEach(function(c){e.style[c+"user-select"]=d}),e.style["-webkit-touch-callout"]=d,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};h.exports=S},23514:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CanvasInterpolation:e(70616),CanvasPool:e(61068),Smoothing:e(8213),TouchAction:e(59271),UserSelect:e(36505)}},27119:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(22946),c=e(5657),u=e(24650),l=e(68033),r=new d({initialize:function(v,o,p,m){v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(v,o,p,m)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(a,v,o,p,m){return p===void 0&&(p=255),m===void 0&&(m=!0),this._locked=!0,this.red=a,this.green=v,this.blue=o,this.alpha=p,this._locked=!1,this.update(m)},setGLTo:function(a,v,o,p){return p===void 0&&(p=1),this._locked=!0,this.redGL=a,this.greenGL=v,this.blueGL=o,this.alphaGL=p,this._locked=!1,this.update(!0)},setFromRGB:function(a){return this._locked=!0,this.red=a.r,this.green=a.g,this.blue=a.b,a.hasOwnProperty("a")&&(this.alpha=a.a),this._locked=!1,this.update(!0)},setFromHSV:function(a,v,o){return u(a,v,o,this)},update:function(a){if(a===void 0&&(a=!1),this._locked)return this;var v=this.r,o=this.g,p=this.b,m=this.a;return this._color=y(v,o,p),this._color32=c(v,o,p,m),this._rgba="rgba("+v+","+o+","+p+","+m/255+")",a&&l(v,o,p,this),this},updateHSV:function(){var a=this.r,v=this.g,o=this.b;return l(a,v,o,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(a){return this.setTo(a,a,a)},random:function(a,v){a===void 0&&(a=0),v===void 0&&(v=255);var o=Math.floor(a+Math.random()*(v-a)),p=Math.floor(a+Math.random()*(v-a)),m=Math.floor(a+Math.random()*(v-a));return this.setTo(o,p,m)},randomGray:function(a,v){a===void 0&&(a=0),v===void 0&&(v=255);var o=Math.floor(a+Math.random()*(v-a));return this.setTo(o,o,o)},saturate:function(a){return this.s+=a/100,this},desaturate:function(a){return this.s-=a/100,this},lighten:function(a){return this.v+=a/100,this},darken:function(a){return this.v-=a/100,this},brighten:function(a){var v=this.r,o=this.g,p=this.b;return v=Math.max(0,Math.min(255,v-Math.round(255*-(a/100)))),o=Math.max(0,Math.min(255,o-Math.round(255*-(a/100)))),p=Math.max(0,Math.min(255,p-Math.round(255*-(a/100)))),this.setTo(v,o,p)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(a){this.gl[0]=Math.min(Math.abs(a),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(a){this.gl[1]=Math.min(Math.abs(a),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(a){this.gl[2]=Math.min(Math.abs(a),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(a){this.gl[3]=Math.min(Math.abs(a),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(a){a=Math.floor(Math.abs(a)),this.r=Math.min(a,255),this.gl[0]=a/255,this.update(!0)}},green:{get:function(){return this.g},set:function(a){a=Math.floor(Math.abs(a)),this.g=Math.min(a,255),this.gl[1]=a/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(a){a=Math.floor(Math.abs(a)),this.b=Math.min(a,255),this.gl[2]=a/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(a){a=Math.floor(Math.abs(a)),this.a=Math.min(a,255),this.gl[3]=a/255,this.update()}},h:{get:function(){return this._h},set:function(a){this._h=a,u(a,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(a){this._s=a,u(this._h,a,this._v,this)}},v:{get:function(){return this._v},set:function(a){this._v=a,u(this._h,this._s,a,this)}}});h.exports=r},30245:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22946),y=function(c){c===void 0&&(c=1024);var u=[],l=255,r,a=255,v=0,o=0;for(r=0;r<=l;r++)u.push({r:a,g:r,b:o,color:d(a,r,o)});for(v=255,r=l;r>=0;r--)u.push({r,g:v,b:o,color:d(r,v,o)});for(a=0,r=0;r<=l;r++,v--)u.push({r:a,g:v,b:r,color:d(a,v,r)});for(v=0,o=255,r=0;r<=l;r++,o--,a++)u.push({r:a,g:v,b:o,color:d(a,v,o)});if(c===1024)return u;var p=[],m=0,g=1024/c;for(r=0;r<c;r++)p.push(u[Math.floor(m)]),m+=g;return p};h.exports=y},86672:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(d.a=e>>>24),d};h.exports=S},25409:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d=e.toString(16);return d.length===1?"0"+d:d};h.exports=S},22946:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e<<16|d<<8|y};h.exports=S},5657:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){return c<<24|e<<16|d<<8|y};h.exports=S},74777:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),y=e(59998),c=function(u,l,r){var a=r,v=r,o=r;if(l!==0){var p=r<.5?r*(1+l):r+l-r*l,m=2*r-p;a=y(m,p,u+1/3),v=y(m,p,u),o=y(m,p,u-1/3)}var g=new d;return g.setGLTo(a,v,o,1)};h.exports=c},89263:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(24650),y=function(c,u){c===void 0&&(c=1),u===void 0&&(u=1);for(var l=[],r=0;r<=359;r++)l.push(d(r/359,c,u));return l};h.exports=y},24650:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22946);function y(u,l,r,a){var v=(u+l*6)%6,o=Math.min(v,4-v,1);return Math.round(255*(a-a*r*Math.max(0,o)))}var c=function(u,l,r,a){l===void 0&&(l=1),r===void 0&&(r=1);var v=y(5,u,l,r),o=y(3,u,l,r),p=y(1,u,l,r);return a?a.setTo?a.setTo(v,o,p,a.alpha,!0):(a.r=v,a.g=o,a.b=p,a.color=d(v,o,p),a):{r:v,g:o,b:p,color:d(v,o,p)}};h.exports=c},91487:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),y=function(c){var u=new d;c=c.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(o,p,m,g){return p+p+m+m+g+g});var l=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c);if(l){var r=parseInt(l[1],16),a=parseInt(l[2],16),v=parseInt(l[3],16);u.setTo(r,a,v)}return u};h.exports=y},59998:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return y<0&&(y+=1),y>1&&(y-=1),y<.16666666666666666?e+(d-e)*6*y:y<.5?d:y<.6666666666666666?e+(d-e)*(.6666666666666666-y)*6:e};h.exports=S},74853:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),y=e(15978),c=function(u){var l=y(u);return new d(l.r,l.g,l.b,l.a)};h.exports=c},15978:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};h.exports=S},53756:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(42798),y=function(l,r,a,v,o,p,m,g){m===void 0&&(m=100),g===void 0&&(g=0);var x=g/m;return{r:d(l,v,x),g:d(r,o,x),b:d(a,p,x)}},c=function(l,r,a,v){return a===void 0&&(a=100),v===void 0&&(v=0),y(l.r,l.g,l.b,r.r,r.g,r.b,a,v)},u=function(l,r,a,v,o,p){return o===void 0&&(o=100),p===void 0&&(p=0),y(l.r,l.g,l.b,r,a,v,o,p)};h.exports={RGBWithRGB:y,ColorWithRGB:u,ColorWithColor:c}},73904:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),y=function(c){return new d(c.r,c.g,c.b,c.a)};h.exports=y},26841:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),y=function(c){var u=new d,l=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(c.toLowerCase());if(l){var r=parseInt(l[1],10),a=parseInt(l[2],10),v=parseInt(l[3],10),o=l[4]!==void 0?parseFloat(l[4]):1;u.setTo(r,a,v,o*255)}return u};h.exports=y},68033:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){c===void 0&&(c={h:0,s:0,v:0}),e/=255,d/=255,y/=255;var u=Math.min(e,d,y),l=Math.max(e,d,y),r=l-u,a=0,v=l===0?0:r/l,o=l;return l!==u&&(l===e?a=(d-y)/r+(d<y?6:0):l===d?a=(y-e)/r+2:l===y&&(a=(e-d)/r+4),a/=6),c.hasOwnProperty("_h")?(c._h=a,c._s=v,c._v=o):(c.h=a,c.s=v,c.v=o),c};h.exports=S},4880:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25409),y=function(c,u,l,r,a){return r===void 0&&(r=255),a===void 0&&(a="#"),a==="#"?"#"+((1<<24)+(c<<16)+(u<<8)+l).toString(16).slice(1,7):"0x"+d(r)+d(c)+d(u)+d(l)};h.exports=y},37243:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),y=e(27119),c=function(u,l){return u===void 0&&(u=0),l===void 0&&(l=255),new y(d(u,l),d(u,l),d(u,l))};h.exports=c},93222:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(91487),y=e(74853),c=e(73904),u=e(26841),l=function(r){var a=typeof r;switch(a){case"string":return r.substr(0,3).toLowerCase()==="rgb"?u(r):d(r);case"number":return y(r);case"object":return c(r)}};h.exports=l},95509:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119);d.ColorSpectrum=e(30245),d.ColorToRGBA=e(86672),d.ComponentToHex=e(25409),d.GetColor=e(22946),d.GetColor32=e(5657),d.HexStringToColor=e(91487),d.HSLToColor=e(74777),d.HSVColorWheel=e(89263),d.HSVToRGB=e(24650),d.HueToComponent=e(59998),d.IntegerToColor=e(74853),d.IntegerToRGB=e(15978),d.Interpolate=e(53756),d.ObjectToColor=e(73904),d.RandomRGB=e(37243),d.RGBStringToColor=e(26841),d.RGBToHSV=e(68033),d.RGBToString=e(4880),d.ValueToColor=e(93222),h.exports=d},24816:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Align:e(93545),BaseShader:e(31053),Bounds:e(15252),Canvas:e(23514),Color:e(95509),ColorMatrix:e(65246),Masks:e(93310),RGB:e(39298)}},76756:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(61286),c=new d({initialize:function(l,r,a,v,o,p){r||(r=l.sys.make.image({x:a,y:v,key:o,frame:p,add:!1})),this.bitmapMask=r,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(u){this.bitmapMask=u},preRenderWebGL:function(u,l,r){u.pipelines.BITMAPMASK_PIPELINE.beginMask(this,l,r)},postRenderWebGL:function(u,l,r){u.pipelines.BITMAPMASK_PIPELINE.endMask(this,l,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});y.register("bitmapMask",function(u,l,r,a,v){return new c(this.scene,u,l,r,a,v)}),h.exports=c},63037:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l){this.geometryMask=l,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(c){return this.geometryMask=c,this},setInvertAlpha:function(c){return c===void 0&&(c=!0),this.invertAlpha=c,this},preRenderWebGL:function(c,u,l){var r=c.gl;c.flush(),c.maskStack.length===0&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),c.maskCount=0),c.currentCameraMask.mask!==this&&(c.currentMask.mask=this),c.maskStack.push({mask:this,camera:l}),this.applyStencil(c,l,!0),c.maskCount++},applyStencil:function(c,u,l){var r=c.gl,a=this.geometryMask,v=c.maskCount,o=255;r.colorMask(!1,!1,!1,!1),l?(r.stencilFunc(r.EQUAL,v,o),r.stencilOp(r.KEEP,r.KEEP,r.INCR),v++):(r.stencilFunc(r.EQUAL,v+1,o),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),this.level=v,a.renderWebGL(c,a,u),c.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.invertAlpha?r.stencilFunc(r.NOTEQUAL,v,o):r.stencilFunc(r.EQUAL,v,o)},postRenderWebGL:function(c){var u=c.gl;c.maskStack.pop(),c.maskCount--,c.flush();var l=c.currentMask;if(c.maskStack.length===0)l.mask=null,u.disable(u.STENCIL_TEST);else{var r=c.maskStack[c.maskStack.length-1];r.mask.applyStencil(c,r.camera,!1),c.currentCameraMask.mask!==r.mask?(l.mask=r.mask,l.camera=r.camera):l.mask=null}},preRenderCanvas:function(c,u,l){var r=this.geometryMask;c.currentContext.save(),r.renderCanvas(c,r,l,null,null,!0),c.currentContext.clip()},postRenderCanvas:function(c){c.currentContext.restore()},destroy:function(){this.geometryMask=null}});h.exports=y},93310:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BitmapMask:e(76756),GeometryMask:e(63037)}},31053:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l,r,a){(!l||l==="")&&(l=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!r||r==="")&&(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),a===void 0&&(a=null),this.key=u,this.fragmentSrc=l,this.vertexSrc=r,this.uniforms=a}});h.exports=y},99584:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y;if(d)typeof d=="string"?y=document.getElementById(d):typeof d=="object"&&d.nodeType===1&&(y=d);else if(e.parentElement||d===null)return e;return y||(y=document.body),y.appendChild(e),e};h.exports=S},85178:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99584),y=function(c){var u=c.config;if(!(!u.parent||!u.domCreateContainer)){var l=document.createElement("div");l.style.cssText=["display: block;","width: "+c.scale.width+"px;","height: "+c.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+u.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),c.domContainer=l,d(l,u.parent)}};h.exports=y},21546:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36580),y=function(c){if(document.readyState==="complete"||document.readyState==="interactive"){c();return}var u=function(){document.removeEventListener("deviceready",u,!0),document.removeEventListener("DOMContentLoaded",u,!0),window.removeEventListener("load",u,!0),c()};document.body?d.cordova?document.addEventListener("deviceready",u,!1):(document.addEventListener("DOMContentLoaded",u,!0),window.addEventListener("load",u,!0)):window.setTimeout(u,20)};h.exports=y},74181:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){if(!e)return window.innerHeight;var d=Math.abs(window.orientation),y={w:0,h:0},c=document.createElement("div");return c.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(c),y.w=d===90?c.offsetHeight:window.innerWidth,y.h=d===90?window.innerWidth:c.offsetHeight,document.documentElement.removeChild(c),c=null,Math.abs(window.orientation)!==90?y.h:y.w};h.exports=S},9229:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(55301),y=function(c,u){var l=window.screen,r=l?l.orientation||l.mozOrientation||l.msOrientation:!1;if(r&&typeof r.type=="string")return r.type;if(typeof r=="string")return r;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?d.ORIENTATION.PORTRAIT:d.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return d.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return d.ORIENTATION.LANDSCAPE}else return u>c?d.ORIENTATION.PORTRAIT:d.ORIENTATION.LANDSCAPE};h.exports=y},2893:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d;return e!==""&&(typeof e=="string"?d=document.getElementById(e):e&&e.nodeType===1&&(d=e)),d||(d=document.body),d};h.exports=S},89200:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d="";try{if(window.DOMParser){var y=new DOMParser;d=y.parseFromString(e,"text/xml")}else d=new ActiveXObject("Microsoft.XMLDOM"),d.loadXML(e)}catch{d=null}return!d||!d.documentElement||d.getElementsByTagName("parsererror").length?null:d};h.exports=S},55638:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){e.parentNode&&e.parentNode.removeChild(e)};h.exports=S},27385:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72283),c=new d({initialize:function(){this.isRunning=!1,this.callback=y,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var l=this;this.step=function r(a){l.callback(a),l.isRunning&&(l.timeOutID=window.requestAnimationFrame(r))},this.stepTimeout=function r(){l.isRunning&&(l.timeOutID=window.setTimeout(r,l.delay)),l.callback(window.performance.now())}},start:function(u,l,r){this.isRunning||(this.callback=u,this.isSetTimeOut=l,this.delay=r,this.isRunning=!0,this.timeOutID=l?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=y}});h.exports=c},3590:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={AddToDOM:e(99584),DOMContentLoaded:e(21546),GetInnerHeight:e(74181),GetScreenOrientation:e(9229),GetTarget:e(2893),ParseXML:e(89200),RemoveFromDOM:e(55638),RequestAnimationFrame:e(27385)};h.exports=d},78491:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(6659),c=e(91963),u=new d({Extends:y,initialize:function(){y.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});c.register("EventEmitter",u,"events"),h.exports=u},95146:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={EventEmitter:e(78491)}},20170:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a){a===void 0&&(a=1),y.call(this,c.BARREL,r),this.amount=a}});h.exports=u},51182:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o,p,m,g){v===void 0&&(v=1),o===void 0&&(o=1),p===void 0&&(p=1),m===void 0&&(m=1),g===void 0&&(g=4),y.call(this,c.BLOOM,r),this.steps=g,this.offsetX=v,this.offsetY=o,this.blurStrength=p,this.strength=m,this.glcolor=[1,1,1],a!=null&&(this.color=a)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var r=this.glcolor;r[0]=(l>>16&255)/255,r[1]=(l>>8&255)/255,r[2]=(l&255)/255}}});h.exports=u},51498:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o,p,m,g){v===void 0&&(v=2),o===void 0&&(o=2),p===void 0&&(p=1),g===void 0&&(g=4),y.call(this,c.BLUR,r),this.quality=0,this.x=v,this.y=o,this.steps=g,this.strength=p,this.glcolor=[1,1,1],m!=null&&(this.color=m)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var r=this.glcolor;r[0]=(l>>16&255)/255,r[1]=(l>>8&255)/255,r[2]=(l&255)/255}}});h.exports=u},12042:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o,p,m,g,x){a===void 0&&(a=.5),v===void 0&&(v=1),o===void 0&&(o=.2),p===void 0&&(p=!1),m===void 0&&(m=1),g===void 0&&(g=1),x===void 0&&(x=1),y.call(this,c.BOKEH,r),this.radius=a,this.amount=v,this.contrast=o,this.isTiltShift=p,this.strength=x,this.blurX=m,this.blurY=g}});h.exports=u},69900:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o,p,m){a===void 0&&(a=8),p===void 0&&(p=1),m===void 0&&(m=.005),y.call(this,c.CIRCLE,r),this.scale=p,this.feather=m,this.thickness=a,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],v!=null&&(this.color=v),o!=null&&(this.backgroundColor=o)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var r=this.glcolor;r[0]=(l>>16&255)/255,r[1]=(l>>8&255)/255,r[2]=(l&255)/255}},backgroundColor:{get:function(){var l=this.glcolor2;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var r=this.glcolor2;r[0]=(l>>16&255)/255,r[1]=(l>>8&255)/255,r[2]=(l&255)/255}}});h.exports=u},48991:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(65246),c=e(47406),u=new d({Extends:y,initialize:function(r){y.call(this),this.type=c.COLOR_MATRIX,this.gameObject=r,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});h.exports=u},47551:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l){this.type=u,this.gameObject=l,this.active=!0},setActive:function(c){return this.active=c,this},destroy:function(){this.gameObject=null,this.active=!1}});h.exports=y},47909:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o){a===void 0&&(a="__WHITE"),v===void 0&&(v=.005),o===void 0&&(o=.005),y.call(this,c.DISPLACEMENT,r),this.x=v,this.y=o,this.glTexture,this.setTexture(a)},setTexture:function(l){var r=this.gameObject.scene.sys.textures.getFrame(l);return r&&(this.glTexture=r.glTexture),this}});h.exports=u},18919:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o,p){v===void 0&&(v=4),o===void 0&&(o=0),p===void 0&&(p=!1),y.call(this,c.GLOW,r),this.outerStrength=v,this.innerStrength=o,this.knockout=p,this.glcolor=[1,1,1,1],a!==void 0&&(this.color=a)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var r=this.glcolor;r[0]=(l>>16&255)/255,r[1]=(l>>8&255)/255,r[2]=(l&255)/255}}});h.exports=u},62494:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o,p,m,g,x,C){o===void 0&&(o=.2),p===void 0&&(p=0),m===void 0&&(m=0),g===void 0&&(g=0),x===void 0&&(x=1),C===void 0&&(C=0),y.call(this,c.GRADIENT,r),this.alpha=o,this.size=C,this.fromX=p,this.fromY=m,this.toX=g,this.toY=x,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],a!=null&&(this.color1=a),v!=null&&(this.color2=v)},color1:{get:function(){var l=this.glcolor1;return(l[0]<<16)+(l[1]<<8)+(l[2]|0)},set:function(l){var r=this.glcolor1;r[0]=l>>16&255,r[1]=l>>8&255,r[2]=l&255}},color2:{get:function(){var l=this.glcolor2;return(l[0]<<16)+(l[1]<<8)+(l[2]|0)},set:function(l){var r=this.glcolor2;r[0]=l>>16&255,r[1]=l>>8&255,r[2]=l&255}}});h.exports=u},68897:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a){a===void 0&&(a=1),y.call(this,c.PIXELATE,r),this.amount=a}});h.exports=u},58575:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o,p,m,g,x){a===void 0&&(a=0),v===void 0&&(v=0),o===void 0&&(o=.1),p===void 0&&(p=1),g===void 0&&(g=6),x===void 0&&(x=1),y.call(this,c.SHADOW,r),this.x=a,this.y=v,this.decay=o,this.power=p,this.glcolor=[0,0,0,1],this.samples=g,this.intensity=x,m!==void 0&&(this.color=m)},color:{get:function(){var l=this.glcolor;return(l[0]*255<<16)+(l[1]*255<<8)+(l[2]*255|0)},set:function(l){var r=this.glcolor;r[0]=(l>>16&255)/255,r[1]=(l>>8&255)/255,r[2]=(l&255)/255}}});h.exports=u},33755:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o,p){a===void 0&&(a=.5),v===void 0&&(v=.5),o===void 0&&(o=3),p===void 0&&(p=!1),y.call(this,c.SHINE,r),this.speed=a,this.lineWidth=v,this.gradient=o,this.reveal=p}});h.exports=u},24949:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o,p){a===void 0&&(a=.5),v===void 0&&(v=.5),o===void 0&&(o=.5),p===void 0&&(p=.5),y.call(this,c.VIGNETTE,r),this.x=a,this.y=v,this.radius=o,this.strength=p}});h.exports=u},66241:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47551),c=e(47406),u=new d({Extends:y,initialize:function(r,a,v,o,p){a===void 0&&(a=.1),v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=!1),y.call(this,c.WIPE,r),this.progress=0,this.wipeWidth=a,this.direction=v,this.axis=o,this.reveal=p}});h.exports=u},47406:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};h.exports=S},96910:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),y=e(47406),c={Barrel:e(20170),Controller:e(47551),Bloom:e(51182),Blur:e(51498),Bokeh:e(12042),Circle:e(69900),ColorMatrix:e(48991),Displacement:e(47909),Glow:e(18919),Gradient:e(62494),Pixelate:e(68897),Shadow:e(58575),Shine:e(33755),Vignette:e(24949),Wipe:e(66241)};c=d(!1,c,y),h.exports=c},88933:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),y=e(20494),c=function(u,l,r){l.x=y(r,"x",0),l.y=y(r,"y",0),l.depth=y(r,"depth",0),l.flipX=y(r,"flipX",!1),l.flipY=y(r,"flipY",!1);var a=y(r,"scale",null);typeof a=="number"?l.setScale(a):a!==null&&(l.scaleX=y(a,"x",1),l.scaleY=y(a,"y",1));var v=y(r,"scrollFactor",null);typeof v=="number"?l.setScrollFactor(v):v!==null&&(l.scrollFactorX=y(v,"x",1),l.scrollFactorY=y(v,"y",1)),l.rotation=y(r,"rotation",0);var o=y(r,"angle",null);o!==null&&(l.angle=o),l.alpha=y(r,"alpha",1);var p=y(r,"origin",null);if(typeof p=="number")l.setOrigin(p);else if(p!==null){var m=y(p,"x",.5),g=y(p,"y",.5);l.setOrigin(m,g)}l.blendMode=y(r,"blendMode",d.NORMAL),l.visible=y(r,"visible",!0);var x=y(r,"add",!0);return x&&u.sys.displayList.add(l),l.preUpdate&&u.sys.updateList.add(l),l};h.exports=c},32291:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(20494),y=function(c,u){var l=d(u,"anims",null);if(l===null)return c;if(typeof l=="string")c.anims.play(l);else if(typeof l=="object"){var r=c.anims,a=d(l,"key",void 0);if(a){var v=d(l,"startFrame",void 0),o=d(l,"delay",0),p=d(l,"repeat",0),m=d(l,"repeatDelay",0),g=d(l,"yoyo",!1),x=d(l,"play",!1),C=d(l,"delayedPlay",0),M={key:a,delay:o,repeat:p,repeatDelay:m,yoyo:g,startFrame:v};x?r.play(M):C>0?r.playAfterDelay(M,C):r.load(M)}}return c};h.exports=y},91713:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(71207),c=e(91963),u=e(56631),l=e(7599),r=e(17922),a=new d({Extends:y,initialize:function(o){y.call(this,o),this.sortChildrenFlag=!1,this.scene=o,this.systems=o.sys,this.events=o.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.events.once(l.DESTROY,this.destroy,this)},addChildCallback:function(v){v.displayList&&v.displayList!==this&&v.removeFromDisplayList(),v.parentContainer&&v.parentContainer.remove(v),v.displayList||(this.queueDepthSort(),v.displayList=this,v.emit(u.ADDED_TO_SCENE,v,this.scene),this.events.emit(l.ADDED_TO_SCENE,v,this.scene))},removeChildCallback:function(v){this.queueDepthSort(),v.displayList=null,v.emit(u.REMOVED_FROM_SCENE,v,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,v,this.scene)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(v,o){return v._depth-o._depth},getChildren:function(){return this.list},shutdown:function(){for(var v=this.list;v.length;)v[0].destroy(!0);this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});c.register("DisplayList",a,"displayList"),h.exports=a},89980:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(48129),c=e(81078),u=e(6659),l=e(56631),r=e(7599),a=new d({Extends:u,initialize:function(o,p){u.call(this),this.scene=o,this.displayList=null,this.type=p,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(l.ADDED_TO_SCENE,this.addedToScene,this),this.on(l.REMOVED_FROM_SCENE,this.removedFromScene,this),o.sys.queueDepthSort()},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},setState:function(v){return this.state=v,this},setDataEnabled:function(){return this.data||(this.data=new c(this)),this},setData:function(v,o){return this.data||(this.data=new c(this)),this.data.set(v,o),this},incData:function(v,o){return this.data||(this.data=new c(this)),this.data.inc(v,o),this},toggleData:function(v){return this.data||(this.data=new c(this)),this.data.toggle(v),this},getData:function(v){return this.data||(this.data=new c(this)),this.data.get(v)},setInteractive:function(v,o,p){return this.scene.sys.input.enable(this,v,o,p),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return y(this)},willRender:function(v){var o=this.displayList&&this.displayList.active?this.displayList.willRender(v):!0;return!(!o||a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},getIndexList:function(){for(var v=this,o=this.parentContainer,p=[];o&&(p.unshift(o.getIndex(v)),v=o,o.parentContainer);)o=o.parentContainer;return this.displayList?p.unshift(this.displayList.getIndex(v)):p.unshift(this.scene.sys.displayList.getIndex(v)),p},addToDisplayList:function(v){return v===void 0&&(v=this.scene.sys.displayList),this.displayList&&this.displayList!==v&&this.removeFromDisplayList(),v.exists(this)||(this.displayList=v,v.add(this,!0),v.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),v.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var v=this.displayList||this.scene.sys.displayList;return v&&v.exists(this)&&(v.remove(this,!0),v.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),v.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(v){!this.scene||this.ignoreDestroy||(v===void 0&&(v=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(l.DESTROY,this,v),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});a.RENDER_MASK=15,h.exports=a},99325:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(91963),c=e(7599),u=new d({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(l,r){u.prototype.hasOwnProperty(l)||(u.prototype[l]=r)},u.remove=function(l){u.prototype.hasOwnProperty(l)&&delete u.prototype[l]},y.register("GameObjectCreator",u,"make"),h.exports=u},61286:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(91963),c=e(7599),u=new d({initialize:function(r){this.scene=r,this.systems=r.sys,this.events=r.sys.events,this.displayList,this.updateList,this.events.once(c.BOOT,this.boot,this),this.events.on(c.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},existing:function(l){return(l.renderCanvas||l.renderWebGL)&&this.displayList.add(l),l.preUpdate&&this.updateList.add(l),l},shutdown:function(){this.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(l,r){u.prototype.hasOwnProperty(l)||(u.prototype[l]=r)},u.remove=function(l){u.prototype.hasOwnProperty(l)&&delete u.prototype[l]},y.register("GameObjectFactory",u,"add"),h.exports=u},73329:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(69360),y=new d,c=new d,u=new d,l={camera:y,sprite:c,calc:u},r=function(a,v,o){var p=y,m=c,g=u;return m.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),p.copyFrom(v.matrix),o?(p.multiplyWithOffset(o,-v.scrollX*a.scrollFactorX,-v.scrollY*a.scrollFactorY),m.e=a.x,m.f=a.y):(m.e-=v.scrollX*a.scrollFactorX,m.f-=v.scrollY*a.scrollFactorY),p.multiply(m,g),l};h.exports=r},92034:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(74623),c=e(91963),u=e(7599),l=new d({Extends:y,initialize:function(a){y.call(this),this.checkQueue=!0,this.scene=a,this.systems=a.sys,a.sys.events.once(u.BOOT,this.boot,this),a.sys.events.on(u.START,this.start,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(u.PRE_UPDATE,this.update,this),r.on(u.UPDATE,this.sceneUpdate,this),r.once(u.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,a){for(var v=this._active,o=v.length,p=0;p<o;p++){var m=v[p];m.active&&m.preUpdate.call(m,r,a)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var a=this.systems.events;a.off(u.PRE_UPDATE,this.update,this),a.off(u.UPDATE,this.sceneUpdate,this),a.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});c.register("UpdateList",l,"updateList"),h.exports=l},8810:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u,l,r,a,v,o,p,m,g,x,C){var M=y.x-d.displayOriginX+u,R=y.y-d.displayOriginY+l,P=M+y.w,w=R+y.h,A=r.getXRound(M,R,a),G=r.getYRound(M,R,a),O=r.getXRound(M,w,a),L=r.getYRound(M,w,a),I=r.getXRound(P,w,a),F=r.getYRound(P,w,a),D=r.getXRound(P,R,a),V=r.getYRound(P,R,a);e.batchQuad(d,A,G,O,L,I,F,D,V,c.u0,c.v0,c.u1,c.v1,v,o,p,m,g,x,C)};h.exports=S},82173:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){if(y===void 0&&(y=!1),c===void 0)return c={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},c;var u=e.text,l=u.length,r=e.maxWidth,a=e.wordWrapCharCode,v=Number.MAX_VALUE,o=Number.MAX_VALUE,p=0,m=0,g=e.fontData.chars,x=e.fontData.lineHeight,C=e.letterSpacing,M=e.lineSpacing,R=0,P=0,w=0,A=null,G=e._align,O=0,L=0,I=e.fontSize/e.fontData.size,F=I*e.scaleX,D=I*e.scaleY,V=null,k=0,W=[],X=Number.MAX_VALUE,H=0,$=0,z=0,b,B=[],N=[],U=null;if(r>0){for(b=0;b<l;b++){if(w=u.charCodeAt(b),w===10){U!==null&&(B.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D,cr:!0}),U=null),R=0,P+=x+M,V=null;continue}if(A=g[w],!!A){if(V!==null)var Y=A.kerning[k];w===a?U!==null&&(B.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D,cr:!1}),U=null):(U===null&&(U={word:"",i:b,x:R,y:P,w:0,h:x,cr:!1}),U.word=U.word.concat(u[b]),U.w+=A.xOffset+A.xAdvance+(Y!==void 0?Y:0)),R+=A.xAdvance+C,V=A,k=w}}U!==null&&B.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D,cr:!1}),R=0,P=0,V=null,k=0;var K,Z=0,J=[];for(b=0;b<B.length;b++){var Q=B[b],j=Q.x,q=Q.x+Q.w;if(K){var tt=j-(K.x+K.w);Z=j-(tt+K.w),K=null}var _=j-Z,it=q-Z;_>r||it>r?(J.push(Q.i-1),Q.cr?(J.push(Q.i+Q.word.length),Z=0,K=null):K=Q):Q.cr&&(J.push(Q.i+Q.word.length),Z=0,K=null)}var rt=function(gt,mt,xt){return gt.substr(0,mt)+xt+gt.substr(mt+1)};for(b=J.length-1;b>=0;b--)u=rt(u,J[b],`
`);c.wrappedText=u,l=u.length,B=[],U=null}var at=0;for(b=0;b<l;b++){if(w=u.charCodeAt(b),w===10){U!==null&&(B.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D}),U=null),R=0,P+=x+M,V=null,W[$]=z,z>H&&(H=z),z<X&&(X=z),$++,z=0;continue}if(A=g[w],!!A){if(O=R,L=P,V!==null){var ot=A.kerning[k];O+=ot!==void 0?ot:0}v>O&&(v=O),o>L&&(o=L);var et=O+A.xAdvance,nt=L+x;p<et&&(p=et),m<nt&&(m=nt);var st=A.xOffset+A.xAdvance+(ot!==void 0?ot:0);w===a?U!==null&&(B.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D}),U=null):(U===null&&(U={word:"",i:at,x:R,y:P,w:0,h:x}),U.word=U.word.concat(u[b]),U.w+=st),N.push({i:at,idx:b,char:u[b],code:w,x:(A.xOffset+O)*I,y:(A.yOffset+P)*I,w:A.width*I,h:A.height*I,t:P*I,r:et*I,b:x*I,line:$,glyph:A}),R+=A.xAdvance+C+(ot!==void 0?ot:0),V=A,k=w,z=et*I,at++}}if(U!==null&&B.push({word:U.word,i:U.i,x:U.x*F,y:U.y*D,w:U.w*F,h:U.h*D}),W[$]=z,z>H&&(H=z),z<X&&(X=z),G>0)for(var ut=0;ut<N.length;ut++){var lt=N[ut];if(G===1){var pt=(H-W[lt.line])/2;lt.x+=pt,lt.r+=pt}else if(G===2){var ct=H-W[lt.line];lt.x+=ct,lt.r+=ct}}var ft=c.local,dt=c.global,vt=c.lines;return ft.x=v*I,ft.y=o*I,ft.width=p*I,ft.height=m*I,dt.x=e.x-e._displayOriginX+v*F,dt.y=e.y-e._displayOriginY+o*D,dt.width=p*F,dt.height=m*D,vt.shortest=X,vt.longest=H,vt.lengths=W,d&&(ft.x=Math.ceil(ft.x),ft.y=Math.ceil(ft.y),ft.width=Math.ceil(ft.width),ft.height=Math.ceil(ft.height),dt.x=Math.ceil(dt.x),dt.y=Math.ceil(dt.y),dt.width=Math.ceil(dt.width),dt.height=Math.ceil(dt.height),vt.shortest=Math.ceil(X),vt.longest=Math.ceil(H)),y&&(e._displayOriginX=e.originX*ft.width,e._displayOriginY=e.originY*ft.height,dt.x=e.x-e._displayOriginX*e.scaleX,dt.y=e.y-e._displayOriginY*e.scaleY,d&&(dt.x=Math.ceil(dt.x),dt.y=Math.ceil(dt.y))),c.words=B,c.characters=N,c.lines.height=x,c.scale=I,c.scaleX=e.scaleX,c.scaleY=e.scaleY,c};h.exports=S},68298:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(31476),y=function(c,u,l,r,a,v,o){var p=c.sys.textures.get(l),m=p.get(r),g=c.sys.cache.xml.get(a);if(m&&g){var x=d(g,m,v,o,p);return c.sys.cache.bitmapFont.add(u,{data:x,texture:l,frame:r,fromAtlas:!0}),!0}else return!1};h.exports=y},39860:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),y=function(c,u){var l=u.width,r=u.height,a=Math.floor(l/2),v=Math.floor(r/2),o=d(u,"chars","");if(o!==""){var p=d(u,"image",""),m=c.sys.textures.getFrame(p),g=m.cutX,x=m.cutY,C=m.source.width,M=m.source.height,R=d(u,"offset.x",0),P=d(u,"offset.y",0),w=d(u,"spacing.x",0),A=d(u,"spacing.y",0),G=d(u,"lineSpacing",0),O=d(u,"charsPerRow",null);O===null&&(O=C/l,O>o.length&&(O=o.length));for(var L=R,I=P,F={retroFont:!0,font:p,size:l,lineHeight:r+G,chars:{}},D=0,V=0;V<o.length;V++){var k=o.charCodeAt(V),W=(g+L)/C,X=(x+I)/M,H=(g+L+l)/C,$=(x+I+r)/M;F.chars[k]={x:L,y:I,width:l,height:r,centerX:a,centerY:v,xOffset:0,yOffset:0,xAdvance:l,data:{},kerning:{},u0:W,v0:X,u1:H,v1:$},D++,D===O?(D=0,L=R,I+=r+A):L+=l+w}var z={data:F,frame:null,texture:p};return z}};h.exports=y},31476:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(d,y){return parseInt(d.getAttribute(y),10)}var e=function(d,y,c,u,l){c===void 0&&(c=0),u===void 0&&(u=0);var r=y.cutX,a=y.cutY,v=y.source.width,o=y.source.height,p=y.sourceIndex,m={},g=d.getElementsByTagName("info")[0],x=d.getElementsByTagName("common")[0];m.font=g.getAttribute("face"),m.size=S(g,"size"),m.lineHeight=S(x,"lineHeight")+u,m.chars={};var C=d.getElementsByTagName("char"),M=y!==void 0&&y.trimmed;if(M)var R=y.height,P=y.width;for(var w=0;w<C.length;w++){var A=C[w],G=S(A,"id"),O=String.fromCharCode(G),L=S(A,"x"),I=S(A,"y"),F=S(A,"width"),D=S(A,"height");M&&(L<P&&(P=L),I<R&&(R=I)),M&&R!==0&&P!==0&&(L-=y.x,I-=y.y);var V=(r+L)/v,k=(a+I)/o,W=(r+L+F)/v,X=(a+I+D)/o;if(m.chars[G]={x:L,y:I,width:F,height:D,centerX:Math.floor(F/2),centerY:Math.floor(D/2),xOffset:S(A,"xoffset"),yOffset:S(A,"yoffset"),xAdvance:S(A,"xadvance")+c,data:{},kerning:{},u0:V,v0:k,u1:W,v1:X},l&&F!==0&&D!==0){var H=l.add(O,p,L,I,F,D);H&&H.setUVs(F,D,V,k,W,X)}}var $=d.getElementsByTagName("kerning");for(w=0;w<$.length;w++){var z=$[w],b=S(z,"first"),B=S(z,"second"),N=S(z,"amount");m.chars[B].kerning[b]=N}return m};h.exports=e},55873:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66863),y=e(98611),c={Parse:e(39860)};c=y(!1,c,d),h.exports=c},66863:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};h.exports=S},13468:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44616),y=e(56694),c=e(88899),u=new y({Extends:d,Mixins:[c],initialize:function(r,a,v,o,p,m,g){d.call(this,r,a,v,o,p,m,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(l,r){return this.cropWidth=l,this.cropHeight=r,this},setDisplayCallback:function(l){return this.displayCallback=l,this},setScrollX:function(l){return this.scrollX=l,this},setScrollY:function(l){return this.scrollY=l,this}});h.exports=u},93438:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(49584),y=function(c,u,l,r){var a=u._text,v=a.length,o=c.currentContext;if(!(v===0||!d(c,o,u,l,r))){l.addToRenderList(u);var p=u.fromAtlas?u.frame:u.texture.frames.__BASE,m=u.displayCallback,g=u.callbackData,x=u.fontData.chars,C=u.fontData.lineHeight,M=u._letterSpacing,R=0,P=0,w=0,A=null,G=0,O=0,L=0,I=0,F=0,D=0,V=null,k=0,W=u.frame.source.image,X=p.cutX,H=p.cutY,$=0,z=0,b=u._fontSize/u.fontData.size,B=u._align,N=0,U=0;u.getTextBounds(!1);var Y=u._bounds.lines;B===1?U=(Y.longest-Y.lengths[0])/2:B===2&&(U=Y.longest-Y.lengths[0]),o.translate(-u.displayOriginX,-u.displayOriginY);var K=l.roundPixels;u.cropWidth>0&&u.cropHeight>0&&(o.beginPath(),o.rect(0,0,u.cropWidth,u.cropHeight),o.clip());for(var Z=0;Z<v;Z++){if(z=b,$=0,w=a.charCodeAt(Z),w===10){N++,B===1?U=(Y.longest-Y.lengths[N])/2:B===2&&(U=Y.longest-Y.lengths[N]),R=0,P+=C,V=null;continue}if(A=x[w],!!A){if(G=X+A.x,O=H+A.y,L=A.width,I=A.height,F=A.xOffset+R-u.scrollX,D=A.yOffset+P-u.scrollY,V!==null){var J=A.kerning[k];F+=J!==void 0?J:0}if(m){g.index=Z,g.charCode=w,g.x=F,g.y=D,g.scale=z,g.rotation=$,g.data=A.data;var Q=m(g);F=Q.x,D=Q.y,z=Q.scale,$=Q.rotation}F*=z,D*=z,F+=U,R+=A.xAdvance+M+(J!==void 0?J:0),V=A,k=w,!(L===0||I===0||w===32)&&(K&&(F=Math.round(F),D=Math.round(D)),o.save(),o.translate(F,D),o.rotate($),o.scale(z,z),o.drawImage(W,G,O,L,I,0,0,L,I),o.restore())}}o.restore()}};h.exports=y},67513:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(13468),y=e(88933),c=e(99325),u=e(20494);c.register("dynamicBitmapText",function(l,r){l===void 0&&(l={});var a=u(l,"font",""),v=u(l,"text",""),o=u(l,"size",!1),p=new d(this.scene,0,0,a,v,o);return r!==void 0&&(l.add=r),y(this.scene,p,l),p})},94145:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(13468),y=e(61286);y.register("dynamicBitmapText",function(c,u,l,r,a){return this.displayList.add(new d(this.scene,c,u,l,r,a))})},88899:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(16873),c=e(93438),h.exports={renderWebGL:y,renderCanvas:c}},16873:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=e(69360),c=e(75512),u=new y,l=function(r,a,v,o){var p=a.text,m=p.length;if(m!==0){v.addToRenderList(a);var g=r.pipelines.set(a.pipeline,a),x=d(a,v,o);r.pipelines.preBatch(a);var C=x.sprite,M=x.calc,R=u,P=a.cropWidth>0||a.cropHeight>0;P&&(g.flush(),r.pushScissor(M.tx,M.ty,a.cropWidth*M.scaleX,a.cropHeight*M.scaleY));var w=a.frame,A=w.glTexture,G=a.tintFill,O=c.getTintAppendFloatAlpha(a.tintTopLeft,v.alpha*a._alphaTL),L=c.getTintAppendFloatAlpha(a.tintTopRight,v.alpha*a._alphaTR),I=c.getTintAppendFloatAlpha(a.tintBottomLeft,v.alpha*a._alphaBL),F=c.getTintAppendFloatAlpha(a.tintBottomRight,v.alpha*a._alphaBR),D=g.setGameObject(a),V=0,k=0,W=0,X=0,H=a.letterSpacing,$,z=0,b=0,B,N=a.scrollX,U=a.scrollY,Y=a.fontData,K=Y.chars,Z=Y.lineHeight,J=a.fontSize/Y.size,Q=0,j=a._align,q=0,tt=0,_=a.getTextBounds(!1);a.maxWidth>0&&(p=_.wrappedText,m=p.length);var it=a._bounds.lines;j===1?tt=(it.longest-it.lengths[0])/2:j===2&&(tt=it.longest-it.lengths[0]);for(var rt=v.roundPixels,at=a.displayCallback,ot=a.callbackData,et=0;et<m;et++){if(W=p.charCodeAt(et),W===10){q++,j===1?tt=(it.longest-it.lengths[q])/2:j===2&&(tt=it.longest-it.lengths[q]),V=0,k+=Z,B=null;continue}if($=K[W],!!$){z=$.width,b=$.height;var nt=$.xOffset+V-N,st=$.yOffset+k-U;if(B!==null){var ut=$.kerning[X];nt+=ut!==void 0?ut:0}if(V+=$.xAdvance+H,B=$,X=W,!(z===0||b===0||W===32)){if(J=a.fontSize/a.fontData.size,Q=0,at){ot.color=0,ot.tint.topLeft=O,ot.tint.topRight=L,ot.tint.bottomLeft=I,ot.tint.bottomRight=F,ot.index=et,ot.charCode=W,ot.x=nt,ot.y=st,ot.scale=J,ot.rotation=Q,ot.data=$.data;var lt=at(ot);nt=lt.x,st=lt.y,J=lt.scale,Q=lt.rotation,lt.color?(O=lt.color,L=lt.color,I=lt.color,F=lt.color):(O=lt.tint.topLeft,L=lt.tint.topRight,I=lt.tint.bottomLeft,F=lt.tint.bottomRight),O=c.getTintAppendFloatAlpha(O,v.alpha*a._alphaTL),L=c.getTintAppendFloatAlpha(L,v.alpha*a._alphaTR),I=c.getTintAppendFloatAlpha(I,v.alpha*a._alphaBL),F=c.getTintAppendFloatAlpha(F,v.alpha*a._alphaBR)}nt*=J,st*=J,nt-=a.displayOriginX,st-=a.displayOriginY,nt+=tt,R.applyITRS(nt,st,Q,J,J),M.multiply(R,C);var pt=$.u0,ct=$.v0,ft=$.u1,dt=$.v1,vt=z,gt=b,mt=C.e,xt=C.f,yt=gt*C.c+C.e,Ct=gt*C.d+C.f,Tt=vt*C.a+gt*C.c+C.e,St=vt*C.b+gt*C.d+C.f,Pt=vt*C.a+C.e,Et=vt*C.b+C.f;rt&&(mt=Math.round(mt),xt=Math.round(xt),yt=Math.round(yt),Ct=Math.round(Ct),Tt=Math.round(Tt),St=Math.round(St),Pt=Math.round(Pt),Et=Math.round(Et)),g.batchQuad(a,mt,xt,yt,Ct,Tt,St,Pt,Et,pt,ct,ft,dt,O,L,I,F,G,A,D)}}}P&&(g.flush(),r.popScissor()),r.pipelines.postBatch(a)}};h.exports=l},44616:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(82897),c=e(64937),u=e(89980),l=e(82173),r=e(68298),a=e(31476),v=e(74118),o=e(84557),p=new d({Extends:u,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Texture,c.Tint,c.Transform,c.Visible,o],initialize:function(g,x,C,M,R,P,w){R===void 0&&(R=""),w===void 0&&(w=0),u.call(this,g,"BitmapText"),this.font=M;var A=this.scene.sys.cache.bitmapFont.get(M);A||console.warn("Invalid BitmapText key: "+M),this.fontData=A.data,this._text="",this._fontSize=P||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=w,this._bounds=l(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=A.fromAtlas,this.setTexture(A.texture,A.frame),this.setPosition(x,C),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(R)},setLeftAlign:function(){return this._align=p.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=p.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=p.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(m){return this._fontSize=m,this._dirty=!0,this},setLetterSpacing:function(m){return m===void 0&&(m=0),this._letterSpacing=m,this._dirty=!0,this},setLineSpacing:function(m){return m===void 0&&(m=0),this.lineSpacing=m,this},setText:function(m){return!m&&m!==0&&(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this.text&&(this._text=m.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(m,g,x,C){return m===void 0&&(m=0),g===void 0&&(g=0),x===void 0&&(x=0),C===void 0&&(C=.5),this.dropShadowX=m,this.dropShadowY=g,this.dropShadowColor=x,this.dropShadowAlpha=C,this},setCharacterTint:function(m,g,x,C,M,R,P){m===void 0&&(m=0),g===void 0&&(g=1),x===void 0&&(x=!1),C===void 0&&(C=-1),M===void 0&&(M=C,R=C,P=C);var w=this.text.length;g===-1&&(g=w),m<0&&(m=w+m),m=y(m,0,w-1);for(var A=y(m+g,m,w),G=this.charColors,O=m;O<A;O++){var L=G[O];if(C===-1)G[O]=null;else{var I=x?1:0;L?(L.tintEffect=I,L.tintTL=C,L.tintTR=M,L.tintBL=R,L.tintBR=P):G[O]={tintEffect:I,tintTL:C,tintTR:M,tintBL:R,tintBR:P}}}return this},setWordTint:function(m,g,x,C,M,R,P){g===void 0&&(g=1);for(var w=this.getTextBounds(),A=w.words,G=typeof m=="number",O=0,L=0;L<A.length;L++){var I=A[L];if((G&&L===m||!G&&I.word===m)&&(this.setCharacterTint(I.i,I.word.length,x,C,M,R,P),O++,O===g))return this}return this},getTextBounds:function(m){var g=this._bounds;return(this._dirty||m||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(l(this,m,!0,g),this._dirty=!1),g},getCharacterAt:function(m,g,x){for(var C=this.getLocalPoint(m,g,null,x),M=this.getTextBounds(),R=M.characters,P=new v,w=0;w<R.length;w++){var A=R[w];if(P.setTo(A.x,A.t,A.r-A.x,A.b),P.contains(C.x,C.y))return A}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(m,g,x){if(g===void 0&&(g=this._fontSize),x===void 0&&(x=this._align),m!==this.font){var C=this.scene.sys.cache.bitmapFont.get(m);C&&(this.font=m,this.fontData=C.data,this._fontSize=g,this._align=x,this.fromAtlas=C.fromAtlas===!0,this.setTexture(C.texture,C.frame),l(this,!1,!0,this._bounds))}return this},setMaxWidth:function(m,g){return this._maxWidth=m,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(m){this._align=m,this._dirty=!0},get:function(){return this._align}},text:{set:function(m){this.setText(m)},get:function(){return this._text}},fontSize:{set:function(m){this._fontSize=m,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(m){this._letterSpacing=m,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(m){this._lineSpacing=m,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(m){this._maxWidth=m,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var m=c.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return m.data=g,m},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});p.ALIGN_LEFT=0,p.ALIGN_CENTER=1,p.ALIGN_RIGHT=2,p.ParseFromAtlas=r,p.ParseXMLBitmapFont=a,h.exports=p},97545:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(49584),y=function(c,u,l,r){var a=u._text,v=a.length,o=c.currentContext;if(!(v===0||!d(c,o,u,l,r))){l.addToRenderList(u);var p=u.fromAtlas?u.frame:u.texture.frames.__BASE,m=u.fontData.chars,g=u.fontData.lineHeight,x=u._letterSpacing,C=u._lineSpacing,M=0,R=0,P=0,w=null,A=0,G=0,O=0,L=0,I=0,F=0,D=null,V=0,k=p.source.image,W=p.cutX,X=p.cutY,H=u._fontSize/u.fontData.size,$=u._align,z=0,b=0,B=u.getTextBounds(!1);u.maxWidth>0&&(a=B.wrappedText,v=a.length);var N=u._bounds.lines;$===1?b=(N.longest-N.lengths[0])/2:$===2&&(b=N.longest-N.lengths[0]),o.translate(-u.displayOriginX,-u.displayOriginY);for(var U=l.roundPixels,Y=0;Y<v;Y++){if(P=a.charCodeAt(Y),P===10){z++,$===1?b=(N.longest-N.lengths[z])/2:$===2&&(b=N.longest-N.lengths[z]),M=0,R+=g+C,D=null;continue}if(w=m[P],!!w){if(A=W+w.x,G=X+w.y,O=w.width,L=w.height,I=w.xOffset+M,F=w.yOffset+R,D!==null){var K=w.kerning[V];I+=K!==void 0?K:0}I*=H,F*=H,I+=b,M+=w.xAdvance+x+(K!==void 0?K:0),D=w,V=P,!(O===0||L===0||P===32)&&(U&&(I=Math.round(I),F=Math.round(F)),o.save(),o.translate(I,F),o.scale(H,H),o.drawImage(k,A,G,O,L,0,0,O,L),o.restore())}}o.restore()}};h.exports=y},95499:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44616),y=e(88933),c=e(99325),u=e(20494),l=e(10850);c.register("bitmapText",function(r,a){r===void 0&&(r={});var v=l(r,"font",""),o=u(r,"text",""),p=u(r,"size",!1),m=l(r,"align",0),g=new d(this.scene,0,0,v,o,p,m);return a!==void 0&&(r.add=a),y(this.scene,g,r),g})},21797:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44616),y=e(61286);y.register("bitmapText",function(c,u,l,r,a,v){return this.displayList.add(new d(this.scene,c,u,l,r,a,v))})},84557:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(26372),c=e(97545),h.exports={renderWebGL:y,renderCanvas:c}},26372:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8810),y=e(73329),c=e(75512),u=function(l,r,a,v){var o=r._text,p=o.length;if(p!==0){a.addToRenderList(r);var m=l.pipelines.set(r.pipeline,r),g=y(r,a,v).calc;l.pipelines.preBatch(r);var x=a.roundPixels,C=a.alpha,M=r.charColors,R=r.tintFill,P=c.getTintAppendFloatAlpha,w=P(r.tintTopLeft,C*r._alphaTL),A=P(r.tintTopRight,C*r._alphaTR),G=P(r.tintBottomLeft,C*r._alphaBL),O=P(r.tintBottomRight,C*r._alphaBR),L=r.frame.glTexture,I=m.setGameObject(r),F=r.getTextBounds(!1),D,V,k,W=F.characters,X=r.dropShadowX,H=r.dropShadowY,$=X!==0||H!==0;if($){var z=r.dropShadowColor,b=r.dropShadowAlpha,B=P(z,C*b*r._alphaTL),N=P(z,C*b*r._alphaTR),U=P(z,C*b*r._alphaBL),Y=P(z,C*b*r._alphaBR);for(D=0;D<W.length;D++)V=W[D],k=V.glyph,!(V.code===32||k.width===0||k.height===0)&&d(m,r,V,k,X,H,g,x,B,N,U,Y,1,L,I)}for(D=0;D<W.length;D++)if(V=W[D],k=V.glyph,!(V.code===32||k.width===0||k.height===0))if(M[V.i]){var K=M[V.i],Z=K.tintEffect,J=P(K.tintTL,C*r._alphaTL),Q=P(K.tintTR,C*r._alphaTR),j=P(K.tintBL,C*r._alphaBL),q=P(K.tintBR,C*r._alphaBR);d(m,r,V,k,0,0,g,x,J,Q,j,q,Z,L,I)}else d(m,r,V,k,0,0,g,x,w,A,G,O,R,L,I);l.pipelines.postBatch(r)}};h.exports=u},52816:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92246),y=e(41664),c=e(56694),u=e(64937),l=e(82047),r=e(89980),a=e(71207),v=new c({Extends:r,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.Texture,u.Transform,u.Visible,d],initialize:function(p,m,g,x,C){r.call(this,p,"Blitter"),this.setTexture(x,C),this.setPosition(m,g),this.initPipeline(),this.initPostPipeline(),this.children=new a,this.renderList=[],this.dirty=!1},create:function(o,p,m,g,x){g===void 0&&(g=!0),x===void 0&&(x=this.children.length),m===void 0?m=this.frame:m instanceof l||(m=this.texture.get(m));var C=new y(this,o,p,m,g);return this.children.addAt(C,x,!1),this.dirty=!0,C},createFromCallback:function(o,p,m,g){for(var x=this.createMultiple(p,m,g),C=0;C<x.length;C++){var M=x[C];o.call(this,M,C)}return x},createMultiple:function(o,p,m){p===void 0&&(p=this.frame.name),m===void 0&&(m=!0),Array.isArray(p)||(p=[p]);var g=[],x=this;return p.forEach(function(C){for(var M=0;M<o;M++)g.push(x.create(0,0,C,m))}),g},childCanRender:function(o){return o.visible&&o.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});h.exports=v},33177:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=d.getRenderList();if(u.length!==0){var l=e.currentContext,r=y.alpha*d.alpha;if(r!==0){y.addToRenderList(d),l.globalCompositeOperation=e.blendModes[d.blendMode],l.imageSmoothingEnabled=!d.frame.source.scaleMode;var a=d.x-y.scrollX*d.scrollFactorX,v=d.y-y.scrollY*d.scrollFactorY;l.save(),c&&c.copyToContext(l);for(var o=y.roundPixels,p=0;p<u.length;p++){var m=u[p],g=m.flipX||m.flipY,x=m.frame,C=x.canvasData,M=x.x,R=x.y,P=1,w=1,A=m.alpha*r;A!==0&&(l.globalAlpha=A,g?(m.flipX&&(P=-1,M-=C.width),m.flipY&&(w=-1,R-=C.height),C.width>0&&C.height>0&&(l.save(),l.translate(m.x+a,m.y+v),l.scale(P,w),l.drawImage(x.source.image,C.x,C.y,C.width,C.height,M,R,C.width,C.height),l.restore())):(o&&(M=Math.round(M),R=Math.round(R)),C.width>0&&C.height>0&&l.drawImage(x.source.image,C.x,C.y,C.width,C.height,M+m.x+a,R+m.y+v,C.width,C.height)))}l.restore()}}};h.exports=S},68452:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(52816),y=e(88933),c=e(99325),u=e(20494);c.register("blitter",function(l,r){l===void 0&&(l={});var a=u(l,"key",null),v=u(l,"frame",null),o=new d(this.scene,0,0,a,v);return r!==void 0&&(l.add=r),y(this.scene,o,l),o})},38906:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(52816),y=e(61286);y.register("blitter",function(c,u,l,r){return this.displayList.add(new d(this.scene,c,u,l,r))})},92246:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(89165),c=e(33177),h.exports={renderWebGL:y,renderCanvas:c}},89165:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(69360),y=e(75512),c=new d,u=function(l,r,a,v){var o=r.getRenderList(),p=a.alpha*r.alpha;if(!(o.length===0||p===0)){a.addToRenderList(r);var m=l.pipelines.set(this.pipeline,r),g=a.scrollX*r.scrollFactorX,x=a.scrollY*r.scrollFactorY,C=c.copyFrom(a.matrix);v&&(C.multiplyWithOffset(v,-g,-x),g=0,x=0);var M=r.x-g,R=r.y-x,P=-1,w=!1,A=a.roundPixels;l.pipelines.preBatch(r);for(var G=0;G<o.length;G++){var O=o[G],L=O.frame,I=O.alpha*p;if(I!==0){var F=L.width,D=L.height,V=M+O.x+L.x,k=R+O.y+L.y;O.flipX&&(F*=-1,V+=L.width),O.flipY&&(D*=-1,k+=L.height);var W=C.setQuad(V,k,V+F,k+D,A),X=y.getTintAppendFloatAlpha(O.tint,I);if(L.sourceIndex!==P){var H=m.setGameObject(r,L);P=L.sourceIndex}m.batchQuad(r,W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],L.u0,L.v0,L.u1,L.v1,X,X,X,X,w,L.glTexture,H)&&(P=-1)}}l.pipelines.postBatch(r)}};h.exports=u},41664:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(82047),c=new d({initialize:function(l,r,a,v,o){this.parent=l,this.x=r,this.y=a,this.frame=v,this.data={},this.tint=16777215,this._visible=o,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(u){return u===void 0?this.frame=this.parent.frame:u instanceof y&&u.texture===this.parent.texture?this.frame=u:this.frame=this.parent.texture.get(u),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(u,l,r){return this.x=u,this.y=l,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(u,l){return this.x=u,this.y=l,this},setFlipX:function(u){return this.flipX=u,this},setFlipY:function(u){return this.flipY=u,this},setFlip:function(u,l){return this.flipX=u,this.flipY=l,this},setVisible:function(u){return this.visible=u,this},setAlpha:function(u){return this.alpha=u,this},setTint:function(u){return this.tint=u,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(u){this.parent.dirty|=this._visible!==u,this._visible=u}},alpha:{get:function(){return this._alpha},set:function(u){this.parent.dirty|=this._alpha>0!=u>0,this._alpha=u}}});h.exports=c},97123:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=2,c={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(u,l,r,a){return u===void 0&&(u=1),l===void 0?this.alpha=u:(this._alphaTL=d(u,0,1),this._alphaTR=d(l,0,1),this._alphaBL=d(r,0,1),this._alphaBR=d(a,0,1)),this},alpha:{get:function(){return this._alpha},set:function(u){var l=d(u,0,1);this._alpha=l,this._alphaTL=l,this._alphaTR=l,this._alphaBL=l,this._alphaBR=l,l===0?this.renderFlags&=~y:this.renderFlags|=y}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(u){var l=d(u,0,1);this._alphaTL=l,l!==0&&(this.renderFlags|=y)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(u){var l=d(u,0,1);this._alphaTR=l,l!==0&&(this.renderFlags|=y)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(u){var l=d(u,0,1);this._alphaBL=l,l!==0&&(this.renderFlags|=y)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(u){var l=d(u,0,1);this._alphaBR=l,l!==0&&(this.renderFlags|=y)}}};h.exports=c},15720:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=2,c={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(u){return u===void 0&&(u=1),this.alpha=u,this},alpha:{get:function(){return this._alpha},set:function(u){var l=d(u,0,1);this._alpha=l,l===0?this.renderFlags&=~y:this.renderFlags|=y}}};h.exports=c},69732:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),y={_blendMode:d.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(c){typeof c=="string"&&(c=d[c]),c|=0,c>=-1&&(this._blendMode=c)}},setBlendMode:function(c){return this.blendMode=c,this}};h.exports=y},28284:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,d){return this.width=e,this.height=d,this},setDisplaySize:function(e,d){return this.displayWidth=e,this.displayHeight=d,this}};h.exports=S},85293:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={texture:null,frame:null,isCropped:!1,setCrop:function(e,d,y,c){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,d,y,c,this.flipX,this.flipY);else{var u=e;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};h.exports=S},14975:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};h.exports=S},88677:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(96910),c=e(72677),u=new d({initialize:function(r,a){this.gameObject=r,this.isPost=a,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(l){return l===void 0&&(l=0),this.padding=l,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(l){if(!this.isPost){var r=this.gameObject.scene.sys.renderer;r&&r.pipelines?(this.gameObject.pipeline=r.pipelines.FX_PIPELINE,l!==void 0&&(this.padding=l),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var l=this.list,r=0;r<l.length;r++)l[r].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(l){var r;if(this.isPost){var a=this.gameObject.getPostPipeline(String(l.type));for(Array.isArray(a)||(a=[a]),r=0;r<a.length;r++){var v=a[r];if(v.controller===l){this.gameObject.removePostPipeline(v),l.destroy();break}}}else{var o=this.list;for(r=0;r<o.length;r++)o[r]===l&&(c(o,r),l.destroy())}return this.gameObject},disable:function(l){return l===void 0&&(l=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,l&&this.clear(),this.gameObject},add:function(l,r){if(this.isPost){var a=String(l.type);this.gameObject.setPostPipeline(a,r);var v=this.gameObject.getPostPipeline(a);if(v)return Array.isArray(v)&&(v=v.pop()),v.controller=l,l}else return this.enabled||this.enable(),this.list.push(l),l},addGlow:function(l,r,a,v,o,p){return this.add(new y.Glow(this.gameObject,l,r,a,v),{quality:o,distance:p})},addShadow:function(l,r,a,v,o,p,m){return this.add(new y.Shadow(this.gameObject,l,r,a,v,o,p,m))},addPixelate:function(l){return this.add(new y.Pixelate(this.gameObject,l))},addVignette:function(l,r,a,v){return this.add(new y.Vignette(this.gameObject,l,r,a,v))},addShine:function(l,r,a,v){return this.add(new y.Shine(this.gameObject,l,r,a,v))},addBlur:function(l,r,a,v,o,p){return this.add(new y.Blur(this.gameObject,l,r,a,v,o,p))},addGradient:function(l,r,a,v,o,p,m,g){return this.add(new y.Gradient(this.gameObject,l,r,a,v,o,p,m,g))},addBloom:function(l,r,a,v,o,p){return this.add(new y.Bloom(this.gameObject,l,r,a,v,o,p))},addColorMatrix:function(){return this.add(new y.ColorMatrix(this.gameObject))},addCircle:function(l,r,a,v,o){return this.add(new y.Circle(this.gameObject,l,r,a,v,o))},addBarrel:function(l){return this.add(new y.Barrel(this.gameObject,l))},addDisplacement:function(l,r,a){return this.add(new y.Displacement(this.gameObject,l,r,a))},addWipe:function(l,r,a){return this.add(new y.Wipe(this.gameObject,l,r,a))},addReveal:function(l,r,a){return this.add(new y.Wipe(this.gameObject,l,r,a,!0))},addBokeh:function(l,r,a){return this.add(new y.Bokeh(this.gameObject,l,r,a))},addTiltShift:function(l,r,a,v,o,p){return this.add(new y.Bokeh(this.gameObject,l,r,a,!0,v,o,p))},destroy:function(){this.clear(),this.gameObject=null}});h.exports=u},92972:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,d){return this.flipX=e,this.flipY=d,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};h.exports=S},80693:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=e(2386),c=e(93736),u={prepareBoundsOutput:function(l,r){if(r===void 0&&(r=!1),this.rotation!==0&&y(l,this.x,this.y,this.rotation),r&&this.parentContainer){var a=this.parentContainer.getBoundsTransformMatrix();a.transformPoint(l.x,l.y,l)}return l},getCenter:function(l,r){return l===void 0&&(l=new c),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,r)},getTopLeft:function(l,r){return l||(l=new c),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,r)},getTopCenter:function(l,r){return l||(l=new c),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,r)},getTopRight:function(l,r){return l||(l=new c),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,r)},getLeftCenter:function(l,r){return l||(l=new c),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,r)},getRightCenter:function(l,r){return l||(l=new c),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,r)},getBottomLeft:function(l,r){return l||(l=new c),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,r)},getBottomCenter:function(l,r){return l||(l=new c),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,r)},getBottomRight:function(l,r){return l||(l=new c),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,r)},getBounds:function(l){l===void 0&&(l=new d);var r,a,v,o,p,m,g,x;if(this.parentContainer){var C=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(l),C.transformPoint(l.x,l.y,l),r=l.x,a=l.y,this.getTopRight(l),C.transformPoint(l.x,l.y,l),v=l.x,o=l.y,this.getBottomLeft(l),C.transformPoint(l.x,l.y,l),p=l.x,m=l.y,this.getBottomRight(l),C.transformPoint(l.x,l.y,l),g=l.x,x=l.y}else this.getTopLeft(l),r=l.x,a=l.y,this.getTopRight(l),v=l.x,o=l.y,this.getBottomLeft(l),p=l.x,m=l.y,this.getBottomRight(l),g=l.x,x=l.y;return l.x=Math.min(r,v,p,g),l.y=Math.min(a,o,m,x),l.width=Math.max(r,v,p,g)-l.x,l.height=Math.max(a,o,m,x)-l.y,l}};h.exports=u},39171:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(76756),y=e(63037),c={mask:null,setMask:function(u){return this.mask=u,this},clearMask:function(u){return u===void 0&&(u=!1),u&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(u,l,r,a,v){return u===void 0&&(this.texture||this.shader||this.geom)&&(u=this),new d(this.scene,u,l,r,a,v)},createGeometryMask:function(u){return u===void 0&&(this.type==="Graphics"||this.geom)&&(u=this),new y(this.scene,u)}};h.exports=c},28072:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,d){return e===void 0&&(e=.5),d===void 0&&(d=e),this.originX=e,this.originY=d,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,d){return e===void 0&&(e=0),d===void 0&&(d=e),this.displayOriginX=e,this.displayOriginY=d,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};h.exports=S},54211:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75606),y=e(63130),c=e(10850),u=e(55303),l=e(93736),r={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:u.PLAYING_FORWARD,setPath:function(a,v){v===void 0&&(v=this.pathConfig);var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this.path=a,v&&this.startFollow(v),this},setRotateToPath:function(a,v){return v===void 0&&(v=0),this.rotateToPath=a,this.pathRotationOffset=v,this},isFollowing:function(){var a=this.pathTween;return a&&a.isPlaying()},startFollow:function(a,v){a===void 0&&(a={}),v===void 0&&(v=0);var o=this.pathTween;o&&o.isPlaying()&&o.stop(),typeof a=="number"&&(a={duration:a}),a.from=c(a,"from",0),a.to=c(a,"to",1);var p=y(a,"positionOnPath",!1);this.rotateToPath=y(a,"rotateToPath",!1),this.pathRotationOffset=c(a,"rotationOffset",0);var m=c(a,"startAt",v);if(m&&(a.onStart=function(x){var C=x.data[0];C.progress=m,C.elapsed=C.duration*m;var M=C.ease(C.progress);C.current=C.start+(C.end-C.start)*M,C.setTargetValue()}),this.pathOffset||(this.pathOffset=new l(this.x,this.y)),this.pathVector||(this.pathVector=new l),this.pathDelta||(this.pathDelta=new l),this.pathDelta.reset(),a.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(a),this.path.getStartPoint(this.pathOffset),p&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=u.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+d(this.pathRotationOffset)}return this.pathConfig=a,this},pauseFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.pause(),this},resumeFollow:function(){var a=this.pathTween;return a&&a.isPaused()&&a.resume(),this},stopFollow:function(){var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this},pathUpdate:function(){var a=this.pathTween;if(a){var v=a.data[0],o=this.pathDelta,p=this.pathVector;if(o.copy(p).negate(),v.state===u.COMPLETE){this.path.getPoint(v.end,p),o.add(p),p.add(this.pathOffset),this.setPosition(p.x,p.y);return}else if(v.state!==u.PLAYING_FORWARD&&v.state!==u.PLAYING_BACKWARD)return;this.path.getPoint(a.getValue(),p),o.add(p),p.add(this.pathOffset);var m=this.x,g=this.y;this.setPosition(p.x,p.y);var x=this.x-m,C=this.y-g;if(x===0&&C===0)return;if(v.state!==this._prevDirection){this._prevDirection=v.state;return}this.rotateToPath&&(this.rotation=Math.atan2(C,x)+d(this.pathRotationOffset))}}};h.exports=r},58210:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28699),y={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(c){this.pipelineData={};var u=this.scene.sys.renderer;if(!u)return!1;var l=u.pipelines;if(l){c===void 0&&(c=l.default);var r=l.get(c);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(c,u,l){var r=this.scene.sys.renderer;if(!r)return this;var a=r.pipelines;if(a){var v=a.get(c);v&&(this.pipeline=v),u&&(this.pipelineData=l?d(u):u)}return this},setPipelineData:function(c,u){var l=this.pipelineData;return u===void 0?delete l[c]:l[c]=u,this},resetPipeline:function(c){return c===void 0&&(c=!1),this.pipeline=this.defaultPipeline,c&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};h.exports=y},44086:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28699),y=e(88677),c=e(72677),u={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(l){this.postPipelines=[],this.postPipelineData={},this.postFX=new y(this,!0),l&&(this.preFX=new y(this,!1))},setPostPipeline:function(l,r,a){var v=this.scene.sys.renderer;if(!v)return this;var o=v.pipelines;if(o){Array.isArray(l)||(l=[l]);for(var p=0;p<l.length;p++){var m=o.getPostPipeline(l[p],this,r);m&&this.postPipelines.push(m)}r&&(this.postPipelineData=a?d(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(l,r){var a=this.postPipelineData;return r===void 0?delete a[l]:a[l]=r,this},getPostPipeline:function(l){for(var r=typeof l=="string",a=this.postPipelines,v=[],o=0;o<a.length;o++){var p=a[o];(r&&p.name===l||!r&&p instanceof l)&&v.push(p)}return v.length===1?v[0]:v},resetPostPipeline:function(l){l===void 0&&(l=!1);for(var r=this.postPipelines,a=0;a<r.length;a++)r[a].destroy();this.postPipelines=[],this.hasPostPipeline=!1,l&&(this.postPipelineData={})},removePostPipeline:function(l){for(var r=typeof l=="string",a=this.postPipelines,v=a.length-1;v>=0;v--){var o=a[v];(r&&o.name===l||!r&&o===l)&&(o.destroy(),c(a,v))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};h.exports=u},45900:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,d){return d===void 0&&(d=e),this.scrollFactorX=e,this.scrollFactorY=d,this}};h.exports=S},31654:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=this.width,d.hitArea.height=this.height),this},setSize:function(e,d){return this.width=e,this.height=d,this},setDisplaySize:function(e,d){return this.displayWidth=e,this.displayHeight=d,this}};h.exports=S},82081:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82047),y=8,c={texture:null,frame:null,isCropped:!1,setTexture:function(u,l){return this.texture=this.scene.sys.textures.get(u),this.setFrame(l)},setFrame:function(u,l,r){return l===void 0&&(l=!0),r===void 0&&(r=!0),u instanceof d?(this.texture=this.scene.sys.textures.get(u.texture.key),this.frame=u):this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~y:this.renderFlags|=y,this._sizeComponent&&l&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};h.exports=c},21850:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82047),y=8,c={texture:null,frame:null,isCropped:!1,setCrop:function(u,l,r,a){if(u===void 0)this.isCropped=!1;else if(this.frame){if(typeof u=="number")this.frame.setCropUVs(this._crop,u,l,r,a,this.flipX,this.flipY);else{var v=u;this.frame.setCropUVs(this._crop,v.x,v.y,v.width,v.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(u,l){return this.texture=this.scene.sys.textures.get(u),this.setFrame(l)},setFrame:function(u,l,r){return l===void 0&&(l=!0),r===void 0&&(r=!0),u instanceof d?(this.texture=this.scene.sys.textures.get(u.texture.key),this.frame=u):this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~y:this.renderFlags|=y,this._sizeComponent&&l&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};h.exports=c},58072:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,d,y,c){return e===void 0&&(e=16777215),d===void 0&&(d=e,y=e,c=e),this.tintTopLeft=e,this.tintTopRight=d,this.tintBottomLeft=y,this.tintBottomRight=c,this.tintFill=!1,this},setTintFill:function(e,d,y,c){return this.setTint(e,d,y,c),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};h.exports=S},48129:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(d.textureKey=e.texture.key,d.frameKey=e.frame.name),d};h.exports=S},56584:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),y=e(69360),c=e(64462),u=e(35786),l=e(62138),r=e(93736),a=4,v={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(o){this._scaleX=o,this._scaleY=o,o===0?this.renderFlags&=~a:this.renderFlags|=a}},scaleX:{get:function(){return this._scaleX},set:function(o){this._scaleX=o,o===0?this.renderFlags&=~a:this._scaleY!==0&&(this.renderFlags|=a)}},scaleY:{get:function(){return this._scaleY},set:function(o){this._scaleY=o,o===0?this.renderFlags&=~a:this._scaleX!==0&&(this.renderFlags|=a)}},angle:{get:function(){return l(this._rotation*d.RAD_TO_DEG)},set:function(o){this.rotation=l(o)*d.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(o){this._rotation=u(o)}},setPosition:function(o,p,m,g){return o===void 0&&(o=0),p===void 0&&(p=o),m===void 0&&(m=0),g===void 0&&(g=0),this.x=o,this.y=p,this.z=m,this.w=g,this},copyPosition:function(o){return o.x!==void 0&&(this.x=o.x),o.y!==void 0&&(this.y=o.y),o.z!==void 0&&(this.z=o.z),o.w!==void 0&&(this.w=o.w),this},setRandomPosition:function(o,p,m,g){return o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=o+Math.random()*m,this.y=p+Math.random()*g,this},setRotation:function(o){return o===void 0&&(o=0),this.rotation=o,this},setAngle:function(o){return o===void 0&&(o=0),this.angle=o,this},setScale:function(o,p){return o===void 0&&(o=1),p===void 0&&(p=o),this.scaleX=o,this.scaleY=p,this},setX:function(o){return o===void 0&&(o=0),this.x=o,this},setY:function(o){return o===void 0&&(o=0),this.y=o,this},setZ:function(o){return o===void 0&&(o=0),this.z=o,this},setW:function(o){return o===void 0&&(o=0),this.w=o,this},getLocalTransformMatrix:function(o){return o===void 0&&(o=new y),o.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(o,p){o===void 0&&(o=new y);var m=this.parentContainer;if(!m)return this.getLocalTransformMatrix(o);for(p||(p=new y),o.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);m;)p.applyITRS(m.x,m.y,m._rotation,m._scaleX,m._scaleY),p.multiply(o,o),m=m.parentContainer;return o},getLocalPoint:function(o,p,m,g){m||(m=new r),g||(g=this.scene.sys.cameras.main);var x=g.scrollX,C=g.scrollY,M=o+x*this.scrollFactorX-x,R=p+C*this.scrollFactorY-C;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(M,R,m):c(M,R,this.x,this.y,this.rotation,this.scaleX,this.scaleY,m),this._originComponent&&(m.x+=this._displayOriginX,m.y+=this._displayOriginY),m},getParentRotation:function(){for(var o=0,p=this.parentContainer;p;)o+=p.rotation,p=p.parentContainer;return o}};h.exports=v},69360:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(83392),c=e(93736),u=new d({initialize:function(r,a,v,o,p,m){r===void 0&&(r=1),a===void 0&&(a=0),v===void 0&&(v=0),o===void 0&&(o=1),p===void 0&&(p=0),m===void 0&&(m=0),this.matrix=new Float32Array([r,a,v,o,p,m,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(l){this.matrix[0]=l}},b:{get:function(){return this.matrix[1]},set:function(l){this.matrix[1]=l}},c:{get:function(){return this.matrix[2]},set:function(l){this.matrix[2]=l}},d:{get:function(){return this.matrix[3]},set:function(l){this.matrix[3]=l}},e:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},f:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},tx:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},ty:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var l=this.matrix,r=l[0],a=l[1],v=l[2],o=l[3];return r||a?a>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):v||o?y.TAU-(o>0?Math.acos(-v/this.scaleY):-Math.acos(v/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var l=this.matrix;return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,this},translate:function(l,r){var a=this.matrix;return a[4]=a[0]*l+a[2]*r+a[4],a[5]=a[1]*l+a[3]*r+a[5],this},scale:function(l,r){var a=this.matrix;return a[0]*=l,a[1]*=l,a[2]*=r,a[3]*=r,this},rotate:function(l){var r=Math.sin(l),a=Math.cos(l),v=this.matrix,o=v[0],p=v[1],m=v[2],g=v[3];return v[0]=o*a+m*r,v[1]=p*a+g*r,v[2]=o*-r+m*a,v[3]=p*-r+g*a,this},multiply:function(l,r){var a=this.matrix,v=l.matrix,o=a[0],p=a[1],m=a[2],g=a[3],x=a[4],C=a[5],M=v[0],R=v[1],P=v[2],w=v[3],A=v[4],G=v[5],O=r===void 0?a:r.matrix;return O[0]=M*o+R*m,O[1]=M*p+R*g,O[2]=P*o+w*m,O[3]=P*p+w*g,O[4]=A*o+G*m+x,O[5]=A*p+G*g+C,O},multiplyWithOffset:function(l,r,a){var v=this.matrix,o=l.matrix,p=v[0],m=v[1],g=v[2],x=v[3],C=v[4],M=v[5],R=r*p+a*g+C,P=r*m+a*x+M,w=o[0],A=o[1],G=o[2],O=o[3],L=o[4],I=o[5];return v[0]=w*p+A*g,v[1]=w*m+A*x,v[2]=G*p+O*g,v[3]=G*m+O*x,v[4]=L*p+I*g+R,v[5]=L*m+I*x+P,this},transform:function(l,r,a,v,o,p){var m=this.matrix,g=m[0],x=m[1],C=m[2],M=m[3],R=m[4],P=m[5];return m[0]=l*g+r*C,m[1]=l*x+r*M,m[2]=a*g+v*C,m[3]=a*x+v*M,m[4]=o*g+p*C+R,m[5]=o*x+p*M+P,this},transformPoint:function(l,r,a){a===void 0&&(a={x:0,y:0});var v=this.matrix,o=v[0],p=v[1],m=v[2],g=v[3],x=v[4],C=v[5];return a.x=l*o+r*m+x,a.y=l*p+r*g+C,a},invert:function(){var l=this.matrix,r=l[0],a=l[1],v=l[2],o=l[3],p=l[4],m=l[5],g=r*o-a*v;return l[0]=o/g,l[1]=-a/g,l[2]=-v/g,l[3]=r/g,l[4]=(v*m-o*p)/g,l[5]=-(r*m-a*p)/g,this},copyFrom:function(l){var r=this.matrix;return r[0]=l.a,r[1]=l.b,r[2]=l.c,r[3]=l.d,r[4]=l.e,r[5]=l.f,this},copyFromArray:function(l){var r=this.matrix;return r[0]=l[0],r[1]=l[1],r[2]=l[2],r[3]=l[3],r[4]=l[4],r[5]=l[5],this},copyToContext:function(l){var r=this.matrix;return l.transform(r[0],r[1],r[2],r[3],r[4],r[5]),l},setToContext:function(l){var r=this.matrix;return l.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),l},copyToArray:function(l){var r=this.matrix;return l===void 0?l=[r[0],r[1],r[2],r[3],r[4],r[5]]:(l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=r[3],l[4]=r[4],l[5]=r[5]),l},setTransform:function(l,r,a,v,o,p){var m=this.matrix;return m[0]=l,m[1]=r,m[2]=a,m[3]=v,m[4]=o,m[5]=p,this},decomposeMatrix:function(){var l=this.decomposedMatrix,r=this.matrix,a=r[0],v=r[1],o=r[2],p=r[3],m=a*p-v*o;if(l.translateX=r[4],l.translateY=r[5],a||v){var g=Math.sqrt(a*a+v*v);l.rotation=v>0?Math.acos(a/g):-Math.acos(a/g),l.scaleX=g,l.scaleY=m/g}else if(o||p){var x=Math.sqrt(o*o+p*p);l.rotation=Math.PI*.5-(p>0?Math.acos(-o/x):-Math.acos(o/x)),l.scaleX=m/x,l.scaleY=x}else l.rotation=0,l.scaleX=0,l.scaleY=0;return l},applyITRS:function(l,r,a,v,o){var p=this.matrix,m=Math.sin(a),g=Math.cos(a);return p[4]=l,p[5]=r,p[0]=g*v,p[1]=m*v,p[2]=-m*o,p[3]=g*o,this},applyInverse:function(l,r,a){a===void 0&&(a=new c);var v=this.matrix,o=v[0],p=v[1],m=v[2],g=v[3],x=v[4],C=v[5],M=1/(o*g+m*-p);return a.x=g*M*l+-m*M*r+(C*m-x*g)*M,a.y=o*M*r+-p*M*l+(-C*o+x*p)*M,a},setQuad:function(l,r,a,v,o,p){p===void 0&&(p=this.quad);var m=this.matrix,g=m[0],x=m[1],C=m[2],M=m[3],R=m[4],P=m[5];return p[0]=l*g+r*C+R,p[1]=l*x+r*M+P,p[2]=l*g+v*C+R,p[3]=l*x+v*M+P,p[4]=a*g+v*C+R,p[5]=a*x+v*M+P,p[6]=a*g+r*C+R,p[7]=a*x+r*M+P,o&&p.forEach(function(w,A){p[A]=Math.round(w)}),p},getX:function(l,r){return l*this.a+r*this.c+this.e},getY:function(l,r){return l*this.b+r*this.d+this.f},getXRound:function(l,r,a){var v=this.getX(l,r);return a&&(v=Math.round(v)),v},getYRound:function(l,r,a){var v=this.getY(l,r);return a&&(v=Math.round(v)),v},getCSSMatrix:function(){var l=this.matrix;return"matrix("+l[0]+","+l[1]+","+l[2]+","+l[3]+","+l[4]+","+l[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});h.exports=u},59694:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(d){d?(this._visible=!0,this.renderFlags|=S):(this._visible=!1,this.renderFlags&=~S)}},setVisible:function(d){return this.visible=d,this}};h.exports=e},64937:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Alpha:e(97123),AlphaSingle:e(15720),BlendMode:e(69732),ComputedSize:e(28284),Crop:e(85293),Depth:e(14975),Flip:e(92972),FX:e(88677),GetBounds:e(80693),Mask:e(39171),Origin:e(28072),PathFollower:e(54211),Pipeline:e(58210),PostPipeline:e(44086),ScrollFactor:e(45900),Size:e(31654),Texture:e(82081),TextureCrop:e(21850),Tint:e(58072),ToJSON:e(48129),Transform:e(56584),TransformMatrix:e(69360),Visible:e(59694)}},70339:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59959),y=e(95723),c=e(56694),u=e(64937),l=e(56631),r=e(89980),a=e(74118),v=e(98524),o=e(58795),p=e(93736),m=new c({Extends:r,Mixins:[u.AlphaSingle,u.BlendMode,u.ComputedSize,u.Depth,u.Mask,u.PostPipeline,u.Transform,u.Visible,v],initialize:function(x,C,M,R){r.call(this,x,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new u.TransformMatrix,this.tempTransformMatrix=new u.TransformMatrix,this._sortKey="",this._sysEvents=x.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(C,M),this.setBlendMode(y.SKIP_CHECK),R&&this.add(R)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new a),g.setTo(this.x,this.y,0,0),this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix(),C=x.transformPoint(this.x,this.y);g.setTo(C.x,C.y,0,0)}if(this.list.length>0){var M=this.list,R=new a,P=!1;g.setEmpty();for(var w=0;w<M.length;w++){var A=M[w];A.getBounds&&(A.getBounds(R),P?o(R,g,g):(g.setTo(R.x,R.y,R.width,R.height),P=!0))}}return g},addHandler:function(g){g.once(l.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.parentContainer=this,g.removeFromDisplayList(),g.addedToScene())},removeHandler:function(g){g.off(l.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer=null,g.removedFromScene(),g.addToDisplayList())},pointToContainer:function(g,x){x===void 0&&(x=new p),this.parentContainer?this.parentContainer.pointToContainer(g,x):(x.x=g.x,x.y=g.y);var C=this.tempTransformMatrix;return C.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),C.invert(),C.transformPoint(g.x,g.y,x),x},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return d.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,x){return d.AddAt(this.list,g,x,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,x){return g?(x===void 0&&(x=function(C,M){return C[g]-M[g]}),d.StableSort(this.list,x),this):this},getByName:function(g){return d.GetFirst(this.list,"name",g)},getRandom:function(g,x){return d.GetRandom(this.list,g,x)},getFirst:function(g,x,C,M){return d.GetFirst(this.list,g,x,C,M)},getAll:function(g,x,C,M){return d.GetAll(this.list,g,x,C,M)},count:function(g,x,C,M){return d.CountAllMatching(this.list,g,x,C,M)},swap:function(g,x){return d.Swap(this.list,g,x),this},moveTo:function(g,x){return d.MoveTo(this.list,g,x),this},moveAbove:function(g,x){return d.MoveAbove(this.list,g,x),this},moveBelow:function(g,x){return d.MoveBelow(this.list,g,x),this},remove:function(g,x){var C=d.Remove(this.list,g,this.removeHandler,this);if(x&&C){Array.isArray(C)||(C=[C]);for(var M=0;M<C.length;M++)C[M].destroy()}return this},removeAt:function(g,x){var C=d.RemoveAt(this.list,g,this.removeHandler,this);return x&&C&&C.destroy(),this},removeBetween:function(g,x,C){var M=d.RemoveBetween(this.list,g,x,this.removeHandler,this);if(C)for(var R=0;R<M.length;R++)M[R].destroy();return this},removeAll:function(g){var x=this.list;if(g){for(var C=0;C<x.length;C++)x[C]&&x[C].scene&&(x[C].off(l.DESTROY,this.remove,this),x[C].destroy());this.list=[]}else d.RemoveBetween(x,0,x.length,this.removeHandler,this);return this},bringToTop:function(g){return d.BringToTop(this.list,g),this},sendToBack:function(g){return d.SendToBack(this.list,g),this},moveUp:function(g){return d.MoveUp(this.list,g),this},moveDown:function(g){return d.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return d.Shuffle(this.list),this},replace:function(g,x,C){var M=d.Replace(this.list,g,x);return M&&(this.addHandler(x),this.removeHandler(g),C&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,x,C,M){return d.SetAll(this.list,g,x,C,M),this},each:function(g,x){var C=[null],M,R=this.list.slice(),P=R.length;for(M=2;M<arguments.length;M++)C.push(arguments[M]);for(M=0;M<P;M++)C[0]=R[M],g.apply(x,C);return this},iterate:function(g,x){var C=[null],M;for(M=2;M<arguments.length;M++)C.push(arguments[M]);for(M=0;M<this.list.length;M++)C[0]=this.list[M],g.apply(x,C);return this},setScrollFactor:function(g,x,C){return x===void 0&&(x=g),C===void 0&&(C=!1),this.scrollFactorX=g,this.scrollFactorY=x,C&&(d.SetAll(this.list,"scrollFactorX",g),d.SetAll(this.list,"scrollFactorY",x)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});h.exports=m},13916:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){y.addToRenderList(d);var u=d.list;if(u.length!==0){var l=d.localTransform;c?(l.loadIdentity(),l.multiply(c),l.translate(d.x,d.y),l.rotate(d.rotation),l.scale(d.scaleX,d.scaleY)):l.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var r=d.blendMode!==-1;r||e.setBlendMode(0);var a=d._alpha,v=d.scrollFactorX,o=d.scrollFactorY;d.mask&&d.mask.preRenderCanvas(e,null,y);for(var p=0;p<u.length;p++){var m=u[p];if(m.willRender(y)){var g=m.alpha,x=m.scrollFactorX,C=m.scrollFactorY;!r&&m.blendMode!==e.currentBlendMode&&e.setBlendMode(m.blendMode),m.setScrollFactor(x*v,C*o),m.setAlpha(g*a),m.renderCanvas(e,m,y,l),m.setAlpha(g),m.setScrollFactor(x,C)}}d.mask&&d.mask.postRenderCanvas(e)}};h.exports=S},44516:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(70339),c=e(99325),u=e(20494);c.register("container",function(l,r){l===void 0&&(l={});var a=u(l,"x",0),v=u(l,"y",0),o=u(l,"children",null),p=new y(this.scene,a,v,o);return r!==void 0&&(l.add=r),d(this.scene,p,l),p})},23400:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70339),y=e(61286);y.register("container",function(c,u,l){return this.displayList.add(new d(this.scene,c,u,l))})},98524:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(36934),c=e(13916),h.exports={renderWebGL:y,renderCanvas:c}},36934:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){y.addToRenderList(d);var u=d.list,l=u.length;if(l!==0){var r=d.localTransform;c?(r.loadIdentity(),r.multiply(c),r.translate(d.x,d.y),r.rotate(d.rotation),r.scale(d.scaleX,d.scaleY)):r.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),e.pipelines.preBatch(d);var a=d.blendMode!==-1;a||e.setBlendMode(0);for(var v=d.alpha,o=d.scrollFactorX,p=d.scrollFactorY,m=0;m<l;m++){var g=u[m];if(g.willRender(y)){var x,C,M,R;if(g.alphaTopLeft!==void 0)x=g.alphaTopLeft,C=g.alphaTopRight,M=g.alphaBottomLeft,R=g.alphaBottomRight;else{var P=g.alpha;x=P,C=P,M=P,R=P}var w=g.scrollFactorX,A=g.scrollFactorY;!a&&g.blendMode!==e.currentBlendMode&&e.setBlendMode(g.blendMode);var G=g.mask;G&&G.preRenderWebGL(e,g,y);var O=g.type;O!==e.currentType&&(e.newType=!0,e.currentType=O),e.nextTypeMatch=m<l-1?u[m+1].type===e.currentType:!1,g.setScrollFactor(w*o,A*p),g.setAlpha(x*v,C*v,M*v,R*v),g.renderWebGL(e,g,y,r,d),g.setAlpha(x,C,M,R),g.setScrollFactor(w,A),G&&G.postRenderWebGL(e,y),e.newType=!1}}e.pipelines.postBatch(d)}};h.exports=S},2452:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(11603),u=e(89980),l=e(42911),r=e(55638),a=e(7599),v=e(51729),o=new d({Extends:u,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Origin,y.ScrollFactor,y.Transform,y.Visible,c],initialize:function(m,g,x,C,M,R){u.call(this,m,"DOMElement"),this.parent=m.sys.game.domContainer,this.cache=m.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new v,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,x),typeof C=="string"?C[0]==="#"?this.setElement(C.substr(1),M,R):this.createElement(C,M,R):C&&this.setElement(C,M,R),m.sys.events.on(a.SLEEP,this.handleSceneEvent,this),m.sys.events.on(a.WAKE,this.handleSceneEvent,this),m.sys.events.on(a.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(p){var m=this.node,g=m.style;m&&(g.display=p.settings.visible?"block":"none")},setSkew:function(p,m){return p===void 0&&(p=0),m===void 0&&(m=p),this.skewX=p,this.skewY=m,this},setPerspective:function(p){return this.parent.style.perspective=p+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(p){this.parent.style.perspective=p+"px"}},addListener:function(p){if(this.node){p=p.split(" ");for(var m=0;m<p.length;m++)this.node.addEventListener(p[m],this.handler,!1)}return this},removeListener:function(p){if(this.node){p=p.split(" ");for(var m=0;m<p.length;m++)this.node.removeEventListener(p[m],this.handler)}return this},dispatchNativeEvent:function(p){this.emit(p.type,p)},createElement:function(p,m,g){return this.setElement(document.createElement(p),m,g)},setElement:function(p,m,g){this.removeElement();var x;if(typeof p=="string"?(p[0]==="#"&&(p=p.substr(1)),x=document.getElementById(p)):typeof p=="object"&&p.nodeType===1&&(x=p),!x)return this;if(this.node=x,m&&l(m))for(var C in m)x.style[C]=m[C];else typeof m=="string"&&(x.style=m);return x.style.zIndex="0",x.style.display="inline",x.style.position="absolute",x.phaser=this,this.parent&&this.parent.appendChild(x),g&&(x.innerText=g),this.updateSize()},createFromCache:function(p,m){var g=this.cache.get(p);return g&&this.createFromHTML(g,m),this},createFromHTML:function(p,m){m===void 0&&(m="div"),this.removeElement();var g=document.createElement(m);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=p,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var p=this.node,m=p.getBoundingClientRect();return this.width=p.clientWidth,this.height=p.clientHeight,this.displayWidth=m.width||0,this.displayHeight=m.height||0,this},getChildByProperty:function(p,m){if(this.node){for(var g=this.node.querySelectorAll("*"),x=0;x<g.length;x++)if(g[x][p]===m)return g[x]}return null},getChildByID:function(p){return this.getChildByProperty("id",p)},getChildByName:function(p){return this.getChildByProperty("name",p)},setClassName:function(p){return this.node&&(this.node.className=p,this.updateSize()),this},setText:function(p){return this.node&&(this.node.innerText=p,this.updateSize()),this},setHTML:function(p){return this.node&&(this.node.innerHTML=p,this.updateSize()),this},preRender:function(){var p=this.parentContainer,m=this.node;m&&p&&!p.willRender()&&(m.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(a.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(a.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(a.PRE_RENDER,this.preRender,this)}});h.exports=o},66070:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(2452),y=e(89980),c=e(69360),u=new c,l=new c,r=new c,a=function(v,o,p,m){if(o.node){var g=o.node.style,x=o.scene.sys.settings;if(!g||!x.visible||y.RENDER_MASK!==o.renderFlags||o.cameraFilter!==0&&o.cameraFilter&p.id||o.parentContainer&&!o.parentContainer.willRender()){g.display="none";return}var C=o.parentContainer,M=p.alpha*o.alpha;C&&(M*=C.alpha);var R=u,P=l,w=r,A=0,G=0,O="0%",L="0%";m?(A=o.width*o.scaleX*o.originX,G=o.height*o.scaleY*o.originY,P.applyITRS(o.x-A,o.y-G,o.rotation,o.scaleX,o.scaleY),R.copyFrom(p.matrix),R.multiplyWithOffset(m,-p.scrollX*o.scrollFactorX,-p.scrollY*o.scrollFactorY),P.e=o.x-A,P.f=o.y-G,R.multiply(P,w)):(A=o.width*o.originX,G=o.height*o.originY,P.applyITRS(o.x-A,o.y-G,o.rotation,o.scaleX,o.scaleY),R.copyFrom(p.matrix),O=100*o.originX+"%",L=100*o.originY+"%",P.e-=p.scrollX*o.scrollFactorX,P.f-=p.scrollY*o.scrollFactorY,R.multiply(P,w)),o.transformOnly||(g.display="block",g.opacity=M,g.zIndex=o._depth,g.pointerEvents=o.pointerEvents,g.mixBlendMode=d[o._blendMode]),g.transform=w.getCSSMatrix()+" skew("+o.skewX+"rad, "+o.skewY+"rad) rotate3d("+o.rotate3d.x+","+o.rotate3d.y+","+o.rotate3d.z+","+o.rotate3d.w+o.rotate3dAngle+")",g.transformOrigin=O+" "+L}};h.exports=a},66788:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(38943),y=e(61286);y.register("dom",function(c,u,l,r,a){var v=new d(this.scene,c,u,l,r,a);return this.displayList.add(v),v})},11603:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(66070),c=e(66070),h.exports={renderWebGL:y,renderCanvas:c}},65492:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addedtoscene"},98398:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},40239:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removedfromscene"},17286:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},31496:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="created"},89587:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="error"},59792:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="locked"},96342:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loop"},6017:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="playing"},49614:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="play"},24418:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="seeked"},87318:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="seeking"},50009:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stalled"},61922:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},79501:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="textureready"},4052:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="unlocked"},54857:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="unsupported"},56631:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADDED_TO_SCENE:e(65492),DESTROY:e(98398),REMOVED_FROM_SCENE:e(40239),VIDEO_COMPLETE:e(17286),VIDEO_CREATED:e(31496),VIDEO_ERROR:e(89587),VIDEO_LOCKED:e(59792),VIDEO_LOOP:e(96342),VIDEO_PLAY:e(49614),VIDEO_PLAYING:e(6017),VIDEO_SEEKED:e(24418),VIDEO_SEEKING:e(87318),VIDEO_STALLED:e(50009),VIDEO_STOP:e(61922),VIDEO_TEXTURE:e(79501),VIDEO_UNLOCKED:e(4052),VIDEO_UNSUPPORTED:e(54857)}},39419:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(89980),u=e(79394),l=new d({Extends:c,Mixins:[y.Alpha,y.BlendMode,y.Depth,y.Flip,y.Origin,y.ScrollFactor,y.Size,y.Texture,y.Tint,y.Transform,y.Visible,u],initialize:function(a){c.call(this,a,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});h.exports=l},96699:()=>{},41155:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(39419),y=e(61286);y.register("extern",function(){var c=new d(this.scene);return this.displayList.add(c),c})},79394:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(81410),c=e(96699),h.exports={renderWebGL:y,renderCanvas:c}},81410:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=function(c,u,l,r){c.pipelines.clear();var a=d(u,l,r).calc;u.render.call(u,c,l,a),c.pipelines.rebind()};h.exports=y},36266:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(51052),y=e(56694),c=e(36266),u=e(64937),l=e(95669),r=e(89980),a=e(72632),v=e(10850),o=e(83392),p=e(60898),m=new y({Extends:r,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.Transform,u.Visible,u.ScrollFactor,p],initialize:function(x,C){var M=v(C,"x",0),R=v(C,"y",0);r.call(this,x,"Graphics"),this.setPosition(M,R),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(C)},setDefaultStyles:function(g){return v(g,"lineStyle",null)&&(this.defaultStrokeWidth=v(g,"lineStyle.width",1),this.defaultStrokeColor=v(g,"lineStyle.color",16777215),this.defaultStrokeAlpha=v(g,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),v(g,"fillStyle",null)&&(this.defaultFillColor=v(g,"fillStyle.color",16777215),this.defaultFillAlpha=v(g,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(g,x,C){return C===void 0&&(C=1),this.commandBuffer.push(c.LINE_STYLE,g,x,C),this._lineWidth=g,this},fillStyle:function(g,x){return x===void 0&&(x=1),this.commandBuffer.push(c.FILL_STYLE,g,x),this},fillGradientStyle:function(g,x,C,M,R,P,w,A){return R===void 0&&(R=1),P===void 0&&(P=R),w===void 0&&(w=R),A===void 0&&(A=R),this.commandBuffer.push(c.GRADIENT_FILL_STYLE,R,P,w,A,g,x,C,M),this},lineGradientStyle:function(g,x,C,M,R,P){return P===void 0&&(P=1),this.commandBuffer.push(c.GRADIENT_LINE_STYLE,g,P,x,C,M,R),this},beginPath:function(){return this.commandBuffer.push(c.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(c.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(c.FILL_PATH),this},fill:function(){return this.commandBuffer.push(c.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(c.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(c.STROKE_PATH),this},fillCircleShape:function(g){return this.fillCircle(g.x,g.y,g.radius)},strokeCircleShape:function(g){return this.strokeCircle(g.x,g.y,g.radius)},fillCircle:function(g,x,C){return this.beginPath(),this.arc(g,x,C,0,o.PI2),this.fillPath(),this},strokeCircle:function(g,x,C){return this.beginPath(),this.arc(g,x,C,0,o.PI2),this.strokePath(),this},fillRectShape:function(g){return this.fillRect(g.x,g.y,g.width,g.height)},strokeRectShape:function(g){return this.strokeRect(g.x,g.y,g.width,g.height)},fillRect:function(g,x,C,M){return this.commandBuffer.push(c.FILL_RECT,g,x,C,M),this},strokeRect:function(g,x,C,M){var R=this._lineWidth/2,P=g-R,w=g+R;return this.beginPath(),this.moveTo(g,x),this.lineTo(g,x+M),this.strokePath(),this.beginPath(),this.moveTo(g+C,x),this.lineTo(g+C,x+M),this.strokePath(),this.beginPath(),this.moveTo(P,x),this.lineTo(w+C,x),this.strokePath(),this.beginPath(),this.moveTo(P,x+M),this.lineTo(w+C,x+M),this.strokePath(),this},fillRoundedRect:function(g,x,C,M,R){R===void 0&&(R=20);var P=R,w=R,A=R,G=R;typeof R!="number"&&(P=a(R,"tl",20),w=a(R,"tr",20),A=a(R,"bl",20),G=a(R,"br",20));var O=P>=0,L=w>=0,I=A>=0,F=G>=0;return P=Math.abs(P),w=Math.abs(w),A=Math.abs(A),G=Math.abs(G),this.beginPath(),this.moveTo(g+P,x),this.lineTo(g+C-w,x),L?this.arc(g+C-w,x+w,w,-o.TAU,0):this.arc(g+C,x,w,Math.PI,o.TAU,!0),this.lineTo(g+C,x+M-G),F?this.arc(g+C-G,x+M-G,G,0,o.TAU):this.arc(g+C,x+M,G,-o.TAU,Math.PI,!0),this.lineTo(g+A,x+M),I?this.arc(g+A,x+M-A,A,o.TAU,Math.PI):this.arc(g,x+M,A,0,-o.TAU,!0),this.lineTo(g,x+P),O?this.arc(g+P,x+P,P,-Math.PI,-o.TAU):this.arc(g,x,P,o.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(g,x,C,M,R){R===void 0&&(R=20);var P=R,w=R,A=R,G=R,O=Math.min(C,M)/2;typeof R!="number"&&(P=a(R,"tl",20),w=a(R,"tr",20),A=a(R,"bl",20),G=a(R,"br",20));var L=P>=0,I=w>=0,F=A>=0,D=G>=0;return P=Math.min(Math.abs(P),O),w=Math.min(Math.abs(w),O),A=Math.min(Math.abs(A),O),G=Math.min(Math.abs(G),O),this.beginPath(),this.moveTo(g+P,x),this.lineTo(g+C-w,x),this.moveTo(g+C-w,x),I?this.arc(g+C-w,x+w,w,-o.TAU,0):this.arc(g+C,x,w,Math.PI,o.TAU,!0),this.lineTo(g+C,x+M-G),this.moveTo(g+C,x+M-G),D?this.arc(g+C-G,x+M-G,G,0,o.TAU):this.arc(g+C,x+M,G,-o.TAU,Math.PI,!0),this.lineTo(g+A,x+M),this.moveTo(g+A,x+M),F?this.arc(g+A,x+M-A,A,o.TAU,Math.PI):this.arc(g,x+M,A,0,-o.TAU,!0),this.lineTo(g,x+P),this.moveTo(g,x+P),L?this.arc(g+P,x+P,P,-Math.PI,-o.TAU):this.arc(g,x,P,o.TAU,0,!0),this.strokePath(),this},fillPointShape:function(g,x){return this.fillPoint(g.x,g.y,x)},fillPoint:function(g,x,C){return!C||C<1?C=1:(g-=C/2,x-=C/2),this.commandBuffer.push(c.FILL_RECT,g,x,C,C),this},fillTriangleShape:function(g){return this.fillTriangle(g.x1,g.y1,g.x2,g.y2,g.x3,g.y3)},strokeTriangleShape:function(g){return this.strokeTriangle(g.x1,g.y1,g.x2,g.y2,g.x3,g.y3)},fillTriangle:function(g,x,C,M,R,P){return this.commandBuffer.push(c.FILL_TRIANGLE,g,x,C,M,R,P),this},strokeTriangle:function(g,x,C,M,R,P){return this.commandBuffer.push(c.STROKE_TRIANGLE,g,x,C,M,R,P),this},strokeLineShape:function(g){return this.lineBetween(g.x1,g.y1,g.x2,g.y2)},lineBetween:function(g,x,C,M){return this.beginPath(),this.moveTo(g,x),this.lineTo(C,M),this.strokePath(),this},lineTo:function(g,x){return this.commandBuffer.push(c.LINE_TO,g,x),this},moveTo:function(g,x){return this.commandBuffer.push(c.MOVE_TO,g,x),this},strokePoints:function(g,x,C,M){x===void 0&&(x=!1),C===void 0&&(C=!1),M===void 0&&(M=g.length),this.beginPath(),this.moveTo(g[0].x,g[0].y);for(var R=1;R<M;R++)this.lineTo(g[R].x,g[R].y);return x&&this.lineTo(g[0].x,g[0].y),C&&this.closePath(),this.strokePath(),this},fillPoints:function(g,x,C,M){x===void 0&&(x=!1),C===void 0&&(C=!1),M===void 0&&(M=g.length),this.beginPath(),this.moveTo(g[0].x,g[0].y);for(var R=1;R<M;R++)this.lineTo(g[R].x,g[R].y);return x&&this.lineTo(g[0].x,g[0].y),C&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(g,x){x===void 0&&(x=32);var C=g.getPoints(x);return this.strokePoints(C,!0)},strokeEllipse:function(g,x,C,M,R){R===void 0&&(R=32);var P=new l(g,x,C,M),w=P.getPoints(R);return this.strokePoints(w,!0)},fillEllipseShape:function(g,x){x===void 0&&(x=32);var C=g.getPoints(x);return this.fillPoints(C,!0)},fillEllipse:function(g,x,C,M,R){R===void 0&&(R=32);var P=new l(g,x,C,M),w=P.getPoints(R);return this.fillPoints(w,!0)},arc:function(g,x,C,M,R,P,w){return P===void 0&&(P=!1),w===void 0&&(w=0),this.commandBuffer.push(c.ARC,g,x,C,M,R,P,w),this},slice:function(g,x,C,M,R,P,w){return P===void 0&&(P=!1),w===void 0&&(w=0),this.commandBuffer.push(c.BEGIN_PATH),this.commandBuffer.push(c.MOVE_TO,g,x),this.commandBuffer.push(c.ARC,g,x,C,M,R,P,w),this.commandBuffer.push(c.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(c.SAVE),this},restore:function(){return this.commandBuffer.push(c.RESTORE),this},translateCanvas:function(g,x){return this.commandBuffer.push(c.TRANSLATE,g,x),this},scaleCanvas:function(g,x){return this.commandBuffer.push(c.SCALE,g,x),this},rotateCanvas:function(g){return this.commandBuffer.push(c.ROTATE,g),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(g,x,C){var M=this.scene.sys,R=M.game.renderer;x===void 0&&(x=M.scale.width),C===void 0&&(C=M.scale.height),m.TargetCamera.setScene(this.scene),m.TargetCamera.setViewport(0,0,x,C),m.TargetCamera.scrollX=this.x,m.TargetCamera.scrollY=this.y;var P,w,A={willReadFrequently:!0};if(typeof g=="string")if(M.textures.exists(g)){P=M.textures.get(g);var G=P.getSourceImage();G instanceof HTMLCanvasElement&&(w=G.getContext("2d",A))}else P=M.textures.createCanvas(g,x,C),w=P.getSourceImage().getContext("2d",A);else g instanceof HTMLCanvasElement&&(w=g.getContext("2d",A));return w&&(this.renderCanvas(R,this,m.TargetCamera,null,w,!1),P&&P.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});m.TargetCamera=new d,h.exports=m},91543:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36266),y=e(49584),c=function(u,l,r,a,v,o){var p=l.commandBuffer,m=p.length,g=v||u.currentContext;if(!(m===0||!y(u,g,l,r,a))){r.addToRenderList(l);var x=1,C=1,M=0,R=0,P=1,w=0,A=0,G=0;g.beginPath();for(var O=0;O<m;++O){var L=p[O];switch(L){case d.ARC:g.arc(p[O+1],p[O+2],p[O+3],p[O+4],p[O+5],p[O+6]),O+=7;break;case d.LINE_STYLE:P=p[O+1],M=p[O+2],x=p[O+3],w=(M&16711680)>>>16,A=(M&65280)>>>8,G=M&255,g.strokeStyle="rgba("+w+","+A+","+G+","+x+")",g.lineWidth=P,O+=3;break;case d.FILL_STYLE:R=p[O+1],C=p[O+2],w=(R&16711680)>>>16,A=(R&65280)>>>8,G=R&255,g.fillStyle="rgba("+w+","+A+","+G+","+C+")",O+=2;break;case d.BEGIN_PATH:g.beginPath();break;case d.CLOSE_PATH:g.closePath();break;case d.FILL_PATH:o||g.fill();break;case d.STROKE_PATH:o||g.stroke();break;case d.FILL_RECT:o?g.rect(p[O+1],p[O+2],p[O+3],p[O+4]):g.fillRect(p[O+1],p[O+2],p[O+3],p[O+4]),O+=4;break;case d.FILL_TRIANGLE:g.beginPath(),g.moveTo(p[O+1],p[O+2]),g.lineTo(p[O+3],p[O+4]),g.lineTo(p[O+5],p[O+6]),g.closePath(),o||g.fill(),O+=6;break;case d.STROKE_TRIANGLE:g.beginPath(),g.moveTo(p[O+1],p[O+2]),g.lineTo(p[O+3],p[O+4]),g.lineTo(p[O+5],p[O+6]),g.closePath(),o||g.stroke(),O+=6;break;case d.LINE_TO:g.lineTo(p[O+1],p[O+2]),O+=2;break;case d.MOVE_TO:g.moveTo(p[O+1],p[O+2]),O+=2;break;case d.LINE_FX_TO:g.lineTo(p[O+1],p[O+2]),O+=5;break;case d.MOVE_FX_TO:g.moveTo(p[O+1],p[O+2]),O+=5;break;case d.SAVE:g.save();break;case d.RESTORE:g.restore();break;case d.TRANSLATE:g.translate(p[O+1],p[O+2]),O+=2;break;case d.SCALE:g.scale(p[O+1],p[O+2]),O+=2;break;case d.ROTATE:g.rotate(p[O+1]),O+=1;break;case d.GRADIENT_FILL_STYLE:O+=5;break;case d.GRADIENT_LINE_STYLE:O+=6;break}}g.restore()}};h.exports=c},41286:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),y=e(33182);d.register("graphics",function(c,u){c===void 0&&(c={}),u!==void 0&&(c.add=u);var l=new y(this.scene,c);return c.add&&this.scene.sys.displayList.add(l),l})},13122:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(33182),y=e(61286);y.register("graphics",function(c){return this.displayList.add(new d(this.scene,c))})},60898:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(34429),c=e(91543),c=e(91543),h.exports={renderWebGL:y,renderCanvas:c}},34429:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36266),y=e(73329),c=e(69360),u=e(75512),l=function(p,m,g){this.x=p,this.y=m,this.width=g},r=function(p,m,g){this.points=[],this.pointsLength=1,this.points[0]=new l(p,m,g)},a=[],v=new c,o=function(p,m,g,x){if(m.commandBuffer.length!==0){g.addToRenderList(m);var C=p.pipelines.set(m.pipeline,m);p.pipelines.preBatch(m);for(var M=y(m,g,x).calc,R=v.loadIdentity(),P=m.commandBuffer,w=g.alpha*m.alpha,A=1,G=C.fillTint,O=C.strokeTint,L=0,I=0,F=0,D=.01,V=Math.PI*2,k,W=[],X=0,H=!0,$=null,z=u.getTintAppendFloatAlpha,b=0;b<P.length;b++)switch(k=P[b],k){case d.BEGIN_PATH:{W.length=0,$=null,H=!0;break}case d.CLOSE_PATH:{H=!1,$&&$.points.length&&$.points.push($.points[0]);break}case d.FILL_PATH:{for(X=0;X<W.length;X++)C.batchFillPath(W[X].points,R,M);break}case d.STROKE_PATH:{for(X=0;X<W.length;X++)C.batchStrokePath(W[X].points,A,H,R,M);break}case d.LINE_STYLE:{A=P[++b];var B=P[++b],N=P[++b]*w,U=z(B,N);O.TL=U,O.TR=U,O.BL=U,O.BR=U;break}case d.FILL_STYLE:{var Y=P[++b],K=P[++b]*w,Z=z(Y,K);G.TL=Z,G.TR=Z,G.BL=Z,G.BR=Z;break}case d.GRADIENT_FILL_STYLE:{var J=P[++b]*w,Q=P[++b]*w,j=P[++b]*w,q=P[++b]*w;G.TL=z(P[++b],J),G.TR=z(P[++b],Q),G.BL=z(P[++b],j),G.BR=z(P[++b],q);break}case d.GRADIENT_LINE_STYLE:{A=P[++b];var tt=P[++b]*w;O.TL=z(P[++b],tt),O.TR=z(P[++b],tt),O.BL=z(P[++b],tt),O.BR=z(P[++b],tt);break}case d.ARC:{var _=0,it=P[++b],rt=P[++b],at=P[++b],ot=P[++b],et=P[++b],nt=P[++b],st=P[++b];for(et-=ot,nt?et<-V?et=-V:et>0&&(et=-V+et%V):et>V?et=V:et<0&&(et=V+et%V),$===null&&($=new r(it+Math.cos(ot)*at,rt+Math.sin(ot)*at,A),W.push($),_+=D);_<1+st;)F=et*_+ot,L=it+Math.cos(F)*at,I=rt+Math.sin(F)*at,$.points.push(new l(L,I,A)),_+=D;F=et+ot,L=it+Math.cos(F)*at,I=rt+Math.sin(F)*at,$.points.push(new l(L,I,A));break}case d.FILL_RECT:{C.batchFillRect(P[++b],P[++b],P[++b],P[++b],R,M);break}case d.FILL_TRIANGLE:{C.batchFillTriangle(P[++b],P[++b],P[++b],P[++b],P[++b],P[++b],R,M);break}case d.STROKE_TRIANGLE:{C.batchStrokeTriangle(P[++b],P[++b],P[++b],P[++b],P[++b],P[++b],A,R,M);break}case d.LINE_TO:{$!==null?$.points.push(new l(P[++b],P[++b],A)):($=new r(P[++b],P[++b],A),W.push($));break}case d.MOVE_TO:{$=new r(P[++b],P[++b],A),W.push($);break}case d.SAVE:{a.push(R.copyToArray());break}case d.RESTORE:{R.copyFromArray(a.pop());break}case d.TRANSLATE:{it=P[++b],rt=P[++b],R.translate(it,rt);break}case d.SCALE:{it=P[++b],rt=P[++b],R.scale(it,rt);break}case d.ROTATE:{R.rotate(P[++b]);break}}p.pipelines.postBatch(m)}};h.exports=o},59192:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83979),y=e(56694),c=e(56631),u=e(6659),l=e(71608),r=e(72632),a=e(10850),v=e(19256),o=e(42911),p=e(75757),m=e(58403),g=e(13747),x=new y({Extends:u,initialize:function(M,R,P){u.call(this),P?R&&!Array.isArray(R)&&(R=[R]):Array.isArray(R)?o(R[0])&&(P=R,R=null):o(R)&&(P=R,R=null),this.scene=M,this.children=new m,this.isParent=!0,this.type="Group",this.classType=r(P,"classType",g),this.name=r(P,"name",""),this.active=r(P,"active",!0),this.maxSize=r(P,"maxSize",-1),this.defaultKey=r(P,"defaultKey",null),this.defaultFrame=r(P,"defaultFrame",null),this.runChildUpdate=r(P,"runChildUpdate",!1),this.createCallback=r(P,"createCallback",null),this.removeCallback=r(P,"removeCallback",null),this.createMultipleCallback=r(P,"createMultipleCallback",null),this.internalCreateCallback=r(P,"internalCreateCallback",null),this.internalRemoveCallback=r(P,"internalRemoveCallback",null),R&&this.addMultiple(R),P&&this.createMultiple(P),this.on(c.ADDED_TO_SCENE,this.addedToScene,this),this.on(c.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(C,M,R,P,w,A){if(C===void 0&&(C=0),M===void 0&&(M=0),R===void 0&&(R=this.defaultKey),P===void 0&&(P=this.defaultFrame),w===void 0&&(w=!0),A===void 0&&(A=!0),this.isFull())return null;var G=new this.classType(this.scene,C,M,R,P);return G.addToDisplayList(this.scene.sys.displayList),G.addToUpdateList(),G.visible=w,G.setActive(A),this.add(G),G},createMultiple:function(C){if(this.isFull())return[];Array.isArray(C)||(C=[C]);var M=[];if(C[0].key)for(var R=0;R<C.length;R++){var P=this.createFromConfig(C[R]);M=M.concat(P)}return M},createFromConfig:function(C){if(this.isFull())return[];this.classType=r(C,"classType",this.classType);var M=r(C,"key",void 0),R=r(C,"frame",null),P=r(C,"visible",!0),w=r(C,"active",!0),A=[];if(M===void 0)return A;Array.isArray(M)||(M=[M]),Array.isArray(R)||(R=[R]);var G=r(C,"repeat",0),O=r(C,"randomKey",!1),L=r(C,"randomFrame",!1),I=r(C,"yoyo",!1),F=r(C,"quantity",!1),D=r(C,"frameQuantity",1),V=r(C,"max",0),k=p(M,R,{max:V,qty:F||D,random:O,randomB:L,repeat:G,yoyo:I});C.createCallback&&(this.createCallback=C.createCallback),C.removeCallback&&(this.removeCallback=C.removeCallback);for(var W=0;W<k.length;W++){var X=this.create(0,0,k[W].a,k[W].b,P,w);if(!X)break;A.push(X)}if(v(C,"setXY")){var H=a(C,"setXY.x",0),$=a(C,"setXY.y",0),z=a(C,"setXY.stepX",0),b=a(C,"setXY.stepY",0);d.SetXY(A,H,$,z,b)}if(v(C,"setRotation")){var B=a(C,"setRotation.value",0),N=a(C,"setRotation.step",0);d.SetRotation(A,B,N)}if(v(C,"setScale")){var U=a(C,"setScale.x",1),Y=a(C,"setScale.y",U),K=a(C,"setScale.stepX",0),Z=a(C,"setScale.stepY",0);d.SetScale(A,U,Y,K,Z)}if(v(C,"setOrigin")){var J=a(C,"setOrigin.x",.5),Q=a(C,"setOrigin.y",J),j=a(C,"setOrigin.stepX",0),q=a(C,"setOrigin.stepY",0);d.SetOrigin(A,J,Q,j,q)}if(v(C,"setAlpha")){var tt=a(C,"setAlpha.value",1),_=a(C,"setAlpha.step",0);d.SetAlpha(A,tt,_)}if(v(C,"setDepth")){var it=a(C,"setDepth.value",0),rt=a(C,"setDepth.step",0);d.SetDepth(A,it,rt)}if(v(C,"setScrollFactor")){var at=a(C,"setScrollFactor.x",1),ot=a(C,"setScrollFactor.y",at),et=a(C,"setScrollFactor.stepX",0),nt=a(C,"setScrollFactor.stepY",0);d.SetScrollFactor(A,at,ot,et,nt)}var st=r(C,"hitArea",null),ut=r(C,"hitAreaCallback",null);st&&d.SetHitArea(A,st,ut);var lt=r(C,"gridAlign",!1);return lt&&d.GridAlign(A,lt),this.createMultipleCallback&&this.createMultipleCallback.call(this,A),A},preUpdate:function(C,M){if(!(!this.runChildUpdate||this.children.size===0))for(var R=this.children.entries.slice(),P=0;P<R.length;P++){var w=R[P];w.active&&w.update(C,M)}},add:function(C,M){return M===void 0&&(M=!1),this.isFull()?this:(this.children.set(C),this.internalCreateCallback&&this.internalCreateCallback.call(this,C),this.createCallback&&this.createCallback.call(this,C),M&&(C.addToDisplayList(this.scene.sys.displayList),C.addToUpdateList()),C.on(c.DESTROY,this.remove,this),this)},addMultiple:function(C,M){if(M===void 0&&(M=!1),Array.isArray(C))for(var R=0;R<C.length;R++)this.add(C[R],M);return this},remove:function(C,M,R){return M===void 0&&(M=!1),R===void 0&&(R=!1),this.children.contains(C)?(this.children.delete(C),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,C),this.removeCallback&&this.removeCallback.call(this,C),C.off(c.DESTROY,this.remove,this),R?C.destroy():M&&(C.removeFromDisplayList(),C.removeFromUpdateList()),this):this},clear:function(C,M){C===void 0&&(C=!1),M===void 0&&(M=!1);for(var R=this.children,P=0;P<R.size;P++){var w=R.entries[P];w.off(c.DESTROY,this.remove,this),M?w.destroy():C&&(w.removeFromDisplayList(),w.removeFromUpdateList())}return this.children.clear(),this},contains:function(C){return this.children.contains(C)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(C,M,R,P){return l(this.children.entries,C,M,R,P)},getFirst:function(C,M,R,P,w,A,G){return this.getHandler(!0,1,C,M,R,P,w,A,G)},getFirstNth:function(C,M,R,P,w,A,G,O){return this.getHandler(!0,C,M,R,P,w,A,G,O)},getLast:function(C,M,R,P,w,A,G){return this.getHandler(!1,1,C,M,R,P,w,A,G)},getLastNth:function(C,M,R,P,w,A,G,O){return this.getHandler(!1,C,M,R,P,w,A,G,O)},getHandler:function(C,M,R,P,w,A,G,O,L){R===void 0&&(R=!1),P===void 0&&(P=!1);var I,F,D=0,V=this.children.entries;if(C)for(F=0;F<V.length;F++)if(I=V[F],I.active===R){if(D++,D===M)break}else I=null;else for(F=V.length-1;F>=0;F--)if(I=V[F],I.active===R){if(D++,D===M)break}else I=null;return I?(typeof w=="number"&&(I.x=w),typeof A=="number"&&(I.y=A),I):P?this.create(w,A,G,O,L):null},get:function(C,M,R,P,w){return this.getFirst(!1,!0,C,M,R,P,w)},getFirstAlive:function(C,M,R,P,w,A){return this.getFirst(!0,C,M,R,P,w,A)},getFirstDead:function(C,M,R,P,w,A){return this.getFirst(!1,C,M,R,P,w,A)},playAnimation:function(C,M){return d.PlayAnimation(this.children.entries,C,M),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(C){C===void 0&&(C=!0);for(var M=0,R=0;R<this.children.size;R++)this.children.entries[R].active===C&&M++;return M},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var C=this.getTotalUsed(),M=this.maxSize===-1?999999999999:this.maxSize;return M-C},setActive:function(C){return this.active=C,this},setName:function(C){return this.name=C,this},propertyValueSet:function(C,M,R,P,w){return d.PropertyValueSet(this.children.entries,C,M,R,P,w),this},propertyValueInc:function(C,M,R,P,w){return d.PropertyValueInc(this.children.entries,C,M,R,P,w),this},setX:function(C,M){return d.SetX(this.children.entries,C,M),this},setY:function(C,M){return d.SetY(this.children.entries,C,M),this},setXY:function(C,M,R,P){return d.SetXY(this.children.entries,C,M,R,P),this},incX:function(C,M){return d.IncX(this.children.entries,C,M),this},incY:function(C,M){return d.IncY(this.children.entries,C,M),this},incXY:function(C,M,R,P){return d.IncXY(this.children.entries,C,M,R,P),this},shiftPosition:function(C,M,R){return d.ShiftPosition(this.children.entries,C,M,R),this},angle:function(C,M){return d.Angle(this.children.entries,C,M),this},rotate:function(C,M){return d.Rotate(this.children.entries,C,M),this},rotateAround:function(C,M){return d.RotateAround(this.children.entries,C,M),this},rotateAroundDistance:function(C,M,R){return d.RotateAroundDistance(this.children.entries,C,M,R),this},setAlpha:function(C,M){return d.SetAlpha(this.children.entries,C,M),this},setTint:function(C,M,R,P){return d.SetTint(this.children.entries,C,M,R,P),this},setOrigin:function(C,M,R,P){return d.SetOrigin(this.children.entries,C,M,R,P),this},scaleX:function(C,M){return d.ScaleX(this.children.entries,C,M),this},scaleY:function(C,M){return d.ScaleY(this.children.entries,C,M),this},scaleXY:function(C,M,R,P){return d.ScaleXY(this.children.entries,C,M,R,P),this},setDepth:function(C,M){return d.SetDepth(this.children.entries,C,M),this},setBlendMode:function(C){return d.SetBlendMode(this.children.entries,C),this},setHitArea:function(C,M){return d.SetHitArea(this.children.entries,C,M),this},shuffle:function(){return d.Shuffle(this.children.entries),this},kill:function(C){this.children.contains(C)&&C.setActive(!1)},killAndHide:function(C){this.children.contains(C)&&(C.setActive(!1),C.setVisible(!1))},setVisible:function(C,M,R){return d.SetVisible(this.children.entries,C,M,R),this},toggleVisible:function(){return d.ToggleVisible(this.children.entries),this},destroy:function(C,M){C===void 0&&(C=!1),M===void 0&&(M=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(c.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(M,C),this.scene=void 0,this.children=void 0)}});h.exports=x},61295:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),y=e(59192);d.register("group",function(c){return new y(this.scene,null,c)})},62598:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59192),y=e(61286);y.register("group",function(c,u){return this.updateList.add(new d(this.scene,c,u))})},1539:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(89980),u=e(57322),l=new d({Extends:c,Mixins:[y.Alpha,y.BlendMode,y.Depth,y.Flip,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Size,y.TextureCrop,y.Tint,y.Transform,y.Visible,u],initialize:function(a,v,o,p,m){c.call(this,a,"Image"),this._crop=this.resetCropObject(),this.setTexture(p,m),this.setPosition(v,o),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});h.exports=l},57786:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){y.addToRenderList(d),e.batchSprite(d,d.frame,y,c)};h.exports=S},83556:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(1539);y.register("image",function(l,r){l===void 0&&(l={});var a=c(l,"key",null),v=c(l,"frame",null),o=new u(this.scene,0,0,a,v);return r!==void 0&&(l.add=r),d(this.scene,o,l),o})},20927:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1539),y=e(61286);y.register("image",function(c,u,l,r){return this.displayList.add(new d(this.scene,c,u,l,r))})},57322:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(59390),c=e(57786),h.exports={renderWebGL:y,renderCanvas:c}},59390:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){y.addToRenderList(d),this.pipeline.batchSprite(d,y,c)};h.exports=S},48013:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Events:e(56631),DisplayList:e(91713),GameObjectCreator:e(99325),GameObjectFactory:e(61286),UpdateList:e(92034),Components:e(64937),GetCalcMatrix:e(73329),BuildGameObject:e(88933),BuildGameObjectAnimation:e(32291),GameObject:e(89980),BitmapText:e(44616),Blitter:e(52816),Bob:e(41664),Container:e(70339),DOMElement:e(38943),DynamicBitmapText:e(13468),Extern:e(39419),Graphics:e(33182),Group:e(59192),Image:e(1539),Layer:e(85305),Particles:e(27684),PathFollower:e(29598),RenderTexture:e(15996),RetroFont:e(55873),Rope:e(79968),Sprite:e(13747),Text:e(76555),GetTextSize:e(32979),MeasureText:e(27030),TextStyle:e(74744),TileSprite:e(35856),Zone:e(71030),Video:e(8630),Shape:e(91461),Arc:e(28593),Curve:e(15220),Ellipse:e(28591),Grid:e(39169),IsoBox:e(4415),IsoTriangle:e(65159),Line:e(579),Polygon:e(91249),Rectangle:e(517),Star:e(77843),Triangle:e(21873),Factories:{Blitter:e(38906),Container:e(23400),DOMElement:e(66788),DynamicBitmapText:e(94145),Extern:e(41155),Graphics:e(13122),Group:e(62598),Image:e(20927),Layer:e(17676),Particles:e(81212),PathFollower:e(19626),RenderTexture:e(29599),Rope:e(31982),Sprite:e(66135),StaticBitmapText:e(21797),Text:e(94627),TileSprite:e(20509),Zone:e(34546),Video:e(215),Arc:e(10369),Curve:e(10147),Ellipse:e(99869),Grid:e(9326),IsoBox:e(88154),IsoTriangle:e(67765),Line:e(85665),Polygon:e(88203),Rectangle:e(94355),Star:e(23962),Triangle:e(79296)},Creators:{Blitter:e(68452),Container:e(44516),DynamicBitmapText:e(67513),Graphics:e(41286),Group:e(61295),Image:e(83556),Layer:e(56378),Particles:e(765),RenderTexture:e(85692),Rope:e(96027),Sprite:e(89219),StaticBitmapText:e(95499),Text:e(75397),TileSprite:e(63950),Zone:e(24067),Video:e(65601)}};d.Shader=e(27902),d.Mesh=e(83321),d.NineSlice=e(44139),d.PointLight=e(13171),d.Plane=e(33412),d.Factories.Shader=e(51979),d.Factories.Mesh=e(8767),d.Factories.NineSlice=e(53778),d.Factories.PointLight=e(91201),d.Factories.Plane=e(58322),d.Creators.Shader=e(13908),d.Creators.Mesh=e(41839),d.Creators.NineSlice=e(40964),d.Creators.PointLight=e(162),d.Creators.Plane=e(10912),d.Light=e(14455),d.LightsManager=e(26193),d.LightsPlugin=e(50296),h.exports=d},85305:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),y=e(56694),c=e(64937),u=e(48129),l=e(81078),r=e(6659),a=e(56631),v=e(71207),o=e(58010),p=e(7599),m=e(17922),g=new y({Extends:v,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Mask,c.PostPipeline,c.Visible,r,o],initialize:function(C,M){v.call(this,C),r.call(this),this.scene=C,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=C.sys,this.events=C.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(d.SKIP_CHECK),M&&this.add(M),C.sys.queueDepthSort()},setActive:function(x){return this.active=x,this},setName:function(x){return this.name=x,this},setState:function(x){return this.state=x,this},setDataEnabled:function(){return this.data||(this.data=new l(this)),this},setData:function(x,C){return this.data||(this.data=new l(this)),this.data.set(x,C),this},incData:function(x,C){return this.data||(this.data=new l(this)),this.data.inc(x,C),this},toggleData:function(x){return this.data||(this.data=new l(this)),this.data.toggle(x),this},getData:function(x){return this.data||(this.data=new l(this)),this.data.get(x)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(x){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&x.id)},getIndexList:function(){for(var x=this,C=this.parentContainer,M=[];C&&(M.unshift(C.getIndex(x)),x=C,C.parentContainer);)C=C.parentContainer;return M.unshift(this.displayList.getIndex(x)),M},addChildCallback:function(x){x.displayList&&x.displayList!==this&&x.removeFromDisplayList(),x.displayList||(this.queueDepthSort(),x.displayList=this,x.emit(a.ADDED_TO_SCENE,x,this.scene),this.events.emit(p.ADDED_TO_SCENE,x,this.scene))},removeChildCallback:function(x){this.queueDepthSort(),x.displayList=null,x.emit(a.REMOVED_FROM_SCENE,x,this.scene),this.events.emit(p.REMOVED_FROM_SCENE,x,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(m(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(x,C){return x._depth-C._depth},getChildren:function(){return this.list},addToDisplayList:function(x){return x===void 0&&(x=this.scene.sys.displayList),this.displayList&&this.displayList!==x&&this.removeFromDisplayList(),x.exists(this)||(this.displayList=x,x.add(this,!0),x.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),x.events.emit(p.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var x=this.displayList||this.scene.sys.displayList;return x.exists(this)&&(x.remove(this,!0),x.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),x.events.emit(p.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(x){if(!(!this.scene||this.ignoreDestroy)){this.emit(a.DESTROY,this);for(var C=this.list;C.length;)C[0].destroy(x);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});h.exports=g},834:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=d.list;if(c.length!==0){d.depthSort();var u=d.blendMode!==-1;u||e.setBlendMode(0);var l=d._alpha;d.mask&&d.mask.preRenderCanvas(e,null,y);for(var r=0;r<c.length;r++){var a=c[r];if(a.willRender(y)){var v=a.alpha;!u&&a.blendMode!==e.currentBlendMode&&e.setBlendMode(a.blendMode),a.setAlpha(v*l),a.renderCanvas(e,a,y),a.setAlpha(v)}}d.mask&&d.mask.postRenderCanvas(e)}};h.exports=S},56378:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(85305),c=e(99325),u=e(20494);c.register("layer",function(l,r){l===void 0&&(l={});var a=u(l,"children",null),v=new y(this.scene,a);return r!==void 0&&(l.add=r),d(this.scene,v,l),v})},17676:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85305),y=e(61286);y.register("layer",function(c){return this.displayList.add(new d(this.scene,c))})},58010:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(17576),c=e(834),h.exports={renderWebGL:y,renderCanvas:c}},17576:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=d.list,u=c.length;if(u!==0){d.depthSort(),e.pipelines.preBatch(d);var l=d.blendMode!==-1;l||e.setBlendMode(0);for(var r=d.alpha,a=0;a<u;a++){var v=c[a];if(v.willRender(y)){var o,p,m,g;if(v.alphaTopLeft!==void 0)o=v.alphaTopLeft,p=v.alphaTopRight,m=v.alphaBottomLeft,g=v.alphaBottomRight;else{var x=v.alpha;o=x,p=x,m=x,g=x}!l&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode);var C=v.mask;C&&C.preRenderWebGL(e,v,y);var M=v.type;M!==e.currentType&&(e.newType=!0,e.currentType=M),e.nextTypeMatch=a<u-1?c[a+1].type===e.currentType:!1,v.setAlpha(o*r,p*r,m*r,g*r),v.renderWebGL(e,v,y),v.setAlpha(o,p,m,g),C&&C.postRenderWebGL(e,y),e.newType=!1}}e.pipelines.postBatch(d)}};h.exports=S},14455:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),y=e(56694),c=e(64937),u=e(39298),l=e(75512),r=new y({Extends:d,Mixins:[c.Origin,c.ScrollFactor,c.Transform,c.Visible],initialize:function(v,o,p,m,g,x,C){d.call(this,v,o,p),this.color=new u(m,g,x),this.intensity=C,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(p)},displayWidth:{get:function(){return this.diameter},set:function(a){this.diameter=a}},displayHeight:{get:function(){return this.diameter},set:function(a){this.diameter=a}},width:{get:function(){return this.diameter},set:function(a){this.diameter=a}},height:{get:function(){return this.diameter},set:function(a){this.diameter=a}},willRender:function(a){return!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&a.id)},setColor:function(a){var v=l.getFloatsFromUintRGB(a);return this.color.set(v[0],v[1],v[2]),this},setIntensity:function(a){return this.intensity=a,this},setRadius:function(a){return this.radius=a,this}});r.RENDER_MASK=15,h.exports=r},26193:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26535),y=e(56694),c=e(53996),u=e(14455),l=e(13171),r=e(39298),a=e(72677),v=e(17922),o=e(75512),p=new y({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(m,g,x,C,M,R){return this.systems.displayList.add(new l(this.scene,m,g,x,C,M,R))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(m){for(var g=this.lights,x=m.worldView,C=[],M=0;M<g.length;M++){var R=g[M];R.willRender(m)&&d(R,x)&&C.push({light:R,distance:c(R.x,R.y,x.centerX,x.centerY)})}return C.length>this.maxLights&&(v(C,this.sortByDistance),C=C.slice(0,this.maxLights)),this.visibleLights=C.length,C},sortByDistance:function(m,g){return m.distance>=g.distance},setAmbientColor:function(m){var g=o.getFloatsFromUintRGB(m);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(m,g,x,C,M){m===void 0&&(m=0),g===void 0&&(g=0),x===void 0&&(x=128),C===void 0&&(C=16777215),M===void 0&&(M=1);var R=o.getFloatsFromUintRGB(C),P=new u(m,g,x,R[0],R[1],R[2],M);return this.lights.push(P),P},removeLight:function(m){var g=this.lights.indexOf(m);return g>=0&&a(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});h.exports=p},50296:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(26193),c=e(91963),u=e(7599),l=new d({Extends:y,initialize:function(a){this.scene=a,this.systems=a.sys,a.sys.settings.isBooted||a.sys.events.once(u.BOOT,this.boot,this),y.call(this)},boot:function(){var r=this.systems.events;r.on(u.SHUTDOWN,this.shutdown,this),r.on(u.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});c.register("LightsPlugin",l,"lights"),h.exports=l},83321:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(75606),u=e(18693),l=e(89980),r=e(53267),a=e(67623),v=e(73329),o=e(16650),p=e(23464),m=e(23701),g=e(17922),x=e(70015),C=e(85769),M=new d({Extends:l,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Size,y.Texture,y.Transform,y.Visible,p],initialize:function(P,w,A,G,O,L,I,F,D,V,k,W){w===void 0&&(w=0),A===void 0&&(A=0),G===void 0&&(G="__WHITE"),l.call(this,P,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new x,this.modelScale=new x(1,1,1),this.modelRotation=new x,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new o,this.viewPosition=new x,this.viewMatrix=new o,this.projectionMatrix=new o,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var X=P.sys.renderer;this.setPosition(w,A),this.setTexture(G,O),this.setSize(X.width,X.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(X.width,X.height),L&&this.addVertices(L,I,F,D,V,k,W)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(R){return this.viewPosition.addScale(x.LEFT,R),this.dirtyCache[10]=1,this},panY:function(R){return this.viewPosition.y+=x.DOWN.y*R,this.dirtyCache[10]=1,this},panZ:function(R){return this.viewPosition.z+=R,this.dirtyCache[10]=1,this},setPerspective:function(R,P,w,A,G){return w===void 0&&(w=45),A===void 0&&(A=.01),G===void 0&&(G=1e3),this.fov=w,this.projectionMatrix.perspective(c(w),R/P,A,G),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(R,P,w,A){return R===void 0&&(R=this.scene.sys.renderer.getAspectRatio()),P===void 0&&(P=1),w===void 0&&(w=-1e3),A===void 0&&(A=1e3),this.fov=0,this.projectionMatrix.ortho(-R,R,-P,P,w,A),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(R){R.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(R,P,w,A,G,O,L,I,F){var D=this.scene.sys.cache.obj.get(R),V;return D&&(V=r(D,this,P,w,A,G,O,L,I,F)),(!V||V.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",R),this},sortByDepth:function(R,P){return R.depth-P.depth},depthSort:function(){return g(this.faces,this.sortByDepth),this},addVertex:function(R,P,w,A,G,O,L){var I=new C(R,P,w,A,G,O,L);return this.vertices.push(I),I},addFace:function(R,P,w){var A=new u(R,P,w);return this.faces.push(A),this.dirtyCache[9]=-1,A},addVertices:function(R,P,w,A,G,O,L){var I=a(R,P,w,A,G,O,L);return I?(this.faces=this.faces.concat(I.faces),this.vertices=this.vertices.concat(I.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(R){return this.faces[R]},hasFaceAt:function(R,P,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var A=v(this,w).calc,G=this.faces,O=0;O<G.length;O++){var L=G[O];if(L.contains(R,P,A))return!0}return!1},getFaceAt:function(R,P,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var A=v(this,w).calc,G=this.faces,O=[],L=0;L<G.length;L++){var I=G[L];I.contains(R,P,A)&&O.push(I)}return g(O,this.sortByDepth)},setDebug:function(R,P){return this.debugGraphic=R,!R&&!P?this.debugCallback=null:P?this.debugCallback=P:this.debugCallback=this.renderDebug,this},isDirty:function(){var R=this.modelPosition,P=this.modelRotation,w=this.modelScale,A=this.dirtyCache,G=R.x,O=R.y,L=R.z,I=P.x,F=P.y,D=P.z,V=w.x,k=w.y,W=w.z,X=this.getFaceCount(),H=A[0],$=A[1],z=A[2],b=A[3],B=A[4],N=A[5],U=A[6],Y=A[7],K=A[8],Z=A[9];return A[0]=G,A[1]=O,A[2]=L,A[3]=I,A[4]=F,A[5]=D,A[6]=V,A[7]=k,A[8]=W,A[9]=X,H!==G||$!==O||z!==L||b!==I||B!==F||N!==D||U!==V||Y!==k||K!==W||Z!==X},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var R=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!R[10]&&!this.isDirty())){var P=this.width,w=this.height,A=this.viewMatrix,G=this.viewPosition;R[10]&&(A.identity(),A.translate(G),A.invert(),R[10]=0);var O=this.transformMatrix;O.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var L=G.z,I=this.faces,F=0;F<I.length;F++)I[F].transformCoordinatesLocal(O,P,w,L);this.depthSort()}},renderDebug:function(R,P){for(var w=R.debugGraphic,A=0;A<P.length;A++){var G=P[A],O=G.vertex1.tx,L=G.vertex1.ty,I=G.vertex2.tx,F=G.vertex2.ty,D=G.vertex3.tx,V=G.vertex3.ty;w.strokeTriangle(O,L,I,F,D,V)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var R=this.faces,P=function(w,A,G){for(var O=0;O<R.length;O++){var L=R[O];if(L.contains(A,G))return!0}return!1};return this.scene.sys.input.enable(this,P),this},setTint:function(R){R===void 0&&(R=16777215);for(var P=this.vertices,w=0;w<P.length;w++)P[w].color=R;return this},uvScroll:function(R,P){for(var w=this.faces,A=0;A<w.length;A++)w[A].scrollUV(R,P);return this},uvScale:function(R,P){for(var w=this.faces,A=0;A<w.length;A++)w[A].scaleUV(R,P);return this},tint:{set:function(R){this.setTint(R)}},rotateX:{get:function(){return m(this.modelRotation.x)},set:function(R){this.modelRotation.x=c(R)}},rotateY:{get:function(){return m(this.modelRotation.y)},set:function(R){this.modelRotation.y=c(R)}},rotateZ:{get:function(){return m(this.modelRotation.z)},set:function(R){this.modelRotation.z=c(R)}}});h.exports=M},6317:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};h.exports=S},41839:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(10850),l=e(83321);y.register("mesh",function(r,a){r===void 0&&(r={});var v=c(r,"key",null),o=c(r,"frame",null),p=u(r,"vertices",[]),m=u(r,"uvs",[]),g=u(r,"indicies",[]),x=u(r,"containsZ",!1),C=u(r,"normals",[]),M=u(r,"colors",16777215),R=u(r,"alphas",1),P=new l(this.scene,0,0,v,o,p,m,g,x,C,M,R);return a!==void 0&&(r.add=a),d(this.scene,P,r),P})},8767:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83321),y=e(61286);y.register("mesh",function(c,u,l,r,a,v,o,p,m,g,x){return this.displayList.add(new d(this.scene,c,u,l,r,a,v,o,p,m,g,x))})},23464:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(57410),c=e(6317),h.exports={renderWebGL:y,renderCanvas:c}},57410:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=function(c,u,l,r){var a=u.faces,v=a.length;if(v!==0){l.addToRenderList(u);var o=c.pipelines.set(u.pipeline,u),p=d(u,l,r).calc;c.pipelines.preBatch(u);for(var m=o.setGameObject(u),g=o.vertexViewF32,x=o.vertexViewU32,C=o.vertexCount*o.currentShader.vertexComponentCount-1,M=u.tintFill,R=[],P=u.debugCallback,w=p.a,A=p.b,G=p.c,O=p.d,L=p.e,I=p.f,F=u.viewPosition.z,D=u.hideCCW,V=l.roundPixels,k=l.alpha*u.alpha,W=0,X=0;X<v;X++){var H=a[X];H.isInView(l,D,F,k,w,A,G,O,L,I,V)&&(o.shouldFlush(3)&&(o.flush(),m=o.setGameObject(u),C=0),C=H.load(g,x,C,m,M),W++,o.vertexCount+=3,o.currentBatch.count=o.vertexCount-o.currentBatch.start,P&&R.push(H))}u.totalFrame+=W,P&&P.call(u,u,R),c.pipelines.postBatch(u)}};h.exports=y},44139:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(89980),u=e(94456),l=e(85769),r=new d({Extends:c,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Texture,y.Transform,y.Visible,u],initialize:function(v,o,p,m,g,x,C,M,R,P,w){x===void 0&&(x=256),C===void 0&&(C=256),M===void 0&&(M=10),R===void 0&&(R=10),P===void 0&&(P=0),w===void 0&&(w=0),c.call(this,v,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1,this.is3Slice=P===0&&w===0;for(var A=this.is3Slice?18:54,G=0;G<A;G++)this.vertices.push(new l);this.setPosition(o,p),this.setTexture(m,g),this.setSlices(x,C,M,R,P,w),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(a,v,o,p,m,g){a===void 0&&(a=256),v===void 0&&(v=256),o===void 0&&(o=10),p===void 0&&(p=10),m===void 0&&(m=0),g===void 0&&(g=0);var x=m===0&&g===0;return this.is3Slice!==x?console.warn("Cannot change 9 slice to 3 slice"):(this._width=a,this._height=v,this.leftWidth=o,this.rightWidth=p,this.topHeight=m,this.bottomHeight=g,this.is3Slice&&(v=this.frame.height,this._height=v,this.topHeight=v,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var a=this.leftWidth,v=this.rightWidth,o=this.topHeight,p=this.bottomHeight,m=this.frame.width,g=this.frame.height;this.updateQuadUVs(0,0,0,a/m,o/g),this.updateQuadUVs(6,a/m,0,1-v/m,o/g),this.updateQuadUVs(12,1-v/m,0,1,o/g),this.is3Slice||(this.updateQuadUVs(18,0,o/g,a/m,1-p/g),this.updateQuadUVs(24,a/m,o/g,1-v/m,1-p/g),this.updateQuadUVs(30,1-v/m,o/g,1,1-p/g),this.updateQuadUVs(36,0,1-p/g,a/m,1),this.updateQuadUVs(42,a/m,1-p/g,1-v/m,1),this.updateQuadUVs(48,1-v/m,1-p/g,1,1))},updateVertices:function(){var a=this.leftWidth,v=this.rightWidth,o=this.topHeight,p=this.bottomHeight,m=this.width,g=this.height;this.updateQuad(0,-.5,.5,-.5+a/m,.5-o/g),this.updateQuad(6,-.5+a/m,.5,.5-v/m,.5-o/g),this.updateQuad(12,.5-v/m,.5,.5,.5-o/g),this.is3Slice||(this.updateQuad(18,-.5,.5-o/g,-.5+a/m,-.5+p/g),this.updateQuad(24,-.5+a/m,.5-o/g,.5-v/m,-.5+p/g),this.updateQuad(30,.5-v/m,.5-o/g,.5,-.5+p/g),this.updateQuad(36,-.5,-.5+p/g,-.5+a/m,-.5),this.updateQuad(42,-.5+a/m,-.5+p/g,.5-v/m,-.5),this.updateQuad(48,.5-v/m,-.5+p/g,.5,-.5))},updateQuad:function(a,v,o,p,m){var g=this.width,x=this.height,C=this.originX,M=this.originY,R=this.vertices;R[a+0].resize(v,o,g,x,C,M),R[a+1].resize(v,m,g,x,C,M),R[a+2].resize(p,o,g,x,C,M),R[a+3].resize(v,m,g,x,C,M),R[a+4].resize(p,m,g,x,C,M),R[a+5].resize(p,o,g,x,C,M)},updateQuadUVs:function(a,v,o,p,m){var g=this.vertices,x=this.frame,C=x.u0,M=x.v0,R=x.u1,P=x.v1;if(C!==0||R!==1){var w=R-C;v=C+v*w,p=C+p*w}if(M!==0||P!==1){var A=P-M;o=M+o*A,m=M+m*A}g[a+0].setUVs(v,o),g[a+1].setUVs(v,m),g[a+2].setUVs(p,o),g[a+3].setUVs(v,m),g[a+4].setUVs(p,m),g[a+5].setUVs(p,o)},clearTint:function(){return this.setTint(16777215),this},setTint:function(a){return a===void 0&&(a=16777215),this.tint=a,this.tintFill=!1,this},setTintFill:function(a){return this.setTint(a),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(a){this._width=Math.max(a,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(a){this.is3Slice||(this._height=Math.max(a,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}},setSize:function(a,v){this.width=a,this.height=v;var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=this.width,o.hitArea.height=this.height),this},setDisplaySize:function(a,v){return this.displayWidth=a,this.displayHeight=v,this},originX:{get:function(){return this._originX},set:function(a){this._originX=a,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(a){this._originY=a,this.updateVertices()}},setOrigin:function(a,v){return a===void 0&&(a=.5),v===void 0&&(v=a),this._originX=a,this._originY=v,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var a=this.frame.height;this._height=a,this.topHeight=a,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});h.exports=r},40964:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(10850),l=e(44139);y.register("nineslice",function(r,a){r===void 0&&(r={});var v=c(r,"key",null),o=c(r,"frame",null),p=u(r,"width",256),m=u(r,"height",256),g=u(r,"leftWidth",10),x=u(r,"rightWidth",10),C=u(r,"topHeight",0),M=u(r,"bottomHeight",0),R=new l(this.scene,0,0,v,o,p,m,g,x,C,M);return a!==void 0&&(r.add=a),d(this.scene,R,r),R})},53778:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44139),y=e(61286);y.register("nineslice",function(c,u,l,r,a,v,o,p,m,g){return this.displayList.add(new d(this.scene,c,u,l,r,a,v,o,p,m,g))})},94456:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(27420),h.exports={renderWebGL:y,renderCanvas:c}},27420:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=e(75512),c=function(u,l,r,a){var v=l.vertices,o=v.length;if(o!==0){r.addToRenderList(l);var p=u.pipelines.set(l.pipeline,l),m=d(l,r,a,!1).calc;u.pipelines.preBatch(l);var g=p.setGameObject(l),x=p.vertexViewF32,C=p.vertexViewU32,M=p.vertexCount*p.currentShader.vertexComponentCount-1,R=r.roundPixels,P=l.tintFill,w=r.alpha*l.alpha,A=y.getTintAppendFloatAlpha(l.tint,w),G=p.vertexAvailable(),O=-1;G<o&&(O=G);for(var L=0;L<o;L++){var I=v[L];L===O&&(p.flush(),g=p.setGameObject(l),M=0),x[++M]=m.getXRound(I.vx,I.vy,R),x[++M]=m.getYRound(I.vx,I.vy,R),x[++M]=I.u,x[++M]=I.v,x[++M]=g,x[++M]=P,C[++M]=A,p.vertexCount++,p.currentBatch.count=p.vertexCount-p.currentBatch.start}u.pipelines.postBatch(l)}};h.exports=c},19737:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(93025),c=e(22946),u=e(21902),l=e(4840),r=e(15978),a=new d({Extends:y,initialize:function(o){y.call(this,o,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var v=this.propertyValue,o=v,p=this.defaultEmit,m=this.defaultUpdate;if(this.method===9){this.start=v[0],this.ease=u("Linear"),this.interpolation=l("linear"),p=this.easedValueEmit,m=this.easeValueUpdate,o=v[0],this.active=!0;for(var g=0;g<v.length;g++){var x=r(v[g]);this.r.push(x.r),this.g.push(x.g),this.b.push(x.b)}}return this.onEmit=p,this.onUpdate=m,this.current=o,this},setEase:function(v){this.easeName=v,this.ease=u(v)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(v,o,p){var m=this.ease(p),g=this.interpolation(this.r,m),x=this.interpolation(this.g,m),C=this.interpolation(this.b,m),M=c(g,x,C);return this.current=M,M}});h.exports=a},93025:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),y=e(82897),c=e(56694),u=e(61616),l=e(21902),r=e(72632),a=e(4840),v=e(88462),o=e(1071),p=new c({initialize:function(g,x,C){C===void 0&&(C=!1),this.propertyKey=g,this.propertyValue=x,this.defaultValue=x,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=C,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(m,g){m===void 0&&(m={}),g&&(this.propertyKey=g),this.propertyValue=r(m,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(m){var g;switch(this.method){case 1:case 3:case 8:g=m;break;case 2:this.propertyValue.indexOf(m)>=0&&(g=m);break;case 4:var x=(this.end-this.start)/this.steps;g=v(m,x),this.counter=g;break;case 5:case 6:case 7:g=y(m,this.start,this.end);break;case 9:g=this.start[0];break}return this.current=g,this},getMethod:function(){var m=this.propertyValue;if(m===null)return 0;var g=typeof m;if(g==="number")return 1;if(Array.isArray(m))return 2;if(g==="function")return 3;if(g==="object"){if(this.hasBoth(m,"start","end"))return this.has(m,"steps")?4:5;if(this.hasBoth(m,"min","max"))return 6;if(this.has(m,"random"))return 7;if(this.hasEither(m,"onEmit","onUpdate"))return 8;if(this.has(m,"interpolation"))return 9}return 0},setMethods:function(){var m=this.propertyValue,g=m,x=this.defaultEmit,C=this.defaultUpdate;switch(this.method){case 1:x=this.staticValueEmit;break;case 2:x=this.randomStaticValueEmit,g=m[0];break;case 3:this._onEmit=m,x=this.proxyEmit;break;case 4:this.start=m.start,this.end=m.end,this.steps=m.steps,this.counter=this.start,this.yoyo=this.has(m,"yoyo")?m.yoyo:!1,this.direction=0,x=this.steppedEmit,g=this.start;break;case 5:this.start=m.start,this.end=m.end;var M=this.has(m,"ease")?m.ease:"Linear";this.ease=l(M,m.easeParams),x=this.has(m,"random")&&m.random?this.randomRangedValueEmit:this.easedValueEmit,C=this.easeValueUpdate,g=this.start;break;case 6:this.start=m.min,this.end=m.max,x=this.has(m,"int")&&m.int?this.randomRangedIntEmit:this.randomRangedValueEmit,g=this.start;break;case 7:var R=m.random;Array.isArray(R)&&(this.start=R[0],this.end=R[1]),x=this.randomRangedIntEmit,g=this.start;break;case 8:this._onEmit=this.has(m,"onEmit")?m.onEmit:this.defaultEmit,this._onUpdate=this.has(m,"onUpdate")?m.onUpdate:this.defaultUpdate,x=this.proxyEmit,C=this.proxyUpdate;break;case 9:this.start=m.values;var P=this.has(m,"ease")?m.ease:"Linear";this.ease=l(P,m.easeParams),this.interpolation=a(m.interpolation),x=this.easedValueEmit,C=this.easeValueUpdate,g=this.start[0];break}return this.onEmit=x,this.onUpdate=C,this.current=g,this},has:function(m,g){return m.hasOwnProperty(g)},hasBoth:function(m,g,x){return m.hasOwnProperty(g)&&m.hasOwnProperty(x)},hasEither:function(m,g,x){return m.hasOwnProperty(g)||m.hasOwnProperty(x)},defaultEmit:function(m,g,x){return x},defaultUpdate:function(m,g,x,C){return C},proxyEmit:function(m,g,x){var C=this._onEmit(m,g,x);return this.current=C,C},proxyUpdate:function(m,g,x,C){var M=this._onUpdate(m,g,x,C);return this.current=M,M},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var m=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[m],this.current},randomRangedValueEmit:function(m,g){var x=u(this.start,this.end);return m&&m.data[g]&&(m.data[g].min=x,m.data[g].max=this.end),this.current=x,x},randomRangedIntEmit:function(m,g){var x=d(this.start,this.end);return m&&m.data[g]&&(m.data[g].min=x,m.data[g].max=this.end),this.current=x,x},steppedEmit:function(){var m=this.counter,g=m,x=(this.end-this.start)/this.steps;if(this.yoyo){var C;this.direction===0?(g+=x,g>=this.end&&(C=g-this.end,g=this.end-C,this.direction=1)):(g-=x,g<=this.start&&(C=this.start-g,g=this.start+C,this.direction=0)),this.counter=g}else this.counter=o(g+x,this.start,this.end);return this.current=m,m},easedValueEmit:function(m,g){if(m&&m.data[g]){var x=m.data[g];x.min=this.start,x.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(m,g,x){var C=m.data[g],M,R=this.ease(x);return this.interpolation?M=this.interpolation(this.start,R):M=(C.max-C.min)*R+C.min,this.current=M,M},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});h.exports=p},87811:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=e(30891),u=new d({Extends:c,initialize:function(r,a,v,o,p){if(typeof r=="object"){var m=r;r=y(m,"x",0),a=y(m,"y",0),v=y(m,"power",0),o=y(m,"epsilon",100),p=y(m,"gravity",50)}else r===void 0&&(r=0),a===void 0&&(a=0),v===void 0&&(v=0),o===void 0&&(o=100),p===void 0&&(p=50);c.call(this,r,a,!0),this._gravity=p,this._power=v*p,this._epsilon=o*o},update:function(l,r){var a=this.x-l.x,v=this.y-l.y,o=a*a+v*v;if(o!==0){var p=Math.sqrt(o);o<this._epsilon&&(o=this._epsilon);var m=this._power*r/(o*p)*100;l.velocityX+=a*m,l.velocityY+=v*m}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(l){this._epsilon=l*l}},power:{get:function(){return this._power/this._gravity},set:function(l){this._power=l*this._gravity}},gravity:{get:function(){return this._gravity},set:function(l){var r=this.power;this._gravity=l,this.power=r}}});h.exports=u},14909:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),y=e(82897),c=e(56694),u=e(75606),l=e(74118),r=e(2386),a=e(93736),v=new c({initialize:function(p){this.emitter=p,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new a,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=p.scene,this.anims=new d(this),this.bounds=new l},emit:function(o,p,m,g,x,C){return this.emitter.emit(o,p,m,g,x,C)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(o,p){o===void 0&&(o=0),p===void 0&&(p=0),this.x=o,this.y=p},fire:function(o,p){var m=this.emitter,g=m.ops,x=m.getAnim();if(x?this.anims.play(x):(this.frame=m.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(m.getEmitZone(this),o===void 0?this.x+=g.x.onEmit(this,"x"):g.x.steps>0?this.x+=o+g.x.onEmit(this,"x"):this.x+=o,p===void 0?this.y+=g.y.onEmit(this,"y"):g.y.steps>0?this.y+=p+g.y.onEmit(this,"y"):this.y+=p,this.life=g.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=g.delay.onEmit(this,"delay"),this.holdCurrent=g.hold.onEmit(this,"hold"),this.scaleX=g.scaleX.onEmit(this,"scaleX"),this.scaleY=g.scaleY.active?g.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=g.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),m.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&m.getDeathZone(this))return this.lifeCurrent=0,!1;var C=g.speedX.onEmit(this,"speedX"),M=g.speedY.active?g.speedY.onEmit(this,"speedY"):C;if(m.radial){var R=u(g.angle.onEmit(this,"angle"));this.velocityX=Math.cos(R)*Math.abs(C),this.velocityY=Math.sin(R)*Math.abs(M)}else if(m.moveTo){var P=g.moveToX.onEmit(this,"moveToX"),w=g.moveToY.onEmit(this,"moveToY"),A=this.life/1e3;this.velocityX=(P-this.x)/A,this.velocityY=(w-this.y)/A}else this.velocityX=C,this.velocityY=M;return m.acceleration&&(this.accelerationX=g.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=g.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=g.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=g.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=g.bounce.onEmit(this,"bounce"),this.alpha=g.alpha.onEmit(this,"alpha"),g.color.active?this.tint=g.color.onEmit(this,"tint"):this.tint=g.tint.onEmit(this,"tint"),!0},update:function(o,p,m){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=o,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=o,!1;this.anims.update(0,o);var g=this.emitter,x=g.ops,C=1-this.lifeCurrent/this.life;if(this.lifeT=C,this.x=x.x.onUpdate(this,"x",C,this.x),this.y=x.y.onUpdate(this,"y",C,this.y),g.moveTo){var M=x.moveToX.onUpdate(this,"moveToX",C,g.moveToX),R=x.moveToY.onUpdate(this,"moveToY",C,g.moveToY),P=this.lifeCurrent/1e3;this.velocityX=(M-this.x)/P,this.velocityY=(R-this.y)/P}return this.computeVelocity(g,o,p,m,C),this.scaleX=x.scaleX.onUpdate(this,"scaleX",C,this.scaleX),this.scaleY=this.scaleX,x.scaleY.active&&(this.scaleY=x.scaleY.onUpdate(this,"scaleY",C,this.scaleY)),this.angle=x.rotate.onUpdate(this,"rotate",C,this.angle),this.rotation=u(this.angle),g.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=x.alpha.onUpdate(this,"alpha",C,this.alpha),x.color.active?this.tint=x.color.onUpdate(this,"color",C,this.tint):this.tint=x.tint.onUpdate(this,"tint",C,this.tint),this.lifeCurrent-=o,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(o,p,m,g,x){var C=o.ops,M=this.velocityX,R=this.velocityY,P=C.accelerationX.onUpdate(this,"accelerationX",x,this.accelerationX),w=C.accelerationY.onUpdate(this,"accelerationY",x,this.accelerationY),A=C.maxVelocityX.onUpdate(this,"maxVelocityX",x,this.maxVelocityX),G=C.maxVelocityY.onUpdate(this,"maxVelocityY",x,this.maxVelocityY);this.bounce=C.bounce.onUpdate(this,"bounce",x,this.bounce),M+=o.gravityX*m+P*m,R+=o.gravityY*m+w*m,M=y(M,-A,A),R=y(R,-G,G),this.velocityX=M,this.velocityY=R,this.x+=M*m,this.y+=R*m,o.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var O=0;O<g.length;O++){var L=g[O];L.active&&L.update(this,p,m,x)}},setSizeToFrame:function(){},getBounds:function(o){o===void 0&&(o=this.emitter.getWorldTransformMatrix());var p=Math.abs(o.scaleX)*this.scaleX,m=Math.abs(o.scaleY)*this.scaleY,g=this.x,x=this.y,C=this.rotation,M=this.frame.width*p/2,R=this.frame.height*m/2,P=this.bounds,w=new a(g-M,x-R),A=new a(g+M,x-R),G=new a(g-M,x+R),O=new a(g+M,x+R);return C!==0&&(r(w,g,x,C),r(A,g,x,C),r(G,g,x,C),r(O,g,x,C)),o.transformPoint(w.x,w.y,w),o.transformPoint(A.x,A.y,A),o.transformPoint(G.x,G.y,G),o.transformPoint(O.x,O.y,O),P.x=Math.min(w.x,A.x,G.x,O.x),P.y=Math.min(w.y,A.y,G.y,O.y),P.width=Math.max(w.x,A.x,G.x,O.x)-P.x,P.height=Math.max(w.y,A.y,G.y,O.y)-P.y,P},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});h.exports=v},73106:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(30891),c=e(74118),u=new d({Extends:y,initialize:function(r,a,v,o,p,m,g,x){p===void 0&&(p=!0),m===void 0&&(m=!0),g===void 0&&(g=!0),x===void 0&&(x=!0),y.call(this,r,a,!0),this.bounds=new c(r,a,v,o),this.collideLeft=p,this.collideRight=m,this.collideTop=g,this.collideBottom=x},update:function(l){var r=this.bounds,a=-l.bounce,v=l.worldPosition;v.x<r.x&&this.collideLeft?(l.x+=r.x-v.x,l.velocityX*=a):v.x>r.right&&this.collideRight&&(l.x-=v.x-r.right,l.velocityX*=a),v.y<r.y&&this.collideTop?(l.y+=r.y-v.y,l.velocityY*=a):v.y>r.bottom&&this.collideBottom&&(l.y-=v.y-r.bottom,l.velocityY*=a)}});h.exports=u},9216:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(48129),u=e(29538),l=e(69361),r=e(54213),a=e(19737),v=e(93025),o=e(40629),p=e(89980),m=e(72632),g=e(72861),x=e(87811),C=e(53523),M=e(19256),R=e(7782),P=e(71207),w=e(14655),A=e(14909),G=e(68433),O=e(74118),L=e(90205),I=e(66458),F=e(69116),D=e(17922),V=e(69360),k=e(93736),W=e(1071),X=e(73106),H=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],$=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],z=new d({Extends:p,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Texture,y.Transform,y.Visible,F],initialize:function(B,N,U,Y,K){p.call(this,B,"ParticleEmitter"),this.particleClass=A,this.ops={accelerationX:new v("accelerationX",0),accelerationY:new v("accelerationY",0),alpha:new v("alpha",1),angle:new v("angle",{min:0,max:360},!0),bounce:new v("bounce",0),color:new a("color"),delay:new v("delay",0,!0),hold:new v("hold",0,!0),lifespan:new v("lifespan",1e3,!0),maxVelocityX:new v("maxVelocityX",1e4),maxVelocityY:new v("maxVelocityY",1e4),moveToX:new v("moveToX",0),moveToY:new v("moveToY",0),quantity:new v("quantity",1,!0),rotate:new v("rotate",0),scaleX:new v("scaleX",1),scaleY:new v("scaleY",1),speedX:new v("speedX",0,!0),speedY:new v("speedY",0,!0),tint:new v("tint",16777215),x:new v("x",0),y:new v("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new k,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new V,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new P(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(N,U),this.setTexture(Y),K&&this.setConfig(K)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(b){if(!b)return this;var B=0,N="",U=this.ops;for(B=0;B<$.length;B++)N=$[B],U[N].loadConfig(b);for(B=0;B<H.length;B++)N=H[B],M(b,N)&&(this[N]=m(b,N));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,M(b,"speed")&&(U.speedX.loadConfig(b,"speed"),U.speedY.active=!1),(C(b,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),M(b,"scale")&&(U.scaleX.loadConfig(b,"scale"),U.scaleY.active=!1),M(b,"callbackScope")){var Y=m(b,"callbackScope",null);this.emitCallbackScope=Y,this.deathCallbackScope=Y}if(M(b,"emitZone")&&this.addEmitZone(b.emitZone),M(b,"deathZone")&&this.addDeathZone(b.deathZone),M(b,"bounds")){var K=this.addParticleBounds(b.bounds);K.collideLeft=m(b,"collideLeft",!0),K.collideRight=m(b,"collideRight",!0),K.collideTop=m(b,"collideTop",!0),K.collideBottom=m(b,"collideBottom",!0)}return M(b,"followOffset")&&this.followOffset.setFromObject(m(b,"followOffset",0)),M(b,"texture")&&this.setTexture(b.texture),M(b,"frame")?this.setEmitterFrame(b.frame):M(b,"anim")&&this.setAnim(b.anim),M(b,"reserve")&&this.reserve(b.reserve),M(b,"advance")&&this.fastForward(b.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(o.START,this),this},toJSON:function(){var b=c(this),B=0,N="";for(B=0;B<H.length;B++)N=H[B],b[N]=this[N];var U=this.ops;for(B=0;B<$.length;B++)N=$[B],U[N]&&(b[N]=U[N].toJSON());return U.speedY.active||(delete b.speedX,b.speed=U.speedX.toJSON()),this.scaleX===this.scaleY&&(delete b.scaleX,delete b.scaleY,b.scale=U.scaleX.toJSON()),b},resetCounters:function(b,B){var N=this.counters;N.fill(0),N[0]=b,B&&(N[5]=1)},startFollow:function(b,B,N,U){return B===void 0&&(B=0),N===void 0&&(N=0),U===void 0&&(U=!1),this.follow=b,this.followOffset.set(B,N),this.trackVisible=U,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var b=this.frames,B=b.length,N;return B===1?N=b[0]:this.randomFrame?N=g(b):(N=b[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===B&&(this.currentFrame=0))),this.texture.get(N)},setEmitterFrame:function(b,B,N){B===void 0&&(B=!0),N===void 0&&(N=1),this.randomFrame=B,this.frameQuantity=N,this.currentFrame=0;var U=typeof b;if(this.frames.length=0,Array.isArray(b))this.frames=this.frames.concat(b);else if(U==="string"||U==="number")this.frames.push(b);else if(U==="object"){var Y=b;b=m(Y,"frames",null),b&&(this.frames=this.frames.concat(b));var K=m(Y,"cycle",!1);this.randomFrame=!K,this.frameQuantity=m(Y,"quantity",N)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var b=this.anims,B=b.length;if(B===0)return null;if(B===1)return b[0];if(this.randomAnim)return g(b);var N=b[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=W(this.currentAnim+1,0,B-1)),N},setAnim:function(b,B,N){B===void 0&&(B=!0),N===void 0&&(N=1),this.randomAnim=B,this.animQuantity=N,this.currentAnim=0;var U=typeof b;if(this.anims.length=0,Array.isArray(b))this.anims=this.anims.concat(b);else if(U==="string")this.anims.push(b);else if(U==="object"){var Y=b;b=m(Y,"anims",null),b&&(this.anims=this.anims.concat(b));var K=m(Y,"cycle",!1);this.randomAnim=!K,this.animQuantity=m(Y,"quantity",N)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(b){return b===void 0&&(b=!0),this.radial=b,this},addParticleBounds:function(b,B,N,U,Y,K,Z,J){if(typeof b=="object"){var Q=b;b=Q.x,B=Q.y,N=M(Q,"w")?Q.w:Q.width,U=M(Q,"h")?Q.h:Q.height}return this.addParticleProcessor(new X(b,B,N,U,Y,K,Z,J))},setParticleSpeed:function(b,B){return B===void 0&&(B=b),this.ops.speedX.onChange(b),b===B?this.ops.speedY.active=!1:this.ops.speedY.onChange(B),this.radial=!0,this},setParticleScale:function(b,B){return b===void 0&&(b=1),B===void 0&&(B=b),this.ops.scaleX.onChange(b),this.ops.scaleY.onChange(B),this},setParticleGravity:function(b,B){return this.gravityX=b,this.gravityY=B,this},setParticleAlpha:function(b){return this.ops.alpha.onChange(b),this},setParticleTint:function(b){return this.ops.tint.onChange(b),this},setEmitterAngle:function(b){return this.ops.angle.onChange(b),this},setParticleLifespan:function(b){return this.ops.lifespan.onChange(b),this},setQuantity:function(b){return this.quantity=b,this},setFrequency:function(b,B){return this.frequency=b,this.flowCounter=b>0?b:0,B&&(this.quantity=B),this},addDeathZone:function(b){Array.isArray(b)||(b=[b]);for(var B,N=this.deathZones,U=0;U<b.length;U++)if(B=b[U],B instanceof l)N.push(B);else if(typeof B.contains=="function")B=new l(B,!0),N.push(B);else{var Y=m(B,"type","onEnter"),K=m(B,"source",null);if(K&&typeof K.contains=="function"){var Z=Y==="onEnter";B=new l(K,Z),N.push(B)}}return B},removeDeathZone:function(b){return I(this.deathZones,b),this},addEmitZone:function(b){Array.isArray(b)||(b=[b]);for(var B,N=this.emitZones,U=[],Y=0;Y<b.length;Y++){if(B=b[Y],B instanceof G||B instanceof r)N.push(B);else{var K=m(B,"type","random"),Z=m(B,"source",null);if(K==="random")B=new G(Z);else if(K==="edge"){var J=m(B,"quantity",1),Q=m(B,"stepRate",0),j=m(B,"yoyo",!1),q=m(B,"seamless",!0),tt=m(B,"total",-1);B=new r(Z,J,Q,j,q,tt)}B&&N.push(B)}U.push(B)}return U},removeEmitZone:function(b){return I(this.emitZones,b),this.zoneIndex=0,this},getEmitZone:function(b){var B=this.emitZones,N=B.length;if(N!==0){var U=B[this.zoneIndex];U.getPoint(b),U.total>-1&&(this.zoneTotal++,this.zoneTotal===U.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===N&&(this.zoneIndex=0)))}},getDeathZone:function(b){for(var B=this.deathZones,N=0;N<B.length;N++){var U=B[N];if(U.willKill(b))return this.emit(o.DEATH_ZONE,this,b,U),!0}return!1},setEmitZone:function(b){var B;return isFinite(b)?B=b:B=this.emitZones.indexOf(b),B>=0&&(this.zoneIndex=B),this},addParticleProcessor:function(b){return this.processors.exists(b)||(b.emitter&&b.emitter.removeParticleProcessor(b),this.processors.add(b),b.emitter=this),b},removeParticleProcessor:function(b){return this.processors.exists(b)&&(this.processors.remove(b,!0),b.emitter=null),b},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(b){return this.addParticleProcessor(new x(b))},reserve:function(b){var B=this.dead;if(this.maxParticles>0){var N=this.getParticleCount();N+b>this.maxParticles&&(b=this.maxParticles-(N+b))}for(var U=0;U<b;U++)B.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(b,B){return b===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof b=="function"&&(this.emitCallback=b,B&&(this.emitCallbackScope=B)),this},onParticleDeath:function(b,B){return b===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof b=="function"&&(this.deathCallback=b,B&&(this.deathCallbackScope=B)),this},killAll:function(){for(var b=this.dead,B=this.alive;B.length>0;)b.push(B.pop());return this},forEachAlive:function(b,B){for(var N=this.alive,U=N.length,Y=0;Y<U;Y++)b.call(B,N[Y],this);return this},forEachDead:function(b,B){for(var N=this.dead,U=N.length,Y=0;Y<U;Y++)b.call(B,N[Y],this);return this},start:function(b,B){return b===void 0&&(b=0),this.emitting||(b>0&&this.fastForward(b),this.emitting=!0,this.resetCounters(this.frequency,!0),B!==void 0&&(this.duration=Math.abs(B)),this.emit(o.START,this)),this},stop:function(b){return b===void 0&&(b=!1),this.emitting&&(this.emitting=!1,b&&this.killAll(),this.emit(o.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(b,B){return b===void 0&&(b=""),B===void 0&&(B=this.true),this.sortProperty=b,this.sortOrderAsc=B,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(b){return this.sortProperty!==""?b=this.depthSortCallback:b=null,this.sortCallback=b,this},depthSort:function(){return D(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(b,B){var N=this.sortProperty;return this.sortOrderAsc?b[N]-B[N]:B[N]-b[N]},flow:function(b,B,N){return B===void 0&&(B=1),this.emitting=!1,this.frequency=b,this.quantity=B,N!==void 0&&(this.stopAfter=N),this.start()},explode:function(b,B,N){this.frequency=-1,this.resetCounters(-1,!0);var U=this.emitParticle(b,B,N);return this.emit(o.EXPLODE,this,U),U},emitParticleAt:function(b,B,N){return this.emitParticle(N,b,B)},emitParticle:function(b,B,N){if(!this.atLimit()){b===void 0&&(b=this.ops.quantity.onEmit());for(var U=this.dead,Y=this.stopAfter,K=this.follow?this.follow.x+this.followOffset.x:B,Z=this.follow?this.follow.y+this.followOffset.y:N,J=0;J<b;J++){var Q=U.pop();if(Q||(Q=new this.particleClass(this)),Q.fire(K,Z)?(this.particleBringToTop?this.alive.push(Q):this.alive.unshift(Q),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,Q,this)):this.dead.push(Q),Y>0&&(this.stopCounter++,this.stopCounter>=Y)||this.atLimit())break}return Q}},fastForward:function(b,B){B===void 0&&(B=1e3/60);var N=0;for(this.skipping=!0;N<Math.abs(b);)this.preUpdate(0,B),N+=B;return this.skipping=!1,this},preUpdate:function(b,B){B*=this.timeScale;var N=B/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var U=this.getProcessors(),Y=this.alive,K=this.dead,Z=0,J=[],Q=Y.length;for(Z=0;Z<Q;Z++){var j=Y[Z];j.update(B,N,U)&&J.push({index:Z,particle:j})}if(Q=J.length,Q>0){var q=this.deathCallback,tt=this.deathCallbackScope;for(Z=Q-1;Z>=0;Z--){var _=J[Z];Y.splice(_.index,1),K.push(_.particle),q&&q.call(tt,_.particle),_.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&Y.length===0&&(this.completeFlag=0,this.emit(o.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=B;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=B,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(b){for(var B=this.getWorldTransformMatrix(),N=this.alive,U=N.length,Y=[],K=0;K<U;K++){var Z=N[K];L(b,Z.getBounds(B))&&Y.push(Z)}return Y},getBounds:function(b,B,N,U){b===void 0&&(b=0),B===void 0&&(B=0),N===void 0&&(N=1e3/60),U===void 0&&(U=new O);var Y=this.getWorldTransformMatrix(),K,Z,J=this.alive,Q=!1;if(U.setTo(0,0,0,0),B>0){var j=0;for(this.skipping=!0;j<Math.abs(B);){for(this.preUpdate(0,N),K=0;K<J.length;K++)Z=J[K].getBounds(Y),Q?w(U,Z):(Q=!0,u(Z,U));j+=N}this.skipping=!1}else for(K=0;K<J.length;K++)Z=J[K].getBounds(Y),Q?w(U,Z):(Q=!0,u(Z,U));return b>0&&R(U,b,b),U},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(b){this.ops.x.onChange(b)}},particleY:{get:function(){return this.ops.y.current},set:function(b){this.ops.y.onChange(b)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(b){this.ops.accelerationX.onChange(b)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(b){this.ops.accelerationY.onChange(b)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(b){this.ops.maxVelocityX.onChange(b)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(b){this.ops.maxVelocityY.onChange(b)}},speed:{get:function(){return this.ops.speedX.current},set:function(b){this.ops.speedX.onChange(b),this.ops.speedY.onChange(b)}},speedX:{get:function(){return this.ops.speedX.current},set:function(b){this.ops.speedX.onChange(b)}},speedY:{get:function(){return this.ops.speedY.current},set:function(b){this.ops.speedY.onChange(b)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(b){this.ops.moveToX.onChange(b)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(b){this.ops.moveToY.onChange(b)}},bounce:{get:function(){return this.ops.bounce.current},set:function(b){this.ops.bounce.onChange(b)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(b){this.ops.scaleX.onChange(b)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(b){this.ops.scaleY.onChange(b)}},particleColor:{get:function(){return this.ops.color.current},set:function(b){this.ops.color.onChange(b)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(b){this.ops.color.setEase(b)}},particleTint:{get:function(){return this.ops.tint.current},set:function(b){this.ops.tint.onChange(b)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(b){this.ops.alpha.onChange(b)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(b){this.ops.lifespan.onChange(b)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(b){this.ops.angle.onChange(b)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(b){this.ops.rotate.onChange(b)}},quantity:{get:function(){return this.ops.quantity.current},set:function(b){this.ops.quantity.onChange(b)}},delay:{get:function(){return this.ops.delay.current},set:function(b){this.ops.delay.onChange(b)}},hold:{get:function(){return this.ops.hold.current},set:function(b){this.ops.hold.onChange(b)}},flowCounter:{get:function(){return this.counters[0]},set:function(b){this.counters[0]=b}},frameCounter:{get:function(){return this.counters[1]},set:function(b){this.counters[1]=b}},animCounter:{get:function(){return this.counters[2]},set:function(b){this.counters[2]=b}},elapsed:{get:function(){return this.counters[3]},set:function(b){this.counters[3]=b}},stopCounter:{get:function(){return this.counters[4]},set:function(b){this.counters[4]=b}},completeFlag:{get:function(){return this.counters[5]},set:function(b){this.counters[5]=b}},zoneIndex:{get:function(){return this.counters[6]},set:function(b){this.counters[6]=b}},zoneTotal:{get:function(){return this.counters[7]},set:function(b){this.counters[7]=b}},currentFrame:{get:function(){return this.counters[8]},set:function(b){this.counters[8]=b}},currentAnim:{get:function(){return this.counters[9]},set:function(b){this.counters[9]=b}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var b,B=this.ops;for(b=0;b<$.length;b++){var N=$[b];B[N].destroy()}for(b=0;b<this.alive.length;b++)this.alive[b].destroy();for(b=0;b<this.dead.length;b++)this.dead[b].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});h.exports=z},10456:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(90205),y=e(69360),c=new y,u=new y,l=new y,r=new y,a=function(v,o,p,m){var g=c,x=u,C=l,M=r;m?(M.loadIdentity(),M.multiply(m),M.translate(o.x,o.y),M.rotate(o.rotation),M.scale(o.scaleX,o.scaleY)):M.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);var R=v.currentContext,P=p.roundPixels,w=p.alpha,A=o.alpha,G=o.alive,O=G.length,L=o.viewBounds;if(!(!o.visible||O===0||L&&!d(L,p.worldView))){o.sortCallback&&o.depthSort(),p.addToRenderList(o);var I=o.scrollFactorX,F=o.scrollFactorY;R.save(),R.globalCompositeOperation=v.blendModes[o.blendMode];for(var D=0;D<O;D++){var V=G[D],k=V.alpha*A*w;if(!(k<=0||V.scaleX===0||V.scaleY===0)){C.applyITRS(V.x,V.y,V.rotation,V.scaleX,V.scaleY),g.copyFrom(p.matrix),g.multiplyWithOffset(M,-p.scrollX*I,-p.scrollY*F),C.e=V.x,C.f=V.y,g.multiply(C,x);var W=V.frame,X=W.canvasData;if(X.width>0&&X.height>0){var H=-W.halfWidth,$=-W.halfHeight;R.globalAlpha=k,R.save(),x.setToContext(R),P&&(H=Math.round(H),$=Math.round($)),R.imageSmoothingEnabled=!W.source.scaleMode,R.drawImage(W.source.image,X.x,X.y,X.width,X.height,H,$,X.width,X.height),R.restore()}}}R.restore()}};h.exports=a},765:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(72632),l=e(9216);y.register("particles",function(r,a){r===void 0&&(r={});var v=c(r,"key",null),o=u(r,"config",null),p=new l(this.scene,0,0,v);return a!==void 0&&(r.add=a),d(this.scene,p,r),o&&p.setConfig(o),p})},81212:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(9216);d.register("particles",function(c,u,l,r){return c!==void 0&&typeof c=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new y(this.scene,c,u,l,r))})},69116:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(10275),c=e(10456),h.exports={renderWebGL:y,renderCanvas:c}},10275:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(90205),y=e(69360),c=e(75512),u=new y,l=new y,r=new y,a=new y,v=function(o,p,m,g){var x=o.pipelines.set(p.pipeline),C=u,M=l,R=r,P=a;g?(P.loadIdentity(),P.multiply(g),P.translate(p.x,p.y),P.rotate(p.rotation),P.scale(p.scaleX,p.scaleY)):P.applyITRS(p.x,p.y,p.rotation,p.scaleX,p.scaleY);var w=m.roundPixels,A=c.getTintAppendFloatAlpha,G=m.alpha,O=p.alpha,L=p.frame.glTexture;o.pipelines.preBatch(p);var I=p.alive,F=I.length,D=p.viewBounds;if(!(F===0||D&&!d(D,m.worldView))){p.sortCallback&&p.depthSort();var V=x.setGameObject(p,p.frame);m.addToRenderList(p),C.copyFrom(m.matrix),C.multiplyWithOffset(P,-m.scrollX*p.scrollFactorX,-m.scrollY*p.scrollFactorY),o.setBlendMode(p.blendMode),p.mask&&(p.mask.preRenderWebGL(o,p,m),o.pipelines.set(p.pipeline));for(var k=p.tintFill,W=0;W<F;W++){var X=I[W],H=X.alpha*O*G;if(!(H<=0||X.scaleX===0||X.scaleY===0)){R.applyITRS(X.x,X.y,X.rotation,X.scaleX,X.scaleY),R.e=X.x,R.f=X.y,C.multiply(R,M);var $=X.frame,z=-$.halfWidth,b=-$.halfHeight,B=M.setQuad(z,b,z+$.width,b+$.height,w),N=A(X.tint,H);x.shouldFlush(6)&&(x.flush(),V=x.setGameObject(p,p.frame)),x.batchQuad(p,B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],$.u0,$.v0,$.u1,$.v1,N,N,N,N,k,L,V)}}p.mask&&p.mask.postRenderWebGL(o,m),o.pipelines.postBatch(p)}};h.exports=v},30891:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l,r){u===void 0&&(u=0),l===void 0&&(l=0),r===void 0&&(r=!0),this.emitter,this.x=u,this.y=l,this.active=r},update:function(){},destroy:function(){this.emitter=null}});h.exports=y},76100:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},26677:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="deathzone"},62736:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="explode"},56490:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},85715:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},40629:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={COMPLETE:e(76100),DEATH_ZONE:e(26677),EXPLODE:e(62736),START:e(56490),STOP:e(85715)}},27684:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={EmitterColorOp:e(19737),EmitterOp:e(93025),Events:e(40629),GravityWell:e(87811),Particle:e(14909),ParticleBounds:e(73106),ParticleEmitter:e(9216),ParticleProcessor:e(30891),Zones:e(25962)}},69361:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l){this.source=u,this.killOnEnter=l},willKill:function(c){var u=c.worldPosition,l=this.source.contains(u.x,u.y);return l&&this.killOnEnter||!l&&!this.killOnEnter}});h.exports=y},54213:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l,r,a,v,o){a===void 0&&(a=!1),v===void 0&&(v=!0),o===void 0&&(o=-1),this.source=u,this.points=[],this.quantity=l,this.stepRate=r,this.yoyo=a,this.counter=-1,this.seamless=v,this._length=0,this._direction=0,this.total=o,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var c=this.points[0],u=this.points[this.points.length-1];c.x===u.x&&c.y===u.y&&this.points.pop()}var l=this._length;return this._length=this.points.length,this._length<l&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(c){return this.source=c,this.updateSource()},getPoint:function(c){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var u=this.points[this.counter];u&&(c.x=u.x,c.y=u.y)}});h.exports=y},68433:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(93736),c=new d({initialize:function(l){this.source=l,this._tempVec=new y,this.total=-1},getPoint:function(u){var l=this._tempVec;this.source.getRandomPoint(l),u.x=l.x,u.y=l.y}});h.exports=c},25962:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DeathZone:e(69361),EdgeZone:e(54213),RandomZone:e(68433)}},29598:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(13747),u=new d({Extends:c,Mixins:[y.PathFollower],initialize:function(r,a,v,o,p,m){c.call(this,r,v,o,p,m),this.path=a},preUpdate:function(l,r){this.anims.update(l,r),this.pathUpdate(l)}});h.exports=u},19626:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(29598);d.register("follower",function(c,u,l,r,a){var v=new y(this.scene,c,u,l,r,a);return this.displayList.add(v),this.updateList.add(v),v})},33412:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),y=e(56694),c=e(99425),u=e(15978),l=e(83321),r=e(76583),a=new y({Extends:l,initialize:function(o,p,m,g,x,C,M,R){g||(g="__DEFAULT"),l.call(this,o,p,m,g,x),this.type="Plane",this.anims=new d(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(C,M,R),this.setSizeToFrame(!1),this.setViewHeight()},setGridSize:function(v,o,p){v===void 0&&(v=8),o===void 0&&(o=8),p===void 0&&(p=!1);var m=!1;return p&&(m=!0),this.gridWidth=v,this.gridHeight=o,this.isTiled=p,this.clear(),c({mesh:this,widthSegments:v,heightSegments:o,isOrtho:!1,tile:p,flipY:m}),this},setSizeToFrame:function(v){v===void 0&&(v=!0);var o=this.frame;if(this.setPerspective(this.width/o.width,this.height/o.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!v)return this;var p=this.gridWidth,m=this.gridHeight,g=this.vertices,x=o.u0,C=o.u1,M=o.v0,R=o.v1,P,w,A=0;if(this.isTiled)for(M=o.v1,R=o.v0,w=0;w<m;w++)for(P=0;P<p;P++)g[A++].setUVs(x,R),g[A++].setUVs(x,M),g[A++].setUVs(C,R),g[A++].setUVs(x,M),g[A++].setUVs(C,M),g[A++].setUVs(C,R);else{var G=p+1,O=m+1,L=C-x,I=R-M,F=[];for(w=0;w<O;w++)for(P=0;P<G;P++){var D=x+L*(P/p),V=M+I*(w/m);F.push(D,V)}for(w=0;w<m;w++)for(P=0;P<p;P++){var k=(P+G*w)*2,W=(P+G*(w+1))*2,X=(P+1+G*(w+1))*2,H=(P+1+G*w)*2;g[A++].setUVs(F[k],F[k+1]),g[A++].setUVs(F[W],F[W+1]),g[A++].setUVs(F[H],F[H+1]),g[A++].setUVs(F[W],F[W+1]),g[A++].setUVs(F[X],F[X+1]),g[A++].setUVs(F[H],F[H+1])}}return this},setViewHeight:function(v){v===void 0&&(v=this.frame.height);var o=this.fov*(Math.PI/180);this.viewPosition.z=this.height/v/Math.tan(o/2),this.dirtyCache[10]=1},createCheckerboard:function(v,o,p,m,g){v===void 0&&(v=16777215),o===void 0&&(o=255),p===void 0&&(p=255),m===void 0&&(m=255),g===void 0&&(g=128);var x=this.scene.sys.renderer.gl,C=x.createTexture();x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,C),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST);for(var M=u(v),R=u(o),P=[],w=0;w<16;w++)for(var A=0;A<16;A++)w<8&&A<8||w>7&&A>7?P.push(M.r,M.g,M.b,p):P.push(R.r,R.g,R.b,m);x.texImage2D(x.TEXTURE_2D,0,x.RGBA,16,16,0,x.RGBA,x.UNSIGNED_BYTE,new Uint8Array(P)),C.isAlphaPremultiplied=!0,C.isRenderTexture=!1,C.width=16,C.height=16;var G=this.scene.sys.textures.addGLTexture(r(),C,16,16);return this.removeCheckerboard(),this._checkerboard=G,x.bindTexture(x.TEXTURE_2D,null),this.setTexture(G),this.setSizeToFrame(),this.setViewHeight(g),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(v,o){return this.anims.play(v,o)},playReverse:function(v,o){return this.anims.playReverse(v,o)},playAfterDelay:function(v,o){return this.anims.playAfterDelay(v,o)},playAfterRepeat:function(v,o){return this.anims.playAfterRepeat(v,o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(v){return this.anims.stopAfterDelay(v)},stopAfterRepeat:function(v){return this.anims.stopAfterRepeat(v)},stopOnFrame:function(v){return this.anims.stopOnFrame(v)},preUpdate:function(v,o){l.prototype.preUpdate.call(this,v,o),this.anims.update(v,o)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});h.exports=a},10912:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(32291),c=e(99325),u=e(20494),l=e(10850),r=e(33412);c.register("plane",function(a,v){a===void 0&&(a={});var o=u(a,"key",null),p=u(a,"frame",null),m=l(a,"width",8),g=l(a,"height",8),x=l(a,"tile",!1),C=new r(this.scene,0,0,o,p,m,g,x);v!==void 0&&(a.add=v);var M=l(a,"checkerboard",null);if(M){var R=l(M,"color1",16777215),P=l(M,"color2",255),w=l(M,"alpha1",255),A=l(M,"alpha2",255),G=l(M,"height",128);C.createCheckerboard(R,P,w,A,G)}return d(this.scene,C,a),y(C,a),C})},58322:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(33412),y=e(61286);y.register("plane",function(c,u,l,r,a,v,o){return this.displayList.add(new d(this.scene,c,u,l,r,a,v,o))})},13171:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(89980),u=e(74853),l=e(65641),r=e(71606),a=new d({Extends:c,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.Mask,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Transform,y.Visible,r],initialize:function(o,p,m,g,x,C,M){g===void 0&&(g=16777215),x===void 0&&(x=128),C===void 0&&(C=1),M===void 0&&(M=.1),c.call(this,o,"PointLight"),this.initPipeline(l.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(p,m),this.color=u(g),this.intensity=C,this.attenuation=M,this.width=x*2,this.height=x*2,this._radius=x},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this.width=v*2,this.height=v*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});h.exports=a},162:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(13171);y.register("pointlight",function(l,r){l===void 0&&(l={});var a=c(l,"color",16777215),v=c(l,"radius",128),o=c(l,"intensity",1),p=c(l,"attenuation",.1),m=new u(this.scene,0,0,a,v,o,p);return r!==void 0&&(l.add=r),d(this.scene,m,l),m})},91201:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(13171);d.register("pointlight",function(c,u,l,r,a,v){return this.displayList.add(new y(this.scene,c,u,l,r,a,v))})},71606:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(80590),h.exports={renderWebGL:y,renderCanvas:c}},80590:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=function(c,u,l,r){l.addToRenderList(u);var a=c.pipelines.set(u.pipeline),v=d(u,l,r).calc,o=u.width,p=u.height,m=-u._radius,g=-u._radius,x=m+o,C=g+p,M=v.getX(0,0),R=v.getY(0,0),P=v.getX(m,g),w=v.getY(m,g),A=v.getX(m,C),G=v.getY(m,C),O=v.getX(x,C),L=v.getY(x,C),I=v.getX(x,g),F=v.getY(x,g);c.pipelines.preBatch(u),a.batchPointLight(u,l,P,w,A,G,O,L,I,F,M,R),c.pipelines.postBatch(u)};h.exports=y},15996:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(845),c=e(1539),u=new d({Extends:c,initialize:function(r,a,v,o,p){a===void 0&&(a=0),v===void 0&&(v=0),o===void 0&&(o=32),p===void 0&&(p=32);var m=new y(r.sys.textures,"",o,p);c.call(this,r,a,v,m),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(l,r){this.width=l,this.height=r,this.texture.setSize(l,r),this.updateDisplayOrigin();var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=l,a.hitArea.height=r),this},resize:function(l,r){return this.setSize(l,r),this},saveTexture:function(l){var r=this.texture;return r.key=l,r.manager.addDynamicTexture(r)&&(this._saved=!0),r},fill:function(l,r,a,v,o,p){return this.texture.fill(l,r,a,v,o,p),this},clear:function(){return this.texture.clear(),this},stamp:function(l,r,a,v,o){return this.texture.stamp(l,r,a,v,o),this},erase:function(l,r,a){return this.texture.erase(l,r,a),this},draw:function(l,r,a,v,o){return this.texture.draw(l,r,a,v,o),this},drawFrame:function(l,r,a,v,o,p){return this.texture.drawFrame(l,r,a,v,o,p),this},repeat:function(l,r,a,v,o,p,m,g,x){return this.texture.repeat(l,r,a,v,o,p,m,g,x),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(l,r,a,v,o){return this.texture.batchDraw(l,r,a,v,o),this},batchDrawFrame:function(l,r,a,v,o,p){return this.texture.batchDrawFrame(l,r,a,v,o,p),this},endDraw:function(l){return this.texture.endDraw(l),this},snapshotArea:function(l,r,a,v,o,p,m){return this.texture.snapshotArea(l,r,a,v,o,p,m),this},snapshot:function(l,r,a){return this.snapshotArea(0,0,this.width,this.height,l,r,a)},snapshotPixel:function(l,r,a){return this.snapshotArea(l,r,1,1,a,"pixel")},preDestroy:function(){this._saved||this.texture.destroy()}});h.exports=u},85692:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(15996);y.register("renderTexture",function(l,r){l===void 0&&(l={});var a=c(l,"x",0),v=c(l,"y",0),o=c(l,"width",32),p=c(l,"height",32),m=new u(this.scene,a,v,o,p);return r!==void 0&&(l.add=r),d(this.scene,m,l),m})},29599:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(15996);d.register("renderTexture",function(c,u,l,r){return this.displayList.add(new y(this.scene,c,u,l,r))})},79968:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),y=e(56694),c=e(64937),u=e(89980),l=e(65641),r=e(58912),a=e(93736),v=new y({Extends:u,Mixins:[c.AlphaSingle,c.BlendMode,c.Depth,c.Flip,c.Mask,c.Pipeline,c.PostPipeline,c.Size,c.Texture,c.Transform,c.Visible,c.ScrollFactor,r],initialize:function(p,m,g,x,C,M,R,P,w){x===void 0&&(x="__DEFAULT"),M===void 0&&(M=2),R===void 0&&(R=!0),u.call(this,p,"Rope"),this.anims=new d(this),this.points=M,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=x==="__DEFAULT",this.dirty=!1,this.horizontal=R,this._flipX=!1,this._flipY=!1,this._perp=new a,this.debugCallback=null,this.debugGraphic=null,this.setTexture(x,C),this.setPosition(m,g),this.setSizeToFrame(),this.initPipeline(l.ROPE_PIPELINE),Array.isArray(M)&&this.resizeArrays(M.length),this.setPoints(M,P,w),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,p){var m=this.anims.currentFrame;this.anims.update(o,p),this.anims.currentFrame!==m&&(this.updateUVs(),this.updateVertices())},play:function(o,p,m){return this.anims.play(o,p,m),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(o,p,m){return o===void 0&&(o=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(o,p,m))},setVertical:function(o,p,m){return o===void 0&&(o=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(o,p,m)):this},setTintFill:function(o){return o===void 0&&(o=!1),this.tintFill=o,this},setAlphas:function(o,p){var m=this.points.length;if(m<1)return this;var g=this.alphas;o===void 0?o=[1]:!Array.isArray(o)&&p===void 0&&(o=[o]);var x,C=0;if(p!==void 0)for(x=0;x<m;x++)C=x*2,g[C]=o,g[C+1]=p;else if(o.length===m)for(x=0;x<m;x++)C=x*2,g[C]=o[x],g[C+1]=o[x];else{var M=o[0];for(x=0;x<m;x++)C=x*2,o.length>C&&(M=o[C]),g[C]=M,o.length>C+1&&(M=o[C+1]),g[C+1]=M}return this},setColors:function(o){var p=this.points.length;if(p<1)return this;var m=this.colors;o===void 0?o=[16777215]:Array.isArray(o)||(o=[o]);var g,x=0;if(o.length===p)for(g=0;g<p;g++)x=g*2,m[x]=o[g],m[x+1]=o[g];else{var C=o[0];for(g=0;g<p;g++)x=g*2,o.length>x&&(C=o[x]),m[x]=C,o.length>x+1&&(C=o[x+1]),m[x+1]=C}return this},setPoints:function(o,p,m){if(o===void 0&&(o=2),typeof o=="number"){var g=o;g<2&&(g=2),o=[];var x,C,M;if(this.horizontal)for(M=-this.frame.halfWidth,C=this.frame.width/(g-1),x=0;x<g;x++)o.push({x:M+x*C,y:0});else for(M=-this.frame.halfHeight,C=this.frame.height/(g-1),x=0;x<g;x++)o.push({x:0,y:M+x*C})}var R=o.length,P=this.points.length;return R<1?(console.warn("Rope: Not enough points given"),this):(R===1&&(o.unshift({x:0,y:0}),R++),P!==R&&this.resizeArrays(R),this.dirty=!0,this.points=o,this.updateUVs(),p!=null&&this.setColors(p),m!=null&&this.setAlphas(m),this)},updateUVs:function(){for(var o=this.uv,p=this.points.length,m=this.frame.u0,g=this.frame.v0,x=this.frame.u1,C=this.frame.v1,M=(x-m)/(p-1),R=(C-g)/(p-1),P=0;P<p;P++){var w=P*4,A,G,O,L;this.horizontal?(this._flipX?(A=x-P*M,O=x-P*M):(A=m+P*M,O=m+P*M),this._flipY?(G=C,L=g):(G=g,L=C)):(this._flipX?(A=m,O=x):(A=x,O=m),this._flipY?(G=C-P*R,L=C-P*R):(G=g+P*R,L=g+P*R)),o[w+0]=A,o[w+1]=G,o[w+2]=O,o[w+3]=L}return this},resizeArrays:function(o){var p=this.colors,m=this.alphas;this.vertices=new Float32Array(o*4),this.uv=new Float32Array(o*4),p=new Uint32Array(o*2),m=new Float32Array(o*2);for(var g=0;g<o*2;g++)p[g]=16777215,m[g]=1;return this.colors=p,this.alphas=m,this.dirty=!0,this},updateVertices:function(){var o=this._perp,p=this.points,m=this.vertices,g=p.length;if(this.dirty=!1,!(g<1)){for(var x,C=p[0],M=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,R=0;R<g;R++){var P=p[R],w=R*4;R<g-1?x=p[R+1]:x=P,o.x=x.y-C.y,o.y=-(x.x-C.x);var A=o.length();o.x/=A,o.y/=A,o.x*=M,o.y*=M,m[w]=P.x+o.x,m[w+1]=P.y+o.y,m[w+2]=P.x-o.x,m[w+3]=P.y-o.y,C=P}return this}},setDebug:function(o,p){return this.debugGraphic=o,!o&&!p?this.debugCallback=null:p?this.debugCallback=p:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(o,p,m){var g=o.debugGraphic,x=m[0],C=m[1],M=m[2],R=m[3];g.lineBetween(x,C,M,R);for(var P=4;P<p;P+=4){var w=m[P+0],A=m[P+1],G=m[P+2],O=m[P+3];g.lineBetween(x,C,w,A),g.lineBetween(M,R,G,O),g.lineBetween(M,R,w,A),g.lineBetween(w,A,G,O),x=w,C=A,M=G,R=O}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(o){return this._flipX=o,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(o){return this._flipY=o,this.updateUVs()}}});h.exports=v},44598:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};h.exports=S},96027:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(10850),l=e(79968);y.register("rope",function(r,a){r===void 0&&(r={});var v=c(r,"key",null),o=c(r,"frame",null),p=c(r,"horizontal",!0),m=u(r,"points",void 0),g=u(r,"colors",void 0),x=u(r,"alphas",void 0),C=new l(this.scene,0,0,v,o,m,p,g,x);return a!==void 0&&(r.add=a),d(this.scene,C,r),C})},31982:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79968),y=e(61286);y.register("rope",function(c,u,l,r,a,v,o,p){return this.displayList.add(new d(this.scene,c,u,l,r,a,v,o,p))})},58912:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(49489),c=e(44598),h.exports={renderWebGL:y,renderCanvas:c}},49489:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=e(75512),c=function(u,l,r,a){r.addToRenderList(l);var v=u.pipelines.set(l.pipeline,l),o=d(l,r,a).calc,p=l.vertices,m=l.uv,g=l.colors,x=l.alphas,C=l.alpha,M=y.getTintAppendFloatAlpha,R=r.roundPixels,P=p.length,w=Math.floor(P*.5);v.flush(),u.pipelines.preBatch(l);var A=v.setGameObject(l),G=v.vertexViewF32,O=v.vertexViewU32,L=v.vertexCount*v.currentShader.vertexComponentCount-1,I=0,F=l.tintFill;l.dirty&&l.updateVertices();for(var D=l.debugCallback,V=[],k=0;k<P;k+=2){var W=p[k+0],X=p[k+1],H=W*o.a+X*o.c+o.e,$=W*o.b+X*o.d+o.f;R&&(H=Math.round(H),$=Math.round($)),G[++L]=H,G[++L]=$,G[++L]=m[k+0],G[++L]=m[k+1],G[++L]=A,G[++L]=F,O[++L]=M(g[I],r.alpha*(x[I]*C)),I++,D&&(V[k+0]=H,V[k+1]=$)}D&&D.call(l,l,P,V),v.vertexCount+=w,v.currentBatch.count=v.vertexCount-v.currentBatch.start,u.pipelines.postBatch(l)};h.exports=c},27902:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(89980),u=e(72632),l=e(98611),r=e(22440),a=e(24252),v=e(69360),o=new d({Extends:c,Mixins:[y.ComputedSize,y.Depth,y.GetBounds,y.Mask,y.Origin,y.ScrollFactor,y.Transform,y.Visible,a],initialize:function(m,g,x,C,M,R,P,w){x===void 0&&(x=0),C===void 0&&(C=0),M===void 0&&(M=128),R===void 0&&(R=128),c.call(this,m,"Shader"),this.blendMode=-1,this.shader;var A=m.sys.renderer;this.renderer=A,this.gl=A.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=A.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=A.width,this._rendererHeight=A.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(x,C),this.setSize(M,R),this.setOrigin(.5,.5),this.setShader(g,P,w)},willRender:function(p){return this.renderToTexture?!0:!(c.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&p.id)},setRenderToTexture:function(p,m){if(m===void 0&&(m=!1),!this.renderToTexture){var g=this.width,x=this.height,C=this.renderer;this.glTexture=C.createTextureFromSource(null,g,x,0),this.glTexture.flipY=m,this.framebuffer=C.createFramebuffer(g,x,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=x,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),p&&(this.texture=this.scene.sys.textures.addGLTexture(p,this.glTexture,g,x))}return this.shader&&(C.pipelines.clear(),this.load(),this.flush(),C.pipelines.rebind()),this},setShader:function(p,m,g){if(m===void 0&&(m=[]),typeof p=="string"){var x=this.scene.sys.cache.shader;if(!x.has(p))return console.warn("Shader missing: "+p),this;this.shader=x.get(p)}else this.shader=p;var C=this.gl,M=this.renderer;this.program&&C.deleteProgram(this.program);var R=M.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);C.uniformMatrix4fv(C.getUniformLocation(R,"uViewMatrix"),!1,this.viewMatrix),C.uniformMatrix4fv(C.getUniformLocation(R,"uProjectionMatrix"),!1,this.projectionMatrix),C.uniform2f(C.getUniformLocation(R,"uResolution"),this.width,this.height),this.program=R;var P=new Date,w={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[P.getFullYear(),P.getMonth(),P.getDate(),P.getHours()*60*60+P.getMinutes()*60+P.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=l(!0,{},this.shader.uniforms,w):this.uniforms=w;for(var A=0;A<4;A++)m[A]&&this.setSampler2D("iChannel"+A,m[A],A,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(p){return this.pointer=p,this},projOrtho:function(p,m,g,x){var C=-1e3,M=1e3,R=1/(p-m),P=1/(g-x),w=1/(C-M),A=this.projectionMatrix;A[0]=-2*R,A[5]=-2*P,A[10]=2*w,A[12]=(p+m)*R,A[13]=(x+g)*P,A[14]=(M+C)*w;var G=this.program,O=this.gl,L=this.renderer;L.setProgram(G),O.uniformMatrix4fv(O.getUniformLocation(G,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=m,this._rendererHeight=g},initUniforms:function(){var p=this.gl,m=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var x in this.uniforms){var C=this.uniforms[x],M=C.type,R=m[M];C.uniformLocation=p.getUniformLocation(g,x),M!=="sampler2D"&&(C.glMatrix=R.matrix,C.glValueLength=R.length,C.glFunc=R.func)}},setSampler2DBuffer:function(p,m,g,x,C,M){C===void 0&&(C=0),M===void 0&&(M={});var R=this.uniforms[p];return R.value=m,M.width=g,M.height=x,R.textureData=M,this._textureCount=C,this.initSampler2D(R),this},setSampler2D:function(p,m,g,x){g===void 0&&(g=0);var C=this.scene.sys.textures;if(C.exists(m)){var M=C.getFrame(m);if(M.glTexture&&M.glTexture.isRenderTexture)return this.setSampler2DBuffer(p,M.glTexture,M.width,M.height,g,x);var R=this.uniforms[p],P=M.source;R.textureKey=m,R.source=P.image,R.value=M.glTexture,P.isGLTexture&&(x||(x={}),x.width=P.width,x.height=P.height),x&&(R.textureData=x),this._textureCount=g,this.initSampler2D(R)}return this},setUniform:function(p,m){return r(this.uniforms,p,m),this},getUniform:function(p){return u(this.uniforms,p,null)},setChannel0:function(p,m){return this.setSampler2D("iChannel0",p,0,m)},setChannel1:function(p,m){return this.setSampler2D("iChannel1",p,1,m)},setChannel2:function(p,m){return this.setSampler2D("iChannel2",p,2,m)},setChannel3:function(p,m){return this.setSampler2D("iChannel3",p,3,m)},initSampler2D:function(p){if(p.value){var m=this.gl;m.activeTexture(m.TEXTURE0+this._textureCount),m.bindTexture(m.TEXTURE_2D,p.value);var g=p.textureData;if(g&&!p.value.isRenderTexture){var x=m[u(g,"magFilter","linear").toUpperCase()],C=m[u(g,"minFilter","linear").toUpperCase()],M=m[u(g,"wrapS","repeat").toUpperCase()],R=m[u(g,"wrapT","repeat").toUpperCase()],P=m[u(g,"format","rgba").toUpperCase()];if(g.repeat&&(M=m.REPEAT,R=m.REPEAT),m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var w=u(g,"width",512),A=u(g,"height",2),G=u(g,"border",0);m.texImage2D(m.TEXTURE_2D,0,P,w,A,G,P,m.UNSIGNED_BYTE,null)}else m.texImage2D(m.TEXTURE_2D,0,P,m.RGBA,m.UNSIGNED_BYTE,p.source);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,x),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,C),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,M),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,R)}this.renderer.setProgram(this.program),m.uniform1i(p.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var p=this.gl,m=this.uniforms,g,x,C,M,R,P=0;for(var w in m)g=m[w],C=g.glFunc,x=g.glValueLength,M=g.uniformLocation,R=g.value,R!==null&&(x===1?g.glMatrix?C.call(p,M,g.transpose,R):C.call(p,M,R):x===2?C.call(p,M,R.x,R.y):x===3?C.call(p,M,R.x,R.y,R.z):x===4?C.call(p,M,R.x,R.y,R.z,R.w):g.type==="sampler2D"&&(p.activeTexture(p.TEXTURE0+P),p.bindTexture(p.TEXTURE_2D,R),p.uniform1i(M,P),P++))},load:function(p){var m=this.gl,g=this.width,x=this.height,C=this.renderer,M=this.program,R=this.viewMatrix;if(!this.renderToTexture){var P=-this._displayOriginX,w=-this._displayOriginY;R[0]=p[0],R[1]=p[1],R[4]=p[2],R[5]=p[3],R[8]=p[4],R[9]=p[5],R[12]=R[0]*P+R[4]*w,R[13]=R[1]*P+R[5]*w}m.useProgram(M),m.uniformMatrix4fv(m.getUniformLocation(M,"uViewMatrix"),!1,R),m.uniform2f(m.getUniformLocation(M,"uResolution"),this.width,this.height);var A=this.uniforms,G=A.resolution;G.value.x=g,G.value.y=x,A.time.value=C.game.loop.getDuration();var O=this.pointer;if(O){var L=A.mouse,I=O.x/g,F=1-O.y/x;L.value.x=I.toFixed(2),L.value.y=F.toFixed(2)}this.syncUniforms()},flush:function(){var p=this.width,m=this.height,g=this.program,x=this.gl,C=this.vertexBuffer,M=this.renderer,R=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(M.setFramebuffer(this.framebuffer),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT)),x.bindBuffer(x.ARRAY_BUFFER,C);var P=x.getAttribLocation(g,"inPosition");P!==-1&&(x.enableVertexAttribArray(P),x.vertexAttribPointer(P,2,x.FLOAT,!1,R,0));var w=this.vertexViewF32;w[3]=m,w[4]=p,w[5]=m,w[8]=p,w[9]=m,w[10]=p;var A=6;x.bufferSubData(x.ARRAY_BUFFER,0,this.bytes.subarray(0,A*R)),x.drawArrays(x.TRIANGLES,0,A),this.renderToTexture&&M.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var p=this.gl;p.deleteProgram(this.program),p.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});h.exports=o},10612:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};h.exports=S},13908:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(27902);y.register("shader",function(l,r){l===void 0&&(l={});var a=c(l,"key",null),v=c(l,"x",0),o=c(l,"y",0),p=c(l,"width",128),m=c(l,"height",128),g=new u(this.scene,a,v,o,p,m);return r!==void 0&&(l.add=r),d(this.scene,g,l),g})},51979:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27902),y=e(61286);y.register("shader",function(c,u,l,r,a,v,o){return this.displayList.add(new d(this.scene,c,u,l,r,a,v,o))})},24252:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(19782),c=e(10612),h.exports={renderWebGL:y,renderCanvas:c}},19782:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=function(c,u,l,r){if(u.shader){if(l.addToRenderList(u),c.pipelines.clear(),u.renderToTexture)u.load(),u.flush();else{var a=d(u,l,r).calc;(c.width!==u._rendererWidth||c.height!==u._rendererHeight)&&u.projOrtho(0,c.width,c.height,0),u.load(a.matrix),u.flush()}c.pipelines.rebind()}};h.exports=y},19543:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),y=function(c,u,l,r,a,v){for(var o=d.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*r),p=l.pathData,m=l.pathIndexes,g=0;g<m.length;g+=3){var x=m[g]*2,C=m[g+1]*2,M=m[g+2]*2,R=p[x+0]-a,P=p[x+1]-v,w=p[C+0]-a,A=p[C+1]-v,G=p[M+0]-a,O=p[M+1]-v,L=u.getX(R,P),I=u.getY(R,P),F=u.getX(w,A),D=u.getY(w,A),V=u.getX(G,O),k=u.getY(G,O);c.batchTri(l,L,I,F,D,V,k,0,0,1,1,o,o,o,2)}};h.exports=y},15608:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=y||d.fillColor,l=c||d.fillAlpha,r=(u&16711680)>>>16,a=(u&65280)>>>8,v=u&255;e.fillStyle="rgba("+r+","+a+","+v+","+l+")"};h.exports=S},17876:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=y||d.strokeColor,l=c||d.strokeAlpha,r=(u&16711680)>>>16,a=(u&65280)>>>8,v=u&255;e.strokeStyle="rgba("+r+","+a+","+v+","+l+")",e.lineWidth=d.lineWidth};h.exports=S},91461:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(89980),u=e(88829),l=new d({Extends:c,Mixins:[y.AlphaSingle,y.BlendMode,y.Depth,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.ScrollFactor,y.Transform,y.Visible],initialize:function(a,v,o){v===void 0&&(v="Shape"),c.call(this,a,v),this.geom=o,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new u,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(r,a){return a===void 0&&(a=1),r===void 0?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=a,this.isFilled=!0),this},setStrokeStyle:function(r,a,v){return v===void 0&&(v=1),r===void 0?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=a,this.strokeAlpha=v,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,a){return this.width=r,this.height=a,this},setDisplaySize:function(r,a){return this.displayWidth=r,this.displayHeight=a,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});h.exports=l},50262:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),y=function(c,u,l,r,a){var v=c.strokeTint,o=d.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*l);v.TL=o,v.TR=o,v.BL=o,v.BR=o;var p=u.pathData,m=p.length-1,g=u.lineWidth,x=g/2,C=p[0]-r,M=p[1]-a;u.closePath||(m-=2);for(var R=2;R<m;R+=2){var P=p[R]-r,w=p[R+1]-a;c.batchLine(C,M,P,w,x,x,g,R-2,u.closePath?R===m-1:!1),C=P,M=w}};h.exports=y},28593:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(2213),y=e(56694),c=e(75606),u=e(11117),l=e(26673),r=e(83392),a=e(91461),v=new y({Extends:a,Mixins:[d],initialize:function(p,m,g,x,C,M,R,P,w){m===void 0&&(m=0),g===void 0&&(g=0),x===void 0&&(x=128),C===void 0&&(C=0),M===void 0&&(M=360),R===void 0&&(R=!1),a.call(this,p,"Arc",new l(0,0,x)),this._startAngle=C,this._endAngle=M,this._anticlockwise=R,this._iterations=.01,this.setPosition(m,g);var A=this.geom.radius*2;this.setSize(A,A),P!==void 0&&this.setFillStyle(P,w),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(o){this._iterations=o,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(o){this.geom.radius=o;var p=o*2;this.setSize(p,p),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(o){this._startAngle=o,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(o){this._endAngle=o,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(o){this._anticlockwise=o,this.updateData()}},setRadius:function(o){return this.radius=o,this},setIterations:function(o){return o===void 0&&(o=.01),this.iterations=o,this},setStartAngle:function(o,p){return this._startAngle=o,p!==void 0&&(this._anticlockwise=p),this.updateData()},setEndAngle:function(o,p){return this._endAngle=o,p!==void 0&&(this._anticlockwise=p),this.updateData()},updateData:function(){var o=this._iterations,p=o,m=this.geom.radius,g=c(this._startAngle),x=c(this._endAngle),C=this._anticlockwise,M=m,R=m;x-=g,C?x<-r.PI2?x=-r.PI2:x>0&&(x=-r.PI2+x%r.PI2):x>r.PI2?x=r.PI2:x<0&&(x=r.PI2+x%r.PI2);for(var P=[M+Math.cos(g)*m,R+Math.sin(g)*m],w;p<1;)w=x*p+g,P.push(M+Math.cos(w)*m,R+Math.sin(w)*m),p+=o;return w=x+g,P.push(M+Math.cos(w)*m,R+Math.sin(w)*m),P.push(M+Math.cos(g)*m,R+Math.sin(g)*m),this.pathIndexes=u(P),this.pathData=P,this}});h.exports=v},23560:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75606),y=e(15608),c=e(17876),u=e(49584),l=function(r,a,v,o){v.addToRenderList(a);var p=r.currentContext;if(u(r,p,a,v,o)){var m=a.radius;p.beginPath(),p.arc(m-a.originX*(m*2),m-a.originY*(m*2),m,d(a._startAngle),d(a._endAngle),a.anticlockwise),a.closePath&&p.closePath(),a.isFilled&&(y(p,a),p.fill()),a.isStroked&&(c(p,a),p.stroke()),p.restore()}};h.exports=l},10369:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28593),y=e(61286);y.register("arc",function(c,u,l,r,a,v,o,p){return this.displayList.add(new d(this.scene,c,u,l,r,a,v,o,p))}),y.register("circle",function(c,u,l,r,a){return this.displayList.add(new d(this.scene,c,u,l,0,360,!1,r,a))})},2213:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(58356),c=e(23560),h.exports={renderWebGL:y,renderCanvas:c}},58356:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=e(19543),c=e(50262),u=function(l,r,a,v){a.addToRenderList(r);var o=l.pipelines.set(r.pipeline),p=d(r,a,v),m=o.calcMatrix.copyFrom(p.calc),g=r._displayOriginX,x=r._displayOriginY,C=a.alpha*r.alpha;l.pipelines.preBatch(r),r.isFilled&&y(o,m,r,C,g,x),r.isStroked&&c(o,r,C,g,x),l.pipelines.postBatch(r)};h.exports=u},15220:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(87203),c=e(11117),u=e(74118),l=e(91461),r=new d({Extends:l,Mixins:[y],initialize:function(v,o,p,m,g,x){o===void 0&&(o=0),p===void 0&&(p=0),l.call(this,v,"Curve",m),this._smoothness=32,this._curveBounds=new u,this.closePath=!1,this.setPosition(o,p),g!==void 0&&this.setFillStyle(g,x),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(a){this._smoothness=a,this.updateData()}},setSmoothness:function(a){return this._smoothness=a,this.updateData()},updateData:function(){var a=this._curveBounds,v=this._smoothness;this.geom.getBounds(a,v),this.setSize(a.width,a.height),this.updateDisplayOrigin();for(var o=[],p=this.geom.getPoints(v),m=0;m<p.length;m++)o.push(p[m].x,p[m].y);return o.push(p[0].x,p[0].y),this.pathIndexes=c(o),this.pathData=o,this}});h.exports=r},4024:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),y=e(17876),c=e(49584),u=function(l,r,a,v){a.addToRenderList(r);var o=l.currentContext;if(c(l,o,r,a,v)){var p=r._displayOriginX+r._curveBounds.x,m=r._displayOriginY+r._curveBounds.y,g=r.pathData,x=g.length-1,C=g[0]-p,M=g[1]-m;o.beginPath(),o.moveTo(C,M),r.closePath||(x-=2);for(var R=2;R<x;R+=2){var P=g[R]-p,w=g[R+1]-m;o.lineTo(P,w)}r.closePath&&o.closePath(),r.isFilled&&(d(o,r),o.fill()),r.isStroked&&(y(o,r),o.stroke()),o.restore()}};h.exports=u},10147:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(15220);d.register("curve",function(c,u,l,r,a){return this.displayList.add(new y(this.scene,c,u,l,r,a))})},87203:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(82958),c=e(4024),h.exports={renderWebGL:y,renderCanvas:c}},82958:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),y=e(73329),c=e(50262),u=function(l,r,a,v){a.addToRenderList(r);var o=l.pipelines.set(r.pipeline),p=y(r,a,v),m=o.calcMatrix.copyFrom(p.calc),g=r._displayOriginX+r._curveBounds.x,x=r._displayOriginY+r._curveBounds.y,C=a.alpha*r.alpha;l.pipelines.preBatch(r),r.isFilled&&d(o,m,r,C,g,x),r.isStroked&&c(o,r,C,g,x),l.pipelines.postBatch(r)};h.exports=u},28591:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(11117),c=e(84171),u=e(95669),l=e(91461),r=new d({Extends:l,Mixins:[c],initialize:function(v,o,p,m,g,x,C){o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=128),g===void 0&&(g=128),l.call(this,v,"Ellipse",new u(m/2,g/2,m,g)),this._smoothness=64,this.setPosition(o,p),this.width=m,this.height=g,x!==void 0&&this.setFillStyle(x,C),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(a){this._smoothness=a,this.updateData()}},setSize:function(a,v){return this.width=a,this.height=v,this.geom.setPosition(a/2,v/2),this.geom.setSize(a,v),this.updateData()},setSmoothness:function(a){return this._smoothness=a,this.updateData()},updateData:function(){for(var a=[],v=this.geom.getPoints(this._smoothness),o=0;o<v.length;o++)a.push(v[o].x,v[o].y);return a.push(v[0].x,v[0].y),this.pathIndexes=y(a),this.pathData=a,this}});h.exports=r},55881:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),y=e(17876),c=e(49584),u=function(l,r,a,v){a.addToRenderList(r);var o=l.currentContext;if(c(l,o,r,a,v)){var p=r._displayOriginX,m=r._displayOriginY,g=r.pathData,x=g.length-1,C=g[0]-p,M=g[1]-m;o.beginPath(),o.moveTo(C,M),r.closePath||(x-=2);for(var R=2;R<x;R+=2){var P=g[R]-p,w=g[R+1]-m;o.lineTo(P,w)}o.closePath(),r.isFilled&&(d(o,r),o.fill()),r.isStroked&&(y(o,r),o.stroke()),o.restore()}};h.exports=u},99869:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28591),y=e(61286);y.register("ellipse",function(c,u,l,r,a,v){return this.displayList.add(new d(this.scene,c,u,l,r,a,v))})},84171:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(17554),c=e(55881),h.exports={renderWebGL:y,renderCanvas:c}},17554:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),y=e(73329),c=e(50262),u=function(l,r,a,v){a.addToRenderList(r);var o=l.pipelines.set(r.pipeline),p=y(r,a,v),m=o.calcMatrix.copyFrom(p.calc),g=r._displayOriginX,x=r._displayOriginY,C=a.alpha*r.alpha;l.pipelines.preBatch(r),r.isFilled&&d(o,m,r,C,g,x),r.isStroked&&c(o,r,C,g,x),l.pipelines.postBatch(r)};h.exports=u},39169:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(91461),c=e(88059),u=new d({Extends:y,Mixins:[c],initialize:function(r,a,v,o,p,m,g,x,C,M,R){a===void 0&&(a=0),v===void 0&&(v=0),o===void 0&&(o=128),p===void 0&&(p=128),m===void 0&&(m=32),g===void 0&&(g=32),y.call(this,r,"Grid",null),this.cellWidth=m,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(a,v),this.setSize(o,p),this.setFillStyle(x,C),M!==void 0&&this.setOutlineStyle(M,R),this.updateDisplayOrigin()},setFillStyle:function(l,r){return r===void 0&&(r=1),l===void 0?this.showCells=!1:(this.fillColor=l,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(l,r){return r===void 0&&(r=1),l===void 0?this.showAltCells=!1:(this.altFillColor=l,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(l,r){return r===void 0&&(r=1),l===void 0?this.showOutline=!1:(this.outlineFillColor=l,this.outlineFillAlpha=r,this.showOutline=!0),this}});h.exports=u},95525:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),y=e(17876),c=e(49584),u=function(l,r,a,v){a.addToRenderList(r);var o=l.currentContext;if(c(l,o,r,a,v)){var p=-r._displayOriginX,m=-r._displayOriginY,g=a.alpha*r.alpha,x=r.width,C=r.height,M=r.cellWidth,R=r.cellHeight,P=Math.ceil(x/M),w=Math.ceil(C/R),A=M,G=R,O=M-(P*M-x),L=R-(w*R-C),I=r.showCells,F=r.showAltCells,D=r.showOutline,V=0,k=0,W=0,X=0,H=0;if(D&&(A--,G--,O===M&&O--,L===R&&L--),I&&r.fillAlpha>0)for(d(o,r),k=0;k<w;k++)for(F&&(W=k%2),V=0;V<P;V++){if(F&&W){W=0;continue}W++,X=V<P-1?A:O,H=k<w-1?G:L,o.fillRect(p+V*M,m+k*R,X,H)}if(F&&r.altFillAlpha>0)for(d(o,r,r.altFillColor,r.altFillAlpha*g),k=0;k<w;k++)for(F&&(W=k%2),V=0;V<P;V++){if(F&&!W){W=1;continue}W=0,X=V<P-1?A:O,H=k<w-1?G:L,o.fillRect(p+V*M,m+k*R,X,H)}if(D&&r.outlineFillAlpha>0){for(y(o,r,r.outlineFillColor,r.outlineFillAlpha*g),V=1;V<P;V++){var $=V*M;o.beginPath(),o.moveTo($+p,m),o.lineTo($+p,C+m),o.stroke()}for(k=1;k<w;k++){var z=k*R;o.beginPath(),o.moveTo(p,z+m),o.lineTo(p+x,z+m),o.stroke()}}o.restore()}};h.exports=u},9326:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(39169);d.register("grid",function(c,u,l,r,a,v,o,p,m,g){return this.displayList.add(new y(this.scene,c,u,l,r,a,v,o,p,m,g))})},88059:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(50639),c=e(95525),h.exports={renderWebGL:y,renderCanvas:c}},50639:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=e(75512),c=function(u,l,r,a){r.addToRenderList(l);var v=u.pipelines.set(l.pipeline),o=d(l,r,a),p=v.calcMatrix.copyFrom(o.calc);p.translate(-l._displayOriginX,-l._displayOriginY);var m=r.alpha*l.alpha,g=l.width,x=l.height,C=l.cellWidth,M=l.cellHeight,R=Math.ceil(g/C),P=Math.ceil(x/M),w=C,A=M,G=C-(R*C-g),O=M-(P*M-x),L,I,F=l.showCells,D=l.showAltCells,V=l.showOutline,k=0,W=0,X=0,H=0,$=0;if(V&&(w--,A--,G===C&&G--,O===M&&O--),u.pipelines.preBatch(l),F&&l.fillAlpha>0)for(L=v.fillTint,I=y.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*m),L.TL=I,L.TR=I,L.BL=I,L.BR=I,W=0;W<P;W++)for(D&&(X=W%2),k=0;k<R;k++){if(D&&X){X=0;continue}X++,H=k<R-1?w:G,$=W<P-1?A:O,v.batchFillRect(k*C,W*M,H,$)}if(D&&l.altFillAlpha>0)for(L=v.fillTint,I=y.getTintAppendFloatAlpha(l.altFillColor,l.altFillAlpha*m),L.TL=I,L.TR=I,L.BL=I,L.BR=I,W=0;W<P;W++)for(D&&(X=W%2),k=0;k<R;k++){if(D&&!X){X=1;continue}X=0,H=k<R-1?w:G,$=W<P-1?A:O,v.batchFillRect(k*C,W*M,H,$)}if(V&&l.outlineFillAlpha>0){var z=v.strokeTint,b=y.getTintAppendFloatAlpha(l.outlineFillColor,l.outlineFillAlpha*m);for(z.TL=b,z.TR=b,z.BL=b,z.BR=b,k=1;k<R;k++){var B=k*C;v.batchLine(B,0,B,x,1,1,1,0,!1)}for(W=1;W<P;W++){var N=W*M;v.batchLine(0,N,g,N,1,1,1,0,!1)}}u.pipelines.postBatch(l)};h.exports=c},4415:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72296),y=e(56694),c=e(91461),u=new y({Extends:c,Mixins:[d],initialize:function(r,a,v,o,p,m,g,x){a===void 0&&(a=0),v===void 0&&(v=0),o===void 0&&(o=48),p===void 0&&(p=32),m===void 0&&(m=15658734),g===void 0&&(g=10066329),x===void 0&&(x=13421772),c.call(this,r,"IsoBox",null),this.projection=4,this.fillTop=m,this.fillLeft=g,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(a,v),this.setSize(o,p),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setFaces:function(l,r,a){return l===void 0&&(l=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),this.showTop=l,this.showLeft=r,this.showRight=a,this},setFillStyle:function(l,r,a){return this.fillTop=l,this.fillLeft=r,this.fillRight=a,this.isFilled=!0,this}});h.exports=u},32884:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),y=e(49584),c=function(u,l,r,a){r.addToRenderList(l);var v=u.currentContext;if(y(u,v,l,r,a)&&l.isFilled){var o=l.width,p=l.height,m=o/2,g=o/l.projection;l.showTop&&(d(v,l,l.fillTop),v.beginPath(),v.moveTo(-m,-p),v.lineTo(0,-g-p),v.lineTo(m,-p),v.lineTo(m,-1),v.lineTo(0,g-1),v.lineTo(-m,-1),v.lineTo(-m,-p),v.fill()),l.showLeft&&(d(v,l,l.fillLeft),v.beginPath(),v.moveTo(-m,0),v.lineTo(0,g),v.lineTo(0,g-p),v.lineTo(-m,-p),v.lineTo(-m,0),v.fill()),l.showRight&&(d(v,l,l.fillRight),v.beginPath(),v.moveTo(m,0),v.lineTo(0,g),v.lineTo(0,g-p),v.lineTo(m,-p),v.lineTo(m,0),v.fill()),v.restore()}};h.exports=c},88154:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(4415);d.register("isobox",function(c,u,l,r,a,v,o){return this.displayList.add(new y(this.scene,c,u,l,r,a,v,o))})},72296:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(33101),c=e(32884),h.exports={renderWebGL:y,renderCanvas:c}},33101:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=e(75512),c=function(u,l,r,a){r.addToRenderList(l);var v=u.pipelines.set(l.pipeline),o=d(l,r,a),p=v.calcMatrix.copyFrom(o.calc),m=l.width,g=l.height,x=m/2,C=m/l.projection,M=r.alpha*l.alpha;if(l.isFilled){var R,P,w,A,G,O,L,I,F;u.pipelines.preBatch(l),l.showTop&&(R=y.getTintAppendFloatAlpha(l.fillTop,M),P=p.getX(-x,-g),w=p.getY(-x,-g),A=p.getX(0,-C-g),G=p.getY(0,-C-g),O=p.getX(x,-g),L=p.getY(x,-g),I=p.getX(0,C-g),F=p.getY(0,C-g),v.batchQuad(l,P,w,A,G,O,L,I,F,0,0,1,1,R,R,R,R,2)),l.showLeft&&(R=y.getTintAppendFloatAlpha(l.fillLeft,M),P=p.getX(-x,0),w=p.getY(-x,0),A=p.getX(0,C),G=p.getY(0,C),O=p.getX(0,C-g),L=p.getY(0,C-g),I=p.getX(-x,-g),F=p.getY(-x,-g),v.batchQuad(l,P,w,A,G,O,L,I,F,0,0,1,1,R,R,R,R,2)),l.showRight&&(R=y.getTintAppendFloatAlpha(l.fillRight,M),P=p.getX(x,0),w=p.getY(x,0),A=p.getX(0,C),G=p.getY(0,C),O=p.getX(0,C-g),L=p.getY(0,C-g),I=p.getX(x,-g),F=p.getY(x,-g),v.batchQuad(l,P,w,A,G,O,L,I,F,0,0,1,1,R,R,R,R,2)),u.pipelines.postBatch(l)}};h.exports=c},65159:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(93387),c=e(91461),u=new d({Extends:c,Mixins:[y],initialize:function(r,a,v,o,p,m,g,x,C){a===void 0&&(a=0),v===void 0&&(v=0),o===void 0&&(o=48),p===void 0&&(p=32),m===void 0&&(m=!1),g===void 0&&(g=15658734),x===void 0&&(x=10066329),C===void 0&&(C=13421772),c.call(this,r,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=x,this.fillRight=C,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=m,this.isFilled=!0,this.setPosition(a,v),this.setSize(o,p),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setReversed:function(l){return this.isReversed=l,this},setFaces:function(l,r,a){return l===void 0&&(l=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),this.showTop=l,this.showLeft=r,this.showRight=a,this},setFillStyle:function(l,r,a){return this.fillTop=l,this.fillLeft=r,this.fillRight=a,this.isFilled=!0,this}});h.exports=u},9923:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),y=e(49584),c=function(u,l,r,a){r.addToRenderList(l);var v=u.currentContext;if(y(u,v,l,r,a)&&l.isFilled){var o=l.width,p=l.height,m=o/2,g=o/l.projection,x=l.isReversed;l.showTop&&x&&(d(v,l,l.fillTop),v.beginPath(),v.moveTo(-m,-p),v.lineTo(0,-g-p),v.lineTo(m,-p),v.lineTo(0,g-p),v.fill()),l.showLeft&&(d(v,l,l.fillLeft),v.beginPath(),x?(v.moveTo(-m,-p),v.lineTo(0,g),v.lineTo(0,g-p)):(v.moveTo(-m,0),v.lineTo(0,g),v.lineTo(0,g-p)),v.fill()),l.showRight&&(d(v,l,l.fillRight),v.beginPath(),x?(v.moveTo(m,-p),v.lineTo(0,g),v.lineTo(0,g-p)):(v.moveTo(m,0),v.lineTo(0,g),v.lineTo(0,g-p)),v.fill()),v.restore()}};h.exports=c},67765:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(65159);d.register("isotriangle",function(c,u,l,r,a,v,o,p){return this.displayList.add(new y(this.scene,c,u,l,r,a,v,o,p))})},93387:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(54946),c=e(9923),h.exports={renderWebGL:y,renderCanvas:c}},54946:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=e(75512),c=function(u,l,r,a){r.addToRenderList(l);var v=u.pipelines.set(l.pipeline),o=d(l,r,a),p=v.calcMatrix.copyFrom(o.calc),m=l.width,g=l.height,x=m/2,C=m/l.projection,M=l.isReversed,R=r.alpha*l.alpha;if(l.isFilled){u.pipelines.preBatch(l);var P,w,A,G,O,L,I;if(l.showTop&&M){P=y.getTintAppendFloatAlpha(l.fillTop,R),w=p.getX(-x,-g),A=p.getY(-x,-g),G=p.getX(0,-C-g),O=p.getY(0,-C-g),L=p.getX(x,-g),I=p.getY(x,-g);var F=p.getX(0,C-g),D=p.getY(0,C-g);v.batchQuad(l,w,A,G,O,L,I,F,D,0,0,1,1,P,P,P,P,2)}l.showLeft&&(P=y.getTintAppendFloatAlpha(l.fillLeft,R),M?(w=p.getX(-x,-g),A=p.getY(-x,-g),G=p.getX(0,C),O=p.getY(0,C),L=p.getX(0,C-g),I=p.getY(0,C-g)):(w=p.getX(-x,0),A=p.getY(-x,0),G=p.getX(0,C),O=p.getY(0,C),L=p.getX(0,C-g),I=p.getY(0,C-g)),v.batchTri(l,w,A,G,O,L,I,0,0,1,1,P,P,P,2)),l.showRight&&(P=y.getTintAppendFloatAlpha(l.fillRight,R),M?(w=p.getX(x,-g),A=p.getY(x,-g),G=p.getX(0,C),O=p.getY(0,C),L=p.getX(0,C-g),I=p.getY(0,C-g)):(w=p.getX(x,0),A=p.getY(x,0),G=p.getX(0,C),O=p.getY(0,C),L=p.getX(0,C-g),I=p.getY(0,C-g)),v.batchTri(l,w,A,G,O,L,I,0,0,1,1,P,P,P,2)),u.pipelines.postBatch(l)}};h.exports=c},579:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(91461),c=e(88829),u=e(52660),l=new d({Extends:y,Mixins:[u],initialize:function(a,v,o,p,m,g,x,C,M){v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=0),g===void 0&&(g=128),x===void 0&&(x=0),y.call(this,a,"Line",new c(p,m,g,x));var R=Math.max(1,this.geom.right-this.geom.left),P=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(v,o),this.setSize(R,P),C!==void 0&&this.setStrokeStyle(1,C,M),this.updateDisplayOrigin()},setLineWidth:function(r,a){return a===void 0&&(a=r),this._startWidth=r,this._endWidth=a,this.lineWidth=r,this},setTo:function(r,a,v,o){return this.geom.setTo(r,a,v,o),this}});h.exports=l},52044:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17876),y=e(49584),c=function(u,l,r,a){r.addToRenderList(l);var v=u.currentContext;if(y(u,v,l,r,a)){var o=l._displayOriginX,p=l._displayOriginY;l.isStroked&&(d(v,l),v.beginPath(),v.moveTo(l.geom.x1-o,l.geom.y1-p),v.lineTo(l.geom.x2-o,l.geom.y2-p),v.stroke()),v.restore()}};h.exports=c},85665:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(579);d.register("line",function(c,u,l,r,a,v,o,p){return this.displayList.add(new y(this.scene,c,u,l,r,a,v,o,p))})},52660:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(46952),c=e(52044),h.exports={renderWebGL:y,renderCanvas:c}},46952:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=e(75512),c=function(u,l,r,a){r.addToRenderList(l);var v=u.pipelines.set(l.pipeline),o=d(l,r,a);v.calcMatrix.copyFrom(o.calc);var p=l._displayOriginX,m=l._displayOriginY,g=r.alpha*l.alpha;if(u.pipelines.preBatch(l),l.isStroked){var x=v.strokeTint,C=y.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*g);x.TL=C,x.TR=C,x.BL=C,x.BR=C;var M=l._startWidth,R=l._endWidth;v.batchLine(l.geom.x1-p,l.geom.y1-m,l.geom.x2-p,l.geom.y2-m,M,R,1,0,!1,o.sprite,o.camera)}u.pipelines.postBatch(l)};h.exports=c},91249:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70573),y=e(56694),c=e(11117),u=e(14045),l=e(8580),r=e(91461),a=e(18974),v=new y({Extends:r,Mixins:[d],initialize:function(p,m,g,x,C,M){m===void 0&&(m=0),g===void 0&&(g=0),r.call(this,p,"Polygon",new l(x));var R=u(this.geom);this.setPosition(m,g),this.setSize(R.width,R.height),C!==void 0&&this.setFillStyle(C,M),this.updateDisplayOrigin(),this.updateData()},smooth:function(o){o===void 0&&(o=1);for(var p=0;p<o;p++)a(this.geom);return this.updateData()},setTo:function(o){this.geom.setTo(o);var p=u(this.geom);return this.setSize(p.width,p.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var o=[],p=this.geom.points,m=0;m<p.length;m++)o.push(p[m].x,p[m].y);return o.push(p[0].x,p[0].y),this.pathIndexes=c(o),this.pathData=o,this}});h.exports=v},40834:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),y=e(17876),c=e(49584),u=function(l,r,a,v){a.addToRenderList(r);var o=l.currentContext;if(c(l,o,r,a,v)){var p=r._displayOriginX,m=r._displayOriginY,g=r.pathData,x=g.length-1,C=g[0]-p,M=g[1]-m;o.beginPath(),o.moveTo(C,M),r.closePath||(x-=2);for(var R=2;R<x;R+=2){var P=g[R]-p,w=g[R+1]-m;o.lineTo(P,w)}r.closePath&&o.closePath(),r.isFilled&&(d(o,r),o.fill()),r.isStroked&&(y(o,r),o.stroke()),o.restore()}};h.exports=u},88203:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(91249);d.register("polygon",function(c,u,l,r,a){return this.displayList.add(new y(this.scene,c,u,l,r,a))})},70573:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(72841),c=e(40834),h.exports={renderWebGL:y,renderCanvas:c}},72841:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),y=e(73329),c=e(50262),u=function(l,r,a,v){a.addToRenderList(r);var o=l.pipelines.set(r.pipeline),p=y(r,a,v),m=o.calcMatrix.copyFrom(p.calc),g=r._displayOriginX,x=r._displayOriginY,C=a.alpha*r.alpha;l.pipelines.preBatch(r),r.isFilled&&d(o,m,r,C,g,x),r.isStroked&&c(o,r,C,g,x),l.pipelines.postBatch(r)};h.exports=u},517:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(74118),c=e(91461),u=e(37673),l=new d({Extends:c,Mixins:[u],initialize:function(a,v,o,p,m,g,x){v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=128),m===void 0&&(m=128),c.call(this,a,"Rectangle",new y(0,0,p,m)),this.setPosition(v,o),this.setSize(p,m),g!==void 0&&this.setFillStyle(g,x),this.updateDisplayOrigin(),this.updateData()},setSize:function(r,a){this.width=r,this.height=a,this.geom.setSize(r,a),this.updateData(),this.updateDisplayOrigin();var v=this.input;return v&&!v.customHitArea&&(v.hitArea.width=r,v.hitArea.height=a),this},updateData:function(){var r=[],a=this.geom,v=this._tempLine;return a.getLineA(v),r.push(v.x1,v.y1,v.x2,v.y2),a.getLineB(v),r.push(v.x2,v.y2),a.getLineC(v),r.push(v.x2,v.y2),a.getLineD(v),r.push(v.x2,v.y2),this.pathData=r,this}});h.exports=l},4091:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),y=e(17876),c=e(49584),u=function(l,r,a,v){a.addToRenderList(r);var o=l.currentContext;if(c(l,o,r,a,v)){var p=r._displayOriginX,m=r._displayOriginY;r.isFilled&&(d(o,r),o.fillRect(-p,-m,r.width,r.height)),r.isStroked&&(y(o,r),o.beginPath(),o.rect(-p,-m,r.width,r.height),o.stroke()),o.restore()}};h.exports=u},94355:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(517);d.register("rectangle",function(c,u,l,r,a,v){return this.displayList.add(new y(this.scene,c,u,l,r,a,v))})},37673:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(43532),c=e(4091),h.exports={renderWebGL:y,renderCanvas:c}},43532:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=e(50262),c=e(75512),u=function(l,r,a,v){a.addToRenderList(r);var o=l.pipelines.set(r.pipeline),p=d(r,a,v);o.calcMatrix.copyFrom(p.calc);var m=r._displayOriginX,g=r._displayOriginY,x=a.alpha*r.alpha;if(l.pipelines.preBatch(r),r.isFilled){var C=o.fillTint,M=c.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*x);C.TL=M,C.TR=M,C.BL=M,C.BR=M,o.batchFillRect(-m,-g,r.width,r.height)}r.isStroked&&y(o,r,x,m,g),l.pipelines.postBatch(r)};h.exports=u},77843:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(87956),y=e(56694),c=e(11117),u=e(91461),l=new y({Extends:u,Mixins:[d],initialize:function(a,v,o,p,m,g,x,C){v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=5),m===void 0&&(m=32),g===void 0&&(g=64),u.call(this,a,"Star",null),this._points=p,this._innerRadius=m,this._outerRadius=g,this.setPosition(v,o),this.setSize(g*2,g*2),x!==void 0&&this.setFillStyle(x,C),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],a=this._points,v=this._innerRadius,o=this._outerRadius,p=Math.PI/2*3,m=Math.PI/a,g=o,x=o;r.push(g,x+-o);for(var C=0;C<a;C++)r.push(g+Math.cos(p)*o,x+Math.sin(p)*o),p+=m,r.push(g+Math.cos(p)*v,x+Math.sin(p)*v),p+=m;return r.push(g,x+-o),this.pathIndexes=c(r),this.pathData=r,this}});h.exports=l},11401:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),y=e(17876),c=e(49584),u=function(l,r,a,v){a.addToRenderList(r);var o=l.currentContext;if(c(l,o,r,a,v)){var p=r._displayOriginX,m=r._displayOriginY,g=r.pathData,x=g.length-1,C=g[0]-p,M=g[1]-m;o.beginPath(),o.moveTo(C,M),r.closePath||(x-=2);for(var R=2;R<x;R+=2){var P=g[R]-p,w=g[R+1]-m;o.lineTo(P,w)}o.closePath(),r.isFilled&&(d(o,r),o.fill()),r.isStroked&&(y(o,r),o.stroke()),o.restore()}};h.exports=u},23962:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(77843),y=e(61286);y.register("star",function(c,u,l,r,a,v,o){return this.displayList.add(new d(this.scene,c,u,l,r,a,v,o))})},87956:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(12037),c=e(11401),h.exports={renderWebGL:y,renderCanvas:c}},12037:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),y=e(73329),c=e(50262),u=function(l,r,a,v){a.addToRenderList(r);var o=l.pipelines.set(r.pipeline),p=y(r,a,v),m=o.calcMatrix.copyFrom(p.calc),g=r._displayOriginX,x=r._displayOriginY,C=a.alpha*r.alpha;l.pipelines.preBatch(r),r.isFilled&&d(o,m,r,C,g,x),r.isStroked&&c(o,r,C,g,x),l.pipelines.postBatch(r)};h.exports=u},21873:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(91461),c=e(66349),u=e(70498),l=new d({Extends:y,Mixins:[u],initialize:function(a,v,o,p,m,g,x,C,M,R,P){v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=128),g===void 0&&(g=64),x===void 0&&(x=0),C===void 0&&(C=128),M===void 0&&(M=128),y.call(this,a,"Triangle",new c(p,m,g,x,C,M));var w=this.geom.right-this.geom.left,A=this.geom.bottom-this.geom.top;this.setPosition(v,o),this.setSize(w,A),R!==void 0&&this.setFillStyle(R,P),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,a,v,o,p,m){return this.geom.setTo(r,a,v,o,p,m),this.updateData()},updateData:function(){var r=[],a=this.geom,v=this._tempLine;return a.getLineA(v),r.push(v.x1,v.y1,v.x2,v.y2),a.getLineB(v),r.push(v.x2,v.y2),a.getLineC(v),r.push(v.x2,v.y2),this.pathData=r,this}});h.exports=l},60213:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),y=e(17876),c=e(49584),u=function(l,r,a,v){a.addToRenderList(r);var o=l.currentContext;if(c(l,o,r,a,v)){var p=r._displayOriginX,m=r._displayOriginY,g=r.geom.x1-p,x=r.geom.y1-m,C=r.geom.x2-p,M=r.geom.y2-m,R=r.geom.x3-p,P=r.geom.y3-m;o.beginPath(),o.moveTo(g,x),o.lineTo(C,M),o.lineTo(R,P),o.closePath(),r.isFilled&&(d(o,r),o.fill()),r.isStroked&&(y(o,r),o.stroke()),o.restore()}};h.exports=u},79296:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(21873);d.register("triangle",function(c,u,l,r,a,v,o,p,m,g){return this.displayList.add(new y(this.scene,c,u,l,r,a,v,o,p,m,g))})},70498:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(72291),c=e(60213),h.exports={renderWebGL:y,renderCanvas:c}},72291:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=e(50262),c=e(75512),u=function(l,r,a,v){a.addToRenderList(r);var o=l.pipelines.set(r.pipeline),p=d(r,a,v);o.calcMatrix.copyFrom(p.calc);var m=r._displayOriginX,g=r._displayOriginY,x=a.alpha*r.alpha;if(l.pipelines.preBatch(r),r.isFilled){var C=o.fillTint,M=c.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*x);C.TL=M,C.TR=M,C.BL=M,C.BR=M;var R=r.geom.x1-m,P=r.geom.y1-g,w=r.geom.x2-m,A=r.geom.y2-g,G=r.geom.x3-m,O=r.geom.y3-g;o.batchFillTriangle(R,P,w,A,G,O,p.sprite,p.camera)}r.isStroked&&y(o,r,x,m,g),l.pipelines.postBatch(r)};h.exports=u},13747:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),y=e(56694),c=e(64937),u=e(89980),l=e(20791),r=new y({Extends:u,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Size,c.TextureCrop,c.Tint,c.Transform,c.Visible,l],initialize:function(v,o,p,m,g){u.call(this,v,"Sprite"),this._crop=this.resetCropObject(),this.anims=new d(this),this.setTexture(m,g),this.setPosition(o,p),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(a,v){this.anims.update(a,v)},play:function(a,v){return this.anims.play(a,v)},playReverse:function(a,v){return this.anims.playReverse(a,v)},playAfterDelay:function(a,v){return this.anims.playAfterDelay(a,v)},playAfterRepeat:function(a,v){return this.anims.playAfterRepeat(a,v)},chain:function(a){return this.anims.chain(a)},stop:function(){return this.anims.stop()},stopAfterDelay:function(a){return this.anims.stopAfterDelay(a)},stopAfterRepeat:function(a){return this.anims.stopAfterRepeat(a)},stopOnFrame:function(a){return this.anims.stopOnFrame(a)},toJSON:function(){return c.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});h.exports=r},27573:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){y.addToRenderList(d),e.batchSprite(d,d.frame,y,c)};h.exports=S},89219:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(32291),c=e(99325),u=e(20494),l=e(13747);c.register("sprite",function(r,a){r===void 0&&(r={});var v=u(r,"key",null),o=u(r,"frame",null),p=new l(this.scene,0,0,v,o);return a!==void 0&&(r.add=a),d(this.scene,p,r),y(p,r),p})},66135:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(13747);d.register("sprite",function(c,u,l,r){return this.displayList.add(new y(this.scene,c,u,l,r))})},20791:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(21034),c=e(27573),h.exports={renderWebGL:y,renderCanvas:c}},21034:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){y.addToRenderList(d),d.pipeline.batchSprite(d,y,c)};h.exports=S},32979:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=e.canvas,u=e.context,l=e.style,r=[],a=0,v=y.length;l.maxLines>0&&l.maxLines<y.length&&(v=l.maxLines),l.syncFont(c,u);for(var o=0;o<v;o++){var p=l.strokeThickness;p+=u.measureText(y[o]).width,l.wordWrap&&(p-=u.measureText(" ").width),r[o]=Math.ceil(p),a=Math.max(a,r[o])}var m=d.fontSize+l.strokeThickness,g=m*v,x=e.lineSpacing;return v>1&&(g+=x*(v-1)),{width:a,height:g,lines:v,lineWidths:r,lineSpacing:x,lineHeight:m}};h.exports=S},27030:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),y=function(c){var u=d.create(this),l=u.getContext("2d",{willReadFrequently:!0});c.syncFont(u,l);var r=l.measureText(c.testString);if("actualBoundingBoxAscent"in r){var a=r.actualBoundingBoxAscent,v=r.actualBoundingBoxDescent;return d.remove(u),{ascent:a,descent:v,fontSize:a+v}}var o=Math.ceil(r.width*c.baselineX),p=o,m=2*p;p=p*c.baselineY|0,u.width=o,u.height=m,l.fillStyle="#f00",l.fillRect(0,0,o,m),l.font=c._font,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(c.testString,0,p);var g={ascent:0,descent:0,fontSize:0},x=l.getImageData(0,0,o,m);if(!x)return g.ascent=p,g.descent=p+6,g.fontSize=g.ascent+g.descent,d.remove(u),g;var C=x.data,M=C.length,R=o*4,P,w,A=0,G=!1;for(P=0;P<p;P++){for(w=0;w<R;w+=4)if(C[A+w]!==255){G=!0;break}if(!G)A+=R;else break}for(g.ascent=p-P,A=M-R,G=!1,P=m;P>p;P--){for(w=0;w<R;w+=4)if(C[A+w]!==255){G=!0;break}if(!G)A-=R;else break}return g.descent=P-p,g.fontSize=g.ascent+g.descent,d.remove(u),g};h.exports=y},76555:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99584),y=e(61068),c=e(56694),u=e(64937),l=e(89980),r=e(32979),a=e(10850),v=e(55638),o=e(80032),p=e(74744),m=new c({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,o],initialize:function(x,C,M,R,P){C===void 0&&(C=0),M===void 0&&(M=0),l.call(this,x,"Text"),this.renderer=x.sys.renderer,this.setPosition(C,M),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=y.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.style=new p(this,P),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(R),P&&P.padding&&this.setPadding(P.padding),P&&P.lineSpacing&&this.setLineSpacing(P.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",d(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(g){var x=this.style;if(x.wordWrapCallback){var C=x.wordWrapCallback.call(x.wordWrapCallbackScope,g,this);return Array.isArray(C)&&(C=C.join(`
`)),C}else return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(g,this.context,this.style.wordWrapWidth):this.basicWordWrap(g,this.context,this.style.wordWrapWidth):g},advancedWordWrap:function(g,x,C){for(var M="",R=g.replace(/ +/gi," ").split(this.splitRegExp),P=R.length,w=0;w<P;w++){var A=R[w],G="";A=A.replace(/^ *|\s*$/gi,"");var O=x.measureText(A).width;if(O<C){M+=A+`
`;continue}for(var L=C,I=A.split(" "),F=0;F<I.length;F++){var D=I[F],V=D+" ",k=x.measureText(V).width;if(k>L){if(F===0){for(var W=V;W.length&&(W=W.slice(0,-1),k=x.measureText(W).width,!(k<=L)););if(!W.length)throw new Error("wordWrapWidth < a single character");var X=D.substr(W.length);I[F]=X,G+=W}var H=I[F].length?F:F+1,$=I.slice(H).join(" ").replace(/[ \n]*$/gi,"");R.splice(w+1,0,$),P=R.length;break}else G+=V,L-=k}M+=G.replace(/[ \n]*$/gi,"")+`
`}return M=M.replace(/[\s|\n]*$/gi,""),M},basicWordWrap:function(g,x,C){for(var M="",R=g.split(this.splitRegExp),P=R.length-1,w=x.measureText(" ").width,A=0;A<=P;A++){for(var G=C,O=R[A].split(" "),L=O.length-1,I=0;I<=L;I++){var F=O[I],D=x.measureText(F).width,V=D;I<L&&(V+=w),V>G&&I>0&&(M+=`
`,G=C),M+=F,I<L?(M+=" ",G-=V):G-=D}A<P&&(M+=`
`)}return M},getWrappedText:function(g){g===void 0&&(g=this._text),this.style.syncFont(this.canvas,this.context);var x=this.runWordWrap(g);return x.split(this.splitRegExp)},setText:function(g){return!g&&g!==0&&(g=""),Array.isArray(g)&&(g=g.join(`
`)),g!==this._text&&(this._text=g.toString(),this.updateText()),this},appendText:function(g,x){x===void 0&&(x=!0),!g&&g!==0&&(g=""),Array.isArray(g)&&(g=g.join(`
`)),g=g.toString();var C=this._text.concat(x?`
`+g:g);return C!==this._text&&(this._text=C,this.updateText()),this},setStyle:function(g){return this.style.setStyle(g)},setFont:function(g){return this.style.setFont(g)},setFontFamily:function(g){return this.style.setFontFamily(g)},setFontSize:function(g){return this.style.setFontSize(g)},setFontStyle:function(g){return this.style.setFontStyle(g)},setFixedSize:function(g,x){return this.style.setFixedSize(g,x)},setBackgroundColor:function(g){return this.style.setBackgroundColor(g)},setFill:function(g){return this.style.setFill(g)},setColor:function(g){return this.style.setColor(g)},setStroke:function(g,x){return this.style.setStroke(g,x)},setShadow:function(g,x,C,M,R,P){return this.style.setShadow(g,x,C,M,R,P)},setShadowOffset:function(g,x){return this.style.setShadowOffset(g,x)},setShadowColor:function(g){return this.style.setShadowColor(g)},setShadowBlur:function(g){return this.style.setShadowBlur(g)},setShadowStroke:function(g){return this.style.setShadowStroke(g)},setShadowFill:function(g){return this.style.setShadowFill(g)},setWordWrapWidth:function(g,x){return this.style.setWordWrapWidth(g,x)},setWordWrapCallback:function(g,x){return this.style.setWordWrapCallback(g,x)},setAlign:function(g){return this.style.setAlign(g)},setResolution:function(g){return this.style.setResolution(g)},setLineSpacing:function(g){return this.lineSpacing=g,this.updateText()},setPadding:function(g,x,C,M){if(typeof g=="object"){var R=g,P=a(R,"x",null);P!==null?(g=P,C=P):(g=a(R,"left",0),C=a(R,"right",g));var w=a(R,"y",null);w!==null?(x=w,M=w):(x=a(R,"top",0),M=a(R,"bottom",x))}else g===void 0&&(g=0),x===void 0&&(x=g),C===void 0&&(C=g),M===void 0&&(M=x);return this.padding.left=g,this.padding.top=x,this.padding.right=C,this.padding.bottom=M,this.updateText()},setMaxLines:function(g){return this.style.setMaxLines(g)},updateText:function(){var g=this.canvas,x=this.context,C=this.style,M=C.resolution,R=C.metrics;C.syncFont(g,x);var P=this._text;(C.wordWrapWidth||C.wordWrapCallback)&&(P=this.runWordWrap(this._text));var w=P.split(this.splitRegExp),A=r(this,R,w),G=this.padding,O;C.fixedWidth===0?(this.width=A.width+G.left+G.right,O=A.width):(this.width=C.fixedWidth,O=this.width-G.left-G.right,O<A.width&&(O=A.width)),C.fixedHeight===0?this.height=A.height+G.top+G.bottom:this.height=C.fixedHeight;var L=this.width,I=this.height;this.updateDisplayOrigin(),L*=M,I*=M,L=Math.max(L,1),I=Math.max(I,1),g.width!==L||g.height!==I?(g.width=L,g.height=I,this.frame.setSize(L,I),C.syncFont(g,x),C.rtl&&(x.direction="rtl")):x.clearRect(0,0,L,I),x.save(),x.scale(M,M),C.backgroundColor&&(x.fillStyle=C.backgroundColor,x.fillRect(0,0,L,I)),C.syncStyle(g,x),x.translate(G.left,G.top);for(var F,D,V=0;V<A.lines;V++){if(F=C.strokeThickness/2,D=C.strokeThickness/2+V*A.lineHeight+R.ascent,V>0&&(D+=A.lineSpacing*V),C.rtl)F=L-F-G.left-G.right;else if(C.align==="right")F+=O-A.lineWidths[V];else if(C.align==="center")F+=(O-A.lineWidths[V])/2;else if(C.align==="justify"){var k=.85;if(A.lineWidths[V]/A.width>=k){var W=A.width-A.lineWidths[V],X=x.measureText(" ").width,H=w[V].trim(),$=H.split(" ");W+=(w[V].length-H.length)*X;for(var z=Math.floor(W/X),b=0;z>0;)$[b]+=" ",b=(b+1)%($.length-1||1),--z;w[V]=$.join(" ")}}this.autoRound&&(F=Math.round(F),D=Math.round(D)),C.strokeThickness&&(C.syncShadow(x,C.shadowStroke),x.strokeText(w[V],F,D)),C.color&&(C.syncShadow(x,C.shadowFill),x.fillText(w[V],F,D))}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(g,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var B=this.input;return B&&!B.customHitArea&&(B.hitArea.width=this.width,B.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(g){this.setText(g)}},toJSON:function(){var g=u.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return g.data=x,g},preDestroy:function(){this.style.rtl&&v(this.canvas),y.remove(this.canvas),this.texture.destroy()}});h.exports=m},71649:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){d.width===0||d.height===0||(y.addToRenderList(d),e.batchSprite(d,d.frame,y,c))};h.exports=S},75397:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(76555);y.register("text",function(l,r){l===void 0&&(l={});var a=c(l,"text",""),v=c(l,"style",null),o=c(l,"padding",null);o!==null&&(v.padding=o);var p=new u(this.scene,0,0,a,v);return r!==void 0&&(l.add=r),d(this.scene,p,l),p.autoRound=c(l,"autoRound",!0),p.resolution=c(l,"resolution",1),p})},94627:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(76555),y=e(61286);y.register("text",function(c,u,l,r){return this.displayList.add(new d(this.scene,c,u,l,r))})},80032:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(76128),c=e(71649),h.exports={renderWebGL:y,renderCanvas:c}},74744:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(20494),c=e(10850),u=e(27030),l={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new d({initialize:function(v,o){this.parent=v,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(o,!1,!0)},setStyle:function(a,v,o){v===void 0&&(v=!0),o===void 0&&(o=!1),a&&a.hasOwnProperty("fontSize")&&typeof a.fontSize=="number"&&(a.fontSize=a.fontSize.toString()+"px");for(var p in l){var m=o?l[p][1]:this[p];p==="wordWrapCallback"||p==="wordWrapCallbackScope"?this[p]=c(a,l[p][0],m):this[p]=y(a,l[p][0],m)}var g=c(a,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var x=c(a,"fill",null);x!==null&&(this.color=x);var C=c(a,"metrics",!1);return C?this.metrics={ascent:c(C,"ascent",0),descent:c(C,"descent",0),fontSize:c(C,"fontSize",0)}:(v||!this.metrics)&&(this.metrics=u(this)),v?this.parent.updateText():this.parent},syncFont:function(a,v){v.font=this._font},syncStyle:function(a,v){v.textBaseline="alphabetic",v.fillStyle=this.color,v.strokeStyle=this.stroke,v.lineWidth=this.strokeThickness,v.lineCap="round",v.lineJoin="round"},syncShadow:function(a,v){v?(a.shadowOffsetX=this.shadowOffsetX,a.shadowOffsetY=this.shadowOffsetY,a.shadowColor=this.shadowColor,a.shadowBlur=this.shadowBlur):(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowColor=0,a.shadowBlur=0)},update:function(a){return a&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=u(this)),this.parent.updateText()},setFont:function(a,v){v===void 0&&(v=!0);var o=a,p="",m="";if(typeof a!="string")o=c(a,"fontFamily","Courier"),p=c(a,"fontSize","16px"),m=c(a,"fontStyle","");else{var g=a.split(" "),x=0;m=g.length>2?g[x++]:"",p=g[x++]||"16px",o=g[x++]||"Courier"}return(o!==this.fontFamily||p!==this.fontSize||m!==this.fontStyle)&&(this.fontFamily=o,this.fontSize=p,this.fontStyle=m,v&&this.update(!0)),this.parent},setFontFamily:function(a){return this.fontFamily!==a&&(this.fontFamily=a,this.update(!0)),this.parent},setFontStyle:function(a){return this.fontStyle!==a&&(this.fontStyle=a,this.update(!0)),this.parent},setFontSize:function(a){return typeof a=="number"&&(a=a.toString()+"px"),this.fontSize!==a&&(this.fontSize=a,this.update(!0)),this.parent},setTestString:function(a){return this.testString=a,this.update(!0)},setFixedSize:function(a,v){return this.fixedWidth=a,this.fixedHeight=v,a&&(this.parent.width=a),v&&(this.parent.height=v),this.update(!1)},setBackgroundColor:function(a){return this.backgroundColor=a,this.update(!1)},setFill:function(a){return this.color=a,this.update(!1)},setColor:function(a){return this.color=a,this.update(!1)},setResolution:function(a){return this.resolution=a,this.update(!1)},setStroke:function(a,v){return v===void 0&&(v=this.strokeThickness),a===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==a||this.strokeThickness!==v)&&(this.stroke=a,this.strokeThickness=v,this.update(!0)),this.parent},setShadow:function(a,v,o,p,m,g){return a===void 0&&(a=0),v===void 0&&(v=0),o===void 0&&(o="#000"),p===void 0&&(p=0),m===void 0&&(m=!1),g===void 0&&(g=!0),this.shadowOffsetX=a,this.shadowOffsetY=v,this.shadowColor=o,this.shadowBlur=p,this.shadowStroke=m,this.shadowFill=g,this.update(!1)},setShadowOffset:function(a,v){return a===void 0&&(a=0),v===void 0&&(v=a),this.shadowOffsetX=a,this.shadowOffsetY=v,this.update(!1)},setShadowColor:function(a){return a===void 0&&(a="#000"),this.shadowColor=a,this.update(!1)},setShadowBlur:function(a){return a===void 0&&(a=0),this.shadowBlur=a,this.update(!1)},setShadowStroke:function(a){return this.shadowStroke=a,this.update(!1)},setShadowFill:function(a){return this.shadowFill=a,this.update(!1)},setWordWrapWidth:function(a,v){return v===void 0&&(v=!1),this.wordWrapWidth=a,this.wordWrapUseAdvanced=v,this.update(!1)},setWordWrapCallback:function(a,v){return v===void 0&&(v=null),this.wordWrapCallback=a,this.wordWrapCallbackScope=v,this.update(!1)},setAlign:function(a){return a===void 0&&(a="left"),this.align=a,this.update(!1)},setMaxLines:function(a){return a===void 0&&(a=0),this.maxLines=a,this.update(!1)},getTextMetrics:function(){var a=this.metrics;return{ascent:a.ascent,descent:a.descent,fontSize:a.fontSize}},toJSON:function(){var a={};for(var v in l)a[v]=this[v];return a.metrics=this.getTextMetrics(),a},destroy:function(){this.parent=void 0}});h.exports=r},76128:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),y=function(c,u,l,r){if(!(u.width===0||u.height===0)){l.addToRenderList(u);var a=u.frame,v=a.width,o=a.height,p=d.getTintAppendFloatAlpha,m=c.pipelines.set(u.pipeline,u),g=m.setTexture2D(a.glTexture,u);m.batchTexture(u,a.glTexture,v,o,u.x,u.y,v/u.style.resolution,o/u.style.resolution,u.scaleX,u.scaleY,u.rotation,u.flipX,u.flipY,u.scrollFactorX,u.scrollFactorY,u.displayOriginX,u.displayOriginY,0,0,v,o,p(u.tintTopLeft,l.alpha*u._alphaTL),p(u.tintTopRight,l.alpha*u._alphaTR),p(u.tintBottomLeft,l.alpha*u._alphaBL),p(u.tintBottomRight,l.alpha*u._alphaBR),u.tintFill,0,0,l,r,!1,g)}};h.exports=y},35856:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),y=e(56694),c=e(64937),u=e(89980),l=e(3504),r=e(8213),a=e(9271),v=e(93736),o=8,p=new y({Extends:u,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Crop,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Tint,c.Transform,c.Visible,a],initialize:function(g,x,C,M,R,P,w){var A=g.sys.renderer;u.call(this,g,"TileSprite");var G=g.sys.textures.get(P),O=G.get(w);O.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),G=g.sys.textures.get("__MISSING"),O=G.get()),G.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),G=g.sys.textures.get("__MISSING"),O=G.get()),!M||!R?(M=O.width,R=O.height):(M=Math.floor(M),R=Math.floor(R)),this._tilePosition=new v,this._tileScale=new v(1,1),this.dirty=!1,this.renderer=A,this.canvas=d.create(this,M,R),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=G,this.displayFrame=O,this._crop=this.resetCropObject(),this.texture=g.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=l(O.width),this.potHeight=l(O.height),this.fillCanvas=d.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(x,C),this.setSize(M,R),this.setFrame(w),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(m,g){return this.displayTexture=this.scene.sys.textures.get(m),this.setFrame(g)},setFrame:function(m){var g=this.displayTexture.get(m);return this.potWidth=l(g.width),this.potHeight=l(g.height),this.canvas.width=0,!g.cutWidth||!g.cutHeight?this.renderFlags&=~o:this.renderFlags|=o,this.displayFrame=g,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(m,g){return m!==void 0&&(this.tilePositionX=m),g!==void 0&&(this.tilePositionY=g),this},setTileScale:function(m,g){return m===void 0&&(m=this.tileScaleX),g===void 0&&(g=m),this.tileScaleX=m,this.tileScaleY=g,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var m=this.displayFrame;if(m.source.isRenderTexture||m.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var g=this.fillContext,x=this.fillCanvas,C=this.potWidth,M=this.potHeight;(!this.renderer||!this.renderer.gl)&&(C=m.cutWidth,M=m.cutHeight),g.clearRect(0,0,C,M),x.width=C,x.height=M,g.drawImage(m.source.image,m.cutX,m.cutY,m.cutWidth,m.cutHeight,0,0,C,M),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(x,this.fillPattern):this.fillPattern=g.createPattern(x,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var m=this.canvas;if((m.width!==this.width||m.height!==this.height)&&(m.width=this.width,m.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var g=this.context;this.scene.sys.game.config.antialias||r.disable(g);var x=this._tileScale.x,C=this._tileScale.y,M=this._tilePosition.x,R=this._tilePosition.y;g.clearRect(0,0,this.width,this.height),g.save(),g.scale(x,C),g.translate(-M,-R),g.fillStyle=this.fillPattern,g.fillRect(M,R,this.width/x,this.height/C),g.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),d.remove(this.canvas),d.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(m){this._tilePosition.x=m,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(m){this._tilePosition.y=m,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(m){this._tileScale.x=m,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(m){this._tileScale.y=m,this.dirty=!0}}});h.exports=p},93305:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){d.updateCanvas(),y.addToRenderList(d),e.batchSprite(d,d.frame,y,c)};h.exports=S},63950:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(35856);y.register("tileSprite",function(l,r){l===void 0&&(l={});var a=c(l,"x",0),v=c(l,"y",0),o=c(l,"width",512),p=c(l,"height",512),m=c(l,"key",""),g=c(l,"frame",""),x=new u(this.scene,a,v,o,p,m,g);return r!==void 0&&(l.add=r),d(this.scene,x,l),x})},20509:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(35856),y=e(61286);y.register("tileSprite",function(c,u,l,r,a,v){return this.displayList.add(new d(this.scene,c,u,l,r,a,v))})},9271:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(74287),c=e(93305),h.exports={renderWebGL:y,renderCanvas:c}},74287:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),y=function(c,u,l,r){u.updateCanvas();var a=u.width,v=u.height;if(!(a===0||v===0)){l.addToRenderList(u);var o=d.getTintAppendFloatAlpha,p=c.pipelines.set(u.pipeline,u),m=p.setTexture2D(u.fillPattern,u);p.batchTexture(u,u.fillPattern,u.displayFrame.width*u.tileScaleX,u.displayFrame.height*u.tileScaleY,u.x,u.y,a,v,u.scaleX,u.scaleY,u.rotation,u.flipX,u.flipY,u.scrollFactorX,u.scrollFactorY,u.originX*a,u.originY*v,0,0,a,v,o(u.tintTopLeft,l.alpha*u._alphaTL),o(u.tintTopRight,l.alpha*u._alphaTR),o(u.tintBottomLeft,l.alpha*u._alphaBL),o(u.tintBottomRight,l.alpha*u._alphaBR),u.tintFill,u.tilePositionX%u.displayFrame.width/u.displayFrame.width,u.tilePositionY%u.displayFrame.height/u.displayFrame.height,l,r,!1,m)}};h.exports=y},8630:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=e(56694),c=e(64937),u=e(56631),l=e(97081),r=e(89980),a=e(83392),v=e(76038),o=e(76583),p=e(77974),m=new y({Extends:r,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.PostPipeline,c.ScrollFactor,c.Size,c.TextureCrop,c.Tint,c.Transform,c.Visible,p],initialize:function(x,C,M,R){r.call(this,x,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=o(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var P=x.sys.game;this._device=P.device.video,this.setPosition(C,M),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),P.events.on(l.PAUSE,this.globalPause,this),P.events.on(l.RESUME,this.globalResume,this);var w=x.sys.sound;w&&w.on(v.GLOBAL_MUTE,this.globalMute,this),R&&this.load(R)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(g){var x=this.scene.sys.cache.video.get(g);return x?(this.cacheKey=g,this.loadHandler(x.url,x.noAudio,x.crossOrigin)):console.warn("No video in cache for key: "+g),this},changeSource:function(g,x,C,M,R){x===void 0&&(x=!0),C===void 0&&(C=!1),this.cacheKey!==g&&(this.load(g),x&&this.play(C,M,R))},getVideoKey:function(){return this.cacheKey},loadURL:function(g,x,C){x===void 0&&(x=!1);var M=this._device.getVideoURL(g);return M?(this.cacheKey="",this.loadHandler(M.url,x,C)):console.warn("No supported video format found for "+g),this},loadMediaStream:function(g,x,C){return this.loadHandler(null,x,C,g)},loadHandler:function(g,x,C,M){x||(x=!1);var R=this.video;if(R?(this.removeLoadEventHandlers(),this.stop()):(R=document.createElement("video"),R.controls=!1,R.setAttribute("playsinline","playsinline"),R.setAttribute("preload","auto"),R.setAttribute("disablePictureInPicture","true")),x?(R.muted=!0,R.defaultMuted=!0,R.setAttribute("autoplay","autoplay")):(R.muted=!1,R.defaultMuted=!1,R.removeAttribute("autoplay")),C?R.setAttribute("crossorigin",C):R.removeAttribute("crossorigin"),M)if("srcObject"in R)try{R.srcObject=M}catch(P){if(P.name!=="TypeError")throw P;R.src=URL.createObjectURL(M)}else R.src=URL.createObjectURL(M);else R.src=g;return this.addLoadEventHandlers(),this.retry=0,this.video=R,this._playCalled=!1,R.load(),this},requestVideoFrame:function(g,x){var C=this.video;if(C){var M=x.width,R=x.height,P=this.videoTexture,w=this.videoTextureSource,A=!P||w.source!==C;A?(this._codePaused=C.paused,this._codeMuted=C.muted,P?(w.source=C,w.width=M,w.height=R,P.get().setSize(M,R)):(P=this.scene.sys.textures.create(this._key,C,M,R),P.add("__BASE",0,0,0,M,R),this.setTexture(P),this.videoTexture=P,this.videoTextureSource=P.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(u.VIDEO_TEXTURE,this,P)),this.setSizeToFrame(),this.updateDisplayOrigin()):w.update(),this.isStalled=!1,this.metadata=x;var G=x.mediaTime;A&&(this._lastUpdate=G,this.emit(u.VIDEO_CREATED,this,M,R),this.frameReady||(this.frameReady=!0,this.emit(u.VIDEO_PLAY,this))),this._playingMarker?G>=this._markerOut&&(C.loop?(C.currentTime=this._markerIn,this.emit(u.VIDEO_LOOP,this)):(this.stop(!1),this.emit(u.VIDEO_COMPLETE,this))):G<this._lastUpdate&&this.emit(u.VIDEO_LOOP,this),this._lastUpdate=G,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(g,x,C){x===void 0&&(x=-1),C===void 0&&(C=a.MAX_SAFE_INTEGER);var M=this.video;return!M||this.isPlaying()?(M||console.warn("Video not loaded"),this):(g===void 0&&(g=M.loop),M.loop=g,this._markerIn=x,this._markerOut=C,this._playingMarker=x>-1&&C>x&&C<a.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=M.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var g=this.video;g&&(g.addEventListener("error",this._loadCallbackHandler),g.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var g=this.video;g&&(g.removeEventListener("error",this._loadCallbackHandler),g.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var g=this.video;if(g){var x=this._callbacks;for(var C in x)g.addEventListener(C,x[C])}},removeEventHandlers:function(){var g=this.video;if(g){var x=this._callbacks;for(var C in x)g.removeEventListener(C,x[C])}},createPlayPromise:function(g){g===void 0&&(g=!0);var x=this.video,C=x.play();if(C!==void 0){var M=this.playSuccess.bind(this),R=this.playError.bind(this);if(!g){var P=this;R=function(){P.failedPlayAttempts++}}C.then(M).catch(R)}else x.addEventListener("playing",this._callbacks.legacy),g||this.failedPlayAttempts++},addMarker:function(g,x,C){return!isNaN(x)&&x>=0&&!isNaN(C)&&C>x&&(this.markers[g]=[x,C]),this},playMarker:function(g,x){var C=this.markers[g];return C&&this.play(x,C[0],C[1]),this},removeMarker:function(g){return delete this.markers[g],this},snapshot:function(g,x){return g===void 0&&(g=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,g,x)},snapshotArea:function(g,x,C,M,R,P){g===void 0&&(g=0),x===void 0&&(x=0),C===void 0&&(C=this.width),M===void 0&&(M=this.height),R===void 0&&(R=C),P===void 0&&(P=M);var w=this.video,A=this.snapshotTexture;return A?(A.setSize(R,P),w&&A.context.drawImage(w,g,x,C,M,0,0,R,P)):(A=this.scene.sys.textures.createCanvas(o(),R,P),this.snapshotTexture=A,w&&A.context.drawImage(w,g,x,C,M,0,0,R,P)),A.update()},saveSnapshotTexture:function(g){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,g):this.snapshotTexture=this.scene.sys.textures.createCanvas(g,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(u.VIDEO_UNLOCKED,this));var g=this.scene.sys.sound;g&&g.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(g){var x=g.name;x==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(u.VIDEO_LOCKED,this)):x==="NotSupportedError"?(this.stop(!1),this.emit(u.VIDEO_UNSUPPORTED,this,g)):(this.stop(!1),this.emit(u.VIDEO_ERROR,this,g))},legacyPlayHandler:function(){var g=this.video;g&&(this.playSuccess(),g.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(u.VIDEO_PLAYING,this)},loadErrorHandler:function(g){this.stop(!1),this.emit(u.VIDEO_ERROR,this,g)},stalledHandler:function(g){this.isStalled=!0,this.emit(u.VIDEO_STALLED,this,g)},completeHandler:function(){this._playCalled=!1,this.emit(u.VIDEO_COMPLETE,this)},preUpdate:function(g,x){var C=this.video;!C||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=x,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(g){var x=this.video;if(x){var C=x.duration;if(C!==1/0&&!isNaN(C)){var M=C*g;this.setCurrentTime(M)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(g){var x=this.video;if(x){if(typeof g=="string"){var C=g[0],M=parseFloat(g.substr(1));C==="+"?g=x.currentTime+M:C==="-"&&(g=x.currentTime-M)}x.currentTime=g}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(u.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(u.VIDEO_SEEKED,this)},getProgress:function(){var g=this.video;if(g){var x=g.duration;if(x!==1/0&&!isNaN(x))return g.currentTime/x}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(g){g===void 0&&(g=!0),this._codeMuted=g;var x=this.video;return x&&(x.muted=this._systemMuted?!0:g),this},isMuted:function(){return this._codeMuted},globalMute:function(g,x){this._systemMuted=x;var C=this.video;C&&(C.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(g){g===void 0&&(g=!0);var x=this.video;return this._codePaused=g,x&&!x.ended&&(g?x.paused||(this.removeEventHandlers(),x.pause()):g||(this._playCalled?x.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(g){return g===void 0&&(g=1),this.video&&(this.video.volume=d(g,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(g){return this.video&&(this.video.playbackRate=g),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(g){return g===void 0&&(g=!0),this.video&&(this.video.loop=g),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(g,x){return x===void 0&&(x=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,g),this.videoTextureSource.setFlipY(x)),this._key=g,this.flipY=x,!!this.videoTexture},stop:function(g){g===void 0&&(g=!0);var x=this.video;return x&&(this.removeEventHandlers(),x.cancelVideoFrameCallback(this._rfvCallbackId),x.pause()),this.retry=0,this._playCalled=!1,g&&this.emit(u.VIDEO_STOP,this),this},removeVideoElement:function(){var g=this.video;if(g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);g.removeAttribute("autoplay"),g.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var g=this.scene.sys.game.events;g.off(l.PAUSE,this.globalPause,this),g.off(l.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(v.GLOBAL_MUTE,this.globalMute,this)}});h.exports=m},56933:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){d.videoTexture&&(y.addToRenderList(d),e.batchSprite(d,d.frame,y,c))};h.exports=S},65601:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),y=e(99325),c=e(20494),u=e(8630);y.register("video",function(l,r){l===void 0&&(l={});var a=c(l,"key",null),v=new u(this.scene,0,0,a);return r!==void 0&&(l.add=r),d(this.scene,v,l),v})},215:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8630),y=e(61286);y.register("video",function(c,u,l){return this.displayList.add(new d(this.scene,c,u,l))})},77974:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(83572),c=e(56933),h.exports={renderWebGL:y,renderCanvas:c}},83572:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){d.videoTexture&&(y.addToRenderList(d),d.pipeline.batchSprite(d,y,c))};h.exports=S},71030:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),y=e(26673),c=e(65650),u=e(56694),l=e(64937),r=e(89980),a=e(74118),v=e(94287),o=new u({Extends:r,Mixins:[l.Depth,l.GetBounds,l.Origin,l.Transform,l.ScrollFactor,l.Visible],initialize:function(m,g,x,C,M){C===void 0&&(C=1),M===void 0&&(M=C),r.call(this,m,"Zone"),this.setPosition(g,x),this.width=C,this.height=M,this.blendMode=d.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(p){this.scaleX=p/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(p){this.scaleY=p/this.height}},setSize:function(p,m,g){g===void 0&&(g=!0),this.width=p,this.height=m,this.updateDisplayOrigin();var x=this.input;return g&&x&&!x.customHitArea&&(x.hitArea.width=p,x.hitArea.height=m),this},setDisplaySize:function(p,m){return this.displayWidth=p,this.displayHeight=m,this},setCircleDropZone:function(p){return this.setDropZone(new y(0,0,p),c)},setRectangleDropZone:function(p,m){return this.setDropZone(new a(0,0,p,m),v)},setDropZone:function(p,m){return this.input||this.setInteractive(p,m,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(p,m,g){g.addToRenderList(m)},renderWebGL:function(p,m,g){g.addToRenderList(m)}});h.exports=o},24067:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),y=e(20494),c=e(71030);d.register("zone",function(u){var l=y(u,"x",0),r=y(u,"y",0),a=y(u,"width",1),v=y(u,"height",a);return new c(this.scene,l,r,a,v)})},34546:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(71030),y=e(61286);y.register("zone",function(c,u,l,r){return this.displayList.add(new d(this.scene,c,u,l,r))})},95847:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};h.exports=S},26673:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(65650),c=e(94026),u=e(62941),l=e(52394),r=e(30977),a=new d({initialize:function(o,p,m){o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=0),this.type=l.CIRCLE,this.x=o,this.y=p,this._radius=m,this._diameter=m*2},contains:function(v,o){return y(this,v,o)},getPoint:function(v,o){return c(this,v,o)},getPoints:function(v,o,p){return u(this,v,o,p)},getRandomPoint:function(v){return r(this,v)},setTo:function(v,o,p){return this.x=v,this.y=o,this._radius=p,this._diameter=p*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(v,o){return o===void 0&&(o=v),this.x=v,this.y=o,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this._diameter=v*2}},diameter:{get:function(){return this._diameter},set:function(v){this._diameter=v,this._radius=v*.5}},left:{get:function(){return this.x-this._radius},set:function(v){this.x=v+this._radius}},right:{get:function(){return this.x+this._radius},set:function(v){this.x=v-this._radius}},top:{get:function(){return this.y-this._radius},set:function(v){this.y=v+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(v){this.y=v-this._radius}}});h.exports=a},37964:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return 2*(Math.PI*e.radius)};h.exports=S},72233:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u,l){return l===void 0&&(l=new d),l.x=c.x+c.radius*Math.cos(u),l.y=c.y+c.radius*Math.sin(u),l};h.exports=y},61761:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),y=function(c){return new d(c.x,c.y,c.radius)};h.exports=y},65650:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(e.radius>0&&d>=e.left&&d<=e.right&&y>=e.top&&y<=e.bottom){var c=(e.x-d)*(e.x-d),u=(e.y-y)*(e.y-y);return c+u<=e.radius*e.radius}else return!1};h.exports=S},39187:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),y=function(c,u){return d(c,u.x,u.y)};h.exports=y},58672:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),y=function(c,u){return d(c,u.x,u.y)&&d(c,u.right,u.y)&&d(c,u.x,u.bottom)&&d(c,u.right,u.bottom)};h.exports=y},42997:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d.setTo(e.x,e.y,e.radius)};h.exports=S},94894:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x===d.x&&e.y===d.y&&e.radius===d.radius};h.exports=S},48027:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=function(c,u){return u===void 0&&(u=new d),u.x=c.left,u.y=c.top,u.width=c.diameter,u.height=c.diameter,u};h.exports=y},94026:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72233),y=e(91806),c=e(83392),u=e(79967),l=function(r,a,v){v===void 0&&(v=new u);var o=y(a,0,c.PI2);return d(r,o,v)};h.exports=l},62941:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(37964),y=e(72233),c=e(91806),u=e(83392),l=function(r,a,v,o){o===void 0&&(o=[]),!a&&v>0&&(a=d(r)/v);for(var p=0;p<a;p++){var m=c(p/a,0,u.PI2);o.push(y(r,m))}return o};h.exports=l},34585:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e.x+=d,e.y+=y,e};h.exports=S},88665:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x+=d.x,e.y+=d.y,e};h.exports=S},30977:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){u===void 0&&(u=new d);var l=2*Math.PI*Math.random(),r=Math.random()+Math.random(),a=r>1?2-r:r,v=a*Math.cos(l),o=a*Math.sin(l);return u.x=c.x+v*c.radius,u.y=c.y+o*c.radius,u};h.exports=y},6112:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673);d.Area=e(95847),d.Circumference=e(37964),d.CircumferencePoint=e(72233),d.Clone=e(61761),d.Contains=e(65650),d.ContainsPoint=e(39187),d.ContainsRect=e(58672),d.CopyFrom=e(42997),d.Equals=e(94894),d.GetBounds=e(48027),d.GetPoint=e(94026),d.GetPoints=e(62941),d.Offset=e(34585),d.OffsetPoint=e(88665),d.Random=e(30977),h.exports=d},52394:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};h.exports=S},58605:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};h.exports=S},39507:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d=e.width/2,y=e.height/2,c=Math.pow(d-y,2)/Math.pow(d+y,2);return Math.PI*(d+y)*(1+3*c/(10+Math.sqrt(4-3*c)))};h.exports=S},86998:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u,l){l===void 0&&(l=new d);var r=c.width/2,a=c.height/2;return l.x=c.x+r*Math.cos(u),l.y=c.y+a*Math.sin(u),l};h.exports=y},81773:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95669),y=function(c){return new d(c.x,c.y,c.width,c.height)};h.exports=y},72313:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(e.width<=0||e.height<=0)return!1;var c=(d-e.x)/e.width,u=(y-e.y)/e.height;return c*=c,u*=u,c+u<.25};h.exports=S},34368:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72313),y=function(c,u){return d(c,u.x,u.y)};h.exports=y},71431:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72313),y=function(c,u){return d(c,u.x,u.y)&&d(c,u.right,u.y)&&d(c,u.x,u.bottom)&&d(c,u.right,u.bottom)};h.exports=y},75459:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d.setTo(e.x,e.y,e.width,e.height)};h.exports=S},95669:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72313),c=e(95340),u=e(54978),l=e(52394),r=e(72006),a=new d({initialize:function(o,p,m,g){o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=0),g===void 0&&(g=0),this.type=l.ELLIPSE,this.x=o,this.y=p,this.width=m,this.height=g},contains:function(v,o){return y(this,v,o)},getPoint:function(v,o){return c(this,v,o)},getPoints:function(v,o,p){return u(this,v,o,p)},getRandomPoint:function(v){return r(this,v)},setTo:function(v,o,p,m){return this.x=v,this.y=o,this.width=p,this.height=m,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(v,o){return o===void 0&&(o=v),this.x=v,this.y=o,this},setSize:function(v,o){return o===void 0&&(o=v),this.width=v,this.height=o,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(v){this.x=v+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(v){this.x=v-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(v){this.y=v+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(v){this.y=v-this.height/2}}});h.exports=a},98068:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x===d.x&&e.y===d.y&&e.width===d.width&&e.height===d.height};h.exports=S},72897:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=function(c,u){return u===void 0&&(u=new d),u.x=c.left,u.y=c.top,u.width=c.width,u.height=c.height,u};h.exports=y},95340:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86998),y=e(91806),c=e(83392),u=e(79967),l=function(r,a,v){v===void 0&&(v=new u);var o=y(a,0,c.PI2);return d(r,o,v)};h.exports=l},54978:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(39507),y=e(86998),c=e(91806),u=e(83392),l=function(r,a,v,o){o===void 0&&(o=[]),!a&&v>0&&(a=d(r)/v);for(var p=0;p<a;p++){var m=c(p/a,0,u.PI2);o.push(y(r,m))}return o};h.exports=l},77951:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e.x+=d,e.y+=y,e};h.exports=S},36233:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x+=d.x,e.y+=d.y,e};h.exports=S},72006:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){u===void 0&&(u=new d);var l=Math.random()*Math.PI*2,r=Math.sqrt(Math.random());return u.x=c.x+r*Math.cos(l)*c.width/2,u.y=c.y+r*Math.sin(l)*c.height/2,u};h.exports=y},40652:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95669);d.Area=e(58605),d.Circumference=e(39507),d.CircumferencePoint=e(86998),d.Clone=e(81773),d.Contains=e(72313),d.ContainsPoint=e(34368),d.ContainsRect=e(71431),d.CopyFrom=e(75459),d.Equals=e(98068),d.GetBounds=e(72897),d.GetPoint=e(95340),d.GetPoints=e(54978),d.Offset=e(77951),d.OffsetPoint=e(36233),d.Random=e(72006),h.exports=d},84068:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(52394),y=e(98611),c={Circle:e(6112),Ellipse:e(40652),Intersects:e(7563),Line:e(28482),Mesh:e(14293),Point:e(63472),Polygon:e(44359),Rectangle:e(66658),Triangle:e(87619)};c=y(!1,c,d),h.exports=c},22184:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53996),y=function(c,u){return d(c.x,c.y,u.x,u.y)<=c.radius+u.radius};h.exports=y},26535:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=d.width/2,c=d.height/2,u=Math.abs(e.x-d.x-y),l=Math.abs(e.y-d.y-c),r=y+e.radius,a=c+e.radius;if(u>r||l>a)return!1;if(u<=y||l<=c)return!0;var v=u-y,o=l-c,p=v*v,m=o*o,g=e.radius*e.radius;return p+m<=g};h.exports=S},71145:(h,S,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=e(22184),c=function(u,l,r){if(r===void 0&&(r=[]),y(u,l)){var a=u.x,v=u.y,o=u.radius,p=l.x,m=l.y,g=l.radius,x,C,M,R,P;if(v===m)P=(g*g-o*o-p*p+a*a)/(2*(a-p)),x=1,C=-2*m,M=p*p+P*P-2*p*P+m*m-g*g,R=C*C-4*x*M,R===0?r.push(new d(P,-C/(2*x))):R>0&&(r.push(new d(P,(-C+Math.sqrt(R))/(2*x))),r.push(new d(P,(-C-Math.sqrt(R))/(2*x))));else{var w=(a-p)/(v-m),A=(g*g-o*o-p*p+a*a-m*m+v*v)/(2*(v-m));x=w*w+1,C=2*v*w-2*A*w-2*a,M=a*a+v*v+A*A-o*o-2*v*A,R=C*C-4*x*M,R===0?(P=-C/(2*x),r.push(new d(P,A-P*w))):R>0&&(P=(-C+Math.sqrt(R))/(2*x),r.push(new d(P,A-P*w)),P=(-C-Math.sqrt(R))/(2*x),r.push(new d(P,A-P*w)))}}return r};h.exports=c},62508:(h,S,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26111),y=e(26535),c=function(u,l,r){if(r===void 0&&(r=[]),y(u,l)){var a=l.getLineA(),v=l.getLineB(),o=l.getLineC(),p=l.getLineD();d(a,u,r),d(v,u,r),d(o,u,r),d(p,u,r)}return r};h.exports=c},26111:(h,S,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=e(61472),c=function(u,l,r){if(r===void 0&&(r=[]),y(u,l)){var a=u.x1,v=u.y1,o=u.x2,p=u.y2,m=l.x,g=l.y,x=l.radius,C=o-a,M=p-v,R=a-m,P=v-g,w=C*C+M*M,A=2*(C*R+M*P),G=R*R+P*P-x*x,O=A*A-4*w*G,L,I;if(O===0){var F=-A/(2*w);L=a+F*C,I=v+F*M,F>=0&&F<=1&&r.push(new d(L,I))}else if(O>0){var D=(-A-Math.sqrt(O))/(2*w);L=a+D*C,I=v+D*M,D>=0&&D<=1&&r.push(new d(L,I));var V=(-A+Math.sqrt(O))/(2*w);L=a+V*C,I=v+V*M,V>=0&&V<=1&&r.push(new d(L,I))}}return r};h.exports=c},96537:(h,S,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70015),y=function(c,u,l,r){l===void 0&&(l=!1);var a=c.x1,v=c.y1,o=c.x2,p=c.y2,m=u.x1,g=u.y1,x=u.x2,C=u.y2,M=o-a,R=p-v,P=x-m,w=C-g,A=M*w-R*P;if(A===0)return null;var G,O,L;if(l){if(G=(M*(g-v)+R*(a-m))/(P*R-w*M),O=(m+P*G-a)/M,O<0||G<0||G>1)return null;L=O}else{if(G=((m-a)*w-(g-v)*P)/A,O=((v-g)*M-(a-m)*R)/A,G<0||G>1||O<0||O>1)return null;L=G}return r===void 0&&(r=new d),r.set(a+M*L,v+R*L,L)};h.exports=y},17647:(h,S,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(96537),y=e(88829),c=e(70015),u=new y,l=new c,r=function(a,v,o,p){o===void 0&&(o=!1),p===void 0&&(p=new c);var m=!1;p.set(),l.set();for(var g=v[0],x=1;x<v.length;x++){var C=v[x];u.setTo(g.x,g.y,C.x,C.y),g=C,d(a,u,o,l)&&(!m||l.z<p.z)&&(p.copy(l),m=!0)}return m?p:null};h.exports=r},68439:(h,S,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70015),y=e(51729),c=e(17647),u=new d,l=function(r,a,v,o){o===void 0&&(o=new y),Array.isArray(a)||(a=[a]);var p=!1;o.set(),u.set();for(var m=0;m<a.length;m++)c(r,a[m].points,v,u)&&(!p||u.z<o.z)&&(o.set(u.x,u.y,u.z,m),p=!0);return p?o:null};h.exports=l},9569:(h,S,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=e(25227),c=e(47910),u=function(l,r,a){if(a===void 0&&(a=[]),c(l,r))for(var v=r.getLineA(),o=r.getLineB(),p=r.getLineC(),m=r.getLineD(),g=[new d,new d,new d,new d],x=[y(v,l,g[0]),y(o,l,g[1]),y(p,l,g[2]),y(m,l,g[3])],C=0;C<4;C++)x[C]&&a.push(g[C]);return a};h.exports=u},7449:(h,S,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(51729),y=e(68439),c=e(88829),u=new c;function l(v,o,p,m,g){var x=Math.cos(v),C=Math.sin(v);u.setTo(o,p,o+x,p+C);var M=y(u,m,!0);M&&g.push(new d(M.x,M.y,v,M.w))}function r(v,o){return v.z-o.z}var a=function(v,o,p){Array.isArray(p)||(p=[p]);for(var m=[],g=[],x=0;x<p.length;x++)for(var C=p[x].points,M=0;M<C.length;M++){var R=Math.atan2(C[M].y-o,C[M].x-v);g.indexOf(R)===-1&&(l(R,v,o,p,m),l(R-1e-5,v,o,p,m),l(R+1e-5,v,o,p,m),g.push(R))}return m.sort(r)};h.exports=a},82931:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=e(90205),c=function(u,l,r){return r===void 0&&(r=new d),y(u,l)&&(r.x=Math.max(u.x,l.x),r.y=Math.max(u.y,l.y),r.width=Math.min(u.right,l.right)-r.x,r.height=Math.min(u.bottom,l.bottom)-r.y),r};h.exports=c},1946:(h,S,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(9569),y=e(90205),c=function(u,l,r){if(r===void 0&&(r=[]),y(u,l)){var a=u.getLineA(),v=u.getLineB(),o=u.getLineC(),p=u.getLineD();d(a,l,r),d(v,l,r),d(o,l,r),d(p,l,r)}return r};h.exports=c},34211:(h,S,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(20370),y=e(9569),c=function(u,l,r){if(r===void 0&&(r=[]),d(u,l)){var a=l.getLineA(),v=l.getLineB(),o=l.getLineC();y(a,u,r),y(v,u,r),y(o,u,r)}return r};h.exports=c},80511:(h,S,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26111),y=e(48411),c=function(u,l,r){if(r===void 0&&(r=[]),y(u,l)){var a=u.getLineA(),v=u.getLineB(),o=u.getLineC();d(a,l,r),d(v,l,r),d(o,l,r)}return r};h.exports=c},31343:(h,S,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=e(86117),c=e(25227),u=function(l,r,a){if(a===void 0&&(a=[]),y(l,r))for(var v=l.getLineA(),o=l.getLineB(),p=l.getLineC(),m=[new d,new d,new d],g=[c(v,r,m[0]),c(o,r,m[1]),c(p,r,m[2])],x=0;x<3;x++)g[x]&&a.push(m[x]);return a};h.exports=u},70534:(h,S,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23589),y=e(31343),c=function(u,l,r){if(r===void 0&&(r=[]),d(u,l)){var a=l.getLineA(),v=l.getLineB(),o=l.getLineC();y(u,a,r),y(u,v,r),y(u,o,r)}return r};h.exports=c},61472:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),y=e(79967),c=new y,u=function(l,r,a){if(a===void 0&&(a=c),d(r,l.x1,l.y1))return a.x=l.x1,a.y=l.y1,!0;if(d(r,l.x2,l.y2))return a.x=l.x2,a.y=l.y2,!0;var v=l.x2-l.x1,o=l.y2-l.y1,p=r.x-l.x1,m=r.y-l.y1,g=v*v+o*o,x=v,C=o;if(g>0){var M=(p*v+m*o)/g;x*=M,C*=M}a.x=l.x1+x,a.y=l.y1+C;var R=x*x+C*C;return R<=g&&x*v+C*o>=0&&d(r,a.x,a.y)};h.exports=u},25227:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=e.x1,u=e.y1,l=e.x2,r=e.y2,a=d.x1,v=d.y1,o=d.x2,p=d.y2;if(c===l&&u===r||a===o&&v===p)return!1;var m=(p-v)*(l-c)-(o-a)*(r-u);if(m===0)return!1;var g=((o-a)*(u-v)-(p-v)*(c-a))/m,x=((l-c)*(u-v)-(r-u)*(c-a))/m;return g<0||g>1||x<0||x>1?!1:(y&&(y.x=c+g*(l-c),y.y=u+g*(r-u)),!0)};h.exports=S},47910:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.x1,c=e.y1,u=e.x2,l=e.y2,r=d.x,a=d.y,v=d.right,o=d.bottom,p=0;if(y>=r&&y<=v&&c>=a&&c<=o||u>=r&&u<=v&&l>=a&&l<=o)return!0;if(y<r&&u>=r){if(p=c+(l-c)*(r-y)/(u-y),p>a&&p<=o)return!0}else if(y>v&&u<=v&&(p=c+(l-c)*(v-y)/(u-y),p>=a&&p<=o))return!0;if(c<a&&l>=a){if(p=y+(u-y)*(a-c)/(l-c),p>=r&&p<=v)return!0}else if(c>o&&l<=o&&(p=y+(u-y)*(o-c)/(l-c),p>=r&&p<=v))return!0;return!1};h.exports=S},34426:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){y===void 0&&(y=1);var c=d.x1,u=d.y1,l=d.x2,r=d.y2,a=e.x,v=e.y,o=(l-c)*(l-c)+(r-u)*(r-u);if(o===0)return!1;var p=((a-c)*(l-c)+(v-u)*(r-u))/o;if(p<0)return Math.sqrt((c-a)*(c-a)+(u-v)*(u-v))<=y;if(p>=0&&p<=1){var m=((u-v)*(l-c)-(c-a)*(r-u))/o;return Math.abs(m)*Math.sqrt(o)<=y}else return Math.sqrt((l-a)*(l-a)+(r-v)*(r-v))<=y};h.exports=S},81414:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(34426),y=function(c,u){if(!d(c,u))return!1;var l=Math.min(u.x1,u.x2),r=Math.max(u.x1,u.x2),a=Math.min(u.y1,u.y2),v=Math.max(u.y1,u.y2);return c.x>=l&&c.x<=r&&c.y>=a&&c.y<=v};h.exports=y},90205:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.width<=0||e.height<=0||d.width<=0||d.height<=0?!1:!(e.right<d.x||e.bottom<d.y||e.x>d.right||e.y>d.bottom)};h.exports=S},20370:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25227),y=e(94287),c=e(86875),u=e(87279),l=function(r,a){if(a.left>r.right||a.right<r.left||a.top>r.bottom||a.bottom<r.top)return!1;var v=a.getLineA(),o=a.getLineB(),p=a.getLineC();if(y(r,v.x1,v.y1)||y(r,v.x2,v.y2)||y(r,o.x1,o.y1)||y(r,o.x2,o.y2)||y(r,p.x1,p.y1)||y(r,p.x2,p.y2))return!0;var m=r.getLineA(),g=r.getLineB(),x=r.getLineC(),C=r.getLineD();if(d(v,m)||d(v,g)||d(v,x)||d(v,C)||d(o,m)||d(o,g)||d(o,x)||d(o,C)||d(p,m)||d(p,g)||d(p,x)||d(p,C))return!0;var M=u(r),R=c(a,M,!0);return R.length>0};h.exports=l},8786:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u,l){return l===void 0&&(l=0),!(d>e.right+l||y<e.left-l||c>e.bottom+l||u<e.top-l)};h.exports=S},48411:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61472),y=e(60689),c=function(u,l){return u.left>l.right||u.right<l.left||u.top>l.bottom||u.bottom<l.top?!1:!!(y(u,l.x,l.y)||d(u.getLineA(),l)||d(u.getLineB(),l)||d(u.getLineC(),l))};h.exports=c},86117:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25227),y=function(c,u){return!!(c.contains(u.x1,u.y1)||c.contains(u.x2,u.y2)||d(c.getLineA(),u)||d(c.getLineB(),u)||d(c.getLineC(),u))};h.exports=y},23589:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86875),y=e(18680),c=e(25227),u=function(l,r){if(l.left>r.right||l.right<r.left||l.top>r.bottom||l.bottom<r.top)return!1;var a=l.getLineA(),v=l.getLineB(),o=l.getLineC(),p=r.getLineA(),m=r.getLineB(),g=r.getLineC();if(c(a,p)||c(a,m)||c(a,g)||c(v,p)||c(v,m)||c(v,g)||c(o,p)||c(o,m)||c(o,g))return!0;var x=y(l),C=d(r,x,!0);return C.length>0||(x=y(r),C=d(l,x,!0),C.length>0)};h.exports=u},7563:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CircleToCircle:e(22184),CircleToRectangle:e(26535),GetCircleToCircle:e(71145),GetCircleToRectangle:e(62508),GetLineToCircle:e(26111),GetLineToLine:e(96537),GetLineToPoints:e(17647),GetLineToPolygon:e(68439),GetLineToRectangle:e(9569),GetRaysFromPointToPolygon:e(7449),GetRectangleIntersection:e(82931),GetRectangleToRectangle:e(1946),GetRectangleToTriangle:e(34211),GetTriangleToCircle:e(80511),GetTriangleToLine:e(31343),GetTriangleToTriangle:e(70534),LineToCircle:e(61472),LineToLine:e(25227),LineToRectangle:e(47910),PointToLine:e(34426),PointToLineSegment:e(81414),RectangleToRectangle:e(90205),RectangleToTriangle:e(20370),RectangleToValues:e(8786),TriangleToCircle:e(48411),TriangleToLine:e(86117),TriangleToTriangle:e(23589)}},50599:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};h.exports=S},58813:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){d===void 0&&(d=1),y===void 0&&(y=[]);var c=Math.round(e.x1),u=Math.round(e.y1),l=Math.round(e.x2),r=Math.round(e.y2),a=Math.abs(l-c),v=Math.abs(r-u),o=c<l?1:-1,p=u<r?1:-1,m=a-v;y.push({x:c,y:u});for(var g=1;!(c===l&&u===r);){var x=m<<1;x>-v&&(m-=v,c+=o),x<a&&(m+=a,u+=p),g%d===0&&y.push({x:c,y:u}),g++}return y};h.exports=S},88513:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=d-(e.x1+e.x2)/2,u=y-(e.y1+e.y2)/2;return e.x1+=c,e.y1+=u,e.x2+=c,e.y2+=u,e};h.exports=S},26718:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88829),y=function(c){return new d(c.x1,c.y1,c.x2,c.y2)};h.exports=y},88930:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d.setTo(e.x1,e.y1,e.x2,e.y2)};h.exports=S},90656:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x1===d.x1&&e.y1===d.y1&&e.x2===d.x2&&e.y2===d.y2};h.exports=S},30897:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),y=function(c,u,l){l===void 0&&(l=u);var r=d(c),a=c.x2-c.x1,v=c.y2-c.y1;return u&&(c.x1=c.x1-a/r*u,c.y1=c.y1-v/r*u),l&&(c.x2=c.x2+a/r*l,c.y2=c.y2+v/r*l),c};h.exports=y},30684:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92951),y=e(21902),c=e(79967),u=function(l,r,a,v,o){v===void 0&&(v=0),o===void 0&&(o=[]);var p=[],m=l.x1,g=l.y1,x=l.x2-m,C=l.y2-g,M=y(r,o),R,P,w=a-1;for(R=0;R<w;R++)P=M(R/w),p.push(new c(m+x*P,g+C*P));if(P=M(1),p.push(new c(m+x*P,g+C*P)),v>0){var A=p[0],G=[A];for(R=1;R<p.length-1;R++){var O=p[R];d(A,O)>=v&&(G.push(O),A=O)}var L=p[p.length-1];return d(A,L)<v&&G.pop(),G.push(L),G}else return p};h.exports=u},20487:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){return u===void 0&&(u=new d),u.x=(c.x1+c.x2)/2,u.y=(c.y1+c.y2)/2,u};h.exports=y},11222:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u,l){l===void 0&&(l=new d);var r=c.x1,a=c.y1,v=c.x2,o=c.y2,p=(v-r)*(v-r)+(o-a)*(o-a);if(p===0)return l;var m=((u.x-r)*(v-r)+(u.y-a)*(o-a))/p;return l.x=r+m*(v-r),l.y=a+m*(o-a),l};h.exports=y},7377:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),y=e(50599),c=e(79967),u=function(l,r){r===void 0&&(r=new c);var a=y(l)-d.TAU;return r.x=Math.cos(a),r.y=Math.sin(a),r};h.exports=u},66464:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u,l){return l===void 0&&(l=new d),l.x=c.x1+(c.x2-c.x1)*u,l.y=c.y1+(c.y2-c.y1)*u,l};h.exports=y},8570:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),y=e(79967),c=function(u,l,r,a){a===void 0&&(a=[]),!l&&r>0&&(l=d(u)/r);for(var v=u.x1,o=u.y1,p=u.x2,m=u.y2,g=0;g<l;g++){var x=g/l,C=v+(p-v)*x,M=o+(m-o)*x;a.push(new y(C,M))}return a};h.exports=c},65269:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.x1,c=e.y1,u=e.x2,l=e.y2,r=(u-y)*(u-y)+(l-c)*(l-c);if(r===0)return!1;var a=((c-d.y)*(u-y)-(y-d.x)*(l-c))/r;return Math.abs(a)*Math.sqrt(r)};h.exports=S},82996:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return Math.abs(e.y1-e.y2)};h.exports=S},16028:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};h.exports=S},88829:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(66464),c=e(8570),u=e(52394),l=e(74077),r=e(93736),a=new d({initialize:function(o,p,m,g){o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=0),g===void 0&&(g=0),this.type=u.LINE,this.x1=o,this.y1=p,this.x2=m,this.y2=g},getPoint:function(v,o){return y(this,v,o)},getPoints:function(v,o,p){return c(this,v,o,p)},getRandomPoint:function(v){return l(this,v)},setTo:function(v,o,p,m){return v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=0),this.x1=v,this.y1=o,this.x2=p,this.y2=m,this},getPointA:function(v){return v===void 0&&(v=new r),v.set(this.x1,this.y1),v},getPointB:function(v){return v===void 0&&(v=new r),v.set(this.x2,this.y2),v},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(v){this.x1<=this.x2?this.x1=v:this.x2=v}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(v){this.x1>this.x2?this.x1=v:this.x2=v}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(v){this.y1<=this.y2?this.y1=v:this.y2=v}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(v){this.y1>this.y2?this.y1=v:this.y2=v}}});h.exports=a},73273:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),y=e(1071),c=e(50599),u=function(l){var r=c(l)-d.TAU;return y(r,-Math.PI,Math.PI)};h.exports=u},96936:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),y=e(50599),c=function(u){return Math.cos(y(u)-d.TAU)};h.exports=c},43581:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),y=e(50599),c=function(u){return Math.sin(y(u)-d.TAU)};h.exports=c},13990:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e.x1+=d,e.y1+=y,e.x2+=d,e.y2+=y,e};h.exports=S},1298:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};h.exports=S},74077:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){u===void 0&&(u=new d);var l=Math.random();return u.x=c.x1+l*(c.x2-c.x1),u.y=c.y1+l*(c.y2-c.y1),u};h.exports=y},30473:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50599),y=e(73273),c=function(u,l){return 2*y(l)-Math.PI-d(u)};h.exports=c},25968:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1809),y=function(c,u){var l=(c.x1+c.x2)/2,r=(c.y1+c.y2)/2;return d(c,l,r,u)};h.exports=y},24296:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1809),y=function(c,u,l){return d(c,u.x,u.y,l)};h.exports=y},1809:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=Math.cos(c),l=Math.sin(c),r=e.x1-d,a=e.y1-y;return e.x1=r*u-a*l+d,e.y1=r*l+a*u+y,r=e.x2-d,a=e.y2-y,e.x2=r*u-a*l+d,e.y2=r*l+a*u+y,e};h.exports=S},88171:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u){return e.x1=d,e.y1=y,e.x2=d+Math.cos(c)*u,e.y2=y+Math.sin(c)*u,e};h.exports=S},82797:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};h.exports=S},41067:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return Math.abs(e.x1-e.x2)};h.exports=S},28482:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88829);d.Angle=e(50599),d.BresenhamPoints=e(58813),d.CenterOn=e(88513),d.Clone=e(26718),d.CopyFrom=e(88930),d.Equals=e(90656),d.Extend=e(30897),d.GetEasedPoints=e(30684),d.GetMidPoint=e(20487),d.GetNearestPoint=e(11222),d.GetNormal=e(7377),d.GetPoint=e(66464),d.GetPoints=e(8570),d.GetShortestDistance=e(65269),d.Height=e(82996),d.Length=e(16028),d.NormalAngle=e(73273),d.NormalX=e(96936),d.NormalY=e(43581),d.Offset=e(13990),d.PerpSlope=e(1298),d.Random=e(74077),d.ReflectAngle=e(30473),d.Rotate=e(25968),d.RotateAroundPoint=e(24296),d.RotateAroundXY=e(1809),d.SetToAngle=e(88171),d.Slope=e(82797),d.Width=e(41067),h.exports=d},18693:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(74118),c=e(93736);function u(r,a,v,o){var p=r-v,m=a-o,g=p*p+m*m;return Math.sqrt(g)}var l=new d({initialize:function(a,v,o){this.vertex1=a,this.vertex2=v,this.vertex3=o,this.bounds=new y,this._inCenter=new c},getInCenter:function(r){r===void 0&&(r=!0);var a=this.vertex1,v=this.vertex2,o=this.vertex3,p,m,g,x,C,M;r?(p=a.x,m=a.y,g=v.x,x=v.y,C=o.x,M=o.y):(p=a.vx,m=a.vy,g=v.vx,x=v.vy,C=o.vx,M=o.vy);var R=u(C,M,g,x),P=u(p,m,C,M),w=u(g,x,p,m),A=R+P+w;return this._inCenter.set((p*R+g*P+C*w)/A,(m*R+x*P+M*w)/A)},contains:function(r,a,v){var o=this.vertex1,p=this.vertex2,m=this.vertex3,g=o.vx,x=o.vy,C=p.vx,M=p.vy,R=m.vx,P=m.vy;if(v){var w=v.a,A=v.b,G=v.c,O=v.d,L=v.e,I=v.f;g=o.vx*w+o.vy*G+L,x=o.vx*A+o.vy*O+I,C=p.vx*w+p.vy*G+L,M=p.vx*A+p.vy*O+I,R=m.vx*w+m.vy*G+L,P=m.vx*A+m.vy*O+I}var F=R-g,D=P-x,V=C-g,k=M-x,W=r-g,X=a-x,H=F*F+D*D,$=F*V+D*k,z=F*W+D*X,b=V*V+k*k,B=V*W+k*X,N=H*b-$*$,U=N===0?0:1/N,Y=(b*z-$*B)*U,K=(H*B-$*z)*U;return Y>=0&&K>=0&&Y+K<1},isCounterClockwise:function(r){var a=this.vertex1,v=this.vertex2,o=this.vertex3,p=(v.vx-a.vx)*(o.vy-a.vy)-(v.vy-a.vy)*(o.vx-a.vx);return r<=0?p>=0:p<0},load:function(r,a,v,o,p){return v=this.vertex1.load(r,a,v,o,p),v=this.vertex2.load(r,a,v,o,p),v=this.vertex3.load(r,a,v,o,p),v},transformCoordinatesLocal:function(r,a,v,o){return this.vertex1.transformCoordinatesLocal(r,a,v,o),this.vertex2.transformCoordinatesLocal(r,a,v,o),this.vertex3.transformCoordinatesLocal(r,a,v,o),this},updateBounds:function(){var r=this.vertex1,a=this.vertex2,v=this.vertex3,o=this.bounds;return o.x=Math.min(r.vx,a.vx,v.vx),o.y=Math.min(r.vy,a.vy,v.vy),o.width=Math.max(r.vx,a.vx,v.vx)-o.x,o.height=Math.max(r.vy,a.vy,v.vy)-o.y,this},isInView:function(r,a,v,o,p,m,g,x,C,M,R){this.update(o,p,m,g,x,C,M,R);var P=this.vertex1,w=this.vertex2,A=this.vertex3;if(P.ta<=0&&w.ta<=0&&A.ta<=0||a&&!this.isCounterClockwise(v))return!1;var G=this.bounds;G.x=Math.min(P.tx,w.tx,A.tx),G.y=Math.min(P.ty,w.ty,A.ty),G.width=Math.max(P.tx,w.tx,A.tx)-G.x,G.height=Math.max(P.ty,w.ty,A.ty)-G.y;var O=r.x+r.width,L=r.y+r.height;return G.width<=0||G.height<=0||r.width<=0||r.height<=0?!1:!(G.right<r.x||G.bottom<r.y||G.x>O||G.y>L)},scrollUV:function(r,a){return this.vertex1.scrollUV(r,a),this.vertex2.scrollUV(r,a),this.vertex3.scrollUV(r,a),this},scaleUV:function(r,a){return this.vertex1.scaleUV(r,a),this.vertex2.scaleUV(r,a),this.vertex3.scaleUV(r,a),this},setColor:function(r){return this.vertex1.color=r,this.vertex2.color=r,this.vertex3.color=r,this},update:function(r,a,v,o,p,m,g,x){return this.vertex1.update(a,v,o,p,m,g,x,r),this.vertex2.update(a,v,o,p,m,g,x,r),this.vertex3.update(a,v,o,p,m,g,x,r),this},translate:function(r,a){a===void 0&&(a=0);var v=this.vertex1,o=this.vertex2,p=this.vertex3;return v.x+=r,v.y+=a,o.x+=r,o.y+=a,p.x+=r,p.y+=a,this},x:{get:function(){return this.getInCenter().x},set:function(r){var a=this.getInCenter();this.translate(r-a.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var a=this.getInCenter();this.translate(0,r-a.y)}},alpha:{get:function(){var r=this.vertex1,a=this.vertex2,v=this.vertex3;return(r.alpha+a.alpha+v.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){var r=this.vertex1,a=this.vertex2,v=this.vertex3;return(r.vz+a.vz+v.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});h.exports=l},99425:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18693),y=e(72632),c=e(16650),u=e(70015),l=e(85769),r=new u,a=new u,v=new c,o=function(p){var m=y(p,"mesh"),g=y(p,"texture",null),x=y(p,"frame"),C=y(p,"width",1),M=y(p,"height",C),R=y(p,"widthSegments",1),P=y(p,"heightSegments",R),w=y(p,"x",0),A=y(p,"y",0),G=y(p,"z",0),O=y(p,"rotateX",0),L=y(p,"rotateY",0),I=y(p,"rotateZ",0),F=y(p,"zIsUp",!0),D=y(p,"isOrtho",m?m.dirtyCache[11]:!1),V=y(p,"colors",[16777215]),k=y(p,"alphas",[1]),W=y(p,"tile",!1),X=y(p,"flipY",!1),H=y(p,"width",null),$={faces:[],verts:[]};r.set(w,A,G),a.set(O,L,I),v.fromRotationXYTranslation(a,r,F);var z;if(!g&&m)g=m.texture,x||(z=m.frame);else if(m&&typeof g=="string")g=m.scene.sys.textures.get(g);else if(!g)return $;z||(z=g.get(x)),!H&&D&&g&&m&&(C=z.width/m.height,M=z.height/m.height);var b=C/2,B=M/2,N=Math.floor(R),U=Math.floor(P),Y=N+1,K=U+1,Z=C/N,J=M/U,Q=[],j=[],q,tt,_=0,it=1,rt=0,at=1;z&&(_=z.u0,it=z.u1,X?(rt=z.v1,at=z.v0):(rt=z.v0,at=z.v1));var ot=it-_,et=at-rt;for(tt=0;tt<K;tt++){var nt=tt*J-B;for(q=0;q<Y;q++){var st=q*Z-b;j.push(st,-nt);var ut=_+ot*(q/N),lt=rt+et*(tt/U);Q.push(ut,lt)}}Array.isArray(V)||(V=[V]),Array.isArray(k)||(k=[k]);var pt=0,ct=0;for(tt=0;tt<U;tt++)for(q=0;q<N;q++){var ft=(q+Y*tt)*2,dt=(q+Y*(tt+1))*2,vt=(q+1+Y*(tt+1))*2,gt=(q+1+Y*tt)*2,mt=V[ct],xt=k[pt],yt=new l(j[ft],j[ft+1],0,Q[ft],Q[ft+1],mt,xt).transformMat4(v),Ct=new l(j[dt],j[dt+1],0,Q[dt],Q[dt+1],mt,xt).transformMat4(v),Tt=new l(j[gt],j[gt+1],0,Q[gt],Q[gt+1],mt,xt).transformMat4(v),St=new l(j[dt],j[dt+1],0,Q[dt],Q[dt+1],mt,xt).transformMat4(v),Pt=new l(j[vt],j[vt+1],0,Q[vt],Q[vt+1],mt,xt).transformMat4(v),Et=new l(j[gt],j[gt+1],0,Q[gt],Q[gt+1],mt,xt).transformMat4(v);W&&(yt.setUVs(_,at),Ct.setUVs(_,rt),Tt.setUVs(it,at),St.setUVs(_,rt),Pt.setUVs(it,rt),Et.setUVs(it,at)),ct++,ct===V.length&&(ct=0),pt++,pt===k.length&&(pt=0),$.verts.push(yt,Ct,Tt,St,Pt,Et),$.faces.push(new d(yt,Ct,Tt),new d(St,Pt,Et))}return m&&(m.faces=m.faces.concat($.faces),m.vertices=m.vertices.concat($.verts)),$};h.exports=o},53267:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18693),y=e(16650),c=e(70015),u=e(85769),l=new c,r=new c,a=new y,v=function(o,p,m,g,x,C,M,R,P,w){m===void 0&&(m=1),g===void 0&&(g=0),x===void 0&&(x=0),C===void 0&&(C=0),M===void 0&&(M=0),R===void 0&&(R=0),P===void 0&&(P=0),w===void 0&&(w=!0);var A={faces:[],verts:[]},G=o.materials;l.set(g,x,C),r.set(M,R,P),a.fromRotationXYTranslation(r,l,w);for(var O=0;O<o.models.length;O++)for(var L=o.models[O],I=L.vertices,F=L.textureCoords,D=L.faces,V=0;V<D.length;V++){var k=D[V],W=k.vertices[0],X=k.vertices[1],H=k.vertices[2],$=I[W.vertexIndex],z=I[X.vertexIndex],b=I[H.vertexIndex],B=W.textureCoordsIndex,N=X.textureCoordsIndex,U=H.textureCoordsIndex,Y=B===-1?{u:0,v:1}:F[B],K=N===-1?{u:0,v:0}:F[N],Z=U===-1?{u:1,v:1}:F[U],J=16777215;k.material!==""&&G[k.material]&&(J=G[k.material]);var Q=new u($.x*m,$.y*m,$.z*m,Y.u,Y.v,J).transformMat4(a),j=new u(z.x*m,z.y*m,z.z*m,K.u,K.v,J).transformMat4(a),q=new u(b.x*m,b.y*m,b.z*m,Z.u,Z.v,J).transformMat4(a);A.verts.push(Q,j,q),A.faces.push(new d(Q,j,q))}return p&&(p.faces=p.faces.concat(A.faces),p.vertices=p.vertices.concat(A.verts)),A};h.exports=v},67623:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18693),y=e(85769),c=function(u,l,r,a,v,o,p,m){if(a===void 0&&(a=!1),o===void 0&&(o=16777215),p===void 0&&(p=1),m===void 0&&(m=!1),u.length!==l.length&&!a){console.warn("GenerateVerts: vertices and uvs count not equal");return}var g={faces:[],vertices:[]},x,C,M,R,P,w,A,G,O,L,I,F=a?3:2,D=Array.isArray(o),V=Array.isArray(p);if(Array.isArray(r)&&r.length>0)for(x=0;x<r.length;x++){var k=r[x],W=r[x]*2,X=r[x]*F;C=u[X],M=u[X+1],R=a?u[X+2]:0,P=l[W],w=l[W+1],m&&(w=1-w),A=D?o[k]:o,G=V?p[k]:p,O=0,L=0,I=0,v&&(O=v[X],L=v[X+1],I=a?v[X+2]:0),g.vertices.push(new y(C,M,R,P,w,A,G,O,L,I))}else{var H=0,$=0;for(x=0;x<u.length;x+=F)C=u[x],M=u[x+1],R=a?u[x+2]:0,P=l[H],w=l[H+1],A=D?o[$]:o,G=V?p[$]:p,O=0,L=0,I=0,v&&(O=v[x],L=v[x+1],I=a?v[x+2]:0),g.vertices.push(new y(C,M,R,P,w,A,G,O,L,I)),H+=2,$++}for(x=0;x<g.vertices.length;x+=3){var z=g.vertices[x],b=g.vertices[x+1],B=g.vertices[x+2];g.faces.push(new d(z,b,B))}return g};h.exports=c},27291:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=!0,e="untitled",d="",y="";function c(C){var M=C.indexOf("#");return M>-1?C.substring(0,M):C}function u(C){return C.models.length===0&&C.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),d="",C.models[C.models.length-1]}function l(C,M){var R=C.length>=2?C[1]:e;M.models.push({faces:[],name:R,textureCoords:[],vertexNormals:[],vertices:[]}),d=""}function r(C){C.length===2&&(d=C[1])}function a(C,M){var R=C.length,P=R>=2?parseFloat(C[1]):0,w=R>=3?parseFloat(C[2]):0,A=R>=4?parseFloat(C[3]):0;u(M).vertices.push({x:P,y:w,z:A})}function v(C,M){var R=C.length,P=R>=2?parseFloat(C[1]):0,w=R>=3?parseFloat(C[2]):0,A=R>=4?parseFloat(C[3]):0;isNaN(P)&&(P=0),isNaN(w)&&(w=0),isNaN(A)&&(A=0),S&&(w=1-w),u(M).textureCoords.push({u:P,v:w,w:A})}function o(C,M){var R=C.length,P=R>=2?parseFloat(C[1]):0,w=R>=3?parseFloat(C[2]):0,A=R>=4?parseFloat(C[3]):0;u(M).vertexNormals.push({x:P,y:w,z:A})}function p(C,M){var R=C.length-1;if(!(R<3)){for(var P={group:d,material:y,vertices:[]},w=0;w<R;w++){var A=C[w+1],G=A.split("/"),O=G.length;if(!(O<1||O>3)){var L=0,I=0,F=0;L=parseInt(G[0],10),O>1&&G[1]!==""&&(I=parseInt(G[1],10)),O>2&&(F=parseInt(G[2],10)),L!==0&&(L<0&&(L=u(M).vertices.length+1+L),I-=1,L-=1,F-=1,P.vertices.push({textureCoordsIndex:I,vertexIndex:L,vertexNormalIndex:F}))}}u(M).faces.push(P)}}function m(C,M){C.length>=2&&M.materialLibraries.push(C[1])}function g(C){C.length>=2&&(y=C[1])}var x=function(C,M){M===void 0&&(M=!0),S=M;var R={materials:{},materialLibraries:[],models:[]};d="",y="";for(var P=C.split(`
`),w=0;w<P.length;w++){var A=c(P[w]),G=A.replace(/\s\s+/g," ").trim().split(" ");switch(G[0].toLowerCase()){case"o":l(G,R);break;case"g":r(G);break;case"v":a(G,R);break;case"vt":v(G,R);break;case"vn":o(G,R);break;case"f":p(G,R);break;case"mtllib":m(G,R);break;case"usemtl":g(G);break}}return R};h.exports=x},76799:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22946),y=function(c){for(var u={},l=c.split(`
`),r="",a=0;a<l.length;a++){var v=l[a].trim();if(!(v.indexOf("#")===0||v==="")){var o=v.replace(/\s\s+/g," ").trim().split(" ");switch(o[0].toLowerCase()){case"newmtl":{r=o[1];break}case"kd":{var p=Math.floor(o[1]*255),m=o.length>=2?Math.floor(o[2]*255):p,g=o.length>=3?Math.floor(o[3]*255):p;u[r]=d(p,m,g);break}}}}return u};h.exports=y},15313:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u,l;if(y===void 0&&c===void 0){var r=e.getInCenter();u=r.x,l=r.y}var a=Math.cos(d),v=Math.sin(d),o=e.vertex1,p=e.vertex2,m=e.vertex3,g=o.x-u,x=o.y-l;o.set(g*a-x*v+u,g*v+x*a+l),g=p.x-u,x=p.y-l,p.set(g*a-x*v+u,g*v+x*a+l),g=m.x-u,x=m.y-l,m.set(g*a-x*v+u,g*v+x*a+l)};h.exports=S},85769:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(75512),c=e(70015),u=new d({Extends:c,initialize:function(r,a,v,o,p,m,g,x,C,M){m===void 0&&(m=16777215),g===void 0&&(g=1),x===void 0&&(x=0),C===void 0&&(C=0),M===void 0&&(M=0),c.call(this,r,a,v),this.vx=0,this.vy=0,this.vz=0,this.nx=x,this.ny=C,this.nz=M,this.u=o,this.v=p,this.color=m,this.alpha=g,this.tx=0,this.ty=0,this.ta=0,this.tu=o,this.tv=p},setUVs:function(l,r){return this.u=l,this.v=r,this.tu=l,this.tv=r,this},scrollUV:function(l,r){return this.tu+=l,this.tv+=r,this},scaleUV:function(l,r){return this.tu=this.u*l,this.tv=this.v*r,this},transformCoordinatesLocal:function(l,r,a,v){var o=this.x,p=this.y,m=this.z,g=l.val,x=o*g[0]+p*g[4]+m*g[8]+g[12],C=o*g[1]+p*g[5]+m*g[9]+g[13],M=o*g[2]+p*g[6]+m*g[10]+g[14],R=o*g[3]+p*g[7]+m*g[11]+g[15];this.vx=x/R*r,this.vy=-(C/R)*a,v<=0?this.vz=M/R:this.vz=-(M/R)},resize:function(l,r,a,v,o,p){return this.x=l,this.y=r,this.vx=this.x*a,this.vy=-this.y*v,this.vz=0,o<.5?this.vx+=a*(.5-o):o>.5&&(this.vx-=a*(o-.5)),p<.5?this.vy+=v*(.5-p):p>.5&&(this.vy-=v*(p-.5)),this},update:function(l,r,a,v,o,p,m,g){var x=this.vx*l+this.vy*a+o,C=this.vx*r+this.vy*v+p;return m&&(x=Math.round(x),C=Math.round(C)),this.tx=x,this.ty=C,this.ta=this.alpha*g,this},load:function(l,r,a,v,o){return l[++a]=this.tx,l[++a]=this.ty,l[++a]=this.tu,l[++a]=this.tv,l[++a]=v,l[++a]=o,r[++a]=y.getTintAppendFloatAlpha(this.color,this.ta),a}});h.exports=u},14293:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Face:e(18693),GenerateGridVerts:e(99425),GenerateObjVerts:e(53267),GenerateVerts:e(67623),ParseObj:e(27291),ParseObjMaterial:e(76799),RotateFace:e(15313),Vertex:e(85769)};h.exports=d},77601:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};h.exports=S},38933:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c){return new d(c.x,c.y)};h.exports=y},47103:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d.setTo(e.x,e.y)};h.exports=S},13625:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x===d.x&&e.y===d.y};h.exports=S},12536:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};h.exports=S},54205:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){if(u===void 0&&(u=new d),!Array.isArray(c))throw new Error("GetCentroid points argument must be an array");var l=c.length;if(l<1)throw new Error("GetCentroid points array must not be empty");if(l===1)u.x=c[0].x,u.y=c[0].y;else{for(var r=0;r<l;r++)u.x+=c[r].x,u.y+=c[r].y;u.x/=l,u.y/=l}return u};h.exports=y},50083:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};h.exports=S},82712:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.x*e.x+e.y*e.y};h.exports=S},20052:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=function(c,u){u===void 0&&(u=new d);for(var l=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,o=0;o<c.length;o++){var p=c[o];p.x>l&&(l=p.x),p.x<r&&(r=p.x),p.y>a&&(a=p.y),p.y<v&&(v=p.y)}return u.x=r,u.y=v,u.width=l-r,u.height=a-v,u};h.exports=y},77154:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u,l,r){return l===void 0&&(l=0),r===void 0&&(r=new d),r.x=c.x+(u.x-c.x)*l,r.y=c.y+(u.y-c.y)*l,r};h.exports=y},42397:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.setTo(e.y,e.x)};h.exports=S},59464:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){return u===void 0&&(u=new d),u.setTo(-c.x,-c.y)};h.exports=y},79967:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(52394),c=new d({initialize:function(l,r){l===void 0&&(l=0),r===void 0&&(r=l),this.type=y.POINT,this.x=l,this.y=r},setTo:function(u,l){return u===void 0&&(u=0),l===void 0&&(l=u),this.x=u,this.y=l,this}});h.exports=c},53581:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=e(82712),c=function(u,l,r){r===void 0&&(r=new d);var a=u.x*l.x+u.y*l.y,v=a/y(l);return v!==0&&(r.x=v*l.x,r.y=v*l.y),r};h.exports=c},50817:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u,l){l===void 0&&(l=new d);var r=c.x*u.x+c.y*u.y;return r!==0&&(l.x=r*u.x,l.y=r*u.y),l};h.exports=y},40525:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50083),y=function(c,u){if(c.x!==0||c.y!==0){var l=d(c);c.x/=l,c.y/=l}return c.x*=u,c.y*=u,c};h.exports=y},63472:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967);d.Ceil=e(77601),d.Clone=e(38933),d.CopyFrom=e(47103),d.Equals=e(13625),d.Floor=e(12536),d.GetCentroid=e(54205),d.GetMagnitude=e(50083),d.GetMagnitudeSq=e(82712),d.GetRectangleFromPoints=e(20052),d.Interpolate=e(77154),d.Invert=e(42397),d.Negative=e(59464),d.Project=e(53581),d.ProjectUnit=e(50817),d.SetMagnitude=e(40525),h.exports=d},19631:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8580),y=function(c){return new d(c.points)};h.exports=y},45604:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){for(var c=!1,u=-1,l=e.points.length-1;++u<e.points.length;l=u){var r=e.points[u].x,a=e.points[u].y,v=e.points[l].x,o=e.points[l].y;(a<=y&&y<o||o<=y&&y<a)&&d<(v-r)*(y-a)/(o-a)+r&&(c=!c)}return c};h.exports=S},87289:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45604),y=function(c,u){return d(c,u.x,u.y)};h.exports=y},11117:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S($,z,b){b=b||2;var B=z&&z.length,N=B?z[0]*b:$.length,U=e($,0,N,b,!0),Y=[];if(!U||U.next===U.prev)return Y;var K,Z,J,Q,j,q,tt;if(B&&(U=a($,z,U,b)),$.length>80*b){K=J=$[0],Z=Q=$[1];for(var _=b;_<N;_+=b)j=$[_],q=$[_+1],j<K&&(K=j),q<Z&&(Z=q),j>J&&(J=j),q>Q&&(Q=q);tt=Math.max(J-K,Q-Z),tt=tt!==0?32767/tt:0}return y(U,Y,b,K,Z,tt,0),Y}function e($,z,b,B,N){var U,Y;if(N===H($,z,b,B)>0)for(U=z;U<b;U+=B)Y=k(U,$[U],$[U+1],Y);else for(U=b-B;U>=z;U-=B)Y=k(U,$[U],$[U+1],Y);return Y&&A(Y,Y.next)&&(W(Y),Y=Y.next),Y}function d($,z){if(!$)return $;z||(z=$);var b=$,B;do if(B=!1,!b.steiner&&(A(b,b.next)||w(b.prev,b,b.next)===0)){if(W(b),b=z=b.prev,b===b.next)break;B=!0}else b=b.next;while(B||b!==z);return z}function y($,z,b,B,N,U,Y){if($){!Y&&U&&g($,B,N,U);for(var K=$,Z,J;$.prev!==$.next;){if(Z=$.prev,J=$.next,U?u($,B,N,U):c($)){z.push(Z.i/b|0),z.push($.i/b|0),z.push(J.i/b|0),W($),$=J.next,K=J.next;continue}if($=J,$===K){Y?Y===1?($=l(d($),z,b),y($,z,b,B,N,U,2)):Y===2&&r($,z,b,B,N,U):y(d($),z,b,B,N,U,1);break}}}}function c($){var z=$.prev,b=$,B=$.next;if(w(z,b,B)>=0)return!1;for(var N=z.x,U=b.x,Y=B.x,K=z.y,Z=b.y,J=B.y,Q=N<U?N<Y?N:Y:U<Y?U:Y,j=K<Z?K<J?K:J:Z<J?Z:J,q=N>U?N>Y?N:Y:U>Y?U:Y,tt=K>Z?K>J?K:J:Z>J?Z:J,_=B.next;_!==z;){if(_.x>=Q&&_.x<=q&&_.y>=j&&_.y<=tt&&R(N,K,U,Z,Y,J,_.x,_.y)&&w(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function u($,z,b,B){var N=$.prev,U=$,Y=$.next;if(w(N,U,Y)>=0)return!1;for(var K=N.x,Z=U.x,J=Y.x,Q=N.y,j=U.y,q=Y.y,tt=K<Z?K<J?K:J:Z<J?Z:J,_=Q<j?Q<q?Q:q:j<q?j:q,it=K>Z?K>J?K:J:Z>J?Z:J,rt=Q>j?Q>q?Q:q:j>q?j:q,at=C(tt,_,z,b,B),ot=C(it,rt,z,b,B),et=$.prevZ,nt=$.nextZ;et&&et.z>=at&&nt&&nt.z<=ot;){if(et.x>=tt&&et.x<=it&&et.y>=_&&et.y<=rt&&et!==N&&et!==Y&&R(K,Q,Z,j,J,q,et.x,et.y)&&w(et.prev,et,et.next)>=0||(et=et.prevZ,nt.x>=tt&&nt.x<=it&&nt.y>=_&&nt.y<=rt&&nt!==N&&nt!==Y&&R(K,Q,Z,j,J,q,nt.x,nt.y)&&w(nt.prev,nt,nt.next)>=0))return!1;nt=nt.nextZ}for(;et&&et.z>=at;){if(et.x>=tt&&et.x<=it&&et.y>=_&&et.y<=rt&&et!==N&&et!==Y&&R(K,Q,Z,j,J,q,et.x,et.y)&&w(et.prev,et,et.next)>=0)return!1;et=et.prevZ}for(;nt&&nt.z<=ot;){if(nt.x>=tt&&nt.x<=it&&nt.y>=_&&nt.y<=rt&&nt!==N&&nt!==Y&&R(K,Q,Z,j,J,q,nt.x,nt.y)&&w(nt.prev,nt,nt.next)>=0)return!1;nt=nt.nextZ}return!0}function l($,z,b){var B=$;do{var N=B.prev,U=B.next.next;!A(N,U)&&G(N,B,B.next,U)&&F(N,U)&&F(U,N)&&(z.push(N.i/b|0),z.push(B.i/b|0),z.push(U.i/b|0),W(B),W(B.next),B=$=U),B=B.next}while(B!==$);return d(B)}function r($,z,b,B,N,U){var Y=$;do{for(var K=Y.next.next;K!==Y.prev;){if(Y.i!==K.i&&P(Y,K)){var Z=V(Y,K);Y=d(Y,Y.next),Z=d(Z,Z.next),y(Y,z,b,B,N,U,0),y(Z,z,b,B,N,U,0);return}K=K.next}Y=Y.next}while(Y!==$)}function a($,z,b,B){var N=[],U,Y,K,Z,J;for(U=0,Y=z.length;U<Y;U++)K=z[U]*B,Z=U<Y-1?z[U+1]*B:$.length,J=e($,K,Z,B,!1),J===J.next&&(J.steiner=!0),N.push(M(J));for(N.sort(v),U=0;U<N.length;U++)b=o(N[U],b);return b}function v($,z){return $.x-z.x}function o($,z){var b=p($,z);if(!b)return z;var B=V(b,$);return d(B,B.next),d(b,b.next)}function p($,z){var b=z,B=$.x,N=$.y,U=-1/0,Y;do{if(N<=b.y&&N>=b.next.y&&b.next.y!==b.y){var K=b.x+(N-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(K<=B&&K>U&&(U=K,Y=b.x<b.next.x?b:b.next,K===B))return Y}b=b.next}while(b!==z);if(!Y)return null;var Z=Y,J=Y.x,Q=Y.y,j=1/0,q;b=Y;do B>=b.x&&b.x>=J&&B!==b.x&&R(N<Q?B:U,N,J,Q,N<Q?U:B,N,b.x,b.y)&&(q=Math.abs(N-b.y)/(B-b.x),F(b,$)&&(q<j||q===j&&(b.x>Y.x||b.x===Y.x&&m(Y,b)))&&(Y=b,j=q)),b=b.next;while(b!==Z);return Y}function m($,z){return w($.prev,$,z.prev)<0&&w(z.next,$,$.next)<0}function g($,z,b,B){var N=$;do N.z===0&&(N.z=C(N.x,N.y,z,b,B)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==$);N.prevZ.nextZ=null,N.prevZ=null,x(N)}function x($){var z,b,B,N,U,Y,K,Z,J=1;do{for(b=$,$=null,U=null,Y=0;b;){for(Y++,B=b,K=0,z=0;z<J&&(K++,B=B.nextZ,!!B);z++);for(Z=J;K>0||Z>0&&B;)K!==0&&(Z===0||!B||b.z<=B.z)?(N=b,b=b.nextZ,K--):(N=B,B=B.nextZ,Z--),U?U.nextZ=N:$=N,N.prevZ=U,U=N;b=B}U.nextZ=null,J*=2}while(Y>1);return $}function C($,z,b,B,N){return $=($-b)*N|0,z=(z-B)*N|0,$=($|$<<8)&16711935,$=($|$<<4)&252645135,$=($|$<<2)&858993459,$=($|$<<1)&1431655765,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,$|z<<1}function M($){var z=$,b=$;do(z.x<b.x||z.x===b.x&&z.y<b.y)&&(b=z),z=z.next;while(z!==$);return b}function R($,z,b,B,N,U,Y,K){return(N-Y)*(z-K)>=($-Y)*(U-K)&&($-Y)*(B-K)>=(b-Y)*(z-K)&&(b-Y)*(U-K)>=(N-Y)*(B-K)}function P($,z){return $.next.i!==z.i&&$.prev.i!==z.i&&!I($,z)&&(F($,z)&&F(z,$)&&D($,z)&&(w($.prev,$,z.prev)||w($,z.prev,z))||A($,z)&&w($.prev,$,$.next)>0&&w(z.prev,z,z.next)>0)}function w($,z,b){return(z.y-$.y)*(b.x-z.x)-(z.x-$.x)*(b.y-z.y)}function A($,z){return $.x===z.x&&$.y===z.y}function G($,z,b,B){var N=L(w($,z,b)),U=L(w($,z,B)),Y=L(w(b,B,$)),K=L(w(b,B,z));return!!(N!==U&&Y!==K||N===0&&O($,b,z)||U===0&&O($,B,z)||Y===0&&O(b,$,B)||K===0&&O(b,z,B))}function O($,z,b){return z.x<=Math.max($.x,b.x)&&z.x>=Math.min($.x,b.x)&&z.y<=Math.max($.y,b.y)&&z.y>=Math.min($.y,b.y)}function L($){return $>0?1:$<0?-1:0}function I($,z){var b=$;do{if(b.i!==$.i&&b.next.i!==$.i&&b.i!==z.i&&b.next.i!==z.i&&G(b,b.next,$,z))return!0;b=b.next}while(b!==$);return!1}function F($,z){return w($.prev,$,$.next)<0?w($,z,$.next)>=0&&w($,$.prev,z)>=0:w($,z,$.prev)<0||w($,$.next,z)<0}function D($,z){var b=$,B=!1,N=($.x+z.x)/2,U=($.y+z.y)/2;do b.y>U!=b.next.y>U&&b.next.y!==b.y&&N<(b.next.x-b.x)*(U-b.y)/(b.next.y-b.y)+b.x&&(B=!B),b=b.next;while(b!==$);return B}function V($,z){var b=new X($.i,$.x,$.y),B=new X(z.i,z.x,z.y),N=$.next,U=z.prev;return $.next=z,z.prev=$,b.next=N,N.prev=b,B.next=b,b.prev=B,U.next=B,B.prev=U,B}function k($,z,b,B){var N=new X($,z,b);return B?(N.next=B.next,N.prev=B,B.next.prev=N,B.next=N):(N.prev=N,N.next=N),N}function W($){$.next.prev=$.prev,$.prev.next=$.next,$.prevZ&&($.prevZ.nextZ=$.nextZ),$.nextZ&&($.nextZ.prevZ=$.prevZ)}function X($,z,b){this.i=$,this.x=z,this.y=b,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}S.deviation=function($,z,b,B){var N=z&&z.length,U=N?z[0]*b:$.length,Y=Math.abs(H($,0,U,b));if(N)for(var K=0,Z=z.length;K<Z;K++){var J=z[K]*b,Q=K<Z-1?z[K+1]*b:$.length;Y-=Math.abs(H($,J,Q,b))}var j=0;for(K=0;K<B.length;K+=3){var q=B[K]*b,tt=B[K+1]*b,_=B[K+2]*b;j+=Math.abs(($[q]-$[_])*($[tt+1]-$[q+1])-($[q]-$[tt])*($[_+1]-$[q+1]))}return Y===0&&j===0?0:Math.abs((j-Y)/Y)};function H($,z,b,B){for(var N=0,U=z,Y=b-B;U<b;U+=B)N+=($[Y]-$[U])*($[U+1]+$[Y+1]),Y=U;return N}S.flatten=function($){for(var z=$[0][0].length,b={vertices:[],holes:[],dimensions:z},B=0,N=0;N<$.length;N++){for(var U=0;U<$[N].length;U++)for(var Y=0;Y<z;Y++)b.vertices.push($[N][U][Y]);N>0&&(B+=$[N-1].length,b.holes.push(B))}return b},h.exports=S},14045:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=function(c,u){u===void 0&&(u=new d);for(var l=1/0,r=1/0,a=-l,v=-r,o,p=0;p<c.points.length;p++)o=c.points[p],l=Math.min(l,o.x),r=Math.min(r,o.y),a=Math.max(a,o.x),v=Math.max(v,o.y);return u.x=l,u.y=r,u.width=a-l,u.height=v-r,u};h.exports=y},98286:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d===void 0&&(d=[]);for(var y=0;y<e.points.length;y++)d.push(e.points[y].x),d.push(e.points[y].y);return d};h.exports=S},89294:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),y=e(88829),c=e(5159),u=function(l,r,a,v){v===void 0&&(v=[]);var o=l.points,p=c(l);!r&&a>0&&(r=p/a);for(var m=0;m<r;m++)for(var g=p*(m/r),x=0,C=0;C<o.length;C++){var M=o[C],R=o[(C+1)%o.length],P=new y(M.x,M.y,R.x,R.y),w=d(P);if(g<x||g>x+w){x+=w;continue}var A=P.getPoint((g-x)/w);v.push(A);break}return v};h.exports=u},5159:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),y=e(88829),c=function(u){for(var l=u.points,r=0,a=0;a<l.length;a++){var v=l[a],o=l[(a+1)%l.length],p=new y(v.x,v.y,o.x,o.y);r+=d(p)}return r};h.exports=c},8580:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(45604),c=e(89294),u=e(52394),l=new d({initialize:function(a){this.type=u.POLYGON,this.area=0,this.points=[],a&&this.setTo(a)},contains:function(r,a){return y(this,r,a)},setTo:function(r){if(this.area=0,this.points=[],typeof r=="string"&&(r=r.split(" ")),!Array.isArray(r))return this;for(var a,v=Number.MAX_VALUE,o=0;o<r.length;o++)a={x:0,y:0},typeof r[o]=="number"||typeof r[o]=="string"?(a.x=parseFloat(r[o]),a.y=parseFloat(r[o+1]),o++):Array.isArray(r[o])?(a.x=r[o][0],a.y=r[o][1]):(a.x=r[o].x,a.y=r[o].y),this.points.push(a),a.y<v&&(v=a.y);return this.calculateArea(v),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r=0,a,v,o=0;o<this.points.length-1;o++)a=this.points[o],v=this.points[o+1],r+=(v.x-a.x)*(a.y+v.y);return a=this.points[0],v=this.points[this.points.length-1],r+=(a.x-v.x)*(v.y+a.y),this.area=-r*.5,this.area},getPoints:function(r,a,v){return c(this,r,a,v)}});h.exports=l},32244:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.points.reverse(),e};h.exports=S},95874:h=>{function S(l,r){var a=l.x-r.x,v=l.y-r.y;return a*a+v*v}function e(l,r,a){var v=r.x,o=r.y,p=a.x-v,m=a.y-o;if(p!==0||m!==0){var g=((l.x-v)*p+(l.y-o)*m)/(p*p+m*m);g>1?(v=a.x,o=a.y):g>0&&(v+=p*g,o+=m*g)}return p=l.x-v,m=l.y-o,p*p+m*m}function d(l,r){for(var a=l[0],v=[a],o,p=1,m=l.length;p<m;p++)o=l[p],S(o,a)>r&&(v.push(o),a=o);return a!==o&&v.push(o),v}function y(l,r,a,v,o){for(var p=v,m,g=r+1;g<a;g++){var x=e(l[g],l[r],l[a]);x>p&&(m=g,p=x)}p>v&&(m-r>1&&y(l,r,m,v,o),o.push(l[m]),a-m>1&&y(l,m,a,v,o))}function c(l,r){var a=l.length-1,v=[l[0]];return y(l,0,a,r,v),v.push(l[a]),v}var u=function(l,r,a){r===void 0&&(r=1),a===void 0&&(a=!1);var v=l.points;if(v.length>2){var o=r*r;a||(v=d(v,o)),l.setTo(c(v,o))}return l};h.exports=u},18974:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(d,y){return d[0]=y[0],d[1]=y[1],d},e=function(d){var y,c=[],u=d.points;for(y=0;y<u.length;y++)c.push([u[y].x,u[y].y]);var l=[];for(c.length>0&&l.push(S([0,0],c[0])),y=0;y<c.length-1;y++){var r=c[y],a=c[y+1],v=r[0],o=r[1],p=a[0],m=a[1];l.push([.85*v+.15*p,.85*o+.15*m]),l.push([.15*v+.85*p,.15*o+.85*m])}return c.length>1&&l.push(S([0,0],c[c.length-1])),d.setTo(l)};h.exports=e},23490:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){for(var c=e.points,u=0;u<c.length;u++)c[u].x+=d,c[u].y+=y;return e};h.exports=S},44359:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8580);d.Clone=e(19631),d.Contains=e(45604),d.ContainsPoint=e(87289),d.Earcut=e(11117),d.GetAABB=e(14045),d.GetNumberArray=e(98286),d.GetPoints=e(89294),d.Perimeter=e(5159),d.Reverse=e(32244),d.Simplify=e(95874),d.Smooth=e(18974),d.Translate=e(23490),h.exports=d},1653:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.width*e.height};h.exports=S},33943:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};h.exports=S},58662:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};h.exports=S},79993:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e.x=d-e.width/2,e.y=y-e.height/2,e};h.exports=S},81572:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=function(c){return new d(c.x,c.y,c.width,c.height)};h.exports=y},94287:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e.width<=0||e.height<=0?!1:e.x<=d&&e.x+e.width>=d&&e.y<=y&&e.y+e.height>=y};h.exports=S},28687:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(94287),y=function(c,u){return d(c,u.x,u.y)};h.exports=y},73222:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d.width*d.height>e.width*e.height?!1:d.x>e.x&&d.x<e.right&&d.right>e.x&&d.right<e.right&&d.y>e.y&&d.y<e.bottom&&d.bottom>e.y&&d.bottom<e.bottom};h.exports=S},29538:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d.setTo(e.x,e.y,e.width,e.height)};h.exports=S},87279:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d===void 0&&(d=[]),d.push({x:e.x,y:e.y}),d.push({x:e.right,y:e.y}),d.push({x:e.right,y:e.bottom}),d.push({x:e.x,y:e.bottom}),d};h.exports=S},19989:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x===d.x&&e.y===d.y&&e.width===d.width&&e.height===d.height};h.exports=S},92628:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6700),y=function(c,u){var l=d(c);return l<d(u)?c.setSize(u.height*l,u.height):c.setSize(u.width,u.width/l),c.setPosition(u.centerX-c.width/2,u.centerY-c.height/2)};h.exports=y},85028:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6700),y=function(c,u){var l=d(c);return l>d(u)?c.setSize(u.height*l,u.height):c.setSize(u.width,u.width/l),c.setPosition(u.centerX-c.width/2,u.centerY-c.height/2)};h.exports=y},71356:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};h.exports=S},21687:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};h.exports=S},80222:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=e(83392),c=function(u,l){if(l===void 0&&(l=new d),u.length===0)return l;for(var r=Number.MAX_VALUE,a=Number.MAX_VALUE,v=y.MIN_SAFE_INTEGER,o=y.MIN_SAFE_INTEGER,p,m,g,x=0;x<u.length;x++)p=u[x],Array.isArray(p)?(m=p[0],g=p[1]):(m=p.x,g=p.y),r=Math.min(r,m),a=Math.min(a,g),v=Math.max(v,m),o=Math.max(o,g);return l.x=r,l.y=a,l.width=v-r,l.height=o-a,l};h.exports=c},75785:(h,S,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=function(c,u,l,r,a){return a===void 0&&(a=new d),a.setTo(Math.min(c,l),Math.min(u,r),Math.abs(c-l),Math.abs(u-r))};h.exports=y},6700:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.height===0?NaN:e.width/e.height};h.exports=S},35242:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){return u===void 0&&(u=new d),u.x=c.centerX,u.y=c.centerY,u};h.exports=y},47698:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85876),y=e(79967),c=function(u,l,r){if(r===void 0&&(r=new y),l<=0||l>=1)return r.x=u.x,r.y=u.y,r;var a=d(u)*l;return l>.5?(a-=u.width+u.height,a<=u.width?(r.x=u.right-a,r.y=u.bottom):(r.x=u.x,r.y=u.bottom-(a-u.width))):a<=u.width?(r.x=u.x+a,r.y=u.y):(r.x=u.right,r.y=u.y+(a-u.width)),r};h.exports=c},54932:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47698),y=e(85876),c=function(u,l,r,a){a===void 0&&(a=[]),!l&&r>0&&(l=y(u)/r);for(var v=0;v<l;v++){var o=v/l;a.push(d(u,o))}return a};h.exports=c},31591:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){return u===void 0&&(u=new d),u.x=c.width,u.y=c.height,u};h.exports=y},7782:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79993),y=function(c,u,l){var r=c.centerX,a=c.centerY;return c.setSize(c.width+u*2,c.height+l*2),d(c,r,a)};h.exports=y},66217:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=e(90205),c=function(u,l,r){return r===void 0&&(r=new d),y(u,l)?(r.x=Math.max(u.x,l.x),r.y=Math.max(u.y,l.y),r.width=Math.min(u.right,l.right)-r.x,r.height=Math.min(u.bottom,l.bottom)-r.y):r.setEmpty(),r};h.exports=c},40053:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85876),y=e(79967),c=function(u,l,r,a){if(a===void 0&&(a=[]),!l&&!r)return a;l?r=Math.round(d(u)/l):l=d(u)/r;for(var v=u.x,o=u.y,p=0,m=0;m<r;m++)switch(a.push(new y(v,o)),p){case 0:v+=l,v>=u.right&&(p=1,o+=v-u.right,v=u.right);break;case 1:o+=l,o>=u.bottom&&(p=2,v-=o-u.bottom,o=u.bottom);break;case 2:v-=l,v<=u.left&&(p=3,o-=u.left-v,v=u.left);break;case 3:o-=l,o<=u.top&&(p=0,o=u.top);break}return a};h.exports=c},86673:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){for(var y=e.x,c=e.right,u=e.y,l=e.bottom,r=0;r<d.length;r++)y=Math.min(y,d[r].x),c=Math.max(c,d[r].x),u=Math.min(u,d[r].y),l=Math.max(l,d[r].y);return e.x=y,e.y=u,e.width=c-y,e.height=l-u,e};h.exports=S},14655:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=Math.min(e.x,d.x),c=Math.max(e.right,d.right);e.x=y,e.width=c-y;var u=Math.min(e.y,d.y),l=Math.max(e.bottom,d.bottom);return e.y=u,e.height=l-u,e};h.exports=S},44755:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=Math.min(e.x,d),u=Math.max(e.right,d);e.x=c,e.width=u-c;var l=Math.min(e.y,y),r=Math.max(e.bottom,y);return e.y=l,e.height=r-l,e};h.exports=S},74466:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e.x+=d,e.y+=y,e};h.exports=S},55946:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x+=d.x,e.y+=d.y,e};h.exports=S},97474:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x<d.right&&e.right>d.x&&e.y<d.bottom&&e.bottom>d.y};h.exports=S},85876:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return 2*(e.width+e.height)};h.exports=S},20243:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=e(75606),c=function(u,l,r){r===void 0&&(r=new d),l=y(l);var a=Math.sin(l),v=Math.cos(l),o=v>0?u.width/2:u.width/-2,p=a>0?u.height/2:u.height/-2;return Math.abs(o*a)<Math.abs(p*v)?p=o*a/v:o=p*v/a,r.x=o+u.centerX,r.y=p+u.centerY,r};h.exports=c},30001:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){return u===void 0&&(u=new d),u.x=c.x+Math.random()*c.width,u.y=c.y+Math.random()*c.height,u};h.exports=y},97691:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),y=e(73222),c=e(79967),u=function(l,r,a){if(a===void 0&&(a=new c),y(l,r))switch(d(0,3)){case 0:a.x=l.x+Math.random()*(r.right-l.x),a.y=l.y+Math.random()*(r.top-l.y);break;case 1:a.x=r.x+Math.random()*(l.right-r.x),a.y=r.bottom+Math.random()*(l.bottom-r.bottom);break;case 2:a.x=l.x+Math.random()*(r.x-l.x),a.y=r.y+Math.random()*(l.bottom-r.y);break;case 3:a.x=r.right+Math.random()*(l.right-r.right),a.y=l.y+Math.random()*(r.bottom-l.y);break}return a};h.exports=u},74118:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(94287),c=e(47698),u=e(54932),l=e(52394),r=e(88829),a=e(30001),v=new d({initialize:function(p,m,g,x){p===void 0&&(p=0),m===void 0&&(m=0),g===void 0&&(g=0),x===void 0&&(x=0),this.type=l.RECTANGLE,this.x=p,this.y=m,this.width=g,this.height=x},contains:function(o,p){return y(this,o,p)},getPoint:function(o,p){return c(this,o,p)},getPoints:function(o,p,m){return u(this,o,p,m)},getRandomPoint:function(o){return a(this,o)},setTo:function(o,p,m,g){return this.x=o,this.y=p,this.width=m,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(o,p){return p===void 0&&(p=o),this.x=o,this.y=p,this},setSize:function(o,p){return p===void 0&&(p=o),this.width=o,this.height=p,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(o){return o===void 0&&(o=new r),o.setTo(this.x,this.y,this.right,this.y),o},getLineB:function(o){return o===void 0&&(o=new r),o.setTo(this.right,this.y,this.right,this.bottom),o},getLineC:function(o){return o===void 0&&(o=new r),o.setTo(this.right,this.bottom,this.x,this.bottom),o},getLineD:function(o){return o===void 0&&(o=new r),o.setTo(this.x,this.bottom,this.x,this.y),o},left:{get:function(){return this.x},set:function(o){o>=this.right?this.width=0:this.width=this.right-o,this.x=o}},right:{get:function(){return this.x+this.width},set:function(o){o<=this.x?this.width=0:this.width=o-this.x}},top:{get:function(){return this.y},set:function(o){o>=this.bottom?this.height=0:this.height=this.bottom-o,this.y=o}},bottom:{get:function(){return this.y+this.height},set:function(o){o<=this.y?this.height=0:this.height=o-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(o){this.x=o-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(o){this.y=o-this.height/2}}});h.exports=v},51828:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.width===d.width&&e.height===d.height};h.exports=S},5691:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return y===void 0&&(y=d),e.width*=d,e.height*=y,e};h.exports=S},58795:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=function(c,u,l){l===void 0&&(l=new d);var r=Math.min(c.x,u.x),a=Math.min(c.y,u.y),v=Math.max(c.right,u.right)-r,o=Math.max(c.bottom,u.bottom)-a;return l.setTo(r,a,v,o)};h.exports=y},66658:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118);d.Area=e(1653),d.Ceil=e(33943),d.CeilAll=e(58662),d.CenterOn=e(79993),d.Clone=e(81572),d.Contains=e(94287),d.ContainsPoint=e(28687),d.ContainsRect=e(73222),d.CopyFrom=e(29538),d.Decompose=e(87279),d.Equals=e(19989),d.FitInside=e(92628),d.FitOutside=e(85028),d.Floor=e(71356),d.FloorAll=e(21687),d.FromPoints=e(80222),d.FromXY=e(75785),d.GetAspectRatio=e(6700),d.GetCenter=e(35242),d.GetPoint=e(47698),d.GetPoints=e(54932),d.GetSize=e(31591),d.Inflate=e(7782),d.Intersection=e(66217),d.MarchingAnts=e(40053),d.MergePoints=e(86673),d.MergeRect=e(14655),d.MergeXY=e(44755),d.Offset=e(74466),d.OffsetPoint=e(55946),d.Overlaps=e(97474),d.Perimeter=e(85876),d.PerimeterPoint=e(20243),d.Random=e(30001),d.RandomOutside=e(97691),d.SameDimensions=e(51828),d.Scale=e(5691),d.Union=e(58795),h.exports=d},19108:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d=e.x1,y=e.y1,c=e.x2,u=e.y2,l=e.x3,r=e.y3;return Math.abs(((l-d)*(u-y)-(c-d)*(r-y))/2)};h.exports=S},41199:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349),y=function(c,u,l){var r=l*(Math.sqrt(3)/2),a=c,v=u,o=c+l/2,p=u+r,m=c-l/2,g=u+r;return new d(a,v,o,p,m,g)};h.exports=y},88730:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(11117),y=e(66349),c=function(u,l,r,a,v){l===void 0&&(l=null),r===void 0&&(r=1),a===void 0&&(a=1),v===void 0&&(v=[]);for(var o=d(u,l),p,m,g,x,C,M,R,P,w,A=0;A<o.length;A+=3)p=o[A],m=o[A+1],g=o[A+2],x=u[p*2]*r,C=u[p*2+1]*a,M=u[m*2]*r,R=u[m*2+1]*a,P=u[g*2]*r,w=u[g*2+1]*a,v.push(new y(x,C,M,R,P,w));return v};h.exports=c},3635:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349),y=function(c,u,l,r){r===void 0&&(r=l);var a=c,v=u,o=c,p=u-r,m=c+l,g=u;return new d(a,v,o,p,m,g)};h.exports=y},1882:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56595),y=e(9640),c=function(u,l,r,a){a===void 0&&(a=d);var v=a(u),o=l-v.x,p=r-v.y;return y(u,o,p)};h.exports=c},56595:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){return u===void 0&&(u=new d),u.x=(c.x1+c.x2+c.x3)/3,u.y=(c.y1+c.y2+c.y3)/3,u};h.exports=y},91835:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736);function y(u,l,r,a){return u*a-l*r}var c=function(u,l){l===void 0&&(l=new d);var r=u.x3,a=u.y3,v=u.x1-r,o=u.y1-a,p=u.x2-r,m=u.y2-a,g=2*y(v,o,p,m),x=y(o,v*v+o*o,m,p*p+m*m),C=y(v,v*v+o*o,p,p*p+m*m);return l.x=r-x/g,l.y=a+C/g,l};h.exports=c},97073:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),y=function(c,u){u===void 0&&(u=new d);var l=c.x1,r=c.y1,a=c.x2,v=c.y2,o=c.x3,p=c.y3,m=a-l,g=v-r,x=o-l,C=p-r,M=m*(l+a)+g*(r+v),R=x*(l+o)+C*(r+p),P=2*(m*(p-v)-g*(o-a)),w,A;if(Math.abs(P)<1e-6){var G=Math.min(l,a,o),O=Math.min(r,v,p);w=(Math.max(l,a,o)-G)*.5,A=(Math.max(r,v,p)-O)*.5,u.x=G+w,u.y=O+A,u.radius=Math.sqrt(w*w+A*A)}else u.x=(C*M-g*R)/P,u.y=(m*R-x*M)/P,w=u.x-l,A=u.y-r,u.radius=Math.sqrt(w*w+A*A);return u};h.exports=y},75974:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349),y=function(c){return new d(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)};h.exports=y},60689:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=e.x3-e.x1,u=e.y3-e.y1,l=e.x2-e.x1,r=e.y2-e.y1,a=d-e.x1,v=y-e.y1,o=c*c+u*u,p=c*l+u*r,m=c*a+u*v,g=l*l+r*r,x=l*a+r*v,C=o*g-p*p,M=C===0?0:1/C,R=(g*m-p*x)*M,P=(o*x-p*m)*M;return R>=0&&P>=0&&R+P<1};h.exports=S},86875:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){y===void 0&&(y=!1),c===void 0&&(c=[]);for(var u=e.x3-e.x1,l=e.y3-e.y1,r=e.x2-e.x1,a=e.y2-e.y1,v=u*u+l*l,o=u*r+l*a,p=r*r+a*a,m=v*p-o*o,g=m===0?0:1/m,x,C,M,R,P,w,A=e.x1,G=e.y1,O=0;O<d.length&&(M=d[O].x-A,R=d[O].y-G,P=u*M+l*R,w=r*M+a*R,x=(p*P-o*w)*g,C=(v*w-o*P)*g,!(x>=0&&C>=0&&x+C<1&&(c.push({x:d[O].x,y:d[O].y}),y)));O++);return c};h.exports=S},51532:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60689),y=function(c,u){return d(c,u.x,u.y)};h.exports=y},42538:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};h.exports=S},18680:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d===void 0&&(d=[]),d.push({x:e.x1,y:e.y1}),d.push({x:e.x2,y:e.y2}),d.push({x:e.x3,y:e.y3}),d};h.exports=S},29977:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.x1===d.x1&&e.y1===d.y1&&e.x2===d.x2&&e.y2===d.y2&&e.x3===d.x3&&e.y3===d.y3};h.exports=S},56088:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=e(16028),c=function(u,l,r){r===void 0&&(r=new d);var a=u.getLineA(),v=u.getLineB(),o=u.getLineC();if(l<=0||l>=1)return r.x=a.x1,r.y=a.y1,r;var p=y(a),m=y(v),g=y(o),x=p+m+g,C=x*l,M=0;return C<p?(M=C/p,r.x=a.x1+(a.x2-a.x1)*M,r.y=a.y1+(a.y2-a.y1)*M):C>p+m?(C-=p+m,M=C/g,r.x=o.x1+(o.x2-o.x1)*M,r.y=o.y1+(o.y2-o.y1)*M):(C-=p,M=C/m,r.x=v.x1+(v.x2-v.x1)*M,r.y=v.y1+(v.y2-v.y1)*M),r};h.exports=c},24402:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),y=e(79967),c=function(u,l,r,a){a===void 0&&(a=[]);var v=u.getLineA(),o=u.getLineB(),p=u.getLineC(),m=d(v),g=d(o),x=d(p),C=m+g+x;!l&&r>0&&(l=C/r);for(var M=0;M<l;M++){var R=C*(M/l),P=0,w=new y;R<m?(P=R/m,w.x=v.x1+(v.x2-v.x1)*P,w.y=v.y1+(v.y2-v.y1)*P):R>m+g?(R-=m+g,P=R/x,w.x=p.x1+(p.x2-p.x1)*P,w.y=p.y1+(p.y2-p.y1)*P):(R-=m,P=R/g,w.x=o.x1+(o.x2-o.x1)*P,w.y=o.y1+(o.y2-o.y1)*P),a.push(w)}return a};h.exports=c},83648:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967);function y(u,l,r,a){var v=u-r,o=l-a,p=v*v+o*o;return Math.sqrt(p)}var c=function(u,l){l===void 0&&(l=new d);var r=u.x1,a=u.y1,v=u.x2,o=u.y2,p=u.x3,m=u.y3,g=y(p,m,v,o),x=y(r,a,p,m),C=y(v,o,r,a),M=g+x+C;return l.x=(r*g+v*x+p*C)/M,l.y=(a*g+o*x+m*C)/M,l};h.exports=c},9640:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e.x1+=d,e.y1+=y,e.x2+=d,e.y2+=y,e.x3+=d,e.y3+=y,e};h.exports=S},95290:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),y=function(c){var u=c.getLineA(),l=c.getLineB(),r=c.getLineC();return d(u)+d(l)+d(r)};h.exports=y},99761:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),y=function(c,u){u===void 0&&(u=new d);var l=c.x2-c.x1,r=c.y2-c.y1,a=c.x3-c.x1,v=c.y3-c.y1,o=Math.random(),p=Math.random();return o+p>=1&&(o=1-o,p=1-p),u.x=c.x1+(l*o+a*p),u.y=c.y1+(r*o+v*p),u};h.exports=y},21934:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19211),y=e(83648),c=function(u,l){var r=y(u);return d(u,r.x,r.y,l)};h.exports=c},68454:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19211),y=function(c,u,l){return d(c,u.x,u.y,l)};h.exports=y},19211:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=Math.cos(c),l=Math.sin(c),r=e.x1-d,a=e.y1-y;return e.x1=r*u-a*l+d,e.y1=r*l+a*u+y,r=e.x2-d,a=e.y2-y,e.x2=r*u-a*l+d,e.y2=r*l+a*u+y,r=e.x3-d,a=e.y3-y,e.x3=r*u-a*l+d,e.y3=r*l+a*u+y,e};h.exports=S},66349:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(60689),c=e(56088),u=e(24402),l=e(52394),r=e(88829),a=e(99761),v=new d({initialize:function(p,m,g,x,C,M){p===void 0&&(p=0),m===void 0&&(m=0),g===void 0&&(g=0),x===void 0&&(x=0),C===void 0&&(C=0),M===void 0&&(M=0),this.type=l.TRIANGLE,this.x1=p,this.y1=m,this.x2=g,this.y2=x,this.x3=C,this.y3=M},contains:function(o,p){return y(this,o,p)},getPoint:function(o,p){return c(this,o,p)},getPoints:function(o,p,m){return u(this,o,p,m)},getRandomPoint:function(o){return a(this,o)},setTo:function(o,p,m,g,x,C){return o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=0),g===void 0&&(g=0),x===void 0&&(x=0),C===void 0&&(C=0),this.x1=o,this.y1=p,this.x2=m,this.y2=g,this.x3=x,this.y3=C,this},getLineA:function(o){return o===void 0&&(o=new r),o.setTo(this.x1,this.y1,this.x2,this.y2),o},getLineB:function(o){return o===void 0&&(o=new r),o.setTo(this.x2,this.y2,this.x3,this.y3),o},getLineC:function(o){return o===void 0&&(o=new r),o.setTo(this.x3,this.y3,this.x1,this.y1),o},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(o){var p=0;this.x1<=this.x2&&this.x1<=this.x3?p=this.x1-o:this.x2<=this.x1&&this.x2<=this.x3?p=this.x2-o:p=this.x3-o,this.x1-=p,this.x2-=p,this.x3-=p}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(o){var p=0;this.x1>=this.x2&&this.x1>=this.x3?p=this.x1-o:this.x2>=this.x1&&this.x2>=this.x3?p=this.x2-o:p=this.x3-o,this.x1-=p,this.x2-=p,this.x3-=p}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(o){var p=0;this.y1<=this.y2&&this.y1<=this.y3?p=this.y1-o:this.y2<=this.y1&&this.y2<=this.y3?p=this.y2-o:p=this.y3-o,this.y1-=p,this.y2-=p,this.y3-=p}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(o){var p=0;this.y1>=this.y2&&this.y1>=this.y3?p=this.y1-o:this.y2>=this.y1&&this.y2>=this.y3?p=this.y2-o:p=this.y3-o,this.y1-=p,this.y2-=p,this.y3-=p}}});h.exports=v},87619:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349);d.Area=e(19108),d.BuildEquilateral=e(41199),d.BuildFromPolygon=e(88730),d.BuildRight=e(3635),d.CenterOn=e(1882),d.Centroid=e(56595),d.CircumCenter=e(91835),d.CircumCircle=e(97073),d.Clone=e(75974),d.Contains=e(60689),d.ContainsArray=e(86875),d.ContainsPoint=e(51532),d.CopyFrom=e(42538),d.Decompose=e(18680),d.Equals=e(29977),d.GetPoint=e(56088),d.GetPoints=e(24402),d.InCenter=e(83648),d.Perimeter=e(95290),d.Offset=e(9640),d.Random=e(99761),d.Rotate=e(21934),d.RotateAroundPoint=e(68454),d.RotateAroundXY=e(19211),h.exports=d},27395:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:d,hitAreaCallback:y,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};h.exports=S},18104:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return function(y,c,u,l){var r=e.getPixelAlpha(c,u,l.texture.key,l.frame.name);return r&&r>=d}};h.exports=S},69898:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72687),c=e(6659),u=e(33963),l=e(97081),r=e(71064),a=e(7905),v=e(40398),o=e(37579),p=e(69360),m=e(64462),g=new d({initialize:function(C,M){this.game=C,this.scaleManager,this.canvas,this.config=M,this.enabled=!0,this.events=new c,this.isOver=!0,this.defaultCursor="",this.keyboard=M.inputKeyboard?new r(this):null,this.mouse=M.inputMouse?new a(this):null,this.touch=M.inputTouch?new o(this):null,this.pointers=[],this.pointersTotal=M.inputActivePointers,M.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var R=0;R<=this.pointersTotal;R++){var P=new v(this,R);P.smoothFactor=M.inputSmoothFactor,this.pointers.push(P)}this.mousePointer=M.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new p,this._tempMatrix2=new p,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],C.events.once(l.BOOT,this.boot,this)},boot:function(){var x=this.game,C=x.events;this.canvas=x.canvas,this.scaleManager=x.scale,this.events.emit(u.MANAGER_BOOT),C.on(l.PRE_RENDER,this.preRender,this),C.once(l.DESTROY,this.destroy,this)},setCanvasOver:function(x){this.isOver=!0,this.events.emit(u.GAME_OVER,x)},setCanvasOut:function(x){this.isOver=!1,this.events.emit(u.GAME_OUT,x)},preRender:function(){var x=this.game.loop.now,C=this.game.loop.delta,M=this.game.scene.getScenes(!0,!0);this.time=x,this.events.emit(u.MANAGER_UPDATE);for(var R=0;R<M.length;R++){var P=M[R];if(P.sys.input&&P.sys.input.updatePoll(x,C)&&this.globalTopOnly)return}},setDefaultCursor:function(x){this.defaultCursor=x,this.canvas.style.cursor!==x&&(this.canvas.style.cursor=x)},setCursor:function(x){x.cursor&&(this.canvas.style.cursor=x.cursor)},resetCursor:function(x){x.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(x){x===void 0&&(x=1);var C=[];this.pointersTotal+x>10&&(x=10-this.pointersTotal);for(var M=0;M<x;M++){var R=this.pointers.length,P=new v(this,R);P.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(P),this.pointersTotal++,C.push(P)}return C},updateInputPlugins:function(x,C){var M=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var R=0;R<M.length;R++){var P=M[R];if(P.sys.input){var w=P.sys.input.update(x,C);if(w&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(x){for(var C=this.pointers,M=[],R=0;R<x.changedTouches.length;R++)for(var P=x.changedTouches[R],w=1;w<this.pointersTotal;w++){var A=C[w];if(!A.active){A.touchstart(P,x),this.activePointer=A,M.push(A);break}}this.updateInputPlugins(y.TOUCH_START,M)},onTouchMove:function(x){for(var C=this.pointers,M=[],R=0;R<x.changedTouches.length;R++)for(var P=x.changedTouches[R],w=1;w<this.pointersTotal;w++){var A=C[w];if(A.active&&A.identifier===P.identifier){var G=document.elementFromPoint(P.pageX,P.pageY),O=G===this.canvas;!this.isOver&&O?this.setCanvasOver(x):this.isOver&&!O&&this.setCanvasOut(x),this.isOver&&(A.touchmove(P,x),this.activePointer=A,M.push(A));break}}this.updateInputPlugins(y.TOUCH_MOVE,M)},onTouchEnd:function(x){for(var C=this.pointers,M=[],R=0;R<x.changedTouches.length;R++)for(var P=x.changedTouches[R],w=1;w<this.pointersTotal;w++){var A=C[w];if(A.active&&A.identifier===P.identifier){A.touchend(P,x),M.push(A);break}}this.updateInputPlugins(y.TOUCH_END,M)},onTouchCancel:function(x){for(var C=this.pointers,M=[],R=0;R<x.changedTouches.length;R++)for(var P=x.changedTouches[R],w=1;w<this.pointersTotal;w++){var A=C[w];if(A.active&&A.identifier===P.identifier){A.touchcancel(P,x),M.push(A);break}}this.updateInputPlugins(y.TOUCH_CANCEL,M)},onMouseDown:function(x){var C=this.mousePointer;C.down(x),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(y.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(x){var C=this.mousePointer;C.move(x),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(y.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(x){var C=this.mousePointer;C.up(x),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(y.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(x){var C=this.mousePointer;C.wheel(x),this.activePointer=C,this.updateInputPlugins(y.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(x){var C=this.mouse.locked;this.mousePointer.locked=C,this.events.emit(u.POINTERLOCK_CHANGE,x,C)},inputCandidate:function(x,C){var M=x.input;if(!M||!M.enabled||!x.willRender(C))return!1;var R=!0,P=x.parentContainer;if(P)do{if(!P.willRender(C)){R=!1;break}P=P.parentContainer}while(P);return R},hitTest:function(x,C,M,R){R===void 0&&(R=this._tempHitTest);var P=this._tempPoint,w=M.scrollX,A=M.scrollY;R.length=0;var G=x.x,O=x.y;M.getWorldPoint(G,O,P),x.worldX=P.x,x.worldY=P.y;for(var L={x:0,y:0},I=this._tempMatrix,F=this._tempMatrix2,D=0;D<C.length;D++){var V=C[D];if(this.inputCandidate(V,M)){var k=P.x+w*V.scrollFactorX-w,W=P.y+A*V.scrollFactorY-A;V.parentContainer?(V.getWorldTransformMatrix(I,F),I.applyInverse(k,W,L)):m(k,W,V.x,V.y,V.rotation,V.scaleX,V.scaleY,L),this.pointWithinHitArea(V,L.x,L.y)&&R.push(V)}}return R},pointWithinHitArea:function(x,C,M){C+=x.displayOriginX,M+=x.displayOriginY;var R=x.input;return R&&R.hitAreaCallback(R.hitArea,C,M,x)?(R.localX=C,R.localY=M,!0):!1},pointWithinInteractiveObject:function(x,C,M){return x.hitArea?(C+=x.gameObject.displayOriginX,M+=x.gameObject.displayOriginY,x.localX=C,x.localY=M,x.hitAreaCallback(x.hitArea,C,M,x)):!1},transformPointer:function(x,C,M,R){var P=x.position,w=x.prevPosition;w.x=P.x,w.y=P.y;var A=this.scaleManager.transformX(C),G=this.scaleManager.transformY(M),O=x.smoothFactor;!R||O===0?(P.x=A,P.y=G):(P.x=A*O+w.x*(1-O),P.y=G*O+w.y*(1-O))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(l.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var x=0;x<this.pointers.length;x++)this.pointers[x].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});h.exports=g},12499:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),y=e(65650),c=e(56694),u=e(72687),l=e(27395),r=e(18104),a=e(53996),v=e(95669),o=e(72313),p=e(33963),m=e(6659),g=e(72632),x=e(52394),C=e(63399),M=e(42911),R=e(91963),P=e(74118),w=e(94287),A=e(7599),G=e(66349),O=e(60689),L=new c({Extends:m,initialize:function(F){m.call(this),this.scene=F,this.systems=F.sys,this.settings=F.sys.settings,this.manager=F.sys.game.input,this.pluginEvents=new m,this.enabled=!0,this.displayList,this.cameras,C.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var D={cancelled:!1};this._eventContainer={stopPropagation:function(){D.cancelled=!0}},this._eventData=D,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,F.sys.events.once(A.BOOT,this.boot,this),F.sys.events.on(A.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(A.DESTROY,this.destroy,this),this.pluginEvents.emit(p.BOOT)},start:function(){var I=this.systems.events;I.on(A.TRANSITION_START,this.transitionIn,this),I.on(A.TRANSITION_OUT,this.transitionOut,this),I.on(A.TRANSITION_COMPLETE,this.transitionComplete,this),I.on(A.PRE_UPDATE,this.preUpdate,this),I.once(A.SHUTDOWN,this.shutdown,this),this.manager.events.on(p.GAME_OUT,this.onGameOut,this),this.manager.events.on(p.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(p.START)},onGameOver:function(I){this.isActive()&&this.emit(p.GAME_OVER,I.timeStamp,I)},onGameOut:function(I){this.isActive()&&this.emit(p.GAME_OUT,I.timeStamp,I)},preUpdate:function(){this.pluginEvents.emit(p.PRE_UPDATE);var I=this._pendingRemoval,F=this._pendingInsertion,D=I.length,V=F.length;if(!(D===0&&V===0)){for(var k=this._list,W=0;W<D;W++){var X=I[W],H=k.indexOf(X);H>-1&&(k.splice(H,1),this.clear(X,!0))}this._pendingRemoval.length=0,this._list=k.concat(F.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(I,F){if(!this.isActive())return!1;if(this.pluginEvents.emit(p.UPDATE,I,F),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var D,V=this.manager,k=V.pointers,W=V.pointersTotal;for(D=0;D<W;D++)k[D].updateMotion();if(this._list.length===0)return!1;var X=this.pollRate;if(X===-1)return!1;if(X>0)if(this._pollTimer-=F,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var H=!1;for(D=0;D<W;D++){var $=0,z=k[D];this._tempZones=[],this._temp=this.hitTestPointer(z),this.sortGameObjects(this._temp,z),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),$+=this.processOverOutEvents(z),this.getDragState(z)===2&&this.processDragThresholdEvent(z,I),$>0&&(H=!0)}return H},update:function(I,F){if(!this.isActive())return!1;for(var D=F.length,V=!1,k=0;k<D;k++){var W=0,X=F[k];switch(this._tempZones=[],this._temp=this.hitTestPointer(X),this.sortGameObjects(this._temp,X),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),I){case u.MOUSE_DOWN:W+=this.processDragDownEvent(X),W+=this.processDownEvents(X),W+=this.processOverOutEvents(X);break;case u.MOUSE_UP:W+=this.processDragUpEvent(X),W+=this.processUpEvents(X),W+=this.processOverOutEvents(X);break;case u.TOUCH_START:W+=this.processDragDownEvent(X),W+=this.processDownEvents(X),W+=this.processOverEvents(X);break;case u.TOUCH_END:case u.TOUCH_CANCEL:W+=this.processDragUpEvent(X),W+=this.processUpEvents(X),W+=this.processOutEvents(X);break;case u.MOUSE_MOVE:case u.TOUCH_MOVE:W+=this.processDragMoveEvent(X),W+=this.processMoveEvents(X),W+=this.processOverOutEvents(X);break;case u.MOUSE_WHEEL:W+=this.processWheelEvent(X);break}W>0&&(V=!0)}return this._updatedThisFrame=!0,V},clear:function(I,F){F===void 0&&(F=!1),this.disable(I);var D=I.input;D&&(this.removeDebug(I),D.gameObject=void 0,D.target=void 0,D.hitArea=void 0,D.hitAreaCallback=void 0,D.callbackContext=void 0,I.input=null),F||this.queueForRemoval(I);var V=this._draggable.indexOf(I);return V>-1&&this._draggable.splice(V,1),I},disable:function(I){var F=I.input;F&&(F.enabled=!1,F.dragState=0);var D=this._temp,V=this._drag,k=this._over,W=this.manager,X=D.indexOf(I);X>-1&&D.splice(X,1);for(var H=0;H<W.pointersTotal;H++)X=V[H].indexOf(I),X>-1&&V[H].splice(X,1),X=k[H].indexOf(I),X>-1&&(k[H].splice(X,1),W.resetCursor(F));return this},enable:function(I,F,D,V){return V===void 0&&(V=!1),I.input?I.input.enabled=!0:this.setHitArea(I,F,D),I.input&&V&&!I.input.dropZone&&(I.input.dropZone=V),this},hitTestPointer:function(I){for(var F=this.cameras.getCamerasBelowPointer(I),D=0;D<F.length;D++){for(var V=F[D],k=this.manager.hitTest(I,this._list,V),W=0;W<k.length;W++){var X=k[W];X.input.dropZone&&this._tempZones.push(X)}if(k.length>0)return I.camera=V,k}return I.camera=F[0],[]},processDownEvents:function(I){var F=0,D=this._temp,V=this._eventData,k=this._eventContainer;V.cancelled=!1;for(var W=!1,X=0;X<D.length;X++){var H=D[X];if(!(!H.input||!H.input.enabled)){if(F++,H.emit(p.GAMEOBJECT_POINTER_DOWN,I,H.input.localX,H.input.localY,k),V.cancelled||!H.input||!H.input.enabled){W=!0;break}if(this.emit(p.GAMEOBJECT_DOWN,I,H,k),V.cancelled||!H.input){W=!0;break}}}return!W&&this.manager&&(I.downElement===this.manager.game.canvas?this.emit(p.POINTER_DOWN,I,D):this.emit(p.POINTER_DOWN_OUTSIDE,I)),F},getDragState:function(I){return this._dragState[I.id]},setDragState:function(I,F){this._dragState[I.id]=F},processDragThresholdEvent:function(I,F){var D=!1,V=this.dragTimeThreshold,k=this.dragDistanceThreshold;if((k>0&&a(I.x,I.y,I.downX,I.downY)>=k||V>0&&F>=I.downTime+V)&&(D=!0),D)return this.setDragState(I,3),this.processDragStartList(I)},processDragStartList:function(I){if(this.getDragState(I)!==3)return 0;for(var F=this._drag[I.id],D=0;D<F.length;D++){var V=F[D],k=V.input;k.dragState=2,k.dragStartX=V.x,k.dragStartY=V.y,k.dragStartXGlobal=I.worldX,k.dragStartYGlobal=I.worldY,k.dragX=k.dragStartXGlobal-k.dragStartX,k.dragY=k.dragStartYGlobal-k.dragStartY,V.emit(p.GAMEOBJECT_DRAG_START,I,k.dragX,k.dragY),this.emit(p.DRAG_START,I,V)}return this.setDragState(I,4),F.length},processDragDownEvent:function(I){var F=this._temp;if(this._draggable.length===0||F.length===0||!I.primaryDown||this.getDragState(I)!==0)return 0;this.setDragState(I,1);for(var D=[],V=0;V<F.length;V++){var k=F[V];k.input.draggable&&k.input.dragState===0&&D.push(k)}return D.length===0?(this.setDragState(I,0),0):(D.length>1&&(this.sortGameObjects(D,I),this.topOnly&&D.splice(1)),this._drag[I.id]=D,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(I,3),this.processDragStartList(I)):(this.setDragState(I,2),0))},processDragMoveEvent:function(I){if(this.getDragState(I)===2&&this.processDragThresholdEvent(I,this.manager.game.loop.now),this.getDragState(I)!==4)return 0;for(var F=this._tempZones,D=this._drag[I.id],V=0;V<D.length;V++){var k=D[V],W=k.input,X=W.target;if(X){var H=F.indexOf(X);H===0?(k.emit(p.GAMEOBJECT_DRAG_OVER,I,X),this.emit(p.DRAG_OVER,I,k,X)):H>0?(k.emit(p.GAMEOBJECT_DRAG_LEAVE,I,X),this.emit(p.DRAG_LEAVE,I,k,X),W.target=F[0],X=W.target,k.emit(p.GAMEOBJECT_DRAG_ENTER,I,X),this.emit(p.DRAG_ENTER,I,k,X)):(k.emit(p.GAMEOBJECT_DRAG_LEAVE,I,X),this.emit(p.DRAG_LEAVE,I,k,X),F[0]?(W.target=F[0],X=W.target,k.emit(p.GAMEOBJECT_DRAG_ENTER,I,X),this.emit(p.DRAG_ENTER,I,k,X)):W.target=null)}else!X&&F[0]&&(W.target=F[0],X=W.target,k.emit(p.GAMEOBJECT_DRAG_ENTER,I,X),this.emit(p.DRAG_ENTER,I,k,X));var $,z;if(!k.parentContainer)$=I.worldX-W.dragX,z=I.worldY-W.dragY;else{var b=I.worldX-W.dragStartXGlobal,B=I.worldY-W.dragStartYGlobal,N=k.getParentRotation(),U=b*Math.cos(N)+B*Math.sin(N),Y=B*Math.cos(N)-b*Math.sin(N);U*=1/k.parentContainer.scaleX,Y*=1/k.parentContainer.scaleY,$=U+W.dragStartX,z=Y+W.dragStartY}k.emit(p.GAMEOBJECT_DRAG,I,$,z),this.emit(p.DRAG,I,k,$,z)}return D.length},processDragUpEvent:function(I){for(var F=this._drag[I.id],D=0;D<F.length;D++){var V=F[D],k=V.input;if(k&&k.dragState===2){k.dragState=0,k.dragX=k.localX-V.displayOriginX,k.dragY=k.localY-V.displayOriginY;var W=!1,X=k.target;X&&(V.emit(p.GAMEOBJECT_DROP,I,X),this.emit(p.DROP,I,V,X),k.target=null,W=!0),V.input&&V.input.enabled&&(V.emit(p.GAMEOBJECT_DRAG_END,I,k.dragX,k.dragY,W),this.emit(p.DRAG_END,I,V,W))}}return this.setDragState(I,0),F.splice(0),0},processMoveEvents:function(I){var F=0,D=this._temp,V=this._eventData,k=this._eventContainer;V.cancelled=!1;for(var W=!1,X=0;X<D.length;X++){var H=D[X];if(!(!H.input||!H.input.enabled)){if(F++,H.emit(p.GAMEOBJECT_POINTER_MOVE,I,H.input.localX,H.input.localY,k),V.cancelled||!H.input||!H.input.enabled){W=!0;break}if(this.emit(p.GAMEOBJECT_MOVE,I,H,k),V.cancelled||!H.input||!H.input.enabled){W=!0;break}if(this.topOnly)break}}return W||this.emit(p.POINTER_MOVE,I,D),F},processWheelEvent:function(I){var F=0,D=this._temp,V=this._eventData,k=this._eventContainer;V.cancelled=!1;for(var W=!1,X=I.deltaX,H=I.deltaY,$=I.deltaZ,z=0;z<D.length;z++){var b=D[z];if(!(!b.input||!b.input.enabled)){if(F++,b.emit(p.GAMEOBJECT_POINTER_WHEEL,I,X,H,$,k),V.cancelled||!b.input||!b.input.enabled){W=!0;break}if(this.emit(p.GAMEOBJECT_WHEEL,I,b,X,H,$,k),V.cancelled||!b.input||!b.input.enabled){W=!0;break}}}return W||this.emit(p.POINTER_WHEEL,I,D,X,H,$),F},processOverEvents:function(I){var F=this._temp,D=0,V=F.length,k=[];if(V>0){var W=this.manager,X=this._eventData,H=this._eventContainer;X.cancelled=!1;for(var $=!1,z=0;z<V;z++){var b=F[z];if(!(!b.input||!b.input.enabled)){if(k.push(b),W.setCursor(b.input),b.emit(p.GAMEOBJECT_POINTER_OVER,I,b.input.localX,b.input.localY,H),D++,X.cancelled||!b.input||!b.input.enabled){$=!0;break}if(this.emit(p.GAMEOBJECT_OVER,I,b,H),X.cancelled||!b.input||!b.input.enabled){$=!0;break}}}$||this.emit(p.POINTER_OVER,I,k)}return this._over[I.id]=k,D},processOutEvents:function(I){var F=this._over[I.id],D=0,V=F.length;if(V>0){var k=this.manager,W=this._eventData,X=this._eventContainer;W.cancelled=!1;var H=!1;this.sortGameObjects(F,I);for(var $=0;$<V;$++){var z=F[$];if(z=F[$],!(!z.input||!z.input.enabled)){if(k.resetCursor(z.input),z.emit(p.GAMEOBJECT_POINTER_OUT,I,X),D++,W.cancelled||!z.input||!z.input.enabled){H=!0;break}if(this.emit(p.GAMEOBJECT_OUT,I,z,X),W.cancelled||!z.input||!z.input.enabled){H=!0;break}H||this.emit(p.POINTER_OUT,I,F)}}this._over[I.id]=[]}return D},processOverOutEvents:function(I){var F=this._temp,D,V,k=[],W=[],X=[],H=this._over[I.id],$=this._drag[I.id],z=this.manager;for(D=0;D<H.length;D++)V=H[D],F.indexOf(V)===-1&&$.indexOf(V)===-1?k.push(V):X.push(V);for(D=0;D<F.length;D++)V=F[D],H.indexOf(V)===-1&&W.push(V);var b=k.length,B=0,N=this._eventData,U=this._eventContainer;N.cancelled=!1;var Y=!1;if(b>0){for(this.sortGameObjects(k,I),D=0;D<b;D++)if(V=k[D],!(!V.input||!V.input.enabled)){if(z.resetCursor(V.input),V.emit(p.GAMEOBJECT_POINTER_OUT,I,U),B++,N.cancelled||!V.input||!V.input.enabled){Y=!0;break}if(this.emit(p.GAMEOBJECT_OUT,I,V,U),N.cancelled||!V.input||!V.input.enabled){Y=!0;break}}Y||this.emit(p.POINTER_OUT,I,k)}if(b=W.length,N.cancelled=!1,Y=!1,b>0){for(this.sortGameObjects(W,I),D=0;D<b;D++)if(V=W[D],!(!V.input||!V.input.enabled)){if(z.setCursor(V.input),V.emit(p.GAMEOBJECT_POINTER_OVER,I,V.input.localX,V.input.localY,U),B++,N.cancelled||!V.input||!V.input.enabled){Y=!0;break}if(this.emit(p.GAMEOBJECT_OVER,I,V,U),N.cancelled||!V.input||!V.input.enabled){Y=!0;break}}Y||this.emit(p.POINTER_OVER,I,W)}return H=X.concat(W),this._over[I.id]=this.sortGameObjects(H,I),B},processUpEvents:function(I){var F=this._temp,D=this._eventData,V=this._eventContainer;D.cancelled=!1;for(var k=!1,W=0;W<F.length;W++){var X=F[W];if(!(!X.input||!X.input.enabled)){if(X.emit(p.GAMEOBJECT_POINTER_UP,I,X.input.localX,X.input.localY,V),D.cancelled||!X.input||!X.input.enabled){k=!0;break}if(this.emit(p.GAMEOBJECT_UP,I,X,V),D.cancelled||!X.input||!X.input.enabled){k=!0;break}}}return!k&&this.manager&&(I.upElement===this.manager.game.canvas?this.emit(p.POINTER_UP,I,F):this.emit(p.POINTER_UP_OUTSIDE,I)),F.length},queueForInsertion:function(I){return this._pendingInsertion.indexOf(I)===-1&&this._list.indexOf(I)===-1&&this._pendingInsertion.push(I),this},queueForRemoval:function(I){return this._pendingRemoval.push(I),this},setDraggable:function(I,F){F===void 0&&(F=!0),Array.isArray(I)||(I=[I]);for(var D=0;D<I.length;D++){var V=I[D];V.input.draggable=F;var k=this._draggable.indexOf(V);F&&k===-1?this._draggable.push(V):!F&&k>-1&&this._draggable.splice(k,1)}return this},makePixelPerfect:function(I){I===void 0&&(I=1);var F=this.systems.textures;return r(F,I)},setHitArea:function(I,F,D){if(F===void 0)return this.setHitAreaFromTexture(I);Array.isArray(I)||(I=[I]);var V=!1,k=!1,W=!1,X=!1,H=!1,$=!0;if(M(F)){var z=F;F=g(z,"hitArea",null),D=g(z,"hitAreaCallback",null),V=g(z,"draggable",!1),k=g(z,"dropZone",!1),W=g(z,"cursor",!1),X=g(z,"useHandCursor",!1),H=g(z,"pixelPerfect",!1);var b=g(z,"alphaTolerance",1);H&&(F={},D=this.makePixelPerfect(b)),(!F||!D)&&(this.setHitAreaFromTexture(I),$=!1)}else typeof F=="function"&&!D&&(D=F,F={});for(var B=0;B<I.length;B++){var N=I[B];if(H&&N.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var U=N.input?N.input:l(N,F,D);U.customHitArea=$,U.dropZone=k,U.cursor=X?"pointer":W,N.input=U,V&&this.setDraggable(N),this.queueForInsertion(N)}return this},setHitAreaCircle:function(I,F,D,V,k){k===void 0&&(k=y);var W=new d(F,D,V);return this.setHitArea(I,W,k)},setHitAreaEllipse:function(I,F,D,V,k,W){W===void 0&&(W=o);var X=new v(F,D,V,k);return this.setHitArea(I,X,W)},setHitAreaFromTexture:function(I,F){F===void 0&&(F=w),Array.isArray(I)||(I=[I]);for(var D=0;D<I.length;D++){var V=I[D],k=V.frame,W=0,X=0;if(V.width?(W=V.width,X=V.height):k&&(W=k.realWidth,X=k.realHeight),V.type==="Container"&&(W===0||X===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}W!==0&&X!==0&&(V.input=l(V,new P(0,0,W,X),F),this.queueForInsertion(V))}return this},setHitAreaRectangle:function(I,F,D,V,k,W){W===void 0&&(W=w);var X=new P(F,D,V,k);return this.setHitArea(I,X,W)},setHitAreaTriangle:function(I,F,D,V,k,W,X,H){H===void 0&&(H=O);var $=new G(F,D,V,k,W,X);return this.setHitArea(I,$,H)},enableDebug:function(I,F){F===void 0&&(F=65280);var D=I.input;if(!D||!D.hitArea)return this;var V=D.hitArea,k=V.type,W=D.hitAreaDebug,X=this.systems.add,H=this.systems.updateList;W&&(H.remove(W),W.destroy(),W=null);var $=0,z=0;switch(k){case x.CIRCLE:W=X.arc(0,0,V.radius),$=V.x-V.radius,z=V.y-V.radius;break;case x.ELLIPSE:W=X.ellipse(0,0,V.width,V.height),$=V.x-V.width/2,z=V.y-V.height/2;break;case x.LINE:W=X.line(0,0,V.x1,V.y1,V.x2,V.y2);break;case x.POLYGON:W=X.polygon(0,0,V.points);break;case x.RECTANGLE:W=X.rectangle(0,0,V.width,V.height),$=V.x,z=V.y;break;case x.TRIANGLE:W=X.triangle(0,0,V.x1,V.y1,V.x2,V.y2,V.x3,V.y3);break}return W&&(W.isFilled=!1,W.strokeColor=F,W.preUpdate=function(){W.setStrokeStyle(1/I.scale,W.strokeColor),W.setDisplayOrigin(I.displayOriginX,I.displayOriginY);var b=I.x,B=I.y,N=I.rotation,U=I.scaleX,Y=I.scaleY;if(I.parentContainer){var K=I.getWorldTransformMatrix();b=K.tx,B=K.ty,N=K.rotation,U=K.scaleX,Y=K.scaleY}W.setRotation(N),W.setScale(U,Y),W.setPosition(b+$*U,B+z*Y),W.setScrollFactor(I.scrollFactorX,I.scrollFactorY),W.setDepth(I.depth)},H.add(W),D.hitAreaDebug=W),this},removeDebug:function(I){var F=I.input;if(F&&F.hitAreaDebug){var D=F.hitAreaDebug;this.systems.updateList.remove(D),D.destroy(),F.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(I){return this.pollRate=I,this._pollTimer=0,this},setGlobalTopOnly:function(I){return this.manager.globalTopOnly=I,this},setTopOnly:function(I){return this.topOnly=I,this},sortGameObjects:function(I,F){if(I.length<2||!F.camera)return I;var D=F.camera.renderList;return I.sort(function(V,k){var W=Math.max(D.indexOf(V),0),X=Math.max(D.indexOf(k),0);return X-W})},sortDropZones:function(I){return I.length<2?I:(this.scene.sys.depthSort(),I.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(I,F){if(!I.parentContainer&&!F.parentContainer)return this.displayList.getIndex(F)-this.displayList.getIndex(I);if(I.parentContainer===F.parentContainer)return F.parentContainer.getIndex(F)-I.parentContainer.getIndex(I);if(I.parentContainer===F)return-1;if(F.parentContainer===I)return 1;for(var D=I.getIndexList(),V=F.getIndexList(),k=Math.min(D.length,V.length),W=0;W<k;W++){var X=D[W],H=V[W];if(X!==H)return H-X}return V.length-D.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(I){return this.manager.addPointer(I)},setDefaultCursor:function(I){return this.manager.setDefaultCursor(I),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(p.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var I=0;I<10;I++)this._drag[I]=[],this._over[I]=[];this.removeAllListeners();var F=this.manager;F.canvas.style.cursor=F.defaultCursor;var D=this.systems.events;D.off(A.TRANSITION_START,this.transitionIn,this),D.off(A.TRANSITION_OUT,this.transitionOut,this),D.off(A.TRANSITION_COMPLETE,this.transitionComplete,this),D.off(A.PRE_UPDATE,this.preUpdate,this),F.events.off(p.GAME_OUT,this.onGameOut,this),F.events.off(p.GAME_OVER,this.onGameOver,this),D.off(A.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var I=this.manager.pointers,F=0;F<I.length;F++)I[F].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(p.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(A.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});R.register("InputPlugin",L,"input"),h.exports=L},63399:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),y={},c={};c.register=function(u,l,r,a,v){y[u]={plugin:l,mapping:r,settingsKey:a,configKey:v}},c.getPlugin=function(u){return y[u]},c.install=function(u){var l=u.scene.sys,r=l.settings.input,a=l.game.config;for(var v in y){var o=y[v].plugin,p=y[v].mapping,m=y[v].settingsKey,g=y[v].configKey;d(r,m,a[g])&&(u[p]=new o(u))}},c.remove=function(u){y.hasOwnProperty(u)&&delete y[u]},h.exports=c},40398:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(90447),y=e(56694),c=e(53996),u=e(88456),l=e(44521),r=e(93736),a=e(36580),v=new y({initialize:function(p,m){this.manager=p,this.id=m,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=m===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(o){var p=o.getWorldPoint(this.x,this.y);return this.worldX=p.x,this.worldY=p.y,this},positionToCamera:function(o,p){return o.getWorldPoint(this.x,this.y,p)},updateMotion:function(){var o=this.position.x,p=this.position.y,m=this.midPoint.x,g=this.midPoint.y;if(!(o===m&&p===g)){var x=l(this.motionFactor,m,o),C=l(this.motionFactor,g,p);u(x,o,.1)&&(x=o),u(C,p,.1)&&(C=p),this.midPoint.set(x,C);var M=o-x,R=p-C;this.velocity.set(M,R),this.angle=d(x,C,o,p),this.distance=Math.sqrt(M*M+R*R)}},up:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.button=o.button,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),o.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=o.timeStamp,this.wasTouch=!1)},down:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.button=o.button,this.downElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),o.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),a.macOS&&o.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=o.timeStamp),this.wasTouch=!1},move:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.manager.transformPointer(this,o.pageX,o.pageY,!0),this.locked&&(this.movementX=o.movementX||o.mozMovementX||o.webkitMovementX||0,this.movementY=o.movementY||o.mozMovementY||o.webkitMovementY||0),this.moveTime=o.timeStamp,this.wasTouch=!1},wheel:function(o){"buttons"in o&&(this.buttons=o.buttons),this.event=o,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.deltaX=o.deltaX,this.deltaY=o.deltaY,this.deltaZ=o.deltaZ,this.wasTouch=!1},touchstart:function(o,p){o.pointerId&&(this.pointerId=o.pointerId),this.identifier=o.identifier,this.target=o.target,this.active=!0,this.buttons=1,this.event=p,this.downElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=p.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(o,p){this.event=p,this.manager.transformPointer(this,o.pageX,o.pageY,!0),this.moveTime=p.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(o,p){this.buttons=0,this.event=p,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(o,p){this.buttons=0,this.event=p,this.upElement=o.target,this.manager.transformPointer(this,o.pageX,o.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=p.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?c(this.downX,this.downY,this.x,this.y):c(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?d(this.downX,this.downY,this.x,this.y):d(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(o,p){o===void 0&&(o=10),p===void 0&&(p=[]);for(var m=this.prevPosition.x,g=this.prevPosition.y,x=this.position.x,C=this.position.y,M=0;M<o;M++){var R=1/o*M;p[M]={x:l(R,m,x),y:l(R,g,C)}}return p},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(o){this.position.x=o}},y:{get:function(){return this.position.y},set:function(o){this.position.y=o}},time:{get:function(){return this.event?this.event.timeStamp:0}}});h.exports=v},72687:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};h.exports=S},14874:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},54168:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},526:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragend"},81623:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragenter"},94472:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drag"},9304:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragleave"},34265:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragover"},50151:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragstart"},98134:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drop"},56773:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectdown"},45824:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragend"},39578:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragenter"},72072:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drag"},82569:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragleave"},70833:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragover"},81442:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragstart"},32936:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drop"},99658:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectmove"},60515:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectout"},55254:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectover"},34782:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerdown"},41769:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointermove"},65588:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerout"},61640:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerover"},49342:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerup"},82662:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="wheel"},13058:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectup"},52426:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameobjectwheel"},78072:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameout"},1545:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="gameover"},67137:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},27678:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="process"},22257:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},90379:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerlockchange"},88909:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerdown"},36548:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerdownoutside"},18483:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointermove"},22355:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerout"},7997:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerover"},66318:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerup"},94812:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pointerupoutside"},37310:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="wheel"},24196:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="preupdate"},27053:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="shutdown"},29413:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},25165:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},33963:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BOOT:e(14874),DESTROY:e(54168),DRAG_END:e(526),DRAG_ENTER:e(81623),DRAG:e(94472),DRAG_LEAVE:e(9304),DRAG_OVER:e(34265),DRAG_START:e(50151),DROP:e(98134),GAME_OUT:e(78072),GAME_OVER:e(1545),GAMEOBJECT_DOWN:e(56773),GAMEOBJECT_DRAG_END:e(45824),GAMEOBJECT_DRAG_ENTER:e(39578),GAMEOBJECT_DRAG:e(72072),GAMEOBJECT_DRAG_LEAVE:e(82569),GAMEOBJECT_DRAG_OVER:e(70833),GAMEOBJECT_DRAG_START:e(81442),GAMEOBJECT_DROP:e(32936),GAMEOBJECT_MOVE:e(99658),GAMEOBJECT_OUT:e(60515),GAMEOBJECT_OVER:e(55254),GAMEOBJECT_POINTER_DOWN:e(34782),GAMEOBJECT_POINTER_MOVE:e(41769),GAMEOBJECT_POINTER_OUT:e(65588),GAMEOBJECT_POINTER_OVER:e(61640),GAMEOBJECT_POINTER_UP:e(49342),GAMEOBJECT_POINTER_WHEEL:e(82662),GAMEOBJECT_UP:e(13058),GAMEOBJECT_WHEEL:e(52426),MANAGER_BOOT:e(67137),MANAGER_PROCESS:e(27678),MANAGER_UPDATE:e(22257),POINTER_DOWN:e(88909),POINTER_DOWN_OUTSIDE:e(36548),POINTER_MOVE:e(18483),POINTER_OUT:e(22355),POINTER_OVER:e(7997),POINTER_UP:e(66318),POINTER_UP_OUTSIDE:e(94812),POINTER_WHEEL:e(37310),POINTERLOCK_CHANGE:e(90379),PRE_UPDATE:e(24196),SHUTDOWN:e(27053),START:e(29413),UPDATE:e(25165)}},70848:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l){this.pad=u,this.events=u.events,this.index=l,this.value=0,this.threshold=.1},update:function(c){this.value=c},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});h.exports=y},21274:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(43200),c=new d({initialize:function(l,r){this.pad=l,this.events=l.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function(u){this.value=u;var l=this.pad,r=this.index;u>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(y.BUTTON_DOWN,l,this,u),this.pad.emit(y.GAMEPAD_BUTTON_DOWN,r,u,this)):this.pressed&&(this.pressed=!1,this.events.emit(y.BUTTON_UP,l,this,u),this.pad.emit(y.GAMEPAD_BUTTON_UP,r,u,this))},destroy:function(){this.pad=null,this.events=null}});h.exports=c},75956:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70848),y=e(21274),c=e(56694),u=e(6659),l=e(93736),r=new c({Extends:u,initialize:function(v,o){u.call(this),this.manager=v,this.pad=o,this.id=o.id,this.index=o.index;for(var p=[],m=0;m<o.buttons.length;m++)p.push(new y(this,m));this.buttons=p;var g=[];for(m=0;m<o.axes.length;m++)g.push(new d(this,m));this.axes=g,this.vibration=o.vibrationActuator;var x={value:0,pressed:!1};this._LCLeft=p[14]?p[14]:x,this._LCRight=p[15]?p[15]:x,this._LCTop=p[12]?p[12]:x,this._LCBottom=p[13]?p[13]:x,this._RCLeft=p[2]?p[2]:x,this._RCRight=p[1]?p[1]:x,this._RCTop=p[3]?p[3]:x,this._RCBottom=p[0]?p[0]:x,this._FBLeftTop=p[4]?p[4]:x,this._FBLeftBottom=p[6]?p[6]:x,this._FBRightTop=p[5]?p[5]:x,this._FBRightBottom=p[7]?p[7]:x;var C={value:0};this._HAxisLeft=g[0]?g[0]:C,this._VAxisLeft=g[1]?g[1]:C,this._HAxisRight=g[2]?g[2]:C,this._VAxisRight=g[3]?g[3]:C,this.leftStick=new l,this.rightStick=new l,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(a){return this.axes[a].getValue()},setAxisThreshold:function(a){for(var v=0;v<this.axes.length;v++)this.axes[v].threshold=a},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(a){return this.buttons[a].value},isButtonDown:function(a){return this.buttons[a].pressed},update:function(a){if(!(a.timestamp<this._created)){var v,o=this.buttons,p=a.buttons,m=o.length;for(v=0;v<m;v++)o[v].update(p[v].value);var g=this.axes,x=a.axes;for(m=g.length,v=0;v<m;v++)g[v].update(x[v]);m>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),m>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var a;for(a=0;a<this.buttons.length;a++)this.buttons[a].destroy();for(a=0;a<this.axes.length;a++)this.axes[a].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});h.exports=r},1379:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(6659),c=e(43200),u=e(75956),l=e(10850),r=e(63399),a=e(33963),v=new d({Extends:y,initialize:function(p){y.call(this),this.scene=p.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=p,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,p.pluginEvents.once(a.BOOT,this.boot,this),p.pluginEvents.on(a.START,this.start,this)},boot:function(){var o=this.scene.sys.game,p=this.settings.input,m=o.config;this.enabled=l(p,"gamepad",m.inputGamepad)&&o.device.input.gamepads,this.target=l(p,"gamepad.target",m.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(a.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(a.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var o=this,p=this.target,m=function(g){g.defaultPrevented||!o.isActive()||(o.refreshPads(),o.queue.push(g))};this.onGamepadHandler=m,p.addEventListener("gamepadconnected",m,!1),p.addEventListener("gamepaddisconnected",m,!1),this.sceneInputPlugin.pluginEvents.on(a.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(a.UPDATE,this.update);for(var o=0;o<this.gamepads.length;o++)this.gamepads[o].removeAllListeners()},disconnectAll:function(){for(var o=0;o<this.gamepads.length;o++)this.gamepads[o].pad.connected=!1},refreshPads:function(){var o=navigator.getGamepads();if(!o)this.disconnectAll();else for(var p=this.gamepads,m=0;m<o.length;m++){var g=o[m];if(g){var x=g.id,C=g.index,M=p[C];if(M)M.id!==x?(M.destroy(),p[C]=new u(this,g)):M.update(g);else{var R=new u(this,g);p[C]=R,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=R):this._pad3=R:this._pad2=R:this._pad1=R}}}},getAll:function(){for(var o=[],p=this.gamepads,m=0;m<p.length;m++)p[m]&&o.push(p[m]);return o},getPad:function(o){for(var p=this.gamepads,m=0;m<p.length;m++)if(p[m]&&p[m].index===o)return p[m]},update:function(){if(this.enabled){this.refreshPads();var o=this.queue.length;if(o!==0)for(var p=this.queue.splice(0,o),m=0;m<o;m++){var g=p[m],x=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(c.CONNECTED,x,g):g.type==="gamepaddisconnected"&&this.emit(c.DISCONNECTED,x,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var o=0;o<this.gamepads.length;o++)this.gamepads[o]&&this.gamepads[o].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",v,"gamepad","gamepad","inputGamepad"),h.exports=v},33171:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={DUALSHOCK_4:e(74982),SNES_USB:e(33171),XBOX_360:e(43247)}},17344:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="down"},36635:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="up"},85724:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="connected"},55832:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="disconnected"},772:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="down"},33608:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="up"},43200:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BUTTON_DOWN:e(17344),BUTTON_UP:e(36635),CONNECTED:e(85724),DISCONNECTED:e(55832),GAMEPAD_BUTTON_DOWN:e(772),GAMEPAD_BUTTON_UP:e(33608)}},92636:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Axis:e(70848),Button:e(21274),Events:e(43200),Gamepad:e(75956),GamepadPlugin:e(1379),Configs:e(4898)}},20873:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72687),y=e(98611),c={CreatePixelPerfectHandler:e(18104),CreateInteractiveObject:e(27395),Events:e(33963),Gamepad:e(92636),InputManager:e(69898),InputPlugin:e(12499),InputPluginCache:e(63399),Keyboard:e(28388),Mouse:e(11343),Pointer:e(40398),Touch:e(77423)};c=y(!1,c,d),h.exports=c},71064:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),y=e(56694),c=e(97081),u=e(33963),l=e(11873),r=e(72283),a=new y({initialize:function(o){this.manager=o,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=r,this.onKeyUp=r,o.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var v=this.manager.config;this.enabled=v.inputKeyboard,this.target=v.inputKeyboardEventTarget,this.addCapture(v.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(c.POST_STEP,this.postUpdate,this)},startListeners:function(){var v=this;this.onKeyDown=function(p){if(!(p.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(p),v.manager.events.emit(u.MANAGER_PROCESS);var m=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;v.preventDefault&&!m&&v.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}},this.onKeyUp=function(p){if(!(p.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(p),v.manager.events.emit(u.MANAGER_PROCESS);var m=p.altKey||p.ctrlKey||p.shiftKey||p.metaKey;v.preventDefault&&!m&&v.captures.indexOf(p.keyCode)>-1&&p.preventDefault()}};var o=this.target;o&&(o.addEventListener("keydown",this.onKeyDown,!1),o.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var v=this.target;v.removeEventListener("keydown",this.onKeyDown,!1),v.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var o=this.captures,p=0;p<v.length;p++){var m=v[p];typeof m=="string"&&(m=l[m.trim().toUpperCase()]),o.indexOf(m)===-1&&o.push(m)}this.preventDefault=o.length>0},removeCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var o=this.captures,p=0;p<v.length;p++){var m=v[p];typeof m=="string"&&(m=l[m.toUpperCase()]),d(o,m)}this.preventDefault=o.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(c.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});h.exports=a},89666:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(6659),c=e(94030),u=e(97081),l=e(10850),r=e(33963),a=e(63399),v=e(50165),o=e(11873),p=e(95625),m=e(48044),g=e(7599),x=e(84314),C=new d({Extends:y,initialize:function(R){y.call(this),this.game=R.systems.game,this.scene=R.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=R,this.manager=R.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,R.pluginEvents.once(r.BOOT,this.boot,this),R.pluginEvents.on(r.START,this.start,this)},boot:function(){var M=this.settings.input;this.enabled=l(M,"keyboard",!0);var R=l(M,"keyboard.capture",null);R&&this.addCaptures(R),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(u.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(M){return this.manager.addCapture(M),this},removeCapture:function(M){return this.manager.removeCapture(M),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:o.UP,down:o.DOWN,left:o.LEFT,right:o.RIGHT,space:o.SPACE,shift:o.SHIFT})},addKeys:function(M,R,P){R===void 0&&(R=!0),P===void 0&&(P=!1);var w={};if(typeof M=="string"){M=M.split(",");for(var A=0;A<M.length;A++){var G=M[A].trim();G&&(w[G]=this.addKey(G,R,P))}}else for(var O in M)w[O]=this.addKey(M[O],R,P);return w},addKey:function(M,R,P){R===void 0&&(R=!0),P===void 0&&(P=!1);var w=this.keys;if(M instanceof v){var A=w.indexOf(M);return A>-1?w[A]=M:w[M.keyCode]=M,R&&this.addCapture(M.keyCode),M.setEmitOnRepeat(P),M}return typeof M=="string"&&(M=o[M.toUpperCase()]),w[M]||(w[M]=new v(this,M),R&&this.addCapture(M),w[M].setEmitOnRepeat(P)),w[M]},removeKey:function(M,R,P){R===void 0&&(R=!1),P===void 0&&(P=!1);var w=this.keys,A;if(M instanceof v){var G=w.indexOf(M);G>-1&&(A=this.keys[G],this.keys[G]=void 0)}else typeof M=="string"&&(M=o[M.toUpperCase()]);return w[M]&&(A=w[M],w[M]=void 0),A&&(A.plugin=null,P&&this.removeCapture(A.keyCode),R&&A.destroy()),this},removeAllKeys:function(M,R){M===void 0&&(M=!1),R===void 0&&(R=!1);for(var P=this.keys,w=0;w<P.length;w++){var A=P[w];A&&(P[w]=void 0,R&&this.removeCapture(A.keyCode),M&&A.destroy())}return this},createCombo:function(M,R){return new p(this,M,R)},checkDown:function(M,R){if(R===void 0&&(R=0),this.enabled&&M.isDown){var P=x(this.time-M.timeDown,R);if(P>M._tick)return M._tick=P,!0}return!1},update:function(){var M=this.manager.queue,R=M.length;if(!(!this.isActive()||R===0))for(var P=this.keys,w=0;w<R;w++){var A=M[w],G=A.keyCode,O=P[G],L=!1;A.cancelled===void 0&&(A.cancelled=0,A.stopImmediatePropagation=function(){A.cancelled=1},A.stopPropagation=function(){A.cancelled=-1}),A.cancelled!==-1&&(G===this.prevCode&&A.timeStamp===this.prevTime&&A.type===this.prevType||(this.prevCode=G,this.prevTime=A.timeStamp,this.prevType=A.type,A.type==="keydown"?(O&&(L=O.isDown,O.onDown(A)),!A.cancelled&&(!O||!L)&&(m[G]&&this.emit(c.KEY_DOWN+m[G],A),A.cancelled||this.emit(c.ANY_KEY_DOWN,A))):(O&&O.onUp(A),A.cancelled||(m[G]&&this.emit(c.KEY_UP+m[G],A),A.cancelled||this.emit(c.ANY_KEY_UP,A))),A.cancelled===1&&(A.cancelled=0)))}},resetKeys:function(){for(var M=this.keys,R=0;R<M.length;R++)M[R]&&M[R].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(u.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var M=this.keys,R=0;R<M.length;R++)M[R]&&M[R].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});a.register("KeyboardPlugin",C,"keyboard","keyboard","inputKeyboard"),h.exports=C},60258:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d.timeLastMatched=e.timeStamp,d.index++,d.index===d.size?!0:(d.current=d.keyCodes[d.index],!1)};h.exports=S},95625:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(94030),c=e(72632),u=e(2544),l=e(88754),r=new d({initialize:function(v,o,p){if(p===void 0&&(p={}),o.length<2)return!1;this.manager=v,this.enabled=!0,this.keyCodes=[];for(var m=0;m<o.length;m++){var g=o[m];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=c(p,"resetOnWrongKey",!0),this.maxKeyDelay=c(p,"maxKeyDelay",0),this.resetOnMatch=c(p,"resetOnMatch",!1),this.deleteOnMatch=c(p,"deleteOnMatch",!1);var x=this,C=function(M){if(!(x.matched||!x.enabled)){var R=u(M,x);R&&(x.manager.emit(y.COMBO_MATCH,x,M),x.resetOnMatch?l(x):x.deleteOnMatch&&x.destroy())}};this.onKeyDown=C,this.manager.on(y.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(y.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});h.exports=r},2544:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60258),y=function(c,u){if(u.matched)return!0;var l=!1,r=!1;if(c.keyCode===u.current)if(u.index>0&&u.maxKeyDelay>0){var a=u.timeLastMatched+u.maxKeyDelay;c.timeStamp<=a&&(r=!0,l=d(c,u))}else r=!0,l=d(c,u);return!r&&u.resetOnWrongKey&&(u.index=0,u.current=u.keyCodes[0]),l&&(u.timeLastMatched=c.timeStamp,u.matched=!0,u.timeMatched=c.timeStamp),l};h.exports=y},88754:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};h.exports=S},5044:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keydown"},40813:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keyup"},89319:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keycombomatch"},43267:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="down"},78595:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keydown-"},30056:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="keyup-"},81939:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="up"},94030:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ANY_KEY_DOWN:e(5044),ANY_KEY_UP:e(40813),COMBO_MATCH:e(89319),DOWN:e(43267),KEY_DOWN:e(78595),KEY_UP:e(30056),UP:e(81939)}},28388:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Events:e(94030),KeyboardManager:e(71064),KeyboardPlugin:e(89666),Key:e(50165),KeyCodes:e(11873),KeyCombo:e(95625),AdvanceKeyCombo:e(60258),ProcessKeyCombo:e(2544),ResetKeyCombo:e(88754),JustDown:e(42460),JustUp:e(53162),DownDuration:e(64964),UpDuration:e(70331)}},64964:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d===void 0&&(d=50);var y=e.plugin.game.loop.time-e.timeDown;return e.isDown&&y<d};h.exports=S},42460:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e._justDown?(e._justDown=!1,!0):!1};h.exports=S},53162:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e._justUp?(e._justUp=!1,!0):!1};h.exports=S},50165:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(6659),c=e(94030),u=new d({Extends:y,initialize:function(r,a){y.call(this),this.plugin=r,this.keyCode=a,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(l){return this.emitOnRepeat=l,this},onDown:function(l){this.originalEvent=l,this.enabled&&(this.altKey=l.altKey,this.ctrlKey=l.ctrlKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.location=l.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(c.DOWN,this,l):(this.isDown=!0,this.isUp=!1,this.timeDown=l.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(c.DOWN,this,l)))},onUp:function(l){this.originalEvent=l,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=l.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(c.UP,this,l))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});h.exports=u},11873:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};h.exports=S},48044:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(11873),y={};for(var c in d)y[d[c]]=c;h.exports=y},70331:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d===void 0&&(d=50);var y=e.plugin.game.loop.time-e.timeUp;return e.isUp&&y<d};h.exports=S},7905:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(90185),c=e(33963),u=e(72283),l=new d({initialize:function(a){this.manager=a,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=u,this.onMouseDown=u,this.onMouseUp=u,this.onMouseDownWindow=u,this.onMouseUpWindow=u,this.onMouseOver=u,this.onMouseOut=u,this.onMouseWheel=u,this.pointerLockChange=u,this.isTop=!0,a.events.once(c.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){if(y.pointerLock){var r=this.target;r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock()}},releasePointerLock:function(){y.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(r){var a=this,v=this.manager,o=v.canvas,p=window&&window.focus&&v.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&(v.onMouseMove(g),a.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){p&&window.focus(),!g.defaultPrevented&&a.enabled&&v&&v.enabled&&(v.onMouseDown(g),a.preventDefaultDown&&g.target===o&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&g.target!==o&&v.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&(v.onMouseUp(g),a.preventDefaultUp&&g.target===o&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&g.target!==o&&v.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&v.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&v.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&a.enabled&&v&&v.enabled&&v.onMouseWheel(g),a.preventDefaultWheel&&g.target===o&&g.preventDefault()};var m={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,m),r.addEventListener("mouseout",this.onMouseOut,m),this.preventDefaultWheel?r.addEventListener("wheel",this.onMouseWheel,{passive:!1}):r.addEventListener("wheel",this.onMouseWheel,m),window&&v.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,m),window.top.addEventListener("mouseup",this.onMouseUpWindow,m)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,m),window.addEventListener("mouseup",this.onMouseUpWindow,m),this.isTop=!1}y.pointerLock&&(this.pointerLockChange=function(g){var x=a.target;a.locked=document.pointerLockElement===x||document.mozPointerLockElement===x||document.webkitPointerLockElement===x,v.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&(r=this.isTop?window.top:window,r.removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),y.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});h.exports=l},11343:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={MouseManager:e(7905)}},37579:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(33963),c=e(72283),u=new d({initialize:function(r){this.manager=r,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=c,this.onTouchStartWindow=c,this.onTouchMove=c,this.onTouchEnd=c,this.onTouchEndWindow=c,this.onTouchCancel=c,this.onTouchCancelWindow=c,this.isTop=!0,r.events.once(y.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputTouch,this.target=l.inputTouchEventTarget,this.capture=l.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},startListeners:function(){var l=this.target;if(l){var r=this,a=this.manager,v=a.canvas,o=window&&window.focus&&a.game.config.autoFocus;this.onTouchMove=function(x){!x.defaultPrevented&&r.enabled&&a&&a.enabled&&(a.onTouchMove(x),r.capture&&x.cancelable&&x.preventDefault())},this.onTouchStart=function(x){o&&window.focus(),!x.defaultPrevented&&r.enabled&&a&&a.enabled&&(a.onTouchStart(x),r.capture&&x.cancelable&&x.target===v&&x.preventDefault())},this.onTouchStartWindow=function(x){!x.defaultPrevented&&r.enabled&&a&&a.enabled&&x.target!==v&&a.onTouchStart(x)},this.onTouchEnd=function(x){!x.defaultPrevented&&r.enabled&&a&&a.enabled&&(a.onTouchEnd(x),r.capture&&x.cancelable&&x.target===v&&x.preventDefault())},this.onTouchEndWindow=function(x){!x.defaultPrevented&&r.enabled&&a&&a.enabled&&x.target!==v&&a.onTouchEnd(x)},this.onTouchCancel=function(x){!x.defaultPrevented&&r.enabled&&a&&a.enabled&&(a.onTouchCancel(x),r.capture&&x.preventDefault())},this.onTouchCancelWindow=function(x){!x.defaultPrevented&&r.enabled&&a&&a.enabled&&a.onTouchCancel(x)};var p=this.capture,m={passive:!0},g={passive:!1};if(l.addEventListener("touchstart",this.onTouchStart,p?g:m),l.addEventListener("touchmove",this.onTouchMove,p?g:m),l.addEventListener("touchend",this.onTouchEnd,p?g:m),l.addEventListener("touchcancel",this.onTouchCancel,p?g:m),window&&a.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,g),window.top.addEventListener("touchend",this.onTouchEndWindow,g),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,g)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,g),window.addEventListener("touchend",this.onTouchEndWindow,g),window.addEventListener("touchcancel",this.onTouchCancelWindow,g),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("touchstart",this.onTouchStart),l.removeEventListener("touchmove",this.onTouchMove),l.removeEventListener("touchend",this.onTouchEnd),l.removeEventListener("touchcancel",this.onTouchCancel),window&&(l=this.isTop?window.top:window,l.removeEventListener("touchstart",this.onTouchStartWindow),l.removeEventListener("touchend",this.onTouchEndWindow),l.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});h.exports=u},77423:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={TouchManager:e(37579)}},98035:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(683),u=e(72632),l=e(30750),r=e(43531),a=e(88490),v=e(33868),o=new d({initialize:function(m,g){if(this.loader=m,this.cache=u(g,"cache",!1),this.type=u(g,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=u(g,"key",!1);var x=this.key;if(m.prefix&&m.prefix!==""&&(this.key=m.prefix+x),!this.key)throw new Error("Invalid File key: "+this.key);var C=u(g,"url");C===void 0?C=m.path+x+"."+u(g,"extension",""):typeof C=="string"&&!C.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(C=m.path+C),this.url=C,this.src="",this.xhrSettings=v(u(g,"responseType",void 0)),u(g,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,u(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?y.FILE_POPULATED:y.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=u(g,"config",{}),this.multiFile,this.linkFile},setLink:function(p){this.linkFile=p,p.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===y.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=y.FILE_LOADING,this.src=l(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=a(this,this.loader.xhr))},onLoad:function(p,m){var g=p.responseURL&&this.loader.localSchemes.some(function(M){return p.responseURL.indexOf(M)===0}),x=g&&m.target.status===0,C=!(m.target&&m.target.status!==200)||x;p.readyState===4&&p.status>=400&&p.status<=599&&(C=!1),this.state=y.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,C)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(p){p.lengthComputable&&(this.bytesLoaded=p.loaded,this.bytesTotal=p.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(c.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=y.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=y.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=y.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(p){if(this.state!==y.FILE_PENDING_DESTROY){p===void 0&&(p=this.data);var m=this.key,g=this.type;this.loader.emit(c.FILE_COMPLETE,m,g,p),this.loader.emit(c.FILE_KEY_COMPLETE+g+"-"+m,m,g,p),this.loader.flagForRemoval(this),this.state=y.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});o.createObjectURL=function(p,m,g){if(typeof URL=="function")p.src=URL.createObjectURL(m);else{var x=new FileReader;x.onload=function(){p.removeAttribute("crossOrigin"),p.src="data:"+(m.type||g)+";base64,"+x.result.split(",")[1]},x.onerror=p.onerror,x.readAsDataURL(m)}},o.revokeObjectURL=function(p){typeof URL=="function"&&URL.revokeObjectURL(p.src)},h.exports=o},76846:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={},e={install:function(d){for(var y in S)d[y]=S[y]},register:function(d,y){S[d]=y},destroy:function(){S={}}};h.exports=e},30750:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:d+e.url:!1};h.exports=S},67285:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(58403),u=e(6659),l=e(683),r=e(76846),a=e(72632),v=e(10850),o=e(91963),p=e(7599),m=e(33868),g=new d({Extends:u,initialize:function(C){u.call(this);var M=C.sys.game.config,R=C.sys.settings.loader;this.scene=C,this.systems=C.sys,this.cacheManager=C.sys.cache,this.textureManager=C.sys.textures,this.sceneManager=C.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(a(R,"baseURL",M.loaderBaseURL)),this.setPath(a(R,"path",M.loaderPath)),this.setPrefix(a(R,"prefix",M.loaderPrefix)),this.maxParallelDownloads=a(R,"maxParallelDownloads",M.loaderMaxParallelDownloads),this.xhr=m(a(R,"responseType",M.loaderResponseType),a(R,"async",M.loaderAsync),a(R,"user",M.loaderUser),a(R,"password",M.loaderPassword),a(R,"timeout",M.loaderTimeout),a(R,"withCredentials",M.loaderWithCredentials)),this.crossOrigin=a(R,"crossOrigin",M.loaderCrossOrigin),this.imageLoadType=a(R,"imageLoadType",M.loaderImageLoadType),this.localSchemes=a(R,"localScheme",M.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new c,this.inflight=new c,this.queue=new c,this._deleteQueue=new c,this.totalFailed=0,this.totalComplete=0,this.state=y.LOADER_IDLE,this.multiKeyIndex=0,C.sys.events.once(p.BOOT,this.boot,this),C.sys.events.on(p.START,this.pluginStart,this)},boot:function(){this.systems.events.once(p.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(p.SHUTDOWN,this.shutdown,this)},setBaseURL:function(x){return x===void 0&&(x=""),x!==""&&x.substr(-1)!=="/"&&(x=x.concat("/")),this.baseURL=x,this},setPath:function(x){return x===void 0&&(x=""),x!==""&&x.substr(-1)!=="/"&&(x=x.concat("/")),this.path=x,this},setPrefix:function(x){return x===void 0&&(x=""),this.prefix=x,this},setCORS:function(x){return this.crossOrigin=x,this},addFile:function(x){Array.isArray(x)||(x=[x]);for(var C=0;C<x.length;C++){var M=x[C];this.keyExists(M)||(this.list.set(M),this.emit(l.ADD,M.key,M.type,this,M),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(x){var C=x.hasCacheConflict();return C||this.list.iterate(function(M){if(M.type===x.type&&M.key===x.key)return C=!0,!1}),!C&&this.isLoading()&&(this.inflight.iterate(function(M){if(M.type===x.type&&M.key===x.key)return C=!0,!1}),this.queue.iterate(function(M){if(M.type===x.type&&M.key===x.key)return C=!0,!1})),C},addPack:function(x,C){if(typeof C=="string"){var M=v(x,C);M&&(x={packKey:M})}var R=0,P=this.baseURL,w=this.path,A=this.prefix;for(var G in x)if(Object.prototype.hasOwnProperty.call(x,G)){var O=x[G],L=a(O,"baseURL",P),I=a(O,"path",w),F=a(O,"prefix",A),D=a(O,"files",null),V=a(O,"defaultType","void");if(Array.isArray(D)){this.setBaseURL(L),this.setPath(I),this.setPrefix(F);for(var k=0;k<D.length;k++){var W=D[k],X=W.hasOwnProperty("type")?W.type:V;this[X]&&(this[X](W),R++)}}}return this.setBaseURL(P),this.setPath(w),this.setPrefix(A),R>0},isLoading:function(){return this.state===y.LOADER_LOADING||this.state===y.LOADER_PROCESSING},isReady:function(){return this.state===y.LOADER_IDLE||this.state===y.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(l.START,this),this.list.size===0?this.loadComplete():(this.state=y.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(p.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(l.PROGRESS,this.progress)},update:function(){this.state===y.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(x){if((x.state===y.FILE_POPULATED||x.state===y.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(x),this.list.delete(x),x.crossOrigin||(x.crossOrigin=this.crossOrigin),x.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(x,C){this.inflight&&(this.inflight.delete(x),this.updateProgress(),C?(this.totalComplete++,this.queue.set(x),this.emit(l.FILE_LOAD,x),x.onProcess()):(this.totalFailed++,this._deleteQueue.set(x),this.emit(l.FILE_LOAD_ERROR,x),this.fileProcessComplete(x)))},fileProcessComplete:function(x){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(x.state===y.FILE_ERRORED?x.multiFile&&x.multiFile.onFileFailed(x):x.state===y.FILE_COMPLETE&&(x.multiFile?x.multiFile.isReadyToProcess()&&(x.multiFile.addToCache(),x.multiFile.pendingDestroy()):(x.addToCache(),x.pendingDestroy())),this.queue.delete(x),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(l.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=y.LOADER_COMPLETE,this.systems.events.off(p.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(l.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(x){this._deleteQueue.set(x)},saveJSON:function(x,C){return this.save(JSON.stringify(x),C)},save:function(x,C,M){C===void 0&&(C="file.json"),M===void 0&&(M="application/json");var R=new Blob([x],{type:M}),P=URL.createObjectURL(R),w=document.createElement("a");return w.download=C,w.textContent="Download "+C,w.href=P,w.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var x=this.systems.game.config,C=this.systems.settings.loader;this.setBaseURL(a(C,"baseURL",x.loaderBaseURL)),this.setPath(a(C,"path",x.loaderPath)),this.setPrefix(a(C,"prefix",x.loaderPrefix)),this.state=y.LOADER_IDLE},shutdown:function(){this.reset(),this.state=y.LOADER_SHUTDOWN,this.systems.events.off(p.UPDATE,this.update,this),this.systems.events.off(p.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=y.LOADER_DESTROYED,this.systems.events.off(p.UPDATE,this.update,this),this.systems.events.off(p.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});o.register("Loader",g,"load"),h.exports=g},43531:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),y=e(33868),c=function(u,l){var r=u===void 0?y():d({},u);if(l)for(var a in l)l[a]!==void 0&&(r[a]=l[a]);return r};h.exports=c},45176:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(683),u=new d({initialize:function(r,a,v,o){var p=[];o.forEach(function(g){g&&p.push(g)}),this.loader=r,this.type=a,this.key=v,this.multiKeyIndex=r.multiKeyIndex++,this.files=p,this.state=y.FILE_PENDING,this.complete=!1,this.pending=p.length,this.failed=0,this.config={},this.baseURL=r.baseURL,this.path=r.path,this.prefix=r.prefix;for(var m=0;m<p.length;m++)p[m].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(l){return this.files.push(l),l.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(l){var r=this.files.indexOf(l);r!==-1&&this.pending--},onFileFailed:function(l){var r=this.files.indexOf(l);r!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,l.type,l.key))},pendingDestroy:function(){if(this.state!==y.FILE_PENDING_DESTROY){var l=this.key,r=this.type;this.loader.emit(c.FILE_COMPLETE,l,r),this.loader.emit(c.FILE_KEY_COMPLETE+r+"-"+l,l,r),this.loader.flagForRemoval(this);for(var a=0;a<this.files.length;a++)this.files[a].pendingDestroy();this.state=y.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});h.exports=u},88490:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(43531),y=function(c,u){var l=d(u,c.xhrSettings),r=new XMLHttpRequest;if(r.open("GET",c.src,l.async,l.user,l.password),r.responseType=c.xhrSettings.responseType,r.timeout=l.timeout,l.headers)for(var a in l.headers)r.setRequestHeader(a,l.headers[a]);return l.header&&l.headerValue&&r.setRequestHeader(l.header,l.headerValue),l.requestedWith&&r.setRequestHeader("X-Requested-With",l.requestedWith),l.overrideMimeType&&r.overrideMimeType(l.overrideMimeType),l.withCredentials&&(r.withCredentials=!0),r.onload=c.onLoad.bind(c,r),r.onerror=c.onError.bind(c,r),r.onprogress=c.onProgress.bind(c),r.send(),r};h.exports=y},33868:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u,l){return e===void 0&&(e=""),d===void 0&&(d=!0),y===void 0&&(y=""),c===void 0&&(c=""),u===void 0&&(u=0),l===void 0&&(l=!1),{responseType:e,async:d,user:y,password:c,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:l}};h.exports=S},12117:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};h.exports=S},7398:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addfile"},52187:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},36627:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="filecomplete"},81925:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="filecomplete-"},29774:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loaderror"},20943:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="load"},74693:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="fileprogress"},71176:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postprocess"},88984:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="progress"},72753:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},683:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD:e(7398),COMPLETE:e(52187),FILE_COMPLETE:e(36627),FILE_KEY_COMPLETE:e(81925),FILE_LOAD_ERROR:e(29774),FILE_LOAD:e(20943),FILE_PROGRESS:e(74693),POST_PROCESS:e(71176),PROGRESS:e(88984),START:e(72753)}},46468:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(70806),u=e(683),l=new d({Extends:c,initialize:function(a,v,o,p,m){c.call(this,a,v,o,p,m),this.type="animationJSON"},onProcess:function(){this.loader.once(u.POST_PROCESS,this.onLoadComplete,this),c.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});y.register("animation",function(r,a,v,o){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new l(this,r[p]));else this.addFile(new l(this,r,a,o,v));return this}),h.exports=l},31648:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(72632),u=e(42927),l=e(42911),r=e(70806),a=e(45176),v=new d({Extends:a,initialize:function(p,m,g,x,C,M){var R,P;if(l(m)){var w=m;m=c(w,"key"),R=new u(p,{key:m,url:c(w,"textureURL"),extension:c(w,"textureExtension","png"),normalMap:c(w,"normalMap"),xhrSettings:c(w,"textureXhrSettings")}),P=new r(p,{key:m,url:c(w,"atlasURL"),extension:c(w,"atlasExtension","json"),xhrSettings:c(w,"atlasXhrSettings")})}else R=new u(p,m,g,C),P=new r(p,m,x,M);R.linkFile?a.call(this,p,"atlasjson",m,[R,P,R.linkFile]):a.call(this,p,"atlasjson",m,[R,P])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(o.key,o.data,p.data,m),p.addToCache(),this.complete=!0}}});y.register("aseprite",function(o,p,m,g,x){var C;if(Array.isArray(o))for(var M=0;M<o.length;M++)C=new v(this,o[M]),this.addFile(C.files);else C=new v(this,o,p,m,g,x),this.addFile(C.files);return this}),h.exports=v},73152:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(72632),u=e(42927),l=e(42911),r=e(70806),a=e(45176),v=new d({Extends:a,initialize:function(p,m,g,x,C,M){var R,P;if(l(m)){var w=m;m=c(w,"key"),R=new u(p,{key:m,url:c(w,"textureURL"),extension:c(w,"textureExtension","png"),normalMap:c(w,"normalMap"),xhrSettings:c(w,"textureXhrSettings")}),P=new r(p,{key:m,url:c(w,"atlasURL"),extension:c(w,"atlasExtension","json"),xhrSettings:c(w,"atlasXhrSettings")})}else R=new u(p,m,g,C),P=new r(p,m,x,M);R.linkFile?a.call(this,p,"atlasjson",m,[R,P,R.linkFile]):a.call(this,p,"atlasjson",m,[R,P])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(o.key,o.data,p.data,m),this.complete=!0}}});y.register("atlas",function(o,p,m,g,x){var C;if(Array.isArray(o))for(var M=0;M<o.length;M++)C=new v(this,o[M]),this.addFile(C.files);else C=new v(this,o,p,m,g,x),this.addFile(C.files);return this}),h.exports=v},24616:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(72632),u=e(42927),l=e(42911),r=e(45176),a=e(15297),v=new d({Extends:r,initialize:function(p,m,g,x,C,M){var R,P;if(l(m)){var w=m;m=c(w,"key"),R=new u(p,{key:m,url:c(w,"textureURL"),extension:c(w,"textureExtension","png"),normalMap:c(w,"normalMap"),xhrSettings:c(w,"textureXhrSettings")}),P=new a(p,{key:m,url:c(w,"atlasURL"),extension:c(w,"atlasExtension","xml"),xhrSettings:c(w,"atlasXhrSettings")})}else R=new u(p,m,g,C),P=new a(p,m,x,M);R.linkFile?r.call(this,p,"atlasxml",m,[R,P,R.linkFile]):r.call(this,p,"atlasxml",m,[R,P])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(o.key,o.data,p.data,m),this.complete=!0}}});y.register("atlasXML",function(o,p,m,g,x){var C;if(Array.isArray(o))for(var M=0;M<o.length;M++)C=new v(this,o[M]),this.addFile(C.files);else C=new v(this,o,p,m,g,x),this.addFile(C.files);return this}),h.exports=v},67448:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(30929),a=e(42911),v=new d({Extends:c,initialize:function(p,m,g,x,C){if(a(m)){var M=m;m=l(M,"key"),x=l(M,"xhrSettings"),C=l(M,"context",C)}var R={type:"audio",cache:p.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:m,url:g.url,xhrSettings:x,config:{context:C}};c.call(this,p,R)},onProcess:function(){this.state=y.FILE_PROCESSING;var o=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(p){o.data=p,o.onProcessComplete()},function(p){console.error("Error decoding audio: "+o.key+" - ",p?p.message:null),o.onProcessError()}),this.config.context=null}});v.create=function(o,p,m,g,x){var C=o.systems.game,M=C.config.audio,R=C.device.audio;a(p)&&(m=l(p,"url",[]),g=l(p,"config",{}));var P=v.getAudioURL(C,m);return P?R.webAudio&&!M.disableWebAudio?new v(o,p,P,x,C.sound.context):new r(o,p,P,g):(console.warn('No audio URLs for "%s" matched this device',p),null)},v.getAudioURL=function(o,p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var g=l(p[m],"url",p[m]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var x=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(x=l(p[m],"type",x?x[1]:"").toLowerCase(),o.device.audio[x])return{url:g,type:x}}return null},u.register("audio",function(o,p,m,g){var x=this.systems.game,C=x.config.audio,M=x.device.audio;if(C.noAudio||!M.webAudio&&!M.audioData)return this;var R;if(Array.isArray(o))for(var P=0;P<o.length;P++)R=v.create(this,o[P]),R&&this.addFile(R);else R=v.create(this,o,p,m,g),R&&this.addFile(R);return this}),h.exports=v},66109:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(67448),y=e(56694),c=e(76846),u=e(72632),l=e(42911),r=e(70806),a=e(45176),v=new y({Extends:a,initialize:function(p,m,g,x,C,M,R){if(l(m)){var P=m;m=u(P,"key"),g=u(P,"jsonURL"),x=u(P,"audioURL"),C=u(P,"audioConfig"),M=u(P,"audioXhrSettings"),R=u(P,"jsonXhrSettings")}var w;if(!x)w=new r(p,m,g,R),a.call(this,p,"audiosprite",m,[w]),this.config.resourceLoad=!0,this.config.audioConfig=C,this.config.audioXhrSettings=M;else{var A=d.create(p,m,x,C,M);A&&(w=new r(p,m,g,R),a.call(this,p,"audiosprite",m,[A,w]),this.config.resourceLoad=!1)}},onFileComplete:function(o){var p=this.files.indexOf(o);if(p!==-1&&(this.pending--,this.config.resourceLoad&&o.type==="json"&&o.data.hasOwnProperty("resources"))){var m=o.data.resources,g=u(this.config,"audioConfig"),x=u(this.config,"audioXhrSettings"),C=d.create(this.loader,o.key,m,g,x);C&&(this.addToMultiFile(C),this.loader.addFile(C))}},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],p=this.files[1];o.addToCache(),p.addToCache(),this.complete=!0}}});c.register("audioSprite",function(o,p,m,g,x,C){var M=this.systems.game,R=M.config.audio,P=M.device.audio;if(R&&R.noAudio||!P.webAudio&&!P.audioData)return this;var w;if(Array.isArray(o))for(var A=0;A<o.length;A++)w=new v(this,o[A]),w.files&&this.addFile(w.files);else w=new v(this,o,p,m,g,x,C),w.files&&this.addFile(w.files);return this})},40612:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g,x){var C="bin";if(r(p)){var M=p;p=l(M,"key"),m=l(M,"url"),g=l(M,"xhrSettings"),C=l(M,"extension",C),x=l(M,"dataType",x)}var R={type:"binary",cache:o.cacheManager.binary,extension:C,responseType:"arraybuffer",key:p,url:m,xhrSettings:g,config:{dataType:x}};c.call(this,o,R)},onProcess:function(){this.state=y.FILE_PROCESSING;var v=this.config.dataType;this.data=v?new v(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});u.register("binary",function(v,o,p,m){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new a(this,v[g]));else this.addFile(new a(this,v,o,m,p));return this}),h.exports=a},54565:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(72632),u=e(42927),l=e(42911),r=e(45176),a=e(31476),v=e(15297),o=new d({Extends:r,initialize:function(m,g,x,C,M,R){var P,w;if(l(g)){var A=g;g=c(A,"key"),P=new u(m,{key:g,url:c(A,"textureURL"),extension:c(A,"textureExtension","png"),normalMap:c(A,"normalMap"),xhrSettings:c(A,"textureXhrSettings")}),w=new v(m,{key:g,url:c(A,"fontDataURL"),extension:c(A,"fontDataExtension","xml"),xhrSettings:c(A,"fontDataXhrSettings")})}else P=new u(m,g,x,M),w=new v(m,g,C,R);P.linkFile?r.call(this,m,"bitmapfont",g,[P,w,P.linkFile]):r.call(this,m,"bitmapfont",g,[P,w])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],m=this.files[1];p.addToCache();var g=p.cache.get(p.key),x=a(m.data,p.cache.getFrame(p.key),0,0,g);this.loader.cacheManager.bitmapFont.add(p.key,{data:x,texture:p.key,frame:null}),this.complete=!0}}});y.register("bitmapFont",function(p,m,g,x,C){var M;if(Array.isArray(p))for(var R=0;R<p.length;R++)M=new o(this,p[R]),this.addFile(M.files);else M=new o(this,p,m,g,x,C),this.addFile(M.files);return this}),h.exports=o},99898:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g){var x="css";if(r(p)){var C=p;p=l(C,"key"),m=l(C,"url"),g=l(C,"xhrSettings"),x=l(C,"extension",x)}var M={type:"script",cache:!1,extension:x,responseType:"text",key:p,url:m,xhrSettings:g};c.call(this,o,M)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("css",function(v,o,p){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new a(this,v[m]));else this.addFile(new a(this,v,o,p));return this}),h.exports=a},47375:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73152),y=e(40612),c=e(56694),u=e(76846),l=e(72632),r=e(42927),a=e(42911),v=e(70806),o=e(67409),p=e(30657),m=e(80802),g=e(45176),x=e(24904),C=new c({Extends:g,initialize:function(R,P,w,A){if(w.multiAtlasURL){var G=new v(R,{key:P,url:w.multiAtlasURL,xhrSettings:A,config:w});g.call(this,R,"texture",P,[G])}else{var O=w.textureURL.substr(w.textureURL.length-3);w.type||(w.type=O.toLowerCase()==="ktx"?"KTX":"PVR");var L=new y(R,{key:P,url:w.textureURL,extension:O,xhrSettings:A,config:w});if(w.atlasURL){var I=new v(R,{key:P,url:w.atlasURL,xhrSettings:A,config:w});g.call(this,R,"texture",P,[L,I])}else g.call(this,R,"texture",P,[L])}this.config=w},onFileComplete:function(M){var R=this.files.indexOf(M);if(R!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(M.type==="json"&&M.data.hasOwnProperty("textures")){var P=M.data.textures,w=this.config,A=this.loader,G=A.baseURL,O=A.path,L=A.prefix,I=l(w,"multiBaseURL",this.baseURL),F=l(w,"multiPath",this.path),D=l(w,"prefix",this.prefix),V=l(w,"textureXhrSettings");I&&A.setBaseURL(I),F&&A.setPath(F),D&&A.setPrefix(D);for(var k=0;k<P.length;k++){var W=P[k].image,X="CMA"+this.multiKeyIndex+"_"+W,H=new y(A,X,W,V);if(this.addToMultiFile(H),A.addFile(H),P[k].normalMap){var $=new y(A,X,P[k].normalMap,V);$.type="normalMap",H.setLink($),this.addToMultiFile($),A.addFile($)}}A.setBaseURL(G),A.setPath(O),A.setPrefix(L)}}},addToCache:function(){if(this.isReadyToProcess()){var M=this.config;if(M.multiAtlasURL)this.addMultiToCache();else{var R=this.loader.systems.renderer,P=this.loader.textureManager,w,A=this.files[0],G=this.files[1];if(M.type==="PVR"?w=x(A.data):M.type==="KTX"&&(w=o(A.data)),w&&R.supportsCompressedTexture(M.format,w.internalFormat)){w.format=R.getCompressedTextureName(M.format,w.internalFormat);var O=G&&G.data?G.data:null;P.addCompressedTexture(A.key,w,O)}}this.complete=!0}},addMultiToCache:function(){for(var M=this.config,R=this.files[0],P=[],w=[],A=[],G=this.loader.systems.renderer,O=this.loader.textureManager,L,I=1;I<this.files.length;I++){var F=this.files[I];if(F.type!=="normalMap")for(var D=F.key.indexOf("_"),V=F.key.substr(D+1),k=F.data,W=0;W<R.data.textures.length;W++){var X=R.data.textures[W];if(X.image===V){M.type==="PVR"?L=x(k):M.type==="KTX"&&(L=o(k)),L&&G.supportsCompressedTexture(M.format,L.internalFormat)&&(L.format=G.getCompressedTextureName(M.format,L.internalFormat),w.push(L),P.push(X),F.linkFile&&A.push(F.linkFile.data));break}}}A.length===0&&(A=void 0),O.addAtlasJSONArray(this.key,w,P,A),this.complete=!0}});u.register("texture",function(M,R,P){var w=this.systems.renderer,A=function(O,L,I,F){var D={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(a(L)){var V=L;L=l(V,"key"),I=l(V,"url"),F=l(V,"xhrSettings")}var k=!1;for(var W in I)if(w.supportsCompressedTexture(W)){var X=I[W];typeof X=="string"?D.textureURL=X:D=p(X,D),D.format=W.toUpperCase(),k=!0;break}if(!k)console.warn("No supported compressed texture format or IMG fallback",L);else if(D.format==="IMG"){var H,$;D.multiAtlasURL?($=new m(O,L,D.multiAtlasURL,D.multiPath,D.multiBaseURL,F),H=$.files):D.atlasURL?($=new d(O,L,D.textureURL,D.atlasURL,F),H=$.files):H=new r(O,L,D.textureURL,F),O.addFile(H)}else{var z=new C(O,L,D,F);O.addFile(z.files)}};if(Array.isArray(M))for(var G=0;G<M.length;G++)A(this,M[G]);else A(this,M,R,P);return this}),h.exports=C},46568:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=e(31053),v=new d({Extends:c,initialize:function(p,m,g,x,C){var M="glsl";if(r(m)){var R=m;m=l(R,"key"),g=l(R,"url"),x=l(R,"shaderType","fragment"),C=l(R,"xhrSettings"),M=l(R,"extension",M)}else x===void 0&&(x="fragment");var P={type:"glsl",cache:p.cacheManager.shader,extension:M,responseType:"text",key:m,url:g,config:{shaderType:x},xhrSettings:C};c.call(this,p,P)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var o=this.data.split(`
`),p=this.extractBlock(o,0);if(p)for(;p;){var m=this.getShaderName(p.header),g=this.getShaderType(p.header),x=this.getShaderUniforms(p.header),C=p.shader;if(this.cache.has(m)){var M=this.cache.get(m);g==="fragment"?M.fragmentSrc=C:M.vertexSrc=C,M.uniforms||(M.uniforms=x)}else g==="fragment"?this.cache.add(m,new a(m,C,"",x)):this.cache.add(m,new a(m,"",C,x));p=this.extractBlock(o,p.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new a(this.key,this.data)):this.cache.add(this.key,new a(this.key,"",this.data))},getShaderName:function(o){for(var p=0;p<o.length;p++){var m=o[p].trim();if(m.substring(0,5)==="name:")return m.substring(5).trim()}return this.key},getShaderType:function(o){for(var p=0;p<o.length;p++){var m=o[p].trim();if(m.substring(0,5)==="type:")return m.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(o){for(var p={},m=0;m<o.length;m++){var g=o[m].trim();if(g.substring(0,8)==="uniform."){var x=g.indexOf(":");if(x){var C=g.substring(8,x);try{p[C]=JSON.parse(g.substring(x+1))}catch{console.warn("Invalid uniform JSON: "+C)}}}}return p},extractBlock:function(o,p){for(var m=-1,g=-1,x=-1,C=!1,M=!1,R=[],P=[],w=p;w<o.length;w++){var A=o[w].trim();if(A==="---")if(m===-1)m=w,C=!0;else if(C)g=w,C=!1,M=!0;else{M=!1;break}else C?R.push(A):M&&(P.push(A),x=w)}return!C&&g!==-1?{header:R,shader:P.join(`
`),offset:x}:null}});u.register("glsl",function(o,p,m,g){if(Array.isArray(o))for(var x=0;x<o.length;x++)this.addFile(new v(this,o[x]));else this.addFile(new v(this,o,p,m,g));return this}),h.exports=v},30929:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(683),c=e(98035),u=e(72632),l=e(30750),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g){if(r(p)){var x=p;p=u(x,"key"),g=u(x,"config",g)}var C={type:"audio",cache:o.cacheManager.audio,extension:m.type,key:p,url:m.url,config:g};c.call(this,o,C),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var v=0;v<this.data.length;v++){var o=this.data[v];o.oncanplaythrough=null,o.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(v){var o=v.target;o.oncanplaythrough=null,o.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(y.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var v=this.config&&this.config.instances||1;this.filesTotal=v,this.filesLoaded=0,this.percentComplete=0;for(var o=0;o<v;o++){var p=new Audio;p.dataset||(p.dataset={}),p.dataset.name=this.key+("0"+o).slice(-2),p.dataset.used="false",this.locked?p.dataset.locked="true":(p.dataset.locked="false",p.preload="auto",p.oncanplaythrough=this.onProgress.bind(this),p.onerror=this.onError.bind(this)),this.data.push(p)}for(o=0;o<this.data.length;o++)p=this.data[o],p.src=l(this,this.loader.baseURL),this.locked||p.load();this.locked&&setTimeout(this.onLoad.bind(this))}});h.exports=a},77459:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g){var x="html";if(r(p)){var C=p;p=l(C,"key"),m=l(C,"url"),g=l(C,"xhrSettings"),x=l(C,"extension",x)}var M={type:"text",cache:o.cacheManager.html,extension:x,responseType:"text",key:p,url:m,xhrSettings:g};c.call(this,o,M)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("html",function(v,o,p){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new a(this,v[m]));else this.addFile(new a(this,v,o,p));return this}),h.exports=a},9755:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g,x,C){g===void 0&&(g=512),x===void 0&&(x=512);var M="html";if(r(p)){var R=p;p=l(R,"key"),m=l(R,"url"),C=l(R,"xhrSettings"),M=l(R,"extension",M),g=l(R,"width",g),x=l(R,"height",x)}var P={type:"html",cache:o.textureManager,extension:M,responseType:"text",key:p,url:m,xhrSettings:C,config:{width:g,height:x}};c.call(this,o,P)},onProcess:function(){this.state=y.FILE_PROCESSING;var v=this.config.width,o=this.config.height,p=[];p.push('<svg width="'+v+'px" height="'+o+'px" viewBox="0 0 '+v+" "+o+'" xmlns="http://www.w3.org/2000/svg">'),p.push('<foreignObject width="100%" height="100%">'),p.push('<body xmlns="http://www.w3.org/1999/xhtml">'),p.push(this.xhrLoader.responseText),p.push("</body>"),p.push("</foreignObject>"),p.push("</svg>");var m=[p.join(`
`)],g=this;try{var x=new window.Blob(m,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=y.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){c.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(g.data),g.onProcessError()},c.createObjectURL(this.data,x,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("htmlTexture",function(v,o,p,m,g){if(Array.isArray(v))for(var x=0;x<v.length;x++)this.addFile(new a(this,v[x]));else this.addFile(new a(this,v,o,p,m,g));return this}),h.exports=a},42927:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=e(30750),v=new d({Extends:c,initialize:function o(p,m,g,x,C){var M="png",R;if(r(m)){var P=m;m=l(P,"key"),g=l(P,"url"),R=l(P,"normalMap"),x=l(P,"xhrSettings"),M=l(P,"extension",M),C=l(P,"frameConfig")}Array.isArray(g)&&(R=g[1],g=g[0]);var w={type:"image",cache:p.textureManager,extension:M,responseType:"blob",key:m,url:g,xhrSettings:x,config:C};if(c.call(this,p,w),R){var A=new o(p,this.key,R,x,C);A.type="normalMap",this.setLink(A),p.addFile(A)}this.useImageElementLoad=p.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var o=this;this.data.onload=function(){c.revokeObjectURL(o.data),o.onProcessComplete()},this.data.onerror=function(){c.revokeObjectURL(o.data),o.onProcessError()},c.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var o=this.state;this.state=y.FILE_PROCESSING,o===y.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=y.FILE_LOADING,this.src=a(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var o=this;this.data.onload=function(){o.state=y.FILE_LOADED,o.loader.nextFile(o,!0)},this.data.onerror=function(){o.loader.nextFile(o,!1)},this.data.src=this.src}},addToCache:function(){var o=this.linkFile;o?o.state>=y.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addImage(this.key,o.data,this.data):this.cache.addImage(this.key,this.data,o.data)):this.cache.addImage(this.key,this.data)}});u.register("image",function(o,p,m){if(Array.isArray(o))for(var g=0;g<o.length;g++)this.addFile(new v(this,o[g]));else this.addFile(new v(this,o,p,m));return this}),h.exports=v},70806:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(10850),a=e(42911),v=new d({Extends:c,initialize:function(p,m,g,x,C){var M="json";if(a(m)){var R=m;m=l(R,"key"),g=l(R,"url"),x=l(R,"xhrSettings"),M=l(R,"extension",M),C=l(R,"dataKey",C)}var P={type:"json",cache:p.cacheManager.json,extension:M,responseType:"text",key:m,url:g,xhrSettings:x,config:C};c.call(this,p,P),a(g)&&(C?this.data=r(g,C):this.data=g,this.state=y.FILE_POPULATED)},onProcess:function(){if(this.state!==y.FILE_POPULATED){this.state=y.FILE_PROCESSING;try{var o=JSON.parse(this.xhrLoader.responseText)}catch(m){throw this.onProcessError(),m}var p=this.config;typeof p=="string"?this.data=r(o,p,o):this.data=o}this.onProcessComplete()}});u.register("json",function(o,p,m,g){if(Array.isArray(o))for(var x=0;x<o.length;x++)this.addFile(new v(this,o[x]));else this.addFile(new v(this,o,p,g,m));return this}),h.exports=v},80802:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(72632),u=e(42927),l=e(42911),r=e(70806),a=e(45176),v=new d({Extends:a,initialize:function(p,m,g,x,C,M,R){if(l(m)){var P=m;m=c(P,"key"),c(P,"url",!1)?g=c(P,"url"):g=c(P,"atlasURL"),M=c(P,"xhrSettings"),x=c(P,"path"),C=c(P,"baseURL"),R=c(P,"textureXhrSettings")}var w=new r(p,m,g,M);a.call(this,p,"multiatlas",m,[w]),this.config.path=x,this.config.baseURL=C,this.config.textureXhrSettings=R},onFileComplete:function(o){var p=this.files.indexOf(o);if(p!==-1&&(this.pending--,o.type==="json"&&o.data.hasOwnProperty("textures"))){var m=o.data.textures,g=this.config,x=this.loader,C=x.baseURL,M=x.path,R=x.prefix,P=c(g,"baseURL",this.baseURL),w=c(g,"path",this.path),A=c(g,"prefix",this.prefix),G=c(g,"textureXhrSettings");x.setBaseURL(P),x.setPath(w),x.setPrefix(A);for(var O=0;O<m.length;O++){var L=m[O].image,I="MA"+this.multiKeyIndex+"_"+L,F=new u(x,I,L,G);if(this.addToMultiFile(F),x.addFile(F),m[O].normalMap){var D=new u(x,I,m[O].normalMap,G);D.type="normalMap",F.setLink(D),this.addToMultiFile(D),x.addFile(D)}}x.setBaseURL(C),x.setPath(M),x.setPrefix(R)}},addToCache:function(){if(this.isReadyToProcess()){for(var o=this.files[0],p=[],m=[],g=[],x=1;x<this.files.length;x++){var C=this.files[x];if(C.type!=="normalMap")for(var M=C.key.indexOf("_"),R=C.key.substr(M+1),P=C.data,w=0;w<o.data.textures.length;w++){var A=o.data.textures[w];if(A.image===R){m.push(P),p.push(A),C.linkFile&&g.push(C.linkFile.data);break}}}g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,m,p,g),this.complete=!0}}});y.register("multiatlas",function(o,p,m,g,x){var C;if(Array.isArray(o))for(var M=0;M<o.length;M++)C=new v(this,o[M]),this.addFile(C.files);else C=new v(this,o,p,m,g,x),this.addFile(C.files);return this}),h.exports=v},39034:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(72632),u=e(42911),l=e(45176),r=e(55188),a=new d({Extends:l,initialize:function(o,p,m,g){var x="js",C=[];if(u(p)){var M=p;p=c(M,"key"),m=c(M,"url"),g=c(M,"xhrSettings"),x=c(M,"extension",x)}Array.isArray(m)||(m=[m]);for(var R=0;R<m.length;R++){var P=new r(o,{key:p+"_"+R.toString(),url:m[R],extension:x,xhrSettings:g});P.onProcess=function(){this.onProcessComplete()},C.push(P)}l.call(this,o,"scripts",p,C)},addToCache:function(){if(this.isReadyToProcess()){for(var v=0;v<this.files.length;v++){var o=this.files[v];o.data=document.createElement("script"),o.data.language="javascript",o.data.type="text/javascript",o.data.defer=!1,o.data.text=o.xhrLoader.responseText,document.head.appendChild(o.data)}this.complete=!0}}});y.register("scripts",function(v,o,p){var m;if(Array.isArray(v))for(var g=0;g<v.length;g++)m=new a(this,v[g]),this.addFile(m.files);else m=new a(this,v,o,p),this.addFile(m.files);return this}),h.exports=a},85527:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(72632),u=e(42911),l=e(45176),r=e(27291),a=e(76799),v=e(86897),o=new d({Extends:l,initialize:function(m,g,x,C,M,R){var P,w,A=m.cacheManager.obj;if(u(g)){var G=g;g=c(G,"key"),P=new v(m,{key:g,type:"obj",cache:A,url:c(G,"url"),extension:c(G,"extension","obj"),xhrSettings:c(G,"xhrSettings"),config:{flipUV:c(G,"flipUV",M)}}),C=c(G,"matURL"),C&&(w=new v(m,{key:g,type:"mat",cache:A,url:C,extension:c(G,"matExtension","mat"),xhrSettings:c(G,"xhrSettings")}))}else P=new v(m,{key:g,url:x,type:"obj",cache:A,extension:"obj",xhrSettings:R,config:{flipUV:M}}),C&&(w=new v(m,{key:g,url:C,type:"mat",cache:A,extension:"mat",xhrSettings:R}));l.call(this,m,"obj",g,[P,w])},addToCache:function(){if(this.isReadyToProcess()){var p=this.files[0],m=this.files[1],g=r(p.data,p.config.flipUV);m&&(g.materials=a(m.data)),p.cache.add(p.key,g),this.complete=!0}}});y.register("obj",function(p,m,g,x,C){var M;if(Array.isArray(p))for(var R=0;R<p.length;R++)M=new o(this,p[R]),this.addFile(M.files);else M=new o(this,p,m,g,x,C),this.addFile(M.files);return this}),h.exports=o},3616:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(76846),u=e(70806),l=new d({Extends:u,initialize:function(a,v,o,p,m){u.call(this,a,v,o,p,m),this.type="packfile"},onProcess:function(){if(this.state!==y.FILE_POPULATED&&(this.state=y.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var r={};r[this.config]=this.data,this.data=r}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});c.register("pack",function(r,a,v,o){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new l(this,r[p]));else this.addFile(new l(this,r,a,o,v));return this}),h.exports=l},12217:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g,x,C){var M="js";if(r(p)){var R=p;p=l(R,"key"),m=l(R,"url"),C=l(R,"xhrSettings"),M=l(R,"extension",M),g=l(R,"start"),x=l(R,"mapping")}var P={type:"plugin",cache:!1,extension:M,responseType:"text",key:p,url:m,xhrSettings:C,config:{start:g,mapping:x}};c.call(this,o,P),typeof m=="function"&&(this.data=m,this.state=y.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,o=this.config,p=l(o,"start",!1),m=l(o,"mapping",null);if(this.state===y.FILE_POPULATED)v.install(this.key,this.data,p,m);else{this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=v.install(this.key,window[this.key],p,m);(p||m)&&(this.loader.systems[m]=g,this.loader.scene[m]=g)}this.onProcessComplete()}});u.register("plugin",function(v,o,p,m,g){if(Array.isArray(v))for(var x=0;x<v.length;x++)this.addFile(new a(this,v[x]));else this.addFile(new a(this,v,o,p,m,g));return this}),h.exports=a},4474:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g,x){var C="svg";if(r(p)){var M=p;p=l(M,"key"),m=l(M,"url"),g=l(M,"svgConfig",{}),x=l(M,"xhrSettings"),C=l(M,"extension",C)}var R={type:"svg",cache:o.textureManager,extension:C,responseType:"text",key:p,url:m,xhrSettings:x,config:{width:l(g,"width"),height:l(g,"height"),scale:l(g,"scale")}};c.call(this,o,R)},onProcess:function(){this.state=y.FILE_PROCESSING;var v=this.xhrLoader.responseText,o=[v],p=this.config.width,m=this.config.height,g=this.config.scale;t:if(p&&m||g){var x=null,C=new DOMParser;x=C.parseFromString(v,"text/xml");var M=x.getElementsByTagName("svg")[0],R=M.hasAttribute("viewBox"),P=parseFloat(M.getAttribute("width")),w=parseFloat(M.getAttribute("height"));if(!R&&P&&w)M.setAttribute("viewBox","0  0 "+P+" "+w);else if(R&&!P&&!w){var A=M.getAttribute("viewBox").split(/\s+|,/);P=A[2],w=A[3]}if(g)if(P&&w)p=P*g,m=w*g;else break t;M.setAttribute("width",p.toString()+"px"),M.setAttribute("height",m.toString()+"px"),o=[new XMLSerializer().serializeToString(M)]}try{var G=new window.Blob(o,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var O=this,L=!1;this.data.onload=function(){L||c.revokeObjectURL(O.data),O.onProcessComplete()},this.data.onerror=function(){L?O.onProcessError():(L=!0,c.revokeObjectURL(O.data),O.data.src="data:image/svg+xml,"+encodeURIComponent(o.join("")))},c.createObjectURL(this.data,G,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("svg",function(v,o,p,m){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new a(this,v[g]));else this.addFile(new a(this,v,o,p,m));return this}),h.exports=a},95171:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g){var x="js";if(r(p)){var C=p;p=l(C,"key"),m=l(C,"url"),g=l(C,"xhrSettings"),x=l(C,"extension",x)}var M={type:"text",extension:x,responseType:"text",key:p,url:m,xhrSettings:g};c.call(this,o,M)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var v=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),o=eval;this.loader.sceneManager.add(this.key,o(v)),this.complete=!0}});u.register("sceneFile",function(v,o,p){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new a(this,v[m]));else this.addFile(new a(this,v,o,p));return this}),h.exports=a},82458:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g,x,C){var M="js";if(r(p)){var R=p;p=l(R,"key"),m=l(R,"url"),C=l(R,"xhrSettings"),M=l(R,"extension",M),g=l(R,"systemKey"),x=l(R,"sceneKey")}var P={type:"scenePlugin",cache:!1,extension:M,responseType:"text",key:p,url:m,xhrSettings:C,config:{systemKey:g,sceneKey:x}};c.call(this,o,P),typeof m=="function"&&(this.data=m,this.state=y.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,o=this.config,p=this.key,m=l(o,"systemKey",p),g=l(o,"sceneKey",p);this.state===y.FILE_POPULATED?v.installScenePlugin(m,this.data,g,this.loader.scene,!0):(this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),v.installScenePlugin(m,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});u.register("scenePlugin",function(v,o,p,m,g){if(Array.isArray(v))for(var x=0;x<v.length;x++)this.addFile(new a(this,v[x]));else this.addFile(new a(this,v,o,p,m,g));return this}),h.exports=a},55188:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g,x){var C="js";if(r(p)){var M=p;p=l(M,"key"),m=l(M,"url"),g=l(M,"type","script"),x=l(M,"xhrSettings"),C=l(M,"extension",C)}else g===void 0&&(g="script");var R={type:g,cache:!1,extension:C,responseType:"text",key:p,url:m,xhrSettings:x};c.call(this,o,R)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("script",function(v,o,p,m){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new a(this,v[g]));else this.addFile(new a(this,v,o,p,m));return this}),h.exports=a},33536:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(76846),u=e(42927),l=new d({Extends:u,initialize:function(a,v,o,p,m){u.call(this,a,v,o,m,p),this.type="spritesheet"},addToCache:function(){var r=this.linkFile;r?r.state>=y.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,r.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,r.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});c.register("spritesheet",function(r,a,v,o){if(Array.isArray(r))for(var p=0;p<r.length;p++)this.addFile(new l(this,r[p]));else this.addFile(new l(this,r,a,v,o));return this}),h.exports=l},86897:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=new d({Extends:c,initialize:function(o,p,m,g){var x="text",C="txt",M=o.cacheManager.text;if(r(p)){var R=p;p=l(R,"key"),m=l(R,"url"),g=l(R,"xhrSettings"),C=l(R,"extension",C),x=l(R,"type",x),M=l(R,"cache",M)}var P={type:x,cache:M,extension:C,responseType:"text",key:p,url:m,xhrSettings:g};c.call(this,o,P)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("text",function(v,o,p){if(Array.isArray(v))for(var m=0;m<v.length;m++)this.addFile(new a(this,v[m]));else this.addFile(new a(this,v,o,p));return this}),h.exports=a},58673:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=e(93560),v=new d({Extends:c,initialize:function(p,m,g,x){var C="csv";if(r(m)){var M=m;m=l(M,"key"),g=l(M,"url"),x=l(M,"xhrSettings"),C=l(M,"extension",C)}var R={type:"tilemapCSV",cache:p.cacheManager.tilemap,extension:C,responseType:"text",key:m,url:g,xhrSettings:x};c.call(this,p,R),this.tilemapFormat=a.CSV},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var o={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,o)}});u.register("tilemapCSV",function(o,p,m){if(Array.isArray(o))for(var g=0;g<o.length;g++)this.addFile(new v(this,o[g]));else this.addFile(new v(this,o,p,m));return this}),h.exports=v},98896:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(70806),u=e(93560),l=new d({Extends:c,initialize:function(a,v,o,p){c.call(this,a,v,o,p),this.type="tilemapJSON",this.cache=a.cacheManager.tilemap},addToCache:function(){var r={format:u.WELTMEISTER,data:this.data};this.cache.add(this.key,r)}});y.register("tilemapImpact",function(r,a,v){if(Array.isArray(r))for(var o=0;o<r.length;o++)this.addFile(new l(this,r[o]));else this.addFile(new l(this,r,a,v));return this}),h.exports=l},50563:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(70806),u=e(93560),l=new d({Extends:c,initialize:function(a,v,o,p){c.call(this,a,v,o,p),this.type="tilemapJSON",this.cache=a.cacheManager.tilemap},addToCache:function(){var r={format:u.TILED_JSON,data:this.data};this.cache.add(this.key,r)}});y.register("tilemapTiledJSON",function(r,a,v){if(Array.isArray(r))for(var o=0;o<r.length;o++)this.addFile(new l(this,r[o]));else this.addFile(new l(this,r,a,v));return this}),h.exports=l},82857:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(76846),c=e(72632),u=e(42927),l=e(42911),r=e(45176),a=e(86897),v=new d({Extends:r,initialize:function(p,m,g,x,C,M){var R,P;if(l(m)){var w=m;m=c(w,"key"),R=new u(p,{key:m,url:c(w,"textureURL"),extension:c(w,"textureExtension","png"),normalMap:c(w,"normalMap"),xhrSettings:c(w,"textureXhrSettings")}),P=new a(p,{key:m,url:c(w,"atlasURL"),extension:c(w,"atlasExtension","txt"),xhrSettings:c(w,"atlasXhrSettings")})}else R=new u(p,m,g,C),P=new a(p,m,x,M);R.linkFile?r.call(this,p,"unityatlas",m,[R,P,R.linkFile]):r.call(this,p,"unityatlas",m,[R,P])},addToCache:function(){if(this.isReadyToProcess()){var o=this.files[0],p=this.files[1],m=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(o.key,o.data,p.data,m),this.complete=!0}}});y.register("unityAtlas",function(o,p,m,g,x){var C;if(Array.isArray(o))for(var M=0;M<o.length;M++)C=new v(this,o[M]),this.addFile(C.files);else C=new v(this,o,p,m,g,x),this.addFile(C.files);return this}),h.exports=v},22833:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(30750),r=e(72632),a=e(42911),v=new d({Extends:c,initialize:function(p,m,g,x){if(x===void 0&&(x=!1),a(m)){var C=m;m=r(C,"key"),g=r(C,"url",[]),x=r(C,"noAudio",!1)}var M=p.systems.game.device.video.getVideoURL(g);M||console.warn("VideoFile: No supported format for "+m);var R={type:"video",cache:p.cacheManager.video,extension:M.type,key:m,url:M.url,config:{noAudio:x}};c.call(this,p,R)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=l(this,this.loader.baseURL),this.state=y.FILE_LOADED,this.loader.nextFile(this,!0)}});u.register("video",function(o,p,m){if(Array.isArray(o))for(var g=0;g<o.length;g++)this.addFile(new v(this,o[g]));else this.addFile(new v(this,o,p,m));return this}),h.exports=v},15297:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12117),c=e(98035),u=e(76846),l=e(72632),r=e(42911),a=e(89200),v=new d({Extends:c,initialize:function(p,m,g,x){var C="xml";if(r(m)){var M=m;m=l(M,"key"),g=l(M,"url"),x=l(M,"xhrSettings"),C=l(M,"extension",C)}var R={type:"xml",cache:p.cacheManager.xml,extension:C,responseType:"text",key:m,url:g,xhrSettings:x};c.call(this,p,R)},onProcess:function(){this.state=y.FILE_PROCESSING,this.data=a(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});u.register("xml",function(o,p,m){if(Array.isArray(o))for(var g=0;g<o.length;g++)this.addFile(new v(this,o[g]));else this.addFile(new v(this,o,p,m));return this}),h.exports=v},34034:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AnimationJSONFile:e(46468),AsepriteFile:e(31648),AtlasJSONFile:e(73152),AtlasXMLFile:e(24616),AudioFile:e(67448),AudioSpriteFile:e(66109),BinaryFile:e(40612),BitmapFontFile:e(54565),CompressedTextureFile:e(47375),CSSFile:e(99898),GLSLFile:e(46568),HTML5AudioFile:e(30929),HTMLFile:e(77459),HTMLTextureFile:e(9755),ImageFile:e(42927),JSONFile:e(70806),MultiAtlasFile:e(80802),MultiScriptFile:e(39034),OBJFile:e(85527),PackFile:e(3616),PluginFile:e(12217),SceneFile:e(95171),ScenePluginFile:e(82458),ScriptFile:e(55188),SpriteSheetFile:e(33536),SVGFile:e(4474),TextFile:e(86897),TilemapCSVFile:e(58673),TilemapImpactFile:e(98896),TilemapJSONFile:e(50563),UnityAtlasFile:e(82857),VideoFile:e(22833),XMLFile:e(15297)}},95695:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12117),y=e(98611),c={Events:e(683),FileTypes:e(34034),File:e(98035),FileTypesManager:e(76846),GetURL:e(30750),LoaderPlugin:e(67285),MergeXHRSettings:e(43531),MultiFile:e(45176),XHRLoader:e(88490),XHRSettings:e(33868)};c=y(!1,c,d),h.exports=c},26042:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){for(var d=0,y=0;y<e.length;y++)d+=+e[y];return d/e.length};h.exports=S},22824:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8034),y=function(c,u){return d(c)/d(u)/d(c-u)};h.exports=y},17489:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return Math.floor(Math.random()*(d-e+1)+e)};h.exports=S},14976:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u){var l=(c-d)*.5,r=(u-y)*.5,a=e*e,v=e*a;return(2*y-2*c+l+r)*v+(-3*y+3*c-2*l-r)*a+l*e+y};h.exports=S},89129:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){d===void 0&&(d=0),y===void 0&&(y=10);var c=Math.pow(y,-d);return Math.ceil(e*c)/c};h.exports=S},82897:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return Math.max(d,Math.min(y,e))};h.exports=S},75606:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),y=function(c){return c*d.DEG_TO_RAD};h.exports=y},767:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return Math.abs(e-d)};h.exports=S},9849:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=e(56694),c=e(16650),u=e(72283),l=new c,r=new y({initialize:function a(v,o,p,m){v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m=a.DefaultOrder),this._x=v,this._y=o,this._z=p,this._order=m,this.onChangeCallback=u},x:{get:function(){return this._x},set:function(a){this._x=a,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(a){this._y=a,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(a){this._z=a,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(a){this._order=a,this.onChangeCallback(this)}},set:function(a,v,o,p){return p===void 0&&(p=this._order),this._x=a,this._y=v,this._z=o,this._order=p,this.onChangeCallback(this),this},copy:function(a){return this.set(a.x,a.y,a.z,a.order)},setFromQuaternion:function(a,v,o){return v===void 0&&(v=this._order),o===void 0&&(o=!1),l.fromQuat(a),this.setFromRotationMatrix(l,v,o)},setFromRotationMatrix:function(a,v,o){v===void 0&&(v=this._order),o===void 0&&(o=!1);var p=a.val,m=p[0],g=p[4],x=p[8],C=p[1],M=p[5],R=p[9],P=p[2],w=p[6],A=p[10],G=0,O=0,L=0,I=.99999;switch(v){case"XYZ":{O=Math.asin(d(x,-1,1)),Math.abs(x)<I?(G=Math.atan2(-R,A),L=Math.atan2(-g,m)):G=Math.atan2(w,M);break}case"YXZ":{G=Math.asin(-d(R,-1,1)),Math.abs(R)<I?(O=Math.atan2(x,A),L=Math.atan2(C,M)):O=Math.atan2(-P,m);break}case"ZXY":{G=Math.asin(d(w,-1,1)),Math.abs(w)<I?(O=Math.atan2(-P,A),L=Math.atan2(-g,M)):L=Math.atan2(C,m);break}case"ZYX":{O=Math.asin(-d(P,-1,1)),Math.abs(P)<I?(G=Math.atan2(w,A),L=Math.atan2(C,m)):L=Math.atan2(-g,M);break}case"YZX":{L=Math.asin(d(C,-1,1)),Math.abs(C)<I?(G=Math.atan2(-R,M),O=Math.atan2(-P,m)):O=Math.atan2(x,A);break}case"XZY":{L=Math.asin(-d(g,-1,1)),Math.abs(g)<I?(G=Math.atan2(w,M),O=Math.atan2(x,m)):G=Math.atan2(-R,A);break}}return this._x=G,this._y=O,this._z=L,this._order=v,o&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",h.exports=r},8034:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){if(e===0)return 1;for(var d=e;--e;)d*=e;return d};h.exports=S},61616:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return Math.random()*(d-e)+e};h.exports=S},60679:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){d===void 0&&(d=0),y===void 0&&(y=10);var c=Math.pow(y,-d);return Math.floor(e*c)/c};h.exports=S},91806:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=function(c,u,l){return c=d(c,0,1),(l-u)*c+u};h.exports=y},79366:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e/d/1e3};h.exports=S},43776:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e==parseFloat(e)?!(e%2):void 0};h.exports=S},58442:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e===parseFloat(e)?!(e%2):void 0};h.exports=S},42798:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return(d-e)*y+e};h.exports=S},61072:h=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return y===void 0&&(y=0),e.clone().lerp(d,y)};h.exports=S},5341:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u){this.val=new Float32Array(9),u?this.copy(u):this.identity()},clone:function(){return new y(this)},set:function(c){return this.copy(c)},copy:function(c){var u=this.val,l=c.val;return u[0]=l[0],u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5],u[6]=l[6],u[7]=l[7],u[8]=l[8],this},fromMat4:function(c){var u=c.val,l=this.val;return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[4],l[4]=u[5],l[5]=u[6],l[6]=u[8],l[7]=u[9],l[8]=u[10],this},fromArray:function(c){var u=this.val;return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[8]=c[8],this},identity:function(){var c=this.val;return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=1,c[5]=0,c[6]=0,c[7]=0,c[8]=1,this},transpose:function(){var c=this.val,u=c[1],l=c[2],r=c[5];return c[1]=c[3],c[2]=c[6],c[3]=u,c[5]=c[7],c[6]=l,c[7]=r,this},invert:function(){var c=this.val,u=c[0],l=c[1],r=c[2],a=c[3],v=c[4],o=c[5],p=c[6],m=c[7],g=c[8],x=g*v-o*m,C=-g*a+o*p,M=m*a-v*p,R=u*x+l*C+r*M;return R?(R=1/R,c[0]=x*R,c[1]=(-g*l+r*m)*R,c[2]=(o*l-r*v)*R,c[3]=C*R,c[4]=(g*u-r*p)*R,c[5]=(-o*u+r*a)*R,c[6]=M*R,c[7]=(-m*u+l*p)*R,c[8]=(v*u-l*a)*R,this):null},adjoint:function(){var c=this.val,u=c[0],l=c[1],r=c[2],a=c[3],v=c[4],o=c[5],p=c[6],m=c[7],g=c[8];return c[0]=v*g-o*m,c[1]=r*m-l*g,c[2]=l*o-r*v,c[3]=o*p-a*g,c[4]=u*g-r*p,c[5]=r*a-u*o,c[6]=a*m-v*p,c[7]=l*p-u*m,c[8]=u*v-l*a,this},determinant:function(){var c=this.val,u=c[0],l=c[1],r=c[2],a=c[3],v=c[4],o=c[5],p=c[6],m=c[7],g=c[8];return u*(g*v-o*m)+l*(-g*a+o*p)+r*(m*a-v*p)},multiply:function(c){var u=this.val,l=u[0],r=u[1],a=u[2],v=u[3],o=u[4],p=u[5],m=u[6],g=u[7],x=u[8],C=c.val,M=C[0],R=C[1],P=C[2],w=C[3],A=C[4],G=C[5],O=C[6],L=C[7],I=C[8];return u[0]=M*l+R*v+P*m,u[1]=M*r+R*o+P*g,u[2]=M*a+R*p+P*x,u[3]=w*l+A*v+G*m,u[4]=w*r+A*o+G*g,u[5]=w*a+A*p+G*x,u[6]=O*l+L*v+I*m,u[7]=O*r+L*o+I*g,u[8]=O*a+L*p+I*x,this},translate:function(c){var u=this.val,l=c.x,r=c.y;return u[6]=l*u[0]+r*u[3]+u[6],u[7]=l*u[1]+r*u[4]+u[7],u[8]=l*u[2]+r*u[5]+u[8],this},rotate:function(c){var u=this.val,l=u[0],r=u[1],a=u[2],v=u[3],o=u[4],p=u[5],m=Math.sin(c),g=Math.cos(c);return u[0]=g*l+m*v,u[1]=g*r+m*o,u[2]=g*a+m*p,u[3]=g*v-m*l,u[4]=g*o-m*r,u[5]=g*p-m*a,this},scale:function(c){var u=this.val,l=c.x,r=c.y;return u[0]=l*u[0],u[1]=l*u[1],u[2]=l*u[2],u[3]=r*u[3],u[4]=r*u[4],u[5]=r*u[5],this},fromQuat:function(c){var u=c.x,l=c.y,r=c.z,a=c.w,v=u+u,o=l+l,p=r+r,m=u*v,g=u*o,x=u*p,C=l*o,M=l*p,R=r*p,P=a*v,w=a*o,A=a*p,G=this.val;return G[0]=1-(C+R),G[3]=g+A,G[6]=x-w,G[1]=g-A,G[4]=1-(m+R),G[7]=M+P,G[2]=x+w,G[5]=M-P,G[8]=1-(m+C),this},normalFromMat4:function(c){var u=c.val,l=this.val,r=u[0],a=u[1],v=u[2],o=u[3],p=u[4],m=u[5],g=u[6],x=u[7],C=u[8],M=u[9],R=u[10],P=u[11],w=u[12],A=u[13],G=u[14],O=u[15],L=r*m-a*p,I=r*g-v*p,F=r*x-o*p,D=a*g-v*m,V=a*x-o*m,k=v*x-o*g,W=C*A-M*w,X=C*G-R*w,H=C*O-P*w,$=M*G-R*A,z=M*O-P*A,b=R*O-P*G,B=L*b-I*z+F*$+D*H-V*X+k*W;return B?(B=1/B,l[0]=(m*b-g*z+x*$)*B,l[1]=(g*H-p*b-x*X)*B,l[2]=(p*z-m*H+x*W)*B,l[3]=(v*z-a*b-o*$)*B,l[4]=(r*b-v*H+o*X)*B,l[5]=(a*H-r*z-o*W)*B,l[6]=(A*k-G*V+O*D)*B,l[7]=(G*F-w*k-O*I)*B,l[8]=(w*V-A*F+O*L)*B,this):null}});h.exports=y},16650:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(70015),c=1e-6,u=new d({initialize:function(m){this.val=new Float32Array(16),m?this.copy(m):this.identity()},clone:function(){return new u(this)},set:function(p){return this.copy(p)},setValues:function(p,m,g,x,C,M,R,P,w,A,G,O,L,I,F,D){var V=this.val;return V[0]=p,V[1]=m,V[2]=g,V[3]=x,V[4]=C,V[5]=M,V[6]=R,V[7]=P,V[8]=w,V[9]=A,V[10]=G,V[11]=O,V[12]=L,V[13]=I,V[14]=F,V[15]=D,this},copy:function(p){var m=p.val;return this.setValues(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15])},fromArray:function(p){return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(p,m,g){var x=l.fromQuat(g),C=x.val,M=m.x,R=m.y,P=m.z;return this.setValues(C[0]*M,C[1]*M,C[2]*M,0,C[4]*R,C[5]*R,C[6]*R,0,C[8]*P,C[9]*P,C[10]*P,0,p.x,p.y,p.z,1)},xyz:function(p,m,g){this.identity();var x=this.val;return x[12]=p,x[13]=m,x[14]=g,this},scaling:function(p,m,g){this.zero();var x=this.val;return x[0]=p,x[5]=m,x[10]=g,x[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var p=this.val,m=p[1],g=p[2],x=p[3],C=p[6],M=p[7],R=p[11];return p[1]=p[4],p[2]=p[8],p[3]=p[12],p[4]=m,p[6]=p[9],p[7]=p[13],p[8]=g,p[9]=C,p[11]=p[14],p[12]=x,p[13]=M,p[14]=R,this},getInverse:function(p){return this.copy(p),this.invert()},invert:function(){var p=this.val,m=p[0],g=p[1],x=p[2],C=p[3],M=p[4],R=p[5],P=p[6],w=p[7],A=p[8],G=p[9],O=p[10],L=p[11],I=p[12],F=p[13],D=p[14],V=p[15],k=m*R-g*M,W=m*P-x*M,X=m*w-C*M,H=g*P-x*R,$=g*w-C*R,z=x*w-C*P,b=A*F-G*I,B=A*D-O*I,N=A*V-L*I,U=G*D-O*F,Y=G*V-L*F,K=O*V-L*D,Z=k*K-W*Y+X*U+H*N-$*B+z*b;return Z?(Z=1/Z,this.setValues((R*K-P*Y+w*U)*Z,(x*Y-g*K-C*U)*Z,(F*z-D*$+V*H)*Z,(O*$-G*z-L*H)*Z,(P*N-M*K-w*B)*Z,(m*K-x*N+C*B)*Z,(D*X-I*z-V*W)*Z,(A*z-O*X+L*W)*Z,(M*Y-R*N+w*b)*Z,(g*N-m*Y-C*b)*Z,(I*$-F*X+V*k)*Z,(G*X-A*$-L*k)*Z,(R*B-M*U-P*b)*Z,(m*U-g*B+x*b)*Z,(F*W-I*H-D*k)*Z,(A*H-G*W+O*k)*Z)):this},adjoint:function(){var p=this.val,m=p[0],g=p[1],x=p[2],C=p[3],M=p[4],R=p[5],P=p[6],w=p[7],A=p[8],G=p[9],O=p[10],L=p[11],I=p[12],F=p[13],D=p[14],V=p[15];return this.setValues(R*(O*V-L*D)-G*(P*V-w*D)+F*(P*L-w*O),-(g*(O*V-L*D)-G*(x*V-C*D)+F*(x*L-C*O)),g*(P*V-w*D)-R*(x*V-C*D)+F*(x*w-C*P),-(g*(P*L-w*O)-R*(x*L-C*O)+G*(x*w-C*P)),-(M*(O*V-L*D)-A*(P*V-w*D)+I*(P*L-w*O)),m*(O*V-L*D)-A*(x*V-C*D)+I*(x*L-C*O),-(m*(P*V-w*D)-M*(x*V-C*D)+I*(x*w-C*P)),m*(P*L-w*O)-M*(x*L-C*O)+A*(x*w-C*P),M*(G*V-L*F)-A*(R*V-w*F)+I*(R*L-w*G),-(m*(G*V-L*F)-A*(g*V-C*F)+I*(g*L-C*G)),m*(R*V-w*F)-M*(g*V-C*F)+I*(g*w-C*R),-(m*(R*L-w*G)-M*(g*L-C*G)+A*(g*w-C*R)),-(M*(G*D-O*F)-A*(R*D-P*F)+I*(R*O-P*G)),m*(G*D-O*F)-A*(g*D-x*F)+I*(g*O-x*G),-(m*(R*D-P*F)-M*(g*D-x*F)+I*(g*P-x*R)),m*(R*O-P*G)-M*(g*O-x*G)+A*(g*P-x*R))},determinant:function(){var p=this.val,m=p[0],g=p[1],x=p[2],C=p[3],M=p[4],R=p[5],P=p[6],w=p[7],A=p[8],G=p[9],O=p[10],L=p[11],I=p[12],F=p[13],D=p[14],V=p[15],k=m*R-g*M,W=m*P-x*M,X=m*w-C*M,H=g*P-x*R,$=g*w-C*R,z=x*w-C*P,b=A*F-G*I,B=A*D-O*I,N=A*V-L*I,U=G*D-O*F,Y=G*V-L*F,K=O*V-L*D;return k*K-W*Y+X*U+H*N-$*B+z*b},multiply:function(p){var m=this.val,g=m[0],x=m[1],C=m[2],M=m[3],R=m[4],P=m[5],w=m[6],A=m[7],G=m[8],O=m[9],L=m[10],I=m[11],F=m[12],D=m[13],V=m[14],k=m[15],W=p.val,X=W[0],H=W[1],$=W[2],z=W[3];return m[0]=X*g+H*R+$*G+z*F,m[1]=X*x+H*P+$*O+z*D,m[2]=X*C+H*w+$*L+z*V,m[3]=X*M+H*A+$*I+z*k,X=W[4],H=W[5],$=W[6],z=W[7],m[4]=X*g+H*R+$*G+z*F,m[5]=X*x+H*P+$*O+z*D,m[6]=X*C+H*w+$*L+z*V,m[7]=X*M+H*A+$*I+z*k,X=W[8],H=W[9],$=W[10],z=W[11],m[8]=X*g+H*R+$*G+z*F,m[9]=X*x+H*P+$*O+z*D,m[10]=X*C+H*w+$*L+z*V,m[11]=X*M+H*A+$*I+z*k,X=W[12],H=W[13],$=W[14],z=W[15],m[12]=X*g+H*R+$*G+z*F,m[13]=X*x+H*P+$*O+z*D,m[14]=X*C+H*w+$*L+z*V,m[15]=X*M+H*A+$*I+z*k,this},multiplyLocal:function(p){var m=this.val,g=p.val;return this.setValues(m[0]*g[0]+m[1]*g[4]+m[2]*g[8]+m[3]*g[12],m[0]*g[1]+m[1]*g[5]+m[2]*g[9]+m[3]*g[13],m[0]*g[2]+m[1]*g[6]+m[2]*g[10]+m[3]*g[14],m[0]*g[3]+m[1]*g[7]+m[2]*g[11]+m[3]*g[15],m[4]*g[0]+m[5]*g[4]+m[6]*g[8]+m[7]*g[12],m[4]*g[1]+m[5]*g[5]+m[6]*g[9]+m[7]*g[13],m[4]*g[2]+m[5]*g[6]+m[6]*g[10]+m[7]*g[14],m[4]*g[3]+m[5]*g[7]+m[6]*g[11]+m[7]*g[15],m[8]*g[0]+m[9]*g[4]+m[10]*g[8]+m[11]*g[12],m[8]*g[1]+m[9]*g[5]+m[10]*g[9]+m[11]*g[13],m[8]*g[2]+m[9]*g[6]+m[10]*g[10]+m[11]*g[14],m[8]*g[3]+m[9]*g[7]+m[10]*g[11]+m[11]*g[15],m[12]*g[0]+m[13]*g[4]+m[14]*g[8]+m[15]*g[12],m[12]*g[1]+m[13]*g[5]+m[14]*g[9]+m[15]*g[13],m[12]*g[2]+m[13]*g[6]+m[14]*g[10]+m[15]*g[14],m[12]*g[3]+m[13]*g[7]+m[14]*g[11]+m[15]*g[15])},premultiply:function(p){return this.multiplyMatrices(p,this)},multiplyMatrices:function(p,m){var g=p.val,x=m.val,C=g[0],M=g[4],R=g[8],P=g[12],w=g[1],A=g[5],G=g[9],O=g[13],L=g[2],I=g[6],F=g[10],D=g[14],V=g[3],k=g[7],W=g[11],X=g[15],H=x[0],$=x[4],z=x[8],b=x[12],B=x[1],N=x[5],U=x[9],Y=x[13],K=x[2],Z=x[6],J=x[10],Q=x[14],j=x[3],q=x[7],tt=x[11],_=x[15];return this.setValues(C*H+M*B+R*K+P*j,w*H+A*B+G*K+O*j,L*H+I*B+F*K+D*j,V*H+k*B+W*K+X*j,C*$+M*N+R*Z+P*q,w*$+A*N+G*Z+O*q,L*$+I*N+F*Z+D*q,V*$+k*N+W*Z+X*q,C*z+M*U+R*J+P*tt,w*z+A*U+G*J+O*tt,L*z+I*U+F*J+D*tt,V*z+k*U+W*J+X*tt,C*b+M*Y+R*Q+P*_,w*b+A*Y+G*Q+O*_,L*b+I*Y+F*Q+D*_,V*b+k*Y+W*Q+X*_)},translate:function(p){return this.translateXYZ(p.x,p.y,p.z)},translateXYZ:function(p,m,g){var x=this.val;return x[12]=x[0]*p+x[4]*m+x[8]*g+x[12],x[13]=x[1]*p+x[5]*m+x[9]*g+x[13],x[14]=x[2]*p+x[6]*m+x[10]*g+x[14],x[15]=x[3]*p+x[7]*m+x[11]*g+x[15],this},scale:function(p){return this.scaleXYZ(p.x,p.y,p.z)},scaleXYZ:function(p,m,g){var x=this.val;return x[0]=x[0]*p,x[1]=x[1]*p,x[2]=x[2]*p,x[3]=x[3]*p,x[4]=x[4]*m,x[5]=x[5]*m,x[6]=x[6]*m,x[7]=x[7]*m,x[8]=x[8]*g,x[9]=x[9]*g,x[10]=x[10]*g,x[11]=x[11]*g,this},makeRotationAxis:function(p,m){var g=Math.cos(m),x=Math.sin(m),C=1-g,M=p.x,R=p.y,P=p.z,w=C*M,A=C*R;return this.setValues(w*M+g,w*R-x*P,w*P+x*R,0,w*R+x*P,A*R+g,A*P-x*M,0,w*P-x*R,A*P+x*M,C*P*P+g,0,0,0,0,1)},rotate:function(p,m){var g=this.val,x=m.x,C=m.y,M=m.z,R=Math.sqrt(x*x+C*C+M*M);if(Math.abs(R)<c)return this;R=1/R,x*=R,C*=R,M*=R;var P=Math.sin(p),w=Math.cos(p),A=1-w,G=g[0],O=g[1],L=g[2],I=g[3],F=g[4],D=g[5],V=g[6],k=g[7],W=g[8],X=g[9],H=g[10],$=g[11],z=g[12],b=g[13],B=g[14],N=g[15],U=x*x*A+w,Y=C*x*A+M*P,K=M*x*A-C*P,Z=x*C*A-M*P,J=C*C*A+w,Q=M*C*A+x*P,j=x*M*A+C*P,q=C*M*A-x*P,tt=M*M*A+w;return this.setValues(G*U+F*Y+W*K,O*U+D*Y+X*K,L*U+V*Y+H*K,I*U+k*Y+$*K,G*Z+F*J+W*Q,O*Z+D*J+X*Q,L*Z+V*J+H*Q,I*Z+k*J+$*Q,G*j+F*q+W*tt,O*j+D*q+X*tt,L*j+V*q+H*tt,I*j+k*q+$*tt,z,b,B,N)},rotateX:function(p){var m=this.val,g=Math.sin(p),x=Math.cos(p),C=m[4],M=m[5],R=m[6],P=m[7],w=m[8],A=m[9],G=m[10],O=m[11];return m[4]=C*x+w*g,m[5]=M*x+A*g,m[6]=R*x+G*g,m[7]=P*x+O*g,m[8]=w*x-C*g,m[9]=A*x-M*g,m[10]=G*x-R*g,m[11]=O*x-P*g,this},rotateY:function(p){var m=this.val,g=Math.sin(p),x=Math.cos(p),C=m[0],M=m[1],R=m[2],P=m[3],w=m[8],A=m[9],G=m[10],O=m[11];return m[0]=C*x-w*g,m[1]=M*x-A*g,m[2]=R*x-G*g,m[3]=P*x-O*g,m[8]=C*g+w*x,m[9]=M*g+A*x,m[10]=R*g+G*x,m[11]=P*g+O*x,this},rotateZ:function(p){var m=this.val,g=Math.sin(p),x=Math.cos(p),C=m[0],M=m[1],R=m[2],P=m[3],w=m[4],A=m[5],G=m[6],O=m[7];return m[0]=C*x+w*g,m[1]=M*x+A*g,m[2]=R*x+G*g,m[3]=P*x+O*g,m[4]=w*x-C*g,m[5]=A*x-M*g,m[6]=G*x-R*g,m[7]=O*x-P*g,this},fromRotationTranslation:function(p,m){var g=p.x,x=p.y,C=p.z,M=p.w,R=g+g,P=x+x,w=C+C,A=g*R,G=g*P,O=g*w,L=x*P,I=x*w,F=C*w,D=M*R,V=M*P,k=M*w;return this.setValues(1-(L+F),G+k,O-V,0,G-k,1-(A+F),I+D,0,O+V,I-D,1-(A+L),0,m.x,m.y,m.z,1)},fromQuat:function(p){var m=p.x,g=p.y,x=p.z,C=p.w,M=m+m,R=g+g,P=x+x,w=m*M,A=m*R,G=m*P,O=g*R,L=g*P,I=x*P,F=C*M,D=C*R,V=C*P;return this.setValues(1-(O+I),A+V,G-D,0,A-V,1-(w+I),L+F,0,G+D,L-F,1-(w+O),0,0,0,0,1)},frustum:function(p,m,g,x,C,M){var R=1/(m-p),P=1/(x-g),w=1/(C-M);return this.setValues(C*2*R,0,0,0,0,C*2*P,0,0,(m+p)*R,(x+g)*P,(M+C)*w,-1,0,0,M*C*2*w,0)},perspective:function(p,m,g,x){var C=1/Math.tan(p/2),M=1/(g-x);return this.setValues(C/m,0,0,0,0,C,0,0,0,0,(x+g)*M,-1,0,0,2*x*g*M,0)},perspectiveLH:function(p,m,g,x){return this.setValues(2*g/p,0,0,0,0,2*g/m,0,0,0,0,-x/(g-x),1,0,0,g*x/(g-x),0)},ortho:function(p,m,g,x,C,M){var R=p-m,P=g-x,w=C-M;return R=R===0?R:1/R,P=P===0?P:1/P,w=w===0?w:1/w,this.setValues(-2*R,0,0,0,0,-2*P,0,0,0,0,2*w,0,(p+m)*R,(x+g)*P,(M+C)*w,1)},lookAtRH:function(p,m,g){var x=this.val;return o.subVectors(p,m),o.getLengthSquared()===0&&(o.z=1),o.normalize(),a.crossVectors(g,o),a.getLengthSquared()===0&&(Math.abs(g.z)===1?o.x+=1e-4:o.z+=1e-4,o.normalize(),a.crossVectors(g,o)),a.normalize(),v.crossVectors(o,a),x[0]=a.x,x[1]=a.y,x[2]=a.z,x[4]=v.x,x[5]=v.y,x[6]=v.z,x[8]=o.x,x[9]=o.y,x[10]=o.z,this},lookAt:function(p,m,g){var x=p.x,C=p.y,M=p.z,R=g.x,P=g.y,w=g.z,A=m.x,G=m.y,O=m.z;if(Math.abs(x-A)<c&&Math.abs(C-G)<c&&Math.abs(M-O)<c)return this.identity();var L=x-A,I=C-G,F=M-O,D=1/Math.sqrt(L*L+I*I+F*F);L*=D,I*=D,F*=D;var V=P*F-w*I,k=w*L-R*F,W=R*I-P*L;D=Math.sqrt(V*V+k*k+W*W),D?(D=1/D,V*=D,k*=D,W*=D):(V=0,k=0,W=0);var X=I*W-F*k,H=F*V-L*W,$=L*k-I*V;return D=Math.sqrt(X*X+H*H+$*$),D?(D=1/D,X*=D,H*=D,$*=D):(X=0,H=0,$=0),this.setValues(V,X,L,0,k,H,I,0,W,$,F,0,-(V*x+k*C+W*M),-(X*x+H*C+$*M),-(L*x+I*C+F*M),1)},yawPitchRoll:function(p,m,g){this.zero(),l.zero(),r.zero();var x=this.val,C=l.val,M=r.val,R=Math.sin(g),P=Math.cos(g);return x[10]=1,x[15]=1,x[0]=P,x[1]=R,x[4]=-R,x[5]=P,R=Math.sin(m),P=Math.cos(m),C[0]=1,C[15]=1,C[5]=P,C[10]=P,C[9]=-R,C[6]=R,R=Math.sin(p),P=Math.cos(p),M[5]=1,M[15]=1,M[0]=P,M[2]=-R,M[8]=R,M[10]=P,this.multiplyLocal(l),this.multiplyLocal(r),this},setWorldMatrix:function(p,m,g,x,C){return this.yawPitchRoll(p.y,p.x,p.z),l.scaling(g.x,g.y,g.z),r.xyz(m.x,m.y,m.z),this.multiplyLocal(l),this.multiplyLocal(r),x&&this.multiplyLocal(x),C&&this.multiplyLocal(C),this},multiplyToMat4:function(p,m){var g=this.val,x=p.val,C=g[0],M=g[1],R=g[2],P=g[3],w=g[4],A=g[5],G=g[6],O=g[7],L=g[8],I=g[9],F=g[10],D=g[11],V=g[12],k=g[13],W=g[14],X=g[15],H=x[0],$=x[1],z=x[2],b=x[3],B=x[4],N=x[5],U=x[6],Y=x[7],K=x[8],Z=x[9],J=x[10],Q=x[11],j=x[12],q=x[13],tt=x[14],_=x[15];return m.setValues(H*C+$*w+z*L+b*V,$*M+$*A+z*I+b*k,z*R+$*G+z*F+b*W,b*P+$*O+z*D+b*X,B*C+N*w+U*L+Y*V,B*M+N*A+U*I+Y*k,B*R+N*G+U*F+Y*W,B*P+N*O+U*D+Y*X,K*C+Z*w+J*L+Q*V,K*M+Z*A+J*I+Q*k,K*R+Z*G+J*F+Q*W,K*P+Z*O+J*D+Q*X,j*C+q*w+tt*L+_*V,j*M+q*A+tt*I+_*k,j*R+q*G+tt*F+_*W,j*P+q*O+tt*D+_*X)},fromRotationXYTranslation:function(p,m,g){var x=m.x,C=m.y,M=m.z,R=Math.sin(p.x),P=Math.cos(p.x),w=Math.sin(p.y),A=Math.cos(p.y),G=x,O=C,L=M,I=-R,F=0-I*w,D=0-P*w,V=I*A,k=P*A;return g||(G=A*x+w*M,O=F*x+P*C+V*M,L=D*x+R*C+k*M),this.setValues(A,F,D,0,0,P,R,0,w,V,k,0,G,O,L,1)},getMaxScaleOnAxis:function(){var p=this.val,m=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],g=p[4]*p[4]+p[5]*p[5]+p[6]*p[6],x=p[8]*p[8]+p[9]*p[9]+p[10]*p[10];return Math.sqrt(Math.max(m,g,x))}}),l=new u,r=new u,a=new y,v=new y,o=new y;h.exports=u},69635:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return Math.min(e+d,y)};h.exports=S},37394:h=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d=e.length;if(d===0)return 0;e.sort(function(c,u){return c-u});var y=Math.floor(d/2);return d%2===0?(e[y]+e[y-1])/2:e[y]};h.exports=S},17259:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return Math.max(e-d,y)};h.exports=S},61820:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){y===void 0&&(y=d+1);var u=(e-d)/(y-d);return u>1?c!==void 0?(u=(c-e)/(c-y),u<0&&(u=0)):u=1:u<0&&(u=0),u};h.exports=S},75003:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(5341),c=e(72283),u=e(70015),l=1e-6,r=new Int8Array([1,2,0]),a=new Float32Array([0,0,0]),v=new u(1,0,0),o=new u(0,1,0),p=new u,m=new y,g=new d({initialize:function(C,M,R,P){this.onChangeCallback=c,this.set(C,M,R,P)},x:{get:function(){return this._x},set:function(x){this._x=x,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(x){this._y=x,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(x){this._z=x,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(x){this._w=x,this.onChangeCallback(this)}},copy:function(x){return this.set(x)},set:function(x,C,M,R,P){return P===void 0&&(P=!0),typeof x=="object"?(this._x=x.x||0,this._y=x.y||0,this._z=x.z||0,this._w=x.w||0):(this._x=x||0,this._y=C||0,this._z=M||0,this._w=R||0),P&&this.onChangeCallback(this),this},add:function(x){return this._x+=x.x,this._y+=x.y,this._z+=x.z,this._w+=x.w,this.onChangeCallback(this),this},subtract:function(x){return this._x-=x.x,this._y-=x.y,this._z-=x.z,this._w-=x.w,this.onChangeCallback(this),this},scale:function(x){return this._x*=x,this._y*=x,this._z*=x,this._w*=x,this.onChangeCallback(this),this},length:function(){var x=this.x,C=this.y,M=this.z,R=this.w;return Math.sqrt(x*x+C*C+M*M+R*R)},lengthSq:function(){var x=this.x,C=this.y,M=this.z,R=this.w;return x*x+C*C+M*M+R*R},normalize:function(){var x=this.x,C=this.y,M=this.z,R=this.w,P=x*x+C*C+M*M+R*R;return P>0&&(P=1/Math.sqrt(P),this._x=x*P,this._y=C*P,this._z=M*P,this._w=R*P),this.onChangeCallback(this),this},dot:function(x){return this.x*x.x+this.y*x.y+this.z*x.z+this.w*x.w},lerp:function(x,C){C===void 0&&(C=0);var M=this.x,R=this.y,P=this.z,w=this.w;return this.set(M+C*(x.x-M),R+C*(x.y-R),P+C*(x.z-P),w+C*(x.w-w))},rotationTo:function(x,C){var M=x.x*C.x+x.y*C.y+x.z*C.z;return M<-.999999?(p.copy(v).cross(x).length()<l&&p.copy(o).cross(x),p.normalize(),this.setAxisAngle(p,Math.PI)):M>.999999?this.set(0,0,0,1):(p.copy(x).cross(C),this._x=p.x,this._y=p.y,this._z=p.z,this._w=1+M,this.normalize())},setAxes:function(x,C,M){var R=m.val;return R[0]=C.x,R[3]=C.y,R[6]=C.z,R[1]=M.x,R[4]=M.y,R[7]=M.z,R[2]=-x.x,R[5]=-x.y,R[8]=-x.z,this.fromMat3(m).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(x,C){C=C*.5;var M=Math.sin(C);return this.set(M*x.x,M*x.y,M*x.z,Math.cos(C))},multiply:function(x){var C=this.x,M=this.y,R=this.z,P=this.w,w=x.x,A=x.y,G=x.z,O=x.w;return this.set(C*O+P*w+M*G-R*A,M*O+P*A+R*w-C*G,R*O+P*G+C*A-M*w,P*O-C*w-M*A-R*G)},slerp:function(x,C){var M=this.x,R=this.y,P=this.z,w=this.w,A=x.x,G=x.y,O=x.z,L=x.w,I=M*A+R*G+P*O+w*L;I<0&&(I=-I,A=-A,G=-G,O=-O,L=-L);var F=1-C,D=C;if(1-I>l){var V=Math.acos(I),k=Math.sin(V);F=Math.sin((1-C)*V)/k,D=Math.sin(C*V)/k}return this.set(F*M+D*A,F*R+D*G,F*P+D*O,F*w+D*L)},invert:function(){var x=this.x,C=this.y,M=this.z,R=this.w,P=x*x+C*C+M*M+R*R,w=P?1/P:0;return this.set(-x*w,-C*w,-M*w,R*w)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(x){x*=.5;var C=this.x,M=this.y,R=this.z,P=this.w,w=Math.sin(x),A=Math.cos(x);return this.set(C*A+P*w,M*A+R*w,R*A-M*w,P*A-C*w)},rotateY:function(x){x*=.5;var C=this.x,M=this.y,R=this.z,P=this.w,w=Math.sin(x),A=Math.cos(x);return this.set(C*A-R*w,M*A+P*w,R*A+C*w,P*A-M*w)},rotateZ:function(x){x*=.5;var C=this.x,M=this.y,R=this.z,P=this.w,w=Math.sin(x),A=Math.cos(x);return this.set(C*A+M*w,M*A-C*w,R*A+P*w,P*A-R*w)},calculateW:function(){var x=this.x,C=this.y,M=this.z;return this.w=-Math.sqrt(1-x*x-C*C-M*M),this},setFromEuler:function(x,C){var M=x.x/2,R=x.y/2,P=x.z/2,w=Math.cos(M),A=Math.cos(R),G=Math.cos(P),O=Math.sin(M),L=Math.sin(R),I=Math.sin(P);switch(x.order){case"XYZ":{this.set(O*A*G+w*L*I,w*L*G-O*A*I,w*A*I+O*L*G,w*A*G-O*L*I,C);break}case"YXZ":{this.set(O*A*G+w*L*I,w*L*G-O*A*I,w*A*I-O*L*G,w*A*G+O*L*I,C);break}case"ZXY":{this.set(O*A*G-w*L*I,w*L*G+O*A*I,w*A*I+O*L*G,w*A*G-O*L*I,C);break}case"ZYX":{this.set(O*A*G-w*L*I,w*L*G+O*A*I,w*A*I-O*L*G,w*A*G+O*L*I,C);break}case"YZX":{this.set(O*A*G+w*L*I,w*L*G+O*A*I,w*A*I-O*L*G,w*A*G-O*L*I,C);break}case"XZY":{this.set(O*A*G-w*L*I,w*L*G-O*A*I,w*A*I+O*L*G,w*A*G+O*L*I,C);break}}return this},setFromRotationMatrix:function(x){var C=x.val,M=C[0],R=C[4],P=C[8],w=C[1],A=C[5],G=C[9],O=C[2],L=C[6],I=C[10],F=M+A+I,D;return F>0?(D=.5/Math.sqrt(F+1),this.set((L-G)*D,(P-O)*D,(w-R)*D,.25/D)):M>A&&M>I?(D=2*Math.sqrt(1+M-A-I),this.set(.25*D,(R+w)/D,(P+O)/D,(L-G)/D)):A>I?(D=2*Math.sqrt(1+A-M-I),this.set((R+w)/D,.25*D,(G+L)/D,(P-O)/D)):(D=2*Math.sqrt(1+I-M-A),this.set((P+O)/D,(G+L)/D,.25*D,(w-R)/D)),this},fromMat3:function(x){var C=x.val,M=C[0]+C[4]+C[8],R;if(M>0)R=Math.sqrt(M+1),this.w=.5*R,R=.5/R,this._x=(C[7]-C[5])*R,this._y=(C[2]-C[6])*R,this._z=(C[3]-C[1])*R;else{var P=0;C[4]>C[0]&&(P=1),C[8]>C[P*3+P]&&(P=2);var w=r[P],A=r[w];R=Math.sqrt(C[P*3+P]-C[w*3+w]-C[A*3+A]+1),a[P]=.5*R,R=.5/R,a[w]=(C[w*3+P]+C[P*3+w])*R,a[A]=(C[A*3+P]+C[P*3+A])*R,this._x=a[0],this._y=a[1],this._z=a[2],this._w=(C[A*3+w]-C[w*3+A])*R}return this.onChangeCallback(this),this}});h.exports=g},23701:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),y=function(c){return c*d.RAD_TO_DEG};h.exports=y},16906:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d===void 0&&(d=1);var y=Math.random()*2*Math.PI;return e.x=Math.cos(y)*d,e.y=Math.sin(y)*d,e};h.exports=S},52417:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d===void 0&&(d=1);var y=Math.random()*2*Math.PI,c=Math.random()*2-1,u=Math.sqrt(1-c*c)*d;return e.x=Math.cos(y)*u,e.y=Math.sin(y)*u,e.z=c*d,e};h.exports=S},17915:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d===void 0&&(d=1),e.x=(Math.random()*2-1)*d,e.y=(Math.random()*2-1)*d,e.z=(Math.random()*2-1)*d,e.w=(Math.random()*2-1)*d,e};h.exports=S},52257:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.x,c=e.y;return e.x=y*Math.cos(d)-c*Math.sin(d),e.y=y*Math.sin(d)+c*Math.cos(d),e};h.exports=S},2386:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=Math.cos(c),l=Math.sin(c),r=e.x-d,a=e.y-y;return e.x=r*u-a*l+d,e.y=r*l+a*u+y,e};h.exports=S},72395:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u){var l=c+Math.atan2(e.y-y,e.x-d);return e.x=d+u*Math.cos(l),e.y=y+u*Math.sin(l),e};h.exports=S},41061:h=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u){return e.x=d+u*Math.cos(c),e.y=y+u*Math.sin(c),e};h.exports=S},93709:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70015),y=e(16650),c=e(75003),u=new y,l=new c,r=new d,a=function(v,o,p){return l.setAxisAngle(o,p),u.fromRotationTranslation(l,r.set(0,0,0)),v.transformMat4(u)};h.exports=a},67233:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e>0?Math.ceil(e):Math.floor(e)};h.exports=S},64333:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){d===void 0&&(d=0),y===void 0&&(y=10);var c=Math.pow(y,-d);return Math.round(e*c)/c};h.exports=S},59533:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){d===void 0&&(d=1),y===void 0&&(y=1),c===void 0&&(c=1),c*=Math.PI/e;for(var u=[],l=[],r=0;r<e;r++)y-=d*c,d+=y*c,u[r]=y,l[r]=d;return{sin:l,cos:u,length:e}};h.exports=S},5514:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e<=d?0:e>=y?1:(e=(e-d)/(y-d),e*e*(3-2*e))};h.exports=S},87736:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e=Math.max(0,Math.min(1,(e-d)/(y-d))),e*e*e*(e*(e*6-15)+10)};h.exports=S},55805:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r){r===void 0&&(r=new d);var a=0,v=0,o=u*l;return c>0&&c<=o&&(c>u-1?(v=Math.floor(c/u),a=c-v*u):a=c),r.set(a,v)};h.exports=y},64462:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r,a,v,o,p){p===void 0&&(p=new d);var m=Math.sin(a),g=Math.cos(a),x=g*v,C=m*v,M=-m*o,R=g*o,P=1/(x*R+M*-C);return p.x=R*P*c+-M*P*u+(r*M-l*R)*P,p.y=x*P*u+-C*P*c+(-r*x+l*C)*P,p};h.exports=y},93736:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(88456),c=new d({initialize:function(l,r){this.x=0,this.y=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0):(r===void 0&&(r=l),this.x=l||0,this.y=r||0)},clone:function(){return new c(this.x,this.y)},copy:function(u){return this.x=u.x||0,this.y=u.y||0,this},setFromObject:function(u){return this.x=u.x||0,this.y=u.y||0,this},set:function(u,l){return l===void 0&&(l=u),this.x=u,this.y=l,this},setTo:function(u,l){return this.set(u,l)},setToPolar:function(u,l){return l==null&&(l=1),this.x=Math.cos(u)*l,this.y=Math.sin(u)*l,this},equals:function(u){return this.x===u.x&&this.y===u.y},fuzzyEquals:function(u,l){return y(this.x,u.x,l)&&y(this.y,u.y,l)},angle:function(){var u=Math.atan2(this.y,this.x);return u<0&&(u+=2*Math.PI),u},setAngle:function(u){return this.setToPolar(u,this.length())},add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u):(this.x=0,this.y=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(u){var l=u.x-this.x,r=u.y-this.y;return Math.sqrt(l*l+r*r)},distanceSq:function(u){var l=u.x-this.x,r=u.y-this.y;return l*l+r*r},length:function(){var u=this.x,l=this.y;return Math.sqrt(u*u+l*l)},setLength:function(u){return this.normalize().scale(u)},lengthSq:function(){var u=this.x,l=this.y;return u*u+l*l},normalize:function(){var u=this.x,l=this.y,r=u*u+l*l;return r>0&&(r=1/Math.sqrt(r),this.x=u*r,this.y=l*r),this},normalizeRightHand:function(){var u=this.x;return this.x=this.y*-1,this.y=u,this},normalizeLeftHand:function(){var u=this.x;return this.x=this.y,this.y=u*-1,this},dot:function(u){return this.x*u.x+this.y*u.y},cross:function(u){return this.x*u.y-this.y*u.x},lerp:function(u,l){l===void 0&&(l=0);var r=this.x,a=this.y;return this.x=r+l*(u.x-r),this.y=a+l*(u.y-a),this},transformMat3:function(u){var l=this.x,r=this.y,a=u.val;return this.x=a[0]*l+a[3]*r+a[6],this.y=a[1]*l+a[4]*r+a[7],this},transformMat4:function(u){var l=this.x,r=this.y,a=u.val;return this.x=a[0]*l+a[4]*r+a[12],this.y=a[1]*l+a[5]*r+a[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(u){var l=this.length();return l&&l>u&&this.scale(u/l),this},reflect:function(u){return u=u.clone().normalize(),this.subtract(u.scale(2*this.dot(u)))},mirror:function(u){return this.reflect(u).negate()},rotate:function(u){var l=Math.cos(u),r=Math.sin(u);return this.set(l*this.x-r*this.y,r*this.x+l*this.y)},project:function(u){var l=this.dot(u)/u.dot(u);return this.copy(u).scale(l)}});c.ZERO=new c,c.RIGHT=new c(1,0),c.LEFT=new c(-1,0),c.UP=new c(0,-1),c.DOWN=new c(0,1),c.ONE=new c(1,1),h.exports=c},70015:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l,r){this.x=0,this.y=0,this.z=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=l||0,this.z=r||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this.z=Math.min(this.z,c.z),this},max:function(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this.z=Math.max(this.z,c.z),this},clone:function(){return new y(this.x,this.y,this.z)},addVectors:function(c,u){return this.x=c.x+u.x,this.y=c.y+u.y,this.z=c.z+u.z,this},crossVectors:function(c,u){var l=c.x,r=c.y,a=c.z,v=u.x,o=u.y,p=u.z;return this.x=r*p-a*o,this.y=a*v-l*p,this.z=l*o-r*v,this},equals:function(c){return this.x===c.x&&this.y===c.y&&this.z===c.z},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z||0,this},set:function(c,u,l){return typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0):(this.x=c||0,this.y=u||0,this.z=l||0),this},setFromMatrixPosition:function(c){return this.fromArray(c.val,12)},setFromMatrixColumn:function(c,u){return this.fromArray(c.val,u*4)},fromArray:function(c,u){return u===void 0&&(u=0),this.x=c[u],this.y=c[u+1],this.z=c[u+2],this},add:function(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z||0,this},addScalar:function(c){return this.x+=c,this.y+=c,this.z+=c,this},addScale:function(c,u){return this.x+=c.x*u,this.y+=c.y*u,this.z+=c.z*u||0,this},subtract:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z||0,this},multiply:function(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z||1,this},scale:function(c){return isFinite(c)?(this.x*=c,this.y*=c,this.z*=c):(this.x=0,this.y=0,this.z=0),this},divide:function(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(c){var u=c.x-this.x,l=c.y-this.y,r=c.z-this.z||0;return Math.sqrt(u*u+l*l+r*r)},distanceSq:function(c){var u=c.x-this.x,l=c.y-this.y,r=c.z-this.z||0;return u*u+l*l+r*r},length:function(){var c=this.x,u=this.y,l=this.z;return Math.sqrt(c*c+u*u+l*l)},lengthSq:function(){var c=this.x,u=this.y,l=this.z;return c*c+u*u+l*l},normalize:function(){var c=this.x,u=this.y,l=this.z,r=c*c+u*u+l*l;return r>0&&(r=1/Math.sqrt(r),this.x=c*r,this.y=u*r,this.z=l*r),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z},cross:function(c){var u=this.x,l=this.y,r=this.z,a=c.x,v=c.y,o=c.z;return this.x=l*o-r*v,this.y=r*a-u*o,this.z=u*v-l*a,this},lerp:function(c,u){u===void 0&&(u=0);var l=this.x,r=this.y,a=this.z;return this.x=l+u*(c.x-l),this.y=r+u*(c.y-r),this.z=a+u*(c.z-a),this},applyMatrix3:function(c){var u=this.x,l=this.y,r=this.z,a=c.val;return this.x=a[0]*u+a[3]*l+a[6]*r,this.y=a[1]*u+a[4]*l+a[7]*r,this.z=a[2]*u+a[5]*l+a[8]*r,this},applyMatrix4:function(c){var u=this.x,l=this.y,r=this.z,a=c.val,v=1/(a[3]*u+a[7]*l+a[11]*r+a[15]);return this.x=(a[0]*u+a[4]*l+a[8]*r+a[12])*v,this.y=(a[1]*u+a[5]*l+a[9]*r+a[13])*v,this.z=(a[2]*u+a[6]*l+a[10]*r+a[14])*v,this},transformMat3:function(c){var u=this.x,l=this.y,r=this.z,a=c.val;return this.x=u*a[0]+l*a[3]+r*a[6],this.y=u*a[1]+l*a[4]+r*a[7],this.z=u*a[2]+l*a[5]+r*a[8],this},transformMat4:function(c){var u=this.x,l=this.y,r=this.z,a=c.val;return this.x=a[0]*u+a[4]*l+a[8]*r+a[12],this.y=a[1]*u+a[5]*l+a[9]*r+a[13],this.z=a[2]*u+a[6]*l+a[10]*r+a[14],this},transformCoordinates:function(c){var u=this.x,l=this.y,r=this.z,a=c.val,v=u*a[0]+l*a[4]+r*a[8]+a[12],o=u*a[1]+l*a[5]+r*a[9]+a[13],p=u*a[2]+l*a[6]+r*a[10]+a[14],m=u*a[3]+l*a[7]+r*a[11]+a[15];return this.x=v/m,this.y=o/m,this.z=p/m,this},transformQuat:function(c){var u=this.x,l=this.y,r=this.z,a=c.x,v=c.y,o=c.z,p=c.w,m=p*u+v*r-o*l,g=p*l+o*u-a*r,x=p*r+a*l-v*u,C=-a*u-v*l-o*r;return this.x=m*p+C*-a+g*-o-x*-v,this.y=g*p+C*-v+x*-a-m*-o,this.z=x*p+C*-o+m*-v-g*-a,this},project:function(c){var u=this.x,l=this.y,r=this.z,a=c.val,v=a[0],o=a[1],p=a[2],m=a[3],g=a[4],x=a[5],C=a[6],M=a[7],R=a[8],P=a[9],w=a[10],A=a[11],G=a[12],O=a[13],L=a[14],I=a[15],F=1/(u*m+l*M+r*A+I);return this.x=(u*v+l*g+r*R+G)*F,this.y=(u*o+l*x+r*P+O)*F,this.z=(u*p+l*C+r*w+L)*F,this},projectViewMatrix:function(c,u){return this.applyMatrix4(c).applyMatrix4(u)},unprojectViewMatrix:function(c,u){return this.applyMatrix4(c).applyMatrix4(u)},unproject:function(c,u){var l=c.x,r=c.y,a=c.z,v=c.w,o=this.x-l,p=v-this.y-1-r,m=this.z;return this.x=2*o/a-1,this.y=2*p/v-1,this.z=2*m-1,this.project(u)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});y.ZERO=new y,y.RIGHT=new y(1,0,0),y.LEFT=new y(-1,0,0),y.UP=new y(0,-1,0),y.DOWN=new y(0,1,0),y.FORWARD=new y(0,0,1),y.BACK=new y(0,0,-1),y.ONE=new y(1,1,1),h.exports=y},51729:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l,r,a){this.x=0,this.y=0,this.z=0,this.w=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=l||0,this.z=r||0,this.w=a||0)},clone:function(){return new y(this.x,this.y,this.z,this.w)},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z||0,this.w=c.w||0,this},equals:function(c){return this.x===c.x&&this.y===c.y&&this.z===c.z&&this.w===c.w},set:function(c,u,l,r){return typeof c=="object"?(this.x=c.x||0,this.y=c.y||0,this.z=c.z||0,this.w=c.w||0):(this.x=c||0,this.y=u||0,this.z=l||0,this.w=r||0),this},add:function(c){return this.x+=c.x,this.y+=c.y,this.z+=c.z||0,this.w+=c.w||0,this},subtract:function(c){return this.x-=c.x,this.y-=c.y,this.z-=c.z||0,this.w-=c.w||0,this},scale:function(c){return this.x*=c,this.y*=c,this.z*=c,this.w*=c,this},length:function(){var c=this.x,u=this.y,l=this.z,r=this.w;return Math.sqrt(c*c+u*u+l*l+r*r)},lengthSq:function(){var c=this.x,u=this.y,l=this.z,r=this.w;return c*c+u*u+l*l+r*r},normalize:function(){var c=this.x,u=this.y,l=this.z,r=this.w,a=c*c+u*u+l*l+r*r;return a>0&&(a=1/Math.sqrt(a),this.x=c*a,this.y=u*a,this.z=l*a,this.w=r*a),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w},lerp:function(c,u){u===void 0&&(u=0);var l=this.x,r=this.y,a=this.z,v=this.w;return this.x=l+u*(c.x-l),this.y=r+u*(c.y-r),this.z=a+u*(c.z-a),this.w=v+u*(c.w-v),this},multiply:function(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z||1,this.w*=c.w||1,this},divide:function(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z||1,this.w/=c.w||1,this},distance:function(c){var u=c.x-this.x,l=c.y-this.y,r=c.z-this.z||0,a=c.w-this.w||0;return Math.sqrt(u*u+l*l+r*r+a*a)},distanceSq:function(c){var u=c.x-this.x,l=c.y-this.y,r=c.z-this.z||0,a=c.w-this.w||0;return u*u+l*l+r*r+a*a},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(c){var u=this.x,l=this.y,r=this.z,a=this.w,v=c.val;return this.x=v[0]*u+v[4]*l+v[8]*r+v[12]*a,this.y=v[1]*u+v[5]*l+v[9]*r+v[13]*a,this.z=v[2]*u+v[6]*l+v[10]*r+v[14]*a,this.w=v[3]*u+v[7]*l+v[11]*r+v[15]*a,this},transformQuat:function(c){var u=this.x,l=this.y,r=this.z,a=c.x,v=c.y,o=c.z,p=c.w,m=p*u+v*r-o*l,g=p*l+o*u-a*r,x=p*r+a*l-v*u,C=-a*u-v*l-o*r;return this.x=m*p+C*-a+g*-o-x*-v,this.y=g*p+C*-v+x*-a-m*-o,this.z=x*p+C*-o+m*-v-g*-a,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});y.prototype.sub=y.prototype.subtract,y.prototype.mul=y.prototype.multiply,y.prototype.div=y.prototype.divide,y.prototype.dist=y.prototype.distance,y.prototype.distSq=y.prototype.distanceSq,y.prototype.len=y.prototype.length,y.prototype.lenSq=y.prototype.lengthSq,h.exports=y},9557:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return Math.abs(e-d)<=y};h.exports=S},1071:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(e>=d&&e<=y)return e;var c=y-d;return d+((e-d)%c+c)%c};h.exports=S},90447:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){return Math.atan2(c-d,y-e)};h.exports=S},94240:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return Math.atan2(d.y-e.y,d.x-e.x)};h.exports=S},84066:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return Math.atan2(d.x-e.x,d.y-e.y)};h.exports=S},9678:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){return Math.atan2(y-e,c-d)};h.exports=S},76861:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),y=function(c){return c>Math.PI&&(c-=d.PI2),Math.abs(((c+d.TAU)%d.PI2-d.PI2)%d.PI2)};h.exports=y},37570:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};h.exports=S},87597:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61616),y=function(){return d(-Math.PI,Math.PI)};h.exports=y},74493:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61616),y=function(){return d(-180,180)};h.exports=y},19049:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(37570),y=function(c){return d(c+Math.PI)};h.exports=y},90612:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),y=function(c,u,l){return l===void 0&&(l=.05),c===u||(Math.abs(u-c)<=l||Math.abs(u-c)>=d.PI2-l?c=u:(Math.abs(u-c)>Math.PI&&(u<c?u+=d.PI2:u-=d.PI2),u>c?c+=l:u<c&&(c-=l))),c};h.exports=y},93954:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=d-e;if(y===0)return 0;var c=Math.floor((y- -180)/360);return y-c*360};h.exports=S},35786:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1071),y=function(c){return d(c,-Math.PI,Math.PI)};h.exports=y},62138:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1071),y=function(c){return d(c,-180,180)};h.exports=y},22153:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Between:e(90447),BetweenPoints:e(94240),BetweenPointsY:e(84066),BetweenY:e(9678),CounterClockwise:e(76861),Normalize:e(37570),Random:e(87597),RandomDegrees:e(74493),Reverse:e(19049),RotateTo:e(90612),ShortestBetween:e(93954),Wrap:e(35786),WrapDegrees:e(62138)}},83392:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};h.exports=S},53996:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=e-y,l=d-c;return Math.sqrt(u*u+l*l)};h.exports=S},92951:h=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.x-d.x,c=e.y-d.y;return Math.sqrt(y*y+c*c)};h.exports=S},12161:h=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.x-d.x,c=e.y-d.y;return y*y+c*c};h.exports=S},38057:h=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){return Math.max(Math.abs(e-y),Math.abs(d-c))};h.exports=S},33297:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u){return u===void 0&&(u=2),Math.sqrt(Math.pow(y-e,u)+Math.pow(c-d,u))};h.exports=S},90366:h=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){return Math.abs(e-y)+Math.abs(d-c)};h.exports=S},35032:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=e-y,l=d-c;return u*u+l*l};h.exports=S},10130:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Between:e(53996),BetweenPoints:e(92951),BetweenPointsSquared:e(12161),Chebyshev:e(38057),Power:e(33297),Snake:e(90366),Squared:e(35032)}},35060:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25265),y=e(57428),c=e(73214),u=e(71778),l=e(36468),r=e(88258),a=e(52910),v=e(67799),o=e(74083),p=e(92284),m=e(28035),g=e(8754);h.exports={Power0:a,Power1:v.Out,Power2:u.Out,Power3:o.Out,Power4:p.Out,Linear:a,Quad:v.Out,Cubic:u.Out,Quart:o.Out,Quint:p.Out,Sine:m.Out,Expo:r.Out,Circ:c.Out,Elastic:l.Out,Back:d.Out,Bounce:y.Out,Stepped:g,"Quad.easeIn":v.In,"Cubic.easeIn":u.In,"Quart.easeIn":o.In,"Quint.easeIn":p.In,"Sine.easeIn":m.In,"Expo.easeIn":r.In,"Circ.easeIn":c.In,"Elastic.easeIn":l.In,"Back.easeIn":d.In,"Bounce.easeIn":y.In,"Quad.easeOut":v.Out,"Cubic.easeOut":u.Out,"Quart.easeOut":o.Out,"Quint.easeOut":p.Out,"Sine.easeOut":m.Out,"Expo.easeOut":r.Out,"Circ.easeOut":c.Out,"Elastic.easeOut":l.Out,"Back.easeOut":d.Out,"Bounce.easeOut":y.Out,"Quad.easeInOut":v.InOut,"Cubic.easeInOut":u.InOut,"Quart.easeInOut":o.InOut,"Quint.easeInOut":p.InOut,"Sine.easeInOut":m.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":c.InOut,"Elastic.easeInOut":l.InOut,"Back.easeInOut":d.InOut,"Bounce.easeInOut":y.InOut}},25860:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d===void 0&&(d=1.70158),e*e*((d+1)*e-d)};h.exports=S},45264:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d===void 0&&(d=1.70158);var y=d*1.525;return(e*=2)<1?.5*(e*e*((y+1)*e-y)):.5*((e-=2)*e*((y+1)*e+y)+2)};h.exports=S},36699:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d===void 0&&(d=1.70158),--e*e*((d+1)*e+d)+1};h.exports=S},25265:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(25860),Out:e(36699),InOut:e(45264)}},62191:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};h.exports=S},24799:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d=!1;return e<.5?(e=1-e*2,d=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,d?(1-e)*.5:e*.5+.5};h.exports=S},60819:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};h.exports=S},57428:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(62191),Out:e(60819),InOut:e(24799)}},86855:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return 1-Math.sqrt(1-e*e)};h.exports=S},7280:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};h.exports=S},18058:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return Math.sqrt(1- --e*e)};h.exports=S},73214:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(86855),Out:e(18058),InOut:e(7280)}},91532:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e*e*e};h.exports=S},63180:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};h.exports=S},16518:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return--e*e*e+1};h.exports=S},71778:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(91532),Out:e(16518),InOut:e(63180)}},24729:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(d===void 0&&(d=.1),y===void 0&&(y=.1),e===0)return 0;if(e===1)return 1;var c=y/4;return d<1?d=1:c=y*Math.asin(1/d)/(2*Math.PI),-(d*Math.pow(2,10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/y))};h.exports=S},50325:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(d===void 0&&(d=.1),y===void 0&&(y=.1),e===0)return 0;if(e===1)return 1;var c=y/4;return d<1?d=1:c=y*Math.asin(1/d)/(2*Math.PI),(e*=2)<1?-.5*(d*Math.pow(2,10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/y)):d*Math.pow(2,-10*(e-=1))*Math.sin((e-c)*(2*Math.PI)/y)*.5+1};h.exports=S},84074:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(d===void 0&&(d=.1),y===void 0&&(y=.1),e===0)return 0;if(e===1)return 1;var c=y/4;return d<1?d=1:c=y*Math.asin(1/d)/(2*Math.PI),d*Math.pow(2,-10*e)*Math.sin((e-c)*(2*Math.PI)/y)+1};h.exports=S},36468:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(24729),Out:e(84074),InOut:e(50325)}},95638:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return Math.pow(2,10*(e-1))-.001};h.exports=S},10357:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};h.exports=S},14894:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return 1-Math.pow(2,-10*e)};h.exports=S},88258:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(95638),Out:e(14894),InOut:e(10357)}},33063:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Back:e(25265),Bounce:e(57428),Circular:e(73214),Cubic:e(71778),Elastic:e(36468),Expo:e(88258),Linear:e(52910),Quadratic:e(67799),Quartic:e(74083),Quintic:e(92284),Sine:e(28035),Stepped:e(8754)}},43927:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e};h.exports=S},52910:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=e(43927)},77471:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e*e};h.exports=S},83863:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};h.exports=S},44383:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e*(2-e)};h.exports=S},67799:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(77471),Out:e(44383),InOut:e(83863)}},48311:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e*e*e*e};h.exports=S},55248:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};h.exports=S},23135:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return 1- --e*e*e*e};h.exports=S},74083:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(48311),Out:e(23135),InOut:e(55248)}},7313:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e*e*e*e*e};h.exports=S},98759:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};h.exports=S},26670:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return--e*e*e*e*e+1};h.exports=S},92284:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(7313),Out:e(26670),InOut:e(98759)}},52929:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};h.exports=S},66333:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};h.exports=S},37255:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};h.exports=S},28035:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={In:e(52929),Out:e(37255),InOut:e(66333)}},52770:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d===void 0&&(d=1),e<=0?0:e>=1?1:((d*e|0)+1)*(1/d)};h.exports=S},8754:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=e(52770)},17247:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d===void 0&&(d=1e-4),Math.ceil(e-d)};h.exports=S},88456:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return y===void 0&&(y=1e-4),Math.abs(e-d)<y};h.exports=S},61824:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d===void 0&&(d=1e-4),Math.floor(e+d)};h.exports=S},41935:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return y===void 0&&(y=1e-4),e>d-y};h.exports=S},54726:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return y===void 0&&(y=1e-4),e<d+y};h.exports=S},52778:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Ceil:e(17247),Equal:e(88456),Floor:e(61824),GreaterThan:e(41935),LessThan:e(54726)}},5923:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),y=e(98611),c={Angle:e(22153),Distance:e(10130),Easing:e(33063),Fuzzy:e(52778),Interpolation:e(48528),Pow2:e(73773),Snap:e(23679),RandomDataGenerator:e(81429),Average:e(26042),Bernstein:e(22824),Between:e(17489),CatmullRom:e(14976),CeilTo:e(89129),Clamp:e(82897),DegToRad:e(75606),Difference:e(767),Euler:e(9849),Factorial:e(8034),FloatBetween:e(61616),FloorTo:e(60679),FromPercent:e(91806),GetSpeed:e(79366),IsEven:e(43776),IsEvenStrict:e(58442),Linear:e(42798),LinearXY:e(61072),MaxAdd:e(69635),Median:e(37394),MinSub:e(17259),Percent:e(61820),RadToDeg:e(23701),RandomXY:e(16906),RandomXYZ:e(52417),RandomXYZW:e(17915),Rotate:e(52257),RotateAround:e(2386),RotateAroundDistance:e(72395),RotateTo:e(41061),RoundAwayFromZero:e(67233),RoundTo:e(64333),SinCosTableGenerator:e(59533),SmootherStep:e(87736),SmoothStep:e(5514),ToXY:e(55805),TransformXY:e(64462),Within:e(9557),Wrap:e(1071),Vector2:e(93736),Vector3:e(70015),Vector4:e(51729),Matrix3:e(5341),Matrix4:e(16650),Quaternion:e(75003),RotateVec3:e(93709)};c=y(!1,c,d),h.exports=c},63210:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22824),y=function(c,u){for(var l=0,r=c.length-1,a=0;a<=r;a++)l+=Math.pow(1-u,r-a)*Math.pow(u,a)*c[a]*d(r,a);return l};h.exports=y},88332:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14976),y=function(c,u){var l=c.length-1,r=l*u,a=Math.floor(r);return c[0]===c[l]?(u<0&&(a=Math.floor(r=l*(1+u))),d(r-a,c[(a-1+l)%l],c[a],c[(a+1)%l],c[(a+2)%l])):u<0?c[0]-(d(-r,c[0],c[0],c[1],c[1])-c[0]):u>1?c[l]-(d(r-l,c[l],c[l],c[l-1],c[l-1])-c[l]):d(r-a,c[a?a-1:0],c[a],c[l<a+1?l:a+1],c[l<a+2?l:a+2])};h.exports=y},34631:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(u,l){var r=1-u;return r*r*r*l}function e(u,l){var r=1-u;return 3*r*r*u*l}function d(u,l){return 3*(1-u)*u*u*l}function y(u,l){return u*u*u*l}var c=function(u,l,r,a,v){return S(u,l)+e(u,r)+d(u,a)+y(u,v)};h.exports=c},47614:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(42798),y=function(c,u){var l=c.length-1,r=l*u,a=Math.floor(r);return u<0?d(c[0],c[1],r):u>1?d(c[l],c[l-1],l-r):d(c[a],c[a+1>l?l:a+1],r-a)};h.exports=y},16252:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(c,u){var l=1-c;return l*l*u}function e(c,u){return 2*(1-c)*c*u}function d(c,u){return c*c*u}var y=function(c,u,l,r){return S(c,u)+e(c,l)+d(c,r)};h.exports=y},44521:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(5514),y=function(c,u,l){return u+(l-u)*d(c,0,1)};h.exports=y},45507:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(87736),y=function(c,u,l){return u+(l-u)*d(c,0,1)};h.exports=y},48528:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Bezier:e(63210),CatmullRom:e(88332),CubicBezier:e(34631),Linear:e(47614),QuadraticBezier:e(16252),SmoothStep:e(44521),SmootherStep:e(45507)}},3504:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d=Math.log(e)/.6931471805599453;return 1<<Math.ceil(d)};h.exports=S},28621:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e>0&&(e&e-1)===0&&d>0&&(d&d-1)===0};h.exports=S},2018:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e>0&&(e&e-1)===0};h.exports=S},73773:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={GetNext:e(3504),IsSize:e(28621),IsValue:e(2018)}},81429:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u){u===void 0&&(u=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],u&&this.init(u)},rnd:function(){var c=2091639*this.s0+this.c*23283064365386963e-26;return this.c=c|0,this.s0=this.s1,this.s1=this.s2,this.s2=c-this.c,this.s2},hash:function(c){var u,l=this.n;c=c.toString();for(var r=0;r<c.length;r++)l+=c.charCodeAt(r),u=.02519603282416938*l,l=u>>>0,u-=l,u*=l,l=u>>>0,u-=l,l+=u*4294967296;return this.n=l,(l>>>0)*23283064365386963e-26},init:function(c){typeof c=="string"?this.state(c):this.sow(c)},sow:function(c){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!c)for(var u=0;u<c.length&&c[u]!=null;u++){var l=c[u];this.s0-=this.hash(l),this.s0+=~~(this.s0<0),this.s1-=this.hash(l),this.s1+=~~(this.s1<0),this.s2-=this.hash(l),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(c,u){return Math.floor(this.realInRange(0,u-c+1)+c)},between:function(c,u){return Math.floor(this.realInRange(0,u-c+1)+c)},realInRange:function(c,u){return this.frac()*(u-c)+c},normal:function(){return 1-2*this.frac()},uuid:function(){var c="",u="";for(u=c="";c++<36;u+=~c%5|c*3&4?(c^15?8^this.frac()*(c^20?16:4):4).toString(16):"-");return u},pick:function(c){return c[this.integerInRange(0,c.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(c){return c[~~(Math.pow(this.frac(),2)*(c.length-1)+.5)]},timestamp:function(c,u){return this.realInRange(c||9466848e5,u||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(c){return typeof c=="string"&&c.match(/^!rnd/)&&(c=c.split(","),this.c=parseFloat(c[1]),this.s0=parseFloat(c[2]),this.s1=parseFloat(c[3]),this.s2=parseFloat(c[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(c){for(var u=c.length-1,l=u;l>0;l--){var r=Math.floor(this.frac()*(l+1)),a=c[r];c[r]=c[l],c[l]=a}return c}});h.exports=y},82127:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){return y===void 0&&(y=0),d===0?e:(e-=y,e=d*Math.ceil(e/d),c?(y+e)/d:y+e)};h.exports=S},84314:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){return y===void 0&&(y=0),d===0?e:(e-=y,e=d*Math.floor(e/d),c?(y+e)/d:y+e)};h.exports=S},88462:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){return y===void 0&&(y=0),d===0?e:(e-=y,e=d*Math.round(e/d),c?(y+e)/d:y+e)};h.exports=S},23679:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Ceil:e(82127),Floor:e(84314),To:e(88462)}},92491:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e(75205);var d=e(86459),y=e(98611),c={Actions:e(83979),Animations:e(13517),BlendModes:e(95723),Cache:e(45820),Cameras:e(44143),Core:e(80293),Class:e(56694),Create:e(84106),Curves:e(73962),Data:e(1999),Display:e(24816),DOM:e(3590),Events:e(95146),FX:e(96910),Game:e(15213),GameObjects:e(48013),Geom:e(84068),Input:e(20873),Loader:e(95695),Math:e(5923),Physics:e(53954),Plugins:e(45615),Renderer:e(42069),Scale:e(86754),ScaleModes:e(27394),Scene:e(87157),Scenes:e(20436),Structs:e(20010),Textures:e(87499),Tilemaps:e(52678),Time:e(97121),Tweens:e(75193),Utils:e(22178)};c.Sound=e(56751),c=y(!1,c,d),h.exports=c,e.g.Phaser=c},62832:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(7864),c=e(1539),u=new d({Extends:c,Mixins:[y.Acceleration,y.Angular,y.Bounce,y.Debug,y.Drag,y.Enable,y.Friction,y.Gravity,y.Immovable,y.Mass,y.Pushable,y.Size,y.Velocity],initialize:function(r,a,v,o,p){c.call(this,r,a,v,o,p),this.body=null}});h.exports=u},66150:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(75606),c=e(53996),u=e(35032),l=e(99523),r=e(72632),a=e(30657),v=e(2732),o=e(15147),p=e(91963),m=e(7599),g=e(93736),x=e(85233),C=new d({initialize:function(R){this.scene=R,this.systems=R.sys,this.config=this.getConfig(),this.world,this.add,R.sys.events.once(m.BOOT,this.boot,this),R.sys.events.on(m.START,this.start,this)},boot:function(){this.world=new x(this.scene,this.config),this.add=new l(this.world),this.systems.events.once(m.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new x(this.scene,this.config),this.add=new l(this.world));var M=this.systems.events;r(this.config,"customUpdate",!1)||M.on(m.UPDATE,this.world.update,this.world),M.on(m.POST_UPDATE,this.world.postUpdate,this.world),M.once(m.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(m.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(m.UPDATE,this.world.update,this.world)},getConfig:function(){var M=this.systems.game.config.physics,R=this.systems.settings.physics,P=a(r(R,"arcade",{}),r(M,"arcade",{}));return P},overlap:function(M,R,P,w,A){return P===void 0&&(P=null),w===void 0&&(w=null),A===void 0&&(A=P),this.world.collideObjects(M,R,P,w,A,!0)},collide:function(M,R,P,w,A){return P===void 0&&(P=null),w===void 0&&(w=null),A===void 0&&(A=P),this.world.collideObjects(M,R,P,w,A,!1)},collideTiles:function(M,R,P,w,A){return this.world.collideTiles(M,R,P,w,A)},overlapTiles:function(M,R,P,w,A){return this.world.overlapTiles(M,R,P,w,A)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(M,R,P,w,A,G){w===void 0&&(w=60);var O=Math.atan2(P-M.y,R-M.x);return M.body.acceleration.setToPolar(O,w),A!==void 0&&G!==void 0&&M.body.maxVelocity.set(A,G),O},accelerateToObject:function(M,R,P,w,A){return this.accelerateTo(M,R.x,R.y,P,w,A)},closest:function(M,R){R||(R=this.world.bodies.entries);for(var P=Number.MAX_VALUE,w=null,A=M.x,G=M.y,O=R.length,L=0;L<O;L++){var I=R[L],F=I.body||I;if(!(M===I||M===F||M===F.gameObject||M===F.center)){var D=u(A,G,F.center.x,F.center.y);D<P&&(w=I,P=D)}}return w},furthest:function(M,R){R||(R=this.world.bodies.entries);for(var P=-1,w=null,A=M.x,G=M.y,O=R.length,L=0;L<O;L++){var I=R[L],F=I.body||I;if(!(M===I||M===F||M===F.gameObject||M===F.center)){var D=u(A,G,F.center.x,F.center.y);D>P&&(w=I,P=D)}}return w},moveTo:function(M,R,P,w,A){w===void 0&&(w=60),A===void 0&&(A=0);var G=Math.atan2(P-M.y,R-M.x);return A>0&&(w=c(M.x,M.y,R,P)/(A/1e3)),M.body.velocity.setToPolar(G,w),G},moveToObject:function(M,R,P,w){return this.moveTo(M,R.x,R.y,P,w)},velocityFromAngle:function(M,R,P){return R===void 0&&(R=60),P===void 0&&(P=new g),P.setToPolar(y(M),R)},velocityFromRotation:function(M,R,P){return R===void 0&&(R=60),P===void 0&&(P=new g),P.setToPolar(M,R)},overlapRect:function(M,R,P,w,A,G){return o(this.world,M,R,P,w,A,G)},overlapCirc:function(M,R,P,w,A){return v(this.world,M,R,P,w,A)},shutdown:function(){if(this.world){var M=this.systems.events;M.off(m.UPDATE,this.world.update,this.world),M.off(m.POST_UPDATE,this.world.postUpdate,this.world),M.off(m.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(m.START,this.start,this),this.scene=null,this.systems=null}});p.register("ArcadePhysics",C,"arcadePhysics"),h.exports=C},25084:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(7864),c=e(13747),u=new d({Extends:c,Mixins:[y.Acceleration,y.Angular,y.Bounce,y.Debug,y.Drag,y.Enable,y.Friction,y.Gravity,y.Immovable,y.Mass,y.Pushable,y.Size,y.Velocity],initialize:function(r,a,v,o,p){c.call(this,r,a,v,o,p),this.body=null}});h.exports=u},97602:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(47401),c=e(27037),u=e(23701),l=e(74118),r=e(94287),a=e(93736),v=new d({initialize:function(p,m){var g=64,x=64,C={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},M=m!==void 0;M&&m.displayWidth&&(g=m.displayWidth,x=m.displayHeight),M||(m=C),this.world=p,this.gameObject=M?m:void 0,this.isBody=!0,this.transform={x:m.x,y:m.y,rotation:m.angle,scaleX:m.scaleX,scaleY:m.scaleY,displayOriginX:m.displayOriginX,displayOriginY:m.displayOriginY},this.debugShowBody=p.defaults.debugShowBody,this.debugShowVelocity=p.defaults.debugShowVelocity,this.debugBodyColor=p.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(m.x-m.scaleX*m.displayOriginX,m.y-m.scaleY*m.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=m.angle,this.preRotation=m.angle,this.width=g,this.height=x,this.sourceWidth=g,this.sourceHeight=x,m.frame&&(this.sourceWidth=m.frame.realWidth,this.sourceHeight=m.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(x/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new a,this.newVelocity=new a,this.deltaMax=new a,this.acceleration=new a,this.allowDrag=!0,this.drag=new a,this.allowGravity=!0,this.gravity=new a,this.bounce=new a,this.worldBounce=null,this.customBoundsRectangle=p.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new a(1e4,1e4),this.maxSpeed=-1,this.friction=new a(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=y.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=y.DYNAMIC_BODY,this._sx=m.scaleX,this._sy=m.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new l},updateBounds:function(){var o=this.gameObject,p=this.transform;if(o.parentContainer){var m=o.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);p.x=m.tx,p.y=m.ty,p.rotation=u(m.rotation),p.scaleX=m.scaleX,p.scaleY=m.scaleY,p.displayOriginX=o.displayOriginX,p.displayOriginY=o.displayOriginY}else p.x=o.x,p.y=o.y,p.rotation=o.angle,p.scaleX=o.scaleX,p.scaleY=o.scaleY,p.displayOriginX=o.displayOriginX,p.displayOriginY=o.displayOriginY;var g=!1;if(this.syncBounds){var x=o.getBounds(this._bounds);this.width=x.width,this.height=x.height,g=!0}else{var C=Math.abs(p.scaleX),M=Math.abs(p.scaleY);(this._sx!==C||this._sy!==M)&&(this.width=this.sourceWidth*C,this.height=this.sourceHeight*M,this._sx=C,this._sy=M,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var o=this.transform;this.position.x=o.x+o.scaleX*(this.offset.x-o.displayOriginX),this.position.y=o.y+o.scaleY*(this.offset.y-o.displayOriginY),this.updateCenter()},resetFlags:function(o){o===void 0&&(o=!1);var p=this.wasTouching,m=this.touching,g=this.blocked;o?(p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1):(p.none=m.none,p.up=m.up,p.down=m.down,p.left=m.left,p.right=m.right),m.none=!0,m.up=!1,m.down=!1,m.left=!1,m.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(o,p){o&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),o&&this.update(p)},update:function(o){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,o);var p=this.velocity.x,m=this.velocity.y;this.newVelocity.set(p*o,m*o),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(m,p),this.speed=Math.sqrt(p*p+m*m),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(c.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var o=this.position.x-this.prevFrame.x,p=this.position.y-this.prevFrame.y,m=this.gameObject;if(this.moves){var g=this.deltaMax.x,x=this.deltaMax.y;g!==0&&o!==0&&(o<0&&o<-g?o=-g:o>0&&o>g&&(o=g)),x!==0&&p!==0&&(p<0&&p<-x?p=-x:p>0&&p>x&&(p=x)),m&&(m.x+=o,m.y+=p)}o<0?this.facing=y.FACING_LEFT:o>0&&(this.facing=y.FACING_RIGHT),p<0?this.facing=y.FACING_UP:p>0&&(this.facing=y.FACING_DOWN),this.allowRotation&&m&&(m.angle+=this.deltaZ()),this._tx=o,this._ty=p},setBoundsRectangle:function(o){return this.customBoundsRectangle=o||this.world.bounds,this},checkWorldBounds:function(){var o=this.position,p=this.customBoundsRectangle,m=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,x=this.worldBounce?-this.worldBounce.y:-this.bounce.y,C=!1;return o.x<p.x&&m.left?(o.x=p.x,this.velocity.x*=g,this.blocked.left=!0,C=!0):this.right>p.right&&m.right&&(o.x=p.right-this.width,this.velocity.x*=g,this.blocked.right=!0,C=!0),o.y<p.y&&m.up?(o.y=p.y,this.velocity.y*=x,this.blocked.up=!0,C=!0):this.bottom>p.bottom&&m.down&&(o.y=p.bottom-this.height,this.velocity.y*=x,this.blocked.down=!0,C=!0),C&&(this.blocked.none=!1,this.updateCenter()),C},setOffset:function(o,p){return p===void 0&&(p=o),this.offset.set(o,p),this},setGameObject:function(o,p){return p===void 0&&(p=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=o,o.body&&(o.body=this),this.setSize(),this.world.add(this),this.enable=p,this},setSize:function(o,p,m){m===void 0&&(m=!0);var g=this.gameObject;if(g&&(!o&&g.frame&&(o=g.frame.realWidth),!p&&g.frame&&(p=g.frame.realHeight)),this.sourceWidth=o,this.sourceHeight=p,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),m&&g&&g.getCenter){var x=(g.width-o)/2,C=(g.height-p)/2;this.offset.set(x,C)}return this.isCircle=!1,this.radius=0,this},setCircle:function(o,p,m){return p===void 0&&(p=this.offset.x),m===void 0&&(m=this.offset.y),o>0?(this.isCircle=!0,this.radius=o,this.sourceWidth=o*2,this.sourceHeight=o*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(p,m),this.updateCenter()):this.isCircle=!1,this},reset:function(o,p){this.stop();var m=this.gameObject;m&&(m.setPosition(o,p),this.rotation=m.angle,this.preRotation=m.angle);var g=this.position;m&&m.getTopLeft?m.getTopLeft(g):g.set(o,p),this.prev.copy(g),this.prevFrame.copy(g),m&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(o){return o.x=this.x,o.y=this.y,o.right=this.right,o.bottom=this.bottom,o},hitTest:function(o,p){if(!this.isCircle)return r(this,o,p);if(this.radius>0&&o>=this.left&&o<=this.right&&p>=this.top&&p<=this.bottom){var m=(this.center.x-o)*(this.center.x-o),g=(this.center.y-p)*(this.center.y-p);return m+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(o){var p=this.position,m=p.x+this.halfWidth,g=p.y+this.halfHeight;this.debugShowBody&&(o.lineStyle(o.defaultStrokeWidth,this.debugBodyColor),this.isCircle?o.strokeCircle(m,g,this.width/2):(this.checkCollision.up&&o.lineBetween(p.x,p.y,p.x+this.width,p.y),this.checkCollision.right&&o.lineBetween(p.x+this.width,p.y,p.x+this.width,p.y+this.height),this.checkCollision.down&&o.lineBetween(p.x,p.y+this.height,p.x+this.width,p.y+this.height),this.checkCollision.left&&o.lineBetween(p.x,p.y,p.x,p.y+this.height))),this.debugShowVelocity&&(o.lineStyle(o.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),o.lineBetween(m,g,m+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(o,p,m,g){o===void 0&&(o=!0),this.collideWorldBounds=o;var x=p!==void 0,C=m!==void 0;return(x||C)&&(this.worldBounce||(this.worldBounce=new a),x&&(this.worldBounce.x=p),C&&(this.worldBounce.y=m)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(o,p){return this.velocity.set(o,p),o=this.velocity.x,p=this.velocity.y,this.speed=Math.sqrt(o*o+p*p),this},setVelocityX:function(o){return this.setVelocity(o,this.velocity.y)},setVelocityY:function(o){return this.setVelocity(this.velocity.x,o)},setMaxVelocity:function(o,p){return this.maxVelocity.set(o,p),this},setMaxVelocityX:function(o){return this.maxVelocity.x=o,this},setMaxVelocityY:function(o){return this.maxVelocity.y=o,this},setMaxSpeed:function(o){return this.maxSpeed=o,this},setBounce:function(o,p){return this.bounce.set(o,p),this},setBounceX:function(o){return this.bounce.x=o,this},setBounceY:function(o){return this.bounce.y=o,this},setAcceleration:function(o,p){return this.acceleration.set(o,p),this},setAccelerationX:function(o){return this.acceleration.x=o,this},setAccelerationY:function(o){return this.acceleration.y=o,this},setAllowDrag:function(o){return o===void 0&&(o=!0),this.allowDrag=o,this},setAllowGravity:function(o){return o===void 0&&(o=!0),this.allowGravity=o,this},setAllowRotation:function(o){return o===void 0&&(o=!0),this.allowRotation=o,this},setDrag:function(o,p){return this.drag.set(o,p),this},setDamping:function(o){return this.useDamping=o,this},setDragX:function(o){return this.drag.x=o,this},setDragY:function(o){return this.drag.y=o,this},setGravity:function(o,p){return this.gravity.set(o,p),this},setGravityX:function(o){return this.gravity.x=o,this},setGravityY:function(o){return this.gravity.y=o,this},setFriction:function(o,p){return this.friction.set(o,p),this},setFrictionX:function(o){return this.friction.x=o,this},setFrictionY:function(o){return this.friction.y=o,this},setAngularVelocity:function(o){return this.angularVelocity=o,this},setAngularAcceleration:function(o){return this.angularAcceleration=o,this},setAngularDrag:function(o){return this.angularDrag=o,this},setMass:function(o){return this.mass=o,this},setImmovable:function(o){return o===void 0&&(o=!0),this.immovable=o,this},setEnable:function(o){return o===void 0&&(o=!0),this.enable=o,this},processX:function(o,p,m,g){this.x+=o,this.updateCenter(),p!==null&&(this.velocity.x=p);var x=this.blocked;m&&(x.left=!0,x.none=!1),g&&(x.right=!0,x.none=!1)},processY:function(o,p,m,g){this.y+=o,this.updateCenter(),p!==null&&(this.velocity.y=p);var x=this.blocked;m&&(x.up=!0,x.none=!1),g&&(x.down=!0,x.none=!1)},x:{get:function(){return this.position.x},set:function(o){this.position.x=o}},y:{get:function(){return this.position.y},set:function(o){this.position.y=o}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});h.exports=v},3909:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l,r,a,v,o,p){this.world=u,this.name="",this.active=!0,this.overlapOnly=l,this.object1=r,this.object2=a,this.collideCallback=v,this.processCallback=o,this.callbackContext=p},setName:function(c){return this.name=c,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});h.exports=y},99523:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(62832),y=e(25084),c=e(97602),u=e(56694),l=e(47401),r=e(10481),a=e(66634),v=e(46346),o=new u({initialize:function(m){this.world=m,this.scene=m.scene,this.sys=m.scene.sys},collider:function(p,m,g,x,C){return this.world.addCollider(p,m,g,x,C)},overlap:function(p,m,g,x,C){return this.world.addOverlap(p,m,g,x,C)},existing:function(p,m){var g=m?l.STATIC_BODY:l.DYNAMIC_BODY;return this.world.enableBody(p,g),p},staticImage:function(p,m,g,x){var C=new d(this.scene,p,m,g,x);return this.sys.displayList.add(C),this.world.enableBody(C,l.STATIC_BODY),C},image:function(p,m,g,x){var C=new d(this.scene,p,m,g,x);return this.sys.displayList.add(C),this.world.enableBody(C,l.DYNAMIC_BODY),C},staticSprite:function(p,m,g,x){var C=new y(this.scene,p,m,g,x);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,l.STATIC_BODY),C},sprite:function(p,m,g,x){var C=new y(this.scene,p,m,g,x);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,l.DYNAMIC_BODY),C},staticGroup:function(p,m){return this.sys.updateList.add(new v(this.world,this.world.scene,p,m))},group:function(p,m){return this.sys.updateList.add(new r(this.world,this.world.scene,p,m))},body:function(p,m,g,x){var C=new c(this.world);return C.position.set(p,m),g&&x&&C.setSize(g,x),this.world.add(C,l.DYNAMIC_BODY),C},staticBody:function(p,m,g,x){var C=new a(this.world);return C.position.set(p,m),g&&x&&C.setSize(g,x),this.world.add(C,l.STATIC_BODY),C},destroy:function(){this.world=null,this.scene=null,this.sys=null}});h.exports=o},75671:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47401),y=function(c,u,l,r){var a=0,v=c.deltaAbsX()+u.deltaAbsX()+r;return c._dx===0&&u._dx===0?(c.embedded=!0,u.embedded=!0):c._dx>u._dx?(a=c.right-u.x,a>v&&!l||c.checkCollision.right===!1||u.checkCollision.left===!1?a=0:(c.touching.none=!1,c.touching.right=!0,u.touching.none=!1,u.touching.left=!0,u.physicsType===d.STATIC_BODY&&!l&&(c.blocked.none=!1,c.blocked.right=!0),c.physicsType===d.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.left=!0))):c._dx<u._dx&&(a=c.x-u.width-u.x,-a>v&&!l||c.checkCollision.left===!1||u.checkCollision.right===!1?a=0:(c.touching.none=!1,c.touching.left=!0,u.touching.none=!1,u.touching.right=!0,u.physicsType===d.STATIC_BODY&&!l&&(c.blocked.none=!1,c.blocked.left=!0),c.physicsType===d.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.right=!0))),c.overlapX=a,u.overlapX=a,a};h.exports=y},66185:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47401),y=function(c,u,l,r){var a=0,v=c.deltaAbsY()+u.deltaAbsY()+r;return c._dy===0&&u._dy===0?(c.embedded=!0,u.embedded=!0):c._dy>u._dy?(a=c.bottom-u.y,a>v&&!l||c.checkCollision.down===!1||u.checkCollision.up===!1?a=0:(c.touching.none=!1,c.touching.down=!0,u.touching.none=!1,u.touching.up=!0,u.physicsType===d.STATIC_BODY&&!l&&(c.blocked.none=!1,c.blocked.down=!0),c.physicsType===d.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.up=!0))):c._dy<u._dy&&(a=c.y-u.bottom,-a>v&&!l||c.checkCollision.up===!1||u.checkCollision.down===!1?a=0:(c.touching.none=!1,c.touching.up=!0,u.touching.none=!1,u.touching.down=!0,u.physicsType===d.STATIC_BODY&&!l&&(c.blocked.none=!1,c.blocked.up=!0),c.physicsType===d.STATIC_BODY&&!l&&(u.blocked.none=!1,u.blocked.down=!0))),c.overlapY=a,u.overlapY=a,a};h.exports=y},10481:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25084),y=e(56694),c=e(47401),u=e(72632),l=e(59192),r=e(42911),a=new y({Extends:l,initialize:function(o,p,m,g){if(!m&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(r(m))g=m,m=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(m)&&r(m[0])){g=m[0];var x=this;m.forEach(function(C){C.internalCreateCallback=x.createCallbackHandler,C.internalRemoveCallback=x.removeCallbackHandler}),m=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=o,g.classType=u(g,"classType",d),this.physicsType=c.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:u(g,"collideWorldBounds",!1),setBoundsRectangle:u(g,"customBoundsRectangle",null),setAccelerationX:u(g,"accelerationX",0),setAccelerationY:u(g,"accelerationY",0),setAllowDrag:u(g,"allowDrag",!0),setAllowGravity:u(g,"allowGravity",!0),setAllowRotation:u(g,"allowRotation",!0),setDamping:u(g,"useDamping",!1),setBounceX:u(g,"bounceX",0),setBounceY:u(g,"bounceY",0),setDragX:u(g,"dragX",0),setDragY:u(g,"dragY",0),setEnable:u(g,"enable",!0),setGravityX:u(g,"gravityX",0),setGravityY:u(g,"gravityY",0),setFrictionX:u(g,"frictionX",0),setFrictionY:u(g,"frictionY",0),setMaxSpeed:u(g,"maxSpeed",-1),setMaxVelocityX:u(g,"maxVelocityX",1e4),setMaxVelocityY:u(g,"maxVelocityY",1e4),setVelocityX:u(g,"velocityX",0),setVelocityY:u(g,"velocityY",0),setAngularVelocity:u(g,"angularVelocity",0),setAngularAcceleration:u(g,"angularAcceleration",0),setAngularDrag:u(g,"angularDrag",0),setMass:u(g,"mass",1),setImmovable:u(g,"immovable",!1)},l.call(this,p,m,g),this.type="PhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,c.DYNAMIC_BODY);var o=v.body;for(var p in this.defaults)o[p](this.defaults[p])},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},setVelocity:function(v,o,p){p===void 0&&(p=0);for(var m=this.getChildren(),g=0;g<m.length;g++)m[g].body.velocity.set(v+g*p,o+g*p);return this},setVelocityX:function(v,o){o===void 0&&(o=0);for(var p=this.getChildren(),m=0;m<p.length;m++)p[m].body.velocity.x=v+m*o;return this},setVelocityY:function(v,o){o===void 0&&(o=0);for(var p=this.getChildren(),m=0;m<p.length;m++)p[m].body.velocity.y=v+m*o;return this}});h.exports=a},22916:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S,e,d,y,c,u,l,r,a,v,o,p,m,g,x,C,M,R=function(L,I,F){S=L,e=I;var D=S.velocity.x,V=e.velocity.x;return d=S.pushable,a=S._dx<0,v=S._dx>0,o=S._dx===0,x=Math.abs(S.right-e.x)<=Math.abs(e.right-S.x),l=V-D*S.bounce.x,y=e.pushable,p=e._dx<0,m=e._dx>0,g=e._dx===0,C=!x,r=D-V*e.bounce.x,M=Math.abs(F),P()},P=function(){return v&&x&&e.blocked.right?(S.processX(-M,l,!1,!0),1):a&&C&&e.blocked.left?(S.processX(M,l,!0),1):m&&C&&S.blocked.right?(e.processX(-M,r,!1,!0),2):p&&x&&S.blocked.left?(e.processX(M,r,!0),2):0},w=function(){var L=S.velocity.x,I=e.velocity.x,F=Math.sqrt(I*I*e.mass/S.mass)*(I>0?1:-1),D=Math.sqrt(L*L*S.mass/e.mass)*(L>0?1:-1),V=(F+D)*.5;return F-=V,D-=V,c=V+F*S.bounce.x,u=V+D*e.bounce.x,a&&C?A(0):p&&x?A(1):v&&x?A(2):m&&C?A(3):!1},A=function(L){if(d&&y)M*=.5,L===0||L===3?(S.processX(M,c),e.processX(-M,u)):(S.processX(-M,c),e.processX(M,u));else if(d&&!y)L===0||L===3?S.processX(M,l,!0):S.processX(-M,l,!1,!0);else if(!d&&y)L===0||L===3?e.processX(-M,r,!1,!0):e.processX(M,r,!0);else{var I=M*.5;L===0?g?(S.processX(M,0,!0),e.processX(0,null,!1,!0)):m?(S.processX(I,0,!0),e.processX(-I,0,!1,!0)):(S.processX(I,e.velocity.x,!0),e.processX(-I,null,!1,!0)):L===1?o?(S.processX(0,null,!1,!0),e.processX(M,0,!0)):v?(S.processX(-I,0,!1,!0),e.processX(I,0,!0)):(S.processX(-I,null,!1,!0),e.processX(I,S.velocity.x,!0)):L===2?g?(S.processX(-M,0,!1,!0),e.processX(0,null,!0)):p?(S.processX(-I,0,!1,!0),e.processX(I,0,!0)):(S.processX(-I,e.velocity.x,!1,!0),e.processX(I,null,!0)):L===3&&(o?(S.processX(0,null,!0),e.processX(-M,0,!1,!0)):a?(S.processX(I,0,!0),e.processX(-I,0,!1,!0)):(S.processX(I,e.velocity.y,!0),e.processX(-I,null,!1,!0)))}return!0},G=function(L){L===1?e.velocity.x=0:x?e.processX(M,r,!0):e.processX(-M,r,!1,!0),S.moves&&(e.y+=(S.y-S.prev.y)*S.friction.y,e._dy=e.y-e.prev.y)},O=function(L){L===2?S.velocity.x=0:C?S.processX(M,l,!0):S.processX(-M,l,!1,!0),e.moves&&(S.y+=(e.y-e.prev.y)*e.friction.y,S._dy=S.y-S.prev.y)};h.exports={BlockCheck:P,Check:w,Set:R,Run:A,RunImmovableBody1:G,RunImmovableBody2:O}},67050:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S,e,d,y,c,u,l,r,a,v,o,p,m,g,x,C,M,R=function(L,I,F){S=L,e=I;var D=S.velocity.y,V=e.velocity.y;return d=S.pushable,a=S._dy<0,v=S._dy>0,o=S._dy===0,x=Math.abs(S.bottom-e.y)<=Math.abs(e.bottom-S.y),l=V-D*S.bounce.y,y=e.pushable,p=e._dy<0,m=e._dy>0,g=e._dy===0,C=!x,r=D-V*e.bounce.y,M=Math.abs(F),P()},P=function(){return v&&x&&e.blocked.down?(S.processY(-M,l,!1,!0),1):a&&C&&e.blocked.up?(S.processY(M,l,!0),1):m&&C&&S.blocked.down?(e.processY(-M,r,!1,!0),2):p&&x&&S.blocked.up?(e.processY(M,r,!0),2):0},w=function(){var L=S.velocity.y,I=e.velocity.y,F=Math.sqrt(I*I*e.mass/S.mass)*(I>0?1:-1),D=Math.sqrt(L*L*S.mass/e.mass)*(L>0?1:-1),V=(F+D)*.5;return F-=V,D-=V,c=V+F*S.bounce.y,u=V+D*e.bounce.y,a&&C?A(0):p&&x?A(1):v&&x?A(2):m&&C?A(3):!1},A=function(L){if(d&&y)M*=.5,L===0||L===3?(S.processY(M,c),e.processY(-M,u)):(S.processY(-M,c),e.processY(M,u));else if(d&&!y)L===0||L===3?S.processY(M,l,!0):S.processY(-M,l,!1,!0);else if(!d&&y)L===0||L===3?e.processY(-M,r,!1,!0):e.processY(M,r,!0);else{var I=M*.5;L===0?g?(S.processY(M,0,!0),e.processY(0,null,!1,!0)):m?(S.processY(I,0,!0),e.processY(-I,0,!1,!0)):(S.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)):L===1?o?(S.processY(0,null,!1,!0),e.processY(M,0,!0)):v?(S.processY(-I,0,!1,!0),e.processY(I,0,!0)):(S.processY(-I,null,!1,!0),e.processY(I,S.velocity.y,!0)):L===2?g?(S.processY(-M,0,!1,!0),e.processY(0,null,!0)):p?(S.processY(-I,0,!1,!0),e.processY(I,0,!0)):(S.processY(-I,e.velocity.y,!1,!0),e.processY(I,null,!0)):L===3&&(o?(S.processY(0,null,!0),e.processY(-M,0,!1,!0)):a?(S.processY(I,0,!0),e.processY(-I,0,!1,!0)):(S.processY(I,e.velocity.y,!0),e.processY(-I,null,!1,!0)))}return!0},G=function(L){L===1?e.velocity.y=0:x?e.processY(M,r,!0):e.processY(-M,r,!1,!0),S.moves&&(e.x+=(S.x-S.prev.x)*S.friction.x,e._dx=e.x-e.prev.x)},O=function(L){L===2?S.velocity.y=0:C?S.processY(M,l,!0):S.processY(-M,l,!1,!0),e.moves&&(S.x+=(e.x-e.prev.x)*e.friction.x,S._dx=S.x-S.prev.x)};h.exports={BlockCheck:P,Check:w,Set:R,Run:A,RunImmovableBody1:G,RunImmovableBody2:O}},61777:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75671),y=e(22916),c=function(u,l,r,a,v){v===void 0&&(v=d(u,l,r,a));var o=u.immovable,p=l.immovable;if(r||v===0||o&&p||u.customSeparateX||l.customSeparateX)return v!==0||u.embedded&&l.embedded;var m=y.Set(u,l,v);return!o&&!p?m>0?!0:y.Check():(o?y.RunImmovableBody1(m):p&&y.RunImmovableBody2(m),!0)};h.exports=c},25299:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66185),y=e(67050),c=function(u,l,r,a,v){v===void 0&&(v=d(u,l,r,a));var o=u.immovable,p=l.immovable;if(r||v===0||o&&p||u.customSeparateY||l.customSeparateY)return v!==0||u.embedded&&l.embedded;var m=y.Set(u,l,v);return!o&&!p?m>0?!0:y.Check():(o?y.RunImmovableBody1(m):p&&y.RunImmovableBody2(m),!0)};h.exports=c},66634:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),y=e(56694),c=e(47401),u=e(94287),l=e(93736),r=new y({initialize:function(v,o){var p=64,m=64,g={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},x=o!==void 0;x&&o.displayWidth&&(p=o.displayWidth,m=o.displayHeight),x||(o=g),this.world=v,this.gameObject=x?o:void 0,this.isBody=!0,this.debugShowBody=v.defaults.debugShowStaticBody,this.debugBodyColor=v.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new l,this.position=new l(o.x-p*o.originX,o.y-m*o.originY),this.width=p,this.height=m,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new l(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=l.ZERO,this.allowGravity=!1,this.gravity=l.ZERO,this.bounce=l.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=c.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(a,v){return a&&a!==this.gameObject&&(this.gameObject.body=null,a.body=this,this.gameObject=a),v&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var a=this.gameObject;return a.getTopLeft(this.position),this.width=a.displayWidth,this.height=a.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(a,v){return v===void 0&&(v=a),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(a,v),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(a,v,o){o===void 0&&(o=!0);var p=this.gameObject;if(!a&&p.frame&&(a=p.frame.realWidth),!v&&p.frame&&(v=p.frame.realHeight),this.world.staticTree.remove(this),this.width=a,this.height=v,this.halfWidth=Math.floor(a/2),this.halfHeight=Math.floor(v/2),o&&p.getCenter){var m=p.displayWidth/2,g=p.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(m-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(a,v,o){return v===void 0&&(v=this.offset.x),o===void 0&&(o=this.offset.y),a>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=a,this.width=a*2,this.height=a*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,o),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(a,v){var o=this.gameObject;a===void 0&&(a=o.x),v===void 0&&(v=o.y),this.world.staticTree.remove(this),o.setPosition(a,v),o.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(a){return a.x=this.x,a.y=this.y,a.right=this.right,a.bottom=this.bottom,a},hitTest:function(a,v){return this.isCircle?d(this,a,v):u(this,a,v)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(a){var v=this.position,o=v.x+this.halfWidth,p=v.y+this.halfHeight;this.debugShowBody&&(a.lineStyle(a.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?a.strokeCircle(o,p,this.width/2):a.strokeRect(v.x,v.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(a){return a<=0&&(a=.1),this.mass=a,this},x:{get:function(){return this.position.x},set:function(a){this.world.staticTree.remove(this),this.position.x=a,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(a){this.world.staticTree.remove(this),this.position.y=a,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});h.exports=r},46346:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25084),y=e(56694),c=e(47401),u=e(72632),l=e(59192),r=e(42911),a=new y({Extends:l,initialize:function(o,p,m,g){!m&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:d}:r(m)?(g=m,m=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=u(g,"classType",d)):Array.isArray(m)&&r(m[0])?(g=m,m=null,g.forEach(function(x){x.internalCreateCallback=this.createCallbackHandler,x.internalRemoveCallback=this.removeCallbackHandler,x.createMultipleCallback=this.createMultipleCallbackHandler,x.classType=u(x,"classType",d)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=o,this.physicsType=c.STATIC_BODY,l.call(this,p,m,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,c.STATIC_BODY)},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var v=this.children.entries,o=0;o<v.length;o++)v[o].body.reset();return this}});h.exports=a},85233:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(94240),y=e(97602),c=e(82897),u=e(56694),l=e(3909),r=e(47401),a=e(53996),v=e(92951),o=e(6659),p=e(27037),m=e(88456),g=e(41935),x=e(54726),C=e(75671),M=e(66185),R=e(44662),P=e(10850),w=e(83392),A=e(74623),G=e(25163),O=e(74118),L=e(68687),I=e(27354),F=e(61777),D=e(25299),V=e(58403),k=e(66634),W=e(28808),X=e(69360),H=e(93736),$=e(1071),z=new u({Extends:o,initialize:function(B,N){o.call(this),this.scene=B,this.bodies=new V,this.staticBodies=new V,this.pendingDestroy=new V,this.colliders=new A,this.gravity=new H(P(N,"gravity.x",0),P(N,"gravity.y",0)),this.bounds=new O(P(N,"x",0),P(N,"y",0),P(N,"width",B.sys.scale.width),P(N,"height",B.sys.scale.height)),this.checkCollision={up:P(N,"checkCollision.up",!0),down:P(N,"checkCollision.down",!0),left:P(N,"checkCollision.left",!0),right:P(N,"checkCollision.right",!0)},this.fps=P(N,"fps",60),this.fixedStep=P(N,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=P(N,"timeScale",1),this.OVERLAP_BIAS=P(N,"overlapBias",4),this.TILE_BIAS=P(N,"tileBias",16),this.forceX=P(N,"forceX",!1),this.isPaused=P(N,"isPaused",!1),this._total=0,this.drawDebug=P(N,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:P(N,"debugShowBody",!0),debugShowStaticBody:P(N,"debugShowStaticBody",!0),debugShowVelocity:P(N,"debugShowVelocity",!0),bodyDebugColor:P(N,"debugBodyColor",16711935),staticBodyDebugColor:P(N,"debugStaticBodyColor",255),velocityDebugColor:P(N,"debugVelocityColor",65280)},this.maxEntries=P(N,"maxEntries",16),this.useTree=P(N,"useTree",!0),this.tree=new L(this.maxEntries),this.staticTree=new L(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new X,this._tempMatrix2=new X,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(b,B){B===void 0&&(B=r.DYNAMIC_BODY),Array.isArray(b)||(b=[b]);for(var N=0;N<b.length;N++){var U=b[N];if(U.isParent)for(var Y=U.getChildren(),K=0;K<Y.length;K++){var Z=Y[K];Z.isParent?this.enable(Z,B):this.enableBody(Z,B)}else this.enableBody(U,B)}},enableBody:function(b,B){return B===void 0&&(B=r.DYNAMIC_BODY),b.hasTransformComponent&&(b.body||(B===r.DYNAMIC_BODY?b.body=new y(this,b):B===r.STATIC_BODY&&(b.body=new k(this,b))),this.add(b.body)),b},add:function(b){return b.physicsType===r.DYNAMIC_BODY?this.bodies.set(b):b.physicsType===r.STATIC_BODY&&(this.staticBodies.set(b),this.staticTree.insert(b)),b.enable=!0,b},disable:function(b){Array.isArray(b)||(b=[b]);for(var B=0;B<b.length;B++){var N=b[B];if(N.isParent)for(var U=N.getChildren(),Y=0;Y<U.length;Y++){var K=U[Y];K.isParent?this.disable(K):this.disableBody(K.body)}else this.disableBody(N.body)}},disableBody:function(b){this.remove(b),b.enable=!1},remove:function(b){b.physicsType===r.DYNAMIC_BODY?(this.tree.remove(b),this.bodies.delete(b)):b.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(b),this.staticTree.remove(b))},createDebugGraphic:function(){var b=this.scene.sys.add.graphics({x:0,y:0});return b.setDepth(Number.MAX_VALUE),this.debugGraphic=b,this.drawDebug=!0,b},setBounds:function(b,B,N,U,Y,K,Z,J){return this.bounds.setTo(b,B,N,U),Y!==void 0&&this.setBoundsCollision(Y,K,Z,J),this},setBoundsCollision:function(b,B,N,U){return b===void 0&&(b=!0),B===void 0&&(B=!0),N===void 0&&(N=!0),U===void 0&&(U=!0),this.checkCollision.left=b,this.checkCollision.right=B,this.checkCollision.up=N,this.checkCollision.down=U,this},pause:function(){return this.isPaused=!0,this.emit(p.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(p.RESUME),this},addCollider:function(b,B,N,U,Y){N===void 0&&(N=null),U===void 0&&(U=null),Y===void 0&&(Y=N);var K=new l(this,!1,b,B,N,U,Y);return this.colliders.add(K),K},addOverlap:function(b,B,N,U,Y){N===void 0&&(N=null),U===void 0&&(U=null),Y===void 0&&(Y=N);var K=new l(this,!0,b,B,N,U,Y);return this.colliders.add(K),K},removeCollider:function(b){return this.colliders.remove(b),this},setFPS:function(b){return this.fps=b,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(b,B){if(!(this.isPaused||this.bodies.size===0)){var N,U=this._frameTime,Y=this._frameTimeMS*this.timeScale;this._elapsed+=B;var K,Z=this.bodies.entries,J=this._elapsed>=Y;for(this.fixedStep||(U=B*.001,J=!0,this._elapsed=0),N=0;N<Z.length;N++)K=Z[N],K.enable&&K.preUpdate(J,U);if(J){this._elapsed-=Y,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Z));var Q=this.colliders.update();for(N=0;N<Q.length;N++){var j=Q[N];j.active&&j.update()}this.emit(p.WORLD_STEP,U)}for(;this._elapsed>=Y;)this._elapsed-=Y,this.step(U)}},step:function(b){var B,N,U=this.bodies.entries,Y=U.length;for(B=0;B<Y;B++)N=U[B],N.enable&&N.update(b);this.useTree&&(this.tree.clear(),this.tree.load(U));var K=this.colliders.update();for(B=0;B<K.length;B++){var Z=K[B];Z.active&&Z.update()}this.emit(p.WORLD_STEP,b),this.stepsLastFrame++},postUpdate:function(){var b,B,N=this.bodies.entries,U=N.length,Y=this.bodies,K=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,b=0;b<U;b++)B=N[b],B.enable&&B.postUpdate();if(this.drawDebug){var Z=this.debugGraphic;for(Z.clear(),b=0;b<U;b++)B=N[b],B.willDrawDebug()&&B.drawDebug(Z);for(N=K.entries,U=N.length,b=0;b<U;b++)B=N[b],B.willDrawDebug()&&B.drawDebug(Z)}var J=this.pendingDestroy;if(J.size>0){var Q=this.tree,j=this.staticTree;for(N=J.entries,U=N.length,b=0;b<U;b++)B=N[b],B.physicsType===r.DYNAMIC_BODY?(Q.remove(B),Y.delete(B)):B.physicsType===r.STATIC_BODY&&(j.remove(B),K.delete(B)),B.world=void 0,B.gameObject=void 0;J.clear()}},updateMotion:function(b,B){b.allowRotation&&this.computeAngularVelocity(b,B),this.computeVelocity(b,B)},computeAngularVelocity:function(b,B){var N=b.angularVelocity,U=b.angularAcceleration,Y=b.angularDrag,K=b.maxAngular;U?N+=U*B:b.allowDrag&&Y&&(Y*=B,g(N-Y,0,.1)?N-=Y:x(N+Y,0,.1)?N+=Y:N=0),N=c(N,-K,K);var Z=N-b.angularVelocity;b.angularVelocity+=Z,b.rotation+=b.angularVelocity*B},computeVelocity:function(b,B){var N=b.velocity.x,U=b.acceleration.x,Y=b.drag.x,K=b.maxVelocity.x,Z=b.velocity.y,J=b.acceleration.y,Q=b.drag.y,j=b.maxVelocity.y,q=b.speed,tt=b.maxSpeed,_=b.allowDrag,it=b.useDamping;b.allowGravity&&(N+=(this.gravity.x+b.gravity.x)*B,Z+=(this.gravity.y+b.gravity.y)*B),U?N+=U*B:_&&Y&&(it?(Y=Math.pow(Y,B),N*=Y,q=Math.sqrt(N*N+Z*Z),m(q,0,.001)&&(N=0)):(Y*=B,g(N-Y,0,.01)?N-=Y:x(N+Y,0,.01)?N+=Y:N=0)),J?Z+=J*B:_&&Q&&(it?(Q=Math.pow(Q,B),Z*=Q,q=Math.sqrt(N*N+Z*Z),m(q,0,.001)&&(Z=0)):(Q*=B,g(Z-Q,0,.01)?Z-=Q:x(Z+Q,0,.01)?Z+=Q:Z=0)),N=c(N,-K,K),Z=c(Z,-j,j),b.velocity.set(N,Z),tt>-1&&b.velocity.length()>tt&&(b.velocity.normalize().scale(tt),q=tt),b.speed=q},separate:function(b,B,N,U,Y){var K,Z,J=!1,Q=!0;if(!b.enable||!B.enable||b.checkCollision.none||B.checkCollision.none||!this.intersects(b,B)||N&&N.call(U,b.gameObject,B.gameObject)===!1)return J;if(b.isCircle||B.isCircle){var j=this.separateCircle(b,B,Y);j.result?(J=!0,Q=!1):(K=j.x,Z=j.y,Q=!0)}if(Q){var q=!1,tt=!1,_=this.OVERLAP_BIAS;Y?(q=F(b,B,Y,_,K),tt=D(b,B,Y,_,Z)):this.forceX||Math.abs(this.gravity.y+b.gravity.y)<Math.abs(this.gravity.x+b.gravity.x)?(q=F(b,B,Y,_,K),this.intersects(b,B)&&(tt=D(b,B,Y,_,Z))):(tt=D(b,B,Y,_,Z),this.intersects(b,B)&&(q=F(b,B,Y,_,K))),J=q||tt}return J&&(Y?(b.onOverlap||B.onOverlap)&&this.emit(p.OVERLAP,b.gameObject,B.gameObject,b,B):(b.onCollide||B.onCollide)&&this.emit(p.COLLIDE,b.gameObject,B.gameObject,b,B)),J},separateCircle:function(b,B,N){C(b,B,!1,0),M(b,B,!1,0);var U=b.isCircle,Y=B.isCircle,K=b.center,Z=B.center,J=b.immovable,Q=B.immovable,j=b.velocity,q=B.velocity,tt=0,_=!0;if(U!==Y){_=!1;var it=K.x,rt=K.y,at=b.halfWidth,ot=B.position.x,et=B.position.y,nt=B.right,st=B.bottom;Y&&(it=Z.x,rt=Z.y,at=B.halfWidth,ot=b.position.x,et=b.position.y,nt=b.right,st=b.bottom),rt<et?it<ot?tt=a(it,rt,ot,et)-at:it>nt&&(tt=a(it,rt,nt,et)-at):rt>st&&(it<ot?tt=a(it,rt,ot,st)-at:it>nt&&(tt=a(it,rt,nt,st)-at)),tt*=-1}else tt=b.halfWidth+B.halfWidth-v(K,Z);b.overlapR=tt,B.overlapR=tt;var ut=d(K,Z),lt=(tt+w.EPSILON)*Math.cos(ut),pt=(tt+w.EPSILON)*Math.sin(ut),ct={overlap:tt,result:!1,x:lt,y:pt};if(N&&(!_||_&&tt!==0))return ct.result=!0,ct;if(!_&&tt===0||J&&Q||b.customSeparateX||B.customSeparateX)return ct.x=void 0,ct.y=void 0,ct;var ft=!b.pushable&&!B.pushable;if(_){var dt=K.x-Z.x,vt=K.y-Z.y,gt=Math.sqrt(Math.pow(dt,2)+Math.pow(vt,2)),mt=(Z.x-K.x)/gt||0,xt=(Z.y-K.y)/gt||0,yt=2*(j.x*mt+j.y*xt-q.x*mt-q.y*xt)/(b.mass+B.mass);(J||Q)&&(yt*=2),J||(j.x=j.x-yt/b.mass*mt,j.y=j.y-yt/b.mass*xt,j.multiply(b.bounce)),Q||(q.x=q.x+yt/B.mass*mt,q.y=q.y+yt/B.mass*xt,q.multiply(B.bounce)),!J&&!Q&&(lt*=.5,pt*=.5),J||(b.x-=lt,b.y-=pt,b.updateCenter()),Q||(B.x+=lt,B.y+=pt,B.updateCenter()),ct.result=!0}else!J||b.pushable||ft?(b.x-=lt,b.y-=pt,b.updateCenter()):(!Q||B.pushable||ft)&&(B.x+=lt,B.y+=pt,B.updateCenter()),ct.x=void 0,ct.y=void 0;return ct},intersects:function(b,B){return b===B?!1:!b.isCircle&&!B.isCircle?!(b.right<=B.left||b.bottom<=B.top||b.left>=B.right||b.top>=B.bottom):b.isCircle?B.isCircle?v(b.center,B.center)<=b.halfWidth+B.halfWidth:this.circleBodyIntersects(b,B):this.circleBodyIntersects(B,b)},circleBodyIntersects:function(b,B){var N=c(b.center.x,B.left,B.right),U=c(b.center.y,B.top,B.bottom),Y=(b.center.x-N)*(b.center.x-N),K=(b.center.y-U)*(b.center.y-U);return Y+K<=b.halfWidth*b.halfWidth},overlap:function(b,B,N,U,Y){return N===void 0&&(N=null),U===void 0&&(U=null),Y===void 0&&(Y=N),this.collideObjects(b,B,N,U,Y,!0)},collide:function(b,B,N,U,Y){return N===void 0&&(N=null),U===void 0&&(U=null),Y===void 0&&(Y=N),this.collideObjects(b,B,N,U,Y,!1)},collideObjects:function(b,B,N,U,Y,K){var Z,J;b.isParent&&(b.physicsType===void 0||B===void 0||b===B)&&(b=b.children.entries),B&&B.isParent&&B.physicsType===void 0&&(B=B.children.entries);var Q=Array.isArray(b),j=Array.isArray(B);if(this._total=0,!Q&&!j)this.collideHandler(b,B,N,U,Y,K);else if(!Q&&j)for(Z=0;Z<B.length;Z++)this.collideHandler(b,B[Z],N,U,Y,K);else if(Q&&!j)if(B)for(Z=0;Z<b.length;Z++)this.collideHandler(b[Z],B,N,U,Y,K);else for(Z=0;Z<b.length;Z++){var q=b[Z];for(J=Z+1;J<b.length;J++)Z!==J&&this.collideHandler(q,b[J],N,U,Y,K)}else for(Z=0;Z<b.length;Z++)for(J=0;J<B.length;J++)this.collideHandler(b[Z],B[J],N,U,Y,K);return this._total>0},collideHandler:function(b,B,N,U,Y,K){if(B===void 0&&b.isParent)return this.collideGroupVsGroup(b,b,N,U,Y,K);if(!b||!B)return!1;if(b.body||b.isBody){if(B.body||B.isBody)return this.collideSpriteVsSprite(b,B,N,U,Y,K);if(B.isParent)return this.collideSpriteVsGroup(b,B,N,U,Y,K);if(B.isTilemap)return this.collideSpriteVsTilemapLayer(b,B,N,U,Y,K)}else if(b.isParent){if(B.body||B.isBody)return this.collideSpriteVsGroup(B,b,N,U,Y,K);if(B.isParent)return this.collideGroupVsGroup(b,B,N,U,Y,K);if(B.isTilemap)return this.collideGroupVsTilemapLayer(b,B,N,U,Y,K)}else if(b.isTilemap){if(B.body||B.isBody)return this.collideSpriteVsTilemapLayer(B,b,N,U,Y,K);if(B.isParent)return this.collideGroupVsTilemapLayer(B,b,N,U,Y,K)}},collideSpriteVsSprite:function(b,B,N,U,Y,K){var Z=b.isBody?b:b.body,J=B.isBody?B:B.body;return!Z||!J?!1:(this.separate(Z,J,U,Y,K)&&(N&&N.call(Y,b,B),this._total++),!0)},collideSpriteVsGroup:function(b,B,N,U,Y,K){var Z=b.isBody?b:b.body;if(!(B.length===0||!Z||!Z.enable||Z.checkCollision.none)){var J,Q,j;if(this.useTree||B.physicsType===r.STATIC_BODY){var q=this.treeMinMax;q.minX=Z.left,q.minY=Z.top,q.maxX=Z.right,q.maxY=Z.bottom;var tt=B.physicsType===r.DYNAMIC_BODY?this.tree.search(q):this.staticTree.search(q);for(Q=tt.length,J=0;J<Q;J++)j=tt[J],!(Z===j||!j.enable||j.checkCollision.none||!B.contains(j.gameObject))&&this.separate(Z,j,U,Y,K)&&(N&&N.call(Y,Z.gameObject,j.gameObject),this._total++)}else{var _=B.getChildren(),it=B.children.entries.indexOf(b);for(Q=_.length,J=0;J<Q;J++)j=_[J].body,!(!j||J===it||!j.enable)&&this.separate(Z,j,U,Y,K)&&(N&&N.call(Y,Z.gameObject,j.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(b,B,N,U,Y,K){var Z=b.getChildren();if(Z.length===0)return!1;for(var J=!1,Q=0;Q<Z.length;Q++)(Z[Q].body||Z[Q].isBody)&&this.collideSpriteVsTilemapLayer(Z[Q],B,N,U,Y,K)&&(J=!0);return J},collideTiles:function(b,B,N,U,Y){return B.length===0||b.body&&!b.body.enable||b.isBody&&!b.enable?!1:this.collideSpriteVsTilesHandler(b,B,N,U,Y,!1,!1)},overlapTiles:function(b,B,N,U,Y){return B.length===0||b.body&&!b.body.enable||b.isBody&&!b.enable?!1:this.collideSpriteVsTilesHandler(b,B,N,U,Y,!0,!1)},collideSpriteVsTilemapLayer:function(b,B,N,U,Y,K){var Z=b.isBody?b:b.body;if(!Z.enable||Z.checkCollision.none)return!1;var J=Z.x,Q=Z.y,j=Z.width,q=Z.height,tt=B.layer;if(tt.tileWidth>tt.baseTileWidth){var _=(tt.tileWidth-tt.baseTileWidth)*B.scaleX;J-=_,j+=_}if(tt.tileHeight>tt.baseTileHeight){var it=(tt.tileHeight-tt.baseTileHeight)*B.scaleY;q+=it}var rt=K?null:this.tileFilterOptions,at=R(J,Q,j,q,rt,B.scene.cameras.main,B.layer);return at.length===0?!1:this.collideSpriteVsTilesHandler(b,at,N,U,Y,K,!0)},collideSpriteVsTilesHandler:function(b,B,N,U,Y,K,Z){for(var J=b.isBody?b:b.body,Q,j={left:0,right:0,top:0,bottom:0},q,tt=!1,_=0;_<B.length;_++){Q=B[_],q=Q.tilemapLayer;var it=q.tileToWorldXY(Q.x,Q.y);j.left=it.x,j.top=it.y,Q.baseHeight!==Q.height&&(j.top-=(Q.height-Q.baseHeight)*q.scaleY),j.right=j.left+Q.width*q.scaleX,j.bottom=j.top+Q.height*q.scaleY,W(j,J)&&(!U||U.call(Y,b,Q))&&G(Q,b)&&(K||I(_,J,Q,j,q,this.TILE_BIAS,Z))&&(this._total++,tt=!0,N&&N.call(Y,b,Q),K&&J.onOverlap?this.emit(p.TILE_OVERLAP,b,Q,J):J.onCollide&&this.emit(p.TILE_COLLIDE,b,Q,J))}return tt},collideGroupVsGroup:function(b,B,N,U,Y,K){if(!(b.length===0||B.length===0))for(var Z=b.getChildren(),J=0;J<Z.length;J++)this.collideSpriteVsGroup(Z[J],B,N,U,Y,K)},wrap:function(b,B){b.body?this.wrapObject(b,B):b.getChildren?this.wrapArray(b.getChildren(),B):Array.isArray(b)?this.wrapArray(b,B):this.wrapObject(b,B)},wrapArray:function(b,B){for(var N=0;N<b.length;N++)this.wrapObject(b[N],B)},wrapObject:function(b,B){B===void 0&&(B=0),b.x=$(b.x,this.bounds.left-B,this.bounds.right+B),b.y=$(b.y,this.bounds.top-B,this.bounds.bottom+B)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});h.exports=z},5321:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setAcceleration:function(e,d){return this.body.acceleration.set(e,d),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};h.exports=S},29257:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};h.exports=S},62122:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setBounce:function(e,d){return this.body.bounce.set(e,d),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,d,y,c){return this.body.setCollideWorldBounds(e,d,y,c),this}};h.exports=S},99803:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setDebug:function(e,d,y){return this.debugShowBody=e,this.debugShowVelocity=d,this.debugBodyColor=y,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};h.exports=S},87145:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setDrag:function(e,d){return this.body.drag.set(e,d),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};h.exports=S},96174:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={enableBody:function(e,d,y,c,u){return e&&this.body.reset(d,y),c&&(this.body.gameObject.active=!0),u&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,d){return e===void 0&&(e=!1),d===void 0&&(d=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),d&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};h.exports=S},51702:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setFriction:function(e,d){return this.body.friction.set(e,d),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};h.exports=S},25578:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setGravity:function(e,d){return this.body.gravity.set(e,d),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};h.exports=S},72029:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};h.exports=S},34566:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setMass:function(e){return this.body.mass=e,this}};h.exports=S},2732:(h,S,e)=>{var d=e(15147),y=e(26673),c=e(22184),u=e(26535),l=function(r,a,v,o,p,m){var g=d(r,a-o,v-o,2*o,2*o,p,m);if(g.length===0)return g;for(var x=new y(a,v,o),C=new y,M=[],R=0;R<g.length;R++){var P=g[R];P.isCircle?(C.setTo(P.center.x,P.center.y,P.halfWidth),c(x,C)&&M.push(P)):u(x,P)&&M.push(P)}return M};h.exports=l},15147:h=>{var S=function(e,d,y,c,u,l,r){l===void 0&&(l=!0),r===void 0&&(r=!1);var a=[],v=[],o=e.treeMinMax;if(o.minX=d,o.minY=y,o.maxX=d+c,o.maxY=y+u,r&&(v=e.staticTree.search(o)),l&&e.useTree)a=e.tree.search(o);else if(l){var p=e.bodies,m={position:{x:d,y},left:d,top:y,right:d+c,bottom:y+u,isCircle:!1},g=e.intersects;p.iterate(function(x){g(x,m)&&a.push(x)})}return v.concat(a)};h.exports=S},57527:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};h.exports=S},77687:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setOffset:function(e,d){return this.body.setOffset(e,d),this},setSize:function(e,d,y){return this.body.setSize(e,d,y),this},setBodySize:function(e,d,y){return this.body.setSize(e,d,y),this},setCircle:function(e,d,y){return this.body.setCircle(e,d,y),this}};h.exports=S},66536:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setVelocity:function(e,d){return this.body.setVelocity(e,d),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,d){return this.body.maxVelocity.set(e,d),this}};h.exports=S},7864:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Acceleration:e(5321),Angular:e(29257),Bounce:e(62122),Debug:e(99803),Drag:e(87145),Enable:e(96174),Friction:e(51702),Gravity:e(25578),Immovable:e(72029),Mass:e(34566),OverlapCirc:e(2732),OverlapRect:e(15147),Pushable:e(57527),Size:e(77687),Velocity:e(66536)}},47401:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};h.exports=S},22346:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collide"},95092:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="overlap"},15775:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},74142:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},22825:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="tilecollide"},10851:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="tileoverlap"},7543:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="worldbounds"},1487:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="worldstep"},27037:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={COLLIDE:e(22346),OVERLAP:e(95092),PAUSE:e(15775),RESUME:e(74142),TILE_COLLIDE:e(22825),TILE_OVERLAP:e(10851),WORLD_BOUNDS:e(7543),WORLD_STEP:e(1487)}},39977:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47401),y=e(98611),c={ArcadePhysics:e(66150),Body:e(97602),Collider:e(3909),Components:e(7864),Events:e(27037),Factory:e(99523),GetOverlapX:e(75671),GetOverlapY:e(66185),SeparateX:e(61777),SeparateY:e(25299),Group:e(10481),Image:e(62832),Sprite:e(25084),StaticBody:e(66634),StaticGroup:e(46346),Tilemap:e(8413),World:e(85233)};c=y(!1,c,d),h.exports=c},25163:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,d,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,d,e):!0};h.exports=S},98209:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d<0?(e.blocked.none=!1,e.blocked.left=!0):d>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=d,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};h.exports=S},72792:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d<0?(e.blocked.none=!1,e.blocked.up=!0):d>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=d,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};h.exports=S},27354:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14405),y=e(52926),c=e(28808),u=function(l,r,a,v,o,p,m){var g=v.left,x=v.top,C=v.right,M=v.bottom,R=a.faceLeft||a.faceRight,P=a.faceTop||a.faceBottom;if(m||(R=!0,P=!0),!R&&!P)return!1;var w=0,A=0,G=0,O=1;if(r.deltaAbsX()>r.deltaAbsY()?G=-1:r.deltaAbsX()<r.deltaAbsY()&&(O=-1),r.deltaX()!==0&&r.deltaY()!==0&&R&&P&&(G=Math.min(Math.abs(r.position.x-C),Math.abs(r.right-g)),O=Math.min(Math.abs(r.position.y-M),Math.abs(r.bottom-x))),G<O){if(R&&(w=d(r,a,g,C,p,m),w!==0&&!c(v,r)))return!0;P&&(A=y(r,a,x,M,p,m))}else{if(P&&(A=y(r,a,x,M,p,m),A!==0&&!c(v,r)))return!0;R&&(w=d(r,a,g,C,p,m))}return w!==0||A!==0};h.exports=u},14405:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98209),y=function(c,u,l,r,a,v){var o=0,p=u.faceLeft,m=u.faceRight,g=u.collideLeft,x=u.collideRight;return v||(p=!0,m=!0,g=!0,x=!0),c.deltaX()<0&&x&&c.checkCollision.left?m&&c.x<r&&(o=c.x-r,o<-a&&(o=0)):c.deltaX()>0&&g&&c.checkCollision.right&&p&&c.right>l&&(o=c.right-l,o>a&&(o=0)),o!==0&&(c.customSeparateX?c.overlapX=o:d(c,o)),o};h.exports=y},52926:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72792),y=function(c,u,l,r,a,v){var o=0,p=u.faceTop,m=u.faceBottom,g=u.collideUp,x=u.collideDown;return v||(p=!0,m=!0,g=!0,x=!0),c.deltaY()<0&&x&&c.checkCollision.up?m&&c.y<r&&(o=c.y-r,o<-a&&(o=0)):c.deltaY()>0&&g&&c.checkCollision.down&&p&&c.bottom>l&&(o=c.bottom-l,o>a&&(o=0)),o!==0&&(c.customSeparateY?c.overlapY=o:d(c,o)),o};h.exports=y},28808:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return!(d.right<=e.left||d.bottom<=e.top||d.position.x>=e.right||d.position.y>=e.bottom)};h.exports=S},8413:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={ProcessTileCallbacks:e(25163),ProcessTileSeparationX:e(98209),ProcessTileSeparationY:e(72792),SeparateTile:e(27354),TileCheckX:e(14405),TileCheckY:e(52926),TileIntersectsBody:e(28808)};h.exports=d},53954:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Arcade:e(39977),Matter:e(45949)}},63568:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(93736),c=new d({initialize:function(){this.boundsCenter=new y,this.centerDiff=new y},parseBody:function(u){if(u=u.hasOwnProperty("body")?u.body:u,!u.hasOwnProperty("bounds")||!u.hasOwnProperty("centerOfMass"))return!1;var l=this.boundsCenter,r=this.centerDiff,a=u.bounds.max.x-u.bounds.min.x,v=u.bounds.max.y-u.bounds.min.y,o=a*u.centerOfMass.x,p=v*u.centerOfMass.y;return l.set(a/2,v/2),r.set(o-l.x,p-l.y),!0},getTopLeft:function(u,l,r){if(l===void 0&&(l=0),r===void 0&&(r=0),this.parseBody(u)){var a=this.boundsCenter,v=this.centerDiff;return new y(l+a.x+v.x,r+a.y+v.y)}return!1},getTopCenter:function(u,l,r){if(l===void 0&&(l=0),r===void 0&&(r=0),this.parseBody(u)){var a=this.boundsCenter,v=this.centerDiff;return new y(l+v.x,r+a.y+v.y)}return!1},getTopRight:function(u,l,r){if(l===void 0&&(l=0),r===void 0&&(r=0),this.parseBody(u)){var a=this.boundsCenter,v=this.centerDiff;return new y(l-(a.x-v.x),r+a.y+v.y)}return!1},getLeftCenter:function(u,l,r){if(l===void 0&&(l=0),r===void 0&&(r=0),this.parseBody(u)){var a=this.boundsCenter,v=this.centerDiff;return new y(l+a.x+v.x,r+v.y)}return!1},getCenter:function(u,l,r){if(l===void 0&&(l=0),r===void 0&&(r=0),this.parseBody(u)){var a=this.centerDiff;return new y(l+a.x,r+a.y)}return!1},getRightCenter:function(u,l,r){if(l===void 0&&(l=0),r===void 0&&(r=0),this.parseBody(u)){var a=this.boundsCenter,v=this.centerDiff;return new y(l-(a.x-v.x),r+v.y)}return!1},getBottomLeft:function(u,l,r){if(l===void 0&&(l=0),r===void 0&&(r=0),this.parseBody(u)){var a=this.boundsCenter,v=this.centerDiff;return new y(l+a.x+v.x,r-(a.y-v.y))}return!1},getBottomCenter:function(u,l,r){if(l===void 0&&(l=0),r===void 0&&(r=0),this.parseBody(u)){var a=this.boundsCenter,v=this.centerDiff;return new y(l+v.x,r-(a.y-v.y))}return!1},getBottomRight:function(u,l,r){if(l===void 0&&(l=0),r===void 0&&(r=0),this.parseBody(u)){var a=this.boundsCenter,v=this.centerDiff;return new y(l-(a.x-v.x),r-(a.y-v.y))}return!1}});h.exports=c},18171:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16929);d.Body=e(84125),d.Composite=e(11299),d.World=e(72005),d.Collision=e(63454),d.Detector=e(13657),d.Pairs=e(91327),d.Pair=e(70584),d.Query=e(13390),d.Resolver=e(44272),d.Constraint=e(52838),d.Common=e(68758),d.Engine=e(45775),d.Events=e(39073),d.Sleeping=e(22806),d.Plugin=e(84474),d.Bodies=e(68516),d.Composites=e(56643),d.Axes=e(50658),d.Bounds=e(84091),d.Svg=e(92765),d.Vector=e(10438),d.Vertices=e(39745),d.World.add=d.Composite.add,d.World.remove=d.Composite.remove,d.World.addComposite=d.Composite.addComposite,d.World.addBody=d.Composite.addBody,d.World.addConstraint=d.Composite.addConstraint,d.World.clear=d.Composite.clear,h.exports=d},72653:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),y=e(56694),c=e(56643),u=e(52838),l=e(92765),r=e(3860),a=e(7030),v=e(73658),o=e(84720),p=e(10998),m=e(72829),g=e(88596),x=e(39745),C=new y({initialize:function(R){this.world=R,this.scene=R.scene,this.sys=R.scene.sys},rectangle:function(M,R,P,w,A){var G=d.rectangle(M,R,P,w,A);return this.world.add(G),G},trapezoid:function(M,R,P,w,A,G){var O=d.trapezoid(M,R,P,w,A,G);return this.world.add(O),O},circle:function(M,R,P,w,A){var G=d.circle(M,R,P,w,A);return this.world.add(G),G},polygon:function(M,R,P,w,A){var G=d.polygon(M,R,P,w,A);return this.world.add(G),G},fromVertices:function(M,R,P,w,A,G,O){typeof P=="string"&&(P=x.fromPath(P));var L=d.fromVertices(M,R,P,w,A,G,O);return this.world.add(L),L},fromPhysicsEditor:function(M,R,P,w,A){A===void 0&&(A=!0);var G=p.parseBody(M,R,P,w);return A&&!this.world.has(G)&&this.world.add(G),G},fromSVG:function(M,R,P,w,A,G){w===void 0&&(w=1),A===void 0&&(A={}),G===void 0&&(G=!0);for(var O=P.getElementsByTagName("path"),L=[],I=0;I<O.length;I++){var F=l.pathToVertices(O[I],30);w!==1&&x.scale(F,w,w),L.push(F)}var D=d.fromVertices(M,R,L,A);return G&&this.world.add(D),D},fromJSON:function(M,R,P,w,A){w===void 0&&(w={}),A===void 0&&(A=!0);var G=m.parseBody(M,R,P,w);return G&&A&&this.world.add(G),G},imageStack:function(M,R,P,w,A,G,O,L,I){O===void 0&&(O=0),L===void 0&&(L=0),I===void 0&&(I={});var F=this.world,D=this.sys.displayList;I.addToWorld=!1;var V=c.stack(P,w,A,G,O,L,function(k,W){var X=new a(F,k,W,M,R,I);return D.add(X),X.body});return F.add(V),V},stack:function(M,R,P,w,A,G,O){var L=c.stack(M,R,P,w,A,G,O);return this.world.add(L),L},pyramid:function(M,R,P,w,A,G,O){var L=c.pyramid(M,R,P,w,A,G,O);return this.world.add(L),L},chain:function(M,R,P,w,A,G){return c.chain(M,R,P,w,A,G)},mesh:function(M,R,P,w,A){return c.mesh(M,R,P,w,A)},newtonsCradle:function(M,R,P,w,A){var G=c.newtonsCradle(M,R,P,w,A);return this.world.add(G),G},car:function(M,R,P,w,A){var G=c.car(M,R,P,w,A);return this.world.add(G),G},softBody:function(M,R,P,w,A,G,O,L,I,F){var D=c.softBody(M,R,P,w,A,G,O,L,I,F);return this.world.add(D),D},joint:function(M,R,P,w,A){return this.constraint(M,R,P,w,A)},spring:function(M,R,P,w,A){return this.constraint(M,R,P,w,A)},constraint:function(M,R,P,w,A){w===void 0&&(w=1),A===void 0&&(A={}),A.bodyA=M.type==="body"?M:M.body,A.bodyB=R.type==="body"?R:R.body,isNaN(P)||(A.length=P),A.stiffness=w;var G=u.create(A);return this.world.add(G),G},worldConstraint:function(M,R,P,w){P===void 0&&(P=1),w===void 0&&(w={}),w.bodyB=M.type==="body"?M:M.body,isNaN(R)||(w.length=R),w.stiffness=P;var A=u.create(w);return this.world.add(A),A},mouseSpring:function(M){return this.pointerConstraint(M)},pointerConstraint:function(M){M===void 0&&(M={}),M.hasOwnProperty("render")||(M.render={visible:!1});var R=new g(this.scene,this.world,M);return this.world.add(R.constraint),R},image:function(M,R,P,w,A){var G=new a(this.world,M,R,P,w,A);return this.sys.displayList.add(G),G},tileBody:function(M,R){return new o(this.world,M,R)},sprite:function(M,R,P,w,A){var G=new v(this.world,M,R,P,w,A);return this.sys.displayList.add(G),this.sys.updateList.add(G),G},gameObject:function(M,R,P){return r(this.world,M,R,P)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});h.exports=C},3860:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74527),y=e(72632),c=e(93736);function u(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}var l=function(r,a,v,o){v===void 0&&(v={}),o===void 0&&(o=!0);var p=a.x,m=a.y;a.body={temp:!0,position:{x:p,y:m}};var g=[d.Bounce,d.Collision,d.Force,d.Friction,d.Gravity,d.Mass,d.Sensor,d.SetBody,d.Sleep,d.Static,d.Transform,d.Velocity];if(g.forEach(function(C){for(var M in C)u(C[M])?Object.defineProperty(a,M,{get:C[M].get,set:C[M].set}):Object.defineProperty(a,M,{value:C[M]})}),a.world=r,a._tempVec2=new c(p,m),v.hasOwnProperty("type")&&v.type==="body")a.setExistingBody(v,o);else{var x=y(v,"shape",null);x||(x="rectangle"),v.addToWorld=o,a.setBody(x,v)}return a};h.exports=l},7030:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(74527),c=e(89980),u=e(72632),l=e(1539),r=e(58210),a=e(93736),v=new d({Extends:l,Mixins:[y.Bounce,y.Collision,y.Force,y.Friction,y.Gravity,y.Mass,y.Sensor,y.SetBody,y.Sleep,y.Static,y.Transform,y.Velocity,r],initialize:function(p,m,g,x,C,M){c.call(this,p.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(x,C),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new a(m,g);var R=u(M,"shape",null);R?this.setBody(R,M):this.setRectangle(this.width,this.height,M),this.setPosition(m,g),this.initPipeline(),this.initPostPipeline(!0)}});h.exports=v},50583:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),y=e(50658),c=e(68516),u=e(84125),l=e(63568),r=e(84091),a=e(56694),v=e(63454),o=e(68758),p=e(11299),m=e(56643),g=e(52838),x=e(13657),C=e(53996),M=e(72653),R=e(72632),P=e(10850),w=e(1675),A=e(80391),G=e(16929),O=e(44097),L=e(30657),I=e(70584),F=e(91327),D=e(84474),V=e(91963),k=e(13390),W=e(44272),X=e(7599),H=e(92765),$=e(10438),z=e(39745),b=e(31468);o.setDecomp(e(81084));var B=new a({initialize:function(U){this.scene=U,this.systems=U.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=u,this.composite=p,this.collision=v,this.detector=x,this.pair=I,this.pairs=F,this.query=k,this.resolver=W,this.constraint=g,this.bodies=c,this.composites=m,this.axes=y,this.bounds=r,this.svg=H,this.vector=$,this.vertices=z,this.verts=z,this._tempVec2=$.create(),P(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),P(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),P(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),W._restingThresh=P(this.config,"restingThresh",4),W._restingThreshTangent=P(this.config,"restingThreshTangent",6),W._positionDampen=P(this.config,"positionDampen",.9),W._positionWarming=P(this.config,"positionWarming",.8),W._frictionNormalMultiplier=P(this.config,"frictionNormalMultiplier",5),U.sys.events.once(X.BOOT,this.boot,this),U.sys.events.on(X.START,this.start,this)},boot:function(){this.world=new b(this.scene,this.config),this.add=new M(this.world),this.bodyBounds=new l,this.systems.events.once(X.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new b(this.scene,this.config),this.add=new M(this.world));var N=this.systems.events;N.on(X.UPDATE,this.world.update,this.world),N.on(X.POST_UPDATE,this.world.postUpdate,this.world),N.once(X.SHUTDOWN,this.shutdown,this)},getConfig:function(){var N=this.systems.game.config.physics,U=this.systems.settings.physics,Y=L(R(U,"matter",{}),R(N,"matter",{}));return Y},enableAttractorPlugin:function(){return D.register(w),D.use(G,w),this},enableWrapPlugin:function(){return D.register(O),D.use(G,O),this},enableCollisionEventsPlugin:function(){return D.register(A),D.use(G,A),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(N,U){this.world.step(N,U)},containsPoint:function(N,U,Y){N=this.getMatterBodies(N);var K=$.create(U,Y),Z=k.point(N,K);return Z.length>0},intersectPoint:function(N,U,Y){Y=this.getMatterBodies(Y);var K=$.create(N,U),Z=[],J=k.point(Y,K);return J.forEach(function(Q){Z.indexOf(Q)===-1&&Z.push(Q)}),Z},intersectRect:function(N,U,Y,K,Z,J){Z===void 0&&(Z=!1),J=this.getMatterBodies(J);var Q={min:{x:N,y:U},max:{x:N+Y,y:U+K}},j=[],q=k.region(J,Q,Z);return q.forEach(function(tt){j.indexOf(tt)===-1&&j.push(tt)}),j},intersectRay:function(N,U,Y,K,Z,J){Z===void 0&&(Z=1),J=this.getMatterBodies(J);for(var Q=[],j=k.ray(J,$.create(N,U),$.create(Y,K),Z),q=0;q<j.length;q++)Q.push(j[q].body);return Q},intersectBody:function(N,U){U=this.getMatterBodies(U);for(var Y=[],K=k.collides(N,U),Z=0;Z<K.length;Z++){var J=K[Z];J.bodyA===N?Y.push(J.bodyB):Y.push(J.bodyA)}return Y},overlap:function(N,U,Y,K,Z){Y===void 0&&(Y=null),K===void 0&&(K=null),Z===void 0&&(Z=Y),Array.isArray(N)||(N=[N]),N=this.getMatterBodies(N),U=this.getMatterBodies(U);for(var J=!1,Q=0;Q<N.length;Q++)for(var j=N[Q],q=k.collides(j,U),tt=0;tt<q.length;tt++){var _=q[tt],it=_.bodyA.id===j.id?_.bodyB:_.bodyA;if(!K||K.call(Z,j,it,_)){if(J=!0,Y)Y.call(Z,j,it,_);else if(!K)return!0}}return J},setCollisionCategory:function(N,U){return N=this.getMatterBodies(N),N.forEach(function(Y){Y.collisionFilter.category=U}),this},setCollisionGroup:function(N,U){return N=this.getMatterBodies(N),N.forEach(function(Y){Y.collisionFilter.group=U}),this},setCollidesWith:function(N,U){N=this.getMatterBodies(N);var Y=0;if(!Array.isArray(U))Y=U;else for(var K=0;K<U.length;K++)Y|=U[K];return N.forEach(function(Z){Z.collisionFilter.mask=Y}),this},getMatterBodies:function(N){if(!N)return this.world.getAllBodies();Array.isArray(N)||(N=[N]);for(var U=[],Y=0;Y<N.length;Y++){var K=N[Y].hasOwnProperty("body")?N[Y].body:N[Y];U.push(K)}return U},setVelocity:function(N,U,Y){N=this.getMatterBodies(N);var K=this._tempVec2;return K.x=U,K.y=Y,N.forEach(function(Z){u.setVelocity(Z,K)}),this},setVelocityX:function(N,U){N=this.getMatterBodies(N);var Y=this._tempVec2;return Y.x=U,N.forEach(function(K){Y.y=K.velocity.y,u.setVelocity(K,Y)}),this},setVelocityY:function(N,U){N=this.getMatterBodies(N);var Y=this._tempVec2;return Y.y=U,N.forEach(function(K){Y.x=K.velocity.x,u.setVelocity(K,Y)}),this},setAngularVelocity:function(N,U){return N=this.getMatterBodies(N),N.forEach(function(Y){u.setAngularVelocity(Y,U)}),this},applyForce:function(N,U){N=this.getMatterBodies(N);var Y=this._tempVec2;return N.forEach(function(K){Y.x=K.position.x,Y.y=K.position.y,u.applyForce(K,Y,U)}),this},applyForceFromPosition:function(N,U,Y,K){N=this.getMatterBodies(N);var Z=this._tempVec2;return N.forEach(function(J){K===void 0&&(K=J.angle),Z.x=Y*Math.cos(K),Z.y=Y*Math.sin(K),u.applyForce(J,U,Z)}),this},applyForceFromAngle:function(N,U,Y){N=this.getMatterBodies(N);var K=this._tempVec2;return N.forEach(function(Z){Y===void 0&&(Y=Z.angle),K.x=U*Math.cos(Y),K.y=U*Math.sin(Y),u.applyForce(Z,{x:Z.position.x,y:Z.position.y},K)}),this},getConstraintLength:function(N){var U=N.pointA.x,Y=N.pointA.y,K=N.pointB.x,Z=N.pointB.y;return N.bodyA&&(U+=N.bodyA.position.x,Y+=N.bodyA.position.y),N.bodyB&&(K+=N.bodyB.position.x,Z+=N.bodyB.position.y),C(U,Y,K,Z)},alignBody:function(N,U,Y,K){N=N.hasOwnProperty("body")?N.body:N;var Z;switch(K){case d.TOP_LEFT:case d.LEFT_TOP:Z=this.bodyBounds.getTopLeft(N,U,Y);break;case d.TOP_CENTER:Z=this.bodyBounds.getTopCenter(N,U,Y);break;case d.TOP_RIGHT:case d.RIGHT_TOP:Z=this.bodyBounds.getTopRight(N,U,Y);break;case d.LEFT_CENTER:Z=this.bodyBounds.getLeftCenter(N,U,Y);break;case d.CENTER:Z=this.bodyBounds.getCenter(N,U,Y);break;case d.RIGHT_CENTER:Z=this.bodyBounds.getRightCenter(N,U,Y);break;case d.LEFT_BOTTOM:case d.BOTTOM_LEFT:Z=this.bodyBounds.getBottomLeft(N,U,Y);break;case d.BOTTOM_CENTER:Z=this.bodyBounds.getBottomCenter(N,U,Y);break;case d.BOTTOM_RIGHT:case d.RIGHT_BOTTOM:Z=this.bodyBounds.getBottomRight(N,U,Y);break}return Z&&u.setPosition(N,Z),this},shutdown:function(){var N=this.systems.events;this.world&&(N.off(X.UPDATE,this.world.update,this.world),N.off(X.POST_UPDATE,this.world.postUpdate,this.world)),N.off(X.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(X.START,this.start,this),this.scene=null,this.systems=null}});V.register("MatterPhysics",B,"matterPhysics"),h.exports=B},73658:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),y=e(56694),c=e(74527),u=e(89980),l=e(72632),r=e(58210),a=e(13747),v=e(93736),o=new y({Extends:a,Mixins:[c.Bounce,c.Collision,c.Force,c.Friction,c.Gravity,c.Mass,c.Sensor,c.SetBody,c.Sleep,c.Static,c.Transform,c.Velocity,r],initialize:function(m,g,x,C,M,R){u.call(this,m.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new d(this),this.setTexture(C,M),this.setSizeToFrame(),this.setOrigin(),this.world=m,this._tempVec2=new v(g,x);var P=l(R,"shape",null);P?this.setBody(P,R):this.setRectangle(this.width,this.height,R),this.setPosition(g,x),this.initPipeline(),this.initPostPipeline(!0)}});h.exports=o},84720:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),y=e(84125),c=e(56694),u=e(74527),l=e(28699),r=e(6659),a=e(72632),v=e(19256),o=e(39745),p=new c({Extends:r,Mixins:[u.Bounce,u.Collision,u.Friction,u.Gravity,u.Mass,u.Sensor,u.Sleep,u.Static],initialize:function(g,x,C){r.call(this),this.tile=x,this.world=g,x.physics.matterBody&&x.physics.matterBody.destroy(),x.physics.matterBody=this;var M=a(C,"body",null),R=a(C,"addToWorld",!0);if(M)this.setBody(M,R);else{var P=x.getCollisionGroup(),w=a(P,"objects",[]);w.length>0?this.setFromTileCollision(C):this.setFromTileRectangle(C)}if(x.flipX||x.flipY){var A={x:x.getCenterX(),y:x.getCenterY()},G=x.flipX?-1:1,O=x.flipY?-1:1;y.scale(M,G,O,A)}},setFromTileRectangle:function(m){m===void 0&&(m={}),v(m,"isStatic")||(m.isStatic=!0),v(m,"addToWorld")||(m.addToWorld=!0);var g=this.tile.getBounds(),x=g.x+g.width/2,C=g.y+g.height/2,M=d.rectangle(x,C,g.width,g.height,m);return this.setBody(M,m.addToWorld),this},setFromTileCollision:function(m){m===void 0&&(m={}),v(m,"isStatic")||(m.isStatic=!0),v(m,"addToWorld")||(m.addToWorld=!0);for(var g=this.tile.tilemapLayer.scaleX,x=this.tile.tilemapLayer.scaleY,C=this.tile.getLeft(),M=this.tile.getTop(),R=this.tile.getCollisionGroup(),P=a(R,"objects",[]),w=[],A=0;A<P.length;A++){var G=P[A],O=C+G.x*g,L=M+G.y*x,I=G.width*g,F=G.height*x,D=null;if(G.rectangle)D=d.rectangle(O+I/2,L+F/2,I,F,m);else if(G.ellipse)D=d.circle(O+I/2,L+F/2,I/2,m);else if(G.polygon||G.polyline){var V=G.polygon?G.polygon:G.polyline,k=V.map(function($){return{x:$.x*g,y:$.y*x}}),W=o.create(k),X=o.centre(W);O+=X.x,L+=X.y,D=d.fromVertices(O,L,W,m)}D&&w.push(D)}if(w.length===1)this.setBody(w[0],m.addToWorld);else if(w.length>1){var H=l(m);H.parts=w,this.setBody(y.create(H),H.addToWorld)}return this},setBody:function(m,g){return g===void 0&&(g=!0),this.body&&this.removeBody(),this.body=m,this.body.gameObject=this,g&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});h.exports=p},10998:(h,S,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),y=e(84125),c=e(68758),u=e(72632),l=e(39745),r={parseBody:function(a,v,o,p){p===void 0&&(p={});for(var m=u(o,"fixtures",[]),g=[],x=0;x<m.length;x++)for(var C=this.parseFixture(m[x]),M=0;M<C.length;M++)g.push(C[M]);var R=c.clone(o,!0);c.extend(R,p,!0),delete R.fixtures,delete R.type;var P=y.create(R);return y.setParts(P,g),y.setPosition(P,{x:a,y:v}),P},parseFixture:function(a){var v=c.extend({},!1,a);delete v.circle,delete v.vertices;var o;if(a.circle){var p=u(a.circle,"x"),m=u(a.circle,"y"),g=u(a.circle,"radius");o=[d.circle(p,m,g,v)]}else a.vertices&&(o=this.parseVertices(a.vertices,v));return o},parseVertices:function(a,v){v===void 0&&(v={});for(var o=[],p=0;p<a.length;p++)l.clockwiseSort(a[p]),o.push(y.create(c.extend({position:l.centre(a[p]),vertices:a[p]},v)));return d.flagCoincidentParts(o)}};h.exports=r},72829:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),y=e(84125),c={parseBody:function(u,l,r,a){a===void 0&&(a={});var v,o=r.vertices;if(o.length===1)a.vertices=o[0],v=y.create(a),d.flagCoincidentParts(v.parts);else{for(var p=[],m=0;m<o.length;m++){var g=y.create({vertices:o[m]});p.push(g)}d.flagCoincidentParts(p),a.parts=p,v=y.create(a)}return v.label=r.label,y.setPosition(v,{x:u,y:l}),v}};h.exports=c},88596:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84091),y=e(56694),c=e(11299),u=e(52838),l=e(13657),r=e(35416),a=e(33963),v=e(30657),o=e(22806),p=e(93736),m=e(39745),g=new y({initialize:function(C,M,R){R===void 0&&(R={});var P={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=C,this.world=M,this.camera=null,this.pointer=null,this.active=!0,this.position=new p,this.body=null,this.part=null,this.constraint=u.create(v(R,P)),this.world.on(r.BEFORE_UPDATE,this.update,this),C.sys.input.on(a.POINTER_DOWN,this.onDown,this),C.sys.input.on(a.POINTER_UP,this.onUp,this)},onDown:function(x){this.pointer||(this.pointer=x,this.camera=x.camera)},onUp:function(x){x===this.pointer&&(this.pointer=null)},getBody:function(x){var C=this.position,M=this.constraint;this.camera.getWorldPoint(x.x,x.y,C);for(var R=c.allBodies(this.world.localWorld),P=0;P<R.length;P++){var w=R[P];if(!w.ignorePointer&&d.contains(w.bounds,C)&&l.canCollide(w.collisionFilter,M.collisionFilter)&&this.hitTestBody(w,C))return this.world.emit(r.DRAG_START,w,this.part,this),!0}return!1},hitTestBody:function(x,C){for(var M=this.constraint,R=x.parts.length,P=R>1?1:0,w=P;w<R;w++){var A=x.parts[w];if(m.contains(A.vertices,C))return M.pointA=C,M.pointB={x:C.x-x.position.x,y:C.y-x.position.y},M.bodyB=x,M.angleB=x.angle,o.set(x,!1),this.part=A,this.body=x,!0}return!1},update:function(){var x=this.pointer,C=this.body;if(!this.active||!x){C&&this.stopDrag();return}if(!x.isDown&&C){this.stopDrag();return}else if(x.isDown){if(!C&&!this.getBody(x))return;C=this.body;var M=this.position,R=this.constraint;this.camera.getWorldPoint(x.x,x.y,M),R.pointA.x=M.x,R.pointA.y=M.y,o.set(C,!1),this.world.emit(r.DRAG,C,this)}},stopDrag:function(){var x=this.body,C=this.constraint;C.bodyB=null,C.pointB=null,this.pointer=null,this.body=null,this.part=null,x&&this.world.emit(r.DRAG_END,x,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(a.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(a.POINTER_UP,this.onUp,this)}});h.exports=g},31468:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),y=e(84125),c=e(56694),u=e(68758),l=e(11299),r=e(45775),a=e(6659),v=e(35416),o=e(72632),p=e(10850),m=e(84125),g=e(39073),x=e(84720),C=e(72005),M=e(10438),R=new c({Extends:a,initialize:function(w,A){a.call(this),this.scene=w,this.engine=r.create(A),this.localWorld=this.engine.world;var G=p(A,"gravity",null);G?this.setGravity(G.x,G.y,G.scale):G===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=p(A,"enabled",!0),this.getDelta=p(A,"getDelta",this.update60Hz);var O=o(A,"runner",{}),L=o(O,"fps",!1),I=o(O,"fps",60),F=o(O,"delta",1e3/I),D=o(O,"deltaMin",1e3/I),V=o(O,"deltaMax",1e3/(I*.5));L||(I=1e3/F),this.runner={fps:I,deltaSampleSize:o(O,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:o(O,"isFixed",!1),delta:F,deltaMin:D,deltaMax:V},this.autoUpdate=p(A,"autoUpdate",!0);var k=p(A,"debug",!1);if(this.drawDebug=typeof k=="object"?!0:k,this.debugGraphic,this.debugConfig={showAxes:o(k,"showAxes",!1),showAngleIndicator:o(k,"showAngleIndicator",!1),angleColor:o(k,"angleColor",15208787),showBroadphase:o(k,"showBroadphase",!1),broadphaseColor:o(k,"broadphaseColor",16757760),showBounds:o(k,"showBounds",!1),boundsColor:o(k,"boundsColor",16777215),showVelocity:o(k,"showVelocity",!1),velocityColor:o(k,"velocityColor",44783),showCollisions:o(k,"showCollisions",!1),collisionColor:o(k,"collisionColor",16094476),showSeparations:o(k,"showSeparations",!1),separationColor:o(k,"separationColor",16753920),showBody:o(k,"showBody",!0),showStaticBody:o(k,"showStaticBody",!0),showInternalEdges:o(k,"showInternalEdges",!1),renderFill:o(k,"renderFill",!1),renderLine:o(k,"renderLine",!0),fillColor:o(k,"fillColor",1075465),fillOpacity:o(k,"fillOpacity",1),lineColor:o(k,"lineColor",2678297),lineOpacity:o(k,"lineOpacity",1),lineThickness:o(k,"lineThickness",1),staticFillColor:o(k,"staticFillColor",857979),staticLineColor:o(k,"staticLineColor",1255396),showSleeping:o(k,"showSleeping",!1),staticBodySleepOpacity:o(k,"staticBodySleepOpacity",.7),sleepFillColor:o(k,"sleepFillColor",4605510),sleepLineColor:o(k,"sleepLineColor",10066585),showSensors:o(k,"showSensors",!0),sensorFillColor:o(k,"sensorFillColor",857979),sensorLineColor:o(k,"sensorLineColor",1255396),showPositions:o(k,"showPositions",!0),positionSize:o(k,"positionSize",4),positionColor:o(k,"positionColor",14697178),showJoint:o(k,"showJoint",!0),jointColor:o(k,"jointColor",14737474),jointLineOpacity:o(k,"jointLineOpacity",1),jointLineThickness:o(k,"jointLineThickness",2),pinSize:o(k,"pinSize",4),pinColor:o(k,"pinColor",4382944),springColor:o(k,"springColor",14697184),anchorColor:o(k,"anchorColor",15724527),anchorSize:o(k,"anchorSize",4),showConvexHulls:o(k,"showConvexHulls",!1),hullColor:o(k,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),o(A,"setBounds",!1)){var W=A.setBounds;if(typeof W=="boolean")this.setBounds();else{var X=o(W,"x",0),H=o(W,"y",0),$=o(W,"width",w.sys.scale.width),z=o(W,"height",w.sys.scale.height),b=o(W,"thickness",64),B=o(W,"left",!0),N=o(W,"right",!0),U=o(W,"top",!0),Y=o(W,"bottom",!0);this.setBounds(X,H,$,z,b,B,N,U,Y)}}},setCompositeRenderStyle:function(P){var w=P.bodies,A=P.constraints,G=P.composites,O,L,I;for(O=0;O<w.length;O++)L=w[O],I=L.render,this.setBodyRenderStyle(L,I.lineColor,I.lineOpacity,I.lineThickness,I.fillColor,I.fillOpacity);for(O=0;O<A.length;O++)L=A[O],I=L.render,this.setConstraintRenderStyle(L,I.lineColor,I.lineOpacity,I.lineThickness,I.pinSize,I.anchorColor,I.anchorSize);for(O=0;O<G.length;O++)L=G[O],this.setCompositeRenderStyle(L);return this},setBodyRenderStyle:function(P,w,A,G,O,L){var I=P.render,F=this.debugConfig;return I?(w==null&&(w=P.isStatic?F.staticLineColor:F.lineColor),A==null&&(A=F.lineOpacity),G==null&&(G=F.lineThickness),O==null&&(O=P.isStatic?F.staticFillColor:F.fillColor),L==null&&(L=F.fillOpacity),w!==!1&&(I.lineColor=w),A!==!1&&(I.lineOpacity=A),G!==!1&&(I.lineThickness=G),O!==!1&&(I.fillColor=O),L!==!1&&(I.fillOpacity=L),this):this},setConstraintRenderStyle:function(P,w,A,G,O,L,I){var F=P.render,D=this.debugConfig;if(!F)return this;if(w==null){var V=F.type;V==="line"?w=D.jointColor:V==="pin"?w=D.pinColor:V==="spring"&&(w=D.springColor)}return A==null&&(A=D.jointLineOpacity),G==null&&(G=D.jointLineThickness),O==null&&(O=D.pinSize),L==null&&(L=D.anchorColor),I==null&&(I=D.anchorSize),w!==!1&&(F.lineColor=w),A!==!1&&(F.lineOpacity=A),G!==!1&&(F.lineThickness=G),O!==!1&&(F.pinSize=O),L!==!1&&(F.anchorColor=L),I!==!1&&(F.anchorSize=I),this},setEventsProxy:function(){var P=this,w=this.engine,A=this.localWorld;this.drawDebug&&(g.on(A,"compositeModified",function(G){P.setCompositeRenderStyle(G)}),g.on(A,"beforeAdd",function(G){for(var O=[].concat(G.object),L=0;L<O.length;L++){var I=O[L],F=I.render;I.type==="body"?P.setBodyRenderStyle(I,F.lineColor,F.lineOpacity,F.lineThickness,F.fillColor,F.fillOpacity):I.type==="composite"?P.setCompositeRenderStyle(I):I.type==="constraint"&&P.setConstraintRenderStyle(I,F.lineColor,F.lineOpacity,F.lineThickness,F.pinSize,F.anchorColor,F.anchorSize)}})),g.on(A,"beforeAdd",function(G){P.emit(v.BEFORE_ADD,G)}),g.on(A,"afterAdd",function(G){P.emit(v.AFTER_ADD,G)}),g.on(A,"beforeRemove",function(G){P.emit(v.BEFORE_REMOVE,G)}),g.on(A,"afterRemove",function(G){P.emit(v.AFTER_REMOVE,G)}),g.on(w,"beforeUpdate",function(G){P.emit(v.BEFORE_UPDATE,G)}),g.on(w,"afterUpdate",function(G){P.emit(v.AFTER_UPDATE,G)}),g.on(w,"collisionStart",function(G){var O=G.pairs,L,I;O.length>0&&(L=O[0].bodyA,I=O[0].bodyB),P.emit(v.COLLISION_START,G,L,I)}),g.on(w,"collisionActive",function(G){var O=G.pairs,L,I;O.length>0&&(L=O[0].bodyA,I=O[0].bodyB),P.emit(v.COLLISION_ACTIVE,G,L,I)}),g.on(w,"collisionEnd",function(G){var O=G.pairs,L,I;O.length>0&&(L=O[0].bodyA,I=O[0].bodyB),P.emit(v.COLLISION_END,G,L,I)})},setBounds:function(P,w,A,G,O,L,I,F,D){return P===void 0&&(P=0),w===void 0&&(w=0),A===void 0&&(A=this.scene.sys.scale.width),G===void 0&&(G=this.scene.sys.scale.height),O===void 0&&(O=64),L===void 0&&(L=!0),I===void 0&&(I=!0),F===void 0&&(F=!0),D===void 0&&(D=!0),this.updateWall(L,"left",P-O,w-O,O,G+O*2),this.updateWall(I,"right",P+A,w-O,O,G+O*2),this.updateWall(F,"top",P,w-O,A,O),this.updateWall(D,"bottom",P,w+G,A,O),this},updateWall:function(P,w,A,G,O,L){var I=this.walls[w];P?(I&&C.remove(this.localWorld,I),A+=O/2,G+=L/2,this.walls[w]=this.create(A,G,O,L,{isStatic:!0,friction:0,frictionStatic:0})):(I&&C.remove(this.localWorld,I),this.walls[w]=null)},createDebugGraphic:function(){var P=this.scene.sys.add.graphics({x:0,y:0});return P.setDepth(Number.MAX_VALUE),this.debugGraphic=P,this.drawDebug=!0,P},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(P,w,A){return P===void 0&&(P=0),w===void 0&&(w=1),A===void 0&&(A=.001),this.localWorld.gravity.x=P,this.localWorld.gravity.y=w,this.localWorld.gravity.scale=A,this},create:function(P,w,A,G,O){var L=d.rectangle(P,w,A,G,O);return C.add(this.localWorld,L),L},add:function(P){return C.add(this.localWorld,P),this},remove:function(P,w){Array.isArray(P)||(P=[P]);for(var A=0;A<P.length;A++){var G=P[A],O=G.body?G.body:G;l.remove(this.localWorld,O,w)}return this},removeConstraint:function(P,w){return l.remove(this.localWorld,P,w),this},convertTilemapLayer:function(P,w){var A=P.layer,G=P.getTilesWithin(0,0,A.width,A.height,{isColliding:!0});return this.convertTiles(G,w),this},convertTiles:function(P,w){if(P.length===0)return this;for(var A=0;A<P.length;A++)new x(this,P[A],w);return this},nextGroup:function(P){return m.nextGroup(P)},nextCategory:function(){return m.nextCategory()},pause:function(){return this.enabled=!1,this.emit(v.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(v.RESUME),this},update:function(P,w){if(!(!this.enabled||!this.autoUpdate)){var A=this.engine,G=this.runner,O=A.timing;G.isFixed?w=this.getDelta(P,w):(w=P-G.timePrev||G.delta,G.timePrev=P,G.deltaHistory.push(w),G.deltaHistory=G.deltaHistory.slice(-G.deltaSampleSize),w=Math.min.apply(null,G.deltaHistory),w=w<G.deltaMin?G.deltaMin:w,w=w>G.deltaMax?G.deltaMax:w,G.delta=w),G.timeScalePrev=O.timeScale,G.frameCounter+=1,P-G.counterTimestamp>=1e3&&(G.fps=G.frameCounter*((P-G.counterTimestamp)/1e3),G.counterTimestamp=P,G.frameCounter=0),r.update(A,w)}},step:function(P){r.update(this.engine,P)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(P){var w=P.hasOwnProperty("body")?P.body:P;return l.get(this.localWorld,w.id,w.type)!==null},getAllBodies:function(){return l.allBodies(this.localWorld)},getAllConstraints:function(){return l.allConstraints(this.localWorld)},getAllComposites:function(){return l.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var P=this.debugConfig,w=this.engine,A=this.debugGraphic,G=l.allBodies(this.localWorld);this.debugGraphic.clear(),P.showBroadphase&&w.broadphase.controller&&this.renderGrid(w.broadphase,A,P.broadphaseColor,.5),P.showBounds&&this.renderBodyBounds(G,A,P.boundsColor,.5),(P.showBody||P.showStaticBody)&&this.renderBodies(G),P.showJoint&&this.renderJoints(),(P.showAxes||P.showAngleIndicator)&&this.renderBodyAxes(G,A,P.showAxes,P.angleColor,.5),P.showVelocity&&this.renderBodyVelocity(G,A,P.velocityColor,1,2),P.showSeparations&&this.renderSeparations(w.pairs.list,A,P.separationColor),P.showCollisions&&this.renderCollisions(w.pairs.list,A,P.collisionColor)}},renderGrid:function(P,w,A,G){w.lineStyle(1,A,G);for(var O=u.keys(P.buckets),L=0;L<O.length;L++){var I=O[L];if(!(P.buckets[I].length<2)){var F=I.split(/C|R/);w.strokeRect(parseInt(F[1],10)*P.bucketWidth,parseInt(F[2],10)*P.bucketHeight,P.bucketWidth,P.bucketHeight)}}return this},renderSeparations:function(P,w,A){w.lineStyle(1,A,1);for(var G=0;G<P.length;G++){var O=P[G];if(O.isActive){var L=O.collision,I=L.bodyA,F=L.bodyB,D=I.position,V=F.position,k=L.penetration,W=!I.isStatic&&!F.isStatic?4:1;F.isStatic&&(W=0),w.lineBetween(V.x,V.y,V.x-k.x*W,V.y-k.y*W),W=!I.isStatic&&!F.isStatic?4:1,I.isStatic&&(W=0),w.lineBetween(D.x,D.y,D.x-k.x*W,D.y-k.y*W)}}return this},renderCollisions:function(P,w,A){w.lineStyle(1,A,.5),w.fillStyle(A,1);var G,O;for(G=0;G<P.length;G++)if(O=P[G],!!O.isActive)for(var L=0;L<O.activeContacts.length;L++){var I=O.activeContacts[L],F=I.vertex;w.fillRect(F.x-2,F.y-2,5,5)}for(G=0;G<P.length;G++)if(O=P[G],!!O.isActive){var D=O.collision,V=O.activeContacts;if(V.length>0){var k=V[0].vertex.x,W=V[0].vertex.y;V.length===2&&(k=(V[0].vertex.x+V[1].vertex.x)/2,W=(V[0].vertex.y+V[1].vertex.y)/2),D.bodyB===D.supports[0].body||D.bodyA.isStatic?w.lineBetween(k-D.normal.x*8,W-D.normal.y*8,k,W):w.lineBetween(k+D.normal.x*8,W+D.normal.y*8,k,W)}}return this},renderBodyBounds:function(P,w,A,G){w.lineStyle(1,A,G);for(var O=0;O<P.length;O++){var L=P[O];if(L.render.visible){var I=L.bounds;if(I)w.strokeRect(I.min.x,I.min.y,I.max.x-I.min.x,I.max.y-I.min.y);else for(var F=L.parts,D=F.length>1?1:0;D<F.length;D++){var V=F[D];w.strokeRect(V.bounds.min.x,V.bounds.min.y,V.bounds.max.x-V.bounds.min.x,V.bounds.max.y-V.bounds.min.y)}}}return this},renderBodyAxes:function(P,w,A,G,O){w.lineStyle(1,G,O);for(var L=0;L<P.length;L++){var I=P[L],F=I.parts;if(I.render.visible){var D,V,k;if(A)for(V=F.length>1?1:0;V<F.length;V++)for(D=F[V],k=0;k<D.axes.length;k++){var W=D.axes[k];w.lineBetween(D.position.x,D.position.y,D.position.x+W.x*20,D.position.y+W.y*20)}else for(V=F.length>1?1:0;V<F.length;V++)for(D=F[V],k=0;k<D.axes.length;k++)w.lineBetween(D.position.x,D.position.y,(D.vertices[0].x+D.vertices[D.vertices.length-1].x)/2,(D.vertices[0].y+D.vertices[D.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(P,w,A,G,O){w.lineStyle(O,A,G);for(var L=0;L<P.length;L++){var I=P[L];I.render.visible&&w.lineBetween(I.position.x,I.position.y,I.position.x+(I.position.x-I.positionPrev.x)*2,I.position.y+(I.position.y-I.positionPrev.y)*2)}return this},renderBodies:function(P){for(var w=this.debugGraphic,A=this.debugConfig,G=A.showBody,O=A.showStaticBody,L=A.showSleeping,I=A.showInternalEdges,F=A.showConvexHulls,D=A.renderFill,V=A.renderLine,k=A.staticBodySleepOpacity,W=A.sleepFillColor,X=A.sleepLineColor,H=A.hullColor,$=0;$<P.length;$++){var z=P[$];if(z.render.visible&&!(!O&&z.isStatic||!G&&!z.isStatic)){var b=z.render.lineColor,B=z.render.lineOpacity,N=z.render.lineThickness,U=z.render.fillColor,Y=z.render.fillOpacity;L&&z.isSleeping&&(z.isStatic?(B*=k,Y*=k):(b=X,U=W)),D||(U=null),V||(b=null),this.renderBody(z,w,I,b,B,N,U,Y);var K=z.parts.length;F&&K>1&&this.renderConvexHull(z,w,H,N)}}},renderBody:function(P,w,A,G,O,L,I,F){G===void 0&&(G=null),O===void 0&&(O=null),L===void 0&&(L=1),I===void 0&&(I=null),F===void 0&&(F=null);for(var D=this.debugConfig,V=D.sensorFillColor,k=D.sensorLineColor,W=P.parts,X=W.length,H=X>1?1:0;H<X;H++){var $=W[H],z=$.render,b=z.opacity;if(!(!z.visible||b===0||$.isSensor&&!D.showSensors)){var B=$.circleRadius;if(w.beginPath(),$.isSensor?(I!==null&&w.fillStyle(V,F*b),G!==null&&w.lineStyle(L,k,O*b)):(I!==null&&w.fillStyle(I,F*b),G!==null&&w.lineStyle(L,G,O*b)),B)w.arc($.position.x,$.position.y,B,0,2*Math.PI);else{var N=$.vertices,U=N.length;w.moveTo(N[0].x,N[0].y);for(var Y=1;Y<U;Y++){var K=N[Y];if(!N[Y-1].isInternal||A?w.lineTo(K.x,K.y):w.moveTo(K.x,K.y),Y<U&&K.isInternal&&!A){var Z=(Y+1)%U;w.moveTo(N[Z].x,N[Z].y)}}w.closePath()}I!==null&&w.fillPath(),G!==null&&w.strokePath()}}if(D.showPositions&&!P.isStatic){var J=P.position.x,Q=P.position.y,j=Math.ceil(D.positionSize/2);w.fillStyle(D.positionColor,1),w.fillRect(J-j,Q-j,D.positionSize,D.positionSize)}return this},renderConvexHull:function(P,w,A,G){G===void 0&&(G=1);var O=P.parts,L=O.length;if(L>1){var I=P.vertices;w.lineStyle(G,A),w.beginPath(),w.moveTo(I[0].x,I[0].y);for(var F=1;F<I.length;F++)w.lineTo(I[F].x,I[F].y);w.lineTo(I[0].x,I[0].y),w.strokePath()}return this},renderJoints:function(){for(var P=this.debugGraphic,w=l.allConstraints(this.localWorld),A=0;A<w.length;A++){var G=w[A].render,O=G.lineColor,L=G.lineOpacity,I=G.lineThickness,F=G.pinSize,D=G.anchorColor,V=G.anchorSize;this.renderConstraint(w[A],P,O,L,I,F,D,V)}},renderConstraint:function(P,w,A,G,O,L,I,F){var D=P.render;if(!D.visible||!P.pointA||!P.pointB)return this;w.lineStyle(O,A,G);var V=P.bodyA,k=P.bodyB,W,X;if(V?W=M.add(V.position,P.pointA):W=P.pointA,D.type==="pin")w.strokeCircle(W.x,W.y,L);else{if(k?X=M.add(k.position,P.pointB):X=P.pointB,w.beginPath(),w.moveTo(W.x,W.y),D.type==="spring")for(var H=M.sub(X,W),$=M.perp(M.normalise(H)),z=Math.ceil(u.clamp(P.length/5,12,20)),b,B=1;B<z;B+=1)b=B%2===0?1:-1,w.lineTo(W.x+H.x*(B/z)+$.x*b*4,W.y+H.y*(B/z)+$.y*b*4);w.lineTo(X.x,X.y)}return w.strokePath(),D.anchors&&F>0&&(w.fillStyle(I),w.fillCircle(W.x,W.y,F),w.fillCircle(X.x,X.y,F)),this},resetCollisionIDs:function(){return y._nextCollidingGroupId=1,y._nextNonCollidingGroupId=-1,y._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),C.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});h.exports=R},95349:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setBounce:function(e){return this.body.restitution=e,this}};h.exports=S},70679:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var d=0;if(!Array.isArray(e))d=e;else for(var y=0;y<e.length;y++)d|=e[y];return this.body.collisionFilter.mask=d,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,d){Array.isArray(e)||(e=[e]);for(var y=0;y<e.length;y++){var c=e[y].hasOwnProperty("body")?e[y].body:e[y];this.body.setOnCollideWith(c,d)}return this}};h.exports=S},77178:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),y={applyForce:function(c){return this._tempVec2.set(this.body.position.x,this.body.position.y),d.applyForce(this.body,this._tempVec2,c),this},applyForceFrom:function(c,u){return d.applyForce(this.body,c,u),this},thrust:function(c){var u=this.body.angle;return this._tempVec2.set(c*Math.cos(u),c*Math.sin(u)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(c){var u=this.body.angle-Math.PI/2;return this._tempVec2.set(c*Math.cos(u),c*Math.sin(u)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(c){var u=this.body.angle+Math.PI/2;return this._tempVec2.set(c*Math.cos(u),c*Math.sin(u)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(c){var u=this.body.angle-Math.PI;return this._tempVec2.set(c*Math.cos(u),c*Math.sin(u)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};h.exports=y},74015:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setFriction:function(e,d,y){return this.body.friction=e,d!==void 0&&(this.body.frictionAir=d),y!==void 0&&(this.body.frictionStatic=y),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};h.exports=S},11535:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};h.exports=S},74497:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),y=e(93736),c={setMass:function(u){return d.setMass(this.body,u),this},setDensity:function(u){return d.setDensity(this.body,u),this},centerOfMass:{get:function(){return new y(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};h.exports=c},75529:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};h.exports=S},64024:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),y=e(84125),c=e(88456),u=e(72632),l=e(10998),r=e(72829),a=e(39745),v={setRectangle:function(o,p,m){return this.setBody({type:"rectangle",width:o,height:p},m)},setCircle:function(o,p){return this.setBody({type:"circle",radius:o},p)},setPolygon:function(o,p,m){return this.setBody({type:"polygon",sides:p,radius:o},m)},setTrapezoid:function(o,p,m,g){return this.setBody({type:"trapezoid",width:o,height:p,slope:m},g)},setExistingBody:function(o,p){p===void 0&&(p=!0),this.body&&this.world.remove(this.body,!0),this.body=o;for(var m=0;m<o.parts.length;m++)o.parts[m].gameObject=this;var g=this;if(o.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},p&&(this.world.has(o)&&this.world.remove(o,!0),this.world.add(o)),this._originComponent){var x=o.render.sprite.xOffset,C=o.render.sprite.yOffset,M=o.centerOfMass.x,R=o.centerOfMass.y;if(c(M,.5)&&c(R,.5))this.setOrigin(x+.5,C+.5);else{var P=o.centerOffset.x,w=o.centerOffset.y;this.setOrigin(x+P/this.displayWidth,C+w/this.displayHeight)}}return this},setBody:function(o,p){if(!o)return this;var m;typeof o=="string"&&(o={type:o});var g=u(o,"type","rectangle"),x=u(o,"x",this._tempVec2.x),C=u(o,"y",this._tempVec2.y),M=u(o,"width",this.width),R=u(o,"height",this.height);switch(g){case"rectangle":m=d.rectangle(x,C,M,R,p);break;case"circle":var P=u(o,"radius",Math.max(M,R)/2),w=u(o,"maxSides",25);m=d.circle(x,C,P,p,w);break;case"trapezoid":var A=u(o,"slope",.5);m=d.trapezoid(x,C,M,R,A,p);break;case"polygon":var G=u(o,"sides",5),O=u(o,"radius",Math.max(M,R)/2);m=d.polygon(x,C,G,O,p);break;case"fromVertices":case"fromVerts":var L=u(o,"verts",null);if(L)if(typeof L=="string"&&(L=a.fromPath(L)),this.body&&!this.body.hasOwnProperty("temp"))y.setVertices(this.body,L),m=this.body;else{var I=u(o,"flagInternal",!1),F=u(o,"removeCollinear",.01),D=u(o,"minimumArea",10);m=d.fromVertices(x,C,L,p,I,F,D)}break;case"fromPhysicsEditor":m=l.parseBody(x,C,o,p);break;case"fromPhysicsTracer":m=r.parseBody(x,C,o,p);break}return m&&this.setExistingBody(m,o.addToWorld),this}};h.exports=v},25106:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(35416),y=e(22806),c=e(39073),u={setToSleep:function(){return y.set(this.body,!0),this},setAwake:function(){return y.set(this.body,!1),this},setSleepThreshold:function(l){return l===void 0&&(l=60),this.body.sleepThreshold=l,this},setSleepEvents:function(l,r){return this.setSleepStartEvent(l),this.setSleepEndEvent(r),this},setSleepStartEvent:function(l){if(l){var r=this.world;c.on(this.body,"sleepStart",function(a){r.emit(d.SLEEP_START,a,this)})}else c.off(this.body,"sleepStart");return this},setSleepEndEvent:function(l){if(l){var r=this.world;c.on(this.body,"sleepEnd",function(a){r.emit(d.SLEEP_END,a,this)})}else c.off(this.body,"sleepEnd");return this}};h.exports=u},82884:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),y={setStatic:function(c){return d.setStatic(this.body,c),this},isStatic:function(){return this.body.isStatic}};h.exports=y},4753:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),y=e(83392),c=e(35786),u=e(62138),l=4,r={x:{get:function(){return this.body.position.x},set:function(a){this._tempVec2.set(a,this.y),d.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(a){this._tempVec2.set(this.x,a),d.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(a){var v=1/this._scaleX,o=1/this._scaleY;this._scaleX=a,this._scaleX===0?this.renderFlags&=~l:this.renderFlags|=l,d.scale(this.body,v,o),d.scale(this.body,a,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(a){var v=1/this._scaleX,o=1/this._scaleY;this._scaleY=a,this._scaleY===0?this.renderFlags&=~l:this.renderFlags|=l,d.scale(this.body,v,o),d.scale(this.body,this._scaleX,a)}},angle:{get:function(){return u(this.body.angle*y.RAD_TO_DEG)},set:function(a){this.rotation=u(a)*y.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(a){this._rotation=c(a),d.setAngle(this.body,this._rotation)}},setPosition:function(a,v){return a===void 0&&(a=0),v===void 0&&(v=a),this._tempVec2.set(a,v),d.setPosition(this.body,this._tempVec2),this},setRotation:function(a){return a===void 0&&(a=0),this._rotation=c(a),d.setAngle(this.body,a),this},setFixedRotation:function(){return d.setInertia(this.body,1/0),this},setAngle:function(a){return a===void 0&&(a=0),this.angle=a,d.setAngle(this.body,this.rotation),this},setScale:function(a,v,o){a===void 0&&(a=1),v===void 0&&(v=a);var p=1/this._scaleX,m=1/this._scaleY;return this._scaleX=a,this._scaleY=v,d.scale(this.body,p,m,o),d.scale(this.body,a,v,o),this}};h.exports=r},37268:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),y={setVelocityX:function(c){return this._tempVec2.set(c,this.body.velocity.y),d.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(c){return this._tempVec2.set(this.body.velocity.x,c),d.setVelocity(this.body,this._tempVec2),this},setVelocity:function(c,u){return this._tempVec2.set(c,u),d.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return d.getVelocity(this.body)},setAngularVelocity:function(c){return d.setAngularVelocity(this.body,c),this},getAngularVelocity:function(){return d.getAngularVelocity(this.body)},setAngularSpeed:function(c){return d.setAngularSpeed(this.body,c),this},getAngularSpeed:function(){return d.getAngularSpeed(this.body)}};h.exports=y},74527:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Bounce:e(95349),Collision:e(70679),Force:e(77178),Friction:e(74015),Gravity:e(11535),Mass:e(74497),Sensor:e(75529),SetBody:e(64024),Sleep:e(25106),Static:e(82884),Transform:e(4753),Velocity:e(37268)}},63201:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="afteradd"},30474:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="afterremove"},44822:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="afterupdate"},88820:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="beforeadd"},94849:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="beforeremove"},6391:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="beforeupdate"},96738:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collisionactive"},7916:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collisionend"},59529:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="collisionstart"},10219:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragend"},183:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="drag"},39143:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="dragstart"},16483:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},35806:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},22106:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="sleepend"},5803:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="sleepstart"},35416:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AFTER_ADD:e(63201),AFTER_REMOVE:e(30474),AFTER_UPDATE:e(44822),BEFORE_ADD:e(88820),BEFORE_REMOVE:e(94849),BEFORE_UPDATE:e(6391),COLLISION_ACTIVE:e(96738),COLLISION_END:e(7916),COLLISION_START:e(59529),DRAG_END:e(10219),DRAG:e(183),DRAG_START:e(39143),PAUSE:e(16483),RESUME:e(35806),SLEEP_END:e(22106),SLEEP_START:e(5803)}},45949:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BodyBounds:e(63568),Components:e(74527),Events:e(35416),Factory:e(72653),MatterGameObject:e(3860),Image:e(7030),Matter:e(18171),MatterPhysics:e(50583),PolyDecomp:e(81084),Sprite:e(73658),TileBody:e(84720),PhysicsEditorParser:e(10998),PhysicsJSONParser:e(72829),PointerConstraint:e(88596),World:e(31468)}},84125:(h,S,e)=>{var d={};h.exports=d;var y=e(39745),c=e(10438),u=e(22806),l=e(68758),r=e(84091),a=e(50658);(function(){d._timeCorrection=!0,d._inertiaScale=4,d._nextCollidingGroupId=1,d._nextNonCollidingGroupId=-1,d._nextCategory=1,d._baseDelta=16.666666666666668,d.create=function(o){var p={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!o.hasOwnProperty("position")&&o.hasOwnProperty("vertices")?o.position=y.centre(o.vertices):o.hasOwnProperty("vertices")||(p.vertices=y.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var m=l.extend(p,o);return v(m,o),m.setOnCollideWith=function(g,x){return x?this.onCollideWith[g.id]=x:delete this.onCollideWith[g.id],this},m},d.nextGroup=function(o){return o?d._nextNonCollidingGroupId--:d._nextCollidingGroupId++},d.nextCategory=function(){return d._nextCategory=d._nextCategory<<1,d._nextCategory};var v=function(o,p){if(p=p||{},d.set(o,{bounds:o.bounds||r.create(o.vertices),positionPrev:o.positionPrev||c.clone(o.position),anglePrev:o.anglePrev||o.angle,vertices:o.vertices,parts:o.parts||[o],isStatic:o.isStatic,isSleeping:o.isSleeping,parent:o.parent||o}),y.rotate(o.vertices,o.angle,o.position),a.rotate(o.axes,o.angle),r.update(o.bounds,o.vertices,o.velocity),d.set(o,{axes:p.axes||o.axes,area:p.area||o.area,mass:p.mass||o.mass,inertia:p.inertia||o.inertia}),o.parts.length===1){var m=o.bounds,g=o.centerOfMass,x=o.centerOffset,C=m.max.x-m.min.x,M=m.max.y-m.min.y;g.x=-(m.min.x-o.position.x)/C,g.y=-(m.min.y-o.position.y)/M,x.x=C*g.x,x.y=M*g.y}};d.set=function(o,p,m){var g;typeof p=="string"&&(g=p,p={},p[g]=m);for(g in p)if(Object.prototype.hasOwnProperty.call(p,g))switch(m=p[g],g){case"isStatic":d.setStatic(o,m);break;case"isSleeping":u.set(o,m);break;case"mass":d.setMass(o,m);break;case"density":d.setDensity(o,m);break;case"inertia":d.setInertia(o,m);break;case"vertices":d.setVertices(o,m);break;case"position":d.setPosition(o,m);break;case"angle":d.setAngle(o,m);break;case"velocity":d.setVelocity(o,m);break;case"angularVelocity":d.setAngularVelocity(o,m);break;case"speed":d.setSpeed(o,m);break;case"angularSpeed":d.setAngularSpeed(o,m);break;case"parts":d.setParts(o,m);break;case"centre":d.setCentre(o,m);break;default:o[g]=m}},d.setStatic=function(o,p){for(var m=0;m<o.parts.length;m++){var g=o.parts[m];p?(g.isStatic||(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia}),g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null),g.isStatic=p}},d.setMass=function(o,p){var m=o.inertia/(o.mass/6);o.inertia=m*(p/6),o.inverseInertia=1/o.inertia,o.mass=p,o.inverseMass=1/o.mass,o.density=o.mass/o.area},d.setDensity=function(o,p){d.setMass(o,p*o.area),o.density=p},d.setInertia=function(o,p){o.inertia=p,o.inverseInertia=1/o.inertia},d.setVertices=function(o,p){p[0].body===o?o.vertices=p:o.vertices=y.create(p,o),o.axes=a.fromVertices(o.vertices),o.area=y.area(o.vertices),d.setMass(o,o.density*o.area);var m=y.centre(o.vertices);y.translate(o.vertices,m,-1),d.setInertia(o,d._inertiaScale*y.inertia(o.vertices,o.mass)),y.translate(o.vertices,o.position),r.update(o.bounds,o.vertices,o.velocity)},d.setParts=function(o,p,m){var g;for(p=p.slice(0),o.parts.length=0,o.parts.push(o),o.parent=o,g=0;g<p.length;g++){var x=p[g];x!==o&&(x.parent=o,o.parts.push(x))}if(o.parts.length!==1){if(m=typeof m<"u"?m:!0,m){var C=[];for(g=0;g<p.length;g++)C=C.concat(p[g].vertices);y.clockwiseSort(C);var M=y.hull(C),R=y.centre(M);d.setVertices(o,M),y.translate(o.vertices,R)}var P=d._totalProperties(o),w=P.centre.x,A=P.centre.y,G=o.bounds,O=o.centerOfMass,L=o.centerOffset;r.update(G,o.vertices,o.velocity),O.x=-(G.min.x-w)/(G.max.x-G.min.x),O.y=-(G.min.y-A)/(G.max.y-G.min.y),L.x=w,L.y=A,o.area=P.area,o.parent=o,o.position.x=w,o.position.y=A,o.positionPrev.x=w,o.positionPrev.y=A,d.setMass(o,P.mass),d.setInertia(o,P.inertia),d.setPosition(o,P.centre)}},d.setCentre=function(o,p,m){m?(o.positionPrev.x+=p.x,o.positionPrev.y+=p.y,o.position.x+=p.x,o.position.y+=p.y):(o.positionPrev.x=p.x-(o.position.x-o.positionPrev.x),o.positionPrev.y=p.y-(o.position.y-o.positionPrev.y),o.position.x=p.x,o.position.y=p.y)},d.setPosition=function(o,p,m){var g=c.sub(p,o.position);m?(o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.velocity.x=g.x,o.velocity.y=g.y,o.speed=c.magnitude(g)):(o.positionPrev.x+=g.x,o.positionPrev.y+=g.y);for(var x=0;x<o.parts.length;x++){var C=o.parts[x];C.position.x+=g.x,C.position.y+=g.y,y.translate(C.vertices,g),r.update(C.bounds,C.vertices,o.velocity)}},d.setAngle=function(o,p,m){var g=p-o.angle;m?(o.anglePrev=o.angle,o.angularVelocity=g,o.angularSpeed=Math.abs(g)):o.anglePrev+=g;for(var x=0;x<o.parts.length;x++){var C=o.parts[x];C.angle+=g,y.rotate(C.vertices,g,o.position),a.rotate(C.axes,g),r.update(C.bounds,C.vertices,o.velocity),x>0&&c.rotateAbout(C.position,g,o.position,C.position)}},d.setVelocity=function(o,p){var m=o.deltaTime/d._baseDelta;o.positionPrev.x=o.position.x-p.x*m,o.positionPrev.y=o.position.y-p.y*m,o.velocity.x=(o.position.x-o.positionPrev.x)/m,o.velocity.y=(o.position.y-o.positionPrev.y)/m,o.speed=c.magnitude(o.velocity)},d.getVelocity=function(o){var p=d._baseDelta/o.deltaTime;return{x:(o.position.x-o.positionPrev.x)*p,y:(o.position.y-o.positionPrev.y)*p}},d.getSpeed=function(o){return c.magnitude(d.getVelocity(o))},d.setSpeed=function(o,p){d.setVelocity(o,c.mult(c.normalise(d.getVelocity(o)),p))},d.setAngularVelocity=function(o,p){var m=o.deltaTime/d._baseDelta;o.anglePrev=o.angle-p*m,o.angularVelocity=(o.angle-o.anglePrev)/m,o.angularSpeed=Math.abs(o.angularVelocity)},d.getAngularVelocity=function(o){return(o.angle-o.anglePrev)*d._baseDelta/o.deltaTime},d.getAngularSpeed=function(o){return Math.abs(d.getAngularVelocity(o))},d.setAngularSpeed=function(o,p){d.setAngularVelocity(o,l.sign(d.getAngularVelocity(o))*p)},d.translate=function(o,p,m){d.setPosition(o,c.add(o.position,p),m)},d.rotate=function(o,p,m,g){if(!m)d.setAngle(o,o.angle+p,g);else{var x=Math.cos(p),C=Math.sin(p),M=o.position.x-m.x,R=o.position.y-m.y;d.setPosition(o,{x:m.x+(M*x-R*C),y:m.y+(M*C+R*x)},g),d.setAngle(o,o.angle+p,g)}},d.scale=function(o,p,m,g){var x=0,C=0;g=g||o.position;for(var M=0;M<o.parts.length;M++){var R=o.parts[M];R.scale.x=p,R.scale.y=m,y.scale(R.vertices,p,m,g),R.axes=a.fromVertices(R.vertices),R.area=y.area(R.vertices),d.setMass(R,o.density*R.area),y.translate(R.vertices,{x:-R.position.x,y:-R.position.y}),d.setInertia(R,d._inertiaScale*y.inertia(R.vertices,R.mass)),y.translate(R.vertices,{x:R.position.x,y:R.position.y}),M>0&&(x+=R.area,C+=R.inertia),R.position.x=g.x+(R.position.x-g.x)*p,R.position.y=g.y+(R.position.y-g.y)*m,r.update(R.bounds,R.vertices,o.velocity)}o.parts.length>1&&(o.area=x,o.isStatic||(d.setMass(o,o.density*x),d.setInertia(o,C))),o.circleRadius&&(p===m?o.circleRadius*=p:o.circleRadius=null)},d.update=function(o,p){p=(typeof p<"u"?p:16.666666666666668)*o.timeScale;var m=p*p,g=d._timeCorrection?p/(o.deltaTime||p):1,x=1-o.frictionAir*(p/l._baseDelta),C=(o.position.x-o.positionPrev.x)*g,M=(o.position.y-o.positionPrev.y)*g;o.velocity.x=C*x+o.force.x/o.mass*m,o.velocity.y=M*x+o.force.y/o.mass*m,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.position.x+=o.velocity.x,o.position.y+=o.velocity.y,o.deltaTime=p,o.angularVelocity=(o.angle-o.anglePrev)*x*g+o.torque/o.inertia*m,o.anglePrev=o.angle,o.angle+=o.angularVelocity,o.speed=c.magnitude(o.velocity),o.angularSpeed=Math.abs(o.angularVelocity);for(var R=0;R<o.parts.length;R++){var P=o.parts[R];y.translate(P.vertices,o.velocity),R>0&&(P.position.x+=o.velocity.x,P.position.y+=o.velocity.y),o.angularVelocity!==0&&(y.rotate(P.vertices,o.angularVelocity,o.position),a.rotate(P.axes,o.angularVelocity),R>0&&c.rotateAbout(P.position,o.angularVelocity,o.position,P.position)),r.update(P.bounds,P.vertices,o.velocity)}},d.updateVelocities=function(o){var p=d._baseDelta/o.deltaTime,m=o.velocity;m.x=(o.position.x-o.positionPrev.x)*p,m.y=(o.position.y-o.positionPrev.y)*p,o.speed=Math.sqrt(m.x*m.x+m.y*m.y),o.angularVelocity=(o.angle-o.anglePrev)*p,o.angularSpeed=Math.abs(o.angularVelocity)},d.applyForce=function(o,p,m){var g={x:p.x-o.position.x,y:p.y-o.position.y};o.force.x+=m.x,o.force.y+=m.y,o.torque+=g.x*m.y-g.y*m.x},d._totalProperties=function(o){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},m=o.parts.length===1?0:1;m<o.parts.length;m++){var g=o.parts[m],x=g.mass!==1/0?g.mass:1;p.mass+=x,p.area+=g.area,p.inertia+=g.inertia,p.centre=c.add(p.centre,c.mult(g.position,x))}return p.centre=c.div(p.centre,p.mass),p}})()},11299:(h,S,e)=>{var d={};h.exports=d;var y=e(39073),c=e(68758),u=e(84091),l=e(84125);(function(){d.create=function(r){return c.extend({id:c.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},d.setModified=function(r,a,v,o){if(y.trigger(r,"compositeModified",r),r.isModified=a,a&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),v&&r.parent&&d.setModified(r.parent,a,v,o),o)for(var p=0;p<r.composites.length;p++){var m=r.composites[p];d.setModified(m,a,v,o)}},d.add=function(r,a){var v=[].concat(a);y.trigger(r,"beforeAdd",{object:a});for(var o=0;o<v.length;o++){var p=v[o];switch(p.type){case"body":if(p.parent!==p){c.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}d.addBody(r,p);break;case"constraint":d.addConstraint(r,p);break;case"composite":d.addComposite(r,p);break;case"mouseConstraint":d.addConstraint(r,p.constraint);break}}return y.trigger(r,"afterAdd",{object:a}),r},d.remove=function(r,a,v){var o=[].concat(a);y.trigger(r,"beforeRemove",{object:a});for(var p=0;p<o.length;p++){var m=o[p];switch(m.type){case"body":d.removeBody(r,m,v);break;case"constraint":d.removeConstraint(r,m,v);break;case"composite":d.removeComposite(r,m,v);break;case"mouseConstraint":d.removeConstraint(r,m.constraint);break}}return y.trigger(r,"afterRemove",{object:a}),r},d.addComposite=function(r,a){return r.composites.push(a),a.parent=r,d.setModified(r,!0,!0,!1),r},d.removeComposite=function(r,a,v){var o=c.indexOf(r.composites,a);if(o!==-1&&d.removeCompositeAt(r,o),v)for(var p=0;p<r.composites.length;p++)d.removeComposite(r.composites[p],a,!0);return r},d.removeCompositeAt=function(r,a){return r.composites.splice(a,1),d.setModified(r,!0,!0,!1),r},d.addBody=function(r,a){return r.bodies.push(a),d.setModified(r,!0,!0,!1),r},d.removeBody=function(r,a,v){var o=c.indexOf(r.bodies,a);if(o!==-1&&d.removeBodyAt(r,o),v)for(var p=0;p<r.composites.length;p++)d.removeBody(r.composites[p],a,!0);return r},d.removeBodyAt=function(r,a){return r.bodies.splice(a,1),d.setModified(r,!0,!0,!1),r},d.addConstraint=function(r,a){return r.constraints.push(a),d.setModified(r,!0,!0,!1),r},d.removeConstraint=function(r,a,v){var o=c.indexOf(r.constraints,a);if(o!==-1&&d.removeConstraintAt(r,o),v)for(var p=0;p<r.composites.length;p++)d.removeConstraint(r.composites[p],a,!0);return r},d.removeConstraintAt=function(r,a){return r.constraints.splice(a,1),d.setModified(r,!0,!0,!1),r},d.clear=function(r,a,v){if(v)for(var o=0;o<r.composites.length;o++)d.clear(r.composites[o],a,!0);return a?r.bodies=r.bodies.filter(function(p){return p.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,d.setModified(r,!0,!0,!1),r},d.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var a=[].concat(r.bodies),v=0;v<r.composites.length;v++)a=a.concat(d.allBodies(r.composites[v]));return r.cache&&(r.cache.allBodies=a),a},d.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var a=[].concat(r.constraints),v=0;v<r.composites.length;v++)a=a.concat(d.allConstraints(r.composites[v]));return r.cache&&(r.cache.allConstraints=a),a},d.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var a=[].concat(r.composites),v=0;v<r.composites.length;v++)a=a.concat(d.allComposites(r.composites[v]));return r.cache&&(r.cache.allComposites=a),a},d.get=function(r,a,v){var o,p;switch(v){case"body":o=d.allBodies(r);break;case"constraint":o=d.allConstraints(r);break;case"composite":o=d.allComposites(r).concat(r);break}return o?(p=o.filter(function(m){return m.id.toString()===a.toString()}),p.length===0?null:p[0]):null},d.move=function(r,a,v){return d.remove(r,a),d.add(v,a),r},d.rebase=function(r){for(var a=d.allBodies(r).concat(d.allConstraints(r)).concat(d.allComposites(r)),v=0;v<a.length;v++)a[v].id=c.nextId();return r},d.translate=function(r,a,v){for(var o=v?d.allBodies(r):r.bodies,p=0;p<o.length;p++)l.translate(o[p],a);return r},d.rotate=function(r,a,v,o){for(var p=Math.cos(a),m=Math.sin(a),g=o?d.allBodies(r):r.bodies,x=0;x<g.length;x++){var C=g[x],M=C.position.x-v.x,R=C.position.y-v.y;l.setPosition(C,{x:v.x+(M*p-R*m),y:v.y+(M*m+R*p)}),l.rotate(C,a)}return r},d.scale=function(r,a,v,o,p){for(var m=p?d.allBodies(r):r.bodies,g=0;g<m.length;g++){var x=m[g],C=x.position.x-o.x,M=x.position.y-o.y;l.setPosition(x,{x:o.x+C*a,y:o.y+M*v}),l.scale(x,a,v)}return r},d.bounds=function(r){for(var a=d.allBodies(r),v=[],o=0;o<a.length;o+=1){var p=a[o];v.push(p.bounds.min,p.bounds.max)}return u.create(v)}})()},72005:(h,S,e)=>{var d={};h.exports=d;var y=e(11299);(function(){d.create=y.create,d.add=y.add,d.remove=y.remove,d.clear=y.clear,d.addComposite=y.addComposite,d.addBody=y.addBody,d.addConstraint=y.addConstraint})()},63454:(h,S,e)=>{var d={};h.exports=d;var y=e(39745),c=e(70584);(function(){var u=[],l={overlap:0,axis:null},r={overlap:0,axis:null};d.create=function(a,v){return{pair:null,collided:!1,bodyA:a,bodyB:v,parentA:a.parent,parentB:v.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},d.collides=function(a,v,o){if(d._overlapAxes(l,a.vertices,v.vertices,a.axes),l.overlap<=0||(d._overlapAxes(r,v.vertices,a.vertices,v.axes),r.overlap<=0))return null;var p=o&&o.table[c.id(a,v)],m;p?m=p.collision:(m=d.create(a,v),m.collided=!0,m.bodyA=a.id<v.id?a:v,m.bodyB=a.id<v.id?v:a,m.parentA=m.bodyA.parent,m.parentB=m.bodyB.parent),a=m.bodyA,v=m.bodyB;var g;l.overlap<r.overlap?g=l:g=r;var x=m.normal,C=m.supports,M=g.axis,R=M.x,P=M.y;R*(v.position.x-a.position.x)+P*(v.position.y-a.position.y)<0?(x.x=R,x.y=P):(x.x=-R,x.y=-P),m.tangent.x=-x.y,m.tangent.y=x.x,m.depth=g.overlap,m.penetration.x=x.x*m.depth,m.penetration.y=x.y*m.depth;var w=d._findSupports(a,v,x,1),A=0;if(y.contains(a.vertices,w[0])&&(C[A++]=w[0]),y.contains(a.vertices,w[1])&&(C[A++]=w[1]),A<2){var G=d._findSupports(v,a,x,-1);y.contains(v.vertices,G[0])&&(C[A++]=G[0]),A<2&&y.contains(v.vertices,G[1])&&(C[A++]=G[1])}return A===0&&(C[A++]=w[0]),C.length=A,m},d._overlapAxes=function(a,v,o,p){var m=v.length,g=o.length,x=v[0].x,C=v[0].y,M=o[0].x,R=o[0].y,P=p.length,w=Number.MAX_VALUE,A=0,G,O,L,I,F,D;for(F=0;F<P;F++){var V=p[F],k=V.x,W=V.y,X=x*k+C*W,H=M*k+R*W,$=X,z=H;for(D=1;D<m;D+=1)I=v[D].x*k+v[D].y*W,I>$?$=I:I<X&&(X=I);for(D=1;D<g;D+=1)I=o[D].x*k+o[D].y*W,I>z?z=I:I<H&&(H=I);if(O=$-H,L=z-X,G=O<L?O:L,G<w&&(w=G,A=F,G<=0))break}a.axis=p[A],a.overlap=w},d._projectToAxis=function(a,v,o){for(var p=v[0].x*o.x+v[0].y*o.y,m=p,g=1;g<v.length;g+=1){var x=v[g].x*o.x+v[g].y*o.y;x>m?m=x:x<p&&(p=x)}a.min=p,a.max=m},d._findSupports=function(a,v,o,p){var m=v.vertices,g=m.length,x=a.position.x,C=a.position.y,M=o.x*p,R=o.y*p,P=Number.MAX_VALUE,w,A,G,O,L;for(L=0;L<g;L+=1)A=m[L],O=M*(x-A.x)+R*(C-A.y),O<P&&(P=O,w=A);return G=m[(g+w.index-1)%g],P=M*(x-G.x)+R*(C-G.y),A=m[(w.index+1)%g],M*(x-A.x)+R*(C-A.y)<P?(u[0]=w,u[1]=A,u):(u[0]=w,u[1]=G,u)}})()},17319:h=>{var S={};h.exports=S,function(){S.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},13657:(h,S,e)=>{var d={};h.exports=d;var y=e(68758),c=e(63454);(function(){d.create=function(u){var l={bodies:[],pairs:null};return y.extend(l,u)},d.setBodies=function(u,l){u.bodies=l.slice(0)},d.clear=function(u){u.bodies=[]},d.collisions=function(u){var l=[],r=u.pairs,a=u.bodies,v=a.length,o=d.canCollide,p=c.collides,m,g;for(a.sort(d._compareBoundsX),m=0;m<v;m++){var x=a[m],C=x.bounds,M=x.bounds.max.x,R=x.bounds.max.y,P=x.bounds.min.y,w=x.isStatic||x.isSleeping,A=x.parts.length,G=A===1;for(g=m+1;g<v;g++){var O=a[g],L=O.bounds;if(L.min.x>M)break;if(!(R<L.min.y||P>L.max.y)&&!(w&&(O.isStatic||O.isSleeping))&&o(x.collisionFilter,O.collisionFilter)){var I=O.parts.length;if(G&&I===1){var F=p(x,O,r);F&&l.push(F)}else for(var D=A>1?1:0,V=I>1?1:0,k=D;k<A;k++)for(var W=x.parts[k],C=W.bounds,X=V;X<I;X++){var H=O.parts[X],L=H.bounds;if(!(C.min.x>L.max.x||C.max.x<L.min.x||C.max.y<L.min.y||C.min.y>L.max.y)){var F=p(W,H,r);F&&l.push(F)}}}}}return l},d.canCollide=function(u,l){return u.group===l.group&&u.group!==0?u.group>0:(u.mask&l.category)!==0&&(l.mask&u.category)!==0},d._compareBoundsX=function(u,l){return u.bounds.min.x-l.bounds.min.x}})()},70584:(h,S,e)=>{var d={};h.exports=d;var y=e(17319);(function(){d.create=function(c,u){var l=c.bodyA,r=c.bodyB,a={id:d.id(l,r),bodyA:l,bodyB:r,collision:c,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:l.isSensor||r.isSensor,timeCreated:u,timeUpdated:u,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return d.update(a,c,u),a},d.update=function(c,u,l){var r=c.contacts,a=u.supports,v=c.activeContacts,o=u.parentA,p=u.parentB,m=o.vertices.length;c.isActive=!0,c.timeUpdated=l,c.collision=u,c.separation=u.depth,c.inverseMass=o.inverseMass+p.inverseMass,c.friction=o.friction<p.friction?o.friction:p.friction,c.frictionStatic=o.frictionStatic>p.frictionStatic?o.frictionStatic:p.frictionStatic,c.restitution=o.restitution>p.restitution?o.restitution:p.restitution,c.slop=o.slop>p.slop?o.slop:p.slop,u.pair=c,v.length=0;for(var g=0;g<a.length;g++){var x=a[g],C=x.body===o?x.index:m+x.index,M=r[C];M?v.push(M):v.push(r[C]=y.create(x))}},d.setActive=function(c,u,l){u?(c.isActive=!0,c.timeUpdated=l):(c.isActive=!1,c.activeContacts.length=0)},d.id=function(c,u){return c.id<u.id?"A"+c.id+"B"+u.id:"A"+u.id+"B"+c.id}})()},91327:(h,S,e)=>{var d={};h.exports=d;var y=e(70584),c=e(68758);(function(){d.create=function(u){return c.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},u)},d.update=function(u,l,r){var a=u.list,v=a.length,o=u.table,p=l.length,m=u.collisionStart,g=u.collisionEnd,x=u.collisionActive,C,M,R,P;for(m.length=0,g.length=0,x.length=0,P=0;P<v;P++)a[P].confirmedActive=!1;for(P=0;P<p;P++)C=l[P],R=C.pair,R?(R.isActive?x.push(R):m.push(R),y.update(R,C,r),R.confirmedActive=!0):(R=y.create(C,r),o[R.id]=R,m.push(R),a.push(R));var w=[];for(v=a.length,P=0;P<v;P++)R=a[P],R.confirmedActive||(y.setActive(R,!1,r),g.push(R),!R.collision.bodyA.isSleeping&&!R.collision.bodyB.isSleeping&&w.push(P));for(P=0;P<w.length;P++)M=w[P]-P,R=a[M],a.splice(M,1),delete o[R.id]},d.clear=function(u){return u.table={},u.list.length=0,u.collisionStart.length=0,u.collisionActive.length=0,u.collisionEnd.length=0,u}})()},13390:(h,S,e)=>{var d={};h.exports=d;var y=e(10438),c=e(63454),u=e(84091),l=e(68516),r=e(39745);(function(){d.collides=function(a,v){for(var o=[],p=v.length,m=a.bounds,g=c.collides,x=u.overlaps,C=0;C<p;C++){var M=v[C],R=M.parts.length,P=R===1?0:1;if(a!==M&&x(M.bounds,m))for(var w=P;w<R;w++){var A=M.parts[w];if(x(A.bounds,m)){var G=g(A,a);if(G){o.push(G);break}}}}return o},d.ray=function(a,v,o,p){p=p||1e-100;for(var m=y.angle(v,o),g=y.magnitude(y.sub(v,o)),x=(o.x+v.x)*.5,C=(o.y+v.y)*.5,M=l.rectangle(x,C,g,p,{angle:m}),R=d.collides(M,a),P=0;P<R.length;P+=1){var w=R[P];w.body=w.bodyB=w.bodyA}return R},d.region=function(a,v,o){for(var p=[],m=0;m<a.length;m++){var g=a[m],x=u.overlaps(g.bounds,v);(x&&!o||!x&&o)&&p.push(g)}return p},d.point=function(a,v){for(var o=[],p=0;p<a.length;p++){var m=a[p];if(u.contains(m.bounds,v))for(var g=m.parts.length===1?0:1;g<m.parts.length;g++){var x=m.parts[g];if(u.contains(x.bounds,v)&&r.contains(x.vertices,v)){o.push(m);break}}}return o}})()},44272:(h,S,e)=>{var d={};h.exports=d;var y=e(39745),c=e(68758),u=e(84091);(function(){d._restingThresh=2,d._restingThreshTangent=Math.sqrt(6),d._positionDampen=.9,d._positionWarming=.8,d._frictionNormalMultiplier=5,d._frictionMaxStatic=Number.MAX_VALUE,d.preSolvePosition=function(l){var r,a,v,o=l.length;for(r=0;r<o;r++)a=l[r],a.isActive&&(v=a.activeContacts.length,a.collision.parentA.totalContacts+=v,a.collision.parentB.totalContacts+=v)},d.solvePosition=function(l,r,a){var v,o,p,m,g,x,C,M,R=d._positionDampen*(a||1),P=c.clamp(r/c._baseDelta,0,1),w=l.length;for(v=0;v<w;v++)o=l[v],!(!o.isActive||o.isSensor)&&(p=o.collision,m=p.parentA,g=p.parentB,x=p.normal,o.separation=x.x*(g.positionImpulse.x+p.penetration.x-m.positionImpulse.x)+x.y*(g.positionImpulse.y+p.penetration.y-m.positionImpulse.y));for(v=0;v<w;v++)o=l[v],!(!o.isActive||o.isSensor)&&(p=o.collision,m=p.parentA,g=p.parentB,x=p.normal,M=o.separation-o.slop*P,(m.isStatic||g.isStatic)&&(M*=2),m.isStatic||m.isSleeping||(C=R/m.totalContacts,m.positionImpulse.x+=x.x*M*C,m.positionImpulse.y+=x.y*M*C),g.isStatic||g.isSleeping||(C=R/g.totalContacts,g.positionImpulse.x-=x.x*M*C,g.positionImpulse.y-=x.y*M*C))},d.postSolvePosition=function(l){for(var r=d._positionWarming,a=l.length,v=y.translate,o=u.update,p=0;p<a;p++){var m=l[p],g=m.positionImpulse,x=g.x,C=g.y,M=m.velocity;if(m.totalContacts=0,x!==0||C!==0){for(var R=0;R<m.parts.length;R++){var P=m.parts[R];v(P.vertices,g),o(P.bounds,P.vertices,M),P.position.x+=x,P.position.y+=C}m.positionPrev.x+=x,m.positionPrev.y+=C,x*M.x+C*M.y<0?(g.x=0,g.y=0):(g.x*=r,g.y*=r)}}},d.preSolveVelocity=function(l){var r=l.length,a,v;for(a=0;a<r;a++){var o=l[a];if(!(!o.isActive||o.isSensor)){var p=o.activeContacts,m=p.length,g=o.collision,x=g.parentA,C=g.parentB,M=g.normal,R=g.tangent;for(v=0;v<m;v++){var P=p[v],w=P.vertex,A=P.normalImpulse,G=P.tangentImpulse;if(A!==0||G!==0){var O=M.x*A+R.x*G,L=M.y*A+R.y*G;x.isStatic||x.isSleeping||(x.positionPrev.x+=O*x.inverseMass,x.positionPrev.y+=L*x.inverseMass,x.anglePrev+=x.inverseInertia*((w.x-x.position.x)*L-(w.y-x.position.y)*O)),C.isStatic||C.isSleeping||(C.positionPrev.x-=O*C.inverseMass,C.positionPrev.y-=L*C.inverseMass,C.anglePrev-=C.inverseInertia*((w.x-C.position.x)*L-(w.y-C.position.y)*O))}}}}},d.solveVelocity=function(l,r){var a=r/c._baseDelta,v=a*a,o=v*a,p=-d._restingThresh*a,m=d._restingThreshTangent,g=d._frictionNormalMultiplier*a,x=d._frictionMaxStatic,C=l.length,M,R,P,w;for(P=0;P<C;P++){var A=l[P];if(!(!A.isActive||A.isSensor)){var G=A.collision,O=G.parentA,L=G.parentB,I=O.velocity,F=L.velocity,D=G.normal.x,V=G.normal.y,k=G.tangent.x,W=G.tangent.y,X=A.activeContacts,H=X.length,$=1/H,z=O.inverseMass+L.inverseMass,b=A.friction*A.frictionStatic*g;for(I.x=O.position.x-O.positionPrev.x,I.y=O.position.y-O.positionPrev.y,F.x=L.position.x-L.positionPrev.x,F.y=L.position.y-L.positionPrev.y,O.angularVelocity=O.angle-O.anglePrev,L.angularVelocity=L.angle-L.anglePrev,w=0;w<H;w++){var B=X[w],N=B.vertex,U=N.x-O.position.x,Y=N.y-O.position.y,K=N.x-L.position.x,Z=N.y-L.position.y,J=I.x-Y*O.angularVelocity,Q=I.y+U*O.angularVelocity,j=F.x-Z*L.angularVelocity,q=F.y+K*L.angularVelocity,tt=J-j,_=Q-q,it=D*tt+V*_,rt=k*tt+W*_,at=A.separation+it,ot=Math.min(at,1);ot=at<0?0:ot;var et=ot*b;rt<-et||rt>et?(R=rt>0?rt:-rt,M=A.friction*(rt>0?1:-1)*o,M<-R?M=-R:M>R&&(M=R)):(M=rt,R=x);var nt=U*V-Y*D,st=K*V-Z*D,ut=$/(z+O.inverseInertia*nt*nt+L.inverseInertia*st*st),lt=(1+A.restitution)*it*ut;if(M*=ut,it<p)B.normalImpulse=0;else{var pt=B.normalImpulse;B.normalImpulse+=lt,B.normalImpulse>0&&(B.normalImpulse=0),lt=B.normalImpulse-pt}if(rt<-m||rt>m)B.tangentImpulse=0;else{var ct=B.tangentImpulse;B.tangentImpulse+=M,B.tangentImpulse<-R&&(B.tangentImpulse=-R),B.tangentImpulse>R&&(B.tangentImpulse=R),M=B.tangentImpulse-ct}var ft=D*lt+k*M,dt=V*lt+W*M;O.isStatic||O.isSleeping||(O.positionPrev.x+=ft*O.inverseMass,O.positionPrev.y+=dt*O.inverseMass,O.anglePrev+=(U*dt-Y*ft)*O.inverseInertia),L.isStatic||L.isSleeping||(L.positionPrev.x-=ft*L.inverseMass,L.positionPrev.y-=dt*L.inverseMass,L.anglePrev-=(K*dt-Z*ft)*L.inverseInertia)}}}}})()},52838:(h,S,e)=>{var d={};h.exports=d;var y=e(39745),c=e(10438),u=e(22806),l=e(84091),r=e(50658),a=e(68758);(function(){d._warming=.4,d._torqueDampen=1,d._minLength=1e-6,d.create=function(v){var o=v;o.bodyA&&!o.pointA&&(o.pointA={x:0,y:0}),o.bodyB&&!o.pointB&&(o.pointB={x:0,y:0});var p=o.bodyA?c.add(o.bodyA.position,o.pointA):o.pointA,m=o.bodyB?c.add(o.bodyB.position,o.pointB):o.pointB,g=c.magnitude(c.sub(p,m));o.length=typeof o.length<"u"?o.length:g,o.id=o.id||a.nextId(),o.label=o.label||"Constraint",o.type="constraint",o.stiffness=o.stiffness||(o.length>0?1:.7),o.damping=o.damping||0,o.angularStiffness=o.angularStiffness||0,o.angleA=o.bodyA?o.bodyA.angle:o.angleA,o.angleB=o.bodyB?o.bodyB.angle:o.angleB,o.plugin={};var x={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return o.length===0&&o.stiffness>.1?(x.type="pin",x.anchors=!1):o.stiffness<.9&&(x.type="spring"),o.render=a.extend(x,o.render),o},d.preSolveAll=function(v){for(var o=0;o<v.length;o+=1){var p=v[o],m=p.constraintImpulse;p.isStatic||m.x===0&&m.y===0&&m.angle===0||(p.position.x+=m.x,p.position.y+=m.y,p.angle+=m.angle)}},d.solveAll=function(v,o){for(var p=a.clamp(o/a._baseDelta,0,1),m=0;m<v.length;m+=1){var g=v[m],x=!g.bodyA||g.bodyA&&g.bodyA.isStatic,C=!g.bodyB||g.bodyB&&g.bodyB.isStatic;(x||C)&&d.solve(v[m],p)}for(m=0;m<v.length;m+=1)g=v[m],x=!g.bodyA||g.bodyA&&g.bodyA.isStatic,C=!g.bodyB||g.bodyB&&g.bodyB.isStatic,!x&&!C&&d.solve(v[m],p)},d.solve=function(v,o){var p=v.bodyA,m=v.bodyB,g=v.pointA,x=v.pointB;if(!(!p&&!m)){p&&!p.isStatic&&(c.rotate(g,p.angle-v.angleA,g),v.angleA=p.angle),m&&!m.isStatic&&(c.rotate(x,m.angle-v.angleB,x),v.angleB=m.angle);var C=g,M=x;if(p&&(C=c.add(p.position,g)),m&&(M=c.add(m.position,x)),!(!C||!M)){var R=c.sub(C,M),P=c.magnitude(R);P<d._minLength&&(P=d._minLength);var w=(P-v.length)/P,A=v.stiffness>=1||v.length===0,G=A?v.stiffness*o:v.stiffness*o*o,O=v.damping*o,L=c.mult(R,w*G),I=(p?p.inverseMass:0)+(m?m.inverseMass:0),F=(p?p.inverseInertia:0)+(m?m.inverseInertia:0),D=I+F,V,k,W,X,H;if(O>0){var $=c.create();W=c.div(R,P),H=c.sub(m&&c.sub(m.position,m.positionPrev)||$,p&&c.sub(p.position,p.positionPrev)||$),X=c.dot(W,H)}p&&!p.isStatic&&(k=p.inverseMass/I,p.constraintImpulse.x-=L.x*k,p.constraintImpulse.y-=L.y*k,p.position.x-=L.x*k,p.position.y-=L.y*k,O>0&&(p.positionPrev.x-=O*W.x*X*k,p.positionPrev.y-=O*W.y*X*k),V=c.cross(g,L)/D*d._torqueDampen*p.inverseInertia*(1-v.angularStiffness),p.constraintImpulse.angle-=V,p.angle-=V),m&&!m.isStatic&&(k=m.inverseMass/I,m.constraintImpulse.x+=L.x*k,m.constraintImpulse.y+=L.y*k,m.position.x+=L.x*k,m.position.y+=L.y*k,O>0&&(m.positionPrev.x+=O*W.x*X*k,m.positionPrev.y+=O*W.y*X*k),V=c.cross(x,L)/D*d._torqueDampen*m.inverseInertia*(1-v.angularStiffness),m.constraintImpulse.angle+=V,m.angle+=V)}}},d.postSolveAll=function(v){for(var o=0;o<v.length;o++){var p=v[o],m=p.constraintImpulse;if(!(p.isStatic||m.x===0&&m.y===0&&m.angle===0)){u.set(p,!1);for(var g=0;g<p.parts.length;g++){var x=p.parts[g];y.translate(x.vertices,m),g>0&&(x.position.x+=m.x,x.position.y+=m.y),m.angle!==0&&(y.rotate(x.vertices,m.angle,p.position),r.rotate(x.axes,m.angle),g>0&&c.rotateAbout(x.position,m.angle,p.position,x.position)),l.update(x.bounds,x.vertices,p.velocity)}m.angle*=d._warming,m.x*=d._warming,m.y*=d._warming}}},d.pointAWorld=function(v){return{x:(v.bodyA?v.bodyA.position.x:0)+(v.pointA?v.pointA.x:0),y:(v.bodyA?v.bodyA.position.y:0)+(v.pointA?v.pointA.y:0)}},d.pointBWorld=function(v){return{x:(v.bodyB?v.bodyB.position.x:0)+(v.pointB?v.pointB.x:0),y:(v.bodyB?v.bodyB.position.y:0)+(v.pointB?v.pointB.y:0)}},d.currentLength=function(v){var o=(v.bodyA?v.bodyA.position.x:0)+(v.pointA?v.pointA.x:0),p=(v.bodyA?v.bodyA.position.y:0)+(v.pointA?v.pointA.y:0),m=(v.bodyB?v.bodyB.position.x:0)+(v.pointB?v.pointB.x:0),g=(v.bodyB?v.bodyB.position.y:0)+(v.pointB?v.pointB.y:0),x=o-m,C=p-g;return Math.sqrt(x*x+C*C)}})()},68758:(h,S,e)=>{var d={};h.exports=d,function(){d._baseDelta=16.666666666666668,d._nextId=0,d._seed=0,d._nowStartTime=+new Date,d._warnedOnce={},d._decomp=null,d.extend=function(c,u){var l,r;typeof u=="boolean"?(l=2,r=u):(l=1,r=!0);for(var a=l;a<arguments.length;a++){var v=arguments[a];if(v)for(var o in v)r&&v[o]&&v[o].constructor===Object&&(!c[o]||c[o].constructor===Object)?(c[o]=c[o]||{},d.extend(c[o],r,v[o])):c[o]=v[o]}return c},d.clone=function(c,u){return d.extend({},u,c)},d.keys=function(c){if(Object.keys)return Object.keys(c);var u=[];for(var l in c)u.push(l);return u},d.values=function(c){var u=[];if(Object.keys){for(var l=Object.keys(c),r=0;r<l.length;r++)u.push(c[l[r]]);return u}for(var a in c)u.push(c[a]);return u},d.get=function(c,u,l,r){u=u.split(".").slice(l,r);for(var a=0;a<u.length;a+=1)c=c[u[a]];return c},d.set=function(c,u,l,r,a){var v=u.split(".").slice(r,a);return d.get(c,u,0,-1)[v[v.length-1]]=l,l},d.shuffle=function(c){for(var u=c.length-1;u>0;u--){var l=Math.floor(d.random()*(u+1)),r=c[u];c[u]=c[l],c[l]=r}return c},d.choose=function(c){return c[Math.floor(d.random()*c.length)]},d.isElement=function(c){return typeof HTMLElement<"u"?c instanceof HTMLElement:!!(c&&c.nodeType&&c.nodeName)},d.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},d.isFunction=function(c){return typeof c=="function"},d.isPlainObject=function(c){return typeof c=="object"&&c.constructor===Object},d.isString=function(c){return toString.call(c)==="[object String]"},d.clamp=function(c,u,l){return c<u?u:c>l?l:c},d.sign=function(c){return c<0?-1:1},d.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-d._nowStartTime},d.random=function(c,u){return c=typeof c<"u"?c:0,u=typeof u<"u"?u:1,c+y()*(u-c)};var y=function(){return d._seed=(d._seed*9301+49297)%233280,d._seed/233280};d.colorToNumber=function(c){return c=c.replace("#",""),c.length==3&&(c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2)),parseInt(c,16)},d.logLevel=1,d.log=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.info=function(){console&&d.logLevel>0&&d.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warn=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warnOnce=function(){var c=Array.prototype.slice.call(arguments).join(" ");d._warnedOnce[c]||(d.warn(c),d._warnedOnce[c]=!0)},d.deprecated=function(c,u,l){c[u]=d.chain(function(){d.warnOnce(" deprecated ",l)},c[u])},d.nextId=function(){return d._nextId++},d.indexOf=function(c,u){if(c.indexOf)return c.indexOf(u);for(var l=0;l<c.length;l++)if(c[l]===u)return l;return-1},d.map=function(c,u){if(c.map)return c.map(u);for(var l=[],r=0;r<c.length;r+=1)l.push(u(c[r]));return l},d.topologicalSort=function(c){var u=[],l=[],r=[];for(var a in c)!l[a]&&!r[a]&&d._topologicalSort(a,l,r,c,u);return u},d._topologicalSort=function(c,u,l,r,a){var v=r[c]||[];l[c]=!0;for(var o=0;o<v.length;o+=1){var p=v[o];l[p]||u[p]||d._topologicalSort(p,u,l,r,a)}l[c]=!1,u[c]=!0,a.push(c)},d.chain=function(){for(var c=[],u=0;u<arguments.length;u+=1){var l=arguments[u];l._chained?c.push.apply(c,l._chained):c.push(l)}var r=function(){for(var a,v=new Array(arguments.length),o=0,p=arguments.length;o<p;o++)v[o]=arguments[o];for(o=0;o<c.length;o+=1){var m=c[o].apply(a,v);typeof m<"u"&&(a=m)}return a};return r._chained=c,r},d.chainPathBefore=function(c,u,l){return d.set(c,u,d.chain(l,d.get(c,u)))},d.chainPathAfter=function(c,u,l){return d.set(c,u,d.chain(d.get(c,u),l))},d.setDecomp=function(c){d._decomp=c},d.getDecomp=function(){var c=d._decomp;try{!c&&typeof window<"u"&&(c=window.decomp),!c&&typeof e.g<"u"&&(c=e.g.decomp)}catch{c=null}return c}}()},45775:(h,S,e)=>{var d={};h.exports=d;var y=e(22806),c=e(44272),u=e(13657),l=e(91327),r=e(39073),a=e(11299),v=e(52838),o=e(68758),p=e(84125);(function(){d.create=function(m){m=m||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},x=o.extend(g,m);return x.world=m.world||a.create({label:"World"}),x.pairs=m.pairs||l.create(),x.detector=m.detector||u.create(),x.grid={buckets:[]},x.world.gravity=x.gravity,x.broadphase=x.grid,x.metrics={},x},d.update=function(m,g){var x=o.now(),C=m.world,M=m.detector,R=m.pairs,P=m.timing,w=P.timestamp,A;g=typeof g<"u"?g:o._baseDelta,g*=P.timeScale,P.timestamp+=g,P.lastDelta=g;var G={timestamp:P.timestamp,delta:g};r.trigger(m,"beforeUpdate",G);var O=a.allBodies(C),L=a.allConstraints(C);for(C.isModified&&(u.setBodies(M,O),a.setModified(C,!1,!1,!0)),m.enableSleeping&&y.update(O,g),d._bodiesApplyGravity(O,m.gravity),g>0&&d._bodiesUpdate(O,g),r.trigger(m,"beforeSolve",G),v.preSolveAll(O),A=0;A<m.constraintIterations;A++)v.solveAll(L,g);v.postSolveAll(O),M.pairs=m.pairs;var I=u.collisions(M);l.update(R,I,w),m.enableSleeping&&y.afterCollisions(R.list),R.collisionStart.length>0&&r.trigger(m,"collisionStart",{pairs:R.collisionStart,timestamp:P.timestamp,delta:g});var F=o.clamp(20/m.positionIterations,0,1);for(c.preSolvePosition(R.list),A=0;A<m.positionIterations;A++)c.solvePosition(R.list,g,F);for(c.postSolvePosition(O),v.preSolveAll(O),A=0;A<m.constraintIterations;A++)v.solveAll(L,g);for(v.postSolveAll(O),c.preSolveVelocity(R.list),A=0;A<m.velocityIterations;A++)c.solveVelocity(R.list,g);return d._bodiesUpdateVelocities(O),R.collisionActive.length>0&&r.trigger(m,"collisionActive",{pairs:R.collisionActive,timestamp:P.timestamp,delta:g}),R.collisionEnd.length>0&&r.trigger(m,"collisionEnd",{pairs:R.collisionEnd,timestamp:P.timestamp,delta:g}),d._bodiesClearForces(O),r.trigger(m,"afterUpdate",G),m.timing.lastElapsed=o.now()-x,m},d.merge=function(m,g){if(o.extend(m,g),g.world){m.world=g.world,d.clear(m);for(var x=a.allBodies(m.world),C=0;C<x.length;C++){var M=x[C];y.set(M,!1),M.id=o.nextId()}}},d.clear=function(m){l.clear(m.pairs),u.clear(m.detector)},d._bodiesClearForces=function(m){for(var g=m.length,x=0;x<g;x++){var C=m[x];C.force.x=0,C.force.y=0,C.torque=0}},d._bodiesApplyGravity=function(m,g){var x=typeof g.scale<"u"?g.scale:.001,C=m.length;if(!(g.x===0&&g.y===0||x===0))for(var M=0;M<C;M++){var R=m[M];R.isStatic||R.isSleeping||(R.force.y+=R.mass*g.y*x,R.force.x+=R.mass*g.x*x)}},d._bodiesUpdate=function(m,g){for(var x=m.length,C=0;C<x;C++){var M=m[C];M.isStatic||M.isSleeping||p.update(M,g)}},d._bodiesUpdateVelocities=function(m){for(var g=m.length,x=0;x<g;x++)p.updateVelocities(m[x])}})()},39073:(h,S,e)=>{var d={};h.exports=d;var y=e(68758);(function(){d.on=function(c,u,l){for(var r=u.split(" "),a,v=0;v<r.length;v++)a=r[v],c.events=c.events||{},c.events[a]=c.events[a]||[],c.events[a].push(l);return l},d.off=function(c,u,l){if(!u){c.events={};return}typeof u=="function"&&(l=u,u=y.keys(c.events).join(" "));for(var r=u.split(" "),a=0;a<r.length;a++){var v=c.events[r[a]],o=[];if(l&&v)for(var p=0;p<v.length;p++)v[p]!==l&&o.push(v[p]);c.events[r[a]]=o}},d.trigger=function(c,u,l){var r,a,v,o,p=c.events;if(p&&y.keys(p).length>0){l||(l={}),r=u.split(" ");for(var m=0;m<r.length;m++)if(a=r[m],v=p[a],v){o=y.clone(l,!1),o.name=a,o.source=c;for(var g=0;g<v.length;g++)v[g].apply(c,[o])}}}})()},16929:(h,S,e)=>{var d={};h.exports=d;var y=e(84474),c=e(68758);(function(){d.name="matter-js",d.version="0.19.0",d.uses=[],d.used=[],d.use=function(){y.use(d,Array.prototype.slice.call(arguments))},d.before=function(u,l){return u=u.replace(/^Matter./,""),c.chainPathBefore(d,u,l)},d.after=function(u,l){return u=u.replace(/^Matter./,""),c.chainPathAfter(d,u,l)}})()},84474:(h,S,e)=>{var d={};h.exports=d;var y=e(68758);(function(){d._registry={},d.register=function(c){if(d.isPlugin(c)||y.warn("Plugin.register:",d.toString(c),"does not implement all required fields."),c.name in d._registry){var u=d._registry[c.name],l=d.versionParse(c.version).number,r=d.versionParse(u.version).number;l>r?(y.warn("Plugin.register:",d.toString(u),"was upgraded to",d.toString(c)),d._registry[c.name]=c):l<r?y.warn("Plugin.register:",d.toString(u),"can not be downgraded to",d.toString(c)):c!==u&&y.warn("Plugin.register:",d.toString(c),"is already registered to different plugin object")}else d._registry[c.name]=c;return c},d.resolve=function(c){return d._registry[d.dependencyParse(c).name]},d.toString=function(c){return typeof c=="string"?c:(c.name||"anonymous")+"@"+(c.version||c.range||"0.0.0")},d.isPlugin=function(c){return c&&c.name&&c.version&&c.install},d.isUsed=function(c,u){return c.used.indexOf(u)>-1},d.isFor=function(c,u){var l=c.for&&d.dependencyParse(c.for);return!c.for||u.name===l.name&&d.versionSatisfies(u.version,l.range)},d.use=function(c,u){if(c.uses=(c.uses||[]).concat(u||[]),c.uses.length===0){y.warn("Plugin.use:",d.toString(c),"does not specify any dependencies to install.");return}for(var l=d.dependencies(c),r=y.topologicalSort(l),a=[],v=0;v<r.length;v+=1)if(r[v]!==c.name){var o=d.resolve(r[v]);if(!o){a.push(" "+r[v]);continue}d.isUsed(c,o.name)||(d.isFor(o,c)||(y.warn("Plugin.use:",d.toString(o),"is for",o.for,"but installed on",d.toString(c)+"."),o._warned=!0),o.install?o.install(c):(y.warn("Plugin.use:",d.toString(o),"does not specify an install function."),o._warned=!0),o._warned?(a.push(" "+d.toString(o)),delete o._warned):a.push(" "+d.toString(o)),c.used.push(o.name))}a.length>0&&!o.silent&&y.info(a.join("  "))},d.dependencies=function(c,u){var l=d.dependencyParse(c),r=l.name;if(u=u||{},!(r in u)){c=d.resolve(c)||c,u[r]=y.map(c.uses||[],function(v){d.isPlugin(v)&&d.register(v);var o=d.dependencyParse(v),p=d.resolve(v);return p&&!d.versionSatisfies(p.version,o.range)?(y.warn("Plugin.dependencies:",d.toString(p),"does not satisfy",d.toString(o),"used by",d.toString(l)+"."),p._warned=!0,c._warned=!0):p||(y.warn("Plugin.dependencies:",d.toString(v),"used by",d.toString(l),"could not be resolved."),c._warned=!0),o.name});for(var a=0;a<u[r].length;a+=1)d.dependencies(u[r][a],u);return u}},d.dependencyParse=function(c){if(y.isString(c)){var u=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return u.test(c)||y.warn("Plugin.dependencyParse:",c,"is not a valid dependency string."),{name:c.split("@")[0],range:c.split("@")[1]||"*"}}return{name:c.name,range:c.range||c.version}},d.versionParse=function(c){var u=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;u.test(c)||y.warn("Plugin.versionParse:",c,"is not a valid version or range.");var l=u.exec(c),r=Number(l[4]),a=Number(l[5]),v=Number(l[6]);return{isRange:!!(l[1]||l[2]),version:l[3],range:c,operator:l[1]||l[2]||"",major:r,minor:a,patch:v,parts:[r,a,v],prerelease:l[7],number:r*1e8+a*1e4+v}},d.versionSatisfies=function(c,u){u=u||"*";var l=d.versionParse(u),r=d.versionParse(c);if(l.isRange){if(l.operator==="*"||c==="*")return!0;if(l.operator===">")return r.number>l.number;if(l.operator===">=")return r.number>=l.number;if(l.operator==="~")return r.major===l.major&&r.minor===l.minor&&r.patch>=l.patch;if(l.operator==="^")return l.major>0?r.major===l.major&&r.number>=l.number:l.minor>0?r.minor===l.minor&&r.patch>=l.patch:r.patch===l.patch}return c===u||c==="*"}})()},22806:(h,S,e)=>{var d={};h.exports=d;var y=e(84125),c=e(39073),u=e(68758);(function(){d._motionWakeThreshold=.18,d._motionSleepThreshold=.08,d._minBias=.9,d.update=function(l,r){for(var a=r/u._baseDelta,v=d._motionSleepThreshold,o=0;o<l.length;o++){var p=l[o],m=y.getSpeed(p),g=y.getAngularSpeed(p),x=m*m+g*g;if(p.force.x!==0||p.force.y!==0){d.set(p,!1);continue}var C=Math.min(p.motion,x),M=Math.max(p.motion,x);p.motion=d._minBias*C+(1-d._minBias)*M,p.sleepThreshold>0&&p.motion<v?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/a&&d.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},d.afterCollisions=function(l){for(var r=d._motionSleepThreshold,a=0;a<l.length;a++){var v=l[a];if(v.isActive){var o=v.collision,p=o.bodyA.parent,m=o.bodyB.parent;if(!(p.isSleeping&&m.isSleeping||p.isStatic||m.isStatic)&&(p.isSleeping||m.isSleeping)){var g=p.isSleeping&&!p.isStatic?p:m,x=g===p?m:p;!g.isStatic&&x.motion>r&&d.set(g,!1)}}}},d.set=function(l,r){var a=l.isSleeping;r?(l.isSleeping=!0,l.sleepCounter=l.sleepThreshold,l.positionImpulse.x=0,l.positionImpulse.y=0,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.anglePrev=l.angle,l.speed=0,l.angularSpeed=0,l.motion=0,a||c.trigger(l,"sleepStart")):(l.isSleeping=!1,l.sleepCounter=0,a&&c.trigger(l,"sleepEnd"))}})()},68516:(h,S,e)=>{var d={};h.exports=d;var y=e(39745),c=e(68758),u=e(84125),l=e(84091),r=e(10438);(function(){d.rectangle=function(a,v,o,p,m){m=m||{};var g={label:"Rectangle Body",position:{x:a,y:v},vertices:y.fromPath("L 0 0 L "+o+" 0 L "+o+" "+p+" L 0 "+p)};if(m.chamfer){var x=m.chamfer;g.vertices=y.chamfer(g.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete m.chamfer}return u.create(c.extend({},g,m))},d.trapezoid=function(a,v,o,p,m,g){g=g||{},m*=.5;var x=(1-m*2)*o,C=o*m,M=C+x,R=M+C,P;m<.5?P="L 0 0 L "+C+" "+-p+" L "+M+" "+-p+" L "+R+" 0":P="L 0 0 L "+M+" "+-p+" L "+R+" 0";var w={label:"Trapezoid Body",position:{x:a,y:v},vertices:y.fromPath(P)};if(g.chamfer){var A=g.chamfer;w.vertices=y.chamfer(w.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete g.chamfer}return u.create(c.extend({},w,g))},d.circle=function(a,v,o,p,m){p=p||{};var g={label:"Circle Body",circleRadius:o};m=m||25;var x=Math.ceil(Math.max(10,Math.min(m,o)));return x%2===1&&(x+=1),d.polygon(a,v,x,o,c.extend({},g,p))},d.polygon=function(a,v,o,p,m){if(m=m||{},o<3)return d.circle(a,v,p,m);for(var g=2*Math.PI/o,x="",C=g*.5,M=0;M<o;M+=1){var R=C+M*g,P=Math.cos(R)*p,w=Math.sin(R)*p;x+="L "+P.toFixed(3)+" "+w.toFixed(3)+" "}var A={label:"Polygon Body",position:{x:a,y:v},vertices:y.fromPath(x)};if(m.chamfer){var G=m.chamfer;A.vertices=y.chamfer(A.vertices,G.radius,G.quality,G.qualityMin,G.qualityMax),delete m.chamfer}return u.create(c.extend({},A,m))},d.fromVertices=function(a,v,o,p,m,g,x,C){var M=c.getDecomp(),R,P,w,A,G,O,L,I,F,D,V;for(R=!!(M&&M.quickDecomp),p=p||{},w=[],m=typeof m<"u"?m:!1,g=typeof g<"u"?g:.01,x=typeof x<"u"?x:10,C=typeof C<"u"?C:.01,c.isArray(o[0])||(o=[o]),D=0;D<o.length;D+=1)if(O=o[D],A=y.isConvex(O),G=!A,G&&!R&&c.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),A||!R)A?O=y.clockwiseSort(O):O=y.hull(O),w.push({position:{x:a,y:v},vertices:O});else{var k=O.map(function(K){return[K.x,K.y]});M.makeCCW(k),g!==!1&&M.removeCollinearPoints(k,g),C!==!1&&M.removeDuplicatePoints&&M.removeDuplicatePoints(k,C);var W=M.quickDecomp(k);for(L=0;L<W.length;L++){var X=W[L],H=X.map(function(K){return{x:K[0],y:K[1]}});x>0&&y.area(H)<x||w.push({position:y.centre(H),vertices:H})}}for(L=0;L<w.length;L++)w[L]=u.create(c.extend(w[L],p));if(m){var $=5;for(L=0;L<w.length;L++){var z=w[L];for(I=L+1;I<w.length;I++){var b=w[I];if(l.overlaps(z.bounds,b.bounds)){var B=z.vertices,N=b.vertices;for(F=0;F<z.vertices.length;F++)for(V=0;V<b.vertices.length;V++){var U=r.magnitudeSquared(r.sub(B[(F+1)%B.length],N[V])),Y=r.magnitudeSquared(r.sub(B[F],N[(V+1)%N.length]));U<$&&Y<$&&(B[F].isInternal=!0,N[V].isInternal=!0)}}}}}return w.length>1?(P=u.create(c.extend({parts:w.slice(0)},p)),u.setPosition(P,{x:a,y:v}),P):w[0]},d.flagCoincidentParts=function(a,v){v===void 0&&(v=5);for(var o=0;o<a.length;o++)for(var p=a[o],m=o+1;m<a.length;m++){var g=a[m];if(l.overlaps(p.bounds,g.bounds))for(var x=p.vertices,C=g.vertices,M=0;M<p.vertices.length;M++)for(var R=0;R<g.vertices.length;R++){var P=r.magnitudeSquared(r.sub(x[(M+1)%x.length],C[R])),w=r.magnitudeSquared(r.sub(x[M],C[(R+1)%C.length]));P<v&&w<v&&(x[M].isInternal=!0,C[R].isInternal=!0)}}return a}})()},56643:(h,S,e)=>{var d={};h.exports=d;var y=e(11299),c=e(52838),u=e(68758),l=e(84125),r=e(68516);(function(){d.stack=function(a,v,o,p,m,g,x){for(var C=y.create({label:"Stack"}),M=a,R=v,P,w=0,A=0;A<p;A++){for(var G=0,O=0;O<o;O++){var L=x(M,R,O,A,P,w);if(L){var I=L.bounds.max.y-L.bounds.min.y,F=L.bounds.max.x-L.bounds.min.x;I>G&&(G=I),l.translate(L,{x:F*.5,y:I*.5}),M=L.bounds.max.x+m,y.addBody(C,L),P=L,w+=1}else M+=m}R+=G+g,M=a}return C},d.chain=function(a,v,o,p,m,g){for(var x=a.bodies,C=1;C<x.length;C++){var M=x[C-1],R=x[C],P=M.bounds.max.y-M.bounds.min.y,w=M.bounds.max.x-M.bounds.min.x,A=R.bounds.max.y-R.bounds.min.y,G=R.bounds.max.x-R.bounds.min.x,O={bodyA:M,pointA:{x:w*v,y:P*o},bodyB:R,pointB:{x:G*p,y:A*m}},L=u.extend(O,g);y.addConstraint(a,c.create(L))}return a.label+=" Chain",a},d.mesh=function(a,v,o,p,m){var g=a.bodies,x,C,M,R,P;for(x=0;x<o;x++){for(C=1;C<v;C++)M=g[C-1+x*v],R=g[C+x*v],y.addConstraint(a,c.create(u.extend({bodyA:M,bodyB:R},m)));if(x>0)for(C=0;C<v;C++)M=g[C+(x-1)*v],R=g[C+x*v],y.addConstraint(a,c.create(u.extend({bodyA:M,bodyB:R},m))),p&&C>0&&(P=g[C-1+(x-1)*v],y.addConstraint(a,c.create(u.extend({bodyA:P,bodyB:R},m)))),p&&C<v-1&&(P=g[C+1+(x-1)*v],y.addConstraint(a,c.create(u.extend({bodyA:P,bodyB:R},m))))}return a.label+=" Mesh",a},d.pyramid=function(a,v,o,p,m,g,x){return d.stack(a,v,o,p,m,g,function(C,M,R,P,w,A){var G=Math.min(p,Math.ceil(o/2)),O=w?w.bounds.max.x-w.bounds.min.x:0;if(!(P>G)){P=G-P;var L=P,I=o-1-P;if(!(R<L||R>I)){A===1&&l.translate(w,{x:(R+(o%2===1?1:-1))*O,y:0});var F=w?R*O:0;return x(a+F+R*m,M,R,P,w,A)}}})},d.newtonsCradle=function(a,v,o,p,m){for(var g=y.create({label:"Newtons Cradle"}),x=0;x<o;x++){var C=1.9,M=r.circle(a+x*(p*C),v+m,p,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),R=c.create({pointA:{x:a+x*(p*C),y:v},bodyB:M});y.addBody(g,M),y.addConstraint(g,R)}return g},d.car=function(a,v,o,p,m){var g=l.nextGroup(!0),x=20,C=-o*.5+x,M=o*.5-x,R=0,P=y.create({label:"Car"}),w=r.rectangle(a,v,o,p,{collisionFilter:{group:g},chamfer:{radius:p*.5},density:2e-4}),A=r.circle(a+C,v+R,m,{collisionFilter:{group:g},friction:.8}),G=r.circle(a+M,v+R,m,{collisionFilter:{group:g},friction:.8}),O=c.create({bodyB:w,pointB:{x:C,y:R},bodyA:A,stiffness:1,length:0}),L=c.create({bodyB:w,pointB:{x:M,y:R},bodyA:G,stiffness:1,length:0});return y.addBody(P,w),y.addBody(P,A),y.addBody(P,G),y.addConstraint(P,O),y.addConstraint(P,L),P},d.softBody=function(a,v,o,p,m,g,x,C,M,R){M=u.extend({inertia:1/0},M),R=u.extend({stiffness:.2,render:{type:"line",anchors:!1}},R);var P=d.stack(a,v,o,p,m,g,function(w,A){return r.circle(w,A,C,M)});return d.mesh(P,o,p,x,R),P.label="Soft Body",P}})()},50658:(h,S,e)=>{var d={};h.exports=d;var y=e(10438),c=e(68758);(function(){d.fromVertices=function(u){for(var l={},r=0;r<u.length;r++){var a=(r+1)%u.length,v=y.normalise({x:u[a].y-u[r].y,y:u[r].x-u[a].x}),o=v.y===0?1/0:v.x/v.y;o=o.toFixed(3).toString(),l[o]=v}return c.values(l)},d.rotate=function(u,l){if(l!==0)for(var r=Math.cos(l),a=Math.sin(l),v=0;v<u.length;v++){var o=u[v],p;p=o.x*r-o.y*a,o.y=o.x*a+o.y*r,o.x=p}}})()},84091:h=>{var S={};h.exports=S,function(){S.create=function(e){var d={min:{x:0,y:0},max:{x:0,y:0}};return e&&S.update(d,e),d},S.update=function(e,d,y){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var c=0;c<d.length;c++){var u=d[c];u.x>e.max.x&&(e.max.x=u.x),u.x<e.min.x&&(e.min.x=u.x),u.y>e.max.y&&(e.max.y=u.y),u.y<e.min.y&&(e.min.y=u.y)}y&&(y.x>0?e.max.x+=y.x:e.min.x+=y.x,y.y>0?e.max.y+=y.y:e.min.y+=y.y)},S.contains=function(e,d){return d.x>=e.min.x&&d.x<=e.max.x&&d.y>=e.min.y&&d.y<=e.max.y},S.overlaps=function(e,d){return e.min.x<=d.max.x&&e.max.x>=d.min.x&&e.max.y>=d.min.y&&e.min.y<=d.max.y},S.translate=function(e,d){e.min.x+=d.x,e.max.x+=d.x,e.min.y+=d.y,e.max.y+=d.y},S.shift=function(e,d){var y=e.max.x-e.min.x,c=e.max.y-e.min.y;e.min.x=d.x,e.max.x=d.x+y,e.min.y=d.y,e.max.y=d.y+c}}()},92765:(h,S,e)=>{var d={};h.exports=d,e(84091);var y=e(68758);(function(){d.pathToVertices=function(c,u){typeof window<"u"&&!("SVGPathSeg"in window)&&y.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var l,r,a,v,o,p,m,g,x,C,M=[],R,P,w=0,A=0,G=0;u=u||15;var O=function(I,F,D){var V=D%2===1&&D>1;if(!x||I!=x.x||F!=x.y){x&&V?(R=x.x,P=x.y):(R=0,P=0);var k={x:R+I,y:P+F};(V||!x)&&(x=k),M.push(k),A=R+I,G=P+F}},L=function(I){var F=I.pathSegTypeAsLetter.toUpperCase();if(F!=="Z"){switch(F){case"M":case"L":case"T":case"C":case"S":case"Q":A=I.x,G=I.y;break;case"H":A=I.x;break;case"V":G=I.y;break}O(A,G,I.pathSegType)}};for(d._svgPathToAbsolute(c),a=c.getTotalLength(),p=[],l=0;l<c.pathSegList.numberOfItems;l+=1)p.push(c.pathSegList.getItem(l));for(m=p.concat();w<a;){if(C=c.getPathSegAtLength(w),o=p[C],o!=g){for(;m.length&&m[0]!=o;)L(m.shift());g=o}switch(o.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":v=c.getPointAtLength(w),O(v.x,v.y,0);break}w+=u}for(l=0,r=m.length;l<r;++l)L(m[l]);return M},d._svgPathToAbsolute=function(c){for(var u,l,r,a,v,o,p=c.pathSegList,m=0,g=0,x=p.numberOfItems,C=0;C<x;++C){var M=p.getItem(C),R=M.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(R))"x"in M&&(m=M.x),"y"in M&&(g=M.y);else switch("x1"in M&&(r=m+M.x1),"x2"in M&&(v=m+M.x2),"y1"in M&&(a=g+M.y1),"y2"in M&&(o=g+M.y2),"x"in M&&(m+=M.x),"y"in M&&(g+=M.y),R){case"m":p.replaceItem(c.createSVGPathSegMovetoAbs(m,g),C);break;case"l":p.replaceItem(c.createSVGPathSegLinetoAbs(m,g),C);break;case"h":p.replaceItem(c.createSVGPathSegLinetoHorizontalAbs(m),C);break;case"v":p.replaceItem(c.createSVGPathSegLinetoVerticalAbs(g),C);break;case"c":p.replaceItem(c.createSVGPathSegCurvetoCubicAbs(m,g,r,a,v,o),C);break;case"s":p.replaceItem(c.createSVGPathSegCurvetoCubicSmoothAbs(m,g,v,o),C);break;case"q":p.replaceItem(c.createSVGPathSegCurvetoQuadraticAbs(m,g,r,a),C);break;case"t":p.replaceItem(c.createSVGPathSegCurvetoQuadraticSmoothAbs(m,g),C);break;case"a":p.replaceItem(c.createSVGPathSegArcAbs(m,g,M.r1,M.r2,M.angle,M.largeArcFlag,M.sweepFlag),C);break;case"z":case"Z":m=u,g=l;break}(R=="M"||R=="m")&&(u=m,l=g)}}})()},10438:h=>{var S={};h.exports=S,function(){S.create=function(e,d){return{x:e||0,y:d||0}},S.clone=function(e){return{x:e.x,y:e.y}},S.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},S.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},S.rotate=function(e,d,y){var c=Math.cos(d),u=Math.sin(d);y||(y={});var l=e.x*c-e.y*u;return y.y=e.x*u+e.y*c,y.x=l,y},S.rotateAbout=function(e,d,y,c){var u=Math.cos(d),l=Math.sin(d);c||(c={});var r=y.x+((e.x-y.x)*u-(e.y-y.y)*l);return c.y=y.y+((e.x-y.x)*l+(e.y-y.y)*u),c.x=r,c},S.normalise=function(e){var d=S.magnitude(e);return d===0?{x:0,y:0}:{x:e.x/d,y:e.y/d}},S.dot=function(e,d){return e.x*d.x+e.y*d.y},S.cross=function(e,d){return e.x*d.y-e.y*d.x},S.cross3=function(e,d,y){return(d.x-e.x)*(y.y-e.y)-(d.y-e.y)*(y.x-e.x)},S.add=function(e,d,y){return y||(y={}),y.x=e.x+d.x,y.y=e.y+d.y,y},S.sub=function(e,d,y){return y||(y={}),y.x=e.x-d.x,y.y=e.y-d.y,y},S.mult=function(e,d){return{x:e.x*d,y:e.y*d}},S.div=function(e,d){return{x:e.x/d,y:e.y/d}},S.perp=function(e,d){return d=d===!0?-1:1,{x:d*-e.y,y:d*e.x}},S.neg=function(e){return{x:-e.x,y:-e.y}},S.angle=function(e,d){return Math.atan2(d.y-e.y,d.x-e.x)},S._temp=[S.create(),S.create(),S.create(),S.create(),S.create(),S.create()]}()},39745:(h,S,e)=>{var d={};h.exports=d;var y=e(10438),c=e(68758);(function(){d.create=function(u,l){for(var r=[],a=0;a<u.length;a++){var v=u[a],o={x:v.x,y:v.y,index:a,body:l,isInternal:!1};r.push(o)}return r},d.fromPath=function(u,l){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,a=[];return u.replace(r,function(v,o,p){a.push({x:parseFloat(o),y:parseFloat(p)})}),d.create(a,l)},d.centre=function(u){for(var l=d.area(u,!0),r={x:0,y:0},a,v,o,p=0;p<u.length;p++)o=(p+1)%u.length,a=y.cross(u[p],u[o]),v=y.mult(y.add(u[p],u[o]),a),r=y.add(r,v);return y.div(r,6*l)},d.mean=function(u){for(var l={x:0,y:0},r=0;r<u.length;r++)l.x+=u[r].x,l.y+=u[r].y;return y.div(l,u.length)},d.area=function(u,l){for(var r=0,a=u.length-1,v=0;v<u.length;v++)r+=(u[a].x-u[v].x)*(u[a].y+u[v].y),a=v;return l?r/2:Math.abs(r)/2},d.inertia=function(u,l){for(var r=0,a=0,v=u,o,p,m=0;m<v.length;m++)p=(m+1)%v.length,o=Math.abs(y.cross(v[p],v[m])),r+=o*(y.dot(v[p],v[p])+y.dot(v[p],v[m])+y.dot(v[m],v[m])),a+=o;return l/6*(r/a)},d.translate=function(u,l,r){r=typeof r<"u"?r:1;var a=u.length,v=l.x*r,o=l.y*r,p;for(p=0;p<a;p++)u[p].x+=v,u[p].y+=o;return u},d.rotate=function(u,l,r){if(l!==0){var a=Math.cos(l),v=Math.sin(l),o=r.x,p=r.y,m=u.length,g,x,C,M;for(M=0;M<m;M++)g=u[M],x=g.x-o,C=g.y-p,g.x=o+(x*a-C*v),g.y=p+(x*v+C*a);return u}},d.contains=function(u,l){for(var r=l.x,a=l.y,v=u.length,o=u[v-1],p,m=0;m<v;m++){if(p=u[m],(r-o.x)*(p.y-o.y)+(a-o.y)*(o.x-p.x)>0)return!1;o=p}return!0},d.scale=function(u,l,r,a){if(l===1&&r===1)return u;a=a||d.centre(u);for(var v,o,p=0;p<u.length;p++)v=u[p],o=y.sub(v,a),u[p].x=a.x+o.x*l,u[p].y=a.y+o.y*r;return u},d.chamfer=function(u,l,r,a,v){typeof l=="number"?l=[l]:l=l||[8],r=typeof r<"u"?r:-1,a=a||2,v=v||14;for(var o=[],p=0;p<u.length;p++){var m=u[p-1>=0?p-1:u.length-1],g=u[p],x=u[(p+1)%u.length],C=l[p<l.length?p:l.length-1];if(C===0){o.push(g);continue}var M=y.normalise({x:g.y-m.y,y:m.x-g.x}),R=y.normalise({x:x.y-g.y,y:g.x-x.x}),P=Math.sqrt(2*Math.pow(C,2)),w=y.mult(c.clone(M),C),A=y.normalise(y.mult(y.add(M,R),.5)),G=y.sub(g,y.mult(A,P)),O=r;r===-1&&(O=Math.pow(C,.32)*1.75),O=c.clamp(O,a,v),O%2===1&&(O+=1);for(var L=Math.acos(y.dot(M,R)),I=L/O,F=0;F<O;F++)o.push(y.add(y.rotate(w,I*F),G))}return o},d.clockwiseSort=function(u){var l=d.mean(u);return u.sort(function(r,a){return y.angle(l,r)-y.angle(l,a)}),u},d.isConvex=function(u){var l=0,r=u.length,a,v,o,p;if(r<3)return null;for(a=0;a<r;a++)if(v=(a+1)%r,o=(a+2)%r,p=(u[v].x-u[a].x)*(u[o].y-u[v].y),p-=(u[v].y-u[a].y)*(u[o].x-u[v].x),p<0?l|=1:p>0&&(l|=2),l===3)return!1;return l!==0?!0:null},d.hull=function(u){var l=[],r=[],a,v;for(u=u.slice(0),u.sort(function(o,p){var m=o.x-p.x;return m!==0?m:o.y-p.y}),v=0;v<u.length;v+=1){for(a=u[v];r.length>=2&&y.cross3(r[r.length-2],r[r.length-1],a)<=0;)r.pop();r.push(a)}for(v=u.length-1;v>=0;v-=1){for(a=u[v];l.length>=2&&y.cross3(l[l.length-2],l[l.length-1],a)<=0;)l.pop();l.push(a)}return l.pop(),r.pop(),l.concat(r)}})()},1675:(h,S,e)=>{var d=e(18171),y={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(c){c.after("Body.create",function(){y.Body.init(this)}),c.before("Engine.update",function(u){y.Engine.update(u)})},Body:{init:function(c){c.plugin.attractors=c.plugin.attractors||[]}},Engine:{update:function(c){for(var u=d.Composite.allBodies(c.world),l=0;l<u.length;l++){var r=u[l],a=r.plugin.attractors;if(a&&a.length>0)for(var v=0;v<u.length;v++){var o=u[v];if(l!==v)for(var p=0;p<a.length;p++){var m=a[p],g=m;d.Common.isFunction(m)&&(g=m(r,o)),g&&d.Body.applyForce(o,o.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(c,u){var l=d.Vector.sub(u.position,c.position),r=d.Vector.magnitudeSquared(l)||1e-4,a=d.Vector.normalise(l),v=-y.Attractors.gravityConstant*(c.mass*u.mass/r),o=d.Vector.mult(a,v);d.Body.applyForce(c,c.position,d.Vector.neg(o)),d.Body.applyForce(u,u.position,o)}}};h.exports=y},80391:h=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(d){d.pairs.map(function(y){var c=y.bodyA,u=y.bodyB;c.gameObject&&c.gameObject.emit("collide",c,u,y),u.gameObject&&u.gameObject.emit("collide",u,c,y),e.Events.trigger(c,"onCollide",{pair:y}),e.Events.trigger(u,"onCollide",{pair:y}),c.onCollideCallback&&c.onCollideCallback(y),u.onCollideCallback&&u.onCollideCallback(y),c.onCollideWith[u.id]&&c.onCollideWith[u.id](u,y),u.onCollideWith[c.id]&&u.onCollideWith[c.id](c,y)})}),e.Events.on(this,"collisionActive",function(d){d.pairs.map(function(y){var c=y.bodyA,u=y.bodyB;c.gameObject&&c.gameObject.emit("collideActive",c,u,y),u.gameObject&&u.gameObject.emit("collideActive",u,c,y),e.Events.trigger(c,"onCollideActive",{pair:y}),e.Events.trigger(u,"onCollideActive",{pair:y}),c.onCollideActiveCallback&&c.onCollideActiveCallback(y),u.onCollideActiveCallback&&u.onCollideActiveCallback(y)})}),e.Events.on(this,"collisionEnd",function(d){d.pairs.map(function(y){var c=y.bodyA,u=y.bodyB;c.gameObject&&c.gameObject.emit("collideEnd",c,u,y),u.gameObject&&u.gameObject.emit("collideEnd",u,c,y),e.Events.trigger(c,"onCollideEnd",{pair:y}),e.Events.trigger(u,"onCollideEnd",{pair:y}),c.onCollideEndCallback&&c.onCollideEndCallback(y),u.onCollideEndCallback&&u.onCollideEndCallback(y)})})})}};h.exports=S},44097:(h,S,e)=>{var d=e(18171),y={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(c){c.after("Engine.update",function(){y.Engine.update(this)})},Engine:{update:function(c){for(var u=c.world,l=d.Composite.allBodies(u),r=d.Composite.allComposites(u),a=0;a<l.length;a+=1){var v=l[a];v.plugin.wrap&&y.Body.wrap(v,v.plugin.wrap)}for(a=0;a<r.length;a+=1){var o=r[a];o.plugin.wrap&&y.Composite.wrap(o,o.plugin.wrap)}}},Bounds:{wrap:function(c,u){var l=null,r=null;if(typeof u.min.x<"u"&&typeof u.max.x<"u"&&(c.min.x>u.max.x?l=u.min.x-c.max.x:c.max.x<u.min.x&&(l=u.max.x-c.min.x)),typeof u.min.y<"u"&&typeof u.max.y<"u"&&(c.min.y>u.max.y?r=u.min.y-c.max.y:c.max.y<u.min.y&&(r=u.max.y-c.min.y)),l!==null||r!==null)return{x:l||0,y:r||0}}},Body:{wrap:function(c,u){var l=y.Bounds.wrap(c.bounds,u);return l&&d.Body.translate(c,l),l}},Composite:{bounds:function(c){for(var u=d.Composite.allBodies(c),l=[],r=0;r<u.length;r+=1){var a=u[r];l.push(a.bounds.min,a.bounds.max)}return d.Bounds.create(l)},wrap:function(c,u){var l=y.Bounds.wrap(y.Composite.bounds(c),u);return l&&d.Composite.translate(c,l),l}}};h.exports=y},81084:h=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={decomp:L,quickDecomp:V,isSimple:F,removeCollinearPoints:k,removeDuplicatePoints:W,makeCCW:x};function S($,z,b){b=b||0;var B=[0,0],N,U,Y,K,Z,J,Q;return N=$[1][1]-$[0][1],U=$[0][0]-$[1][0],Y=N*$[0][0]+U*$[0][1],K=z[1][1]-z[0][1],Z=z[0][0]-z[1][0],J=K*z[0][0]+Z*z[0][1],Q=N*Z-K*U,X(Q,0,b)||(B[0]=(Z*Y-U*J)/Q,B[1]=(N*J-K*Y)/Q),B}function e($,z,b,B){var N=z[0]-$[0],U=z[1]-$[1],Y=B[0]-b[0],K=B[1]-b[1];if(Y*U-K*N===0)return!1;var Z=(N*(b[1]-$[1])+U*($[0]-b[0]))/(Y*U-K*N),J=(Y*($[1]-b[1])+K*(b[0]-$[0]))/(K*N-Y*U);return Z>=0&&Z<=1&&J>=0&&J<=1}function d($,z,b){return(z[0]-$[0])*(b[1]-$[1])-(b[0]-$[0])*(z[1]-$[1])}function y($,z,b){return d($,z,b)>0}function c($,z,b){return d($,z,b)>=0}function u($,z,b){return d($,z,b)<0}function l($,z,b){return d($,z,b)<=0}var r=[],a=[];function v($,z,b,B){if(B){var N=r,U=a;N[0]=z[0]-$[0],N[1]=z[1]-$[1],U[0]=b[0]-z[0],U[1]=b[1]-z[1];var Y=N[0]*U[0]+N[1]*U[1],K=Math.sqrt(N[0]*N[0]+N[1]*N[1]),Z=Math.sqrt(U[0]*U[0]+U[1]*U[1]),J=Math.acos(Y/(K*Z));return J<B}else return d($,z,b)===0}function o($,z){var b=z[0]-$[0],B=z[1]-$[1];return b*b+B*B}function p($,z){var b=$.length;return $[z<0?z%b+b:z%b]}function m($){$.length=0}function g($,z,b,B){for(var N=b;N<B;N++)$.push(z[N])}function x($){for(var z=0,b=$,B=1;B<$.length;++B)(b[B][1]<b[z][1]||b[B][1]===b[z][1]&&b[B][0]>b[z][0])&&(z=B);return y(p($,z-1),p($,z),p($,z+1))?!1:(C($),!0)}function C($){for(var z=[],b=$.length,B=0;B!==b;B++)z.push($.pop());for(var B=0;B!==b;B++)$[B]=z[B]}function M($,z){return u(p($,z-1),p($,z),p($,z+1))}var R=[],P=[];function w($,z,b){var B,N,U=R,Y=P;if(c(p($,z+1),p($,z),p($,b))&&l(p($,z-1),p($,z),p($,b)))return!1;N=o(p($,z),p($,b));for(var K=0;K!==$.length;++K)if(!((K+1)%$.length===z||K===z)&&c(p($,z),p($,b),p($,K+1))&&l(p($,z),p($,b),p($,K))&&(U[0]=p($,z),U[1]=p($,b),Y[0]=p($,K),Y[1]=p($,K+1),B=S(U,Y),o(p($,z),B)<N))return!1;return!0}function A($,z,b){for(var B=0;B!==$.length;++B)if(!(B===z||B===b||(B+1)%$.length===z||(B+1)%$.length===b)&&e(p($,z),p($,b),p($,B),p($,B+1)))return!1;return!0}function G($,z,b,B){var N=B||[];if(m(N),z<b)for(var U=z;U<=b;U++)N.push($[U]);else{for(var U=0;U<=b;U++)N.push($[U]);for(var U=z;U<$.length;U++)N.push($[U])}return N}function O($){for(var z=[],b=[],B=[],N=[],U=Number.MAX_VALUE,Y=0;Y<$.length;++Y)if(M($,Y)){for(var K=0;K<$.length;++K)if(w($,Y,K)){b=O(G($,Y,K,N)),B=O(G($,K,Y,N));for(var Z=0;Z<B.length;Z++)b.push(B[Z]);b.length<U&&(z=b,U=b.length,z.push([p($,Y),p($,K)]))}}return z}function L($){var z=O($);return z.length>0?I($,z):[$]}function I($,z){if(z.length===0)return[$];if(z instanceof Array&&z.length&&z[0]instanceof Array&&z[0].length===2&&z[0][0]instanceof Array){for(var b=[$],B=0;B<z.length;B++)for(var N=z[B],U=0;U<b.length;U++){var Y=b[U],K=I(Y,N);if(K){b.splice(U,1),b.push(K[0],K[1]);break}}return b}else{var N=z,B=$.indexOf(N[0]),U=$.indexOf(N[1]);return B!==-1&&U!==-1?[G($,B,U),G($,U,B)]:!1}}function F($){var z=$,b;for(b=0;b<z.length-1;b++)for(var B=0;B<b-1;B++)if(e(z[b],z[b+1],z[B],z[B+1]))return!1;for(b=1;b<z.length-2;b++)if(e(z[0],z[z.length-1],z[b],z[b+1]))return!1;return!0}function D($,z,b,B,N){N=N||0;var U=z[1]-$[1],Y=$[0]-z[0],K=U*$[0]+Y*$[1],Z=B[1]-b[1],J=b[0]-B[0],Q=Z*b[0]+J*b[1],j=U*J-Z*Y;return X(j,0,N)?[0,0]:[(J*K-Y*Q)/j,(U*Q-Z*K)/j]}function V($,z,b,B,N,U,Y){U=U||100,Y=Y||0,N=N||25,z=typeof z<"u"?z:[],b=b||[],B=B||[];var K=[0,0],Z=[0,0],J=[0,0],Q=0,j=0,q=0,tt=0,_=0,it=0,rt=0,at=[],ot=[],et=$,nt=$;if(nt.length<3)return z;if(Y++,Y>U)return console.warn("quickDecomp: max level ("+U+") reached."),z;for(var st=0;st<$.length;++st)if(M(et,st)){b.push(et[st]),Q=j=Number.MAX_VALUE;for(var ut=0;ut<$.length;++ut)y(p(et,st-1),p(et,st),p(et,ut))&&l(p(et,st-1),p(et,st),p(et,ut-1))&&(J=D(p(et,st-1),p(et,st),p(et,ut),p(et,ut-1)),u(p(et,st+1),p(et,st),J)&&(q=o(et[st],J),q<j&&(j=q,Z=J,it=ut))),y(p(et,st+1),p(et,st),p(et,ut+1))&&l(p(et,st+1),p(et,st),p(et,ut))&&(J=D(p(et,st+1),p(et,st),p(et,ut),p(et,ut+1)),y(p(et,st-1),p(et,st),J)&&(q=o(et[st],J),q<Q&&(Q=q,K=J,_=ut)));if(it===(_+1)%$.length)J[0]=(Z[0]+K[0])/2,J[1]=(Z[1]+K[1])/2,B.push(J),st<_?(g(at,et,st,_+1),at.push(J),ot.push(J),it!==0&&g(ot,et,it,et.length),g(ot,et,0,st+1)):(st!==0&&g(at,et,st,et.length),g(at,et,0,_+1),at.push(J),ot.push(J),g(ot,et,it,st+1));else{if(it>_&&(_+=$.length),tt=Number.MAX_VALUE,_<it)return z;for(var ut=it;ut<=_;++ut)c(p(et,st-1),p(et,st),p(et,ut))&&l(p(et,st+1),p(et,st),p(et,ut))&&(q=o(p(et,st),p(et,ut)),q<tt&&A(et,st,ut)&&(tt=q,rt=ut%$.length));st<rt?(g(at,et,st,rt+1),rt!==0&&g(ot,et,rt,nt.length),g(ot,et,0,st+1)):(st!==0&&g(at,et,st,nt.length),g(at,et,0,rt+1),g(ot,et,rt,st+1))}return at.length<ot.length?(V(at,z,b,B,N,U,Y),V(ot,z,b,B,N,U,Y)):(V(ot,z,b,B,N,U,Y),V(at,z,b,B,N,U,Y)),z}return z.push($),z}function k($,z){for(var b=0,B=$.length-1;$.length>3&&B>=0;--B)v(p($,B-1),p($,B),p($,B+1),z)&&($.splice(B%$.length,1),b++);return b}function W($,z){for(var b=$.length-1;b>=1;--b)for(var B=$[b],N=b-1;N>=0;--N)if(H(B,$[N],z)){$.splice(b,1);continue}}function X($,z,b){return b=b||0,Math.abs($-z)<=b}function H($,z,b){return X($[0],z[0],b)&&X($[1],z[1],b)}},88257:(h,S,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var d=e(56694),y=new d({initialize:function(u){this.pluginManager=u,this.game=u.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});h.exports=y},18360:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};h.exports=S},91963:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={},e={},d={};d.register=function(y,c,u,l){l===void 0&&(l=!1),S[y]={plugin:c,mapping:u,custom:l}},d.registerCustom=function(y,c,u,l){e[y]={plugin:c,mapping:u,data:l}},d.hasCore=function(y){return S.hasOwnProperty(y)},d.hasCustom=function(y){return e.hasOwnProperty(y)},d.getCore=function(y){return S[y]},d.getCustom=function(y){return e[y]},d.getCustomClass=function(y){return e.hasOwnProperty(y)?e[y].plugin:null},d.remove=function(y){S.hasOwnProperty(y)&&delete S[y]},d.removeCustom=function(y){e.hasOwnProperty(y)&&delete e[y]},d.destroyCorePlugins=function(){for(var y in S)S.hasOwnProperty(y)&&delete S[y]},d.destroyCustomPlugins=function(){for(var y in e)e.hasOwnProperty(y)&&delete e[y]},h.exports=d},49274:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(97081),c=e(6659),u=e(76846),l=e(99325),r=e(61286),a=e(72632),v=e(91963),o=e(66458),p=new d({Extends:c,initialize:function(g){c.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(y.BOOT,this.boot,this)},boot:function(){var m,g,x,C,M,R,P,w=this.game.config,A=w.installGlobalPlugins;for(A=A.concat(this._pendingGlobal),m=0;m<A.length;m++)g=A[m],x=a(g,"key",null),C=a(g,"plugin",null),M=a(g,"start",!1),R=a(g,"mapping",null),P=a(g,"data",null),x&&(C?this.install(x,C,M,R,P):console.warn("Missing `plugin` for key: "+x));for(A=w.installScenePlugins,A=A.concat(this._pendingScene),m=0;m<A.length;m++)g=A[m],x=a(g,"key",null),C=a(g,"plugin",null),R=a(g,"mapping",null),x&&(C?this.installScenePlugin(x,C,R):console.warn("Missing `plugin` for key: "+x));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(y.DESTROY,this.destroy,this)},addToScene:function(m,g,x){var C,M,R,P=this.game,w=m.scene,A=m.settings.map,G=m.settings.isBooted;for(C=0;C<g.length;C++)M=g[C],P[M]?(m[M]=P[M],A.hasOwnProperty(M)&&(w[A[M]]=m[M])):M==="game"&&A.hasOwnProperty(M)&&(w[A[M]]=P);for(var O=0;O<x.length;O++)for(R=x[O],C=0;C<R.length;C++)if(M=R[C],!!v.hasCore(M)){var L=v.getCore(M),I=L.mapping,F=new L.plugin(w,this,I);m[I]=F,L.custom?w[I]=F:A.hasOwnProperty(I)&&(w[A[I]]=F),G&&F.boot()}for(R=this.plugins,C=0;C<R.length;C++){var D=R[C];D.mapping&&(w[D.mapping]=D.plugin)}},getDefaultScenePlugins:function(){var m=this.game.config.defaultPlugins;return m=m.concat(this.scenePlugins),m},installScenePlugin:function(m,g,x,C,M){if(M===void 0&&(M=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+m);return}if(v.hasCore(m)||v.register(m,g,x,!0),this.scenePlugins.indexOf(m)===-1)this.scenePlugins.push(m);else if(!M&&v.hasCore(m)){console.warn("Scene Plugin key in use: "+m);return}if(C){var R=new g(C,this,m);C.sys[m]=R,x&&x!==""&&(C[x]=R),R.boot()}},install:function(m,g,x,C,M){if(x===void 0&&(x=!1),C===void 0&&(C=null),M===void 0&&(M=null),typeof g!="function")return console.warn("Invalid Plugin: "+m),null;if(v.hasCustom(m))return console.warn("Plugin key in use: "+m),null;if(C!==null&&(x=!0),!this.game.isBooted)this._pendingGlobal.push({key:m,plugin:g,start:x,mapping:C,data:M});else if(v.registerCustom(m,g,C,M),x)return this.start(m);return null},getIndex:function(m){for(var g=this.plugins,x=0;x<g.length;x++){var C=g[x];if(C.key===m)return x}return-1},getEntry:function(m){var g=this.getIndex(m);if(g!==-1)return this.plugins[g]},isActive:function(m){var g=this.getEntry(m);return g&&g.active},start:function(m,g){g===void 0&&(g=m);var x=this.getEntry(g);return x&&!x.active?(x.active=!0,x.plugin.start()):x||(x=this.createEntry(m,g)),x?x.plugin:null},createEntry:function(m,g){var x=v.getCustom(m);if(x){var C=new x.plugin(this);x={key:g,plugin:C,active:!0,mapping:x.mapping,data:x.data},this.plugins.push(x),C.init(x.data),C.start()}return x},stop:function(m){var g=this.getEntry(m);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(m,g){g===void 0&&(g=!0);var x=this.getEntry(m);if(x)return x.plugin;var C=this.getClass(m);return C&&g?(x=this.createEntry(m,m),x?x.plugin:null):C||null},getClass:function(m){return v.getCustomClass(m)},removeGlobalPlugin:function(m){var g=this.getEntry(m);g&&o(this.plugins,g),v.removeCustom(m)},removeScenePlugin:function(m){o(this.scenePlugins,m),v.remove(m)},registerGameObject:function(m,g,x){return g&&r.register(m,g),x&&l.register(m,x),this},removeGameObject:function(m,g,x){return g===void 0&&(g=!0),x===void 0&&(x=!0),g&&r.remove(m),x&&l.remove(m),this},registerFileType:function(m,g,x){u.register(m,g),x&&x.sys.load&&(x.sys.load[m]=g)},destroy:function(){for(var m=0;m<this.plugins.length;m++)this.plugins[m].plugin.destroy();v.destroyCustomPlugins(),this.game.noReturn&&v.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});h.exports=p},39283:(h,S,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var d=e(88257),y=e(56694),c=e(7599),u=new y({Extends:d,initialize:function(r,a,v){d.call(this,a),this.scene=r,this.systems=r.sys,this.pluginKey=v,r.sys.events.once(c.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});h.exports=u},45615:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={BasePlugin:e(88257),DefaultPlugins:e(18360),PluginCache:e(91963),PluginManager:e(49274),ScenePlugin:e(39283)}},75205:()=>{!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(h){const S=performance.now(),e=this.getVideoPlaybackQuality(),d=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,y=(c,u)=>{const l=this.getVideoPlaybackQuality(),r=this.mozPresentedFrames||this.mozPaintedFrames||l.totalVideoFrames-l.droppedVideoFrames;if(r>d){const a=this.mozFrameDelay||l.totalFrameDelay-e.totalFrameDelay||0,v=u-c;h(u,{presentationTime:u+a*1e3,expectedDisplayTime:u+v,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+v/1e3,presentedFrames:r,processingDuration:a}),delete this._rvfcpolyfillmap[S]}else this._rvfcpolyfillmap[S]=requestAnimationFrame(a=>y(u,a))};return this._rvfcpolyfillmap[S]=requestAnimationFrame(c=>y(S,c)),S},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(h){cancelAnimationFrame(this._rvfcpolyfillmap[h]),delete this._rvfcpolyfillmap[h]})},95723:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={DEFAULT:0,LINEAR:0,NEAREST:1};h.exports=S},91135:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(89787),y=e(61840),c=e(56694),u=e(86459),l=e(6659),r=e(81044),a=e(32834),v=e(40444),o=e(38203),p=e(69360),m=new c({Extends:l,initialize:function(x){l.call(this);var C=x.config;this.config={clearBeforeRender:C.clearBeforeRender,backgroundColor:C.backgroundColor,antialias:C.antialias,roundPixels:C.roundPixels},this.game=x,this.type=u.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=x.canvas;var M={alpha:x.config.transparent,desynchronized:x.config.desynchronized,willReadFrequently:!1};this.gameContext=C.context?C.context:this.gameCanvas.getContext("2d",M),this.currentContext=this.gameContext,this.antialias=x.config.antialias,this.blendModes=a(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(o.READY,this.boot,this)},boot:function(){var g=this.game,x=g.scale.baseSize;this.width=x.width,this.height=x.height,this.isBooted=!0,g.scale.on(v.RESIZE,this.onResize,this),this.resize(x.width,x.height)},onResize:function(g,x){(x.width!==this.width||x.height!==this.height)&&this.resize(x.width,x.height)},resize:function(g,x){this.width=g,this.height=x,this.emit(r.RESIZE,g,x)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,x=this.config,C=this.width,M=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),x.clearBeforeRender&&(g.clearRect(0,0,C,M),x.transparent||(g.fillStyle=x.backgroundColor.rgba,g.fillRect(0,0,C,M))),g.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(g,x,C){var M=x.length;this.emit(r.RENDER,g,C);var R=C.x,P=C.y,w=C.width,A=C.height,G=C.renderToTexture?C.context:g.sys.context;G.save(),this.game.scene.customViewports&&(G.beginPath(),G.rect(R,P,w,A),G.clip()),C.emit(d.PRE_RENDER,C),this.currentContext=G;var O=C.mask;O&&O.preRenderCanvas(this,null,C._maskCamera),C.transparent||(G.fillStyle=C.backgroundColor.rgba,G.fillRect(R,P,w,A)),G.globalAlpha=C.alpha,G.globalCompositeOperation="source-over",this.drawCount+=M,C.renderToTexture&&C.emit(d.PRE_RENDER,C),C.matrix.copyToContext(G);for(var L=0;L<M;L++){var I=x[L];I.mask&&I.mask.preRenderCanvas(this,I,C),I.renderCanvas(this,I,C),I.mask&&I.mask.postRenderCanvas(this,I,C)}G.setTransform(1,0,0,1,0,0),G.globalCompositeOperation="source-over",G.globalAlpha=1,C.flashEffect.postRenderCanvas(G),C.fadeEffect.postRenderCanvas(G),C.dirty=!1,O&&O.postRenderCanvas(this),G.restore(),C.renderToTexture&&(C.emit(d.POST_RENDER,C),C.renderToGame&&g.sys.context.drawImage(C.canvas,R,P)),C.emit(d.POST_RENDER,C)},postRender:function(){var g=this.gameContext;g.restore(),this.emit(r.POST_RENDER);var x=this.snapshotState;x.callback&&(y(this.gameCanvas,x),x.callback=null)},snapshotCanvas:function(g,x,C,M,R,P,w,A,G){C===void 0&&(C=!1),this.snapshotArea(M,R,P,w,x,A,G);var O=this.snapshotState;return O.getPixel=C,y(g,O),O.callback=null,this},snapshot:function(g,x,C){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,x,C)},snapshotArea:function(g,x,C,M,R,P,w){var A=this.snapshotState;return A.callback=R,A.type=P,A.encoder=w,A.getPixel=!1,A.x=g,A.y=x,A.width=Math.min(C,this.gameCanvas.width),A.height=Math.min(M,this.gameCanvas.height),this},snapshotPixel:function(g,x,C){return this.snapshotArea(g,x,1,1,C),this.snapshotState.getPixel=!0,this},batchSprite:function(g,x,C,M){var R=C.alpha*g.alpha;if(R!==0){var P=this.currentContext,w=this._tempMatrix1,A=this._tempMatrix2,G=x.canvasData,O=G.x,L=G.y,I=x.cutWidth,F=x.cutHeight,D=x.customPivot,V=x.source.resolution,k=g.displayOriginX,W=g.displayOriginY,X=-k+x.x,H=-W+x.y;if(g.isCropped){var $=g._crop;($.flipX!==g.flipX||$.flipY!==g.flipY)&&x.updateCropUVs($,g.flipX,g.flipY),I=$.cw,F=$.ch,O=$.cx,L=$.cy,X=-k+$.x,H=-W+$.y,g.flipX&&(X>=0?X=-(X+I):X<0&&(X=Math.abs(X)-I)),g.flipY&&(H>=0?H=-(H+F):H<0&&(H=Math.abs(H)-F))}var z=1,b=1;g.flipX&&(D||(X+=-x.realWidth+k*2),z=-1),g.flipY&&(D||(H+=-x.realHeight+W*2),b=-1);var B=g.x,N=g.y;C.roundPixels&&(B=Math.floor(B),N=Math.floor(N)),A.applyITRS(B,N,g.rotation,g.scaleX*z,g.scaleY*b),w.copyFrom(C.matrix),M?(w.multiplyWithOffset(M,-C.scrollX*g.scrollFactorX,-C.scrollY*g.scrollFactorY),A.e=B,A.f=N):(A.e-=C.scrollX*g.scrollFactorX,A.f-=C.scrollY*g.scrollFactorY),w.multiply(A),C.roundPixels&&(w.e=Math.round(w.e),w.f=Math.round(w.f)),P.save(),w.setToContext(P),P.globalCompositeOperation=this.blendModes[g.blendMode],P.globalAlpha=R,P.imageSmoothingEnabled=!x.source.scaleMode,g.mask&&g.mask.preRenderCanvas(this,g,C),I>0&&F>0&&P.drawImage(x.source.image,O,L,I,F,X,H,I/V,F/V),g.mask&&g.mask.postRenderCanvas(this,g,C),P.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});h.exports=m},6046:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CanvasRenderer:e(91135),GetBlendModes:e(32834),SetTransform:e(49584)}},32834:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),y=e(98581),c=function(){var u=[],l=y.supportNewBlendModes,r="source-over";return u[d.NORMAL]=r,u[d.ADD]="lighter",u[d.MULTIPLY]=l?"multiply":r,u[d.SCREEN]=l?"screen":r,u[d.OVERLAY]=l?"overlay":r,u[d.DARKEN]=l?"darken":r,u[d.LIGHTEN]=l?"lighten":r,u[d.COLOR_DODGE]=l?"color-dodge":r,u[d.COLOR_BURN]=l?"color-burn":r,u[d.HARD_LIGHT]=l?"hard-light":r,u[d.SOFT_LIGHT]=l?"soft-light":r,u[d.DIFFERENCE]=l?"difference":r,u[d.EXCLUSION]=l?"exclusion":r,u[d.HUE]=l?"hue":r,u[d.SATURATION]=l?"saturation":r,u[d.COLOR]=l?"color":r,u[d.LUMINOSITY]=l?"luminosity":r,u[d.ERASE]="destination-out",u[d.SOURCE_IN]="source-in",u[d.SOURCE_OUT]="source-out",u[d.SOURCE_ATOP]="source-atop",u[d.DESTINATION_OVER]="destination-over",u[d.DESTINATION_IN]="destination-in",u[d.DESTINATION_OUT]="destination-out",u[d.DESTINATION_ATOP]="destination-atop",u[d.LIGHTER]="lighter",u[d.COPY]="copy",u[d.XOR]="xor",u};h.exports=c},49584:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),y=function(c,u,l,r,a){var v=r.alpha*l.alpha;if(v<=0)return!1;var o=d(l,r,a).calc;return u.globalCompositeOperation=c.blendModes[l.blendMode],u.globalAlpha=v,u.save(),o.setToContext(u),u.imageSmoothingEnabled=l.frame?!l.frame.source.scaleMode:c.antialias,!0};h.exports=y},70936:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postrender"},99298:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},7743:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="render"},99519:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resize"},81044:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={POST_RENDER:e(70936),PRE_RENDER:e(99298),RENDER:e(7743),RESIZE:e(99519)}},42069:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Canvas:e(6046),Events:e(81044),Snapshot:e(95528),WebGL:e(55478)}},61840:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),y=e(27119),c=e(72632),u=function(l,r){var a=c(r,"callback"),v=c(r,"type","image/png"),o=c(r,"encoder",.92),p=Math.abs(Math.round(c(r,"x",0))),m=Math.abs(Math.round(c(r,"y",0))),g=Math.floor(c(r,"width",l.width)),x=Math.floor(c(r,"height",l.height)),C=c(r,"getPixel",!1);if(C){var M=l.getContext("2d",{willReadFrequently:!1}),R=M.getImageData(p,m,1,1),P=R.data;a.call(null,new y(P[0],P[1],P[2],P[3]))}else if(p!==0||m!==0||g!==l.width||x!==l.height){var w=d.createWebGL(this,g,x),A=w.getContext("2d",{willReadFrequently:!0});g>0&&x>0&&A.drawImage(l,p,m,g,x,0,0,g,x);var G=new Image;G.onerror=function(){a.call(null),d.remove(w)},G.onload=function(){a.call(null,G),d.remove(w)},G.src=w.toDataURL(v,o)}else{var O=new Image;O.onerror=function(){a.call(null)},O.onload=function(){a.call(null,O)},O.src=l.toDataURL(v,o)}};h.exports=u},1217:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),y=e(27119),c=e(72632),u=function(l,r){var a=l,v=c(r,"callback"),o=c(r,"type","image/png"),p=c(r,"encoder",.92),m=Math.abs(Math.round(c(r,"x",0))),g=Math.abs(Math.round(c(r,"y",0))),x=c(r,"getPixel",!1),C=c(r,"isFramebuffer",!1),M=C?c(r,"bufferWidth",1):a.drawingBufferWidth,R=C?c(r,"bufferHeight",1):a.drawingBufferHeight;if(x){var P=new Uint8Array(4),w=C?g:R-g;a.readPixels(m,w,1,1,a.RGBA,a.UNSIGNED_BYTE,P),v.call(null,new y(P[0],P[1],P[2],P[3]))}else{var A=Math.floor(c(r,"width",M)),G=Math.floor(c(r,"height",R)),O=A*G*4,L=new Uint8Array(O);a.readPixels(m,R-g-G,A,G,a.RGBA,a.UNSIGNED_BYTE,L);for(var I=d.createWebGL(this,A,G),F=I.getContext("2d",{willReadFrequently:!0}),D=F.getImageData(0,0,A,G),V=D.data,k=0;k<G;k++)for(var W=0;W<A;W++){var X=((G-k-1)*A+W)*4,H=C?O-(k*A+(A-W))*4:(k*A+W)*4;V[H+0]=L[X+0],V[H+1]=L[X+1],V[H+2]=L[X+2],V[H+3]=L[X+3]}F.putImageData(D,0,0);var $=new Image;$.onerror=function(){v.call(null),d.remove(I)},$.onload=function(){v.call(null,$),d.remove(I)},$.src=I.toDataURL(o,p)}};h.exports=u},95528:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Canvas:e(61840),WebGL:e(1217)}},35217:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(65641),c=e(33885),u=e(77290),l=e(72632),r=e(37410),a=e(82127),v=e(5583),o=e(58136),p=e(47406),m=e(81828),g=e(66901),x=e(71264),C=e(77310),M=e(10919),R=e(21213),P=e(51212),w=e(60848),A=new d({initialize:function(O){this.game=O.game,this.renderer=O,this.classes=new c([[y.UTILITY_PIPELINE,w],[y.MULTI_PIPELINE,C],[y.BITMAPMASK_PIPELINE,v],[y.SINGLE_PIPELINE,P],[y.ROPE_PIPELINE,R],[y.LIGHT_PIPELINE,g],[y.POINTLIGHT_PIPELINE,M],[y.MOBILE_PIPELINE,x],[y.FX_PIPELINE,m]]),this.postPipelineClasses=new c([[String(p.BARREL),o.Barrel],[String(p.BLOOM),o.Bloom],[String(p.BLUR),o.Blur],[String(p.BOKEH),o.Bokeh],[String(p.CIRCLE),o.Circle],[String(p.COLOR_MATRIX),o.ColorMatrix],[String(p.DISPLACEMENT),o.Displacement],[String(p.GLOW),o.Glow],[String(p.GRADIENT),o.Gradient],[String(p.PIXELATE),o.Pixelate],[String(p.SHADOW),o.Shadow],[String(p.SHINE),o.Shine],[String(p.VIGNETTE),o.Vignette],[String(p.WIPE),o.Wipe]]),this.pipelines=new c,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(G,O,L){var I=this.renderer,F=this.renderTargets;this.frameInc=Math.floor(l(G,"frameInc",32));for(var D=I.width,V=I.height,k=Math.min(D,V),W=Math.ceil(k/this.frameInc),X=1;X<W;X++){var H=X*this.frameInc;F.push(new r(I,H,H)),F.push(new r(I,H,H)),F.push(new r(I,H,H)),this.maxDimension=H}F.push(new r(I,D,V,1,0,!0,!0)),F.push(new r(I,D,V,1,0,!0,!0)),F.push(new r(I,D,V,1,0,!0,!0));var $,z,b=this,B=this.game;if(this.classes.each(function(U,Y){$=b.add(U,new Y({game:B})),U===y.UTILITY_PIPELINE&&(b.UTILITY_PIPELINE=$,b.fullFrame1=$.fullFrame1,b.fullFrame2=$.fullFrame2,b.halfFrame1=$.halfFrame1,b.halfFrame2=$.halfFrame2)}),this.MULTI_PIPELINE=this.get(y.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(y.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(y.MOBILE_PIPELINE),this.FX_PIPELINE=this.get(y.FX_PIPELINE),G)for(z in G){var N=G[z];$=new N(B),$.name=z,$.isPostFX?this.postPipelineClasses.set(z,N):this.has(z)||(this.classes.set(z,N),this.add(z,$))}this.default=this.get(O),L&&!u.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(G){var O=this.get(G);return O&&(this.default=O),O},add:function(G,O){if(O.isPostFX){console.warn(G+" is a Post Pipeline. Use `addPostPipeline` instead");return}var L=this.pipelines,I=this.renderer;return L.has(G)?console.warn("Pipeline exists: "+G):(O.name=G,O.manager=this,L.set(G,O)),O.hasBooted||O.boot(),I.width!==0&&I.height!==0&&!O.isPreFX&&O.resize(I.width,I.height),O},addPostPipeline:function(G,O){this.postPipelineClasses.has(G)||this.postPipelineClasses.set(G,O)},flush:function(){this.current&&this.current.flush()},has:function(G){var O=this.pipelines;return typeof G=="string"?O.has(G):!!O.contains(G)},get:function(G){var O=this.pipelines;if(typeof G=="string")return O.get(G);if(O.contains(G))return G},getPostPipeline:function(G,O,L){var I=this.postPipelineClasses,F,D="",V=typeof G;if(V==="string"||V==="number"?(F=I.get(G),D=G):V==="function"?(I.contains(G)&&(F=G),D=G.name):V==="object"&&(F=I.get(G.name),D=G.name),F){var k=new F(this.game,L);return k.name=D,O&&(k.gameObject=O),k}},remove:function(G,O,L){O===void 0&&(O=!0),L===void 0&&(L=!0),this.pipelines.delete(G),O&&this.classes.delete(G),L&&this.postPipelineClasses.delete(G)},set:function(G,O,L){if(!G.isPostFX)return this.isCurrent(G,L)||(this.flush(),this.current&&this.current.unbind(),this.current=G,G.bind(L)),G.updateProjectionMatrix(),G.onBind(O),G},preBatch:function(G){if(G.hasPostPipeline){this.flush();for(var O=G.postPipelines,L=O.length-1;L>=0;L--){var I=O[L];I.active&&I.preBatch(G)}}},postBatch:function(G){if(G.hasPostPipeline){this.flush();for(var O=G.postPipelines,L=0;L<O.length;L++){var I=O[L];I.active&&I.postBatch(G)}}},preBatchCamera:function(G){if(G.hasPostPipeline){this.flush();for(var O=G.postPipelines,L=O.length-1;L>=0;L--){var I=O[L];I.active&&I.preBatch(G)}}},postBatchCamera:function(G){if(G.hasPostPipeline){this.flush();for(var O=G.postPipelines,L=0;L<O.length;L++){var I=O[L];I.active&&I.postBatch(G)}}},isCurrent:function(G,O){var L=this.renderer,I=this.current;return I&&!O&&(O=I.currentShader),!(I!==G||O.program!==L.currentProgram)},copyFrame:function(G,O,L,I,F){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(G,O,L,I,F),this},copyToGame:function(G){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(G),this},drawFrame:function(G,O,L,I){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(G,O,L,I),this},blendFrames:function(G,O,L,I,F){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(G,O,L,I,F),this},blendFramesAdditive:function(G,O,L,I,F){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(G,O,L,I,F),this},clearFrame:function(G,O){return this.UTILITY_PIPELINE.clearFrame(G,O),this},blitFrame:function(G,O,L,I,F,D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(G,O,L,I,F,D),this},copyFrameRect:function(G,O,L,I,F,D,V,k){return this.UTILITY_PIPELINE.copyFrameRect(G,O,L,I,F,D,V,k),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(G){return this.UTILITY_PIPELINE.bind(G)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(G){G===void 0&&this.previous&&(G=this.previous);var O=this.renderer,L=O.gl;L.disable(L.DEPTH_TEST),L.disable(L.CULL_FACE),O.hasActiveStencilMask()?L.clear(L.DEPTH_BUFFER_BIT):(L.disable(L.STENCIL_TEST),L.clear(L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)),L.viewport(0,0,O.width,O.height),O.currentProgram=null,O.setBlendMode(0,!0);var I=O.vaoExtension;I&&I.bindVertexArrayOES(null);var F=this.pipelines.entries;for(var D in F)F[D].glReset=!0;G&&(this.current=G,G.rebind())},clear:function(){var G=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,G.currentProgram=null,G.setBlendMode(0,!0);var O=G.vaoExtension;O&&O.bindVertexArrayOES(null)},getRenderTarget:function(G){var O=this.renderTargets,L=3;if(G>this.maxDimension)return this.targetIndex=O.length-L,O[this.targetIndex];var I=(a(G,this.frameInc,0,!0)-1)*L;return this.targetIndex=I,O[I]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});h.exports=A},37410:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(81044),c=new d({initialize:function(l,r,a,v,o,p,m,g,x){v===void 0&&(v=1),o===void 0&&(o=0),p===void 0&&(p=!0),m===void 0&&(m=!1),g===void 0&&(g=!0),x===void 0&&(x=!0),this.renderer=l,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=v,this.minFilter=o,this.autoClear=p,this.autoResize=!0,this.hasDepthBuffer=g,this.forceClamp=x,this.resize(r,a),m?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(u){return u&&!this.autoResize?(this.renderer.on(y.RESIZE,this.resize,this),this.autoResize=!0):!u&&this.autoResize&&(this.renderer.off(y.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(u,l){var r=u*this.scale,a=l*this.scale;if(this.autoResize&&(r!==this.width||a!==this.height)){var v=this.renderer;v.deleteFramebuffer(this.framebuffer),v.deleteTexture(this.texture),u*=this.scale,l*=this.scale,u=Math.round(u),l=Math.round(l),u<=0&&(u=1),l<=0&&(l=1),this.texture=v.createTextureFromSource(null,u,l,this.minFilter,this.forceClamp),this.framebuffer=v.createFramebuffer(u,l,this.texture,this.hasDepthBuffer),this.width=u,this.height=l}return this},bind:function(u,l,r){u===void 0&&(u=!1);var a=this.renderer;if(u&&a.flush(),l&&r&&this.resize(l,r),a.pushFramebuffer(this.framebuffer,!1,!1),u&&this.adjustViewport(),this.autoClear){var v=this.renderer.gl;v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT)}a.clearStencilMask()},adjustViewport:function(){var u=this.renderer.gl;u.viewport(0,0,this.width,this.height),u.disable(u.SCISSOR_TEST)},clear:function(){var u=this.renderer,l=u.gl;u.pushFramebuffer(this.framebuffer),l.disable(l.SCISSOR_TEST),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),u.popFramebuffer(),u.resetScissor()},unbind:function(u){u===void 0&&(u=!1);var l=this.renderer;return u&&l.flush(),l.popFramebuffer()},destroy:function(){var u=this.renderer;u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),u.off(y.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});h.exports=c},75512:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={getTintFromFloats:function(S,e,d,y){var c=(S*255|0)&255,u=(e*255|0)&255,l=(d*255|0)&255,r=(y*255|0)&255;return(r<<24|c<<16|u<<8|l)>>>0},getTintAppendFloatAlpha:function(S,e){var d=(e*255|0)&255;return(d<<24|S)>>>0},getTintAppendFloatAlphaAndSwap:function(S,e){var d=(S>>16|0)&255,y=(S>>8|0)&255,c=(S|0)&255,u=(e*255|0)&255;return(u<<24|c<<16|y<<8|d)>>>0},getFloatsFromUintRGB:function(S){var e=(S>>16|0)&255,d=(S>>8|0)&255,y=(S|0)&255;return[e/255,d/255,y/255]},checkShaderMax:function(S,e){var d=Math.min(16,S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?d:Math.min(d,e)},parseFragmentShaderMaxTextures:function(S,e){if(!S)return"";for(var d="",y=0;y<e;y++)y>0&&(d+=`
	else `),y<e-1&&(d+="if (outTexId < "+y+".5)"),d+=`
	{`,d+=`
		texture = texture2D(uMainSampler[`+y+"], outTexCoord);",d+=`
	}`;return S=S.replace(/%count%/gi,e.toString()),S.replace(/%forloop%/gi,d)},setGlowQuality:function(S,e,d,y){return d===void 0&&(d=e.config.glowFXQuality),y===void 0&&(y=e.config.glowFXDistance),S=S.replace(/__SIZE__/gi,(1/d/y).toFixed(7)),S=S.replace(/__DIST__/gi,y.toFixed(0)+".0"),S}}},44775:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(28699),c=e(6659),u=e(18970),l=e(72632),r=e(16650),a=e(81044),v=e(37410),o=e(75512),p=e(71305),m=new d({Extends:c,initialize:function(x){c.call(this);var C=x.game,M=C.renderer,R=M.gl;this.name=l(x,"name","WebGLPipeline"),this.game=C,this.renderer=M,this.manager,this.gl=R,this.view=C.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=l(x,"topology",R.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=l(x,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=x,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var g,x=this.gl,C=this.config,M=this.renderer;this.isPostFX||(this.projectionMatrix=new r().identity());var R=this.renderTargets,P=l(C,"renderTarget",!1);typeof P=="boolean"&&P&&(P=1);var w=M.width,A=M.height;if(typeof P=="number")for(g=0;g<P;g++)R.push(new v(M,w,A,1,0,!0));else if(Array.isArray(P))for(g=0;g<P.length;g++){var G=l(P[g],"scale",1),O=l(P[g],"minFilter",0),L=l(P[g],"autoClear",1),I=l(P[g],"width",null),F=l(P[g],"height",I);I?R.push(new v(M,I,F,1,O,L)):R.push(new v(M,w,A,G,O,L))}R.length&&(this.currentRenderTarget=R[0]),this.setShadersFromConfig(C);var D=this.shaders,V=0;for(g=0;g<D.length;g++)D[g].vertexSize>V&&(V=D[g].vertexSize);var k=l(C,"batchSize",M.config.batchSize);this.vertexCapacity=k*6;var W=new ArrayBuffer(this.vertexCapacity*V);this.vertexData=W,this.bytes=new Uint8Array(W),this.vertexViewF32=new Float32Array(W),this.vertexViewU32=new Uint32Array(W);var X=l(C,"vertices",null);for(X?(this.vertexViewF32.set(X),this.vertexBuffer=M.createVertexBuffer(W,x.STATIC_DRAW)):this.vertexBuffer=M.createVertexBuffer(W.byteLength,x.DYNAMIC_DRAW),this.setVertexBuffer(),g=D.length-1;g>=0;g--)D[g].rebind();this.hasBooted=!0,M.on(a.RESIZE,this.resize,this),M.on(a.PRE_RENDER,this.onPreRender,this),M.on(a.RENDER,this.onRender,this),M.on(a.POST_RENDER,this.onPostRender,this),this.emit(u.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,x,C){var M=this.renderer;if(g!==this.currentShader||M.currentProgram!==this.currentShader.program){this.flush();var R=this.setVertexBuffer(C);R&&!x&&(x=!0),g.bind(x,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var x=this.shaders,C=0;C<x.length;C++)if(x[C].name===g)return x[C]},setShadersFromConfig:function(g){var x,C=this.shaders,M=this.renderer;for(x=0;x<C.length;x++)C[x].destroy();var R="vertShader",P="fragShader",w="attributes",A=l(g,R,null),G=o.parseFragmentShaderMaxTextures(l(g,P,null),M.maxTextures),O=l(g,w,null),L=l(g,"shaders",[]),I=L.length;if(I===0)A&&G&&(this.shaders=[new p(this,"default",A,G,y(O))]);else{var F=[];for(x=0;x<I;x++){var D=L[x],V,k,W,X;if(typeof D=="string"?(V="default",k=A,W=o.parseFragmentShaderMaxTextures(D,M.maxTextures),X=O):(V=l(D,"name","default"),k=l(D,R,A),W=o.parseFragmentShaderMaxTextures(l(D,P,G),M.maxTextures),X=l(D,w,O)),V==="default"){var H=W.split(`
`),$=H[0].trim();$.indexOf("#define SHADER_NAME")>-1&&(V=$.substring(20))}k&&W&&F.push(new p(this,V,k,W,y(X)))}this.shaders=F}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(g){return this.currentBatch={start:this.vertexCount,count:0,texture:[g],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=g,this.batch.push(this.currentBatch),0},addTextureToBatch:function(g){var x=this.currentBatch;x&&(x.texture.push(g),x.unit++,x.maxUnit++)},pushBatch:function(g){if(!this.currentBatch||this.forceZero&&g!==this.currentTexture)return this.createBatch(g);if(g===this.currentTexture)return this.currentUnit;var x=this.currentBatch,C=x.texture.indexOf(g);return C===-1?x.texture.length===this.renderer.maxTextures?this.createBatch(g):(x.unit++,x.maxUnit++,x.texture.push(g),this.currentUnit=x.unit,this.currentTexture=g,x.unit):(this.currentUnit=C,this.currentTexture=g,C)},setGameObject:function(g,x){return x===void 0&&(x=g.frame),this.pushBatch(x.source.glTexture)},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(g,x){(g!==this.width||x!==this.height)&&this.flush(),this.width=g,this.height=x;for(var C=this.renderTargets,M=0;M<C.length;M++)C[M].resize(g,x);return this.setProjectionMatrix(g,x),this.emit(u.RESIZE,g,x,this),this.onResize(g,x),this},setProjectionMatrix:function(g,x){var C=this.projectionMatrix;if(!C)return this;this.projectionWidth=g,this.projectionHeight=x,C.ortho(0,g,x,0,-1e3,1e3);for(var M=this.shaders,R="uProjectionMatrix",P=0;P<M.length;P++){var w=M[P];w.hasUniform(R)&&(w.resetUniform(R),w.setMatrix4fv(R,!1,C.val,w))}return this},flipProjectionMatrix:function(g){g===void 0&&(g=!0);var x=this.projectionMatrix;if(!x)return this;var C=this.projectionWidth,M=this.projectionHeight;g?x.ortho(0,C,0,M,-1e3,1e3):x.ortho(0,C,M,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,x.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,x=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==x)&&this.setProjectionMatrix(g,x)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var x=!1,C=this.gl;return C.getParameter(C.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(C.bindBuffer(C.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,x=!0),g.bind(x),this.currentShader=g,this.activeTextures.length=0,this.emit(u.BIND,this,g),this.onActive(g),this},rebind:function(g){this.activeBuffer=null,this.setVertexBuffer();for(var x=this.shaders,C=x.length-1;C>=0;C--){var M=x[C].rebind();(!g||M===g)&&(this.currentShader=M)}return this.activeTextures.length=0,this.emit(u.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(g){if(g===void 0&&(g=this.vertexBuffer),g!==this.activeBuffer){var x=this.gl;return this.gl.bindBuffer(x.ARRAY_BUFFER,g),this.activeBuffer=g,!0}return!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(u.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var x=this.gl,C=this.vertexCount,M=this.currentShader.vertexSize,R=this.topology;if(this.active){this.setVertexBuffer(),C===this.vertexCapacity?x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.DYNAMIC_DRAW):x.bufferSubData(x.ARRAY_BUFFER,0,this.bytes.subarray(0,C*M));var P,w,A,G=this.batch,O=this.activeTextures;if(this.forceZero)for(O[0]||x.activeTexture(x.TEXTURE0),P=0;P<G.length;P++)w=G[P],A=w.texture[0],O[0]!==A&&(x.bindTexture(x.TEXTURE_2D,A),O[0]=A),x.drawArrays(R,w.start,w.count);else for(P=0;P<G.length;P++){w=G[P];for(var L=0;L<=w.maxUnit;L++)A=w.texture[L],O[L]!==A&&(x.activeTexture(x.TEXTURE0+L),x.bindTexture(x.TEXTURE_2D,A),O[L]=A);x.drawArrays(R,w.start,w.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(u.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,x,C,M,R,P,w){var A=this.vertexViewF32,G=this.vertexViewU32,O=this.vertexCount*this.currentShader.vertexComponentCount-1;A[++O]=g,A[++O]=x,A[++O]=C,A[++O]=M,A[++O]=R,A[++O]=P,G[++O]=w,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(g,x,C,M,R,P,w,A,G,O,L,I,F,D,V,k,W,X,H,$){$===void 0&&($=this.currentUnit);var z=!1;this.shouldFlush(6)&&(this.flush(),z=!0),this.currentBatch||($=this.setTexture2D(H));var b=this.vertexViewF32,B=this.vertexViewU32,N=this.vertexCount*this.currentShader.vertexComponentCount-1;return b[++N]=x,b[++N]=C,b[++N]=O,b[++N]=L,b[++N]=$,b[++N]=X,B[++N]=D,b[++N]=M,b[++N]=R,b[++N]=O,b[++N]=F,b[++N]=$,b[++N]=X,B[++N]=k,b[++N]=P,b[++N]=w,b[++N]=I,b[++N]=F,b[++N]=$,b[++N]=X,B[++N]=W,b[++N]=x,b[++N]=C,b[++N]=O,b[++N]=L,b[++N]=$,b[++N]=X,B[++N]=D,b[++N]=P,b[++N]=w,b[++N]=I,b[++N]=F,b[++N]=$,b[++N]=X,B[++N]=W,b[++N]=A,b[++N]=G,b[++N]=I,b[++N]=L,b[++N]=$,b[++N]=X,B[++N]=V,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(g),z},batchTri:function(g,x,C,M,R,P,w,A,G,O,L,I,F,D,V,k,W){W===void 0&&(W=this.currentUnit);var X=!1;this.shouldFlush(3)&&(this.flush(),X=!0),this.currentBatch||(W=this.setTexture2D(k));var H=this.vertexViewF32,$=this.vertexViewU32,z=this.vertexCount*this.currentShader.vertexComponentCount-1;return H[++z]=x,H[++z]=C,H[++z]=A,H[++z]=G,H[++z]=W,H[++z]=V,$[++z]=I,H[++z]=M,H[++z]=R,H[++z]=A,H[++z]=L,H[++z]=W,H[++z]=V,$[++z]=F,H[++z]=P,H[++z]=w,H[++z]=O,H[++z]=L,H[++z]=W,H[++z]=V,$[++z]=D,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(g),X},drawFillRect:function(g,x,C,M,R,P,w,A){w===void 0&&(w=this.renderer.whiteTexture),A===void 0&&(A=!0),g=Math.floor(g),x=Math.floor(x);var G=Math.floor(g+C),O=Math.floor(x+M),L=this.setTexture2D(w),I=o.getTintAppendFloatAlphaAndSwap(R,P),F=0,D=0,V=1,k=1;A&&(D=1,k=0),this.batchQuad(null,g,x,g,O,G,O,G,x,F,D,V,k,I,I,I,I,0,w,L)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture),this.pushBatch(g)},bindTexture:function(g,x){x===void 0&&(x=0);var C=this.gl;return C.activeTexture(C.TEXTURE0+x),C.bindTexture(C.TEXTURE_2D,g),this},bindRenderTarget:function(g,x){return this.bindTexture(g.texture,x)},setTime:function(g,x){return this.set1f(g,this.game.loop.getDuration(),x),this},setBoolean:function(g,x,C){return C===void 0&&(C=this.currentShader),C.setBoolean(g,x),this},set1f:function(g,x,C){return C===void 0&&(C=this.currentShader),C.set1f(g,x),this},set2f:function(g,x,C,M){return M===void 0&&(M=this.currentShader),M.set2f(g,x,C),this},set3f:function(g,x,C,M,R){return R===void 0&&(R=this.currentShader),R.set3f(g,x,C,M),this},set4f:function(g,x,C,M,R,P){return P===void 0&&(P=this.currentShader),P.set4f(g,x,C,M,R),this},set1fv:function(g,x,C){return C===void 0&&(C=this.currentShader),C.set1fv(g,x),this},set2fv:function(g,x,C){return C===void 0&&(C=this.currentShader),C.set2fv(g,x),this},set3fv:function(g,x,C){return C===void 0&&(C=this.currentShader),C.set3fv(g,x),this},set4fv:function(g,x,C){return C===void 0&&(C=this.currentShader),C.set4fv(g,x),this},set1iv:function(g,x,C){return C===void 0&&(C=this.currentShader),C.set1iv(g,x),this},set2iv:function(g,x,C){return C===void 0&&(C=this.currentShader),C.set2iv(g,x),this},set3iv:function(g,x,C){return C===void 0&&(C=this.currentShader),C.set3iv(g,x),this},set4iv:function(g,x,C){return C===void 0&&(C=this.currentShader),C.set4iv(g,x),this},set1i:function(g,x,C){return C===void 0&&(C=this.currentShader),C.set1i(g,x),this},set2i:function(g,x,C,M){return M===void 0&&(M=this.currentShader),M.set2i(g,x,C),this},set3i:function(g,x,C,M,R){return R===void 0&&(R=this.currentShader),R.set3i(g,x,C,M),this},set4i:function(g,x,C,M,R,P){return P===void 0&&(P=this.currentShader),P.set4i(g,x,C,M,R),this},setMatrix2fv:function(g,x,C,M){return M===void 0&&(M=this.currentShader),M.setMatrix2fv(g,x,C),this},setMatrix3fv:function(g,x,C,M){return M===void 0&&(M=this.currentShader),M.setMatrix3fv(g,x,C),this},setMatrix4fv:function(g,x,C,M){return M===void 0&&(M=this.currentShader),M.setMatrix4fv(g,x,C),this},destroy:function(){this.emit(u.DESTROY,this);var g,x=this.shaders;for(g=0;g<x.length;g++)x[g].destroy();var C=this.renderTargets;for(g=0;g<C.length;g++)C[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var M=this.renderer;return M.off(a.RESIZE,this.resize,this),M.off(a.PRE_RENDER,this.onPreRender,this),M.off(a.RENDER,this.onRender,this),M.off(a.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});h.exports=m},11857:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),y=e(89787),c=e(56694),u=e(86459),l=e(6659),r=e(81044),a=e(28621),v=e(16650),o=e(72283),p=e(35217),m=e(37410),g=e(40444),x=e(38203),C=e(75512),M=e(1217),R=new c({Extends:l,initialize:function(w){l.call(this);var A=w.config,G={alpha:A.transparent,desynchronized:A.desynchronized,depth:!0,antialias:A.antialiasGL,premultipliedAlpha:A.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:A.failIfMajorPerformanceCaveat,powerPreference:A.powerPreference,preserveDrawingBuffer:A.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:A.clearBeforeRender,antialias:A.antialias,backgroundColor:A.backgroundColor,contextCreation:G,roundPixels:A.roundPixels,maxTextures:A.maxTextures,maxTextureSize:A.maxTextureSize,batchSize:A.batchSize,maxLights:A.maxLights,mipmapFilter:A.mipmapFilter},this.game=w,this.type=u.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=w.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=o,this.contextRestoredHandler=o,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(P){var w,A=this.game,G=this.canvas,O=P.backgroundColor;if(A.config.context?w=A.config.context:w=G.getContext("webgl",P.contextCreation)||G.getContext("experimental-webgl",P.contextCreation),!w||w.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=w;var L=this;this.contextLostHandler=function(X){L.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),X.preventDefault()},G.addEventListener("webglcontextlost",this.contextLostHandler,!1),A.context=w;for(var I=0;I<=27;I++)this.blendModes.push({func:[w.ONE,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_ADD});this.blendModes[1].func=[w.ONE,w.DST_ALPHA],this.blendModes[2].func=[w.DST_COLOR,w.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[w.ONE,w.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[w.ZERO,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_REVERSE_SUBTRACT},this.glFormats=[w.BYTE,w.SHORT,w.UNSIGNED_BYTE,w.UNSIGNED_SHORT,w.FLOAT],this.glFuncMap={mat2:{func:w.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:w.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:w.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:w.uniform1f,length:1},"1fv":{func:w.uniform1fv,length:1},"1i":{func:w.uniform1i,length:1},"1iv":{func:w.uniform1iv,length:1},"2f":{func:w.uniform2f,length:2},"2fv":{func:w.uniform2fv,length:1},"2i":{func:w.uniform2i,length:2},"2iv":{func:w.uniform2iv,length:1},"3f":{func:w.uniform3f,length:3},"3fv":{func:w.uniform3fv,length:1},"3i":{func:w.uniform3i,length:3},"3iv":{func:w.uniform3iv,length:1},"4f":{func:w.uniform4f,length:4},"4fv":{func:w.uniform4fv,length:1},"4i":{func:w.uniform4i,length:4},"4iv":{func:w.uniform4iv,length:1}};var F=w.getSupportedExtensions();(!P.maxTextures||P.maxTextures===-1)&&(P.maxTextures=w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS)),P.maxTextureSize||(P.maxTextureSize=w.getParameter(w.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=F;var D="ANGLE_instanced_arrays";this.instancedArraysExtension=F.indexOf(D)>-1?w.getExtension(D):null;var V="OES_vertex_array_object";this.vaoExtension=F.indexOf(V)>-1?w.getExtension(V):null,w.disable(w.DEPTH_TEST),w.disable(w.CULL_FACE),w.enable(w.BLEND),w.clearColor(O.redGL,O.greenGL,O.blueGL,O.alphaGL),P.mipmapFilter!==""&&(this.mipmapFilter=w[P.mipmapFilter]),this.maxTextures=C.checkShaderMax(w,P.maxTextures),this.textureIndexes=[];for(var k=0;k<this.maxTextures;k++){var W=w.createTexture();w.activeTexture(w.TEXTURE0+k),w.bindTexture(w.TEXTURE_2D,W),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,1,1,0,w.RGBA,w.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(k)}return this.pipelines=new p(this),this.setBlendMode(u.BlendModes.NORMAL),this.projectionMatrix=new v().identity(),A.textures.once(x.READY,this.boot,this),this},boot:function(){var P=this.game,w=this.pipelines,A=P.scale.baseSize,G=A.width,O=A.height;this.width=G,this.height=O,this.isBooted=!0,this.renderTarget=new m(this,G,O,1,0,!0,!0),this.maskTarget=new m(this,G,O,1,0,!0,!0),this.maskSource=new m(this,G,O,1,0,!0,!0);var L=P.config;w.boot(L.pipeline,L.defaultPipeline,L.autoMobilePipeline),this.blankTexture=P.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=P.textures.getFrame("__WHITE").glTexture;var I=this.gl;I.bindFramebuffer(I.FRAMEBUFFER,null),I.enable(I.SCISSOR_TEST),P.scale.on(g.RESIZE,this.onResize,this),this.resize(G,O)},captureFrame:function(P,w){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(P,w,A){},stopCapture:function(){},onCapture:function(P){},onResize:function(P,w){(w.width!==this.width||w.height!==this.height)&&this.resize(w.width,w.height)},beginCapture:function(P,w){P===void 0&&(P=this.width),w===void 0&&(w=this.height),this.renderTarget.bind(!0,P,w),this.setProjectionMatrix(P,w)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(P,w){var A=this.gl;return this.width=P,this.height=w,this.setProjectionMatrix(P,w),A.viewport(0,0,P,w),this.drawingBufferHeight=A.drawingBufferHeight,A.scissor(0,A.drawingBufferHeight-w,P,w),this.defaultScissor[2]=P,this.defaultScissor[3]=w,this.emit(r.RESIZE,P,w),this},getCompressedTextures:function(){var P="WEBGL_compressed_texture_",w="WEBKIT_"+P,A=function(O,L){var I=O.getExtension(P+L)||O.getExtension(w+L);if(I){var F={};for(var D in I)F[I[D]]=D;return F}},G=this.gl;return{ETC:A(G,"etc"),ETC1:A(G,"etc1"),ATC:A(G,"atc"),ASTC:A(G,"astc"),BPTC:A(G,"bptc"),RGTC:A(G,"rgtc"),PVRTC:A(G,"pvrtc"),S3TC:A(G,"s3tc"),S3TCSRGB:A(G,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(P,w){var A=this.compression[P.toUpperCase()];if(w in A)return A[w]},supportsCompressedTexture:function(P,w){var A=this.compression[P.toUpperCase()];return A?w?w in A:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(P,w){return(P!==this.projectionWidth||w!==this.projectionHeight)&&(this.projectionWidth=P,this.projectionHeight=w,this.projectionMatrix.ortho(0,P,w,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(P){return this.supportedExtensions?this.supportedExtensions.indexOf(P):!1},getExtension:function(P){return this.hasExtension(P)?(P in this.extensions||(this.extensions[P]=this.gl.getExtension(P)),this.extensions[P]):null},flush:function(){this.pipelines.flush()},pushScissor:function(P,w,A,G,O){O===void 0&&(O=this.drawingBufferHeight);var L=this.scissorStack,I=[P,w,A,G];return L.push(I),this.setScissor(P,w,A,G,O),this.currentScissor=I,I},setScissor:function(P,w,A,G,O){O===void 0&&(O=this.drawingBufferHeight);var L=this.gl,I=this.currentScissor,F=A>0&&G>0;if(I&&F){var D=I[0],V=I[1],k=I[2],W=I[3];F=D!==P||V!==w||k!==A||W!==G}F&&(this.flush(),L.scissor(P,O-w-G,A,G))},resetScissor:function(){var P=this.gl;P.enable(P.SCISSOR_TEST);var w=this.currentScissor;if(w){var A=w[0],G=w[1],O=w[2],L=w[3];O>0&&L>0&&P.scissor(A,this.drawingBufferHeight-G-L,O,L)}},popScissor:function(){var P=this.scissorStack;P.pop();var w=P[P.length-1];w&&this.setScissor(w[0],w[1],w[2],w[3]),this.currentScissor=w},hasActiveStencilMask:function(){var P=this.currentMask.mask,w=this.currentCameraMask.mask;return P&&P.isStencil||w&&w.isStencil},resetViewport:function(){var P=this.gl;P.viewport(0,0,this.width,this.height),this.drawingBufferHeight=P.drawingBufferHeight},setBlendMode:function(P,w){w===void 0&&(w=!1);var A=this.gl,G=this.blendModes[P];return w||P!==u.BlendModes.SKIP_CHECK&&this.currentBlendMode!==P?(this.flush(),A.enable(A.BLEND),A.blendEquation(G.equation),G.func.length>2?A.blendFuncSeparate(G.func[0],G.func[1],G.func[2],G.func[3]):A.blendFunc(G.func[0],G.func[1]),this.currentBlendMode=P,!0):!1},addBlendMode:function(P,w){var A=this.blendModes.push({func:P,equation:w});return A-1},updateBlendMode:function(P,w,A){return this.blendModes[P]&&(this.blendModes[P].func=w,A&&(this.blendModes[P].equation=A)),this},removeBlendMode:function(P){return P>17&&this.blendModes[P]&&this.blendModes.splice(P,1),this},pushFramebuffer:function(P,w,A,G,O){return P===this.currentFramebuffer?this:(this.fboStack.push(P),this.setFramebuffer(P,w,A,G,O))},setFramebuffer:function(P,w,A,G,O){if(w===void 0&&(w=!1),A===void 0&&(A=!0),G===void 0&&(G=null),O===void 0&&(O=!1),P===this.currentFramebuffer)return this;var L=this.gl,I=this.width,F=this.height;return P&&P.renderTexture&&A?(I=P.renderTexture.width,F=P.renderTexture.height):this.flush(),L.bindFramebuffer(L.FRAMEBUFFER,P),A&&L.viewport(0,0,I,F),G&&L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,G,0),O&&(L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT)),w&&(P?(this.drawingBufferHeight=F,this.pushScissor(0,0,I,F)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=P,this},popFramebuffer:function(P,w){P===void 0&&(P=!1),w===void 0&&(w=!0);var A=this.fboStack;A.pop();var G=A[A.length-1];return G||(G=null),this.setFramebuffer(G,P,w),G},restoreFramebuffer:function(P,w){P===void 0&&(P=!1),w===void 0&&(w=!0);var A=this.fboStack,G=A[A.length-1];G||(G=null),this.currentFramebuffer=null,this.setFramebuffer(G,P,w)},setProgram:function(P){return P!==this.currentProgram?(this.flush(),this.gl.useProgram(P),this.currentProgram=P,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(P,w,A,G,O){O===void 0&&(O=!1);var L=this.gl,I=L.NEAREST,F=L.NEAREST,D=L.CLAMP_TO_EDGE,V=null;w=P?P.width:w,A=P?P.height:A;var k=a(w,A);return k&&!O&&(D=L.REPEAT),G===u.ScaleModes.LINEAR&&this.config.antialias&&(I=k&&this.mipmapFilter?this.mipmapFilter:L.LINEAR,F=L.LINEAR),P&&P.compressed&&(I=L.LINEAR,F=L.LINEAR),!P&&typeof w=="number"&&typeof A=="number"?V=this.createTexture2D(0,I,F,D,D,L.RGBA,null,w,A):V=this.createTexture2D(0,I,F,D,D,L.RGBA,P),V},createTexture2D:function(P,w,A,G,O,L,I,F,D,V,k,W){V=V??!0,k===void 0&&(k=!1),W===void 0&&(W=!1);var X=this.gl,H=X.createTexture();X.activeTexture(X.TEXTURE0);var $=X.getParameter(X.TEXTURE_BINDING_2D);X.bindTexture(X.TEXTURE_2D,H),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,w),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,A),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,O),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,G),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V),W&&X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,!0);var z=!1;if(I==null)X.texImage2D(X.TEXTURE_2D,P,L,F,D,0,L,X.UNSIGNED_BYTE,null),z=a(F,D);else if(I.compressed){F=I.width,D=I.height,z=I.generateMipmap;for(var b=0;b<I.mipmaps.length;b++)X.compressedTexImage2D(X.TEXTURE_2D,b,I.internalFormat,I.mipmaps[b].width,I.mipmaps[b].height,0,I.mipmaps[b].data)}else k||(F=I.width,D=I.height),X.texImage2D(X.TEXTURE_2D,P,L,L,X.UNSIGNED_BYTE,I),z=a(F,D);return z&&X.generateMipmap(X.TEXTURE_2D),$&&X.bindTexture(X.TEXTURE_2D,$),H.isAlphaPremultiplied=V,H.isRenderTexture=!1,H.width=F,H.height=D,H},createFramebuffer:function(P,w,A,G){G===void 0&&(G=!0);var O=this.gl,L=O.createFramebuffer(),I=0;if(this.setFramebuffer(L),A.isRenderTexture=!0,A.isAlphaPremultiplied=!1,O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,A,0),I=O.checkFramebufferStatus(O.FRAMEBUFFER),I!==O.FRAMEBUFFER_COMPLETE){var F={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(F[I]||I))}if(L.renderTexture=A,G){var D=O.createRenderbuffer();O.bindRenderbuffer(O.RENDERBUFFER,D),O.renderbufferStorage(O.RENDERBUFFER,O.DEPTH_STENCIL,P,w),O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_STENCIL_ATTACHMENT,O.RENDERBUFFER,D)}return this.setFramebuffer(null),L},beginBitmapMask:function(P,w){var A=this.gl;A&&(this.flush(),this.maskTarget.bind(),this.currentCameraMask.mask!==P&&(this.currentMask.mask=P,this.currentMask.camera=w))},drawBitmapMask:function(P,w,A){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),P.renderWebGL(this,P,w),this.maskSource.unbind(!0),this.maskTarget.unbind();var G=this.gl,O=this.getCurrentStencilMask();O?(G.enable(G.STENCIL_TEST),O.mask.applyStencil(this,O.camera,!0)):this.currentMask.mask=null,this.pipelines.set(A),G.activeTexture(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,this.maskTarget.texture),G.activeTexture(G.TEXTURE1),G.bindTexture(G.TEXTURE_2D,this.maskSource.texture)},createProgram:function(P,w){var A=this.gl,G=A.createProgram(),O=A.createShader(A.VERTEX_SHADER),L=A.createShader(A.FRAGMENT_SHADER);A.shaderSource(O,P),A.shaderSource(L,w),A.compileShader(O),A.compileShader(L);var I=`Shader failed:
`;if(!A.getShaderParameter(O,A.COMPILE_STATUS))throw new Error("Vertex "+I+A.getShaderInfoLog(O));if(!A.getShaderParameter(L,A.COMPILE_STATUS))throw new Error("Fragment "+I+A.getShaderInfoLog(L));if(A.attachShader(G,O),A.attachShader(G,L),A.linkProgram(G),!A.getProgramParameter(G,A.LINK_STATUS))throw new Error("Link "+I+A.getProgramInfoLog(G));return A.useProgram(G),G},createVertexBuffer:function(P,w){var A=this.gl,G=A.createBuffer();return A.bindBuffer(A.ARRAY_BUFFER,G),A.bufferData(A.ARRAY_BUFFER,P,w),A.bindBuffer(A.ARRAY_BUFFER,null),G},createIndexBuffer:function(P,w){var A=this.gl,G=A.createBuffer();return A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,G),A.bufferData(A.ELEMENT_ARRAY_BUFFER,P,w),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,null),G},deleteTexture:function(P){return P&&this.gl.deleteTexture(P),this},deleteFramebuffer:function(P){if(P){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,P);var A=w.getParameter(w.RENDERBUFFER_BINDING);A&&w.deleteRenderbuffer(A),w.bindFramebuffer(w.FRAMEBUFFER,null),w.deleteFramebuffer(P),d(this.fboStack,P),this.currentFramebuffer===P&&(this.currentFramebuffer=null)}return this},deleteProgram:function(P){return P&&this.gl.deleteProgram(P),this},deleteBuffer:function(P){return this.gl.deleteBuffer(P),this},preRenderCamera:function(P){var w=P.x,A=P.y,G=P.width,O=P.height,L=P.backgroundColor;if(P.emit(y.PRE_RENDER,P),this.pipelines.preBatchCamera(P),this.pushScissor(w,A,G,O),P.mask&&(this.currentCameraMask.mask=P.mask,this.currentCameraMask.camera=P._maskCamera,P.mask.preRenderWebGL(this,P,P._maskCamera)),L.alphaGL>0){var I=this.pipelines.setMulti();I.drawFillRect(w,A,G,O,C.getTintFromFloats(L.blueGL,L.greenGL,L.redGL,1),L.alphaGL)}},getCurrentStencilMask:function(){var P=null,w=this.maskStack,A=this.currentCameraMask;return w.length>0?P=w[w.length-1]:A.mask&&A.mask.isStencil&&(P=A),P},postRenderCamera:function(P){var w=P.flashEffect,A=P.fadeEffect;if(w.isRunning||A.isRunning||A.isComplete){var G=this.pipelines.setMulti();w.postRenderWebGL(G,C.getTintFromFloats),A.postRenderWebGL(G,C.getTintFromFloats)}P.dirty=!1,this.popScissor(),P.mask&&(this.currentCameraMask.mask=null,P.mask.postRenderWebGL(this,P._maskCamera)),this.pipelines.postBatchCamera(P),P.emit(y.POST_RENDER,P)},preRender:function(){if(!this.contextLost){var P=this.gl;if(P.bindFramebuffer(P.FRAMEBUFFER,null),this.config.clearBeforeRender){var w=this.config.backgroundColor;P.clearColor(w.redGL,w.greenGL,w.blueGL,w.alphaGL),P.clear(P.COLOR_BUFFER_BIT|P.DEPTH_BUFFER_BIT|P.STENCIL_BUFFER_BIT)}P.enable(P.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&P.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(r.PRE_RENDER)}},render:function(P,w,A){if(!this.contextLost){var G=w.length;if(this.emit(r.RENDER,P,A),this.preRenderCamera(A),G===0){this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(A);return}this.currentType="";for(var O=this.currentMask,L=0;L<G;L++){this.finalType=L===G-1;var I=w[L],F=I.mask;O=this.currentMask,O.mask&&O.mask!==F&&O.mask.postRenderWebGL(this,O.camera),F&&O.mask!==F&&F.preRenderWebGL(this,I,A),I.blendMode!==this.currentBlendMode&&this.setBlendMode(I.blendMode);var D=I.type;D!==this.currentType&&(this.newType=!0,this.currentType=D),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=w[L+1].type===this.currentType,I.renderWebGL(this,I,A),this.newType=!1}O=this.currentMask,O.mask&&O.mask.postRenderWebGL(this,O.camera),this.setBlendMode(u.BlendModes.NORMAL),this.postRenderCamera(A)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(r.POST_RENDER);var P=this.snapshotState;P.callback&&(M(this.gl,P),P.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var P=this.gl,w=this.getCurrentStencilMask();if(w){var A=w.mask;P.enable(P.STENCIL_TEST),A.invertAlpha?P.stencilFunc(P.NOTEQUAL,A.level,255):P.stencilFunc(P.EQUAL,A.level,255)}},snapshot:function(P,w,A){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,P,w,A)},snapshotArea:function(P,w,A,G,O,L,I){var F=this.snapshotState;return F.callback=O,F.type=L,F.encoder=I,F.getPixel=!1,F.x=P,F.y=w,F.width=A,F.height=G,this},snapshotPixel:function(P,w,A){return this.snapshotArea(P,w,1,1,A),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(P,w,A,G,O,L,I,F,D,V,k){O===void 0&&(O=!1),L===void 0&&(L=0),I===void 0&&(I=0),F===void 0&&(F=w),D===void 0&&(D=A),V==="pixel"&&(O=!0,V="image/png");var W=this.currentFramebuffer;this.snapshotArea(L,I,F,D,G,V,k);var X=this.snapshotState;return X.getPixel=O,X.isFramebuffer=!0,X.bufferWidth=w,X.bufferHeight=A,X.width=Math.min(X.width,w),X.height=Math.min(X.height,A),this.setFramebuffer(P),M(this.gl,X),this.setFramebuffer(W),X.callback=null,X.isFramebuffer=!1,this},canvasToTexture:function(P,w,A,G){return A===void 0&&(A=!1),G===void 0&&(G=!1),w?this.updateCanvasTexture(P,w,G):this.createCanvasTexture(P,A,G)},createCanvasTexture:function(P,w,A){w===void 0&&(w=!1),A===void 0&&(A=!1);var G=this.gl,O=G.NEAREST,L=G.NEAREST,I=P.width,F=P.height,D=G.CLAMP_TO_EDGE,V=a(I,F);return!w&&V&&(D=G.REPEAT),this.config.antialias&&(O=V&&this.mipmapFilter?this.mipmapFilter:G.LINEAR,L=G.LINEAR),this.createTexture2D(0,O,L,D,D,G.RGBA,P,I,F,!0,!1,A)},updateCanvasTexture:function(P,w,A){A===void 0&&(A=!1);var G=this.gl,O=P.width,L=P.height;if(O>0&&L>0){G.activeTexture(G.TEXTURE0);var I=G.getParameter(G.TEXTURE_BINDING_2D);G.bindTexture(G.TEXTURE_2D,w),A&&G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,!0),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),G.texImage2D(G.TEXTURE_2D,0,G.RGBA,G.RGBA,G.UNSIGNED_BYTE,P),w.width=O,w.height=L,I&&G.bindTexture(G.TEXTURE_2D,I)}return w},createVideoTexture:function(P,w,A){w===void 0&&(w=!1),A===void 0&&(A=!1);var G=this.gl,O=G.NEAREST,L=G.NEAREST,I=P.videoWidth,F=P.videoHeight,D=G.CLAMP_TO_EDGE,V=a(I,F);return!w&&V&&(D=G.REPEAT),this.config.antialias&&(O=V&&this.mipmapFilter?this.mipmapFilter:G.LINEAR,L=G.LINEAR),this.createTexture2D(0,O,L,D,D,G.RGBA,P,I,F,!0,!0,A)},updateVideoTexture:function(P,w,A){A===void 0&&(A=!1);var G=this.gl,O=P.videoWidth,L=P.videoHeight;if(O>0&&L>0){G.activeTexture(G.TEXTURE0);var I=G.getParameter(G.TEXTURE_BINDING_2D);G.bindTexture(G.TEXTURE_2D,w),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,A),G.texImage2D(G.TEXTURE_2D,0,G.RGBA,G.RGBA,G.UNSIGNED_BYTE,P),w.width=O,w.height=L,I&&G.bindTexture(G.TEXTURE_2D,I)}return w},setTextureFilter:function(P,w){var A=this.gl,G=[A.LINEAR,A.NEAREST][w];A.activeTexture(A.TEXTURE0);var O=A.getParameter(A.TEXTURE_BINDING_2D);return A.bindTexture(A.TEXTURE_2D,P),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,G),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,G),O&&A.bindTexture(A.TEXTURE_2D,O),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});h.exports=R},71305:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=e(71402),u=new d({initialize:function(r,a,v,o,p){this.pipeline=r,this.name=a,this.renderer=r.renderer,this.gl=this.renderer.gl,this.fragSrc=o,this.vertSrc=v,this.program=this.renderer.createProgram(v,o),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(p),this.createUniforms()},createAttributes:function(l){var r=0,a=0,v=[];this.vertexComponentCount=0;for(var o=0;o<l.length;o++){var p=l[o],m=p.name,g=y(p,"size",1),x=y(p,"type",c.FLOAT),C=x.enum,M=x.size,R=!!p.normalized;v.push({name:m,size:g,type:C,normalized:R,offset:a,enabled:!1,location:-1}),M===4?r+=g:r++,a+=g*M}this.vertexSize=a,this.vertexComponentCount=r,this.attributes=v},bind:function(l,r){return l===void 0&&(l=!1),r===void 0&&(r=!1),r&&this.pipeline.flush(),this.renderer.setProgram(this.program),l&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(l){l===void 0&&(l=!1);for(var r=this.gl,a=this.vertexSize,v=this.attributes,o=this.program,p=0;p<v.length;p++){var m=v[p],g=m.size,x=m.type,C=m.offset,M=m.enabled,R=m.location,P=!!m.normalized;if(l){var w=r.getAttribLocation(o,m.name);w>=0?(r.enableVertexAttribArray(w),r.vertexAttribPointer(w,g,x,P,a,C),m.enabled=!0,m.location=w):w!==-1&&r.disableVertexAttribArray(w)}else M?r.vertexAttribPointer(R,g,x,P,a,C):!M&&R>-1&&(r.disableVertexAttribArray(R),m.location=-1)}return this},createUniforms:function(){var l=this.gl,r=this.program,a=this.uniforms,v,o,p,m=l.getProgramParameter(r,l.ACTIVE_UNIFORMS);for(v=0;v<m;v++){var g=l.getActiveUniform(r,v);if(g){o=g.name,p=l.getUniformLocation(r,o),p!==null&&(a[o]={name:o,location:p,value1:null,value2:null,value3:null,value4:null});var x=o.indexOf("[");x>0&&(o=o.substr(0,x),a.hasOwnProperty(o)||(p=l.getUniformLocation(r,o),p!==null&&(a[o]={name:o,location:p,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(l){return this.uniforms.hasOwnProperty(l)},resetUniform:function(l){var r=this.uniforms[l];return r&&(r.value1=null,r.value2=null,r.value3=null,r.value4=null),this},setUniform1:function(l,r,a,v){var o=this.uniforms[r];return o?((v||o.value1!==a)&&(o.value1=a,this.renderer.setProgram(this.program),l.call(this.gl,o.location,a),this.pipeline.currentShader=this),this):this},setUniform2:function(l,r,a,v,o){var p=this.uniforms[r];return p?((o||p.value1!==a||p.value2!==v)&&(p.value1=a,p.value2=v,this.renderer.setProgram(this.program),l.call(this.gl,p.location,a,v),this.pipeline.currentShader=this),this):this},setUniform3:function(l,r,a,v,o,p){var m=this.uniforms[r];return m?((p||m.value1!==a||m.value2!==v||m.value3!==o)&&(m.value1=a,m.value2=v,m.value3=o,this.renderer.setProgram(this.program),l.call(this.gl,m.location,a,v,o),this.pipeline.currentShader=this),this):this},setUniform4:function(l,r,a,v,o,p,m){var g=this.uniforms[r];return g?((m||g.value1!==a||g.value2!==v||g.value3!==o||g.value4!==p)&&(g.value1=a,g.value2=v,g.value3=o,g.value4=p,this.renderer.setProgram(this.program),l.call(this.gl,g.location,a,v,o,p),this.pipeline.currentShader=this),this):this},setBoolean:function(l,r){return this.setUniform1(this.gl.uniform1i,l,Number(r))},set1f:function(l,r){return this.setUniform1(this.gl.uniform1f,l,r)},set2f:function(l,r,a){return this.setUniform2(this.gl.uniform2f,l,r,a)},set3f:function(l,r,a,v){return this.setUniform3(this.gl.uniform3f,l,r,a,v)},set4f:function(l,r,a,v,o){return this.setUniform4(this.gl.uniform4f,l,r,a,v,o)},set1fv:function(l,r){return this.setUniform1(this.gl.uniform1fv,l,r,!0)},set2fv:function(l,r){return this.setUniform1(this.gl.uniform2fv,l,r,!0)},set3fv:function(l,r){return this.setUniform1(this.gl.uniform3fv,l,r,!0)},set4fv:function(l,r){return this.setUniform1(this.gl.uniform4fv,l,r,!0)},set1iv:function(l,r){return this.setUniform1(this.gl.uniform1iv,l,r,!0)},set2iv:function(l,r){return this.setUniform1(this.gl.uniform2iv,l,r,!0)},set3iv:function(l,r){return this.setUniform1(this.gl.uniform3iv,l,r,!0)},set4iv:function(l,r){return this.setUniform1(this.gl.uniform4iv,l,r,!0)},set1i:function(l,r){return this.setUniform1(this.gl.uniform1i,l,r)},set2i:function(l,r,a){return this.setUniform2(this.gl.uniform2i,l,r,a)},set3i:function(l,r,a,v){return this.setUniform3(this.gl.uniform3i,l,r,a,v)},set4i:function(l,r,a,v,o){return this.setUniform4(this.gl.uniform4i,l,r,a,v,o)},setMatrix2fv:function(l,r,a){return this.setUniform2(this.gl.uniformMatrix2fv,l,r,a,!0)},setMatrix3fv:function(l,r,a){return this.setUniform2(this.gl.uniformMatrix3fv,l,r,a,!0)},setMatrix4fv:function(l,r,a){return this.setUniform2(this.gl.uniformMatrix4fv,l,r,a,!0)},createProgram:function(l,r){l===void 0&&(l=this.vertSrc),r===void 0&&(r=this.fragSrc);var a=this.gl;return this.program&&a.deleteProgram(this.program),this.vertSrc=l,this.fragSrc=r,this.program=this.renderer.createProgram(l,r),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});h.exports=u},71402:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};h.exports=S},55478:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(71402),y=e(98611),c={PipelineManager:e(35217),Pipelines:e(62253),RenderTarget:e(37410),Utils:e(75512),WebGLPipeline:e(44775),WebGLRenderer:e(11857),WebGLShader:e(71305)};c=y(!1,c,d),h.exports=c},5583:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=e(91679),u=e(89053),l=e(71402),r=e(44775),a=new d({Extends:r,initialize:function(o){o.fragShader=y(o,"fragShader",c),o.vertShader=y(o,"vertShader",u),o.batchSize=y(o,"batchSize",1),o.vertices=y(o,"vertices",[-1,1,-1,-7,7,1]),o.attributes=y(o,"attributes",[{name:"inPosition",size:2,type:l.FLOAT}]),r.call(this,o)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(v,o){r.prototype.resize.call(this,v,o),this.set2f("uResolution",v,o)},beginMask:function(v,o,p){this.renderer.beginBitmapMask(v,p)},endMask:function(v,o,p){var m=this.gl,g=this.renderer,x=v.bitmapMask;x&&m&&(g.drawBitmapMask(x,o,this),p&&this.set2f("uResolution",p.width,p.height),this.set1i("uInvertMaskAlpha",v.invertAlpha),m.drawArrays(this.topology,0,3),p&&this.set2f("uResolution",this.width,this.height),m.bindTexture(m.TEXTURE_2D,null))}});h.exports=a},81828:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(58136),c=e(47406),u=e(72632),l=e(87228),r=e(92462),a=e(75512),v=new d({Extends:l,initialize:function(p){p.shaders=[a.setGlowQuality(r.FXGlowFrag,p.game),r.FXShadowFrag,r.FXPixelateFrag,r.FXVignetteFrag,r.FXShineFrag,r.FXBlurLowFrag,r.FXBlurMedFrag,r.FXBlurHighFrag,r.FXGradientFrag,r.FXBloomFrag,r.ColorMatrixFrag,r.FXCircleFrag,r.FXBarrelFrag,r.FXDisplacementFrag,r.FXWipeFrag,r.FXBokehFrag],l.call(this,p);var m=this.game;this.glow=new y.Glow(m),this.shadow=new y.Shadow(m),this.pixelate=new y.Pixelate(m),this.vignette=new y.Vignette(m),this.shine=new y.Shine(m),this.gradient=new y.Gradient(m),this.circle=new y.Circle(m),this.barrel=new y.Barrel(m),this.wipe=new y.Wipe(m),this.bokeh=new y.Bokeh(m);var g=[];g[c.GLOW]=this.onGlow,g[c.SHADOW]=this.onShadow,g[c.PIXELATE]=this.onPixelate,g[c.VIGNETTE]=this.onVignette,g[c.SHINE]=this.onShine,g[c.BLUR]=this.onBlur,g[c.GRADIENT]=this.onGradient,g[c.BLOOM]=this.onBloom,g[c.COLOR_MATRIX]=this.onColorMatrix,g[c.CIRCLE]=this.onCircle,g[c.BARREL]=this.onBarrel,g[c.DISPLACEMENT]=this.onDisplacement,g[c.WIPE]=this.onWipe,g[c.BOKEH]=this.onBokeh,this.fxHandlers=g,this.source,this.target,this.swap},onDraw:function(o,p,m){this.source=o,this.target=p,this.swap=m;var g=o.width,x=o.height,C=this.tempSprite,M=this.fxHandlers;if(C&&C.preFX)for(var R=C.preFX.list,P=0;P<R.length;P++){var w=R[P];w.active&&M[w.type].call(this,w,g,x)}this.drawToGame(this.source)},runDraw:function(){var o=this.source,p=this.target;this.copy(o,p),this.source=p,this.target=o},onGlow:function(o,p,m){var g=this.shaders[c.GLOW];this.setShader(g),this.glow.onPreRender(o,g,p,m),this.runDraw()},onShadow:function(o){var p=this.shaders[c.SHADOW];this.setShader(p),this.shadow.onPreRender(o,p),this.runDraw()},onPixelate:function(o,p,m){var g=this.shaders[c.PIXELATE];this.setShader(g),this.pixelate.onPreRender(o,g,p,m),this.runDraw()},onVignette:function(o){var p=this.shaders[c.VIGNETTE];this.setShader(p),this.vignette.onPreRender(o,p),this.runDraw()},onShine:function(o,p,m){var g=this.shaders[c.SHINE];this.setShader(g),this.shine.onPreRender(o,g,p,m),this.runDraw()},onBlur:function(o,p,m){var g=u(o,"quality"),x=this.shaders[c.BLUR+g];this.setShader(x),this.set1i("uMainSampler",0),this.set2f("resolution",p,m),this.set1f("strength",u(o,"strength")),this.set3fv("color",u(o,"glcolor"));for(var C=u(o,"x"),M=u(o,"y"),R=u(o,"steps"),P=0;P<R;P++)this.set2f("offset",C,0),this.runDraw(),this.set2f("offset",0,M),this.runDraw()},onGradient:function(o){var p=this.shaders[c.GRADIENT];this.setShader(p),this.gradient.onPreRender(o,p),this.runDraw()},onBloom:function(o,p,m){var g=this.shaders[c.BLOOM];this.copySprite(this.source,this.swap),this.setShader(g),this.set1i("uMainSampler",0),this.set1f("strength",u(o,"blurStrength")),this.set3fv("color",u(o,"glcolor"));for(var x=2/p*u(o,"offsetX"),C=2/m*u(o,"offsetY"),M=u(o,"steps"),R=0;R<M;R++)this.set2f("offset",x,0),this.runDraw(),this.set2f("offset",0,C),this.runDraw();this.blendFrames(this.swap,this.source,this.target,u(o,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(o){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",o.getData()),this.set1f("uAlpha",o.alpha),this.runDraw()},onCircle:function(o,p,m){var g=this.shaders[c.CIRCLE];this.setShader(g),this.circle.onPreRender(o,g,p,m),this.runDraw()},onBarrel:function(o){var p=this.shaders[c.BARREL];this.setShader(p),this.barrel.onPreRender(o,p),this.runDraw()},onDisplacement:function(o){this.setShader(this.shaders[c.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",o.x,o.y),this.bindTexture(o.glTexture,1),this.runDraw()},onWipe:function(o){var p=this.shaders[c.WIPE];this.setShader(p),this.wipe.onPreRender(o,p),this.runDraw()},onBokeh:function(o,p,m){var g=this.shaders[c.BOKEH];this.setShader(g),this.bokeh.onPreRender(o,g,p,m),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,l.prototype.destroy.call(this),this}});h.exports=v},66901:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=e(65045),u=e(77310),l=e(69360),r=e(93736),a=e(44775),v=new d({Extends:u,initialize:function(p){var m=y(p,"fragShader",c);p.fragShader=m.replace("%LIGHT_COUNT%",p.game.renderer.config.maxLights),u.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new r,this._tempMatrix=new l,this._tempMatrix2=new l},boot:function(){a.prototype.boot.call(this);var o=this.gl,p=o.createTexture();o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,p),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p}},onRender:function(o,p){var m=o.sys.lights;if(this.lightsActive=!1,!(!m||!m.active)){var g=m.getLights(p),x=g.length;this.lightsActive=!0;var C,M=this.renderer,R=M.height,P=p.matrix,w=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",m.ambientColor.r,m.ambientColor.g,m.ambientColor.b),this.set1i("uLightCount",x),C=0;C<x;C++){var A=g[C].light,G=A.color,O="uLights["+C+"].";P.transformPoint(A.x,A.y,w),this.set2f(O+"position",w.x-p.scrollX*A.scrollFactorX*p.zoom,R-(w.y-p.scrollY*A.scrollFactorY*p.zoom)),this.set3f(O+"color",G.r,G.g,G.b),this.set1f(O+"intensity",A.intensity),this.set1f(O+"radius",A.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(o){if(o!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(o){var m=-o,g=Math.cos(m),x=Math.sin(m);p[1]=x,p[3]=-x,p[0]=p[4]=g}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=o}},setTexture2D:function(o,p){var m=this.renderer;o===void 0&&(o=m.whiteTexture);var g=this.getNormalMap(p);this.isNewNormalMap(o,g)&&(this.flush(),this.createBatch(o),this.addTextureToBatch(g),this.currentNormalMap=g);var x=0;if(p&&p.parentContainer){var C=p.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);x=C.rotationNormalized}else p&&(x=p.rotation);return this.setNormalMapRotation(x),0},setGameObject:function(o,p){p===void 0&&(p=o.frame);var m=p.glTexture,g=this.getNormalMap(o);if(this.isNewNormalMap(m,g)&&(this.flush(),this.createBatch(m),this.addTextureToBatch(g),this.currentNormalMap=g),o.parentContainer){var x=o.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(x.rotationNormalized)}else this.setNormalMapRotation(o.rotation);return 0},isNewNormalMap:function(o,p){return this.currentTexture!==o||this.currentNormalMap!==p},getNormalMap:function(o){var p;return o?o.displayTexture?p=o.displayTexture.dataSource[o.displayFrame.sourceIndex]:o.texture?p=o.texture.dataSource[o.frame.sourceIndex]:o.tileset&&(Array.isArray(o.tileset)?p=o.tileset[0].image.dataSource[0]:p=o.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(o,p,m){this.lightsActive&&u.prototype.batchSprite.call(this,o,p,m)},batchTexture:function(o,p,m,g,x,C,M,R,P,w,A,G,O,L,I,F,D,V,k,W,X,H,$,z,b,B,N,U,Y,K,Z,J){this.lightsActive&&u.prototype.batchTexture.call(this,o,p,m,g,x,C,M,R,P,w,A,G,O,L,I,F,D,V,k,W,X,H,$,z,b,B,N,U,Y,K,Z,J)},batchTextureFrame:function(o,p,m,g,x,C,M){this.lightsActive&&u.prototype.batchTextureFrame.call(this,o,p,m,g,x,C,M)}});h.exports=v},71264:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=e(77310),u=e(85060),l=e(18166),r=e(71402),a=e(44775),v=new d({Extends:c,initialize:function(p){p.fragShader=y(p,"fragShader",u),p.vertShader=y(p,"vertShader",l),p.attributes=y(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:r.UNSIGNED_BYTE,normalized:!0}]),p.forceZero=!0,c.call(this,p)},boot:function(){a.prototype.boot.call(this),this.set1i("uMainSampler",0)}});h.exports=v},77310:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(11117),c=e(72632),u=e(53787),l=e(15968),r=e(69360),a=e(75512),v=e(71402),o=e(44775),p=new d({Extends:o,initialize:function(g){var x=g.game.renderer,C=c(g,"fragShader",u);g.fragShader=a.parseFragmentShaderMaxTextures(C,x.maxTextures),g.vertShader=c(g,"vertShader",l),g.attributes=c(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:v.UNSIGNED_BYTE,normalized:!0}]),o.call(this,g),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){o.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(m,g,x){this.manager.set(this,m);var C=this._tempMatrix1,M=this._tempMatrix2,R=this._tempMatrix3,P=m.frame,w=P.glTexture,A=P.u0,G=P.v0,O=P.u1,L=P.v1,I=P.x,F=P.y,D=P.cutWidth,V=P.cutHeight,k=P.customPivot,W=m.displayOriginX,X=m.displayOriginY,H=-W+I,$=-X+F;if(m.isCropped){var z=m._crop;(z.flipX!==m.flipX||z.flipY!==m.flipY)&&P.updateCropUVs(z,m.flipX,m.flipY),A=z.u0,G=z.v0,O=z.u1,L=z.v1,D=z.width,V=z.height,I=z.x,F=z.y,H=-W+I,$=-X+F}var b=1,B=1;m.flipX&&(k||(H+=-P.realWidth+W*2),b=-1),(m.flipY||P.source.isGLTexture&&!w.flipY)&&(k||($+=-P.realHeight+X*2),B=-1);var N=m.x,U=m.y;M.applyITRS(N,U,m.rotation,m.scaleX*b,m.scaleY*B),C.copyFrom(g.matrix),x?(C.multiplyWithOffset(x,-g.scrollX*m.scrollFactorX,-g.scrollY*m.scrollFactorY),M.e=N,M.f=U):(M.e-=g.scrollX*m.scrollFactorX,M.f-=g.scrollY*m.scrollFactorY),C.multiply(M,R);var Y=R.setQuad(H,$,H+D,$+V,g.roundPixels),K=a.getTintAppendFloatAlpha,Z=g.alpha,J=K(m.tintTopLeft,Z*m._alphaTL),Q=K(m.tintTopRight,Z*m._alphaTR),j=K(m.tintBottomLeft,Z*m._alphaBL),q=K(m.tintBottomRight,Z*m._alphaBR);this.shouldFlush(6)&&this.flush();var tt=this.setGameObject(m,P);this.manager.preBatch(m),this.batchQuad(m,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],A,G,O,L,J,Q,j,q,m.tintFill,w,tt),this.manager.postBatch(m)},batchTexture:function(m,g,x,C,M,R,P,w,A,G,O,L,I,F,D,V,k,W,X,H,$,z,b,B,N,U,Y,K,Z,J,Q,j){this.manager.set(this,m);var q=this._tempMatrix1,tt=this._tempMatrix2,_=this._tempMatrix3,it=W/x+Y,rt=X/C+K,at=(W+H)/x+Y,ot=(X+$)/C+K,et=P,nt=w,st=-V,ut=-k;if(m.isCropped){var lt=m._crop,pt=lt.width,ct=lt.height;et=pt,nt=ct,P=pt,w=ct,W=lt.x,X=lt.y;var ft=W,dt=X;L&&(ft=H-lt.x-pt),I&&(dt=$-lt.y-ct),it=ft/x+Y,rt=dt/C+K,at=(ft+pt)/x+Y,ot=(dt+ct)/C+K,st=-V+W,ut=-k+X}I=I^(!Q&&g.isRenderTexture?1:0),L&&(et*=-1,st+=P),I&&(nt*=-1,ut+=w),tt.applyITRS(M,R,O,A,G),q.copyFrom(Z.matrix),J?(q.multiplyWithOffset(J,-Z.scrollX*F,-Z.scrollY*D),tt.e=M,tt.f=R):(tt.e-=Z.scrollX*F,tt.f-=Z.scrollY*D),q.multiply(tt,_);var vt=_.setQuad(st,ut,st+et,ut+nt,Z.roundPixels);j===void 0&&(j=this.setTexture2D(g)),m&&this.manager.preBatch(m),this.batchQuad(m,vt[0],vt[1],vt[2],vt[3],vt[4],vt[5],vt[6],vt[7],it,rt,at,ot,z,b,B,N,U,g,j),m&&this.manager.postBatch(m)},batchTextureFrame:function(m,g,x,C,M,R,P){this.manager.set(this);var w=this._tempMatrix1.copyFrom(R),A=this._tempMatrix2;P?w.multiply(P,A):A=w;var G=A.setQuad(g,x,g+m.width,x+m.height,!1),O=this.setTexture2D(m.source.glTexture);C=a.getTintAppendFloatAlpha(C,M),this.batchQuad(null,G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],m.u0,m.v0,m.u1,m.v1,C,C,C,C,0,m.glTexture,O)},batchFillRect:function(m,g,x,C,M,R){this.renderer.pipelines.set(this);var P=this.calcMatrix;R&&R.multiply(M,P);var w=P.setQuad(m,g,m+x,g+C,!1),A=this.fillTint;this.batchQuad(null,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],0,0,1,1,A.TL,A.TR,A.BL,A.BR,2)},batchFillTriangle:function(m,g,x,C,M,R,P,w){this.renderer.pipelines.set(this);var A=this.calcMatrix;w&&w.multiply(P,A);var G=A.getX(m,g),O=A.getY(m,g),L=A.getX(x,C),I=A.getY(x,C),F=A.getX(M,R),D=A.getY(M,R),V=this.fillTint;this.batchTri(null,G,O,L,I,F,D,0,0,1,1,V.TL,V.TR,V.BL,2)},batchStrokeTriangle:function(m,g,x,C,M,R,P,w,A){var G=this.tempTriangle;G[0].x=m,G[0].y=g,G[0].width=P,G[1].x=x,G[1].y=C,G[1].width=P,G[2].x=M,G[2].y=R,G[2].width=P,G[3].x=m,G[3].y=g,G[3].width=P,this.batchStrokePath(G,P,!1,w,A)},batchFillPath:function(m,g,x){this.renderer.pipelines.set(this);var C=this.calcMatrix;x&&x.multiply(g,C);for(var M=m.length,R=this.polygonCache,P,w,A=this.fillTint.TL,G=this.fillTint.TR,O=this.fillTint.BL,L=0;L<M;++L)w=m[L],R.push(w.x,w.y);P=y(R),M=P.length;for(var I=0;I<M;I+=3){var F=P[I+0]*2,D=P[I+1]*2,V=P[I+2]*2,k=R[F+0],W=R[F+1],X=R[D+0],H=R[D+1],$=R[V+0],z=R[V+1],b=C.getX(k,W),B=C.getY(k,W),N=C.getX(X,H),U=C.getY(X,H),Y=C.getX($,z),K=C.getY($,z);this.batchTri(null,b,B,N,U,Y,K,0,0,1,1,A,G,O,2)}R.length=0},batchStrokePath:function(m,g,x,C,M){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var R=m.length-1,P=0;P<R;P++){var w=m[P],A=m[P+1];this.batchLine(w.x,w.y,A.x,A.y,w.width/2,A.width/2,g,P,!x&&P===R-1,C,M)}},batchLine:function(m,g,x,C,M,R,P,w,A,G,O){this.renderer.pipelines.set(this);var L=this.calcMatrix;O&&O.multiply(G,L);var I=x-m,F=C-g,D=Math.sqrt(I*I+F*F);if(D!==0){var V=M*(C-g)/D,k=M*(m-x)/D,W=R*(C-g)/D,X=R*(m-x)/D,H=x-W,$=C-X,z=m-V,b=g-k,B=x+W,N=C+X,U=m+V,Y=g+k,K=L.getX(H,$),Z=L.getY(H,$),J=L.getX(z,b),Q=L.getY(z,b),j=L.getX(B,N),q=L.getY(B,N),tt=L.getX(U,Y),_=L.getY(U,Y),it=this.strokeTint,rt=it.TL,at=it.TR,ot=it.BL,et=it.BR;if(this.batchQuad(null,tt,_,J,Q,K,Z,j,q,0,0,1,1,rt,at,ot,et,2),!(P<=2)){var nt=this.prevQuad,st=this.firstQuad;w>0&&nt[4]?this.batchQuad(null,tt,_,J,Q,nt[0],nt[1],nt[2],nt[3],0,0,1,1,rt,at,ot,et,2):(st[0]=tt,st[1]=_,st[2]=J,st[3]=Q,st[4]=1),A&&st[4]?this.batchQuad(null,K,Z,j,q,st[0],st[1],st[2],st[3],0,0,1,1,rt,at,ot,et,2):(nt[0]=K,nt[1]=Z,nt[2]=j,nt[3]=q,nt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,o.prototype.destroy.call(this),this}});h.exports=p},10919:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=e(83327),u=e(54677),l=e(44775),r=new d({Extends:l,initialize:function(v){v.vertShader=y(v,"vertShader",u),v.fragShader=y(v,"fragShader",c),v.attributes=y(v,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),l.call(this,v)},onRender:function(a,v){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",v.zoom)},batchPointLight:function(a,v,o,p,m,g,x,C,M,R,P,w){var A=a.color,G=a.intensity,O=a.radius,L=a.attenuation,I=A.r*G,F=A.g*G,D=A.b*G,V=v.alpha*a.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(o,p,P,w,O,L,I,F,D,V),this.batchLightVert(m,g,P,w,O,L,I,F,D,V),this.batchLightVert(x,C,P,w,O,L,I,F,D,V),this.batchLightVert(o,p,P,w,O,L,I,F,D,V),this.batchLightVert(x,C,P,w,O,L,I,F,D,V),this.batchLightVert(M,R,P,w,O,L,I,F,D,V),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(a,v,o,p,m,g,x,C,M,R){var P=this.vertexViewF32,w=this.vertexCount*this.currentShader.vertexComponentCount-1;P[++w]=a,P[++w]=v,P[++w]=o,P[++w]=p,P[++w]=m,P[++w]=g,P[++w]=x,P[++w]=C,P[++w]=M,P[++w]=R,this.vertexCount++}});h.exports=r},80486:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(65246),c=e(72632),u=e(12569),l=e(99365),r=e(44775),a=new d({Extends:r,initialize:function(o){o.renderTarget=c(o,"renderTarget",1),o.fragShader=c(o,"fragShader",u),o.vertShader=c(o,"vertShader",l),o.attributes=c(o,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),o.batchSize=1,o.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,o),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new y,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){r.prototype.boot.call(this);var v=this.manager.UTILITY_PIPELINE;this.fullFrame1=v.fullFrame1,this.fullFrame2=v.fullFrame2,this.halfFrame1=v.halfFrame1,this.halfFrame2=v.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(v){this.bindAndDraw(v)},getController:function(v){return v!==void 0?v:this.controller?this.controller:this},copySprite:function(v,o,p){p===void 0&&(p=!1);var m=this.gl;m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,v.texture);var g=m.getParameter(m.FRAMEBUFFER_BINDING);m.bindFramebuffer(m.FRAMEBUFFER,o.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,o.texture,0),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),p&&(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,g))},copyFrame:function(v,o,p,m,g){this.manager.copyFrame(v,o,p,m,g)},copyToGame:function(v){this.manager.copyToGame(v)},drawFrame:function(v,o,p){this.manager.drawFrame(v,o,p,this.colorMatrix)},blendFrames:function(v,o,p,m,g){this.manager.blendFrames(v,o,p,m,g)},blendFramesAdditive:function(v,o,p,m,g){this.manager.blendFramesAdditive(v,o,p,m,g)},clearFrame:function(v,o){this.manager.clearFrame(v,o)},blitFrame:function(v,o,p,m,g,x){this.manager.blitFrame(v,o,p,m,g,x)},copyFrameRect:function(v,o,p,m,g,x,C,M){this.manager.copyFrameRect(v,o,p,m,g,x,C,M)},bindAndDraw:function(v,o,p,m,g){p===void 0&&(p=!0),m===void 0&&(m=!0);var x=this.gl,C=this.renderer;this.bind(g),this.set1i("uMainSampler",0),o?(x.viewport(0,0,o.width,o.height),x.bindFramebuffer(x.FRAMEBUFFER,o.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,o.texture,0),p&&(m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT))):(C.popFramebuffer(!1,!1),C.currentFramebuffer||x.viewport(0,0,C.width,C.height)),C.restoreStencilMask(),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,v.texture),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),o&&(x.bindTexture(x.TEXTURE_2D,null),x.bindFramebuffer(x.FRAMEBUFFER,C.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,r.prototype.destroy.call(this),this}});h.exports=a},87228:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),y=e(79993),c=e(56694),u=e(37486),l=e(72632),r=e(77310),a=e(12569),v=e(74118),o=e(37410),p=e(85060),m=e(18166),g=e(44775),x=new c({Extends:r,initialize:function(M){var R=l(M,"fragShader",a),P=l(M,"vertShader",m),w=l(M,"drawShader",a),A=[{name:"DrawSprite",fragShader:p,vertShader:m},{name:"CopySprite",fragShader:R,vertShader:P},{name:"DrawGame",fragShader:w,vertShader:m},{name:"ColorMatrix",fragShader:u}],G=l(M,"shaders",[]);M.shaders=A.concat(G),M.vertShader||(M.vertShader=P),M.batchSize=1,r.call(this,M),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new v,this.targetBounds=new v,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){g.prototype.boot.call(this);var C=this.shaders,M=this.renderer;this.drawSpriteShader=C[0],this.copyShader=C[1],this.gameShader=C[2],this.colorMatrixShader=C[3],this.fsTarget=new o(M,M.width,M.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var R=new ArrayBuffer(168);this.quadVertexData=R,this.quadVertexViewF32=new Float32Array(R),this.quadVertexBuffer=M.createVertexBuffer(R,this.gl.STATIC_DRAW),this.onResize(M.width,M.height),this.currentShader=this.copyShader},onResize:function(C,M){var R=this.quadVertexViewF32;R[1]=M,R[22]=M,R[14]=C,R[28]=C,R[35]=C,R[36]=M},batchQuad:function(C,M,R,P,w,A,G,O,L,I,F,D,V,k,W,X,H,$,z){var b=Math.min(M,P,A,O),B=Math.min(R,w,G,L),N=Math.max(M,P,A,O),U=Math.max(R,w,G,L),Y=N-b,K=U-B,Z=this.spriteBounds.setTo(b,B,Y,K),J=C?C.preFX.padding:0,Q=Y+J*2,j=K+J*2,q=Math.abs(Math.max(Q,j)),tt=this.manager.getRenderTarget(q),_=this.targetBounds.setTo(0,0,tt.width,tt.height);y(_,Z.centerX,Z.centerY),this.tempSprite=C;var it=this.gl,rt=this.renderer;rt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.flipProjectionMatrix(!0),C&&(this.onDrawSprite(C,tt),C.preFX.onFX(this));var at=this.fsTarget;return this.flush(),it.viewport(0,0,rt.width,rt.height),it.bindFramebuffer(it.FRAMEBUFFER,at.framebuffer),it.framebufferTexture2D(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,at.texture,0),it.clearColor(0,0,0,0),it.clear(it.COLOR_BUFFER_BIT),this.setTexture2D(z),this.batchVert(M,R,I,F,0,$,k),this.batchVert(P,w,I,V,0,$,X),this.batchVert(A,G,D,V,0,$,H),this.batchVert(M,R,I,F,0,$,k),this.batchVert(A,G,D,V,0,$,H),this.batchVert(O,L,D,F,0,$,W),this.flush(),this.flipProjectionMatrix(!1),it.activeTexture(it.TEXTURE0),it.bindTexture(it.TEXTURE_2D,tt.texture),it.copyTexSubImage2D(it.TEXTURE_2D,0,0,0,_.x,_.y,_.width,_.height),it.bindFramebuffer(it.FRAMEBUFFER,null),it.bindTexture(it.TEXTURE_2D,null),this.onBatch(C),this.currentShader=this.copyShader,this.onDraw(tt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(C,M,R,P,w,A,G){R===void 0&&(R=!0),P===void 0&&(P=!0),w===void 0&&(w=!1),G===void 0&&(G=this.copyShader);var O=this.gl,L=this.tempSprite;A&&(G=this.colorMatrixShader),this.currentShader=G;var I=this.setVertexBuffer(this.quadVertexBuffer);if(G.bind(I,!1),this.set1i("uMainSampler",0),L.preFX.onFXCopy(this),this.onCopySprite(C,M,L),A&&(this.set1fv("uColorMatrix",A.getData()),this.set1f("uAlpha",A.alpha)),O.activeTexture(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,C.texture),C.height>M.height)O.viewport(0,0,C.width,C.height),this.setTargetUVs(C,M);else{var F=M.height-C.height;O.viewport(0,F,C.width,C.height),this.resetUVs()}if(O.bindFramebuffer(O.FRAMEBUFFER,M.framebuffer),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,M.texture,0),R&&(O.clearColor(0,0,0,+!P),O.clear(O.COLOR_BUFFER_BIT)),w){var D=this.renderer.currentBlendMode;this.renderer.setBlendMode(d.ERASE)}O.bufferData(O.ARRAY_BUFFER,this.quadVertexData,O.STATIC_DRAW),O.drawArrays(O.TRIANGLES,0,6),w&&this.renderer.setBlendMode(D),O.bindFramebuffer(O.FRAMEBUFFER,null)},copy:function(C,M){var R=this.gl;this.set1i("uMainSampler",0),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,C.texture),R.viewport(0,0,C.width,C.height),this.setUVs(0,0,0,1,1,1,1,0),R.bindFramebuffer(R.FRAMEBUFFER,M.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,M.texture,0),R.clearColor(0,0,0,0),R.clear(R.COLOR_BUFFER_BIT),R.bufferData(R.ARRAY_BUFFER,this.quadVertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),R.bindFramebuffer(R.FRAMEBUFFER,null)},blendFrames:function(C,M,R,P,w){this.manager.blendFrames(C,M,R,P,w)},blendFramesAdditive:function(C,M,R,P,w){this.manager.blendFramesAdditive(C,M,R,P,w)},drawToGame:function(C){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(C)},copyToGame:function(C){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(C)},bindAndDraw:function(C){var M=this.gl,R=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(C.texture);var P=this._tempMatrix1.loadIdentity(),w=this.targetBounds.x,A=this.targetBounds.y,G=w+C.width,O=A+C.height,L=P.getX(w,A),I=P.getX(w,O),F=P.getX(G,O),D=P.getX(G,A),V=P.getY(w,A),k=P.getY(w,O),W=P.getY(G,O),X=P.getY(G,A),H=16777215;this.batchVert(L,V,0,0,0,0,H),this.batchVert(I,k,0,1,0,0,H),this.batchVert(F,W,1,1,0,0,H),this.batchVert(L,V,0,0,0,0,H),this.batchVert(F,W,1,1,0,0,H),this.batchVert(D,X,1,0,0,0,H),R.restoreFramebuffer(!1,!0),R.currentFramebuffer||M.viewport(0,0,R.width,R.height),R.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(C){this.drawToGame(C)},setUVs:function(C,M,R,P,w,A,G,O){var L=this.quadVertexViewF32;L[2]=C,L[3]=M,L[9]=R,L[10]=P,L[16]=w,L[17]=A,L[23]=C,L[24]=M,L[30]=w,L[31]=A,L[37]=G,L[38]=O},setTargetUVs:function(C,M){var R=M.height/C.height;R>.5?R=.5-(R-.5):R=.5+(.5-R),this.setUVs(0,R,0,1+R,1,1+R,1,R)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,r.prototype.destroy.call(this),this}});h.exports=x},21213:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=e(77310),u=new d({Extends:c,initialize:function(r){r.topology=5,r.batchSize=y(r,"batchSize",256),c.call(this,r)}});h.exports=u},51212:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=e(77310),u=e(85060),l=e(18166),r=e(44775),a=new d({Extends:c,initialize:function(o){o.fragShader=y(o,"fragShader",u),o.vertShader=y(o,"vertShader",l),o.forceZero=!0,c.call(this,o)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0)}});h.exports=a},60848:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(2529),y=e(95723),c=e(56694),u=e(65246),l=e(37486),r=e(79060),a=e(72632),v=e(98921),o=e(99365),p=e(44775),m=new c({Extends:p,initialize:function(x){x.renderTarget=a(x,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),x.vertShader=a(x,"vertShader",o),x.shaders=a(x,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:d},{name:"LinearBlend",fragShader:v},{name:"ColorMatrix",fragShader:l}]),x.attributes=a(x,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),x.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],x.batchSize=1,p.call(this,x),this.colorMatrix=new u,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){p.prototype.boot.call(this);var g=this.shaders,x=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=x[0],this.fullFrame2=x[1],this.halfFrame1=x[2],this.halfFrame2=x[3]},copyFrame:function(g,x,C,M,R){C===void 0&&(C=1),M===void 0&&(M=!0),R===void 0&&(R=!0);var P=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,g.texture),x?(P.viewport(0,0,x.width,x.height),P.bindFramebuffer(P.FRAMEBUFFER,x.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,x.texture,0)):P.viewport(0,0,g.width,g.height),M&&(R?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},blitFrame:function(g,x,C,M,R,P,w){C===void 0&&(C=1),M===void 0&&(M=!0),R===void 0&&(R=!0),P===void 0&&(P=!1),w===void 0&&(w=!1);var A=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,g.texture),g.height>x.height)A.viewport(0,0,g.width,g.height),this.setTargetUVs(g,x);else{var G=x.height-g.height;A.viewport(0,G,g.width,g.height)}if(A.bindFramebuffer(A.FRAMEBUFFER,x.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,x.texture,0),M&&(R?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),P){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(y.ERASE)}w&&this.flipY(),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),P&&this.renderer.setBlendMode(O),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,x,C,M,R,P,w,A){w===void 0&&(w=!0),A===void 0&&(A=!0);var G=this.gl;G.bindFramebuffer(G.FRAMEBUFFER,g.framebuffer),G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,g.texture,0),w&&(A?G.clearColor(0,0,0,0):G.clearColor(0,0,0,1),G.clear(G.COLOR_BUFFER_BIT)),G.activeTexture(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,x.texture),G.copyTexSubImage2D(G.TEXTURE_2D,0,0,0,C,M,R,P),G.bindFramebuffer(G.FRAMEBUFFER,null),G.bindTexture(G.TEXTURE_2D,null)},copyToGame:function(g){var x=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,g.texture),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6)},drawFrame:function(g,x,C,M){C===void 0&&(C=!0),M===void 0&&(M=this.colorMatrix);var R=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",M.getData()),this.set1f("uAlpha",M.alpha),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,g.texture),x?(R.viewport(0,0,x.width,x.height),R.bindFramebuffer(R.FRAMEBUFFER,x.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,x.texture,0)):R.viewport(0,0,g.width,g.height),C?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT),R.bufferData(R.ARRAY_BUFFER,this.vertexData,R.STATIC_DRAW),R.drawArrays(R.TRIANGLES,0,6),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null)},blendFrames:function(g,x,C,M,R,P){M===void 0&&(M=1),R===void 0&&(R=!0),P===void 0&&(P=this.linearShader);var w=this.gl;this.setShader(P),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",M),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,g.texture),w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,x.texture),C?(w.bindFramebuffer(w.FRAMEBUFFER,C.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,C.texture,0),w.viewport(0,0,C.width,C.height)):w.viewport(0,0,g.width,g.height),R?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blendFramesAdditive:function(g,x,C,M,R){this.blendFrames(g,x,C,M,R,this.addShader)},clearFrame:function(g,x){x===void 0&&(x=!0);var C=this.gl;C.viewport(0,0,g.width,g.height),C.bindFramebuffer(C.FRAMEBUFFER,g.framebuffer),x?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT);var M=this.renderer.currentFramebuffer;C.bindFramebuffer(C.FRAMEBUFFER,M)},setUVs:function(g,x,C,M,R,P,w,A){var G=this.vertexViewF32;G[2]=g,G[3]=x,G[6]=C,G[7]=M,G[10]=R,G[11]=P,G[14]=g,G[15]=x,G[18]=R,G[19]=P,G[22]=w,G[23]=A},setTargetUVs:function(g,x){var C=x.height/g.height;C>.5?C=.5-(C-.5):C=.5+(.5-C),this.setUVs(0,C,0,1+C,1,1+C,1,C)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});h.exports=m},65641:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};h.exports=S},68726:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelineafterflush"},67186:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinebeforeflush"},22709:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinebind"},74469:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelineboot"},93953:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinedestroy"},51687:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelinerebind"},25034:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pipelineresize"},18970:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AFTER_FLUSH:e(68726),BEFORE_FLUSH:e(67186),BIND:e(22709),BOOT:e(74469),DESTROY:e(93953),REBIND:e(51687),RESIZE:e(25034)}},32469:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(87751),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.amount=1},onPreRender:function(l,r){l=this.getController(l),this.set1f("amount",l.amount,r)}});h.exports=u},2134:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(88222),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(l){l=this.getController(l),this.set1f("strength",l.blurStrength),this.set3fv("color",l.glcolor)},onDraw:function(l){var r=this.getController(),a=this.fullFrame1,v=this.fullFrame2;this.copyFrame(l,v);for(var o=2/l.width*r.offsetX,p=2/l.height*r.offsetY,m=0;m<r.steps;m++)this.set2f("offset",o,0),this.copySprite(l,a),this.set2f("offset",0,p),this.copySprite(a,l);this.blendFrames(v,l,a,r.strength),this.copyToGame(a)}});h.exports=u},63377:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(35491),c=e(75568),u=e(44481),l=e(80486),r=new d({Extends:l,initialize:function(v){l.call(this,{game:v,shaders:[{name:"Gaussian5",fragShader:y},{name:"Gaussian9",fragShader:c},{name:"Gaussian13",fragShader:u}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(a){var v=this.getController(),o=this.gl,p=this.fullFrame1,m=o.getParameter(o.FRAMEBUFFER_BINDING);this.bind(this.activeShader),o.activeTexture(o.TEXTURE0),o.viewport(0,0,a.width,a.height),this.set1i("uMainSampler",0),this.set2f("resolution",a.width,a.height),this.set1f("strength",v.strength),this.set3fv("color",v.glcolor);for(var g=0;g<v.steps;g++)this.set2f("offset",v.x,0),this.copySprite(a,p),this.set2f("offset",0,v.y),this.copySprite(p,a);o.bindFramebuffer(o.FRAMEBUFFER,m),o.bindTexture(o.TEXTURE_2D,null),this.copyToGame(a)}});h.exports=r},49745:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(69960),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(l,r,a,v){l=this.getController(l),this.set1f("radius",l.radius,r),this.set1f("amount",l.amount,r),this.set1f("contrast",l.contrast,r),this.set1f("strength",l.strength,r),this.set2f("blur",l.blurX,l.blurY,r),this.setBoolean("isTiltShift",l.isTiltShift,r),a&&v&&this.set2f("resolution",a,v,r)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});h.exports=u},4323:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(33754),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(l,r,a,v){l=this.getController(l),this.set1f("scale",l.scale,r),this.set1f("feather",l.feather,r),this.set1f("thickness",l.thickness,r),this.set3fv("color",l.glcolor,r),this.set4fv("backgroundColor",l.glcolor2,r),a&&v&&this.set2f("resolution",a,v,r)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});h.exports=u},92066:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(80486),c=new d({Extends:y,initialize:function(l){y.call(this,{game:l})},onDraw:function(u){var l=this.fullFrame1;this.controller?this.manager.drawFrame(u,l,!0,this.controller):this.drawFrame(u,l),this.copyToGame(l)}});h.exports=c},89581:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(35668),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(l){var r=this.game.textures.getFrame(l);r&&(this.glTexture=r.glTexture)},onDraw:function(l){var r=this.getController(),a=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",r.x,r.y),this.bindTexture(r.glTexture,1),this.copySprite(l,a),this.copyToGame(a)}});h.exports=u},55084:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=e(69675),u=e(80486),l=e(75512),r=new d({Extends:u,initialize:function(v,o){var p=y(o,"quality",.1),m=y(o,"distance",10);u.call(this,{game:v,fragShader:l.setGlowQuality(c,v,p,m)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(a,v,o,p){a=this.getController(a),this.set1f("outerStrength",a.outerStrength,v),this.set1f("innerStrength",a.innerStrength,v),this.set4fv("glowColor",a.glcolor,v),this.setBoolean("knockout",a.knockout,v),o&&p&&this.set2f("resolution",o,p,v)},onDraw:function(a){this.set2f("resolution",a.width,a.height),this.bindAndDraw(a)}});h.exports=r},41653:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(90993),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(l,r){l=this.getController(l),this.set1f("alpha",l.alpha,r),this.set1i("size",l.size,r),this.set3fv("color1",l.glcolor1,r),this.set3fv("color2",l.glcolor2,r),this.set2f("positionFrom",l.fromX,l.fromY,r),this.set2f("positionTo",l.toX,l.toY,r)}});h.exports=u},73416:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(37945),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.amount=1},onPreRender:function(l,r,a,v){l=this.getController(l),this.set1f("amount",l.amount,r),a&&v&&this.set2f("resolution",a,v,r)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});h.exports=u},58049:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(85718),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(l,r){l=this.getController(l);var a=l.samples;this.set1i("samples",a,r),this.set1f("intensity",l.intensity,r),this.set1f("decay",l.decay,r),this.set1f("power",l.power/a,r),this.set2f("lightPosition",l.x,l.y,r),this.set4fv("color",l.glcolor,r)}});h.exports=u},18026:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(13740),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(l,r,a,v){l=this.getController(l),this.setTime("time",r),this.set1f("speed",l.speed,r),this.set1f("lineWidth",l.lineWidth,r),this.set1f("gradient",l.gradient,r),this.setBoolean("reveal",l.reveal,r),a&&v&&this.set2f("resolution",a,v,r)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});h.exports=u},72381:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(80617),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(l,r){l=this.getController(l),this.set1f("radius",l.radius,r),this.set1f("strength",l.strength,r),this.set2f("position",l.x,l.y,r)}});h.exports=u},80542:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(62879),c=e(80486),u=new d({Extends:c,initialize:function(r){c.call(this,{game:r,fragShader:y}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(l,r){l=this.getController(l);var a=l.progress,v=l.wipeWidth,o=l.direction,p=l.axis;this.set4f("config",a,v,o,p,r),this.setBoolean("reveal",l.reveal,r)}});h.exports=u},58136:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Barrel:e(32469),Bloom:e(2134),Blur:e(63377),Bokeh:e(49745),Circle:e(4323),ColorMatrix:e(92066),Displacement:e(89581),Glow:e(55084),Gradient:e(41653),Pixelate:e(73416),Shadow:e(58049),Shine:e(18026),Vignette:e(72381),Wipe:e(80542)};h.exports=d},62253:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65641),y=e(98611),c={FX:e(58136),BitmapMaskPipeline:e(5583),Events:e(18970),FXPipeline:e(81828),LightPipeline:e(66901),MobilePipeline:e(71264),MultiPipeline:e(77310),PointLightPipeline:e(10919),PostFXPipeline:e(80486),PreFXPipeline:e(87228),RopePipeline:e(21213),SinglePipeline:e(51212),UtilityPipeline:e(60848)};c=y(!1,c,d),h.exports=c},2529:h=>{h.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:h=>{h.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:h=>{h.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:h=>{h.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:h=>{h.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:h=>{h.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:h=>{h.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:h=>{h.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:h=>{h.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:h=>{h.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:h=>{h.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:h=>{h.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:h=>{h.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:h=>{h.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:h=>{h.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:h=>{h.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:h=>{h.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:h=>{h.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:h=>{h.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:h=>{h.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:h=>{h.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:h=>{h.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:h=>{h.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:h=>{h.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:h=>{h.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:h=>{h.exports=["#define SHADER_NAME PHASER_MOBILE_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:h=>{h.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:h=>{h.exports=["#define SHADER_NAME PHASER_MULTI_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:h=>{h.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:h=>{h.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:h=>{h.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:h=>{h.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:h=>{h.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:h=>{h.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AddBlendFrag:e(2529),BitmapMaskFrag:e(91679),BitmapMaskVert:e(89053),ColorMatrixFrag:e(37486),CopyFrag:e(79060),FXBarrelFrag:e(87751),FXBloomFrag:e(88222),FXBlurHighFrag:e(44481),FXBlurLowFrag:e(35491),FXBlurMedFrag:e(75568),FXBokehFrag:e(69960),FXCircleFrag:e(33754),FXDisplacementFrag:e(35668),FXGlowFrag:e(69675),FXGradientFrag:e(90993),FXPixelateFrag:e(37945),FXShadowFrag:e(85718),FXShineFrag:e(13740),FXVignetteFrag:e(80617),FXWipeFrag:e(62879),LightFrag:e(65045),LinearBlendFrag:e(98921),MeshFrag:e(25005),MeshVert:e(94914),MobileFrag:e(11263),MobileVert:e(51852),MultiFrag:e(53787),MultiVert:e(15968),PointLightFrag:e(83327),PointLightVert:e(54677),PostFXFrag:e(12569),QuadVert:e(99365),SingleFrag:e(85060),SingleVert:e(18166)}},756:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(55301),y=e(56694),c=e(6659),u=e(40444),l=e(97081),r=e(74181),a=e(2893),v=e(9229),o=e(72283),p=e(74118),m=e(90881),g=e(84314),x=e(93736),C=e(47751),M=new y({Extends:c,initialize:function(P){c.call(this),this.game=P,this.canvas,this.canvasBounds=new p,this.parent=null,this.parentIsWindow=!1,this.parentSize=new m,this.gameSize=new m,this.baseSize=new m,this.displaySize=new m,this.scaleMode=d.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new x(1,1),this.autoRound=!1,this.autoCenter=d.CENTER.NO_CENTER,this.orientation=d.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:o,windowResize:o,fullScreenChange:o,fullScreenError:o}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(l.BOOT,this.boot,this)},boot:function(){var R=this.game;this.canvas=R.canvas,this.fullscreen=R.device.fullscreen,this.scaleMode!==d.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===d.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),R.events.on(l.PRE_STEP,this.step,this),R.events.once(l.READY,this.refresh,this),R.events.once(l.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(R){this.getParent(R),this.getParentBounds();var P=R.width,w=R.height,A=R.scaleMode,G=R.zoom,O=R.autoRound;if(typeof P=="string"){var L=this.parentSize.width;L===0&&(L=window.innerWidth);var I=parseInt(P,10)/100;P=Math.floor(L*I)}if(typeof w=="string"){var F=this.parentSize.height;F===0&&(F=window.innerHeight);var D=parseInt(w,10)/100;w=Math.floor(F*D)}this.scaleMode=A,this.autoRound=O,this.autoCenter=R.autoCenter,this.resizeInterval=R.resizeInterval,O&&(P=Math.floor(P),w=Math.floor(w)),this.gameSize.setSize(P,w),G===d.ZOOM.MAX_ZOOM&&(G=this.getMaxZoom()),this.zoom=G,G!==1&&(this._resetZoom=!0),this.baseSize.setSize(P,w),O&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),R.minWidth>0&&this.displaySize.setMin(R.minWidth*G,R.minHeight*G),R.maxWidth>0&&this.displaySize.setMax(R.maxWidth*G,R.maxHeight*G),this.displaySize.setSize(P,w),this.orientation=v(P,w)},getParent:function(R){var P=R.parent;if(P!==null){if(this.parent=a(P),this.parentIsWindow=this.parent===document.body,R.expandParent&&R.scaleMode!==d.SCALE_MODE.NONE){var w=this.parent.getBoundingClientRect();(this.parentIsWindow||w.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",w=this.parent.getBoundingClientRect(),!this.parentIsWindow&&w.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}R.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=a(R.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var R=this.parentSize,P=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(P.height=r(!0));var w=P.width,A=P.height;if(R.width!==w||R.height!==A)return R.setSize(w,A),!0;if(this.canvas){var G=this.canvasBounds,O=this.canvas.getBoundingClientRect();if(O.x!==G.x||O.y!==G.y)return!0}return!1},lockOrientation:function(R){var P=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return P?P.call(screen,R):!1},setParentSize:function(R,P){return this.parentSize.setSize(R,P),this.refresh()},setGameSize:function(R,P){var w=this.autoRound;w&&(R=Math.floor(R),P=Math.floor(P));var A=this.width,G=this.height;return this.gameSize.resize(R,P),this.baseSize.resize(R,P),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(R/P),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(A,G)},resize:function(R,P){var w=this.zoom,A=this.autoRound;A&&(R=Math.floor(R),P=Math.floor(P));var G=this.width,O=this.height;this.gameSize.resize(R,P),this.baseSize.resize(R,P),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(R*w,P*w),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var L=this.canvas.style,I=R*w,F=P*w;return A&&(I=Math.floor(I),F=Math.floor(F)),(I!==R||F!==P)&&(L.width=I+"px",L.height=F+"px"),this.refresh(G,O)},setZoom:function(R){return this.zoom=R,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(R,P){R===void 0&&(R=this.width),P===void 0&&(P=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var w=this.game.domContainer;if(w){this.baseSize.setCSS(w);var A=this.canvas.style,G=w.style;G.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",G.marginLeft=A.marginLeft,G.marginTop=A.marginTop}return this.emit(u.RESIZE,this.gameSize,this.baseSize,this.displaySize,R,P),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var R=v(this.width,this.height);R!==this.orientation&&(this.orientation=R,this.emit(u.ORIENTATION_CHANGE,R))}},updateScale:function(){var R=this.canvas.style,P=this.gameSize.width,w=this.gameSize.height,A,G,O=this.zoom,L=this.autoRound;this.scaleMode===d.SCALE_MODE.NONE?(this.displaySize.setSize(P*O,w*O),A=this.displaySize.width,G=this.displaySize.height,L&&(A=Math.floor(A),G=Math.floor(G)),this._resetZoom&&(R.width=A+"px",R.height=G+"px",this._resetZoom=!1)):this.scaleMode===d.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),A=this.displaySize.width,G=this.displaySize.height,L&&(A=Math.floor(A),G=Math.floor(G)),this.canvas.width=A,this.canvas.height=G):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),A=this.displaySize.width,G=this.displaySize.height,L&&(A=Math.floor(A),G=Math.floor(G)),R.width=A+"px",R.height=G+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var R=g(this.parentSize.width,this.gameSize.width,0,!0),P=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(R,P),1)},updateCenter:function(){var R=this.autoCenter;if(R!==d.CENTER.NO_CENTER){var P=this.canvas,w=P.style,A=P.getBoundingClientRect(),G=A.width,O=A.height,L=Math.floor((this.parentSize.width-G)/2),I=Math.floor((this.parentSize.height-O)/2);R===d.CENTER.CENTER_HORIZONTALLY?I=0:R===d.CENTER.CENTER_VERTICALLY&&(L=0),w.marginLeft=L+"px",w.marginTop=I+"px"}},updateBounds:function(){var R=this.canvasBounds,P=this.canvas.getBoundingClientRect();R.x=P.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),R.y=P.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),R.width=P.width,R.height=P.height},transformX:function(R){return(R-this.canvasBounds.left)*this.displayScale.x},transformY:function(R){return(R-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(R){R===void 0&&(R={navigationUI:"hide"});var P=this.fullscreen;if(!P.available){this.emit(u.FULLSCREEN_UNSUPPORTED);return}if(!P.active){var w=this.getFullscreenTarget();P.keyboard?w[P.request](Element.ALLOW_KEYBOARD_INPUT):w[P.request](R)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(u.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(R){this.removeFullscreenTarget(),this.emit(u.FULLSCREEN_FAILED,R)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var R=document.createElement("div");R.style.margin="0",R.style.padding="0",R.style.width="100%",R.style.height="100%",this.fullscreenTarget=R,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var P=this.canvas.parentNode;P.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var R=this.fullscreenTarget;if(R&&R.parentNode){var P=R.parentNode;P.insertBefore(this.canvas,R),P.removeChild(R)}}},stopFullscreen:function(){var R=this.fullscreen;if(!R.available)return this.emit(u.FULLSCREEN_UNSUPPORTED),!1;R.active&&document[R.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(u.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(R){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(R)},startListeners:function(){var R=this,P=this.domlisteners;if(P.orientationChange=function(){R.updateBounds(),R._checkOrientation=!0,R.dirty=!0},P.windowResize=function(){R.updateBounds(),R.dirty=!0},window.addEventListener("orientationchange",P.orientationChange,!1),window.addEventListener("resize",P.windowResize,!1),this.fullscreen.available){P.fullScreenChange=function(A){return R.onFullScreenChange(A)},P.fullScreenError=function(A){return R.onFullScreenError(A)};var w=["webkit","moz",""];w.forEach(function(A){document.addEventListener(A+"fullscreenchange",P.fullScreenChange,!1),document.addEventListener(A+"fullscreenerror",P.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",P.fullScreenChange,!1),document.addEventListener("MSFullscreenError",P.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(R,P){R instanceof C||(P=R,R=void 0),P===void 0&&(P=new p);var w=this.baseSize,A=this.parentSize,G=this.canvasBounds,O=this.displayScale,L=G.x>=0?0:-(G.x*O.x),I=G.y>=0?0:-(G.y*O.y),F;A.width>=G.width?F=w.width:F=w.width-(G.width-A.width)*O.x;var D;return A.height>=G.height?D=w.height:D=w.height-(G.height-A.height)*O.y,P.setTo(L,I,F,D),R&&(P.width/=R.zoomX,P.height/=R.zoomY,P.centerX=R.centerX+R.scrollX,P.centerY=R.centerY+R.scrollY),P},step:function(R,P){this.parent&&(this._lastCheck+=P,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var R=this.domlisteners;window.removeEventListener("orientationchange",R.orientationChange,!1),window.removeEventListener("resize",R.windowResize,!1);var P=["webkit","moz",""];P.forEach(function(w){document.removeEventListener(w+"fullscreenchange",R.fullScreenChange,!1),document.removeEventListener(w+"fullscreenerror",R.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",R.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",R.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===d.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===d.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});h.exports=M},35098:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={CENTER:e(35098),ORIENTATION:e(53539),SCALE_MODE:e(12637),ZOOM:e(10217)};h.exports=d},82085:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="enterfullscreen"},11826:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="fullscreenfailed"},56691:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="fullscreenunsupported"},34739:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="leavefullscreen"},26681:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="orientationchange"},11428:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resize"},40444:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ENTER_FULLSCREEN:e(82085),FULLSCREEN_FAILED:e(11826),FULLSCREEN_UNSUPPORTED:e(56691),LEAVE_FULLSCREEN:e(34739),ORIENTATION_CHANGE:e(26681),RESIZE:e(11428)}},86754:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),y=e(55301),c={Center:e(35098),Events:e(40444),Orientation:e(53539),ScaleManager:e(756),ScaleModes:e(12637),Zoom:e(10217)};c=d(!1,c,y.CENTER),c=d(!1,c,y.ORIENTATION),c=d(!1,c,y.SCALE_MODE),c=d(!1,c,y.ZOOM),h.exports=c},47736:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),y=e(40587),c=function(u){var l=u.game.config.defaultPhysicsSystem,r=d(u.settings,"physics",!1);if(!(!l&&!r)){var a=[];if(l&&a.push(y(l+"Physics")),r)for(var v in r)v=y(v.concat("Physics")),a.indexOf(v)===-1&&a.push(v);return a}};h.exports=c},91088:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),y=function(c){var u=c.plugins.getDefaultScenePlugins(),l=d(c.settings,"plugins",!1);return Array.isArray(l)?l:u||[]};h.exports=y},90415:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};h.exports=S},87157:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(63946),c=new d({initialize:function(l){this.sys=new y(this,l),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});h.exports=c},13553:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(92980),c=e(7599),u=e(97081),l=e(10850),r=e(683),a=e(72283),v=e(87157),o=e(63946),p=new d({initialize:function(g,x){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,x){Array.isArray(x)||(x=[x]);for(var C=0;C<x.length;C++)this._pending.push({key:"default",scene:x[C],autoStart:C===0,data:{}})}g.events.once(u.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new v);var m,g,x,C;for(m=0;m<this._pending.length;m++){g=this._pending[m],x=g.key,C=g.scene;var M;C instanceof v?M=this.createSceneFromInstance(x,C):typeof C=="object"?M=this.createSceneFromObject(x,C):typeof C=="function"&&(M=this.createSceneFromFunction(x,C)),x=M.sys.settings.key,this.keys[x]=M,this.scenes.push(M),this._data[x]&&(M.sys.settings.data=this._data[x].data,this._data[x].autoStart&&(g.autoStart=!0)),(g.autoStart||M.sys.settings.active)&&this._start.push(x)}for(this._pending.length=0,this._data={},this.isBooted=!0,m=0;m<this._start.length;m++)g=this._start[m],this.start(g);this._start.length=0}},processQueue:function(){var m=this._pending.length,g=this._queue.length;if(!(m===0&&g===0)){var x,C;if(m){for(x=0;x<m;x++)C=this._pending[x],this.add(C.key,C.scene,C.autoStart,C.data);for(x=0;x<this._start.length;x++)C=this._start[x],this.start(C);this._start.length=0,this._pending.length=0}for(x=0;x<this._queue.length;x++)C=this._queue[x],this[C.op](C.keyA,C.keyB);this._queue.length=0}},add:function(m,g,x,C){if(x===void 0&&(x=!1),C===void 0&&(C={}),this.isProcessing||!this.isBooted)return this._pending.push({key:m,scene:g,autoStart:x,data:C}),this.isBooted||(this._data[m]={data:C}),null;m=this.getKey(m,g);var M;return g instanceof v?M=this.createSceneFromInstance(m,g):typeof g=="object"?(g.key=m,M=this.createSceneFromObject(m,g)):typeof g=="function"&&(M=this.createSceneFromFunction(m,g)),M.sys.settings.data=C,m=M.sys.settings.key,this.keys[m]=M,this.scenes.push(M),(x||M.sys.settings.active)&&(this._pending.length?this._start.push(m):this.start(m)),M},remove:function(m){if(this.isProcessing)this._queue.push({op:"remove",keyA:m,keyB:null});else{var g=this.getScene(m);if(!g||g.sys.isTransitioning())return this;var x=this.scenes.indexOf(g),C=g.sys.settings.key;x>-1&&(delete this.keys[C],this.scenes.splice(x,1),this._start.indexOf(C)>-1&&(x=this._start.indexOf(C),this._start.splice(x,1)),g.sys.destroy())}return this},bootScene:function(m){var g=m.sys,x=g.settings;g.sceneUpdate=a,m.init&&(m.init.call(m,x.data),x.status=y.INIT,x.isTransition&&g.events.emit(c.TRANSITION_INIT,x.transitionFrom,x.transitionDuration));var C;g.load&&(C=g.load,C.reset()),C&&m.preload?(m.preload.call(m),x.status=y.LOADING,C.once(r.COMPLETE,this.loadComplete,this),C.start()):this.create(m)},loadComplete:function(m){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(m.scene)},payloadComplete:function(m){this.bootScene(m.scene)},update:function(m,g){this.processQueue(),this.isProcessing=!0;for(var x=this.scenes.length-1;x>=0;x--){var C=this.scenes[x].sys;C.settings.status>y.START&&C.settings.status<=y.RUNNING&&C.step(m,g),C.scenePlugin._target&&C.scenePlugin.step(m,g)}},render:function(m){for(var g=0;g<this.scenes.length;g++){var x=this.scenes[g].sys;x.settings.visible&&x.settings.status>=y.LOADING&&x.settings.status<y.SLEEPING&&x.render(m)}this.isProcessing=!1},create:function(m){var g=m.sys,x=g.settings;m.create&&(x.status=y.CREATING,m.create.call(m,x.data),x.status===y.DESTROYED)||(x.isTransition&&g.events.emit(c.TRANSITION_START,x.transitionFrom,x.transitionDuration),m.update&&(g.sceneUpdate=m.update),x.status=y.RUNNING,g.events.emit(c.CREATE,m))},createSceneFromFunction:function(m,g){var x=new g;if(x instanceof v){var C=x.sys.settings.key;if(C!==""&&(m=C),this.keys.hasOwnProperty(m))throw new Error("Cannot add a Scene with duplicate key: "+m);return this.createSceneFromInstance(m,x)}else return x.sys=new o(x),x.sys.settings.key=m,x.sys.init(this.game),x},createSceneFromInstance:function(m,g){var x=g.sys.settings.key;return x===""&&(g.sys.settings.key=m),g.sys.init(this.game),g},createSceneFromObject:function(m,g){var x=new v(g),C=x.sys.settings.key;C!==""?m=C:x.sys.settings.key=m,x.sys.init(this.game);for(var M=["init","preload","create","update","render"],R=0;R<M.length;R++){var P=l(g,M[R],null);P&&(x[M[R]]=P)}if(g.hasOwnProperty("extend")){for(var w in g.extend)if(g.extend.hasOwnProperty(w)){var A=g.extend[w];w==="data"&&x.hasOwnProperty("data")&&typeof A=="object"?x.data.merge(A):w!=="sys"&&(x[w]=A)}}return x},getKey:function(m,g){if(m||(m="default"),typeof g=="function")return m;if(g instanceof v?m=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(m=g.key),this.keys.hasOwnProperty(m))throw new Error("Cannot add a Scene with duplicate key: "+m);return m},getScenes:function(m,g){m===void 0&&(m=!0),g===void 0&&(g=!1);for(var x=[],C=this.scenes,M=0;M<C.length;M++){var R=C[M];R&&(!m||m&&R.sys.isActive())&&x.push(R)}return g?x.reverse():x},getScene:function(m){if(typeof m=="string"){if(this.keys[m])return this.keys[m]}else for(var g=0;g<this.scenes.length;g++)if(m===this.scenes[g])return m;return null},isActive:function(m){var g=this.getScene(m);return g?g.sys.isActive():null},isPaused:function(m){var g=this.getScene(m);return g?g.sys.isPaused():null},isVisible:function(m){var g=this.getScene(m);return g?g.sys.isVisible():null},isSleeping:function(m){var g=this.getScene(m);return g?g.sys.isSleeping():null},pause:function(m,g){var x=this.getScene(m);return x&&x.sys.pause(g),this},resume:function(m,g){var x=this.getScene(m);return x&&x.sys.resume(g),this},sleep:function(m,g){var x=this.getScene(m);return x&&!x.sys.isTransitioning()&&x.sys.sleep(g),this},wake:function(m,g){var x=this.getScene(m);return x&&x.sys.wake(g),this},run:function(m,g){var x=this.getScene(m);if(!x){for(var C=0;C<this._pending.length;C++)if(this._pending[C].key===m){this.queueOp("start",m,g);break}return this}x.sys.isSleeping()?x.sys.wake(g):x.sys.isPaused()?x.sys.resume(g):this.start(m,g)},start:function(m,g){if(!this.isBooted)return this._data[m]={autoStart:!0,data:g},this;var x=this.getScene(m);if(!x)return console.warn("Scene not found for key: "+m),this;var C=x.sys,M=C.settings.status;if(M>=y.START&&M<=y.CREATING)return this;if(M>=y.RUNNING&&M<=y.SLEEPING)C.shutdown(),C.sceneUpdate=a,C.start(g);else{C.sceneUpdate=a,C.start(g);var R;if(C.load&&(R=C.load),R&&C.settings.hasOwnProperty("pack")&&(R.reset(),R.addPack({payload:C.settings.pack})))return C.settings.status=y.LOADING,R.once(r.COMPLETE,this.payloadComplete,this),R.start(),this}return this.bootScene(x),this},stop:function(m,g){var x=this.getScene(m);if(x&&!x.sys.isTransitioning()&&x.sys.settings.status!==y.SHUTDOWN){var C=x.sys.load;C&&(C.off(r.COMPLETE,this.loadComplete,this),C.off(r.COMPLETE,this.payloadComplete,this)),x.sys.shutdown(g)}return this},switch:function(m,g){var x=this.getScene(m),C=this.getScene(g);return x&&C&&x!==C&&(this.sleep(m),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(m){return this.scenes[m]},getIndex:function(m){var g=this.getScene(m);return this.scenes.indexOf(g)},bringToTop:function(m){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:m,keyB:null});else{var g=this.getIndex(m);if(g!==-1&&g<this.scenes.length){var x=this.getScene(m);this.scenes.splice(g,1),this.scenes.push(x)}}return this},sendToBack:function(m){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:m,keyB:null});else{var g=this.getIndex(m);if(g!==-1&&g>0){var x=this.getScene(m);this.scenes.splice(g,1),this.scenes.unshift(x)}}return this},moveDown:function(m){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:m,keyB:null});else{var g=this.getIndex(m);if(g>0){var x=g-1,C=this.getScene(m),M=this.getAt(x);this.scenes[g]=M,this.scenes[x]=C}}return this},moveUp:function(m){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:m,keyB:null});else{var g=this.getIndex(m);if(g<this.scenes.length-1){var x=g+1,C=this.getScene(m),M=this.getAt(x);this.scenes[g]=M,this.scenes[x]=C}}return this},moveAbove:function(m,g){if(m===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:m,keyB:g});else{var x=this.getIndex(m),C=this.getIndex(g);if(x!==-1&&C!==-1&&C<x){var M=this.getAt(C);this.scenes.splice(C,1),this.scenes.splice(x+(C>x),0,M)}}return this},moveBelow:function(m,g){if(m===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:m,keyB:g});else{var x=this.getIndex(m),C=this.getIndex(g);if(x!==-1&&C!==-1&&C>x){var M=this.getAt(C);this.scenes.splice(C,1),x===0?this.scenes.unshift(M):this.scenes.splice(x-(C<x),0,M)}}return this},queueOp:function(m,g,x){return this._queue.push({op:m,keyA:g,keyB:x}),this},swapPosition:function(m,g){if(m===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:m,keyB:g});else{var x=this.getIndex(m),C=this.getIndex(g);if(x!==C&&x!==-1&&C!==-1){var M=this.getAt(x);this.scenes[x]=this.scenes[C],this.scenes[C]=M}}return this},dump:function(){for(var m=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],x=0;x<this.scenes.length;x++){var C=this.scenes[x].sys,M=C.settings.visible&&(C.settings.status===y.RUNNING||C.settings.status===y.PAUSED)?"[*] ":"[-] ";M+=C.settings.key+" ("+g[C.settings.status]+")",m.push(M)}console.log(m.join(`
`))},destroy:function(){for(var m=0;m<this.scenes.length;m++){var g=this.scenes[m].sys;g.destroy()}this.systemScene.sys.destroy(),this.update=a,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});h.exports=p},64051:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=e(56694),c=e(7599),u=e(72632),l=e(91963),r=new y({initialize:function(v){this.scene=v,this.systems=v.sys,this.settings=v.sys.settings,this.key=v.sys.settings.key,this.manager=v.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,v.sys.events.once(c.BOOT,this.boot,this),v.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},start:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",a,v),this},restart:function(a){var v=this.key;return this.manager.queueOp("stop",v),this.manager.queueOp("start",v,a),this},transition:function(a){a===void 0&&(a={});var v=u(a,"target",!1),o=this.manager.getScene(v);if(!v||!this.checkValidTransition(o))return!1;var p=u(a,"duration",1e3);this._elapsed=0,this._target=o,this._duration=p,this._willSleep=u(a,"sleep",!1),this._willRemove=u(a,"remove",!1);var m=u(a,"onUpdate",null);m&&(this._onUpdate=m,this._onUpdateScope=u(a,"onUpdateScope",this.scene));var g=u(a,"allowInput",!1);this.settings.transitionAllowInput=g;var x=o.sys.settings;x.isTransition=!0,x.transitionFrom=this.scene,x.transitionDuration=p,x.transitionAllowInput=g,u(a,"moveAbove",!1)?this.manager.moveAbove(this.key,v):u(a,"moveBelow",!1)&&this.manager.moveBelow(this.key,v),o.sys.isSleeping()?o.sys.wake(u(a,"data")):this.manager.start(v,u(a,"data"));var C=u(a,"onStart",null),M=u(a,"onStartScope",this.scene);return C&&C.call(M,this.scene,o,p),this.systems.events.emit(c.TRANSITION_OUT,o,p),!0},checkValidTransition:function(a){return!(!a||a.sys.isActive()||a.sys.isTransitioning()||a===this.scene||this.systems.isTransitioning())},step:function(a,v){this._elapsed+=v,this.transitionProgress=d(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var a=this._target.sys,v=this._target.sys.settings;a.events.emit(c.TRANSITION_COMPLETE,this.scene),v.isTransition=!1,v.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(a,v,o,p){return this.manager.add(a,v,o,p)},launch:function(a,v){return a&&a!==this.key&&this.manager.queueOp("start",a,v),this},run:function(a,v){return a&&a!==this.key&&this.manager.queueOp("run",a,v),this},pause:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("pause",a,v),this},resume:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("resume",a,v),this},sleep:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("sleep",a,v),this},wake:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("wake",a,v),this},switch:function(a){return a!==this.key&&this.manager.queueOp("switch",this.key,a),this},stop:function(a,v){return a===void 0&&(a=this.key),this.manager.queueOp("stop",a,v),this},setActive:function(a,v,o){v===void 0&&(v=this.key);var p=this.manager.getScene(v);return p&&p.sys.setActive(a,o),this},setVisible:function(a,v){v===void 0&&(v=this.key);var o=this.manager.getScene(v);return o&&o.sys.setVisible(a),this},isSleeping:function(a){return a===void 0&&(a=this.key),this.manager.isSleeping(a)},isActive:function(a){return a===void 0&&(a=this.key),this.manager.isActive(a)},isPaused:function(a){return a===void 0&&(a=this.key),this.manager.isPaused(a)},isVisible:function(a){return a===void 0&&(a=this.key),this.manager.isVisible(a)},swapPosition:function(a,v){return v===void 0&&(v=this.key),a!==v&&this.manager.swapPosition(a,v),this},moveAbove:function(a,v){return v===void 0&&(v=this.key),a!==v&&this.manager.moveAbove(a,v),this},moveBelow:function(a,v){return v===void 0&&(v=this.key),a!==v&&this.manager.moveBelow(a,v),this},remove:function(a){return a===void 0&&(a=this.key),this.manager.remove(a),this},moveUp:function(a){return a===void 0&&(a=this.key),this.manager.moveUp(a),this},moveDown:function(a){return a===void 0&&(a=this.key),this.manager.moveDown(a),this},bringToTop:function(a){return a===void 0&&(a=this.key),this.manager.bringToTop(a),this},sendToBack:function(a){return a===void 0&&(a=this.key),this.manager.sendToBack(a),this},get:function(a){return this.manager.getScene(a)},getStatus:function(a){var v=this.manager.getScene(a);if(v)return v.sys.getStatus()},getIndex:function(a){return a===void 0&&(a=this.key),this.manager.getIndex(a)},shutdown:function(){var a=this.systems.events;a.off(c.SHUTDOWN,this.shutdown,this),a.off(c.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});l.register("ScenePlugin",r,"scenePlugin"),h.exports=r},36765:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92980),y=e(10850),c=e(30657),u=e(90415),l={create:function(r){return typeof r=="string"?r={key:r}:r===void 0&&(r={}),{status:d.PENDING,key:y(r,"key",""),active:y(r,"active",!1),visible:y(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:y(r,"pack",!1),cameras:y(r,"cameras",null),map:y(r,"map",c(u,y(r,"mapAdd",{}))),physics:y(r,"physics",{}),loader:y(r,"loader",{}),plugins:y(r,"plugins",!1),input:y(r,"input",{})}}};h.exports=l},63946:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(92980),c=e(18360),u=e(7599),l=e(47736),r=e(91088),a=e(72283),v=e(36765),o=new d({initialize:function(m,g){this.scene=m,this.game,this.renderer,this.config=g,this.settings=v.create(g),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=a},init:function(p){this.settings.status=y.INIT,this.sceneUpdate=a,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var m=p.plugins;this.plugins=m,m.addToScene(this,c.Global,[c.CoreScene,r(this),l(this)]),this.events.emit(u.BOOT,this),this.settings.isBooted=!0},step:function(p,m){var g=this.events;g.emit(u.PRE_UPDATE,p,m),g.emit(u.UPDATE,p,m),this.sceneUpdate.call(this.scene,p,m),g.emit(u.POST_UPDATE,p,m)},render:function(p){var m=this.displayList;m.depthSort(),this.events.emit(u.PRE_RENDER,p),this.cameras.render(p,m),this.events.emit(u.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var m=this.settings,g=this.getStatus();return g!==y.CREATING&&g!==y.RUNNING?console.warn("Cannot pause non-running Scene",m.key):this.settings.active&&(m.status=y.PAUSED,m.active=!1,this.events.emit(u.PAUSE,this,p)),this},resume:function(p){var m=this.events,g=this.settings;return this.settings.active||(g.status=y.RUNNING,g.active=!0,m.emit(u.RESUME,this,p)),this},sleep:function(p){var m=this.settings,g=this.getStatus();return g!==y.CREATING&&g!==y.RUNNING?console.warn("Cannot sleep non-running Scene",m.key):(m.status=y.SLEEPING,m.active=!1,m.visible=!1,this.events.emit(u.SLEEP,this,p)),this},wake:function(p){var m=this.events,g=this.settings;return g.status=y.RUNNING,g.active=!0,g.visible=!0,m.emit(u.WAKE,this,p),g.isTransition&&m.emit(u.TRANSITION_WAKE,g.transitionFrom,g.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var p=this.settings.status;return p>y.PENDING&&p<=y.RUNNING},isSleeping:function(){return this.settings.status===y.SLEEPING},isActive:function(){return this.settings.status===y.RUNNING},isPaused:function(){return this.settings.status===y.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,m){return p?this.resume(m):this.pause(m)},start:function(p){var m=this.events,g=this.settings;p&&(g.data=p),g.status=y.START,g.active=!0,g.visible=!0,m.emit(u.START,this),m.emit(u.READY,this,p)},shutdown:function(p){var m=this.events,g=this.settings;m.off(u.TRANSITION_INIT),m.off(u.TRANSITION_START),m.off(u.TRANSITION_COMPLETE),m.off(u.TRANSITION_OUT),g.status=y.SHUTDOWN,g.active=!1,g.visible=!1,m.emit(u.SHUTDOWN,this,p)},destroy:function(){var p=this.events,m=this.settings;m.status=y.DESTROYED,m.active=!1,m.visible=!1,p.emit(u.DESTROY,this),p.removeAllListeners();for(var g=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<g.length;x++)this[g[x]]=null}});h.exports=o},92980:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};h.exports=S},31803:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addedtoscene"},94817:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="boot"},28977:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="create"},91959:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},363:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},15643:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="postupdate"},17058:h=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="prerender"},77125:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="preupdate"},76018:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="ready"},28620:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removedfromscene"},41538:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="render"},34268:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},2342:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="shutdown"},96541:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="sleep"},74244:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},17046:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitioncomplete"},13637:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitioninit"},14733:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitionout"},33899:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitionstart"},52418:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="transitionwake"},31735:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},8470:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="wake"},7599:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADDED_TO_SCENE:e(31803),BOOT:e(94817),CREATE:e(28977),DESTROY:e(91959),PAUSE:e(363),POST_UPDATE:e(15643),PRE_RENDER:e(17058),PRE_UPDATE:e(77125),READY:e(76018),REMOVED_FROM_SCENE:e(28620),RENDER:e(41538),RESUME:e(34268),SHUTDOWN:e(2342),SLEEP:e(96541),START:e(74244),TRANSITION_COMPLETE:e(17046),TRANSITION_INIT:e(13637),TRANSITION_OUT:e(14733),TRANSITION_START:e(33899),TRANSITION_WAKE:e(52418),UPDATE:e(31735),WAKE:e(8470)}},20436:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92980),y=e(98611),c={Events:e(7599),GetPhysicsPlugins:e(47736),GetScenePlugins:e(91088),SceneManager:e(13553),ScenePlugin:e(64051),Settings:e(36765),Systems:e(63946)};c=y(!1,c,d),h.exports=c},25798:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(6659),c=e(76038),u=e(98611),l=e(72283),r=new d({Extends:y,initialize:function(v,o,p){y.call(this),this.manager=v,this.key=o,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=u(this.config,p),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(a){return!a||!a.name||typeof a.name!="string"?!1:this.markers[a.name]?(console.error("addMarker "+a.name+" already exists in Sound"),!1):(a=u(!0,{name:"",start:0,duration:this.totalDuration-(a.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},a),this.markers[a.name]=a,!0)},updateMarker:function(a){return!a||!a.name||typeof a.name!="string"?!1:this.markers[a.name]?(this.markers[a.name]=u(!0,this.markers[a.name],a),!0):(console.warn("Audio Marker: "+a.name+" missing in Sound: "+this.key),!1)},removeMarker:function(a){var v=this.markers[a];return v?(this.markers[a]=null,v):null},play:function(a,v){if(a===void 0&&(a=""),typeof a=="object"&&(v=a,a=""),typeof a!="string")return!1;if(!a)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[a])return console.warn("Marker: "+a+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[a],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=u(this.currentConfig,v),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:l,calculateRate:function(){var a=1.0005777895065548,v=this.currentConfig.detune+this.manager.detune,o=Math.pow(a,v);this.totalRate=this.currentConfig.rate*this.manager.rate*o},destroy:function(){this.pendingRemove||(this.emit(c.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});h.exports=r},12486:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(32742),c=e(6659),u=e(76038),l=e(97081),r=e(71608),a=e(51463),v=e(72283),o=e(93736),p=new d({Extends:c,initialize:function(g){c.call(this),this.game=g,this.jsonCache=g.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new o,g.events.on(l.BLUR,this.onGameBlur,this),g.events.on(l.FOCUS,this.onGameFocus,this),g.events.on(l.PRE_STEP,this.update,this),g.events.once(l.DESTROY,this.destroy,this)},add:v,addAudioSprite:function(m,g){g===void 0&&(g={});var x=this.add(m,g);x.spritemap=this.jsonCache.get(m).spritemap;for(var C in x.spritemap)if(x.spritemap.hasOwnProperty(C)){var M=y(g),R=x.spritemap[C];M.loop=R.hasOwnProperty("loop")?R.loop:!1,x.addMarker({name:C,start:R.start,duration:R.end-R.start,config:M})}return x},get:function(m){return a(this.sounds,"key",m)},getAll:function(m){return m?r(this.sounds,"key",m):r(this.sounds)},getAllPlaying:function(){return r(this.sounds,"isPlaying",!0)},play:function(m,g){var x=this.add(m);return x.once(u.COMPLETE,x.destroy,x),g?g.name?(x.addMarker(g),x.play(g.name)):x.play(g):x.play()},playAudioSprite:function(m,g,x){var C=this.addAudioSprite(m);return C.once(u.COMPLETE,C.destroy,C),C.play(g,x)},remove:function(m){var g=this.sounds.indexOf(m);return g!==-1?(m.destroy(),this.sounds.splice(g,1),!0):!1},removeAll:function(){this.sounds.forEach(function(m){m.destroy()}),this.sounds.length=0},removeByKey:function(m){for(var g=0,x=this.sounds.length-1;x>=0;x--){var C=this.sounds[x];C.key===m&&(C.destroy(),this.sounds.splice(x,1),g++)}return g},pauseAll:function(){this.forEachActiveSound(function(m){m.pause()}),this.emit(u.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(m){m.resume()}),this.emit(u.RESUME_ALL,this)},setListenerPosition:v,stopAll:function(){this.forEachActiveSound(function(m){m.stop()}),this.emit(u.STOP_ALL,this)},stopByKey:function(m){var g=0;return this.getAll(m).forEach(function(x){x.stop()&&g++}),g},unlock:v,onBlur:v,onFocus:v,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(m,g){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(u.UNLOCKED,this));for(var x=this.sounds.length-1;x>=0;x--)this.sounds[x].pendingRemove&&this.sounds.splice(x,1);this.sounds.forEach(function(C){C.update(m,g)})},destroy:function(){this.game.events.off(l.BLUR,this.onGameBlur,this),this.game.events.off(l.FOCUS,this.onGameFocus,this),this.game.events.off(l.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(m,g){var x=this;this.sounds.forEach(function(C,M){C&&!C.pendingRemove&&m.call(g||x,C,M,x.sounds)})},setRate:function(m){return this.rate=m,this},rate:{get:function(){return this._rate},set:function(m){this._rate=m,this.forEachActiveSound(function(g){g.calculateRate()}),this.emit(u.GLOBAL_RATE,this,m)}},setDetune:function(m){return this.detune=m,this},detune:{get:function(){return this._detune},set:function(m){this._detune=m,this.forEachActiveSound(function(g){g.calculateRate()}),this.emit(u.GLOBAL_DETUNE,this,m)}}});h.exports=p},84191:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27622),y=e(17546),c=e(55491),u={create:function(l){var r=l.config.audio,a=l.device.audio;return r.noAudio||!a.webAudio&&!a.audioData?new y(l):a.webAudio&&!r.disableWebAudio?new c(l):new d(l)}};h.exports=u},77578:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},19679:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="decodedall"},56951:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="decoded"},16436:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="destroy"},55154:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="detune"},57818:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="detune"},57890:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="mute"},83022:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="rate"},99170:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="volume"},64289:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="looped"},67214:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loop"},53128:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="mute"},73078:h=>{/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pan"},76763:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pauseall"},88426:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},13765:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="play"},80291:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="rate"},11124:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resumeall"},55382:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},71157:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="seek"},31776:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stopall"},39450:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},21939:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="unlocked"},33019:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="volume"},76038:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={COMPLETE:e(77578),DECODED:e(56951),DECODED_ALL:e(19679),DESTROY:e(16436),DETUNE:e(55154),GLOBAL_DETUNE:e(57818),GLOBAL_MUTE:e(57890),GLOBAL_RATE:e(83022),GLOBAL_VOLUME:e(99170),LOOP:e(67214),LOOPED:e(64289),MUTE:e(53128),PAN:e(73078),PAUSE_ALL:e(76763),PAUSE:e(88426),PLAY:e(13765),RATE:e(80291),RESUME_ALL:e(11124),RESUME:e(55382),SEEK:e(71157),STOP_ALL:e(31776),STOP:e(39450),UNLOCKED:e(21939),VOLUME:e(33019)}},34350:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25798),y=e(56694),c=e(76038),u=e(82897),l=new y({Extends:d,initialize:function(a,v,o){if(o===void 0&&(o={}),this.tags=a.game.cache.audio.get(v),!this.tags)throw new Error('No cached audio asset with key "'+v);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,d.call(this,a,v,o)},play:function(r,a){return this.manager.isLocked(this,"play",[r,a])||!d.prototype.play.call(this,r,a)||!this.pickAndPlayAudioTag()?!1:(this.emit(c.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!d.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(c.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!d.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(c.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!d.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(c.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var r=this.currentConfig.seek,a=this.currentConfig.delay,v=(this.currentMarker?this.currentMarker.start:0)+r;return this.previousTime=v,this.audio.currentTime=v,this.applyConfig(),a===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+a*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var a=this.tags[r];if(a.dataset.used==="false")return a.dataset.used="true",this.audio=a,!0}if(!this.manager.override)return!1;var v=[];this.manager.forEachActiveSound(function(p){p.key===this.key&&p.audio&&v.push(p)},this),v.sort(function(p,m){return p.loop===m.loop?m.seek/m.duration-p.seek/p.duration:p.loop?1:-1});var o=v[0];return this.audio=o.audio,o.reset(),o.audio=null,o.startTime=0,o.previousTime=0,!0},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(a){console.warn(a)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){d.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(this.isPlaying){if(this.startTime>0){this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var a=this.currentMarker?this.currentMarker.start:0,v=a+this.duration,o=this.audio.currentTime;if(this.currentConfig.loop)o>=v-this.manager.loopEndOffset?(this.audio.currentTime=a+Math.max(0,o-v),o=this.audio.currentTime):o<a&&(this.audio.currentTime+=a,o=this.audio.currentTime),o<this.previousTime&&this.emit(c.LOOPED,this);else if(o>=v){this.reset(),this.stopAndReleaseAudioTag(),this.emit(c.COMPLETE,this);return}this.previousTime=o}},destroy:function(){d.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=u(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){d.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,!this.manager.isLocked(this,"mute",r)&&(this.updateMute(),this.emit(c.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,!this.manager.isLocked(this,"volume",r)&&(this.updateVolume(),this.emit(c.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,!this.manager.isLocked(this,c.RATE,r)&&(this.calculateRate(),this.emit(c.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,!this.manager.isLocked(this,c.DETUNE,r)&&(this.calculateRate(),this.emit(c.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||this.startTime>0||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(c.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,!this.manager.isLocked(this,"loop",r)&&(this.audio&&(this.audio.loop=r),this.emit(c.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(c.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});h.exports=l},27622:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12486),y=e(56694),c=e(76038),u=e(34350),l=new y({Extends:d,initialize:function(a){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,d.call(this,a)},add:function(r,a){var v=new u(this,r,a);return this.sounds.push(v),v},unlock:function(){this.locked=!1;var r=this;if(this.game.cache.audio.entries.each(function(p,m){for(var g=0;g<m.length;g++)if(m[g].dataset.locked==="true")return r.locked=!0,!1;return!0}),!!this.locked){var a=!1,v=function(){a=!0},o=function(){if(a){a=!1;return}document.body.removeEventListener("touchmove",v),document.body.removeEventListener("touchend",o);var p=[];if(r.game.cache.audio.entries.each(function(g,x){for(var C=0;C<x.length;C++){var M=x[C];M.dataset.locked==="true"&&p.push(M)}return!0}),p.length!==0){var m=p[p.length-1];m.oncanplaythrough=function(){m.oncanplaythrough=null,p.forEach(function(g){g.dataset.locked="false"}),r.unlocked=!0},p.forEach(function(g){g.load()})}};this.once(c.UNLOCKED,function(){for(this.forEachActiveSound(function(m){m.currentMarker===null&&m.duration===0&&(m.duration=m.tags[0].duration),m.totalDuration=m.tags[0].duration});this.lockedActionsQueue.length;){var p=this.lockedActionsQueue.shift();p.sound[p.prop].apply?p.sound[p.prop].apply(p.sound,p.value||[]):p.sound[p.prop]=p.value}},this),document.body.addEventListener("touchmove",v,!1),document.body.addEventListener("touchend",o,!1)}},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){d.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,a,v){return r.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:r,prop:a,value:v}),!0):!1},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(a){a.updateMute()}),this.emit(c.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(a){a.updateVolume()}),this.emit(c.GLOBAL_VOLUME,this,r)}}});h.exports=l},56751:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={SoundManagerCreator:e(84191),Events:e(76038),BaseSound:e(25798),BaseSoundManager:e(12486),WebAudioSound:e(96008),WebAudioSoundManager:e(55491),HTML5AudioSound:e(34350),HTML5AudioSoundManager:e(27622),NoAudioSound:e(38662),NoAudioSoundManager:e(17546)}},38662:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25798),y=e(56694),c=e(6659),u=e(98611),l=e(72283),r=function(){return!1},a=function(){return null},v=function(){return this},o=new y({Extends:c,initialize:function(m,g,x){x===void 0&&(x={}),c.call(this),this.manager=m,this.key=g,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=u({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},x),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:r,updateMarker:r,removeMarker:a,play:r,pause:r,resume:r,stop:r,setMute:v,setVolume:v,setRate:v,setDetune:v,setSeek:v,setLoop:v,setPan:v,applyConfig:a,resetConfig:a,update:l,calculateRate:a,destroy:function(){d.prototype.destroy.call(this)}});h.exports=o},17546:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12486),y=e(56694),c=e(6659),u=e(38662),l=e(72283),r=new y({Extends:c,initialize:function(v){c.call(this),this.game=v,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(a,v){var o=new u(this,a,v);return this.sounds.push(o),o},addAudioSprite:function(a,v){var o=this.add(a,v);return o.spritemap={},o},get:function(a){return d.prototype.get.call(this,a)},getAll:function(a){return d.prototype.getAll.call(this,a)},play:function(a,v){return!1},playAudioSprite:function(a,v,o){return!1},remove:function(a){return d.prototype.remove.call(this,a)},removeAll:function(){return d.prototype.removeAll.call(this)},removeByKey:function(a){return d.prototype.removeByKey.call(this,a)},stopByKey:function(a){return d.prototype.stopByKey.call(this,a)},onBlur:l,onFocus:l,onGameBlur:l,onGameFocus:l,pauseAll:l,resumeAll:l,stopAll:l,update:l,setRate:l,setDetune:l,setMute:l,setVolume:l,unlock:l,forEachActiveSound:function(a,v){d.prototype.forEachActiveSound.call(this,a,v)},destroy:function(){d.prototype.destroy.call(this)}});h.exports=r},96008:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25798),y=e(56694),c=e(76038),u=e(72632),l=new y({Extends:d,initialize:function(a,v,o){if(o===void 0&&(o={}),this.audioBuffer=a.game.cache.audio.get(v),!this.audioBuffer)throw new Error('Audio key "'+v+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=a.context.createGain(),this.volumeNode=a.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),a.context.createPanner&&(this.spatialNode=a.context.createPanner(),this.volumeNode.connect(this.spatialNode)),a.context.createStereoPanner?(this.pannerNode=a.context.createStereoPanner(),a.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(a.destination)):a.context.createPanner?this.spatialNode.connect(a.destination):this.volumeNode.connect(a.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,d.call(this,a,v,o)},play:function(r,a){return d.prototype.play.call(this,r,a)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(c.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!d.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(c.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!d.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(c.RESUME,this),!0)},stop:function(){return d.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(c.STOP,this),!0):!1},createAndStartBufferSource:function(){var r=this.currentConfig.seek,a=this.currentConfig.delay,v=this.manager.context.currentTime+a,o=(this.currentMarker?this.currentMarker.start:0)+r,p=this.duration-r;this.playTime=v-r,this.startTime=v,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,v),Math.max(0,o),Math.max(0,p)),this.resetConfig()},createAndStartLoopBufferSource:function(){var r=this.getLoopTime(),a=this.currentMarker?this.currentMarker.start:0,v=this.duration;this.loopTime=r,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,r),Math.max(0,a),Math.max(0,v))},createBufferSource:function(){var r=this,a=this.manager.context.createBufferSource();return a.buffer=this.audioBuffer,a.connect(this.muteNode),a.onended=function(v){v.target===r.source&&(r.currentConfig.loop?r.hasLooped=!0:r.hasEnded=!0)},a},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var r=this.currentConfig.source;if(r&&this.manager.context.createPanner){var a=this.spatialNode;a.panningModel=u(r,"panningModel","equalpower"),a.distanceModel=u(r,"distanceModel","inverse"),a.orientationX.value=u(r,"orientationX",0),a.orientationY.value=u(r,"orientationY",0),a.orientationZ.value=u(r,"orientationZ",-1),a.refDistance=u(r,"refDistance",1),a.maxDistance=u(r,"maxDistance",1e4),a.rolloffFactor=u(r,"rolloffFactor",1),a.coneInnerAngle=u(r,"coneInnerAngle",360),a.coneOuterAngle=u(r,"coneOuterAngle",0),a.coneOuterGain=u(r,"coneOuterGain",0),this.spatialSource=u(r,"follow",null),this.spatialSource||(a.positionX.value=u(r,"x",0),a.positionY.value=u(r,"y",0),a.positionZ.value=u(r,"z",0))}d.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(r){this.spatialNode&&(this.spatialNode.positionX.value=r)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(r){this.spatialNode&&(this.spatialNode.positionY.value=r)}},update:function(){if(this.isPlaying&&this.spatialSource){var r=u(this.spatialSource,"x",null),a=u(this.spatialSource,"y",null);r&&r!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=r),a&&a!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=a)}this.hasEnded?(this.hasEnded=!1,d.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(c.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(c.LOOPED,this))},destroy:function(){this.pendingRemove||(d.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){d.prototype.calculateRate.call(this);var r=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,r),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,r)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var r=0,a=0;a<this.rateUpdates.length;a++){var v=0;a<this.rateUpdates.length-1?v=this.rateUpdates[a+1].time:v=this.manager.context.currentTime-this.playTime,r+=(v-this.rateUpdates[a].time)*this.rateUpdates[a].rate}return r},getLoopTime:function(){for(var r=0,a=0;a<this.rateUpdates.length-1;a++)r+=(this.rateUpdates[a+1].time-this.rateUpdates[a].time)*this.rateUpdates[a].rate;var v=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+v.time+(this.duration-r)/v.rate},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,this.calculateRate(),this.emit(c.RATE,this,r)}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,this.calculateRate(),this.emit(c.DETUNE,this,r)}},setDetune:function(r){return this.detune=r,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(r){this.currentConfig.mute=r,this.muteNode.gain.setValueAtTime(r?0:1,0),this.emit(c.MUTE,this,r)}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(r){this.currentConfig.volume=r,this.volumeNode.gain.setValueAtTime(r,0),this.emit(c.VOLUME,this,r)}},setVolume:function(r){return this.volume=r,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.currentConfig.seek=r,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(c.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),r&&this.createAndStartLoopBufferSource()),this.emit(c.LOOP,this,r)}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(r){this.currentConfig.pan=r,this.pannerNode&&this.pannerNode.pan.setValueAtTime(r,this.manager.context.currentTime),this.emit(c.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});h.exports=l},55491:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82329),y=e(12486),c=e(56694),u=e(76038),l=e(97081),r=e(96008),a=e(72632),v=new c({Extends:y,initialize:function(p){this.context=this.createAudioContext(p),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),y.call(this,p),this.locked&&p.isBooted?this.unlock():p.events.once(l.BOOT,this.unlock,this)},createAudioContext:function(o){var p=o.config.audio;if(p.context)return p.context.resume(),p.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(o){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=o,this.masterMuteNode=o.createGain(),this.masterVolumeNode=o.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(o.destination),this.destination=this.masterMuteNode,this},add:function(o,p){var m=new r(this,o,p);return this.sounds.push(m),m},decodeAudio:function(o,p){var m;Array.isArray(o)?m=o:m=[{key:o,data:p}];for(var g=this.game.cache.audio,x=m.length,C=0;C<m.length;C++){var M=m[C],R=M.key,P=M.data;typeof P=="string"&&(P=d(P));var w=(function(G,O){g.add(G,O),this.emit(u.DECODED,G),x--,x===0&&this.emit(u.DECODED_ALL)}).bind(this,R),A=(function(G,O){console.error("Error decoding audio: "+G+" - ",O?O.message:""),x--,x===0&&this.emit(u.DECODED_ALL)}).bind(this,R);this.context.decodeAudioData(P,w,A)}},setListenerPosition:function(o,p){return o===void 0&&(o=this.game.scale.width/2),p===void 0&&(p=this.game.scale.height/2),this.listenerPosition.set(o,p),this},unlock:function(){var o=this,p=document.body,m=function g(){if(o.context&&p){var x=p.removeEventListener;o.context.resume().then(function(){x("touchstart",g),x("touchend",g),x("click",g),x("keydown",g),o.unlocked=!0},function(){x("touchstart",g),x("touchend",g),x("click",g),x("keydown",g)})}};p&&(p.addEventListener("touchstart",m,!1),p.addEventListener("touchend",m,!1),p.addEventListener("click",m,!1),p.addEventListener("keydown",m,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var o=this.context;o&&!this.locked&&(o.state==="suspended"||o.state==="interrupted")&&o.resume()},update:function(o,p){var m=this.context.listener;if(m&&m.positionX!==void 0){var g=a(this.listenerPosition,"x",null),x=a(this.listenerPosition,"y",null);g&&g!==this._spatialx&&(this._spatialx=m.positionX.value=g),x&&x!==this._spatialy&&(this._spatialy=m.positionY.value=x)}y.prototype.update.call(this,o,p),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var o=this;this.context.close().then(function(){o.context=null})}y.prototype.destroy.call(this)},setMute:function(o){return this.mute=o,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(o){this.masterMuteNode.gain.setValueAtTime(o?0:1,0),this.emit(u.GLOBAL_MUTE,this,o)}},setVolume:function(o){return this.volume=o,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(o){this.masterVolumeNode.gain.setValueAtTime(o,0),this.emit(u.GLOBAL_VOLUME,this,o)}}});h.exports=v},71207:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59959),y=e(56694),c=e(72283),u=e(17922),l=new y({initialize:function(a){this.parent=a,this.list=[],this.position=0,this.addCallback=c,this.removeCallback=c,this._sortKey=""},add:function(r,a){return a?d.Add(this.list,r):d.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,a,v){return v?d.AddAt(this.list,r,a):d.AddAt(this.list,r,a,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,a){return r?(a===void 0&&(a=function(v,o){return v[r]-o[r]}),u(this.list,a),this):this},getByName:function(r){return d.GetFirst(this.list,"name",r)},getRandom:function(r,a){return d.GetRandom(this.list,r,a)},getFirst:function(r,a,v,o){return d.GetFirst(this.list,r,a,v,o)},getAll:function(r,a,v,o){return d.GetAll(this.list,r,a,v,o)},count:function(r,a){return d.CountAllMatching(this.list,r,a)},swap:function(r,a){d.Swap(this.list,r,a)},moveTo:function(r,a){return d.MoveTo(this.list,r,a)},moveAbove:function(r,a){return d.MoveAbove(this.list,r,a)},moveBelow:function(r,a){return d.MoveBelow(this.list,r,a)},remove:function(r,a){return a?d.Remove(this.list,r):d.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,a){return a?d.RemoveAt(this.list,r):d.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,a,v){return v?d.RemoveBetween(this.list,r,a):d.RemoveBetween(this.list,r,a,this.removeCallback,this)},removeAll:function(r){for(var a=this.list.length;a--;)this.remove(this.list[a],r);return this},bringToTop:function(r){return d.BringToTop(this.list,r)},sendToBack:function(r){return d.SendToBack(this.list,r)},moveUp:function(r){return d.MoveUp(this.list,r),r},moveDown:function(r){return d.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return d.Shuffle(this.list),this},replace:function(r,a){return d.Replace(this.list,r,a)},exists:function(r){return this.list.indexOf(r)>-1},setAll:function(r,a,v,o){return d.SetAll(this.list,r,a,v,o),this},each:function(r,a){for(var v=[null],o=2;o<arguments.length;o++)v.push(arguments[o]);for(o=0;o<this.list.length;o++)v[0]=this.list[o],r.apply(a,v)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});h.exports=l},33885:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u){if(this.entries={},this.size=0,Array.isArray(u))for(var l=0;l<u.length;l++)this.set(u[l][0],u[l][1])},set:function(c,u){return this.has(c)||this.size++,this.entries[c]=u,this},get:function(c){if(this.has(c))return this.entries[c]},getArray:function(){var c=[],u=this.entries;for(var l in u)c.push(u[l]);return c},has:function(c){return this.entries.hasOwnProperty(c)},delete:function(c){return this.has(c)&&(delete this.entries[c],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(c){delete this.entries[c]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var c=[],u=this.entries;for(var l in u)c.push(u[l]);return c},dump:function(){var c=this.entries;console.group("Map");for(var u in c)console.log(u,c[u]);console.groupEnd()},each:function(c){var u=this.entries;for(var l in u)if(c(l,u[l])===!1)break;return this},contains:function(c){var u=this.entries;for(var l in u)if(u[l]===c)return!0;return!1},merge:function(c,u){u===void 0&&(u=!1);var l=this.entries,r=c.entries;for(var a in r)l.hasOwnProperty(a)&&u?l[a]=r[a]:this.set(a,r[a]);return this}});h.exports=y},74623:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(6659),c=e(36716),u=new d({Extends:y,initialize:function(){y.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(l){return this._active.indexOf(l)>-1},isPending:function(l){return this._toProcess>0&&this._pending.indexOf(l)>-1},isDestroying:function(l){return this._destroy.indexOf(l)>-1},add:function(l){return this.checkQueue&&this.isActive()&&!this.isDestroying()||this.isPending()||(this._pending.push(l),this._toProcess++),l},remove:function(l){if(this.isPending(l)){var r=this._pending,a=r.indexOf(l);a!==-1&&r.splice(a,1)}else this.isActive(l)&&(this._destroy.push(l),this._toProcess++);return l},removeAll:function(){for(var l=this._active,r=this._destroy,a=l.length;a--;)r.push(l[a]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var l=this._destroy,r=this._active,a,v;for(a=0;a<l.length;a++){v=l[a];var o=r.indexOf(v);o!==-1&&(r.splice(o,1),this.emit(c.PROCESS_QUEUE_REMOVE,v))}for(l.length=0,l=this._pending,a=0;a<l.length;a++)v=l[a],(!this.checkQueue||this.checkQueue&&r.indexOf(v)===-1)&&(r.push(v),this.emit(c.PROCESS_QUEUE_ADD,v));return l.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});h.exports=u},68687:(h,S,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53466);function y(P){if(!(this instanceof y))return new y(P);this._maxEntries=Math.max(4,P||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}y.prototype={all:function(){return this._all(this.data,[])},search:function(P){var w=this.data,A=[],G=this.toBBox;if(!C(P,w))return A;for(var O=[],L,I,F,D;w;){for(L=0,I=w.children.length;L<I;L++)F=w.children[L],D=w.leaf?G(F):F,C(P,D)&&(w.leaf?A.push(F):x(P,D)?this._all(F,A):O.push(F));w=O.pop()}return A},collides:function(P){var w=this.data,A=this.toBBox;if(!C(P,w))return!1;for(var G=[],O,L,I,F;w;){for(O=0,L=w.children.length;O<L;O++)if(I=w.children[O],F=w.leaf?A(I):I,C(P,F)){if(w.leaf||x(P,F))return!0;G.push(I)}w=G.pop()}return!1},load:function(P){if(!(P&&P.length))return this;if(P.length<this._minEntries){for(var w=0,A=P.length;w<A;w++)this.insert(P[w]);return this}var G=this._build(P.slice(),0,P.length-1,0);if(!this.data.children.length)this.data=G;else if(this.data.height===G.height)this._splitRoot(this.data,G);else{if(this.data.height<G.height){var O=this.data;this.data=G,G=O}this._insert(G,this.data.height-G.height-1,!0)}return this},insert:function(P){return P&&this._insert(P,this.data.height-1),this},clear:function(){return this.data=M([]),this},remove:function(P,w){if(!P)return this;for(var A=this.data,G=this.toBBox(P),O=[],L=[],I,F,D,V;A||O.length;){if(A||(A=O.pop(),F=O[O.length-1],I=L.pop(),V=!0),A.leaf&&(D=c(P,A.children,w),D!==-1))return A.children.splice(D,1),O.push(A),this._condense(O),this;!V&&!A.leaf&&x(A,G)?(O.push(A),L.push(I),I=0,F=A,A=A.children[0]):F?(I++,A=F.children[I],V=!1):A=null}return this},toBBox:function(P){return P},compareMinX:a,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(P){return this.data=P,this},_all:function(P,w){for(var A=[];P;)P.leaf?w.push.apply(w,P.children):A.push.apply(A,P.children),P=A.pop();return w},_build:function(P,w,A,G){var O=A-w+1,L=this._maxEntries,I;if(O<=L)return I=M(P.slice(w,A+1)),u(I,this.toBBox),I;G||(G=Math.ceil(Math.log(O)/Math.log(L)),L=Math.ceil(O/Math.pow(L,G-1))),I=M([]),I.leaf=!1,I.height=G;var F=Math.ceil(O/L),D=F*Math.ceil(Math.sqrt(L)),V,k,W,X;for(R(P,w,A,D,this.compareMinX),V=w;V<=A;V+=D)for(W=Math.min(V+D-1,A),R(P,V,W,F,this.compareMinY),k=V;k<=W;k+=F)X=Math.min(k+F-1,W),I.children.push(this._build(P,k,X,G-1));return u(I,this.toBBox),I},_chooseSubtree:function(P,w,A,G){for(var O,L,I,F,D,V,k,W;G.push(w),!(w.leaf||G.length-1===A);){for(k=W=1/0,O=0,L=w.children.length;O<L;O++)I=w.children[O],D=o(I),V=m(P,I)-D,V<W?(W=V,k=D<k?D:k,F=I):V===W&&D<k&&(k=D,F=I);w=F||w.children[0]}return w},_insert:function(P,w,A){var G=this.toBBox,O=A?P:G(P),L=[],I=this._chooseSubtree(O,this.data,w,L);for(I.children.push(P),r(I,O);w>=0&&L[w].children.length>this._maxEntries;)this._split(L,w),w--;this._adjustParentBBoxes(O,L,w)},_split:function(P,w){var A=P[w],G=A.children.length,O=this._minEntries;this._chooseSplitAxis(A,O,G);var L=this._chooseSplitIndex(A,O,G),I=M(A.children.splice(L,A.children.length-L));I.height=A.height,I.leaf=A.leaf,u(A,this.toBBox),u(I,this.toBBox),w?P[w-1].children.push(I):this._splitRoot(A,I)},_splitRoot:function(P,w){this.data=M([P,w]),this.data.height=P.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},_chooseSplitIndex:function(P,w,A){var G,O,L,I,F,D,V,k;for(D=V=1/0,G=w;G<=A-w;G++)O=l(P,0,G,this.toBBox),L=l(P,G,A,this.toBBox),I=g(O,L),F=o(O)+o(L),I<D?(D=I,k=G,V=F<V?F:V):I===D&&F<V&&(V=F,k=G);return k},_chooseSplitAxis:function(P,w,A){var G=P.leaf?this.compareMinX:a,O=P.leaf?this.compareMinY:v,L=this._allDistMargin(P,w,A,G),I=this._allDistMargin(P,w,A,O);L<I&&P.children.sort(G)},_allDistMargin:function(P,w,A,G){P.children.sort(G);var O=this.toBBox,L=l(P,0,w,O),I=l(P,A-w,A,O),F=p(L)+p(I),D,V;for(D=w;D<A-w;D++)V=P.children[D],r(L,P.leaf?O(V):V),F+=p(L);for(D=A-w-1;D>=w;D--)V=P.children[D],r(I,P.leaf?O(V):V),F+=p(I);return F},_adjustParentBBoxes:function(P,w,A){for(var G=A;G>=0;G--)r(w[G],P)},_condense:function(P){for(var w=P.length-1,A;w>=0;w--)P[w].children.length===0?w>0?(A=P[w-1].children,A.splice(A.indexOf(P[w]),1)):this.clear():u(P[w],this.toBBox)},compareMinX:function(P,w){return P.left-w.left},compareMinY:function(P,w){return P.top-w.top},toBBox:function(P){return{minX:P.left,minY:P.top,maxX:P.right,maxY:P.bottom}}};function c(P,w,A){if(!A)return w.indexOf(P);for(var G=0;G<w.length;G++)if(A(P,w[G]))return G;return-1}function u(P,w){l(P,0,P.children.length,w,P)}function l(P,w,A,G,O){O||(O=M(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var L=w,I;L<A;L++)I=P.children[L],r(O,P.leaf?G(I):I);return O}function r(P,w){return P.minX=Math.min(P.minX,w.minX),P.minY=Math.min(P.minY,w.minY),P.maxX=Math.max(P.maxX,w.maxX),P.maxY=Math.max(P.maxY,w.maxY),P}function a(P,w){return P.minX-w.minX}function v(P,w){return P.minY-w.minY}function o(P){return(P.maxX-P.minX)*(P.maxY-P.minY)}function p(P){return P.maxX-P.minX+(P.maxY-P.minY)}function m(P,w){return(Math.max(w.maxX,P.maxX)-Math.min(w.minX,P.minX))*(Math.max(w.maxY,P.maxY)-Math.min(w.minY,P.minY))}function g(P,w){var A=Math.max(P.minX,w.minX),G=Math.max(P.minY,w.minY),O=Math.min(P.maxX,w.maxX),L=Math.min(P.maxY,w.maxY);return Math.max(0,O-A)*Math.max(0,L-G)}function x(P,w){return P.minX<=w.minX&&P.minY<=w.minY&&w.maxX<=P.maxX&&w.maxY<=P.maxY}function C(P,w){return w.minX<=P.maxX&&w.minY<=P.maxY&&w.maxX>=P.minX&&w.maxY>=P.minY}function M(P){return{children:P,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function R(P,w,A,G,O){for(var L=[w,A],I;L.length;)A=L.pop(),w=L.pop(),!(A-w<=G)&&(I=w+Math.ceil((A-w)/G/2)*G,d(P,I,w,A,O),L.push(w,I,I,A))}h.exports=y},58403:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u){if(this.entries=[],Array.isArray(u))for(var l=0;l<u.length;l++)this.set(u[l])},set:function(c){return this.entries.indexOf(c)===-1&&this.entries.push(c),this},get:function(c,u){for(var l=0;l<this.entries.length;l++){var r=this.entries[l];if(r[c]===u)return r}},getArray:function(){return this.entries.slice(0)},delete:function(c){var u=this.entries.indexOf(c);return u>-1&&this.entries.splice(u,1),this},dump:function(){console.group("Set");for(var c=0;c<this.entries.length;c++){var u=this.entries[c];console.log(u)}console.groupEnd()},each:function(c,u){var l,r=this.entries.slice(),a=r.length;if(u)for(l=0;l<a&&c.call(u,r[l],l)!==!1;l++);else for(l=0;l<a&&c(r[l],l)!==!1;l++);return this},iterate:function(c,u){var l,r=this.entries.length;if(u)for(l=0;l<r&&c.call(u,this.entries[l],l)!==!1;l++);else for(l=0;l<r&&c(this.entries[l],l)!==!1;l++);return this},iterateLocal:function(c){var u,l=[];for(u=1;u<arguments.length;u++)l.push(arguments[u]);var r=this.entries.length;for(u=0;u<r;u++){var a=this.entries[u];a[c].apply(a,l)}return this},clear:function(){return this.entries.length=0,this},contains:function(c){return this.entries.indexOf(c)>-1},union:function(c){var u=new y;return c.entries.forEach(function(l){u.set(l)}),this.entries.forEach(function(l){u.set(l)}),u},intersect:function(c){var u=new y;return this.entries.forEach(function(l){c.contains(l)&&u.set(l)}),u},difference:function(c){var u=new y;return this.entries.forEach(function(l){c.contains(l)||u.set(l)}),u},size:{get:function(){return this.entries.length},set:function(c){return c<this.entries.length?this.entries.length=c:this.entries.length}}});h.exports=y},90881:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),y=e(56694),c=e(84314),u=e(93736),l=new y({initialize:function(a,v,o,p){a===void 0&&(a=0),v===void 0&&(v=a),o===void 0&&(o=0),p===void 0&&(p=null),this._width=a,this._height=v,this._parent=p,this.aspectMode=o,this.aspectRatio=v===0?1:a/v,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new u},setAspectMode:function(r){return r===void 0&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.snapTo.set(r,a),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.minWidth=d(r,0,this.maxWidth),this.minHeight=d(a,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,a){return r===void 0&&(r=Number.MAX_VALUE),a===void 0&&(a=r),this.maxWidth=d(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=d(a,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,a){switch(r===void 0&&(r=0),a===void 0&&(a=r),this.aspectMode){case l.NONE:this._width=this.getNewWidth(c(r,this.snapTo.x)),this._height=this.getNewHeight(c(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case l.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(c(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case l.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(c(a,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case l.FIT:this.constrain(r,a,!0);break;case l.ENVELOP:this.constrain(r,a,!1);break}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,a){return this._width=this.getNewWidth(c(r,this.snapTo.x)),this._height=this.getNewHeight(c(a,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(r,a){return a===void 0&&(a=!0),r=d(r,this.minWidth,this.maxWidth),a&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,a){return a===void 0&&(a=!0),r=d(r,this.minHeight,this.maxHeight),a&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,a,v){r===void 0&&(r=0),a===void 0&&(a=r),v===void 0&&(v=!0),r=this.getNewWidth(r),a=this.getNewHeight(a);var o=this.snapTo,p=a===0?1:r/a;return v&&this.aspectRatio>p||!v&&this.aspectRatio<p?(r=c(r,o.x),a=r/this.aspectRatio,o.y>0&&(a=c(a,o.y),r=a*this.aspectRatio)):(v&&this.aspectRatio<p||!v&&this.aspectRatio>p)&&(a=c(a,o.y),r=a*this.aspectRatio,o.x>0&&(r=c(r,o.x),a=r*(1/this.aspectRatio))),this._width=r,this._height=a,this},fitTo:function(r,a){return this.constrain(r,a,!0)},envelop:function(r,a){return this.constrain(r,a,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});l.NONE=0,l.WIDTH_CONTROLS_HEIGHT=1,l.HEIGHT_CONTROLS_WIDTH=2,l.FIT=3,l.ENVELOP=4,h.exports=l},94160:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="add"},95393:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="remove"},36716:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={PROCESS_QUEUE_ADD:e(94160),PROCESS_QUEUE_REMOVE:e(95393)}},20010:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Events:e(36716),List:e(71207),Map:e(33885),ProcessQueue:e(74623),RTree:e(68687),Set:e(58403),Size:e(90881)}},17487:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(82897),c=e(27119),u=e(86459),l=e(28621),r=e(31673),a=new d({Extends:r,initialize:function(o,p,m,g,x){r.call(this,o,p,m,g,x),this.add("__BASE",0,0,0,g,x),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=g,this.height=x,this.imageData=this.context.getImageData(0,0,g,x),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===u.WEBGL&&this.refresh(),this},draw:function(v,o,p,m){return m===void 0&&(m=!0),this.context.drawImage(p,v,o),m&&this.update(),this},drawFrame:function(v,o,p,m,g){p===void 0&&(p=0),m===void 0&&(m=0),g===void 0&&(g=!0);var x=this.manager.getFrame(v,o);if(x){var C=x.canvasData,M=x.cutWidth,R=x.cutHeight,P=x.source.resolution;this.context.drawImage(x.source.image,C.x,C.y,M,R,p,m,M/P,R/P),g&&this.update()}return this},setPixel:function(v,o,p,m,g,x){x===void 0&&(x=255),v=Math.abs(Math.floor(v)),o=Math.abs(Math.floor(o));var C=this.getIndex(v,o);if(C>-1){var M=this.context.getImageData(v,o,1,1);M.data[0]=p,M.data[1]=m,M.data[2]=g,M.data[3]=x,this.context.putImageData(M,v,o)}return this},putData:function(v,o,p,m,g,x,C){return m===void 0&&(m=0),g===void 0&&(g=0),x===void 0&&(x=v.width),C===void 0&&(C=v.height),this.context.putImageData(v,o,p,m,g,x,C),this},getData:function(v,o,p,m){v=y(Math.floor(v),0,this.width-1),o=y(Math.floor(o),0,this.height-1),p=y(p,1,this.width-v),m=y(m,1,this.height-o);var g=this.context.getImageData(v,o,p,m);return g},getPixel:function(v,o,p){p||(p=new c);var m=this.getIndex(v,o);if(m>-1){var g=this.data,x=g[m+0],C=g[m+1],M=g[m+2],R=g[m+3];p.setTo(x,C,M,R)}return p},getPixels:function(v,o,p,m){v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=this.width),m===void 0&&(m=p),v=Math.abs(Math.round(v)),o=Math.abs(Math.round(o));for(var g=y(v,0,this.width),x=y(v+p,0,this.width),C=y(o,0,this.height),M=y(o+m,0,this.height),R=new c,P=[],w=C;w<M;w++){for(var A=[],G=g;G<x;G++)R=this.getPixel(G,w,R),A.push({x:G,y:w,color:R.color,alpha:R.alphaGL});P.push(A)}return P},getIndex:function(v,o){return v=Math.abs(Math.round(v)),o=Math.abs(Math.round(o)),v<this.width&&o<this.height?(v+o*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(v,o,p,m,g){return v===void 0&&(v=0),o===void 0&&(o=0),p===void 0&&(p=this.width),m===void 0&&(m=this.height),g===void 0&&(g=!0),this.context.clearRect(v,o,p,m),g&&this.update(),this},setSize:function(v,o){return o===void 0&&(o=v),(v!==this.width||o!==this.height)&&(this.canvas.width=v,this.canvas.height=o,this._source.width=v,this._source.height=o,this._source.isPowerOf2=l(v,o),this.frames.__BASE.setSize(v,o,0,0),this.width=v,this.height=o,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});h.exports=a},845:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),y=e(51052),c=e(61068),u=e(56694),l=e(86459),r=e(82047),a=e(72632),v=e(65641),o=e(37410),p=e(31673),m=e(75512),g=new u({Extends:p,initialize:function(C,M,R,P){R===void 0&&(R=256),P===void 0&&(P=256),this.type="DynamicTexture";var w=C.game.renderer,A=w&&w.type===l.CANVAS,G=A?c.create2D(this,R,P):[this];p.call(this,C,M,G,R,P),this.add("__BASE",0,0,0,R,P),this.renderer=w,this.isDrawing=!1,this.canvas=A?G:null,this.context=A?G.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new y(0,0,R,P).setScene(C.game.scene.systemScene,!1),this.renderTarget=A?null:new o(w,R,P,1,0,!1,!0,!0,!1),this.pipeline=A?null:w.pipelines.get(v.SINGLE_PIPELINE),this.setSize(R,P)},setSize:function(x,C){C===void 0&&(C=x);var M=this.get(),R=M.source;if(x!==this.width||C!==this.height){this.canvas&&(this.canvas.width=x,this.canvas.height=C);var P=this.renderTarget;P&&(P.resize(x,C),M.glTexture=P.texture,R.isRenderTexture=!0,R.isGLTexture=!0,R.glTexture=P.texture,R.glTexture.flipY=!0),this.camera.setSize(x,C),R.width=x,R.height=C,M.setSize(x,C),this.width=x,this.height=C}else{var w=this.getSourceImage();M.cutX+x>w.width&&(x=w.width-M.cutX),M.cutY+C>w.height&&(C=w.height-M.cutY),M.setSize(x,C,M.cutX,M.cutY)}return this},setIsSpriteTexture:function(x){return this.isSpriteTexture=x,this},fill:function(x,C,M,R,P,w){var A=this.camera,G=this.renderer;C===void 0&&(C=1),M===void 0&&(M=0),R===void 0&&(R=0),P===void 0&&(P=this.width),w===void 0&&(w=this.height);var O=x>>16&255,L=x>>8&255,I=x&255,F=this.renderTarget;if(A.preRender(),F){F.bind(!0);var D=this.pipeline.manager.set(this.pipeline),V=G.width/F.width,k=G.height/F.height;D.drawFillRect(M*V,R*k,P*V,w*k,m.getTintFromFloats(I/255,L/255,O/255,1),C),F.unbind(!0)}else{var W=this.context;G.setContext(W),W.globalCompositeOperation="source-over",W.fillStyle="rgba("+O+","+L+","+I+","+C+")",W.fillRect(M,R,P,w),G.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var x=this.context,C=this.renderTarget;C?C.clear():x&&(x.save(),x.setTransform(1,0,0,1,0,0),x.clearRect(0,0,this.width,this.height),x.restore()),this.dirty=!1}return this},stamp:function(x,C,M,R,P){M===void 0&&(M=0),R===void 0&&(R=0);var w=a(P,"alpha",1),A=a(P,"tint",16777215),G=a(P,"angle",0),O=a(P,"rotation",0),L=a(P,"scale",1),I=a(P,"scaleX",L),F=a(P,"scaleY",L),D=a(P,"originX",.5),V=a(P,"originY",.5),k=a(P,"blendMode",0),W=a(P,"erase",!1),X=a(P,"skipBatch",!1),H=this.manager.resetStamp(w,A);return H.setAngle(0),G!==0?H.setAngle(G):O!==0&&H.setRotation(O),H.setScale(I,F),H.setTexture(x,C),H.setOrigin(D,V),H.setBlendMode(k),W&&(this._eraseMode=!0),X?this.batchGameObject(H,M,R):this.draw(H,M,R),W&&(this._eraseMode=!1),this},erase:function(x,C,M){return this._eraseMode=!0,this.draw(x,C,M),this._eraseMode=!1,this},draw:function(x,C,M,R,P){return this.beginDraw(),this.batchDraw(x,C,M,R,P),this.endDraw(),this},drawFrame:function(x,C,M,R,P,w){return this.beginDraw(),this.batchDrawFrame(x,C,M,R,P,w),this.endDraw(),this},repeat:function(x,C,M,R,P,w,A,G,O){if(M===void 0&&(M=0),R===void 0&&(R=0),P===void 0&&(P=this.width),w===void 0&&(w=this.height),A===void 0&&(A=1),G===void 0&&(G=16777215),O===void 0&&(O=!1),x instanceof r?C=x:C=this.manager.getFrame(x,C),!C)return this;var L=this.manager.resetStamp(A,G);L.setFrame(C),L.setOrigin(0);var I=C.width,F=C.height;P=Math.floor(P),w=Math.floor(w);var D=Math.ceil(P/I),V=Math.ceil(w/F),k=D*I-P,W=V*F-w;k>0&&(k=I-k),W>0&&(W=F-W),M<0&&(D+=Math.ceil(Math.abs(M)/I)),R<0&&(V+=Math.ceil(Math.abs(R)/F));var X=M,H=R,$=!1,z=this.manager.stampCrop.setTo(0,0,I,F);O||this.beginDraw();for(var b=0;b<V;b++){if(H+F<0){H+=F;continue}for(var B=0;B<D;B++){if($=!1,X+I<0){X+=I;continue}else X<0&&($=!0,z.width=I+X,z.x=I-z.width);H<0&&($=!0,z.height=F+H,z.y=F-z.height),k>0&&B===D-1&&($=!0,z.width=k),W>0&&b===V-1&&($=!0,z.height=W),$&&L.setCrop(z),this.batchGameObject(L,X,H),L.isCropped=!1,z.setTo(0,0,I,F),X+=I}X=M,H+=F}return O||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var x=this.camera,C=this.renderer,M=this.renderTarget;x.preRender(),M?C.beginCapture(M.width,M.height):C.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(x,C,M,R,P){return Array.isArray(x)||(x=[x]),this.batchList(x,C,M,R,P),this},batchDrawFrame:function(x,C,M,R,P,w){M===void 0&&(M=0),R===void 0&&(R=0),P===void 0&&(P=1),w===void 0&&(w=16777215);var A=this.manager.getFrame(x,C);return A&&(this.renderTarget?this.pipeline.batchTextureFrame(A,M,R,w,P,this.camera.matrix,null):this.batchTextureFrame(A,M,R,P,w)),this},endDraw:function(x){if(x===void 0&&(x=this._eraseMode),this.isDrawing){var C=this.renderer,M=this.renderTarget;if(M){var R=C.endCapture(),P=C.pipelines.setUtility();P.blitFrame(R,M,1,!1,!1,x,this.isSpriteTexture),C.resetScissor(),C.resetViewport()}else C.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(x,C,M,R,P){var w=x.length;if(w!==0)for(var A=0;A<w;A++){var G=x[A];!G||G===this||(G.renderWebGL||G.renderCanvas?this.batchGameObject(G,C,M):G.isParent||G.list?this.batchGroup(G.getChildren(),C,M):typeof G=="string"?this.batchTextureFrameKey(G,null,C,M,R,P):G instanceof r?this.batchTextureFrame(G,C,M,R,P):Array.isArray(G)&&this.batchList(G,C,M,R,P))}},batchGroup:function(x,C,M){C===void 0&&(C=0),M===void 0&&(M=0);for(var R=0;R<x.length;R++){var P=x[R];P.willRender(this.camera)&&this.batchGameObject(P,P.x+C,P.y+M)}},batchGameObject:function(x,C,M){C===void 0&&(C=x.x),M===void 0&&(M=x.y);var R=x.x,P=x.y,w=this.camera,A=this.renderer,G=this._eraseMode,O=x.mask;if(x.setPosition(C,M),this.canvas){if(G){var L=x.blendMode;x.blendMode=d.ERASE}O&&O.preRenderCanvas(A,x,w),x.renderCanvas(A,x,w,null),O&&O.postRenderCanvas(A,x,w),G&&(x.blendMode=L)}else A&&(O&&O.preRenderWebGL(A,x,w),G||A.setBlendMode(x.blendMode),x.renderWebGL(A,x,w),O&&O.postRenderWebGL(A,w,this.renderTarget));x.setPosition(R,P)},batchTextureFrameKey:function(x,C,M,R,P,w){var A=this.manager.getFrame(x,C);A&&this.batchTextureFrame(A,M,R,P,w)},batchTextureFrame:function(x,C,M,R,P){C===void 0&&(C=0),M===void 0&&(M=0),R===void 0&&(R=1),P===void 0&&(P=16777215);var w=this.camera.matrix,A=this.renderTarget;if(A)this.pipeline.batchTextureFrame(x,C,M,P,R,w,null);else{var G=this.context,O=x.canvasData,L=x.source.image;G.save(),G.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",G.globalAlpha=R,w.setToContext(G),O.width>0&&O.height>0&&G.drawImage(L,O.x,O.y,O.width,O.height,C,M,O.width,O.height),G.restore()}},snapshotArea:function(x,C,M,R,P,w,A){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,x,C,M,R,w,A):this.renderer.snapshotCanvas(this.canvas,P,!1,x,C,M,R,w,A),this},snapshot:function(x,C,M){return this.snapshotArea(0,0,this.width,this.height,x,C,M)},snapshotPixel:function(x,C,M){return this.snapshotArea(x,C,1,1,M,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(x,C,M,R){var P=this.manager.resetStamp();P.setTexture(this),P.setOrigin(0),P.renderWebGL(x,P,M,R)},renderCanvas:function(){},preDestroy:function(){c.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.stamp.destroy(),this.canvas=null,this.context=null,this.renderer=null,this.scene=null}});h.exports=g},82047:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(82897),c=e(98611),u=new d({initialize:function(r,a,v,o,p,m,g){this.texture=r,this.name=a,this.source=r.source[v],this.sourceIndex=v,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(m,g,o,p)},setSize:function(l,r,a,v){a===void 0&&(a=0),v===void 0&&(v=0),this.cutX=a,this.cutY=v,this.cutWidth=l,this.cutHeight=r,this.width=l,this.height=r,this.halfWidth=Math.floor(l*.5),this.halfHeight=Math.floor(r*.5),this.centerX=Math.floor(l/2),this.centerY=Math.floor(r/2);var o=this.data,p=o.cut;p.x=a,p.y=v,p.w=l,p.h=r,p.r=a+l,p.b=v+r,o.sourceSize.w=l,o.sourceSize.h=r,o.spriteSourceSize.w=l,o.spriteSourceSize.h=r,o.radius=.5*Math.sqrt(l*l+r*r);var m=o.drawImage;return m.x=a,m.y=v,m.width=l,m.height=r,this.updateUVs()},setTrim:function(l,r,a,v,o,p){var m=this.data,g=m.spriteSourceSize;return m.trim=!0,m.sourceSize.w=l,m.sourceSize.h=r,g.x=a,g.y=v,g.w=o,g.h=p,g.r=a+o,g.b=v+p,this.x=a,this.y=v,this.width=o,this.height=p,this.halfWidth=o*.5,this.halfHeight=p*.5,this.centerX=Math.floor(o/2),this.centerY=Math.floor(p/2),this.updateUVs()},setCropUVs:function(l,r,a,v,o,p,m){var g=this.cutX,x=this.cutY,C=this.cutWidth,M=this.cutHeight,R=this.realWidth,P=this.realHeight;r=y(r,0,R),a=y(a,0,P),v=y(v,0,R-r),o=y(o,0,P-a);var w=g+r,A=x+a,G=v,O=o,L=this.data;if(L.trim){var I=L.spriteSourceSize;v=y(v,0,C-r),o=y(o,0,M-a);var F=r+v,D=a+o,V=!(I.r<r||I.b<a||I.x>F||I.y>D);if(V){var k=Math.max(I.x,r),W=Math.max(I.y,a),X=Math.min(I.r,F)-k,H=Math.min(I.b,D)-W;G=X,O=H,p?w=g+(C-(k-I.x)-X):w=g+(k-I.x),m?A=x+(M-(W-I.y)-H):A=x+(W-I.y),r=k,a=W,v=X,o=H}else w=0,A=0,G=0,O=0}else p&&(w=g+(C-r-v)),m&&(A=x+(M-a-o));var $=this.source.width,z=this.source.height;return l.u0=Math.max(0,w/$),l.v0=Math.max(0,A/z),l.u1=Math.min(1,(w+G)/$),l.v1=Math.min(1,(A+O)/z),l.x=r,l.y=a,l.cx=w,l.cy=A,l.cw=G,l.ch=O,l.width=v,l.height=o,l.flipX=p,l.flipY=m,l},updateCropUVs:function(l,r,a){return this.setCropUVs(l,l.x,l.y,l.width,l.height,r,a)},setUVs:function(l,r,a,v,o,p){var m=this.data.drawImage;return m.width=l,m.height=r,this.u0=a,this.v0=v,this.u1=o,this.v1=p,this},updateUVs:function(){var l=this.cutX,r=this.cutY,a=this.cutWidth,v=this.cutHeight,o=this.data.drawImage;o.width=a,o.height=v;var p=this.source.width,m=this.source.height;return this.u0=l/p,this.v0=r/m,this.u1=(l+a)/p,this.v1=(r+v)/m,this},updateUVsInverted:function(){var l=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/l,this.v0=this.cutY/r,this.u1=this.cutX/l,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var l=new u(this.texture,this.name,this.sourceIndex);return l.cutX=this.cutX,l.cutY=this.cutY,l.cutWidth=this.cutWidth,l.cutHeight=this.cutHeight,l.x=this.x,l.y=this.y,l.width=this.width,l.height=this.height,l.halfWidth=this.halfWidth,l.halfHeight=this.halfHeight,l.centerX=this.centerX,l.centerY=this.centerY,l.rotated=this.rotated,l.data=c(!0,l.data,this.data),l.updateUVs(),l},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});h.exports=u},31673:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(82047),c=e(32547),u='Texture "%s" has no frame "%s"',l=new d({initialize:function(a,v,o,p,m){Array.isArray(o)||(o=[o]),this.manager=a,this.key=v,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var g=0;g<o.length;g++)this.source.push(new c(this,o[g],p,m))},add:function(r,a,v,o,p,m){if(this.has(r))return null;var g=new y(this,r,a,v,o,p,m);return this.frames[r]=g,this.firstFrame==="__BASE"&&(this.firstFrame=r),this.frameTotal++,g},remove:function(r){if(this.has(r)){var a=this.get(r);return a.destroy(),delete this.frames[r],!0}return!1},has:function(r){return this.frames.hasOwnProperty(r)},get:function(r){r||(r=this.firstFrame);var a=this.frames[r];return a||(console.warn(u,this.key,r),a=this.frames[this.firstFrame]),a},getTextureSourceIndex:function(r){for(var a=0;a<this.source.length;a++)if(this.source[a]===r)return a;return-1},getFramesFromTextureSource:function(r,a){a===void 0&&(a=!1);var v=[];for(var o in this.frames)if(!(o==="__BASE"&&!a)){var p=this.frames[o];p.sourceIndex===r&&v.push(p)}return v},getFrameNames:function(r){r===void 0&&(r=!1);var a=Object.keys(this.frames);if(!r){var v=a.indexOf("__BASE");v!==-1&&a.splice(v,1)}return a},getSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var a=this.frames[r];return a?a.source.image:(console.warn(u,this.key,r),this.frames.__BASE.source.image)},getDataSourceImage:function(r){(r==null||this.frameTotal===1)&&(r="__BASE");var a=this.frames[r],v;return a?v=a.sourceIndex:(console.warn(u,this.key,r),v=this.frames.__BASE.sourceIndex),this.dataSource[v].image},setDataSource:function(r){Array.isArray(r)||(r=[r]);for(var a=0;a<r.length;a++){var v=this.source[a];this.dataSource.push(new c(this,r[a],v.width,v.height))}},setFilter:function(r){var a;for(a=0;a<this.source.length;a++)this.source[a].setFilter(r);for(a=0;a<this.dataSource.length;a++)this.dataSource[a].setFilter(r)},destroy:function(){var r,a=this.source,v=this.dataSource;for(r=0;r<a.length;r++)a[r]&&a[r].destroy();for(r=0;r<v.length;r++)v[r]&&v[r].destroy();for(var o in this.frames){var p=this.frames[o];p&&p.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});h.exports=l},6237:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),y=e(17487),c=e(56694),u=e(27119),l=e(86459),r=e(845),a=e(6659),v=e(38203),o=e(82047),p=e(97081),m=e(52780),g=e(10850),x=e(1539),C=e(42911),M=e(69150),R=e(74118),P=e(31673),w=new c({Extends:a,initialize:function(G){a.call(this),this.game=G,this.name="TextureManager",this.list={},this._tempCanvas=d.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new R,this.silentWarnings=!1,G.events.once(p.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(v.LOAD,this.updatePending,this),this.on(v.ERROR,this.updatePending,this);var A=this.game.config;this.addBase64("__DEFAULT",A.defaultImage),this.addBase64("__MISSING",A.missingImage),this.addBase64("__WHITE",A.whiteImage),this.game.events.once(p.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(v.LOAD),this.off(v.ERROR),this.emit(v.READY),this.stamp=new x(this.game.scene.systemScene).setOrigin(0))},checkKey:function(A){return this.exists(A)?(this.silentWarnings||console.error("Texture key already in use: "+A),!1):!0},remove:function(A){if(typeof A=="string")if(this.exists(A))A=this.get(A);else return this.silentWarnings||console.warn("No texture found matching key: "+A),this;return this.list.hasOwnProperty(A.key)&&(A.destroy(),this.emit(v.REMOVE,A.key),this.emit(v.REMOVE_KEY+A.key)),this},removeKey:function(A){return this.list.hasOwnProperty(A)&&delete this.list[A],this},addBase64:function(A,G){if(this.checkKey(A)){var O=this,L=new Image;L.onerror=function(){O.emit(v.ERROR,A)},L.onload=function(){var I=O.create(A,L);M.Image(I,0),O.emit(v.ADD,A,I),O.emit(v.ADD_KEY+A,I),O.emit(v.LOAD,A,I)},L.src=G}return this},getBase64:function(A,G,O,L){O===void 0&&(O="image/png"),L===void 0&&(L=.92);var I="",F=this.getFrame(A,G);if(F&&(F.source.isRenderTexture||F.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(F){var D=F.canvasData,V=d.create2D(this,D.width,D.height),k=V.getContext("2d",{willReadFrequently:!0});D.width>0&&D.height>0&&k.drawImage(F.source.image,D.x,D.y,D.width,D.height,0,0,D.width,D.height),I=V.toDataURL(O,L),d.remove(V)}return I},addImage:function(A,G,O){var L=null;return this.checkKey(A)&&(L=this.create(A,G),M.Image(L,0),O&&L.setDataSource(O),this.emit(v.ADD,A,L),this.emit(v.ADD_KEY+A,L)),L},addGLTexture:function(A,G,O,L){var I=null;return this.checkKey(A)&&(O===void 0&&(O=G.width),L===void 0&&(L=G.height),I=this.create(A,G,O,L),I.add("__BASE",0,0,0,O,L),this.emit(v.ADD,A,I),this.emit(v.ADD_KEY+A,I)),I},addCompressedTexture:function(A,G,O){var L=null;if(this.checkKey(A)){if(L=this.create(A,G),L.add("__BASE",0,0,0,G.width,G.height),O)if(Array.isArray(O))for(var I=0;I<O.length;I++)M.JSONHash(L,I,O[I]);else M.JSONHash(L,0,O);this.emit(v.ADD,A,L),this.emit(v.ADD_KEY+A,L)}return L},addRenderTexture:function(A,G){var O=null;return this.checkKey(A)&&(O=this.create(A,G),O.add("__BASE",0,0,0,G.width,G.height),this.emit(v.ADD,A,O),this.emit(v.ADD_KEY+A,O)),O},generate:function(A,G){if(this.checkKey(A)){var O=d.create(this,1,1);return G.canvas=O,m(G),this.addCanvas(A,O)}else return null},createCanvas:function(A,G,O){if(G===void 0&&(G=256),O===void 0&&(O=256),this.checkKey(A)){var L=d.create(this,G,O,l.CANVAS,!0);return this.addCanvas(A,L)}return null},addCanvas:function(A,G,O){O===void 0&&(O=!1);var L=null;return O?L=new y(this,A,G,G.width,G.height):this.checkKey(A)&&(L=new y(this,A,G,G.width,G.height),this.list[A]=L,this.emit(v.ADD,A,L),this.emit(v.ADD_KEY+A,L)),L},addDynamicTexture:function(A,G,O){var L=null;return typeof A=="string"&&!this.exists(A)?L=new r(this,A,G,O):(L=A,A=L.key),this.checkKey(A)?(this.list[A]=L,this.emit(v.ADD,A,L),this.emit(v.ADD_KEY+A,L)):L=null,L},addAtlas:function(A,G,O,L){return Array.isArray(O.textures)||Array.isArray(O.frames)?this.addAtlasJSONArray(A,G,O,L):this.addAtlasJSONHash(A,G,O,L)},addAtlasJSONArray:function(A,G,O,L){var I=null;if(G instanceof P?(A=I.key,I=G):this.checkKey(A)&&(I=this.create(A,G)),I){if(Array.isArray(O))for(var F=O.length===1,D=0;D<I.source.length;D++){var V=F?O[0]:O[D];M.JSONArray(I,D,V)}else M.JSONArray(I,0,O);L&&I.setDataSource(L),this.emit(v.ADD,A,I),this.emit(v.ADD_KEY+A,I)}return I},addAtlasJSONHash:function(A,G,O,L){var I=null;if(G instanceof P?(A=I.key,I=G):this.checkKey(A)&&(I=this.create(A,G)),I){if(Array.isArray(O))for(var F=0;F<O.length;F++)M.JSONHash(I,F,O[F]);else M.JSONHash(I,0,O);L&&I.setDataSource(L),this.emit(v.ADD,A,I),this.emit(v.ADD_KEY+A,I)}return I},addAtlasXML:function(A,G,O,L){var I=null;return G instanceof P?(A=I.key,I=G):this.checkKey(A)&&(I=this.create(A,G)),I&&(M.AtlasXML(I,0,O),L&&I.setDataSource(L),this.emit(v.ADD,A,I),this.emit(v.ADD_KEY+A,I)),I},addUnityAtlas:function(A,G,O,L){var I=null;return G instanceof P?(A=I.key,I=G):this.checkKey(A)&&(I=this.create(A,G)),I&&(M.UnityYAML(I,0,O),L&&I.setDataSource(L),this.emit(v.ADD,A,I),this.emit(v.ADD_KEY+A,I)),I},addSpriteSheet:function(A,G,O,L){var I=null;if(G instanceof P?(A=I.key,I=G):this.checkKey(A)&&(I=this.create(A,G)),I){var F=I.source[0].width,D=I.source[0].height;M.SpriteSheet(I,0,0,0,F,D,O),L&&I.setDataSource(L),this.emit(v.ADD,A,I),this.emit(v.ADD_KEY+A,I)}return I},addSpriteSheetFromAtlas:function(A,G){if(!this.checkKey(A))return null;var O=g(G,"atlas",null),L=g(G,"frame",null);if(!(!O||!L)){var I=this.get(O),F=I.get(L);if(F){var D=this.create(A,F.source.image);return F.trimmed?M.SpriteSheetFromAtlas(D,F,G):M.SpriteSheet(D,0,F.cutX,F.cutY,F.cutWidth,F.cutHeight,G),this.emit(v.ADD,A,D),this.emit(v.ADD_KEY+A,D),D}}},create:function(A,G,O,L){var I=null;return this.checkKey(A)&&(I=new P(this,A,G,O,L),this.list[A]=I),I},exists:function(A){return this.list.hasOwnProperty(A)},get:function(A){return A===void 0&&(A="__DEFAULT"),this.list[A]?this.list[A]:A instanceof P?A:A instanceof o?A.texture:this.list.__MISSING},cloneFrame:function(A,G){if(this.list[A])return this.list[A].get(G).clone()},getFrame:function(A,G){if(this.list[A])return this.list[A].get(G)},parseFrame:function(A){if(A){if(typeof A=="string")return this.getFrame(A);if(Array.isArray(A)&&A.length===2)return this.getFrame(A[0],A[1]);if(C(A))return this.getFrame(A.key,A.frame);if(A instanceof P)return A.get();if(A instanceof o)return A}else return},getTextureKeys:function(){var A=[];for(var G in this.list)G!=="__DEFAULT"&&G!=="__MISSING"&&G!=="__WHITE"&&A.push(G);return A},getPixel:function(A,G,O,L){var I=this.getFrame(O,L);if(I){A-=I.x,G-=I.y;var F=I.data.cut;if(A+=F.x,G+=F.y,A>=F.x&&A<F.r&&G>=F.y&&G<F.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(I.source.image,A,G,1,1,0,0,1,1);var V=D.getImageData(0,0,1,1);return new u(V.data[0],V.data[1],V.data[2],V.data[3])}}return null},getPixelAlpha:function(A,G,O,L){var I=this.getFrame(O,L);if(I){A-=I.x,G-=I.y;var F=I.data.cut;if(A+=F.x,G+=F.y,A>=F.x&&A<F.r&&G>=F.y&&G<F.b){var D=this._tempContext;D.clearRect(0,0,1,1),D.drawImage(I.source.image,A,G,1,1,0,0,1,1);var V=D.getImageData(0,0,1,1);return V.data[3]}}return null},setTexture:function(A,G,O){return this.list[G]&&(A.texture=this.list[G],A.frame=A.texture.get(O)),A},renameTexture:function(A,G){var O=this.get(A);return O&&A!==G?(O.key=G,this.list[G]=O,delete this.list[A],!0):!1},each:function(A,G){for(var O=[null],L=1;L<arguments.length;L++)O.push(arguments[L]);for(var I in this.list)O[0]=this.list[I],A.apply(G,O)},resetStamp:function(A,G){A===void 0&&(A=1),G===void 0&&(G=16777215);var O=this.stamp;return O.setCrop(),O.setPosition(0),O.setAngle(0),O.setScale(1),O.setAlpha(A),O.setTint(G),O},destroy:function(){for(var A in this.list)this.list[A].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,d.remove(this._tempCanvas)}});h.exports=w},32547:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),y=e(56694),c=e(28621),u=e(27394),l=new y({initialize:function(a,v,o,p,m){m===void 0&&(m=!1);var g=a.manager.game;this.renderer=g.renderer,this.texture=a,this.source=v,this.image=v.compressed?null:v,this.compressionAlgorithm=v.compressed?v.format:null,this.resolution=1,this.width=o||v.naturalWidth||v.videoWidth||v.width||0,this.height=p||v.naturalHeight||v.videoHeight||v.height||0,this.scaleMode=u.DEFAULT,this.isCanvas=v instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&v instanceof HTMLVideoElement,this.isRenderTexture=v.type==="RenderTexture"||v.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&v instanceof WebGLTexture,this.isPowerOf2=c(this.width,this.height),this.glTexture=null,this.flipY=m,this.init(g)},init:function(r){var a=this.renderer;if(a){var v=this.source;if(a.gl){var o=this.image,p=this.flipY,m=this.width,g=this.height,x=this.scaleMode;this.isCanvas?this.glTexture=a.createCanvasTexture(o,!1,p):this.isVideo?this.glTexture=a.createVideoTexture(o,!1,p):this.isRenderTexture?this.glTexture=a.createTextureFromSource(null,m,g,x):this.isGLTexture?this.glTexture=v:this.compressionAlgorithm?this.glTexture=a.createTextureFromSource(v):this.glTexture=a.createTextureFromSource(o,m,g,x)}else this.isRenderTexture&&(this.image=v.canvas)}r.config.antialias||this.setFilter(1)},setFilter:function(r){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,r),this.scaleMode=r},setFlipY:function(r){return r===void 0&&(r=!0),this.flipY=r,this},update:function(){var r=this.renderer,a=this.image,v=this.flipY,o=r.gl;o&&this.isCanvas?this.glTexture=r.updateCanvasTexture(a,this.glTexture,v):o&&this.isVideo&&(this.glTexture=r.updateVideoTexture(a,this.glTexture,v))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&d.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});h.exports=l},65154:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={LINEAR:0,NEAREST:1};h.exports=S},49644:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addtexture"},29569:h=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="addtexture-"},60079:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="onerror"},72665:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="onload"},93006:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="ready"},69018:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removetexture"},85549:h=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="removetexture-"},38203:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ADD:e(49644),ADD_KEY:e(29569),ERROR:e(60079),LOAD:e(72665),READY:e(93006),REMOVE:e(69018),REMOVE_KEY:e(85549)}},87499:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),y=e(65154),c={CanvasTexture:e(17487),DynamicTexture:e(845),Events:e(38203),FilterMode:y,Frame:e(82047),Parsers:e(69150),Texture:e(31673),TextureManager:e(6237),TextureSource:e(32547)};c=d(!1,c,y),h.exports=c},35082:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(!y.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var c=e.source[d];e.add("__BASE",d,0,0,c.width,c.height);for(var u=y.getElementsByTagName("SubTexture"),l,r=0;r<u.length;r++){var a=u[r].attributes,v=a.name.value,o=parseInt(a.x.value,10),p=parseInt(a.y.value,10),m=parseInt(a.width.value,10),g=parseInt(a.height.value,10);if(l=e.add(v,d,o,p,m,g),a.frameX){var x=Math.abs(parseInt(a.frameX.value,10)),C=Math.abs(parseInt(a.frameY.value,10)),M=parseInt(a.frameWidth.value,10),R=parseInt(a.frameHeight.value,10);l.setTrim(m,g,x,C,M,R)}}return e};h.exports=S},83332:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.source[d];return e.add("__BASE",d,0,0,y.width,y.height),e};h.exports=S},21560:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.source[d];return e.add("__BASE",d,0,0,y.width,y.height),e};h.exports=S},64423:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),y=function(c,u,l){if(!l.frames&&!l.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=c.source[u];c.add("__BASE",u,0,0,r.width,r.height);for(var a=Array.isArray(l.textures)?l.textures[u].frames:l.frames,v,o=0;o<a.length;o++){var p=a[o];if(v=c.add(p.filename,u,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!v){console.warn("Invalid atlas json, frame already exists: "+p.filename);continue}p.trimmed&&v.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(v.rotated=!0,v.updateUVsInverted());var m=p.anchor||p.pivot;m&&(v.customPivot=!0,v.pivotX=m.x,v.pivotY=m.y),v.customData=d(p)}for(var g in l)g!=="frames"&&(Array.isArray(l[g])?c.customData[g]=l[g].slice(0):c.customData[g]=l[g]);return c};h.exports=y},17264:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),y=function(c,u,l){if(!l.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var r=c.source[u];c.add("__BASE",u,0,0,r.width,r.height);var a=l.frames,v;for(var o in a)if(a.hasOwnProperty(o)){var p=a[o];if(v=c.add(o,u,p.frame.x,p.frame.y,p.frame.w,p.frame.h),!v){console.warn("Invalid atlas json, frame already exists: "+o);continue}p.trimmed&&v.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(v.rotated=!0,v.updateUVsInverted());var m=p.anchor||p.pivot;m&&(v.customPivot=!0,v.pivotX=m.x,v.pivotY=m.y),v.customData=d(p)}for(var g in l)g!=="frames"&&(Array.isArray(l[g])?c.customData[g]=l[g].slice(0):c.customData[g]=l[g]);return c};h.exports=y},67409:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d=[171,75,84,88,32,49,49,187,13,10,26,10],y,c=new Uint8Array(e,0,12);for(y=0;y<c.length;y++)if(c[y]!==d[y]){console.warn("KTXParser - Invalid file format");return}var u=Uint32Array.BYTES_PER_ELEMENT,l=new DataView(e,12,13*u),r=l.getUint32(0,!0)===67305985,a=l.getUint32(1*u,r);if(a!==0){console.warn("KTXParser - Only compressed formats supported");return}var v=l.getUint32(4*u,r),o=l.getUint32(6*u,r),p=l.getUint32(7*u,r),m=Math.max(1,l.getUint32(11*u,r)),g=l.getUint32(12*u,r),x=new Array(m),C=12+13*4+g,M=o,R=p;for(y=0;y<m;y++){var P=new Int32Array(e,C,1)[0];C+=4,x[y]={data:new Uint8Array(e,C,P),width:M,height:R},M=Math.max(1,M>>1),R=Math.max(1,R>>1),C+=P}return{mipmaps:x,width:o,height:p,internalFormat:v,compressed:!0,generateMipmap:!1}};h.exports=S},24904:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(A,G,O,L,I,F,D){return D===void 0&&(D=16),Math.floor((A+O)/I)*Math.floor((G+L)/F)*D}function e(A,G){return A=Math.max(A,16),G=Math.max(G,8),A*G/4}function d(A,G){return A=Math.max(A,8),G=Math.max(G,8),A*G/2}function y(A,G){return S(A,G,3,3,4,4,8)}function c(A,G){return S(A,G,3,3,4,4)}function u(A,G){return S(A,G,4,3,5,4)}function l(A,G){return S(A,G,4,4,5,5)}function r(A,G){return S(A,G,5,4,6,5)}function a(A,G){return S(A,G,5,5,6,6)}function v(A,G){return S(A,G,7,4,8,5)}function o(A,G){return S(A,G,7,5,8,6)}function p(A,G){return S(A,G,7,7,8,8)}function m(A,G){return S(A,G,9,4,10,5)}function g(A,G){return S(A,G,9,5,10,6)}function x(A,G){return S(A,G,9,7,10,8)}function C(A,G){return S(A,G,9,9,10,10)}function M(A,G){return S(A,G,11,9,12,10)}function R(A,G){return S(A,G,11,11,12,12)}var P={0:{sizeFunc:e,glFormat:35841},1:{sizeFunc:e,glFormat:35843},2:{sizeFunc:d,glFormat:35840},3:{sizeFunc:d,glFormat:35842},6:{sizeFunc:y,glFormat:36196},7:{sizeFunc:y,glFormat:33776},8:{sizeFunc:c,glFormat:33777},9:{sizeFunc:c,glFormat:33778},11:{sizeFunc:c,glFormat:33779},22:{sizeFunc:y,glFormat:37492},23:{sizeFunc:c,glFormat:37496},24:{sizeFunc:y,glFormat:37494},25:{sizeFunc:y,glFormat:37488},26:{sizeFunc:c,glFormat:37490},27:{sizeFunc:c,glFormat:37808},28:{sizeFunc:u,glFormat:37809},29:{sizeFunc:l,glFormat:37810},30:{sizeFunc:r,glFormat:37811},31:{sizeFunc:a,glFormat:37812},32:{sizeFunc:v,glFormat:37813},33:{sizeFunc:o,glFormat:37814},34:{sizeFunc:p,glFormat:37815},35:{sizeFunc:m,glFormat:37816},36:{sizeFunc:g,glFormat:37817},37:{sizeFunc:x,glFormat:37818},38:{sizeFunc:C,glFormat:37819},39:{sizeFunc:M,glFormat:37820},40:{sizeFunc:R,glFormat:37821}},w=function(A){for(var G=new Uint32Array(A,0,13),O=G[2],L=P[O].glFormat,I=P[O].sizeFunc,F=G[11],D=G[7],V=G[6],k=52+G[12],W=new Uint8Array(A,k),X=new Array(F),H=0,$=D,z=V,b=0;b<F;b++){var B=I($,z);X[b]={data:new Uint8Array(W.buffer,W.byteOffset+H,B),width:$,height:z},$=Math.max(1,$>>1),z=Math.max(1,z>>1),H+=B}return{mipmaps:X,width:D,height:V,internalFormat:L,compressed:!0,generateMipmap:!1}};h.exports=w},6143:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),y=function(c,u,l,r,a,v,o){var p=d(o,"frameWidth",null),m=d(o,"frameHeight",p);if(p===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=c.source[u];c.add("__BASE",u,0,0,g.width,g.height);var x=d(o,"startFrame",0),C=d(o,"endFrame",-1),M=d(o,"margin",0),R=d(o,"spacing",0),P=Math.floor((a-M+R)/(p+R)),w=Math.floor((v-M+R)/(m+R)),A=P*w;A===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",c.key),(x>A||x<-A)&&(x=0),x<0&&(x=A+x),(C===-1||C>A||C<x)&&(C=A);for(var G=M,O=M,L=0,I=0,F=0,D=0;D<A;D++){L=0,I=0;var V=G+p,k=O+m;V>a&&(L=V-a),k>v&&(I=k-v),D>=x&&D<=C&&(c.add(F,u,l+G,r+O,p-L,m-I),F++),G+=p+R,G+p>a&&(G=M,O+=m+R)}return c};h.exports=y},20030:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),y=function(c,u,l){var r=d(l,"frameWidth",null),a=d(l,"frameHeight",r);if(!r)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var v=c.source[0];c.add("__BASE",0,0,0,v.width,v.height),d(l,"startFrame",0),d(l,"endFrame",-1);for(var o=d(l,"margin",0),p=d(l,"spacing",0),m=u.cutX,g=u.cutY,x=u.cutWidth,C=u.cutHeight,M=u.realWidth,R=u.realHeight,P=Math.floor((M-o+p)/(r+p)),w=Math.floor((R-o+p)/(a+p)),A=u.x,G=r-A,O=r-(M-x-A),L=u.y,I=a-L,F=a-(R-C-L),D,V=o,k=o,W=0,X=0,H=0;H<w;H++){for(var $=H===0,z=H===w-1,b=0;b<P;b++){var B=b===0,N=b===P-1;if(D=c.add(W,X,m+V,g+k,r,a),B||$||N||z){var U=B?A:0,Y=$?L:0,K=0,Z=0;B&&(K+=r-G),N&&(K+=r-O),$&&(Z+=a-I),z&&(Z+=a-F);var J=r-K,Q=a-Z;D.cutWidth=J,D.cutHeight=Q,D.setTrim(r,a,U,Y,J,Q)}V+=p,B?V+=G:N?V+=O:V+=r,W++}V=o,k+=p,$?k+=I:z?k+=F:k+=a}return c};h.exports=y},89187:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=0,e=function(y,c,u,l){var r=S-l.y-l.height;y.add(u,c,l.x,r,l.width,l.height)},d=function(y,c,u){var l=y.source[c];y.add("__BASE",c,0,0,l.width,l.height),S=l.height;for(var r=u.split(`
`),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,v="",o="",p={x:0,y:0,width:0,height:0},m=0;m<r.length;m++){var g=r[m].match(a);if(g){var x=g[1]==="- ",C=g[2],M=g[3];if(x&&(o!==v&&(e(y,c,o,p),v=o),p={x:0,y:0,width:0,height:0}),C==="name"){o=M;continue}switch(C){case"x":case"y":case"width":case"height":p[C]=parseInt(M,10);break}}}return o!==v&&e(y,c,o,p),y};h.exports=d},69150:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AtlasXML:e(35082),Canvas:e(83332),Image:e(21560),JSONArray:e(64423),JSONHash:e(17264),KTXParser:e(67409),PVRParser:e(24904),SpriteSheet:e(6143),SpriteSheetFromAtlas:e(20030),UnityYAML:e(89187)}},93560:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u,l,r,a,v,o,p){(r===void 0||r<=0)&&(r=32),(a===void 0||a<=0)&&(a=32),v===void 0&&(v=0),o===void 0&&(o=0),this.name=u,this.firstgid=l|0,this.imageWidth=r|0,this.imageHeight=a|0,this.imageMargin=v|0,this.imageSpacing=o|0,this.properties=p||{},this.images=[],this.total=0},containsImageIndex:function(c){return c>=this.firstgid&&c<this.firstgid+this.total},addImage:function(c,u){return this.images.push({gid:c,image:u}),this.total++,this}});h.exports=y},46422:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=new d({initialize:function(u){if(this.gids=[],u!==void 0)for(var l=0;l<u.length;++l)for(var r=u[l],a=0;a<r.total;++a)this.gids[r.firstgid+a]=r;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(c){this.gids=c?this._gids:void 0}},getTypeIncludingTile:function(c){if(c.type!==void 0&&c.type!=="")return c.type;if(!(!this.gids||c.gid===void 0)){var u=this.gids[c.gid];if(u){var l=u.getTileData(c.gid);if(l)return l.type}}},setTextureAndFrame:function(c,u,l,r){if(u===null&&this.gids&&r.gid!==void 0){var a=this.gids[r.gid];a&&(u===null&&a.image!==void 0&&(u=a.image.key),l===null&&(l=r.gid-a.firstgid),c.scene.textures.getFrame(u,l)||(u=null,l=null))}c.setTexture(u,l)},setPropertiesFromTiledObject:function(c,u){if(this.gids!==void 0&&u.gid!==void 0){var l=this.gids[u.gid];l!==void 0&&this.setFromJSON(c,l.getTileProperties(u.gid))}this.setFromJSON(c,u.properties)},setFromJSON:function(c,u){if(u){if(Array.isArray(u)){u.forEach(function(r){c.setData(r.name,r.value)});return}for(var l in u)c[l]!==void 0?c[l]=u[l]:c.setData(l,u[l])}}});h.exports=y},15043:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),y=e(16586),c=e(90715),u=e(89797),l=function(r,a,v,o,p,m,g,x){v===void 0&&(v=32),o===void 0&&(o=32),p===void 0&&(p=10),m===void 0&&(m=10),x===void 0&&(x=!1);var C=null;if(Array.isArray(g)){var M=a!==void 0?a:"map";C=c(M,d.ARRAY_2D,g,v,o,x)}else if(a!==void 0){var R=r.cache.tilemap.get(a);R?C=c(a,R.format,R.data,v,o,x):console.warn("No map data found for key "+a)}return C===null&&(C=new y({tileWidth:v,tileHeight:o,width:p,height:m})),new u(r,C)};h.exports=l},29633:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(12920),u=e(28699),l=e(66658),r=new d({Mixins:[y.Alpha,y.Flip,y.Visible],initialize:function(v,o,p,m,g,x,C,M){this.layer=v,this.index=o,this.x=p,this.y=m,this.width=g,this.height=x,this.right,this.bottom,this.baseWidth=C!==void 0?C:g,this.baseHeight=M!==void 0?M:x,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(a,v){return!(a<this.pixelX||v<this.pixelY||a>this.right||v>this.bottom)},copy:function(a){return this.index=a.index,this.alpha=a.alpha,this.properties=u(a.properties),this.visible=a.visible,this.setFlip(a.flipX,a.flipY),this.tint=a.tint,this.rotation=a.rotation,this.collideUp=a.collideUp,this.collideDown=a.collideDown,this.collideLeft=a.collideLeft,this.collideRight=a.collideRight,this.collisionCallback=a.collisionCallback,this.collisionCallbackContext=a.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(a){var v=this.tilemapLayer;if(v){var o=v.tileToWorldXY(this.x,this.y,void 0,a);return o.x}return this.x*this.baseWidth},getRight:function(a){var v=this.tilemapLayer;return v?this.getLeft(a)+this.width*v.scaleX:this.getLeft(a)+this.width},getTop:function(a){var v=this.tilemapLayer;if(v){var o=v.tileToWorldXY(this.x,this.y,void 0,a);return o.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(a){var v=this.tilemapLayer;return v?this.getTop(a)+this.height*v.scaleY:this.getTop(a)+this.height},getBounds:function(a,v){return v===void 0&&(v=new l),v.x=this.getLeft(a),v.y=this.getTop(a),v.width=this.getRight(a)-v.x,v.height=this.getBottom(a)-v.y,v},getCenterX:function(a){return(this.getLeft(a)+this.getRight(a))/2},getCenterY:function(a){return(this.getTop(a)+this.getBottom(a))/2},intersects:function(a,v,o,p){return!(o<=this.pixelX||p<=this.pixelY||a>=this.right||v>=this.bottom)},isInteresting:function(a,v){return a&&v?this.canCollide||this.hasInterestingFace:a?this.collides:v?this.hasInterestingFace:!1},resetCollision:function(a){if(a===void 0&&(a=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,a){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(a,v,o,p,m){if(v===void 0&&(v=a),o===void 0&&(o=a),p===void 0&&(p=a),m===void 0&&(m=!0),this.collideLeft=a,this.collideRight=v,this.collideUp=o,this.collideDown=p,this.faceLeft=a,this.faceRight=v,this.faceTop=o,this.faceBottom=p,m){var g=this.tilemapLayer;g&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(a,v){return a===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=a,this.collisionCallbackContext=v),this},setSize:function(a,v,o,p){return a!==void 0&&(this.width=a),v!==void 0&&(this.height=v),o!==void 0&&(this.baseWidth=o),p!==void 0&&(this.baseHeight=p),this.updatePixelXY(),this},updatePixelXY:function(){var a=this.layer.orientation;if(a===c.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(a===c.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(a===c.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(a===c.HEXAGONAL){var v=this.layer.staggerAxis,o=this.layer.staggerIndex,p=this.layer.hexSideLength,m,g;v==="y"?(g=(this.baseHeight-p)/2+p,o==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*g):v==="x"&&(m=(this.baseWidth-p)/2+p,this.pixelX=this.x*m,o==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var a=this.layer.tilemapLayer;if(a){var v=a.gidMap[this.index];if(v)return v}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var a=this.tilemapLayer;return a?a.tilemap:null}}});h.exports=r},89797:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14556),y=e(56694),c=e(75606),u=e(93560),l=e(72632),r=e(94990),a=e(46422),v=e(12920),o=e(52257),p=e(72677),m=e(13747),g=e(29633),x=e(5047),C=e(87177),M=e(47975),R=new y({initialize:function(w,A){this.scene=w,this.tileWidth=A.tileWidth,this.tileHeight=A.tileHeight,this.width=A.width,this.height=A.height,this.orientation=A.orientation,this.renderOrder=A.renderOrder,this.format=A.format,this.version=A.version,this.properties=A.properties,this.widthInPixels=A.widthInPixels,this.heightInPixels=A.heightInPixels,this.imageCollections=A.imageCollections,this.images=A.images,this.layers=A.layers,this.tiles=A.tiles,this.tilesets=A.tilesets,this.objects=A.objects,this.currentLayerIndex=0,this.hexSideLength=A.hexSideLength;var G=this.orientation;this._convert={WorldToTileXY:x.GetWorldToTileXYFunction(G),WorldToTileX:x.GetWorldToTileXFunction(G),WorldToTileY:x.GetWorldToTileYFunction(G),TileToWorldXY:x.GetTileToWorldXYFunction(G),TileToWorldX:x.GetTileToWorldXFunction(G),TileToWorldY:x.GetTileToWorldYFunction(G),GetTileCorners:x.GetTileCornersFunction(G)}},setRenderOrder:function(P){var w=["right-down","left-down","right-up","left-up"];return typeof P=="number"&&(P=w[P]),w.indexOf(P)>-1&&(this.renderOrder=P),this},addTilesetImage:function(P,w,A,G,O,L,I,F){if(P===void 0)return null;if(w==null&&(w=P),!this.scene.sys.textures.exists(w))return console.warn("Invalid Tileset Image: "+w),null;var D=this.scene.sys.textures.get(w),V=this.getTilesetIndex(P);if(V===null&&this.format===u.TILED_JSON)return console.warn("No data found for Tileset: "+P),null;var k=this.tilesets[V];return k?(k.setTileSize(A,G),k.setSpacing(O,L),k.setImage(D),k):(A===void 0&&(A=this.tileWidth),G===void 0&&(G=this.tileHeight),O===void 0&&(O=0),L===void 0&&(L=0),I===void 0&&(I=0),F===void 0&&(F={x:0,y:0}),k=new M(P,I,A,G,O,L,void 0,void 0,F),k.setImage(D),this.tilesets.push(k),this.tiles=d(this),k)},copy:function(P,w,A,G,O,L,I,F){return F=this.getLayer(F),F!==null?(x.Copy(P,w,A,G,O,L,I,F),this):null},createBlankLayer:function(P,w,A,G,O,L,I,F){A===void 0&&(A=0),G===void 0&&(G=0),O===void 0&&(O=this.width),L===void 0&&(L=this.height),I===void 0&&(I=this.tileWidth),F===void 0&&(F=this.tileHeight);var D=this.getLayerIndex(P);if(D!==null)return console.warn("Invalid Tilemap Layer ID: "+P),null;for(var V=new r({name:P,tileWidth:I,tileHeight:F,width:O,height:L,orientation:this.orientation}),k,W=0;W<L;W++){k=[];for(var X=0;X<O;X++)k.push(new g(V,-1,X,W,I,F,this.tileWidth,this.tileHeight));V.data.push(k)}this.layers.push(V),this.currentLayerIndex=this.layers.length-1;var H=new C(this.scene,this,this.currentLayerIndex,w,A,G);return H.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(H),H},createLayer:function(P,w,A,G){var O=this.getLayerIndex(P);if(O===null)return console.warn("Invalid Tilemap Layer ID: "+P),typeof P=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var L=this.layers[O];if(L.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+P),null;this.currentLayerIndex=O,A===void 0&&(A=L.x),G===void 0&&(G=L.y);var I=new C(this.scene,this,O,w,A,G);return I.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(I),I},createFromObjects:function(P,w,A){A===void 0&&(A=!0);var G=[],O=this.getObjectLayer(P);if(!O)return console.warn("createFromObjects: Invalid objectLayerName given: "+P),G;var L=new a(A?this.tilesets:void 0);Array.isArray(w)||(w=[w]);for(var I=O.objects,F=0;F<w.length;F++){var D=w[F],V=l(D,"id",null),k=l(D,"gid",null),W=l(D,"name",null),X=l(D,"type",null);L.enabled=!l(D,"ignoreTileset",null);for(var H,$=[],z=0;z<I.length;z++)H=I[z],(V===null&&k===null&&W===null&&X===null||V!==null&&H.id===V||k!==null&&H.gid===k||W!==null&&H.name===W||X!==null&&L.getTypeIncludingTile(H)===X)&&$.push(H);for(var b=l(D,"classType",m),B=l(D,"scene",this.scene),N=l(D,"container",null),U=l(D,"key",null),Y=l(D,"frame",null),K=0;K<$.length;K++){H=$[K];var Z=new b(B);if(Z.setName(H.name),Z.setPosition(H.x,H.y),L.setTextureAndFrame(Z,U,Y,H),H.width&&(Z.displayWidth=H.width),H.height&&(Z.displayHeight=H.height),this.orientation===v.ISOMETRIC){var J=this.tileWidth/this.tileHeight,Q={x:Z.x-Z.y,y:(Z.x+Z.y)/J};Z.x=Q.x,Z.y=Q.y}var j={x:Z.originX*H.width,y:(Z.originY-(H.gid?1:0))*H.height};if(H.rotation){var q=c(H.rotation);o(j,q),Z.rotation=q}Z.x+=j.x,Z.y+=j.y,(H.flippedHorizontal!==void 0||H.flippedVertical!==void 0)&&Z.setFlip(H.flippedHorizontal,H.flippedVertical),H.visible||(Z.visible=!1),L.setPropertiesFromTiledObject(Z,H),N?N.add(Z):B.add.existing(Z),G.push(Z)}}return G},createFromTiles:function(P,w,A,G,O,L){return L=this.getLayer(L),L===null?null:x.CreateFromTiles(P,w,A,G,O,L)},fill:function(P,w,A,G,O,L,I){return L===void 0&&(L=!0),I=this.getLayer(I),I===null?null:(x.Fill(P,w,A,G,O,L,I),this)},filterObjects:function(P,w,A){if(typeof P=="string"){var G=P;if(P=this.getObjectLayer(P),!P)return console.warn("No object layer found with the name: "+G),null}return P.objects.filter(w,A)},filterTiles:function(P,w,A,G,O,L,I,F){return F=this.getLayer(F),F===null?null:x.FilterTiles(P,w,A,G,O,L,I,F)},findByIndex:function(P,w,A,G){return G=this.getLayer(G),G===null?null:x.FindByIndex(P,w,A,G)},findObject:function(P,w,A){if(typeof P=="string"){var G=P;if(P=this.getObjectLayer(P),!P)return console.warn("No object layer found with the name: "+G),null}return P.objects.find(w,A)||null},findTile:function(P,w,A,G,O,L,I,F){return F=this.getLayer(F),F===null?null:x.FindTile(P,w,A,G,O,L,I,F)},forEachTile:function(P,w,A,G,O,L,I,F){return F=this.getLayer(F),F===null?null:(x.ForEachTile(P,w,A,G,O,L,I,F),this)},getImageIndex:function(P){return this.getIndex(this.images,P)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(P){return P.name})},getIndex:function(P,w){for(var A=0;A<P.length;A++)if(P[A].name===w)return A;return null},getLayer:function(P){var w=this.getLayerIndex(P);return w!==null?this.layers[w]:null},getObjectLayer:function(P){var w=this.getIndex(this.objects,P);return w!==null?this.objects[w]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(P){return P.name})},getLayerIndex:function(P){return P===void 0?this.currentLayerIndex:typeof P=="string"?this.getLayerIndexByName(P):typeof P=="number"&&P<this.layers.length?P:P instanceof C&&P.tilemap===this?P.layerIndex:null},getLayerIndexByName:function(P){return this.getIndex(this.layers,P)},getTileAt:function(P,w,A,G){return G=this.getLayer(G),G===null?null:x.GetTileAt(P,w,A,G)},getTileAtWorldXY:function(P,w,A,G,O){return O=this.getLayer(O),O===null?null:x.GetTileAtWorldXY(P,w,A,G,O)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(P){return P.name})},getTilesWithin:function(P,w,A,G,O,L){return L=this.getLayer(L),L===null?null:x.GetTilesWithin(P,w,A,G,O,L)},getTilesWithinShape:function(P,w,A,G){return G=this.getLayer(G),G===null?null:x.GetTilesWithinShape(P,w,A,G)},getTilesWithinWorldXY:function(P,w,A,G,O,L,I){return I=this.getLayer(I),I===null?null:x.GetTilesWithinWorldXY(P,w,A,G,O,L,I)},getTileset:function(P){var w=this.getIndex(this.tilesets,P);return w!==null?this.tilesets[w]:null},getTilesetIndex:function(P){return this.getIndex(this.tilesets,P)},hasTileAt:function(P,w,A){return A=this.getLayer(A),A===null?null:x.HasTileAt(P,w,A)},hasTileAtWorldXY:function(P,w,A,G){return G=this.getLayer(G),G===null?null:x.HasTileAtWorldXY(P,w,A,G)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(P){this.setLayer(P)}},putTileAt:function(P,w,A,G,O){return G===void 0&&(G=!0),O=this.getLayer(O),O===null?null:x.PutTileAt(P,w,A,G,O)},putTileAtWorldXY:function(P,w,A,G,O,L){return G===void 0&&(G=!0),L=this.getLayer(L),L===null?null:x.PutTileAtWorldXY(P,w,A,G,O,L)},putTilesAt:function(P,w,A,G,O){return G===void 0&&(G=!0),O=this.getLayer(O),O===null?null:(x.PutTilesAt(P,w,A,G,O),this)},randomize:function(P,w,A,G,O,L){return L=this.getLayer(L),L===null?null:(x.Randomize(P,w,A,G,O,L),this)},calculateFacesAt:function(P,w,A){return A=this.getLayer(A),A===null?null:(x.CalculateFacesAt(P,w,A),this)},calculateFacesWithin:function(P,w,A,G,O){return O=this.getLayer(O),O===null?null:(x.CalculateFacesWithin(P,w,A,G,O),this)},removeLayer:function(P){var w=this.getLayerIndex(P);if(w!==null){p(this.layers,w);for(var A=w;A<this.layers.length;A++)this.layers[A].tilemapLayer&&this.layers[A].tilemapLayer.layerIndex--;return this.currentLayerIndex===w&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(P){var w=this.getLayerIndex(P);return w!==null?(P=this.layers[w],P.tilemapLayer.destroy(),p(this.layers,w),this.currentLayerIndex===w&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var P=this.layers,w=0;w<P.length;w++)P[w].tilemapLayer&&P[w].tilemapLayer.destroy(!1);return P.length=0,this.currentLayerIndex=0,this},removeTile:function(P,w,A){w===void 0&&(w=-1),A===void 0&&(A=!0);var G=[];Array.isArray(P)||(P=[P]);for(var O=0;O<P.length;O++){var L=P[O];G.push(this.removeTileAt(L.x,L.y,!0,A,L.tilemapLayer)),w>-1&&this.putTileAt(w,L.x,L.y,A,L.tilemapLayer)}return G},removeTileAt:function(P,w,A,G,O){return A===void 0&&(A=!0),G===void 0&&(G=!0),O=this.getLayer(O),O===null?null:x.RemoveTileAt(P,w,A,G,O)},removeTileAtWorldXY:function(P,w,A,G,O,L){return A===void 0&&(A=!0),G===void 0&&(G=!0),L=this.getLayer(L),L===null?null:x.RemoveTileAtWorldXY(P,w,A,G,O,L)},renderDebug:function(P,w,A){return A=this.getLayer(A),A===null?null:(this.orientation===v.ORTHOGONAL&&x.RenderDebug(P,w,A),this)},renderDebugFull:function(P,w){for(var A=this.layers,G=0;G<A.length;G++)x.RenderDebug(P,w,A[G]);return this},replaceByIndex:function(P,w,A,G,O,L,I){return I=this.getLayer(I),I===null?null:(x.ReplaceByIndex(P,w,A,G,O,L,I),this)},setCollision:function(P,w,A,G,O){return w===void 0&&(w=!0),A===void 0&&(A=!0),O===void 0&&(O=!0),G=this.getLayer(G),G===null?null:(x.SetCollision(P,w,A,G,O),this)},setCollisionBetween:function(P,w,A,G,O){return A===void 0&&(A=!0),G===void 0&&(G=!0),O=this.getLayer(O),O===null?null:(x.SetCollisionBetween(P,w,A,G,O),this)},setCollisionByProperty:function(P,w,A,G){return w===void 0&&(w=!0),A===void 0&&(A=!0),G=this.getLayer(G),G===null?null:(x.SetCollisionByProperty(P,w,A,G),this)},setCollisionByExclusion:function(P,w,A,G){return w===void 0&&(w=!0),A===void 0&&(A=!0),G=this.getLayer(G),G===null?null:(x.SetCollisionByExclusion(P,w,A,G),this)},setCollisionFromCollisionGroup:function(P,w,A){return P===void 0&&(P=!0),w===void 0&&(w=!0),A=this.getLayer(A),A===null?null:(x.SetCollisionFromCollisionGroup(P,w,A),this)},setTileIndexCallback:function(P,w,A,G){return G=this.getLayer(G),G===null?null:(x.SetTileIndexCallback(P,w,A,G),this)},setTileLocationCallback:function(P,w,A,G,O,L,I){return I=this.getLayer(I),I===null?null:(x.SetTileLocationCallback(P,w,A,G,O,L,I),this)},setLayer:function(P){var w=this.getLayerIndex(P);return w!==null&&(this.currentLayerIndex=w),this},setBaseTileSize:function(P,w){this.tileWidth=P,this.tileHeight=w,this.widthInPixels=this.width*P,this.heightInPixels=this.height*w;for(var A=0;A<this.layers.length;A++){this.layers[A].baseTileWidth=P,this.layers[A].baseTileHeight=w;for(var G=this.layers[A].data,O=this.layers[A].width,L=this.layers[A].height,I=0;I<L;I++)for(var F=0;F<O;F++){var D=G[I][F];D!==null&&D.setSize(void 0,void 0,P,w)}}return this},setLayerTileSize:function(P,w,A){if(A=this.getLayer(A),A===null)return this;A.tileWidth=P,A.tileHeight=w;for(var G=A.data,O=A.width,L=A.height,I=0;I<L;I++)for(var F=0;F<O;F++){var D=G[I][F];D!==null&&D.setSize(P,w)}return this},shuffle:function(P,w,A,G,O){return O=this.getLayer(O),O===null?null:(x.Shuffle(P,w,A,G,O),this)},swapByIndex:function(P,w,A,G,O,L,I){return I=this.getLayer(I),I===null?null:(x.SwapByIndex(P,w,A,G,O,L,I),this)},tileToWorldX:function(P,w,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldX(P,w,A)},tileToWorldY:function(P,w,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldY(P,w,A)},tileToWorldXY:function(P,w,A,G,O){return O=this.getLayer(O),O===null?null:this._convert.TileToWorldXY(P,w,A,G,O)},getTileCorners:function(P,w,A,G){return G=this.getLayer(G),G===null?null:this._convert.GetTileCorners(P,w,A,G)},weightedRandomize:function(P,w,A,G,O,L){return L=this.getLayer(L),L===null?null:(x.WeightedRandomize(w,A,G,O,P,L),this)},worldToTileX:function(P,w,A,G){return G=this.getLayer(G),G===null?null:this._convert.WorldToTileX(P,w,A,G)},worldToTileY:function(P,w,A,G){return G=this.getLayer(G),G===null?null:this._convert.WorldToTileY(P,w,A,G)},worldToTileXY:function(P,w,A,G,O,L){return L=this.getLayer(L),L===null?null:this._convert.WorldToTileXY(P,w,A,G,O,L)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});h.exports=R},4843:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),y=e(15043);d.register("tilemap",function(c){var u=c!==void 0?c:{};return y(this.scene,u.key,u.tileWidth,u.tileHeight,u.width,u.height,u.data,u.insertNull)})},37940:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),y=e(15043);d.register("tilemap",function(c,u,l,r,a,v,o){return c===null&&(c=void 0),u===null&&(u=void 0),l===null&&(l=void 0),r===null&&(r=void 0),a===null&&(a=void 0),y(this.scene,c,u,l,r,a,v,o)})},87177:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(64937),c=e(89980),u=e(5047),l=e(96193),r=e(93736),a=new d({Extends:c,Mixins:[y.Alpha,y.BlendMode,y.ComputedSize,y.Depth,y.Flip,y.GetBounds,y.Mask,y.Origin,y.Pipeline,y.PostPipeline,y.Transform,y.Visible,y.ScrollFactor,l],initialize:function(o,p,m,g,x,C){c.call(this,o,"TilemapLayer"),this.isTilemap=!0,this.tilemap=p,this.layerIndex=m,this.layer=p.layers[m],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=u.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new r,this.setTilesets(g),this.setAlpha(this.layer.alpha),this.setPosition(x,C),this.setOrigin(0,0),this.setSize(p.tileWidth*this.layer.width,p.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(v){var o=[],p=[],m=this.tilemap;Array.isArray(v)||(v=[v]);for(var g=0;g<v.length;g++){var x=v[g];if(typeof x=="string"&&(x=m.getTileset(x)),x){p.push(x);for(var C=x.firstgid,M=0;M<x.total;M++)o[C+M]=x}}this.gidMap=o,this.tileset=p},setRenderOrder:function(v){var o=["right-down","left-down","right-up","left-up"];return typeof v=="string"&&(v=o.indexOf(v)),v>=0&&v<4&&(this._renderOrder=v),this},calculateFacesAt:function(v,o){return u.CalculateFacesAt(v,o,this.layer),this},calculateFacesWithin:function(v,o,p,m){return u.CalculateFacesWithin(v,o,p,m,this.layer),this},createFromTiles:function(v,o,p,m,g){return u.CreateFromTiles(v,o,p,m,g,this.layer)},cull:function(v){return this.cullCallback(this.layer,v,this.culledTiles,this._renderOrder)},copy:function(v,o,p,m,g,x,C){return u.Copy(v,o,p,m,g,x,C,this.layer),this},fill:function(v,o,p,m,g,x){return u.Fill(v,o,p,m,g,x,this.layer),this},filterTiles:function(v,o,p,m,g,x,C){return u.FilterTiles(v,o,p,m,g,x,C,this.layer)},findByIndex:function(v,o,p){return u.FindByIndex(v,o,p,this.layer)},findTile:function(v,o,p,m,g,x,C){return u.FindTile(v,o,p,m,g,x,C,this.layer)},forEachTile:function(v,o,p,m,g,x,C){return u.ForEachTile(v,o,p,m,g,x,C,this.layer),this},setTint:function(v,o,p,m,g,x){v===void 0&&(v=16777215);var C=function(M){M.tint=v};return this.forEachTile(C,this,o,p,m,g,x)},getTileAt:function(v,o,p){return u.GetTileAt(v,o,p,this.layer)},getTileAtWorldXY:function(v,o,p,m){return u.GetTileAtWorldXY(v,o,p,m,this.layer)},getIsoTileAtWorldXY:function(v,o,p,m,g){p===void 0&&(p=!0);var x=this.tempVec;return u.IsometricWorldToTileXY(v,o,!0,x,g,this.layer,p),this.getTileAt(x.x,x.y,m)},getTilesWithin:function(v,o,p,m,g){return u.GetTilesWithin(v,o,p,m,g,this.layer)},getTilesWithinShape:function(v,o,p){return u.GetTilesWithinShape(v,o,p,this.layer)},getTilesWithinWorldXY:function(v,o,p,m,g,x){return u.GetTilesWithinWorldXY(v,o,p,m,g,x,this.layer)},hasTileAt:function(v,o){return u.HasTileAt(v,o,this.layer)},hasTileAtWorldXY:function(v,o,p){return u.HasTileAtWorldXY(v,o,p,this.layer)},putTileAt:function(v,o,p,m){return u.PutTileAt(v,o,p,m,this.layer)},putTileAtWorldXY:function(v,o,p,m,g){return u.PutTileAtWorldXY(v,o,p,m,g,this.layer)},putTilesAt:function(v,o,p,m){return u.PutTilesAt(v,o,p,m,this.layer),this},randomize:function(v,o,p,m,g){return u.Randomize(v,o,p,m,g,this.layer),this},removeTileAt:function(v,o,p,m){return u.RemoveTileAt(v,o,p,m,this.layer)},removeTileAtWorldXY:function(v,o,p,m,g){return u.RemoveTileAtWorldXY(v,o,p,m,g,this.layer)},renderDebug:function(v,o){return u.RenderDebug(v,o,this.layer),this},replaceByIndex:function(v,o,p,m,g,x){return u.ReplaceByIndex(v,o,p,m,g,x,this.layer),this},setSkipCull:function(v){return v===void 0&&(v=!0),this.skipCull=v,this},setCullPadding:function(v,o){return v===void 0&&(v=1),o===void 0&&(o=1),this.cullPaddingX=v,this.cullPaddingY=o,this},setCollision:function(v,o,p,m){return u.SetCollision(v,o,p,this.layer,m),this},setCollisionBetween:function(v,o,p,m){return u.SetCollisionBetween(v,o,p,m,this.layer),this},setCollisionByProperty:function(v,o,p){return u.SetCollisionByProperty(v,o,p,this.layer),this},setCollisionByExclusion:function(v,o,p){return u.SetCollisionByExclusion(v,o,p,this.layer),this},setCollisionFromCollisionGroup:function(v,o){return u.SetCollisionFromCollisionGroup(v,o,this.layer),this},setTileIndexCallback:function(v,o,p){return u.SetTileIndexCallback(v,o,p,this.layer),this},setTileLocationCallback:function(v,o,p,m,g,x){return u.SetTileLocationCallback(v,o,p,m,g,x,this.layer),this},shuffle:function(v,o,p,m){return u.Shuffle(v,o,p,m,this.layer),this},swapByIndex:function(v,o,p,m,g,x){return u.SwapByIndex(v,o,p,m,g,x,this.layer),this},tileToWorldX:function(v,o){return this.tilemap.tileToWorldX(v,o,this)},tileToWorldY:function(v,o){return this.tilemap.tileToWorldY(v,o,this)},tileToWorldXY:function(v,o,p,m){return this.tilemap.tileToWorldXY(v,o,p,m,this)},getTileCorners:function(v,o,p){return this.tilemap.getTileCorners(v,o,p,this)},weightedRandomize:function(v,o,p,m,g){return u.WeightedRandomize(o,p,m,g,v,this.layer),this},worldToTileX:function(v,o,p){return this.tilemap.worldToTileX(v,o,p,this)},worldToTileY:function(v,o,p){return this.tilemap.worldToTileY(v,o,p,this)},worldToTileXY:function(v,o,p,m,g){return this.tilemap.worldToTileXY(v,o,p,m,g,this)},destroy:function(v){v===void 0&&(v=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),v&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],c.prototype.destroy.call(this))}});h.exports=a},17394:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(69360),y=new d,c=new d,u=new d,l=function(r,a,v,o){var p=a.cull(v),m=p.length,g=v.alpha*a.alpha;if(!(m===0||g<=0)){var x=y,C=c,M=u;C.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),x.copyFrom(v.matrix);var R=r.currentContext,P=a.gidMap;R.save(),o?(x.multiplyWithOffset(o,-v.scrollX*a.scrollFactorX,-v.scrollY*a.scrollFactorY),C.e=a.x,C.f=a.y,x.multiply(C,M),M.copyToContext(R)):(C.e-=v.scrollX*a.scrollFactorX,C.f-=v.scrollY*a.scrollFactorY,C.copyToContext(R)),(!r.antialias||a.scaleX>1||a.scaleY>1)&&(R.imageSmoothingEnabled=!1);for(var w=0;w<m;w++){var A=p[w],G=P[A.index];if(G){var O=G.image.getSourceImage(),L=G.getTileTextureCoordinates(A.index),I=G.tileWidth,F=G.tileHeight;if(!(L===null||I===0||F===0)){var D=I*.5,V=F*.5;L.x+=G.tileOffset.x,L.y+=G.tileOffset.y,R.save(),R.translate(A.pixelX+D,A.pixelY+V),A.rotation!==0&&R.rotate(A.rotation),(A.flipX||A.flipY)&&R.scale(A.flipX?-1:1,A.flipY?-1:1),R.globalAlpha=g*A.alpha,R.drawImage(O,L.x,L.y,I,F,-D,-V,I,F),R.restore()}}}R.restore()}};h.exports=l},96193:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),y=d,c=d;y=e(51395),c=e(17394),h.exports={renderWebGL:y,renderCanvas:c}},51395:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),y=function(c,u,l){var r=u.cull(l),a=r.length,v=l.alpha*u.alpha;if(!(a===0||v<=0)){var o=u.gidMap,p=c.pipelines.set(u.pipeline,u),m=d.getTintAppendFloatAlpha,g=u.scrollFactorX,x=u.scrollFactorY,C=u.x,M=u.y,R=u.scaleX,P=u.scaleY;c.pipelines.preBatch(u);for(var w=0;w<a;w++){var A=r[w],G=o[A.index];if(G){var O=G.getTileTextureCoordinates(A.index);if(O!==null){var L=G.glTexture,I=p.setTexture2D(L,u),F=G.tileWidth,D=G.tileHeight,V=O.x,k=O.y,W=G.tileWidth*.5,X=G.tileHeight*.5,H=G.tileOffset.x,$=G.tileOffset.y,z=m(A.tint,v*A.alpha);p.batchTexture(u,L,L.width,L.height,C+A.pixelX*R+(W*R-H),M+A.pixelY*P+(X*P-$),A.width,A.height,R,P,A.rotation,A.flipX,A.flipY,g,x,W,X,V,k,F,D,z,z,z,z,!1,0,0,l,null,!0,I)}}}c.pipelines.postBatch(u)}};h.exports=y},47975:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(93736),c=new d({initialize:function(l,r,a,v,o,p,m,g,x){(a===void 0||a<=0)&&(a=32),(v===void 0||v<=0)&&(v=32),o===void 0&&(o=0),p===void 0&&(p=0),m===void 0&&(m={}),g===void 0&&(g={}),this.name=l,this.firstgid=r,this.tileWidth=a,this.tileHeight=v,this.tileMargin=o,this.tileSpacing=p,this.tileProperties=m,this.tileData=g,this.tileOffset=new y,x!==void 0&&this.tileOffset.set(x.x,x.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(u){return this.containsTileIndex(u)?this.tileProperties[u-this.firstgid]:null},getTileData:function(u){return this.containsTileIndex(u)?this.tileData[u-this.firstgid]:null},getTileCollisionGroup:function(u){var l=this.getTileData(u);return l&&l.objectgroup?l.objectgroup:null},containsTileIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},getTileTextureCoordinates:function(u){return this.containsTileIndex(u)?this.texCoordinates[u-this.firstgid]:null},setImage:function(u){return this.image=u,this.glTexture=u.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(u,l){return u!==void 0&&(this.tileWidth=u),l!==void 0&&(this.tileHeight=l),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(u,l){return u!==void 0&&(this.tileMargin=u),l!==void 0&&(this.tileSpacing=l),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(u,l){var r=(l-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),a=(u-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(r%1!==0||a%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),r=Math.floor(r),a=Math.floor(a),this.rows=r,this.columns=a,this.total=r*a,this.texCoordinates.length=0;for(var v=this.tileMargin,o=this.tileMargin,p=0;p<this.rows;p++){for(var m=0;m<this.columns;m++)this.texCoordinates.push({x:v,y:o}),v+=this.tileWidth+this.tileSpacing;v=this.tileMargin,o+=this.tileHeight+this.tileSpacing}return this}});h.exports=c},92839:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15494),y=function(c,u,l){var r=d(c,u,!0,l),a=d(c,u-1,!0,l),v=d(c,u+1,!0,l),o=d(c-1,u,!0,l),p=d(c+1,u,!0,l),m=r&&r.collides;return m&&(r.faceTop=!0,r.faceBottom=!0,r.faceLeft=!0,r.faceRight=!0),a&&a.collides&&(m&&(r.faceTop=!1),a.faceBottom=!m),v&&v.collides&&(m&&(r.faceBottom=!1),v.faceTop=!m),o&&o.collides&&(m&&(r.faceLeft=!1),o.faceRight=!m),p&&p.collides&&(m&&(r.faceRight=!1),p.faceLeft=!m),r&&!r.collides&&r.resetFaces(),r};h.exports=y},60386:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15494),y=e(50811),c=function(u,l,r,a,v){for(var o=null,p=null,m=null,g=null,x=y(u,l,r,a,null,v),C=0;C<x.length;C++){var M=x[C];M&&(M.collides?(o=d(M.x,M.y-1,!0,v),p=d(M.x,M.y+1,!0,v),m=d(M.x-1,M.y,!0,v),g=d(M.x+1,M.y,!0,v),M.faceTop=!(o&&o.collides),M.faceBottom=!(p&&p.collides),M.faceLeft=!(m&&m.collides),M.faceRight=!(g&&g.collides)):M.resetFaces())}};h.exports=c},13125:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=new d,c=function(u,l,r,a){var v=r.tilemapLayer,o=v.cullPaddingX,p=v.cullPaddingY,m=v.tilemap.tileToWorldXY(u,l,y,a,v);return m.x>a.worldView.x+v.scaleX*r.tileWidth*(-o-.5)&&m.x<a.worldView.right+v.scaleX*r.tileWidth*(o-.5)&&m.y>a.worldView.y+v.scaleY*r.tileHeight*(-p-1)&&m.y<a.worldView.bottom+v.scaleY*r.tileHeight*(p-.5)};h.exports=c},17347:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60386),y=e(50811),c=e(62839),u=e(29633),l=function(r,a,v,o,p,m,g,x){g===void 0&&(g=!0);var C=y(r,a,v,o,null,x),M=[];C.forEach(function(L){var I=new u(L.layer,L.index,L.x,L.y,L.width,L.height,L.baseWidth,L.baseHeight);I.copy(L),M.push(I)});for(var R=p-r,P=m-a,w=0;w<M.length;w++){var A=M[w],G=A.x+R,O=A.y+P;c(G,O,x)&&x.data[O][G]&&(A.x=G,A.y=O,A.updatePixelXY(),x.data[O][G]=A)}g&&d(p-1,m-1,v+2,o+2,x),C.length=0,M.length=0};h.exports=l},93604:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=e(51202),c=function(u,l,r,a,v,o){r||(r={}),Array.isArray(u)||(u=[u]);var p=o.tilemapLayer;a||(a=p.scene),v||(v=a.cameras.main);var m=d(0,0,o.width,o.height,null,o),g=[],x;for(x=0;x<m.length;x++){var C=m[x];if(u.indexOf(C.index)!==-1){var M=p.tileToWorldXY(C.x,C.y,void 0,v,o);r.x=M.x,r.y=M.y,g.push(a.make.sprite(r))}}if(typeof l=="number")for(x=0;x<u.length;x++)y(u[x],l,0,0,o.width,o.height,o);else if(Array.isArray(l))for(x=0;x<u.length;x++)y(u[x],l[x],0,0,o.width,o.height,o);return g};h.exports=c},71586:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),y=e(82127),c=e(84314),u=new d,l=function(r,a){var v=r.tilemapLayer.tilemap,o=r.tilemapLayer,p=Math.floor(v.tileWidth*o.scaleX),m=Math.floor(v.tileHeight*o.scaleY),g=c(a.worldView.x-o.x,p,0,!0)-o.cullPaddingX,x=y(a.worldView.right-o.x,p,0,!0)+o.cullPaddingX,C=c(a.worldView.y-o.y,m,0,!0)-o.cullPaddingY,M=y(a.worldView.bottom-o.y,m,0,!0)+o.cullPaddingY;return u.setTo(g,C,x-g,M-C)};h.exports=l},381:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(71586),y=e(6987),c=function(u,l,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var v=u.tilemapLayer,o=d(u,l);return(v.skipCull||v.scrollFactorX!==1||v.scrollFactorY!==1)&&(o.left=0,o.right=u.width,o.top=0,o.bottom=u.height),y(u,o,a,r),r};h.exports=c},97734:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=e(60386),c=e(68234),u=function(l,r,a,v,o,p,m){for(var g=m.collideIndexes.indexOf(l)!==-1,x=d(r,a,v,o,null,m),C=0;C<x.length;C++)x[C].index=l,c(x[C],g);p&&y(r-1,a-1,v+2,o+2,m)};h.exports=u},63555:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=function(c,u,l,r,a,v,o,p){var m=d(l,r,a,v,o,p);return m.filter(c,u)};h.exports=y},37982:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){d===void 0&&(d=0),y===void 0&&(y=!1);var u=0,l,r,a;if(y){for(r=c.height-1;r>=0;r--)for(l=c.width-1;l>=0;l--)if(a=c.data[r][l],a&&a.index===e){if(u===d)return a;u+=1}}else for(r=0;r<c.height;r++)for(l=0;l<c.width;l++)if(a=c.data[r][l],a&&a.index===e){if(u===d)return a;u+=1}return null};h.exports=S},48297:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=function(c,u,l,r,a,v,o,p){var m=d(l,r,a,v,o,p);return m.find(c,u)||null};h.exports=y},80916:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=function(c,u,l,r,a,v,o,p){var m=d(l,r,a,v,o,p);m.forEach(c,u)};h.exports=y},31493:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),y=e(381),c=e(37524),u=e(20887),l=e(72283),r=e(19242),a=function(v){return v===d.ORTHOGONAL?y:v===d.HEXAGONAL?c:v===d.STAGGERED?r:v===d.ISOMETRIC?u:l};h.exports=a},15494:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(62839),y=function(c,u,l,r){if(l===void 0&&(l=!1),d(c,u,r)){var a=r.data[u][c]||null;return a?a.index===-1?l?a:null:a:null}else return null};h.exports=y},24640:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15494),y=e(93736),c=new y,u=function(l,r,a,v,o){return o.tilemapLayer.worldToTileXY(l,r,!0,c,v),d(c.x,c.y,a,o)};h.exports=u},48495:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r){var a=r.baseTileWidth,v=r.baseTileHeight,o=r.tilemapLayer,p=0,m=0;o&&(l||(l=o.scene.cameras.main),p=o.x+l.scrollX*(1-o.scrollFactorX),m=o.y+l.scrollY*(1-o.scrollFactorY),a*=o.scaleX,v*=o.scaleY);var g=p+c*a,x=m+u*v;return[new d(g,x),new d(g+a,x),new d(g+a,x+v),new d(g,x+v)]};h.exports=y},7160:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),y=e(63634),c=e(72283),u=e(48495),l=function(r){return r===d.ORTHOGONAL?u:r===d.ISOMETRIC?c:r===d.HEXAGONAL?y:(r===d.STAGGERED,c)};h.exports=l},16884:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),y=e(72283),c=e(44150),u=function(l){return l===d.ORTHOGONAL?c:y};h.exports=u},68182:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),y=e(21715),c=e(21808),u=e(72283),l=e(33388),r=e(46836),a=function(v){return v===d.ORTHOGONAL?r:v===d.ISOMETRIC?c:v===d.HEXAGONAL?y:v===d.STAGGERED?l:u};h.exports=a},3752:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),y=e(72283),c=e(84132),u=e(42477),l=function(r){return r===d.ORTHOGONAL?u:r===d.STAGGERED?c:y};h.exports=l},50811:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),y=function(c,u,l,r,a,v){c===void 0&&(c=0),u===void 0&&(u=0),l===void 0&&(l=v.width),r===void 0&&(r=v.height),a||(a={});var o=d(a,"isNotEmpty",!1),p=d(a,"isColliding",!1),m=d(a,"hasInterestingFace",!1);c<0&&(l+=c,c=0),u<0&&(r+=u,u=0),c+l>v.width&&(l=Math.max(v.width-c,0)),u+r>v.height&&(r=Math.max(v.height-u,0));for(var g=[],x=u;x<u+r;x++)for(var C=c;C<c+l;C++){var M=v.data[x][C];if(M!==null){if(o&&M.index===-1||p&&!M.collides||m&&!M.hasInterestingFace)continue;g.push(M)}}return g};h.exports=y},31674:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84068),y=e(50811),c=e(7563),u=e(72283),l=e(93736),r=function(m,g){return c.RectangleToTriangle(g,m)},a=new l,v=new l,o=new l,p=function(m,g,x,C){if(m===void 0)return[];var M=u;m instanceof d.Circle?M=c.CircleToRectangle:m instanceof d.Rectangle?M=c.RectangleToRectangle:m instanceof d.Triangle?M=r:m instanceof d.Line&&(M=c.LineToRectangle),C.tilemapLayer.worldToTileXY(m.left,m.top,!0,v,x);var R=v.x,P=v.y;C.tilemapLayer.worldToTileXY(m.right,m.bottom,!1,o,x);var w=Math.ceil(o.x),A=Math.ceil(o.y),G=Math.max(w-R,1),O=Math.max(A-P,1),L=y(R,P,G,O,g,C),I=C.tileWidth,F=C.tileHeight;C.tilemapLayer&&(I*=C.tilemapLayer.scaleX,F*=C.tilemapLayer.scaleY);for(var D=[],V=new d.Rectangle(0,0,I,F),k=0;k<L.length;k++){var W=L[k];C.tilemapLayer.tileToWorldXY(W.x,W.y,a,x),V.x=a.x,V.y=a.y,M(m,V)&&D.push(W)}return D};h.exports=p},44662:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=e(93736),c=new y,u=new y,l=function(r,a,v,o,p,m,g){var x=g.tilemapLayer.tilemap._convert.WorldToTileXY;x(r,a,!0,c,m,g);var C=c.x,M=c.y;x(r+v,a+o,!1,u,m,g);var R=Math.ceil(u.x),P=Math.ceil(u.y);return d(C,M,R-C,P-M,p,g)};h.exports=l},29296:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),y=e(10618),c=e(806),u=function(l){return l===d.ORTHOGONAL?c:y};h.exports=u},32688:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),y=e(11516),c=e(18750),u=e(72283),l=e(90562),r=e(45676),a=function(v){return v===d.ORTHOGONAL?r:v===d.ISOMETRIC?c:v===d.HEXAGONAL?y:v===d.STAGGERED?l:u};h.exports=a},74326:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),y=e(10618),c=e(3689),u=e(70520),l=function(r){return r===d.ORTHOGONAL?u:r===d.STAGGERED?c:y};h.exports=l},46598:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(62839),y=function(c,u,l){if(d(c,u,l)){var r=l.data[u][c];return r!==null&&r.index>-1}else return!1};h.exports=y},28654:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(46598),y=e(93736),c=new y,u=function(l,r,a,v){v.tilemapLayer.worldToTileXY(l,r,!0,c,a);var o=c.x,p=c.y;return d(o,p,v)};h.exports=u},6358:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82127),y=e(84314),c=function(u,l){var r=u.tilemapLayer.tilemap,a=u.tilemapLayer,v=Math.floor(r.tileWidth*a.scaleX),o=Math.floor(r.tileHeight*a.scaleY),p=u.hexSideLength,m,g,x,C;if(this.staggerAxis==="y"){var M=(o-p)/2+p;m=y(l.worldView.x-a.x,v,0,!0)-a.cullPaddingX,g=d(l.worldView.right-a.x,v,0,!0)+a.cullPaddingX,x=y(l.worldView.y-a.y,M,0,!0)-a.cullPaddingY,C=d(l.worldView.bottom-a.y,M,0,!0)+a.cullPaddingY}else{var R=(v-p)/2+p;m=y(l.worldView.x-a.x,R,0,!0)-a.cullPaddingX,g=d(l.worldView.right-a.x,R,0,!0)+a.cullPaddingX,x=y(l.worldView.y-a.y,o,0,!0)-a.cullPaddingY,C=d(l.worldView.bottom-a.y,o,0,!0)+a.cullPaddingY}return{left:m,right:g,top:x,bottom:C}};h.exports=c},37524:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6358),y=e(6987),c=function(u,l,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var v=u.tilemapLayer,o=d(u,l);return v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1&&(o.left=0,o.right=u.width,o.top=0,o.bottom=u.height),y(u,o,a,r),r};h.exports=c},63634:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(21715),y=e(93736),c=new y,u=function(l,r,a,v){var o=v.baseTileWidth,p=v.baseTileHeight,m=v.tilemapLayer;m&&(o*=m.scaleX,p*=m.scaleY);var g=d(l,r,c,a,v),x=[],C=.5773502691896257,M,R;this.staggerAxis==="y"?(M=C*o,R=p/2):(M=o/2,R=C*p);for(var P=0;P<6;P++){var w=2*Math.PI*(.5-P)/6;x.push(new y(g.x+M*Math.cos(w),g.y+R*Math.sin(w)))}return x};h.exports=u},21715:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r,a){l||(l=new d);var v=a.baseTileWidth,o=a.baseTileHeight,p=a.tilemapLayer,m=0,g=0;p&&(r||(r=p.scene.cameras.main),m=p.x+r.scrollX*(1-p.scrollFactorX),g=p.y+r.scrollY*(1-p.scrollFactorY),v*=p.scaleX,o*=p.scaleY);var x=v/2,C=o/2,M,R;return this.staggerAxis==="y"?(M=m+v*c+v,R=g+1.5*u*C+C,u%2===0&&(this.staggerIndex==="odd"?M-=x:M+=x)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(M=m+1.5*c*x+x,R=g+o*c+o,c%2===0&&(this.staggerIndex==="odd"?R-=C:R+=C)),l.set(M,R)};h.exports=y},11516:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r,a,v){r||(r=new d);var o=v.baseTileWidth,p=v.baseTileHeight,m=v.tilemapLayer;m&&(a||(a=m.scene.cameras.main),c=c-(m.x+a.scrollX*(1-m.scrollFactorX)),u=u-(m.y+a.scrollY*(1-m.scrollFactorY)),o*=m.scaleX,p*=m.scaleY);var g=.5773502691896257,x=-.3333333333333333,C=0,M=.6666666666666666,R=o/2,P=p/2,w,A,G,O,L;v.staggerAxis==="y"?(w=(c-R)/(g*o),A=(u-P)/P,G=g*w+x*A,O=C*w+M*A):(w=(c-R)/R,A=(u-P)/(g*p),G=x*w+g*A,O=M*w+C*A),L=-G-O;var I=Math.round(G),F=Math.round(O),D=Math.round(L),V=Math.abs(I-G),k=Math.abs(F-O),W=Math.abs(D-L);V>k&&V>W?I=-F-D:k>W&&(F=-I-D);var X,H=F;return v.staggerIndex==="odd"?X=H%2===0?F/2+I:F/2+I-.5:X=H%2===0?F/2+I:F/2+I+.5,r.set(X,H)};h.exports=y},62839:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e>=0&&e<y.width&&d>=0&&d<y.height};h.exports=S},20887:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(13125),y=function(c,u,l,r){l===void 0&&(l=[]),r===void 0&&(r=0),l.length=0;var a=c.tilemapLayer,v=c.data,o=c.width,p=c.height,m=a.skipCull,g=0,x=o,C=0,M=p,R,P,w;if(r===0){for(P=C;P<M;P++)for(R=g;R<x;R++)if(m||d(R,P,c,u)){if(w=v[P][R],!w||w.index===-1||!w.visible||w.alpha===0)continue;l.push(w)}}else if(r===1){for(P=C;P<M;P++)for(R=x;R>=g;R--)if(m||d(R,P,c,u)){if(w=v[P][R],!w||w.index===-1||!w.visible||w.alpha===0)continue;l.push(w)}}else if(r===2){for(P=M;P>=C;P--)for(R=g;R<x;R++)if(m||d(R,P,c,u)){if(w=v[P][R],!w||w.index===-1||!w.visible||w.alpha===0)continue;l.push(w)}}else if(r===3){for(P=M;P>=C;P--)for(R=x;R>=g;R--)if(m||d(R,P,c,u)){if(w=v[P][R],!w||w.index===-1||!w.visible||w.alpha===0)continue;l.push(w)}}return a.tilesDrawn=l.length,a.tilesTotal=o*p,l};h.exports=y},21808:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r,a){l||(l=new d);var v=a.baseTileWidth,o=a.baseTileHeight,p=a.tilemapLayer,m=0,g=0;p&&(r||(r=p.scene.cameras.main),m=p.x+r.scrollX*(1-p.scrollFactorX),v*=p.scaleX,g=p.y+r.scrollY*(1-p.scrollFactorY),o*=p.scaleY);var x=m+(c-u)*(v/2),C=g+(c+u)*(o/2);return l.set(x,C)};h.exports=y},18750:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r,a,v,o){r||(r=new d);var p=v.baseTileWidth,m=v.baseTileHeight,g=v.tilemapLayer;g&&(a||(a=g.scene.cameras.main),u=u-(g.y+a.scrollY*(1-g.scrollFactorY)),m*=g.scaleY,c=c-(g.x+a.scrollX*(1-g.scrollFactorX)),p*=g.scaleX);var x=p/2,C=m/2;c=c-x,o||(u=u-m);var M=.5*(c/x+u/C),R=.5*(-c/x+u/C);return l&&(M=Math.floor(M),R=Math.floor(R)),r.set(M,R)};h.exports=y},29003:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29633),y=e(62839),c=e(92839),u=e(68234),l=function(r,a,v,o,p){if(o===void 0&&(o=!0),!y(a,v,p))return null;var m,g=p.data[v][a],x=g&&g.collides;r instanceof d?(p.data[v][a]===null&&(p.data[v][a]=new d(p,r.index,a,v,p.tileWidth,p.tileHeight)),p.data[v][a].copy(r)):(m=r,p.data[v][a]===null?p.data[v][a]=new d(p,m,a,v,p.tileWidth,p.tileHeight):p.data[v][a].index=m);var C=p.data[v][a],M=p.collideIndexes.indexOf(C.index)!==-1;if(m=r instanceof d?r.index:r,m===-1)C.width=p.tileWidth,C.height=p.tileHeight;else{var R=p.tilemapLayer.tilemap.tiles,P=R[m][2],w=p.tilemapLayer.tileset[P];C.width=w.tileWidth,C.height=w.tileHeight}return u(C,M),o&&x!==C.collides&&c(a,v,p),C};h.exports=l},48565:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29003),y=e(93736),c=new y,u=function(l,r,a,v,o,p){return p.tilemapLayer.worldToTileXY(r,a,!0,c,o,p),d(l,c.x,c.y,v,p)};h.exports=u},56547:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60386),y=e(29003),c=function(u,l,r,a,v){if(a===void 0&&(a=!0),!Array.isArray(u))return null;Array.isArray(u[0])||(u=[u]);for(var o=u.length,p=u[0].length,m=0;m<o;m++)for(var g=0;g<p;g++){var x=u[m][g];y(x,l+g,r+m,!1,v)}a&&d(l-1,r-1,p+2,o+2,v)};h.exports=c},91180:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=e(72861),c=function(u,l,r,a,v,o){var p,m=d(u,l,r,a,{},o);if(!v)for(v=[],p=0;p<m.length;p++)v.indexOf(m[p].index)===-1&&v.push(m[p].index);for(p=0;p<m.length;p++)m[p].index=y(v)};h.exports=c},929:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29633),y=e(62839),c=e(92839),u=function(l,r,a,v,o){if(a===void 0&&(a=!0),v===void 0&&(v=!0),!y(l,r,o))return null;var p=o.data[r][l];if(p)o.data[r][l]=a?null:new d(o,-1,l,r,o.tileWidth,o.tileHeight);else return null;return v&&p&&p.collides&&c(l,r,o),p};h.exports=u},17384:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(929),y=e(93736),c=new y,u=function(l,r,a,v,o,p){return p.tilemapLayer.worldToTileXY(l,r,!0,c,o,p),d(c.x,c.y,a,v,p)};h.exports=u},93763:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=e(95509),c=new y(105,210,231,150),u=new y(243,134,48,200),l=new y(40,39,37,150),r=function(a,v,o){v===void 0&&(v={});var p=v.tileColor!==void 0?v.tileColor:c,m=v.collidingTileColor!==void 0?v.collidingTileColor:u,g=v.faceColor!==void 0?v.faceColor:l,x=d(0,0,o.width,o.height,null,o);a.translateCanvas(o.tilemapLayer.x,o.tilemapLayer.y),a.scaleCanvas(o.tilemapLayer.scaleX,o.tilemapLayer.scaleY);for(var C=0;C<x.length;C++){var M=x[C],R=M.width,P=M.height,w=M.pixelX,A=M.pixelY,G=M.collides?m:p;G!==null&&(a.fillStyle(G.color,G.alpha/255),a.fillRect(w,A,R,P)),w+=1,A+=1,R-=2,P-=2,g!==null&&(a.lineStyle(1,g.color,g.alpha/255),M.faceTop&&a.lineBetween(w,A,w+R,A),M.faceRight&&a.lineBetween(w+R,A,w+R,A+P),M.faceBottom&&a.lineBetween(w,A+P,w+R,A+P),M.faceLeft&&a.lineBetween(w,A,w,A+P))}};h.exports=r},51202:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=function(c,u,l,r,a,v,o){for(var p=d(l,r,a,v,null,o),m=0;m<p.length;m++)p[m]&&p[m].index===c&&(p[m].index=u)};h.exports=y},6987:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=e.data,l=e.width,r=e.height,a=e.tilemapLayer,v=Math.max(0,d.left),o=Math.min(l,d.right),p=Math.max(0,d.top),m=Math.min(r,d.bottom),g,x,C;if(y===0)for(x=p;x<m;x++)for(g=v;u[x]&&g<o;g++)C=u[x][g],!(!C||C.index===-1||!C.visible||C.alpha===0)&&c.push(C);else if(y===1)for(x=p;x<m;x++)for(g=o;u[x]&&g>=v;g--)C=u[x][g],!(!C||C.index===-1||!C.visible||C.alpha===0)&&c.push(C);else if(y===2)for(x=m;x>=p;x--)for(g=v;u[x]&&g<o;g++)C=u[x][g],!(!C||C.index===-1||!C.visible||C.alpha===0)&&c.push(C);else if(y===3)for(x=m;x>=p;x--)for(g=o;u[x]&&g>=v;g--)C=u[x][g],!(!C||C.index===-1||!C.visible||C.alpha===0)&&c.push(C);return a.tilesDrawn=c.length,a.tilesTotal=l*r,c};h.exports=S},51710:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),y=e(60386),c=e(91181),u=function(l,r,a,v,o){r===void 0&&(r=!0),a===void 0&&(a=!0),o===void 0&&(o=!0),Array.isArray(l)||(l=[l]);for(var p=0;p<l.length;p++)c(l[p],r,v);if(o)for(var m=0;m<v.height;m++)for(var g=0;g<v.width;g++){var x=v.data[m][g];x&&l.indexOf(x.index)!==-1&&d(x,r)}a&&y(0,0,v.width,v.height,v)};h.exports=u},15216:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),y=e(60386),c=e(91181),u=function(l,r,a,v,o,p){if(a===void 0&&(a=!0),v===void 0&&(v=!0),p===void 0&&(p=!0),!(l>r)){for(var m=l;m<=r;m++)c(m,a,o);if(p)for(var g=0;g<o.height;g++)for(var x=0;x<o.width;x++){var C=o.data[g][x];C&&C.index>=l&&C.index<=r&&d(C,a)}v&&y(0,0,o.width,o.height,o)}};h.exports=u},33158:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),y=e(60386),c=e(91181),u=function(l,r,a,v){r===void 0&&(r=!0),a===void 0&&(a=!0),Array.isArray(l)||(l=[l]);for(var o=0;o<v.height;o++)for(var p=0;p<v.width;p++){var m=v.data[o][p];m&&l.indexOf(m.index)===-1&&(d(m,r),c(m.index,r,v))}a&&y(0,0,v.width,v.height,v)};h.exports=u},4180:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),y=e(60386),c=e(19256),u=function(l,r,a,v){r===void 0&&(r=!0),a===void 0&&(a=!0);for(var o=0;o<v.height;o++)for(var p=0;p<v.width;p++){var m=v.data[o][p];if(m){for(var g in l)if(c(m.properties,g)){var x=l[g];Array.isArray(x)||(x=[x]);for(var C=0;C<x.length;C++)m.properties[g]===x[C]&&d(m,r)}}}a&&y(0,0,v.width,v.height,v)};h.exports=u},18625:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),y=e(60386),c=function(u,l,r){u===void 0&&(u=!0),l===void 0&&(l=!0);for(var a=0;a<r.height;a++)for(var v=0;v<r.width;v++){var o=r.data[a][v];if(o){var p=o.getCollisionGroup();p&&p.objects&&p.objects.length>0&&d(o,u)}}l&&y(0,0,r.width,r.height,r)};h.exports=c},91181:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=y.collideIndexes.indexOf(e);d&&c===-1?y.collideIndexes.push(e):!d&&c!==-1&&y.collideIndexes.splice(c,1)};h.exports=S},68234:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};h.exports=S},11628:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){if(typeof e=="number")c.callbacks[e]=d!==null?{callback:d,callbackContext:y}:void 0;else for(var u=0,l=e.length;u<l;u++)c.callbacks[e[u]]=d!==null?{callback:d,callbackContext:y}:void 0};h.exports=S},72732:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=function(c,u,l,r,a,v,o){for(var p=d(c,u,l,r,null,o),m=0;m<p.length;m++)p[m].setCollisionCallback(a,v)};h.exports=y},34397:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=e(18592),c=function(u,l,r,a,v){var o=d(u,l,r,a,null,v),p=o.map(function(g){return g.index});y(p);for(var m=0;m<o.length;m++)o[m].index=p[m]};h.exports=c},53945:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82127),y=e(84314),c=function(u,l){var r=u.tilemapLayer.tilemap,a=u.tilemapLayer,v=Math.floor(r.tileWidth*a.scaleX),o=Math.floor(r.tileHeight*a.scaleY),p=y(l.worldView.x-a.x,v,0,!0)-a.cullPaddingX,m=d(l.worldView.right-a.x,v,0,!0)+a.cullPaddingX,g=y(l.worldView.y-a.y,o/2,0,!0)-a.cullPaddingY,x=d(l.worldView.bottom-a.y,o/2,0,!0)+a.cullPaddingY;return{left:p,right:m,top:g,bottom:x}};h.exports=c},19242:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53945),y=e(6987),c=function(u,l,r,a){r===void 0&&(r=[]),a===void 0&&(a=0),r.length=0;var v=u.tilemapLayer,o=d(u,l);return v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1&&(o.left=0,o.right=u.width,o.top=0,o.bottom=u.height),y(u,o,a,r),r};h.exports=c},33388:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r,a){l||(l=new d);var v=a.baseTileWidth,o=a.baseTileHeight,p=a.tilemapLayer,m=0,g=0;p&&(r||(r=p.scene.cameras.main),m=p.x+r.scrollX*(1-p.scrollFactorX),v*=p.scaleX,g=p.y+r.scrollY*(1-p.scrollFactorY),o*=p.scaleY);var x=m+c*v+u%2*(v/2),C=g+u*(o/2);return l.set(x,C)};h.exports=y},84132:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=y.baseTileHeight,u=y.tilemapLayer,l=0;return u&&(d===void 0&&(d=u.scene.cameras.main),l=u.y+d.scrollY*(1-u.scrollFactorY),c*=u.scaleY),l+e*(c/2)+c};h.exports=S},90562:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r,a,v){r||(r=new d);var o=v.baseTileWidth,p=v.baseTileHeight,m=v.tilemapLayer;m&&(a||(a=m.scene.cameras.main),u=u-(m.y+a.scrollY*(1-m.scrollFactorY)),p*=m.scaleY,c=c-(m.x+a.scrollX*(1-m.scrollFactorX)),o*=m.scaleX);var g=l?Math.floor(u/(p/2)):u/(p/2),x=l?Math.floor((c+g%2*.5*o)/o):(c+g%2*.5*o)/o;return r.set(x,g)};h.exports=y},3689:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=c.baseTileHeight,l=c.tilemapLayer;return l&&(y||(y=l.scene.cameras.main),e=e-(l.y+y.scrollY*(1-l.scrollFactorY)),u*=l.scaleY),d?Math.floor(e/(u/2)):e/(u/2)};h.exports=S},55217:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=function(c,u,l,r,a,v,o){for(var p=d(l,r,a,v,null,o),m=0;m<p.length;m++)p[m]&&(p[m].index===c?p[m].index=u:p[m].index===u&&(p[m].index=c))};h.exports=y},44150:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=y.baseTileWidth,u=y.tilemapLayer,l=0;return u&&(d||(d=u.scene.cameras.main),l=u.x+d.scrollX*(1-u.scrollFactorX),c*=u.scaleX),l+e*c};h.exports=S},46836:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44150),y=e(42477),c=e(93736),u=function(l,r,a,v,o){return a||(a=new c(0,0)),a.x=d(l,v,o),a.y=y(r,v,o),a};h.exports=u},42477:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=y.baseTileHeight,u=y.tilemapLayer,l=0;return u&&(d||(d=u.scene.cameras.main),l=u.y+d.scrollY*(1-u.scrollFactorY),c*=u.scaleY),l+e*c};h.exports=S},39677:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),y=function(c,u,l,r,a,v){if(a){var o,p=d(c,u,l,r,null,v),m=0;for(o=0;o<a.length;o++)m+=a[o].weight;if(!(m<=0))for(o=0;o<p.length;o++){for(var g=Math.random()*m,x=0,C=-1,M=0;M<a.length;M++)if(x+=a[M].weight,g<=x){var R=a[M].index;C=Array.isArray(R)?R[Math.floor(Math.random()*R.length)]:R;break}p[o].index=C}}};h.exports=y},806:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45676),y=e(93736),c=new y,u=function(l,r,a,v){return d(l,0,r,c,a,v),c.x};h.exports=u},45676:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),y=function(c,u,l,r,a,v){l===void 0&&(l=!0),r||(r=new d);var o=v.baseTileWidth,p=v.baseTileHeight,m=v.tilemapLayer;m&&(a||(a=m.scene.cameras.main),c=c-(m.x+a.scrollX*(1-m.scrollFactorX)),u=u-(m.y+a.scrollY*(1-m.scrollFactorY)),o*=m.scaleX,p*=m.scaleY);var g=c/o,x=u/p;return l&&(g=Math.floor(g),x=Math.floor(x)),r.set(g,x)};h.exports=y},70520:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45676),y=e(93736),c=new y,u=function(l,r,a,v){return d(0,l,r,c,a,v),c.y};h.exports=u},5047:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CalculateFacesAt:e(92839),CalculateFacesWithin:e(60386),CheckIsoBounds:e(13125),Copy:e(17347),CreateFromTiles:e(93604),CullBounds:e(71586),CullTiles:e(381),Fill:e(97734),FilterTiles:e(63555),FindByIndex:e(37982),FindTile:e(48297),ForEachTile:e(80916),GetCullTilesFunction:e(31493),GetTileAt:e(15494),GetTileAtWorldXY:e(24640),GetTileCorners:e(48495),GetTileCornersFunction:e(7160),GetTilesWithin:e(50811),GetTilesWithinShape:e(31674),GetTilesWithinWorldXY:e(44662),GetTileToWorldXFunction:e(16884),GetTileToWorldXYFunction:e(68182),GetTileToWorldYFunction:e(3752),GetWorldToTileXFunction:e(29296),GetWorldToTileXYFunction:e(32688),GetWorldToTileYFunction:e(74326),HasTileAt:e(46598),HasTileAtWorldXY:e(28654),HexagonalCullBounds:e(6358),HexagonalCullTiles:e(37524),HexagonalGetTileCorners:e(63634),HexagonalTileToWorldXY:e(21715),HexagonalWorldToTileXY:e(11516),IsInLayerBounds:e(62839),IsometricCullTiles:e(20887),IsometricTileToWorldXY:e(21808),IsometricWorldToTileXY:e(18750),PutTileAt:e(29003),PutTileAtWorldXY:e(48565),PutTilesAt:e(56547),Randomize:e(91180),RemoveTileAt:e(929),RemoveTileAtWorldXY:e(17384),RenderDebug:e(93763),ReplaceByIndex:e(51202),RunCull:e(6987),SetCollision:e(51710),SetCollisionBetween:e(15216),SetCollisionByExclusion:e(33158),SetCollisionByProperty:e(4180),SetCollisionFromCollisionGroup:e(18625),SetLayerCollisionIndex:e(91181),SetTileCollision:e(68234),SetTileIndexCallback:e(11628),SetTileLocationCallback:e(72732),Shuffle:e(34397),StaggeredCullBounds:e(53945),StaggeredCullTiles:e(19242),StaggeredTileToWorldXY:e(33388),StaggeredTileToWorldY:e(84132),StaggeredWorldToTileXY:e(90562),StaggeredWorldToTileY:e(3689),SwapByIndex:e(55217),TileToWorldX:e(44150),TileToWorldXY:e(46836),TileToWorldY:e(42477),WeightedRandomize:e(39677),WorldToTileX:e(806),WorldToTileXY:e(45676),WorldToTileY:e(70520)}},12920:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={ORIENTATION:e(12920)};h.exports=d},52678:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),y=e(84758),c={Components:e(5047),Parsers:e(34124),Formats:e(93560),ImageCollection:e(97042),ParseToTilemap:e(15043),Tile:e(29633),Tilemap:e(89797),TilemapCreator:e(4843),TilemapFactory:e(37940),Tileset:e(47975),TilemapLayer:e(87177),Orientation:e(12920),LayerData:e(94990),MapData:e(16586),ObjectLayer:e(15256)};c=d(!1,c,y.ORIENTATION),h.exports=c},94990:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12920),c=e(72632),u=new d({initialize:function(r){r===void 0&&(r={}),this.name=c(r,"name","layer"),this.x=c(r,"x",0),this.y=c(r,"y",0),this.width=c(r,"width",0),this.height=c(r,"height",0),this.tileWidth=c(r,"tileWidth",0),this.tileHeight=c(r,"tileHeight",0),this.baseTileWidth=c(r,"baseTileWidth",this.tileWidth),this.baseTileHeight=c(r,"baseTileHeight",this.tileHeight),this.orientation=c(r,"orientation",y.ORTHOGONAL),this.widthInPixels=c(r,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=c(r,"heightInPixels",this.height*this.baseTileHeight),this.alpha=c(r,"alpha",1),this.visible=c(r,"visible",!0),this.properties=c(r,"properties",[]),this.indexes=c(r,"indexes",[]),this.collideIndexes=c(r,"collideIndexes",[]),this.callbacks=c(r,"callbacks",[]),this.bodies=c(r,"bodies",[]),this.data=c(r,"data",[]),this.tilemapLayer=c(r,"tilemapLayer",null),this.hexSideLength=c(r,"hexSideLength",0),this.staggerAxis=c(r,"staggerAxis","y"),this.staggerIndex=c(r,"staggerIndex","odd")}});h.exports=u},16586:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(12920),c=e(72632),u=new d({initialize:function(r){r===void 0&&(r={}),this.name=c(r,"name","map"),this.width=c(r,"width",0),this.height=c(r,"height",0),this.infinite=c(r,"infinite",!1),this.tileWidth=c(r,"tileWidth",0),this.tileHeight=c(r,"tileHeight",0),this.widthInPixels=c(r,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=c(r,"heightInPixels",this.height*this.tileHeight),this.format=c(r,"format",null),this.orientation=c(r,"orientation",y.ORTHOGONAL),this.renderOrder=c(r,"renderOrder","right-down"),this.version=c(r,"version","1"),this.properties=c(r,"properties",{}),this.layers=c(r,"layers",[]),this.images=c(r,"images",[]),this.objects=c(r,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=c(r,"collision",{}),this.tilesets=c(r,"tilesets",[]),this.imageCollections=c(r,"imageCollections",[]),this.tiles=c(r,"tiles",[]),this.hexSideLength=c(r,"hexSideLength",0),this.staggerAxis=c(r,"staggerAxis","y"),this.staggerIndex=c(r,"staggerIndex","odd")}});h.exports=u},15256:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=new d({initialize:function(l){l===void 0&&(l={}),this.name=y(l,"name","object layer"),this.opacity=y(l,"opacity",1),this.properties=y(l,"properties",{}),this.propertyTypes=y(l,"propertytypes",{}),this.type=y(l,"type","objectgroup"),this.visible=y(l,"visible",!0),this.objects=y(l,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});h.exports=c},21394:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),y=function(c){return c=c.toLowerCase(),c==="isometric"?d.ISOMETRIC:c==="staggered"?d.STAGGERED:c==="hexagonal"?d.HEXAGONAL:d.ORTHOGONAL};h.exports=y},90715:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),y=e(84346),c=e(96097),u=e(2378),l=e(44909),r=function(a,v,o,p,m,g){var x;switch(v){case d.ARRAY_2D:x=y(a,o,p,m,g);break;case d.CSV:x=c(a,o,p,m,g);break;case d.TILED_JSON:x=u(a,o,g);break;case d.WELTMEISTER:x=l(a,o,g);break;default:console.warn("Unrecognized tilemap data format: "+v),x=null}return x};h.exports=r},84346:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),y=e(94990),c=e(16586),u=e(29633),l=function(r,a,v,o,p){for(var m=new y({tileWidth:v,tileHeight:o}),g=new c({name:r,tileWidth:v,tileHeight:o,format:d.ARRAY_2D,layers:[m]}),x=[],C=a.length,M=0,R=0;R<a.length;R++){x[R]=[];for(var P=a[R],w=0;w<P.length;w++){var A=parseInt(P[w],10);isNaN(A)||A===-1?x[R][w]=p?null:new u(m,-1,w,R,v,o):x[R][w]=new u(m,A,w,R,v,o)}M===0&&(M=P.length)}return g.width=m.width=M,g.height=m.height=C,g.widthInPixels=m.widthInPixels=M*v,g.heightInPixels=m.heightInPixels=C*o,m.data=x,g};h.exports=l},96097:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),y=e(84346),c=function(u,l,r,a,v){var o=l.trim().split(`
`).map(function(m){return m.split(",")}),p=y(u,o,r,a,v);return p.format=d.CSV,p};h.exports=c},30951:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(94990),y=e(29633),c=function(u,l){for(var r=[],a=0;a<u.layer.length;a++){for(var v=u.layer[a],o=new d({name:v.name,width:v.width,height:v.height,tileWidth:v.tilesize,tileHeight:v.tilesize,visible:v.visible===1}),p=[],m=[],g=0;g<v.data.length;g++){for(var x=0;x<v.data[g].length;x++){var C=v.data[g][x]-1,M;C>-1?M=new y(o,C,x,g,v.tilesize,v.tilesize):M=l?null:new y(o,-1,x,g,v.tilesize,v.tilesize),p.push(M)}m.push(p),p=[]}o.data=m,r.push(o)}return r};h.exports=c},47488:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47975),y=function(c){for(var u=[],l=[],r=0;r<c.layer.length;r++){var a=c.layer[r],v=a.tilesetName;v!==""&&l.indexOf(v)===-1&&(l.push(v),u.push(new d(v,0,a.tilesize,a.tilesize,0,0)))}return u};h.exports=y},44909:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),y=e(16586),c=e(30951),u=e(47488),l=function(r,a,v){if(a.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+r),null;for(var o=0,p=0,m=0;m<a.layer.length;m++)a.layer[m].width>o&&(o=a.layer[m].width),a.layer[m].height>p&&(p=a.layer[m].height);var g=new y({width:o,height:p,name:r,tileWidth:a.layer[0].tilesize,tileHeight:a.layer[0].tilesize,format:d.WELTMEISTER});return g.layers=c(a,v),g.tilesets=u(a),g};h.exports=l},24507:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ParseTileLayers:e(30951),ParseTilesets:e(47488),ParseWeltmeister:e(44909)}},34124:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={FromOrientationString:e(21394),Parse:e(90715),Parse2DArray:e(84346),ParseCSV:e(96097),Impact:e(24507),Tiled:e(50044)}},48646:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),y=function(c){for(var u,l,r,a,v,o=0;o<c.layers.length;o++){u=c.layers[o],a=null;for(var p=0;p<u.data.length;p++){v=u.data[p];for(var m=0;m<v.length;m++)l=v[m],!(l===null||l.index<0)&&(r=c.tiles[l.index][2],a=c.tilesets[r],l.width=a.tileWidth,l.height=a.tileHeight,a.tileProperties&&a.tileProperties[l.index-a.firstgid]&&(l.properties=d(l.properties,a.tileProperties[l.index-a.firstgid])))}}};h.exports=y},43908:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){for(var d=window.atob(e),y=d.length,c=new Array(y/4),u=0;u<y;u+=4)c[u/4]=(d.charCodeAt(u)|d.charCodeAt(u+1)<<8|d.charCodeAt(u+2)<<16|d.charCodeAt(u+3)<<24)>>>0;return c};h.exports=S},14556:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47975),y=function(c){var u,l,r=[];for(u=0;u<c.imageCollections.length;u++)for(var a=c.imageCollections[u],v=a.images,o=0;o<v.length;o++){var p=v[o];l=new d(p.image,p.gid,a.imageWidth,a.imageHeight,0,0),l.updateTileData(a.imageWidth,a.imageHeight),c.tilesets.push(l)}for(u=0;u<c.tilesets.length;u++){l=c.tilesets[u];for(var m=l.tileMargin,g=l.tileMargin,x=0,C=0,M=0,R=l.firstgid;R<l.firstgid+l.total&&(r[R]=[m,g,u],m+=l.tileWidth+l.tileSpacing,x++,!(x===l.total||(C++,C===l.columns&&(m=l.tileMargin,g+=l.tileHeight+l.tileSpacing,C=0,M++,M===l.rows))));R++);}return r};h.exports=y},92044:(h,S,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),y=function(c,u,l){if(!u)return{i:0,layers:c.layers,name:"",opacity:1,visible:!0,x:0,y:0};var r=u.x+d(u,"startx",0)*c.tilewidth+d(u,"offsetx",0),a=u.y+d(u,"starty",0)*c.tileheight+d(u,"offsety",0);return{i:0,layers:u.layers,name:l.name+u.name+"/",opacity:l.opacity*u.opacity,visible:l.visible&&u.visible,x:l.x+r,y:l.y+a}};h.exports=y},8847:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=2147483648,e=1073741824,d=536870912,y=function(c){var u=!!(c&S),l=!!(c&e),r=!!(c&d);c=c&~(S|e|d);var a=0,v=!1;return u&&l&&r?(a=Math.PI/2,v=!0):u&&l&&!r?(a=Math.PI,v=!1):u&&!l&&r?(a=Math.PI/2,v=!1):u&&!l&&!r?(a=0,v=!0):!u&&l&&r?(a=3*Math.PI/2,v=!1):!u&&l&&!r?(a=Math.PI,v=!0):!u&&!l&&r?(a=3*Math.PI/2,v=!0):!u&&!l&&!r&&(a=0,v=!1),{gid:c,flippedHorizontal:u,flippedVertical:l,flippedAntiDiagonal:r,rotation:a,flipped:v}};h.exports=y},78339:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),y=e(92044),c=function(u){for(var l=[],r=[],a=y(u);a.i<a.layers.length||r.length>0;){if(a.i>=a.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=r.pop();continue}var v=a.layers[a.i];if(a.i++,v.type!=="imagelayer"){if(v.type==="group"){var o=y(u,v,a);r.push(a),a=o}continue}var p=d(v,"offsetx",0)+d(v,"startx",0),m=d(v,"offsety",0)+d(v,"starty",0);l.push({name:a.name+v.name,image:v.image,x:a.x+p+v.x,y:a.y+m+v.y,alpha:a.opacity*v.opacity,visible:a.visible&&v.visible,properties:d(v,"properties",{})})}return l};h.exports=c},2378:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(48646),y=e(14556),c=e(12920),u=e(28699),l=e(93560),r=e(21394),a=e(16586),v=e(78339),o=e(61136),p=e(95925),m=e(93392),g=function(x,C,M){var R=u(C),P=new a({width:R.width,height:R.height,name:x,tileWidth:R.tilewidth,tileHeight:R.tileheight,orientation:r(R.orientation),format:l.TILED_JSON,version:R.version,properties:R.properties,renderOrder:R.renderorder,infinite:R.infinite});P.orientation===c.HEXAGONAL&&(P.hexSideLength=R.hexsidelength,P.staggerAxis=R.staggeraxis,P.staggerIndex=R.staggerindex),P.layers=p(R,M),P.images=v(R);var w=m(R);return P.tilesets=w.tilesets,P.imageCollections=w.imageCollections,P.objects=o(R),P.tiles=y(P),d(P),P};h.exports=g},4281:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28820),y=e(8847),c=function(r){return{x:r.x,y:r.y}},u=["id","name","type","rotation","properties","visible","x","y","width","height"],l=function(r,a,v){a===void 0&&(a=0),v===void 0&&(v=0);var o=d(r,u);if(o.x+=a,o.y+=v,r.gid){var p=y(r.gid);o.gid=p.gid,o.flippedHorizontal=p.flippedHorizontal,o.flippedVertical=p.flippedVertical,o.flippedAntiDiagonal=p.flippedAntiDiagonal}else r.polyline?o.polyline=r.polyline.map(c):r.polygon?o.polygon=r.polygon.map(c):r.ellipse?o.ellipse=r.ellipse:r.text?o.text=r.text:r.point?o.point=!0:o.rectangle=!0;return o};h.exports=l},61136:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),y=e(4281),c=e(15256),u=e(92044),l=function(r){for(var a=[],v=[],o=u(r);o.i<o.layers.length||v.length>0;){if(o.i>=o.layers.length){if(v.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=v.pop();continue}var p=o.layers[o.i];if(o.i++,p.opacity*=o.opacity,p.visible=o.visible&&p.visible,p.type!=="objectgroup"){if(p.type==="group"){var m=u(r,p,o);v.push(o),o=m}continue}p.name=o.name+p.name;for(var g=o.x+d(p,"startx",0)+d(p,"offsetx",0),x=o.y+d(p,"starty",0)+d(p,"offsety",0),C=[],M=0;M<p.objects.length;M++){var R=y(p.objects[M],g,x);C.push(R)}var P=new c(p);P.objects=C,a.push(P)}return a};h.exports=l},95925:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(43908),y=e(12920),c=e(92044),u=e(21394),l=e(72632),r=e(94990),a=e(8847),v=e(29633),o=function(p,m){for(var g=l(p,"infinite",!1),x=[],C=[],M=c(p);M.i<M.layers.length||C.length>0;){if(M.i>=M.layers.length){if(C.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}M=C.pop();continue}var R=M.layers[M.i];if(M.i++,R.type!=="tilelayer"){if(R.type==="group"){var P=c(p,R,M);C.push(M),M=P}continue}if(R.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+R.name+"'");continue}else if(R.encoding&&R.encoding==="base64"){if(R.chunks)for(var w=0;w<R.chunks.length;w++)R.chunks[w].data=d(R.chunks[w].data);R.data&&(R.data=d(R.data)),delete R.encoding}var A,G,O,L,I=[],F=0;if(g){var D=l(R,"startx",0)+R.x,V=l(R,"starty",0)+R.y;A=new r({name:M.name+R.name,x:M.x+l(R,"offsetx",0)+D*p.tilewidth,y:M.y+l(R,"offsety",0)+V*p.tileheight,width:R.width,height:R.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:M.opacity*R.opacity,visible:M.visible&&R.visible,properties:l(R,"properties",[]),orientation:u(p.orientation)}),A.orientation===y.HEXAGONAL&&(A.hexSideLength=p.hexsidelength,A.staggerAxis=p.staggeraxis,A.staggerIndex=p.staggerindex);for(var k=0;k<R.height;k++){I[k]=[null];for(var W=0;W<R.width;W++)I[k][W]=null}for(k=0,Z=R.chunks.length;k<Z;k++)for(var X=R.chunks[k],H=X.x-D,$=X.y-V,z=0,b=0,B=X.data.length;b<B;b++){var N=F+H,U=z+$;G=a(X.data[b]),G.gid>0?(O=new v(A,G.gid,N,U,p.tilewidth,p.tileheight),O.rotation=G.rotation,O.flipX=G.flipped,I[U][N]=O):(L=m?null:new v(A,-1,N,U,p.tilewidth,p.tileheight),I[U][N]=L),F++,F===X.width&&(z++,F=0)}}else{A=new r({name:M.name+R.name,x:M.x+l(R,"offsetx",0)+R.x,y:M.y+l(R,"offsety",0)+R.y,width:R.width,height:R.height,tileWidth:p.tilewidth,tileHeight:p.tileheight,alpha:M.opacity*R.opacity,visible:M.visible&&R.visible,properties:l(R,"properties",[]),orientation:u(p.orientation)}),A.orientation===y.HEXAGONAL&&(A.hexSideLength=p.hexsidelength,A.staggerAxis=p.staggeraxis,A.staggerIndex=p.staggerindex);for(var Y=[],K=0,Z=R.data.length;K<Z;K++)G=a(R.data[K]),G.gid>0?(O=new v(A,G.gid,F,I.length,p.tilewidth,p.tileheight),O.rotation=G.rotation,O.flipX=G.flipped,Y.push(O)):(L=m?null:new v(A,-1,F,I.length,p.tilewidth,p.tileheight),Y.push(L)),F++,F===R.width&&(I.push(Y),F=0,Y=[])}A.data=I,x.push(A)}return x};h.exports=o},93392:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47975),y=e(97042),c=e(4281),u=e(39642),l=function(r){for(var a=[],v=[],o=null,p,m=0;m<r.tilesets.length;m++){var g=r.tilesets[m];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var x=new d(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,void 0,void 0,g.tileoffset);if(r.version>1){var C=void 0,M=void 0;if(Array.isArray(g.tiles)){C=C||{},M=M||{};for(var R=0;R<g.tiles.length;R++){var P=g.tiles[R];if(P.properties){var w={};P.properties.forEach(function(k){w[k.name]=k.value}),M[P.id]=w}if(P.objectgroup&&((C[P.id]||(C[P.id]={})).objectgroup=P.objectgroup,P.objectgroup.objects)){var A=P.objectgroup.objects.map(function(k){return c(k)});C[P.id].objectgroup.objects=A}P.animation&&((C[P.id]||(C[P.id]={})).animation=P.animation),P.type&&((C[P.id]||(C[P.id]={})).type=P.type)}}Array.isArray(g.wangsets)&&(C=C||{},M=M||{},u(g.wangsets,C)),C&&(x.tileData=C,x.tileProperties=M)}else if(g.tileproperties&&(x.tileProperties=g.tileproperties),g.tiles){x.tileData=g.tiles;for(p in x.tileData){var G=x.tileData[p].objectgroup;if(G&&G.objects){var O=G.objects.map(function(k){return c(k)});x.tileData[p].objectgroup.objects=O}}}x.updateTileData(g.imagewidth,g.imageheight),a.push(x)}else{var L=new y(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),I=0;for(R=0;R<g.tiles.length;R++){P=g.tiles[R];var F=P.image,D=parseInt(P.id,10),V=g.firstgid+D;L.addImage(V,F),I=Math.max(D,I)}L.maxId=I,v.push(L)}o&&(o.lastgid=g.firstgid-1),o=g}return{tilesets:a,imageCollections:v}};h.exports=l},39642:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){for(var y=0;y<e.length;y++){var c=e[y],u=y;if(c.name&&c.name!==""&&(u=c.name),Array.isArray(c.wangtiles)&&c.wangtiles.length>0){var l={},r={},a,v,o;if(Array.isArray(c.edgecolors))for(a=0;a<c.edgecolors.length;a++)o=1+a,v=c.edgecolors[a],v.name!==""&&(l[o]=v.name);if(Array.isArray(c.cornercolors))for(a=0;a<c.cornercolors.length;a++)o=1+a,v=c.cornercolors[a],v.name!==""&&(r[o]=v.name);if(Array.isArray(c.colors))for(a=0;a<c.colors.length;a++)v=c.colors[a],o=1+a,v.name!==""&&(l[o]=r[o]=v.name);for(var p=[l,r,l,r,l,r,l,r],m=0;m<c.wangtiles.length;m++){var g=c.wangtiles[m],x=d[g.tileid]||(d[g.tileid]={});x=x.wangid||(x.wangid={});for(var C=[],M=0;M<Math.min(p.length,g.wangid.length);M++){if(v=g.wangid[M],v===0){C.push(void 0);continue}var R=p[M][v];if(R!==void 0){C.push(R);continue}C.push(v)}x[u]=C}}}};h.exports=S},50044:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={AssignTileProperties:e(48646),Base64Decode:e(43908),BuildTilesetIndex:e(14556),CreateGroupLayer:e(92044),ParseGID:e(8847),ParseImageLayers:e(78339),ParseJSONTiled:e(2378),ParseObject:e(4281),ParseObjectLayers:e(61136),ParseTileLayers:e(95925),ParseTilesets:e(93392)}},73779:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(91963),c=e(7599),u=e(57911),l=e(66458),r=new d({initialize:function(v){this.scene=v,this.systems=v.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],v.sys.events.once(c.BOOT,this.boot,this),v.sys.events.on(c.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var a=this.systems.events;a.on(c.PRE_UPDATE,this.preUpdate,this),a.on(c.UPDATE,this.update,this),a.once(c.SHUTDOWN,this.shutdown,this)},addEvent:function(a){var v;return a instanceof u?(v=a,this.removeEvent(v),v.elapsed=v.startAt,v.hasDispatched=!1,v.repeatCount=v.repeat===-1||v.loop?999999999999:v.repeat):v=new u(a),this._pendingInsertion.push(v),v},delayedCall:function(a,v,o,p){return this.addEvent({delay:a,callback:v,args:o,callbackScope:p})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(a){Array.isArray(a)||(a=[a]);for(var v=0;v<a.length;v++){var o=a[v];l(this._pendingRemoval,o),l(this._pendingInsertion,o),l(this._active,o)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var a=this._pendingRemoval.length,v=this._pendingInsertion.length;if(!(a===0&&v===0)){var o,p;for(o=0;o<a;o++){p=this._pendingRemoval[o];var m=this._active.indexOf(p);m>-1&&this._active.splice(m,1),p.destroy()}for(o=0;o<v;o++)p=this._pendingInsertion[o],this._active.push(p);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(a,v){if(this.now=a,!this.paused){v*=this.timeScale;for(var o=0;o<this._active.length;o++){var p=this._active[o];if(!p.paused&&(p.elapsed+=v*p.timeScale,p.elapsed>=p.delay)){var m=p.elapsed-p.delay;if(p.elapsed=p.delay,!p.hasDispatched&&p.callback&&(p.hasDispatched=!0,p.callback.apply(p.callbackScope,p.args)),p.repeatCount>0){if(p.repeatCount--,m>=p.delay)for(;m>=p.delay&&p.repeatCount>0;)p.callback&&p.callback.apply(p.callbackScope,p.args),m-=p.delay,p.repeatCount--;p.elapsed=m,p.hasDispatched=!1}else p.hasDispatched&&this._pendingRemoval.push(p)}}}},shutdown:function(){var a;for(a=0;a<this._pendingInsertion.length;a++)this._pendingInsertion[a].destroy();for(a=0;a<this._active.length;a++)this._active[a].destroy();for(a=0;a<this._pendingRemoval.length;a++)this._pendingRemoval[a].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var v=this.systems.events;v.off(c.PRE_UPDATE,this.preUpdate,this),v.off(c.UPDATE,this.update,this),v.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});y.register("Clock",r,"time"),h.exports=r},20517:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(6659),c=e(61286),u=e(72632),l=e(7599),r=new d({Extends:y,initialize:function(v,o){y.call(this),this.scene=v,this.systems=v.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var p=this.systems.events;p.on(l.PRE_UPDATE,this.preUpdate,this),p.on(l.UPDATE,this.update,this),p.once(l.SHUTDOWN,this.destroy,this),o&&this.add(o)},preUpdate:function(a,v){this.paused||(this.elapsed+=v)},update:function(){if(!this.paused){var a,v=this.events,o=!1,p=this.systems,m;for(a=0;a<v.length;a++){var g=v[a];if(!g.complete&&g.time<=this.elapsed){if(g.complete=!0,this.totalComplete++,g.once&&(o=!0),g.set&&g.target)for(var x in g.set)g.target[x]=g.set[x];g.tween&&p.tweens.add(g.tween),g.sound&&(typeof g.sound=="string"?p.sound.play(g.sound):p.sound.play(g.sound.key,g.sound.config)),m=g.target?g.target:this,g.event&&this.emit(g.event,m),g.run&&g.run.call(m),g.stop&&this.stop()}}if(o)for(a=0;a<v.length;a++)v[a].complete&&v[a].once&&(v.splice(a,1),a--);this.totalComplete>=v.length&&(this.complete=!0)}},play:function(a){return a===void 0&&(a=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,a&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var a=0;a<this.events.length;a++)this.events[a].complete=!1;return this.play(!1)},add:function(a){Array.isArray(a)||(a=[a]);var v=this.events,o=0;v.length>0&&(o=v[v.length-1].time);for(var p=0;p<a.length;p++){var m=a[p],g=u(m,"at",0),x=u(m,"in",null);x!==null&&(g=this.elapsed+x);var C=u(m,"from",null);C!==null&&(g=o+C),v.push({complete:!1,time:g,run:u(m,"run",null),event:u(m,"event",null),target:u(m,"target",null),set:u(m,"set",null),tween:u(m,"tween",null),sound:u(m,"sound",null),once:u(m,"once",!1),stop:u(m,"stop",!1)}),o=g}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var a=Math.min(this.totalComplete,this.events.length);return a/this.events.length},destroy:function(){var a=this.systems.events;a.off(l.PRE_UPDATE,this.preUpdate,this),a.off(l.UPDATE,this.update,this),a.off(l.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});c.register("timeline",function(a){return new r(this.scene,a)}),h.exports=r},57911:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(72632),c=new d({initialize:function(l){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(l)},reset:function(u){if(this.delay=y(u,"delay",0),this.repeat=y(u,"repeat",0),this.loop=y(u,"loop",!1),this.callback=y(u,"callback",void 0),this.callbackScope=y(u,"callbackScope",this),this.args=y(u,"args",[]),this.timeScale=y(u,"timeScale",1),this.startAt=y(u,"startAt",0),this.paused=y(u,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var u=this.delay+this.delay*this.repeat,l=this.elapsed+this.delay*(this.repeat-this.repeatCount);return l/u}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(u){u===void 0&&(u=!1),this.elapsed=this.delay,this.hasDispatched=!u,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});h.exports=c},97121:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Clock:e(73779),Timeline:e(20517),TimerEvent:e(57911)}},64532:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),y=e(56694),c=e(5454),u=e(68710),l=e(91963),r=e(7599),a=e(91944),v=e(39366),o=e(68061),p=e(45641),m=e(56034),g=new y({initialize:function(C){this.scene=C,this.events=C.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(r.UPDATE,this.update,this),this.events.once(r.SHUTDOWN,this.shutdown,this)},create:function(x){Array.isArray(x)||(x=[x]);for(var C=[],M=0;M<x.length;M++){var R=x[M];R instanceof v||R instanceof p?C.push(R):Array.isArray(R.tweens)?C.push(m(this,R)):C.push(o(this,R))}return C.length===1?C[0]:C},add:function(x){var C=x,M=this.tweens;return C instanceof v||C instanceof p||(Array.isArray(C.tweens)?C=m(this,C):C=o(this,C)),M.push(C.reset()),C},addMultiple:function(x){for(var C,M=[],R=this.tweens,P=0;P<x.length;P++)C=x[P],C instanceof v||C instanceof p||(Array.isArray(C.tweens)?C=m(this,C):C=o(this,C)),R.push(C.reset()),M.push(C);return M},chain:function(x){var C=m(this,x);return this.tweens.push(C.init()),C},getChainedTweens:function(x){return x.getChainedTweens()},has:function(x){return this.tweens.indexOf(x)>-1},existing:function(x){return this.has(x)||this.tweens.push(x.reset()),this},addCounter:function(x){var C=u(this,x);return this.tweens.push(C.reset()),C},stagger:function(x,C){return a(x,C)},setLagSmooth:function(x,C){return x===void 0&&(x=1/1e-8),C===void 0&&(C=0),this.maxLag=x,this.lagSkip=Math.min(C,this.maxLag),this},setFps:function(x){return x===void 0&&(x=240),this.gap=1e3/x,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(x){var C=Date.now()-this.prevTime;C>this.maxLag&&(this.startTime+=C-this.lagSkip),this.prevTime+=C;var M=this.prevTime-this.startTime,R=M-this.nextTime,P=M-this.time*1e3;return R>0||x?(M/=1e3,this.time=M,this.nextTime+=R+(R>=this.gap?4:this.gap-R)):P=0,P},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(x){x===void 0&&(x=!1);var C=this.getDelta(x);if(!(C<=0)){this.processing=!0;var M,R,P=[],w=this.tweens;for(M=0;M<w.length;M++)R=w[M],R.update(C)&&P.push(R);var A=P.length;if(A&&w.length>0){for(M=0;M<A;M++){R=P[M];var G=w.indexOf(R);G>-1&&(R.isPendingRemove()||R.isDestroyed())&&(w.splice(G,1),R.destroy())}P.length=0}this.processing=!1}},remove:function(x){return this.processing?x.setPendingRemoveState():(d(this.tweens,x),x.setRemovedState()),this},reset:function(x){return this.existing(x),x.seek(),x.setActiveState(),this},makeActive:function(x){return this.existing(x),x.setActiveState(),this},each:function(x,C){var M,R=[null];for(M=1;M<arguments.length;M++)R.push(arguments[M]);return this.tweens.forEach(function(P){R[0]=P,x.apply(C,R)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(x){var C=[],M=this.tweens;Array.isArray(x)?x=c(x):x=[x];for(var R=x.length,P=0;P<M.length;P++)for(var w=M[P],A=0;A<R;A++)!w.isDestroyed()&&w.hasTarget(x[A])&&C.push(w);return C},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(x){return this.timeScale=x,this},isTweening:function(x){for(var C=this.tweens,M,R=0;R<C.length;R++)if(M=C[R],M.isPlaying()&&M.hasTarget(x))return!0;return!1},killAll:function(){for(var x=this.processing?this.getTweens():this.tweens,C=0;C<x.length;C++)x[C].destroy();return this.processing||(x.length=0),this},killTweensOf:function(x){for(var C=this.getTweensOf(x),M=0;M<C.length;M++)C[M].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(r.UPDATE,this.update,this),this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.events=null}});l.register("TweenManager",g,"tweens"),h.exports=g},63130:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){return e&&e.hasOwnProperty(d)?e[d]:y};h.exports=S},21902:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(35060),y=e(40587),c=function(u,l){var r=d.Power0;if(typeof u=="string")if(d.hasOwnProperty(u))r=d[u];else{var a="";if(u.indexOf(".")){a=u.substring(u.indexOf(".")+1);var v=a.toLowerCase();v==="in"?a="easeIn":v==="out"?a="easeOut":v==="inout"&&(a="easeInOut")}u=y(u.substring(0,u.indexOf(".")+1)+a),d.hasOwnProperty(u)&&(r=d[u])}else typeof u=="function"&&(r=u);if(!l)return r;var o=l.slice(0);return o.unshift(0),function(p){return o[0]=p,r.apply(this,o)}};h.exports=c},4840:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63210),y=e(88332),c=e(47614),u={bezier:d,catmull:y,catmullrom:y,linear:c},l=function(r){if(r===null)return null;var a=u.linear;return typeof r=="string"?u.hasOwnProperty(r)&&(a=u[r]):typeof r=="function"&&(a=r),a};h.exports=l},28348:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c;if(e.hasOwnProperty(d)){var u=typeof e[d];u==="function"?c=function(l,r,a,v,o,p){return e[d](l,r,a,v,o,p)}:c=function(){return e[d]}}else typeof y=="function"?c=y:c=function(){return y};return c};h.exports=S},92407:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53709),y=function(c){var u,l=[];if(c.hasOwnProperty("props"))for(u in c.props)u.substring(0,1)!=="_"&&l.push({key:u,value:c.props[u]});else for(u in c)d.indexOf(u)===-1&&u.substring(0,1)!=="_"&&l.push({key:u,value:c[u]});return l};h.exports=y},65868:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),y=function(c){var u=d(c,"targets",null);return u===null||(typeof u=="function"&&(u=u.call()),Array.isArray(u)||(u=[u])),u};h.exports=y},9744:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),y=e(61616);function c(v){return!!v.getActive&&typeof v.getActive=="function"}function u(v){return!!v.getStart&&typeof v.getStart=="function"}function l(v){return!!v.getEnd&&typeof v.getEnd=="function"}function r(v){return u(v)||l(v)||c(v)}var a=function(v,o){var p,m=function(X,H,$){return $},g=function(X,H,$){return $},x=null,C=typeof o;if(C==="number")m=function(){return o};else if(Array.isArray(o))g=function(){return o[0]},m=function(){return o[o.length-1]};else if(C==="string"){var M=o.toLowerCase(),R=M.substring(0,6)==="random",P=M.substring(0,3)==="int";if(R||P){var w=M.indexOf("("),A=M.indexOf(")"),G=M.indexOf(",");if(w&&A&&G){var O=parseFloat(M.substring(w+1,G)),L=parseFloat(M.substring(G+1,A));R?m=function(){return y(O,L)}:m=function(){return d(O,L)}}else throw new Error("invalid random() format")}else{M=M[0];var I=parseFloat(o.substr(2));switch(M){case"+":m=function(X,H,$){return $+I};break;case"-":m=function(X,H,$){return $-I};break;case"*":m=function(X,H,$){return $*I};break;case"/":m=function(X,H,$){return $/I};break;default:m=function(){return parseFloat(o)}}}}else if(C==="function")m=o;else if(C==="object")if(r(o))c(o)&&(x=o.getActive),l(o)&&(m=o.getEnd),u(o)&&(g=o.getStart);else if(o.hasOwnProperty("value"))p=a(v,o.value);else{var F=o.hasOwnProperty("to"),D=o.hasOwnProperty("from"),V=o.hasOwnProperty("start");if(F&&(D||V)){if(p=a(v,o.to),V){var k=a(v,o.start);p.getActive=k.getEnd}if(D){var W=a(v,o.from);p.getStart=W.getEnd}}}return p||(p={getActive:x,getEnd:m,getStart:g}),p};h.exports=a},68710:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),y=e(99730),c=e(20494),u=e(63130),l=e(21902),r=e(28348),a=e(10850),v=e(9744),o=e(72066),p=e(39366),m=function(g,x,C){if(x instanceof p)return x.parent=g,x;C===void 0?C=y:C=o(y,C);var M=a(x,"from",0),R=a(x,"to",1),P=[{value:M}],w=a(x,"delay",C.delay),A=a(x,"easeParams",C.easeParams),G=a(x,"ease",C.ease),O=v("value",R),L=new p(g,P),I=L.add(0,"value",O.getEnd,O.getStart,O.getActive,l(a(x,"ease",G),a(x,"easeParams",A)),r(x,"delay",w),a(x,"duration",C.duration),u(x,"yoyo",C.yoyo),a(x,"hold",C.hold),a(x,"repeat",C.repeat),a(x,"repeatDelay",C.repeatDelay),!1,!1);I.start=M,I.current=M,L.completeDelay=c(x,"completeDelay",0),L.loop=Math.round(c(x,"loop",0)),L.loopDelay=Math.round(c(x,"loopDelay",0)),L.paused=u(x,"paused",!1),L.persist=u(x,"persist",!1),L.callbackScope=a(x,"callbackScope",L);for(var F=d.TYPES,D=0;D<F.length;D++){var V=F[D],k=a(x,V,!1);if(k){var W=a(x,V+"Params",[]);L.setCallback(V,k,W)}}return L};h.exports=m},91944:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(21902),y=e(10850),c=e(83392),u=function(l,r){r===void 0&&(r={});var a,v=y(r,"start",0),o=y(r,"ease",null),p=y(r,"grid",null),m=y(r,"from",0),g=m==="first",x=m==="center",C=m==="last",M=typeof m=="number",R=Array.isArray(l),P=parseFloat(R?l[0]:l),w=R?parseFloat(l[1]):0,A=Math.max(P,w);if(R&&(v+=P),p){var G=p[0],O=p[1],L=0,I=0,F=0,D=0,V=[];C?(L=G-1,I=O-1):M?(L=m%G,I=Math.floor(m/G)):x&&(L=(G-1)/2,I=(O-1)/2);for(var k=c.MIN_SAFE_INTEGER,W=0;W<O;W++){V[W]=[];for(var X=0;X<G;X++){F=L-X,D=I-W;var H=Math.sqrt(F*F+D*D);H>k&&(k=H),V[W][X]=H}}}var $=o?d(o):null;return p?a=function(z,b,B,N){var U=0,Y=N%G,K=Math.floor(N/G);Y>=0&&Y<G&&K>=0&&K<O&&(U=V[K][Y]);var Z;if(R){var J=w-P;$?Z=U/k*J*$(U/k):Z=U/k*J}else $?Z=U*P*$(U/k):Z=U*P;return Z+v}:a=function(z,b,B,N,U){U--;var Y;g?Y=N:x?Y=Math.abs(U/2-N):C?Y=U-N:M&&(Y=Math.abs(m-N));var K;if(R){var Z;x?Z=(w-P)/U*(Y*2):Z=(w-P)/U*Y,$?K=Z*$(Y/U):K=Z}else $?K=U*A*$(Y/U):K=Y*P;return K+v},a};h.exports=u},68061:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),y=e(99730),c=e(20494),u=e(63130),l=e(21902),r=e(4840),a=e(28348),v=e(92407),o=e(65868),p=e(10850),m=e(9744),g=e(72066),x=e(39366),C=function(M,R,P){if(R instanceof x)return R.parent=M,R;P===void 0?P=y:P=g(y,P);var w=o(R);!w&&P.targets&&(w=P.targets);for(var A=v(R),G=p(R,"delay",P.delay),O=p(R,"duration",P.duration),L=p(R,"easeParams",P.easeParams),I=p(R,"ease",P.ease),F=p(R,"hold",P.hold),D=p(R,"repeat",P.repeat),V=p(R,"repeatDelay",P.repeatDelay),k=u(R,"yoyo",P.yoyo),W=u(R,"flipX",P.flipX),X=u(R,"flipY",P.flipY),H=p(R,"interpolation",P.interpolation),$=function(j,q,tt,_){if(tt==="texture"){var it=_,rt=void 0;Array.isArray(_)?(it=_[0],rt=_[1]):_.hasOwnProperty("value")?(it=_.value,Array.isArray(_.value)?(it=_.value[0],rt=_.value[1]):typeof _.value=="string"&&(it=_.value)):typeof _=="string"&&(it=_),j.addFrame(q,it,rt,a(_,"delay",G),p(_,"duration",O),p(_,"hold",F),p(_,"repeat",D),p(_,"repeatDelay",V),u(_,"flipX",W),u(_,"flipY",X))}else{var at=m(tt,_),ot=r(p(_,"interpolation",H));j.add(q,tt,at.getEnd,at.getStart,at.getActive,l(p(_,"ease",I),p(_,"easeParams",L)),a(_,"delay",G),p(_,"duration",O),u(_,"yoyo",k),p(_,"hold",F),p(_,"repeat",D),p(_,"repeatDelay",V),u(_,"flipX",W),u(_,"flipY",X),ot,ot?_:null)}},z=new x(M,w),b=0;b<A.length;b++)for(var B=A[b].key,N=A[b].value,U=0;U<w.length;U++)B==="scale"&&!w[U].hasOwnProperty("scale")?($(z,U,"scaleX",N),$(z,U,"scaleY",N)):$(z,U,B,N);z.completeDelay=c(R,"completeDelay",0),z.loop=Math.round(c(R,"loop",0)),z.loopDelay=Math.round(c(R,"loopDelay",0)),z.paused=u(R,"paused",!1),z.persist=u(R,"persist",!1),z.callbackScope=p(R,"callbackScope",z);for(var Y=d.TYPES,K=0;K<Y.length;K++){var Z=Y[K],J=p(R,Z,!1);if(J){var Q=p(R,Z+"Params",[]);z.setCallback(Z,J,Q)}}return z};h.exports=C},56034:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),y=e(20494),c=e(63130),u=e(65868),l=e(10850),r=e(68061),a=e(45641),v=function(o,p){if(p instanceof a)return p.parent=o,p;var m=new a(o);m.startDelay=l(p,"delay",0),m.completeDelay=y(p,"completeDelay",0),m.loop=Math.round(y(p,"loop",l(p,"repeat",0))),m.loopDelay=Math.round(y(p,"loopDelay",l(p,"repeatDelay",0))),m.paused=c(p,"paused",!1),m.persist=c(p,"persist",!0),m.callbackScope=l(p,"callbackScope",m);var g,x=d.TYPES;for(g=0;g<x.length;g++){var C=x[g],M=l(p,C,!1);if(M){var R=l(p,C+"Params",[]);m.setCallback(C,M,R)}}var P=l(p,"tweens",null);if(Array.isArray(P)){var w=[],A=u(p),G=void 0;for(A&&(G={targets:A}),g=0;g<P.length;g++)w.push(r(m,P[g],G));m.add(w)}return m};h.exports=v},79619:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={GetBoolean:e(63130),GetEaseFunction:e(21902),GetInterpolationFunction:e(4840),GetNewValue:e(28348),GetProps:e(92407),GetTargets:e(65868),GetValueOp:e(9744),NumberTweenBuilder:e(68710),StaggerBuilder:e(91944),TweenBuilder:e(68061)}},5570:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="active"},6383:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="complete"},72582:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="loop"},90281:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="pause"},80803:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="repeat"},13640:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="resume"},10472:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="start"},5379:h=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="stop"},43449:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="update"},61541:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports="yoyo"},54272:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={TWEEN_ACTIVE:e(5570),TWEEN_COMPLETE:e(6383),TWEEN_LOOP:e(72582),TWEEN_PAUSE:e(90281),TWEEN_RESUME:e(13640),TWEEN_REPEAT:e(80803),TWEEN_START:e(10472),TWEEN_STOP:e(5379),TWEEN_UPDATE:e(43449),TWEEN_YOYO:e(61541)}},75193:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={States:e(55303),Builders:e(79619),Events:e(54272),TweenManager:e(64532),Tween:e(39366),TweenData:e(15718),TweenFrameData:e(96490),BaseTween:e(502),TweenChain:e(45641)};h.exports=d},502:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(6659),c=e(54272),u=e(55303),l=new d({Extends:y,initialize:function(a){y.call(this),this.parent=a,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=u.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(r){return this.timeScale=r,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(c.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(c.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(c.TWEEN_COMPLETE,"onComplete")},complete:function(r){return r===void 0&&(r=0),r?(this.setCompleteDelayState(),this.countdown=r):this.onCompleteHandler(),this},completeAfterLoop:function(r){return r===void 0&&(r=0),this.loopCounter>r&&(this.loopCounter=r),this},remove:function(){return this.parent.remove(this),this},stop:function(){return!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(c.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(r){this.countdown-=r,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(c.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(r){return this.countdown-=r,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(c.TWEEN_START,"onStart"),r=0),r},updateCompleteDelay:function(r){this.countdown-=r,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(r,a,v){return v===void 0&&(v=[]),this.callbacks.hasOwnProperty(r)&&(this.callbacks[r]={func:a,params:v}),this},setPendingState:function(){this.state=u.PENDING},setActiveState:function(){this.state=u.ACTIVE},setLoopDelayState:function(){this.state=u.LOOP_DELAY},setCompleteDelayState:function(){this.state=u.COMPLETE_DELAY},setStartDelayState:function(){this.state=u.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=u.PENDING_REMOVE},setRemovedState:function(){this.state=u.REMOVED},setFinishedState:function(){this.state=u.FINISHED},setDestroyedState:function(){this.state=u.DESTROYED},isPending:function(){return this.state===u.PENDING},isActive:function(){return this.state===u.ACTIVE},isLoopDelayed:function(){return this.state===u.LOOP_DELAY},isCompleteDelayed:function(){return this.state===u.COMPLETE_DELAY},isStartDelayed:function(){return this.state===u.START_DELAY},isPendingRemove:function(){return this.state===u.PENDING_REMOVE},isRemoved:function(){return this.state===u.REMOVED},isFinished:function(){return this.state===u.FINISHED},isDestroyed:function(){return this.state===u.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(r){r.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});l.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],h.exports=l},65521:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),y=e(54272),c=e(55303),u=new d({initialize:function(r,a,v,o,p,m,g,x,C,M){this.tween=r,this.targetIndex=a,this.duration=o,this.totalDuration=0,this.delay=0,this.getDelay=v,this.yoyo=p,this.hold=m,this.repeat=g,this.repeatDelay=x,this.repeatCounter=0,this.flipX=C,this.flipY=M,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(l){l===void 0&&(l=this.current),this.tween.targets[this.targetIndex][this.key]=l},setCreatedState:function(){this.state=c.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=c.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=c.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=c.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=c.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=c.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=c.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=c.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===c.CREATED},isDelayed:function(){return this.state===c.DELAY},isPendingRender:function(){return this.state===c.PENDING_RENDER},isPlayingForward:function(){return this.state===c.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===c.PLAYING_BACKWARD},isHolding:function(){return this.state===c.HOLD_DELAY},isRepeating:function(){return this.state===c.REPEAT_DELAY},isComplete:function(){return this.state===c.COMPLETE},setStateFromEnd:function(l){this.yoyo?this.onRepeat(l,!0,!0):this.repeatCounter>0?this.onRepeat(l,!0,!1):this.setCompleteState()},setStateFromStart:function(l){this.repeatCounter>0?this.onRepeat(l,!1):this.setCompleteState()},reset:function(){var l=this.tween,r=l.totalTargets,a=this.targetIndex,v=l.targets[a],o=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(v,o,0,a,r,l),this.repeatCounter=this.repeat===-1?c.MAX:this.repeat,this.setPendingRenderState();var p=this.duration+this.hold;this.yoyo&&(p+=this.duration);var m=p+this.repeatDelay;this.totalDuration=this.delay+p,this.repeat===-1?(this.totalDuration+=m*c.MAX,l.isInfinite=!0):this.repeat>0&&(this.totalDuration+=m*this.repeat),this.totalDuration>l.duration&&(l.duration=this.totalDuration),this.delay<l.startDelay&&(l.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(l,r,a){var v=this.tween,o=v.totalTargets,p=this.targetIndex,m=v.targets[p],g=this.key,x=g!=="texture";if(this.elapsed=l,this.progress=l/this.duration,this.flipX&&m.toggleFlipX(),this.flipY&&m.toggleFlipY(),x&&(r||a)&&(this.start=this.getStartValue(m,g,this.start,p,o,v)),a){this.setPlayingBackwardState(),this.dispatchEvent(y.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,x&&(this.end=this.getEndValue(m,g,this.start,p,o,v)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-l,x&&(this.current=this.start,m[g]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(y.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});h.exports=u},99730:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};h.exports=S},53709:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),y=e(56694),c=e(54272),u=e(99325),l=e(61286),r=e(83392),a=e(55303),v=e(15718),o=e(96490),p=new y({Extends:d,initialize:function(g,x){d.call(this,g),this.targets=x,this.totalTargets=x.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(m,g,x,C,M,R,P,w,A,G,O,L,I,F,D,V){var k=new v(this,m,g,x,C,M,R,P,w,A,G,O,L,I,F,D,V);return this.totalData=this.data.push(k),k},addFrame:function(m,g,x,C,M,R,P,w,A,G){var O=new o(this,m,g,x,C,M,R,P,w,A,G);return this.totalData=this.data.push(O),O},getValue:function(m){m===void 0&&(m=0);var g=null;return this.data&&(g=this.data[m].current),g},hasTarget:function(m){return this.targets&&this.targets.indexOf(m)!==-1},updateTo:function(m,g,x){if(x===void 0&&(x=!1),m!=="texture")for(var C=0;C<this.totalData;C++){var M=this.data[C];M.key===m&&(M.isPlayingForward()||M.isPlayingBackward())&&(M.end=g,x&&(M.start=M.current))}return this},restart:function(){switch(this.state){case a.REMOVED:case a.FINISHED:this.seek(),this.parent.makeActive(this);break;case a.PENDING:case a.PENDING_REMOVE:this.parent.reset(this);break;case a.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(c.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,d.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(m,g,x){if(m===void 0&&(m=0),g===void 0&&(g=16.6),x===void 0&&(x=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;x||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive");var C=this.paused;if(this.paused=!1,m>0){for(var M=Math.floor(m/g),R=m-M*g,P=0;P<M;P++)this.update(g);R>0&&this.update(R)}return this.paused=C,this.isSeeking=!1,this},initTweenData:function(m){m===void 0&&(m=!1),this.duration=0,this.startDelay=r.MAX_SAFE_INTEGER;for(var g=this.data,x=0;x<this.totalData;x++)g[x].reset(m);this.duration=Math.max(this.duration,.01);var C=this.duration,M=this.completeDelay,R=this.loopCounter,P=this.loopDelay;R>0?this.totalDuration=C+M+(C+P)*R:this.totalDuration=C+M},reset:function(m){return m===void 0&&(m=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=a.MAX),m||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(c.TWEEN_ACTIVE,"onActive")),this},update:function(m){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(m*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(m),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(m),!1;this.hasStarted||(this.startDelay-=m,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(c.TWEEN_START,"onStart"),m=0));var g=!1;if(this.isActive())for(var x=this.data,C=0;C<this.totalData;C++)x[C].update(m)&&(g=!0);this.elapsed+=m,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=m,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),g||this.nextState();var M=this.isPendingRemove();return M&&this.persist&&(this.setFinishedState(),M=!1),M},forward:function(m){return this.update(m),this},rewind:function(m){return this.update(-m),this},dispatchEvent:function(m,g){if(!this.isSeeking){this.emit(m,this,this.targets);var x=this.callbacks[g];x&&x.func.apply(this.callbackScope,[this,this.targets].concat(x.params))}},destroy:function(){d.prototype.destroy.call(this),this.targets=null}});l.register("tween",function(m){return this.scene.sys.tweens.add(m)}),u.register("tween",function(m){return this.scene.sys.tweens.create(m)}),h.exports=p},45641:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),y=e(502),c=e(56694),u=e(54272),l=e(99325),r=e(61286),a=e(55303),v=new c({Extends:y,initialize:function(p){y.call(this,p),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?a.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive"),this},add:function(o){var p=this.parent.create(o);Array.isArray(p)||(p=[p]);for(var m=this.data,g=0;g<p.length;g++){var x=p[g];x.parent=this,m.push(x.reset())}return this.totalData=m.length,this},remove:function(o){return d(this.data,o),o.setRemovedState(),o===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(o){for(var p=this.data,m=0;m<this.totalData;m++)if(p[m].hasTarget(o))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(o){return o.seek(),o.setActiveState(),this},makeActive:function(o){return o.reset(),o.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var o=this.data,p=this.totalData,m=0;m<p;m++)o[m].reset(!1);this.currentIndex=0,this.currentTween=o[0]},update:function(o){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;o*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(o):this.isCompleteDelayed()?this.updateCompleteDelay(o):this.isStartDelayed()&&(o=this.updateStartCountdown(o));var p=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(o)&&this.nextTween()&&this.nextState(),p=this.isPendingRemove(),p&&this.persist&&(this.setFinishedState(),p=!1)),p},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(o){this.currentIndex=o,this.currentTween=this.data[o],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(o,p){this.emit(o,this);var m=this.callbacks[p];m&&m.func.apply(this.callbackScope,[this].concat(m.params))},destroy:function(){y.prototype.destroy.call(this),this.currentTween=null}});r.register("tweenchain",function(o){return this.scene.sys.tweens.chain(o)}),l.register("tweenchain",function(o){return this.scene.sys.tweens.create(o)}),h.exports=v},15718:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65521),y=e(82897),c=e(56694),u=e(54272),l=new c({Extends:d,initialize:function(a,v,o,p,m,g,x,C,M,R,P,w,A,G,O,L,I){d.call(this,a,v,C,M,R,P,w,A,G,O),this.key=o,this.getActiveValue=g,this.getEndValue=p,this.getStartValue=m,this.ease=x,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=L,this.interpolationData=I},reset:function(r){d.prototype.reset.call(this);var a=this.tween.targets[this.targetIndex],v=this.key;r&&(a[v]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(a[v]=this.getActiveValue(a,v,0))},update:function(r){var a=this.tween,v=a.totalTargets,o=this.targetIndex,p=a.targets[o],m=this.key;if(!p)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(p,m,p[m],o,v,a),this.end=this.getEndValue(p,m,this.start,o,v,a),this.current=this.start,p[m]=this.start,this.setPlayingForwardState(),!0;var g=this.isPlayingForward(),x=this.isPlayingBackward();if(g||x){var C=this.elapsed,M=this.duration,R=0,P=!1;C+=r,C>=M?(R=C-M,C=M,P=!0):C<0&&(C=0);var w=y(C/M,0,1);if(this.elapsed=C,this.progress=w,this.previous=this.current,P)g?(this.current=this.end,p[m]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(R)):(this.current=this.start,p[m]=this.start,this.setStateFromStart(R));else{g||(w=1-w);var A=this.ease(w);this.interpolation?this.current=this.interpolation(this.interpolationData,A):this.current=this.start+(this.end-this.start)*A,p[m]=this.current}this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,a){var v=this.tween;if(!v.isSeeking){var o=v.targets[this.targetIndex],p=this.key,m=this.current,g=this.previous;v.emit(r,v,p,o,m,g);var x=v.callbacks[a];x&&x.func.apply(v.callbackScope,[v,o,p,m,g].concat(x.params))}},destroy:function(){d.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});h.exports=l},96490:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65521),y=e(82897),c=e(56694),u=e(54272),l=new c({Extends:d,initialize:function(a,v,o,p,m,g,x,C,M,R,P){d.call(this,a,v,m,g,!1,x,C,M,R,P),this.key="texture",this.startTexture=null,this.endTexture=o,this.startFrame=null,this.endFrame=p,this.yoyo=C!==0},reset:function(r){d.prototype.reset.call(this);var a=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=a.texture.key,this.startFrame=a.frame.name),r&&a.setTexture(this.startTexture,this.startFrame)},update:function(r){var a=this.tween,v=this.targetIndex,o=a.targets[v];if(!o)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=r,this.elapsed<=0&&(this.elapsed=0,r=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&o.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var p=this.isPlayingForward(),m=this.isPlayingBackward();if(p||m){var g=this.elapsed,x=this.duration,C=0,M=!1;g+=r,g>=x?(C=g-x,g=x,M=!0):g<0&&(g=0);var R=y(g/x,0,1);this.elapsed=g,this.progress=R,M&&(p?(o.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(C)):(o.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(C))),this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(r,a){var v=this.tween;if(!v.isSeeking){var o=v.targets[this.targetIndex],p=this.key;v.emit(r,v,p,o);var m=v.callbacks[a];m&&m.func.apply(v.callbackScope,[v,o,p].concat(m.params))}},destroy:function(){d.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});h.exports=l},55303:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};h.exports=S},56694:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}function e(l,r,a){var v=a?l[r]:Object.getOwnPropertyDescriptor(l,r);return!a&&v.value&&typeof v.value=="object"&&(v=v.value),v&&S(v)?(typeof v.enumerable>"u"&&(v.enumerable=!0),typeof v.configurable>"u"&&(v.configurable=!0),v):!1}function d(l,r){var a=Object.getOwnPropertyDescriptor(l,r);return a?(a.value&&typeof a.value=="object"&&(a=a.value),a.configurable===!1):!1}function y(l,r,a,v){for(var o in r)if(r.hasOwnProperty(o)){var p=e(r,o,a);if(p!==!1){var m=v||l;if(d(m.prototype,o)){if(u.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(l.prototype,o,p)}else l.prototype[o]=r[o]}}function c(l,r){if(r){Array.isArray(r)||(r=[r]);for(var a=0;a<r.length;a++)y(l,r[a].prototype||r[a])}}function u(l){l||(l={});var r,a;if(l.initialize){if(typeof l.initialize!="function")throw new Error("initialize must be a function");r=l.initialize,delete l.initialize}else if(l.Extends){var v=l.Extends;r=function(){v.apply(this,arguments)}}else r=function(){};l.Extends?(r.prototype=Object.create(l.Extends.prototype),r.prototype.constructor=r,a=l.Extends,delete l.Extends):r.prototype.constructor=r;var o=null;return l.Mixins&&(o=l.Mixins,delete l.Mixins),c(r,o),y(r,l,!0,a),r}u.extend=y,u.mixin=c,u.ignoreFinals=!1,h.exports=u},72283:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};h.exports=S},10618:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){return null};h.exports=S},78991:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u){if(u===void 0&&(u=e),y>0){var l=y-e.length;if(l<=0)return null}if(!Array.isArray(d))return e.indexOf(d)===-1?(e.push(d),c&&c.call(u,d),d):null;for(var r=d.length-1;r>=0;)e.indexOf(d[r])!==-1&&d.splice(r,1),r--;if(r=d.length,r===0)return null;y>0&&r>l&&(d.splice(l),r=l);for(var a=0;a<r;a++){var v=d[a];e.push(v),c&&c.call(u,v)}return d};h.exports=S},48522:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c,u,l){if(y===void 0&&(y=0),l===void 0&&(l=e),c>0){var r=c-e.length;if(r<=0)return null}if(!Array.isArray(d))return e.indexOf(d)===-1?(e.splice(y,0,d),u&&u.call(l,d),d):null;for(var a=d.length-1;a>=0;)e.indexOf(d[a])!==-1&&d.pop(),a--;if(a=d.length,a===0)return null;c>0&&a>r&&(d.splice(r),a=r);for(var v=a-1;v>=0;v--){var o=d[v];e.splice(y,0,o),u&&u.call(l,o)}return d};h.exports=S},58742:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.indexOf(d);return y!==-1&&y<e.length&&(e.splice(y,1),e.push(d)),d};h.exports=S},30164:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),y=function(c,u,l,r,a){r===void 0&&(r=0),a===void 0&&(a=c.length);var v=0;if(d(c,r,a))for(var o=r;o<a;o++){var p=c[o];p[u]===l&&v++}return v};h.exports=y},36337:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c,u=[null];for(c=3;c<arguments.length;c++)u.push(arguments[c]);for(c=0;c<e.length;c++)u[0]=e[c],d.apply(y,u);return e};h.exports=S},46208:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),y=function(c,u,l,r,a){if(r===void 0&&(r=0),a===void 0&&(a=c.length),d(c,r,a)){var v,o=[null];for(v=5;v<arguments.length;v++)o.push(arguments[v]);for(v=r;v<a;v++)o[0]=c[v],u.apply(l,o)}return c};h.exports=y},2406:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(d.length){if(d.length===1)return d[0]}else return NaN;var c=1,u,l;if(y){if(e<d[0][y])return d[0];for(;d[c][y]<e;)c++}else for(;d[c]<e;)c++;return c>d.length&&(c=d.length),y?(u=d[c-1][y],l=d[c][y],l-e<=e-u?d[c]:d[c-1]):(u=d[c-1],l=d[c],l-e<=e-u?l:u)};h.exports=S},5454:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d===void 0&&(d=[]);for(var y=0;y<e.length;y++)Array.isArray(e[y])?S(e[y],d):d.push(e[y]);return d};h.exports=S},71608:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),y=function(c,u,l,r,a){r===void 0&&(r=0),a===void 0&&(a=c.length);var v=[];if(d(c,r,a))for(var o=r;o<a;o++){var p=c[o];(!u||u&&l===void 0&&p.hasOwnProperty(u)||u&&l!==void 0&&p[u]===l)&&v.push(p)}return v};h.exports=y},51463:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),y=function(c,u,l,r,a){if(r===void 0&&(r=0),a===void 0&&(a=c.length),d(c,r,a))for(var v=r;v<a;v++){var o=c[v];if(!u||u&&l===void 0&&o.hasOwnProperty(u)||u&&l!==void 0&&o[u]===l)return o}return null};h.exports=y},72861:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){d===void 0&&(d=0),y===void 0&&(y=e.length);var c=d+Math.floor(Math.random()*y);return e[c]===void 0?null:e[c]};h.exports=S},24218:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(d===y)return e;var c=e.indexOf(d),u=e.indexOf(y);if(c<0||u<0)throw new Error("Supplied items must be elements of the same array");return c>u||(e.splice(c,1),u===e.length-1?e.push(d):e.splice(u,0,d)),e};h.exports=S},58258:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(d===y)return e;var c=e.indexOf(d),u=e.indexOf(y);if(c<0||u<0)throw new Error("Supplied items must be elements of the same array");return c<u||(e.splice(c,1),u===0?e.unshift(d):e.splice(u,0,d)),e};h.exports=S},51172:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.indexOf(d);if(y>0){var c=e[y-1],u=e.indexOf(c);e[y]=c,e[u]=d}return e};h.exports=S},68396:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=e.indexOf(d);if(c===-1||y<0||y>=e.length)throw new Error("Supplied index out of bounds");return c!==y&&(e.splice(c,1),e.splice(y,0,d)),d};h.exports=S},27555:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.indexOf(d);if(y!==-1&&y<e.length-1){var c=e[y+1],u=e.indexOf(c);e[y]=c,e[u]=d}return e};h.exports=S},13401:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=[],l,r=!1;if((y||c)&&(r=!0,y||(y=""),c||(c="")),d<e)for(l=e;l>=d;l--)r?u.push(y+l.toString()+c):u.push(l);else for(l=e;l<=d;l++)r?u.push(y+l.toString()+c):u.push(l);return u};h.exports=S},89955:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(67233),y=function(c,u,l){c===void 0&&(c=0),u===void 0&&(u=null),l===void 0&&(l=1),u===null&&(u=c,c=0);for(var r=[],a=Math.max(d((u-c)/(l||1)),0),v=0;v<a;v++)r.push(c),c+=l;return r};h.exports=y},53466:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(y,c,u){var l=y[c];y[c]=y[u],y[u]=l}function e(y,c){return y<c?-1:y>c?1:0}var d=function(y,c,u,l,r){for(u===void 0&&(u=0),l===void 0&&(l=y.length-1),r===void 0&&(r=e);l>u;){if(l-u>600){var a=l-u+1,v=c-u+1,o=Math.log(a),p=.5*Math.exp(2*o/3),m=.5*Math.sqrt(o*p*(a-p)/a)*(v-a/2<0?-1:1),g=Math.max(u,Math.floor(c-v*p/a+m)),x=Math.min(l,Math.floor(c+(a-v)*p/a+m));d(y,c,g,x,r)}var C=y[c],M=u,R=l;for(S(y,u,c),r(y[l],C)>0&&S(y,u,l);M<R;){for(S(y,M,R),M++,R--;r(y[M],C)<0;)M++;for(;r(y[R],C)>0;)R--}r(y[u],C)===0?S(y,u,R):(R++,S(y,R,l)),R<=c&&(u=R+1),c<=R&&(l=R-1)}};h.exports=d},75757:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),y=e(18592),c=function(l,r,a){for(var v=[],o=0;o<l.length;o++)for(var p=0;p<r.length;p++)for(var m=0;m<a;m++)v.push({a:l[o],b:r[p]});return v},u=function(l,r,a){var v=d(a,"max",0),o=d(a,"qty",1),p=d(a,"random",!1),m=d(a,"randomB",!1),g=d(a,"repeat",0),x=d(a,"yoyo",!1),C=[];if(m&&y(r),g===-1)if(v===0)g=0;else{var M=l.length*r.length*o;x&&(M*=2),g=Math.ceil(v/M)}for(var R=0;R<=g;R++){var P=c(l,r,o);p&&y(P),C=C.concat(P),x&&(P.reverse(),C=C.concat(P))}return v&&C.splice(v),C};h.exports=u},66458:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72677),y=function(c,u,l,r){r===void 0&&(r=c);var a;if(!Array.isArray(u))return a=c.indexOf(u),a!==-1?(d(c,a),l&&l.call(r,u),u):null;for(var v=u.length-1,o=[];v>=0;){var p=u[v];a=c.indexOf(p),a!==-1&&(d(c,a),o.push(p),l&&l.call(r,p)),v--}return o};h.exports=y},8324:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72677),y=function(c,u,l,r){if(r===void 0&&(r=c),u<0||u>c.length-1)throw new Error("Index out of bounds");var a=d(c,u);return l&&l.call(r,a),a};h.exports=y},47427:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),y=function(c,u,l,r,a){if(u===void 0&&(u=0),l===void 0&&(l=c.length),a===void 0&&(a=c),d(c,u,l)){var v=l-u,o=c.splice(u,v);if(r)for(var p=0;p<o.length;p++){var m=o[p];r.call(a,m)}return o}else return[]};h.exports=y},50147:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72677),y=function(c,u,l){u===void 0&&(u=0),l===void 0&&(l=c.length);var r=u+Math.floor(Math.random()*l);return d(c,r)};h.exports=y},80402:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=e.indexOf(d),u=e.indexOf(y);return c!==-1&&u===-1?(e[c]=y,!0):!1};h.exports=S},77640:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d===void 0&&(d=1);for(var y=null,c=0;c<d;c++)y=e.shift(),e.push(y);return y};h.exports=S},38487:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){d===void 0&&(d=1);for(var y=null,c=0;c<d;c++)y=e.pop(),e.unshift(y);return y};h.exports=S},45838:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){var u=e.length;if(d<0||d>u||d>=y||y>u){if(c)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};h.exports=S},27847:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){var y=e.indexOf(d);return y!==-1&&y>0&&(e.splice(y,1),e.unshift(d)),d};h.exports=S},6034:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),y=function(c,u,l,r,a){if(r===void 0&&(r=0),a===void 0&&(a=c.length),d(c,r,a))for(var v=r;v<a;v++){var o=c[v];o.hasOwnProperty(u)&&(o[u]=l)}return c};h.exports=y},18592:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){for(var d=e.length-1;d>0;d--){var y=Math.floor(Math.random()*(d+1)),c=e[d];e[d]=e[y],e[y]=c}return e};h.exports=S},28834:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d=/\D/g;return e.sort(function(y,c){return parseInt(y.replace(d,""),10)-parseInt(c.replace(d,""),10)}),e};h.exports=S},72677:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){if(!(d>=e.length)){for(var y=e.length-1,c=e[d],u=d;u<y;u++)e[u]=e[u+1];return e.length=y,c}};h.exports=S},17922:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(77290);function y(r,a){return String(r).localeCompare(a)}function c(r,a){var v=r.length;if(v<=1)return r;for(var o=new Array(v),p=1;p<v;p*=2){u(r,a,p,o);var m=r;r=o,o=m}return r}function u(r,a,v,o){var p=r.length,m=0,g=v*2,x,C,M,R,P;for(x=0;x<p;x+=g)for(C=x+v,M=C+v,C>p&&(C=p),M>p&&(M=p),R=x,P=C;;)if(R<C&&P<M)a(r[R],r[P])<=0?o[m++]=r[R++]:o[m++]=r[P++];else if(R<C)o[m++]=r[R++];else if(P<M)o[m++]=r[P++];else break}var l=function(r,a){if(a===void 0&&(a=y),!r||r.length<2)return r;if(d.features.stableSort)return r.sort(a);var v=c(r,a);return v!==r&&u(v,null,r.length,r),r};h.exports=l},96928:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(d===y)return e;var c=e.indexOf(d),u=e.indexOf(y);if(c<0||u<0)throw new Error("Supplied items must be elements of the same array");return e[c]=y,e[u]=d,e};h.exports=S},59959:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Matrix:e(13515),Add:e(78991),AddAt:e(48522),BringToTop:e(58742),CountAllMatching:e(30164),Each:e(36337),EachInRange:e(46208),FindClosestInSorted:e(2406),Flatten:e(5454),GetAll:e(71608),GetFirst:e(51463),GetRandom:e(72861),MoveDown:e(51172),MoveTo:e(68396),MoveUp:e(27555),MoveAbove:e(24218),MoveBelow:e(58258),NumberArray:e(13401),NumberArrayStep:e(89955),QuickSelect:e(53466),Range:e(75757),Remove:e(66458),RemoveAt:e(8324),RemoveBetween:e(47427),RemoveRandomElement:e(50147),Replace:e(80402),RotateLeft:e(77640),RotateRight:e(38487),SafeRange:e(45838),SendToBack:e(27847),SetAll:e(6034),Shuffle:e(18592),SortByDigits:e(28834),SpliceOne:e(72677),StableSort:e(17922),Swap:e(96928)}},97494:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var d=e[0].length,y=1;y<e.length;y++)if(e[y].length!==d)return!1;return!0};h.exports=S},68428:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(76400),y=e(97494),c=function(u){var l="";if(!y(u))return l;for(var r=0;r<u.length;r++){for(var a=0;a<u[r].length;a++){var v=u[r][a].toString();v!=="undefined"?l+=d(v,2):l+="?",a<u[r].length-1&&(l+=" |")}if(r<u.length-1){l+=`
`;for(var o=0;o<u[r].length;o++)l+="---",o<u[r].length-1&&(l+="+");l+=`
`}}return l};h.exports=c},59521:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.reverse()};h.exports=S},51995:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){for(var d=0;d<e.length;d++)e[d].reverse();return e};h.exports=S},89011:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63515),y=function(c){return d(c,180)};h.exports=y},42549:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63515),y=function(c){return d(c,90)};h.exports=y},63515:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97494),y=e(78581),c=function(u,l){if(l===void 0&&(l=90),!d(u))return null;if(typeof l!="string"&&(l=(l%360+360)%360),l===90||l===-270||l==="rotateLeft")u=y(u),u.reverse();else if(l===-90||l===270||l==="rotateRight")u.reverse(),u=y(u);else if(Math.abs(l)===180||l==="rotate180"){for(var r=0;r<u.length;r++)u[r].reverse();u.reverse()}return u};h.exports=c},14305:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63515),y=function(c){return d(c,-90)};h.exports=y},27365:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(77640),y=e(38487),c=function(u,l,r){if(l===void 0&&(l=0),r===void 0&&(r=0),r!==0&&(r<0?d(u,Math.abs(r)):y(u,r)),l!==0)for(var a=0;a<u.length;a++){var v=u[a];l<0?d(v,Math.abs(l)):y(v,l)}return u};h.exports=c},78581:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){for(var d=e.length,y=e[0].length,c=new Array(y),u=0;u<y;u++){c[u]=new Array(d);for(var l=d-1;l>-1;l--)c[u][l]=e[l][u]}return c};h.exports=S},13515:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={CheckMatrix:e(97494),MatrixToString:e(68428),ReverseColumns:e(59521),ReverseRows:e(51995),Rotate180:e(89011),RotateLeft:e(42549),RotateMatrix:e(63515),RotateRight:e(14305),Translate:e(27365),TransposeMatrix:e(78581)}},40581:h=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(d,y){for(var c=new Uint8Array(d),u=c.length,l=y?"data:"+y+";base64,":"",r=0;r<u;r+=3)l+=S[c[r]>>2],l+=S[(c[r]&3)<<4|c[r+1]>>4],l+=S[(c[r+1]&15)<<2|c[r+2]>>6],l+=S[c[r+2]&63];return u%3===2?l=l.substring(0,l.length-1)+"=":u%3===1&&(l=l.substring(0,l.length-2)+"=="),l};h.exports=e},82329:h=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),d=0;d<S.length;d++)e[S.charCodeAt(d)]=d;var y=function(c){c=c.substr(c.indexOf(",")+1);var u=c.length,l=u*.75,r=0,a,v,o,p;c[u-1]==="="&&(l--,c[u-2]==="="&&l--);for(var m=new ArrayBuffer(l),g=new Uint8Array(m),x=0;x<u;x+=4)a=e[c.charCodeAt(x)],v=e[c.charCodeAt(x+1)],o=e[c.charCodeAt(x+2)],p=e[c.charCodeAt(x+3)],g[r++]=a<<2|v>>4,g[r++]=(v&15)<<4|o>>2,g[r++]=(o&3)<<6|p&63;return m};h.exports=y},78417:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={ArrayBufferToBase64:e(40581),Base64ToArrayBuffer:e(82329)}},22178:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Array:e(59959),Base64:e(78417),Objects:e(64615),String:e(50379),NOOP:e(72283),NULL:e(10618)}},32742:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d={};for(var y in e)Array.isArray(e[y])?d[y]=e[y].slice(0):d[y]=e[y];return d};h.exports=S},28699:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){var d,y,c;if(typeof e!="object"||e===null)return e;d=Array.isArray(e)?[]:{};for(c in e)y=e[c],d[c]=S(y);return d};h.exports=S},98611:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(42911),y=function(){var c,u,l,r,a,v,o=arguments[0]||{},p=1,m=arguments.length,g=!1;for(typeof o=="boolean"&&(g=o,o=arguments[1]||{},p=2),m===p&&(o=this,--p);p<m;p++)if((c=arguments[p])!=null)for(u in c)l=o[u],r=c[u],o!==r&&(g&&r&&(d(r)||(a=Array.isArray(r)))?(a?(a=!1,v=l&&Array.isArray(l)?l:[]):v=l&&d(l)?l:{},o[u]=y(g,v,r)):r!==void 0&&(o[u]=r));return o};h.exports=y},20494:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(5923),y=e(10850),c=function(u,l,r){var a=y(u,l,null);if(a===null)return r;if(Array.isArray(a))return d.RND.pick(a);if(typeof a=="object"){if(a.hasOwnProperty("randInt"))return d.RND.integerInRange(a.randInt[0],a.randInt[1]);if(a.hasOwnProperty("randFloat"))return d.RND.realInRange(a.randFloat[0],a.randFloat[1])}else if(typeof a=="function")return a(l);return a};h.exports=c},72632:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){var c=typeof e;return!e||c==="number"||c==="string"?y:e.hasOwnProperty(d)&&e[d]!==void 0?e[d]:y};h.exports=S},94324:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),y=e(82897),c=function(u,l,r,a,v){v===void 0&&(v=r);var o=d(u,l,v);return y(o,r,a)};h.exports=c},10850:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){if(!e&&!c||typeof e=="number")return y;if(e&&e.hasOwnProperty(d))return e[d];if(c&&c.hasOwnProperty(d))return c[d];if(d.indexOf(".")!==-1){for(var u=d.split("."),l=e,r=c,a=y,v=y,o=!0,p=!0,m=0;m<u.length;m++)l&&l.hasOwnProperty(u[m])?(a=l[u[m]],l=l[u[m]]):o=!1,r&&r.hasOwnProperty(u[m])?(v=r[u[m]],r=r[u[m]]):p=!1;return o?a:p?v:y}else return y};h.exports=S},87701:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){for(var y=0;y<d.length;y++)if(!e.hasOwnProperty(d[y]))return!1;return!0};h.exports=S},53523:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){for(var y=0;y<d.length;y++)if(e.hasOwnProperty(d[y]))return!0;return!1};h.exports=S},19256:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.hasOwnProperty(d)};h.exports=S},42911:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};h.exports=S},30657:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),y=function(c,u){var l=d(c);for(var r in u)l.hasOwnProperty(r)||(l[r]=u[r]);return l};h.exports=y},72066:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),y=function(c,u){var l=d(c);for(var r in u)l.hasOwnProperty(r)&&(l[r]=u[r]);return l};h.exports=y},28820:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19256),y=function(c,u){for(var l={},r=0;r<u.length;r++){var a=u[r];d(c,a)&&(l[a]=c[a])}return l};h.exports=y},22440:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(d))return e[d]=y,!0;if(d.indexOf(".")!==-1){for(var c=d.split("."),u=e,l=e,r=0;r<c.length;r++)if(u.hasOwnProperty(c[r]))l=u,u=u[c[r]];else return!1;return l[c[c.length-1]]=y,!0}return!1};h.exports=S},64615:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Clone:e(32742),DeepCopy:e(28699),Extend:e(98611),GetAdvancedValue:e(20494),GetFastValue:e(72632),GetMinMaxValue:e(94324),GetValue:e(10850),HasAll:e(87701),HasAny:e(53523),HasValue:e(19256),IsPlainObject:e(42911),Merge:e(30657),MergeRight:e(72066),Pick:e(28820),SetValue:e(22440)}},69429:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return e.replace(/%([0-9]+)/g,function(y,c){return d[Number(c)-1]})};h.exports=S},76400:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d,y,c){d===void 0&&(d=0),y===void 0&&(y=" "),c===void 0&&(c=3),e=e.toString();var u=0;if(d+1>=e.length)switch(c){case 1:e=new Array(d+1-e.length).join(y)+e;break;case 3:var l=Math.ceil((u=d-e.length)/2),r=u-l;e=new Array(r+1).join(y)+e+new Array(l+1).join(y);break;default:e=e+new Array(d+1-e.length).join(y);break}return e};h.exports=S},76872:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e,d){return d===0?e.slice(1):e.slice(0,d-1)+e.slice(d)};h.exports=S},8051:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e.split("").reverse().join("")};h.exports=S},76583:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=Math.random()*16|0,y=e==="x"?d:d&3|8;return y.toString(16)})};h.exports=S},40587:h=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(e){return e&&e[0].toUpperCase()+e.slice(1)};h.exports=S},50379:(h,S,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */h.exports={Format:e(69429),Pad:e(76400),RemoveAt:e(76872),Reverse:e(8051),UppercaseFirst:e(40587),UUID:e(76583)}}},f={};function T(h){var S=f[h];if(S!==void 0)return S.exports;var e=f[h]={exports:{}};return n[h](e,e.exports,T),e.exports}T.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var E=T(92491);return E})())})(phaser);var phaserExports=phaser.exports;const Phaser$1=getDefaultExportFromCjs(phaserExports),EventEmitterMethods$1={setEventEmitter(s,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=s===!0||s===void 0,this._eventEmitter=this._privateEE?new t:s,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(s){return this._eventEmitter&&s&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},SceneClass=Phaser.Scene;var IsSceneObject=function(s){return s instanceof SceneClass},GetSceneObject=function(s){return s==null||typeof s!="object"?null:IsSceneObject(s)?s:s.scene&&IsSceneObject(s.scene)?s.scene:s.parent&&s.parent.scene&&IsSceneObject(s.parent.scene)?s.parent.scene:null};const GameClass=Phaser.Game;var IsGame=function(s){return s instanceof GameClass},GetGame=function(s){if(s==null||typeof s!="object")return null;if(IsGame(s))return s;if(IsGame(s.game))return s.game;if(IsSceneObject(s))return s.sys.game;if(IsSceneObject(s.scene))return s.scene.sys.game};const GetValue$3w=Phaser.Utils.Objects.GetValue;class ComponentBase{constructor(t,n){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(GetValue$3w(n,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,n){this.destroy(n)}setParent(t){return this.parent=t,this.scene=GetSceneObject(t),this.game=GetGame(t),this}}Object.assign(ComponentBase.prototype,EventEmitterMethods$1);var IsPointerInHitArea=function(s,t,n,f){if(t)return!(n&&!n(s,t)||!HitTest(s,t)||f&&!f(s,t));for(var T=s.scene.input.manager,E=T.pointersTotal,h=T.pointers,t,S=0;S<E;S++)if(t=h[S],!(n&&!n(s,t))&&HitTest(s,t)&&!(f&&!f(s,t)))return!0;return!1},HitTest=function(s,t){for(var n=s.scene,f=n.input.cameras.getCamerasBelowPointer(t),T=n.input.manager,E=[s],h=0,S=f.length;h<S;h++)if(T.hitTest(t,E,f[h],HitTestResult),HitTestResult.length>0)return HitTestResult.length=0,!0;return HitTestResult.length=0,!1},HitTestResult=[],RequestDrag=function(s){for(var t=s.scene.input,n=t.manager,f=n.pointersTotal,T=n.pointers,E,h=0;h<f;h++)if(E=T[h],!(!E.primaryDown||t.getDragState(E)!==0||!IsPointerInHitArea(s,E)))return t.setDragState(E,1),t._drag[E.id]=[s],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(E,3),t.processDragStartList(E)):t.setDragState(E,2),!0;return!1};const GetValue$3v=Phaser.Utils.Objects.GetValue,DistanceBetween$7=Phaser.Math.Distance.Between,RotateAroundDistance=Phaser.Math.RotateAroundDistance;class Drag extends ComponentBase{constructor(t,n){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(GetValue$3v(n,"inputConfig",void 0)),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(GetValue$3v(t,"enable",!0)),this.setAxisMode(GetValue$3v(t,"axis",0)),this.setAxisRotation(GetValue$3v(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=DIRECTIONNODE$1[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return RequestDrag(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,n,f){this.isDragging||(this.pointer=t)}onDrag(t,n,f){if(this.pointer===t){var T=this.parent;if(this.axisMode===0)T.x=n,T.y=f;else if(this.axisRotation===0)this.axisMode===1?T.x=n:this.axisMode===2&&(T.y=f);else{var E,h={x:n,y:f};E=DistanceBetween$7(h.x,h.y,T.x,T.y),h=RotateAroundDistance(h,T.x,T.y,-this.axisRotation,E),this.axisMode===1?h.y=T.y:this.axisMode===2&&(h.x=T.x),E=DistanceBetween$7(h.x,h.y,T.x,T.y),h=RotateAroundDistance(h,T.x,T.y,this.axisRotation,E),T.x=h.x,T.y=h.y}}}onDragEnd(t,n,f,T){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const DIRECTIONNODE$1={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};class DragPlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){var t=this.game.events;t.on("destroy",this.destroy,this)}add(t,n){return new Drag(t,n)}}class ObjectFactory{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,n){ObjectFactory.prototype[t]=n}}var SetGetFrameNameCallback=function(s){return s===void 0&&(s=DefaultGetFrameNameCallback),this.getFrameNameCallback=s,this},DefaultGetFrameNameCallback=function(s,t,n){return n==="__BASE"?`${s},${t}`:`${n}_${s},${t}`};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var IsPlainObject$U=function(s){if(typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0},DeepClone=function(s){var t,n,f;if(s==null||typeof s!="object")return s;if(t=Array.isArray(s)?[]:{},IsPlainObject$U(s))for(f in s)n=s[f],t[f]=DeepClone(n);else t=s;return t},SetBaseTexture=function(s,t,n,f){Array.isArray(t)&&(f=n,n=t,t=void 0),t==null&&(t="__BASE"),typeof n=="number"&&arguments.length>=6?(n=[arguments[2],void 0,arguments[3]],f=[arguments[4],void 0,arguments[5]]):(n=DeepClone(n),f=DeepClone(f)),this.textureKey=s,this.baseFrameName=t,this.columns.data=n,this.columns.count=n?n.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=f,this.rows.count=f?f.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var T=this.scene.sys.textures.get(s);if(!T)return this.clear(),this;if(!n||!f)return this.clear(),this;for(var E=T.get(t),h=E.width,S=0,e=0,d=n.length;e<d;e++)n[e]===void 0?S++:typeof n[e]=="number"?h-=n[e]:h-=n[e].width;for(var y=h/S,c=E.height,u=0,e=0,d=f.length;e<d;e++)f[e]===void 0?u++:typeof f[e]=="number"?c-=f[e]:c-=f[e].width;for(var l=c/u,r,a,v,o,p,m=0,g=0,x=0,C=f.length;x<C;x++){f[x]===void 0&&(f[x]=l),typeof f[x]=="number"&&(f[x]={height:f[x],stretch:x%2}),r=f[x],v=r.height,this.rows.stretch+=r.stretch|0,this.rows.minHeight+=r.stretch>0?0:v,m=0;for(var e=0,M=n.length;e<M;e++){if(n[e]===void 0&&(n[e]=y),typeof n[e]=="number"&&(n[e]={width:n[e],stretch:e%2}),a=n[e],o=a.width,x===0&&(this.columns.stretch+=a.stretch|0,this.columns.minWidth+=a.stretch>0?0:o),o>=1&&v>=1){p=this.getFrameNameCallback(e,x,t);var R=typeof p;(R==="string"||R==="number")&&T.add(p,0,m+E.cutX,g+E.cutY,o,v)}m+=o}g+=v}return this.updateTexture(),this},UpdateTexture=function(){if(this.clear(),this.textureKey===void 0)return this;var s=this.scene.sys.textures.get(this.textureKey);if(!s)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,n=this.rows.minHeight*this.maxFixedPartScaleY,f=this.width-t,T=this.height-n,E=f>=0?this.maxFixedPartScaleX:this.width/t,h=T>=0?this.maxFixedPartScaleY:this.height/n;if(this.preserveRatio){var S=Math.min(E,h);if(E>S){var e=(E-S)*t;f>=0?f+=e:f=e,E=S}if(h>S){var d=(h-S)*n;T>=0?T+=d:T=d,h=S}}this.columns.scale=E,this.rows.scale=h;var y;f>0?y=this.columns.stretch>0?f/this.columns.stretch:0:y=0;var c;T>0?c=this.rows.stretch>0?T/this.rows.stretch:0:c=0;var u,l,r,a,v,o=0,p=0,m;this._beginDraw();for(var g=0,x=this.rows.count;g<x;g++){r=this.rows.data[g],v=r.stretch===0?r.height*h:c*r.stretch,o=0;for(var C=0,M=this.columns.count;C<M;C++)l=this.columns.data[C],a=l.stretch===0?l.width*E:y*l.stretch,u=this.getFrameNameCallback(C,g,this.baseFrameName),s.has(u)&&a>0&&v>0&&(r.stretch===0&&l.stretch===0||this.getStretchMode(C,g)===0?m=0:m=1,m===0?this._drawImage(this.textureKey,u,o,p,a,v):this._drawTileSprite(this.textureKey,u,o,p,a,v)),o+=a;p+=v}this._endDraw()};const IsPlainObject$T=Phaser.Utils.Objects.IsPlainObject,GetValue$3u=Phaser.Utils.Objects.GetValue;var SetStretchMode=function(s){return IsPlainObject$T(s)?(this.stretchMode.edge=parseMode(GetValue$3u(s,"edge",0)),this.stretchMode.internal=parseMode(GetValue$3u(s,"internal",0))):(s=parseMode(s),this.stretchMode.edge=s,this.stretchMode.internal=s),this},parseMode=function(s){return typeof s=="string"&&(s=EXTENDMODE[s]),s};const EXTENDMODE={scale:0,repeat:1};var IsEdge=function(s,t){return s===0||s===this.columns.count-1||t===0||t===this.rows.count-1},GetStretchMode=function(s,t){return IsEdge.call(this,s,t)?this.stretchMode.edge:this.stretchMode.internal},SetPreserveRatio=function(s){return s==null&&(s=!0),this.preserveRatio=s,this},SetMaxFixedPartScale=function(s,t){return t===void 0&&(t=s),this.maxFixedPartScaleX=s,this.maxFixedPartScaleY=t,this},NOOP=function(){};const Methods$l={_beginDraw:NOOP,_drawImage:NOOP,_drawTileSprite:NOOP,_endDraw:NOOP,setGetFrameNameCallback:SetGetFrameNameCallback,setBaseTexture:SetBaseTexture,updateTexture:UpdateTexture,setStretchMode:SetStretchMode,getStretchMode:GetStretchMode,setPreserveRatio:SetPreserveRatio,setMaxFixedPartScale:SetMaxFixedPartScale},IsPlainObject$S=Phaser.Utils.Objects.IsPlainObject,GetValue$3t=Phaser.Utils.Objects.GetValue;var NinePatchBase=function(s,t){class n extends s{constructor(T,E,h,S,e,d,y,c,u,l){if(IsPlainObject$S(E)?(l=E,E=GetValue$3t(l,"x",0),h=GetValue$3t(l,"y",0),S=GetValue$3t(l,"width",1),e=GetValue$3t(l,"height",1),d=GetValue$3t(l,"key",void 0),y=GetValue$3t(l,"baseFrame",void 0),c=GetValue$3t(l,"columns",void 0),u=GetValue$3t(l,"rows",void 0)):IsPlainObject$S(S)?(l=S,S=GetValue$3t(l,"width",1),e=GetValue$3t(l,"height",1),d=GetValue$3t(l,"key",void 0),y=GetValue$3t(l,"baseFrame",void 0),c=GetValue$3t(l,"columns",void 0),u=GetValue$3t(l,"rows",void 0)):IsPlainObject$S(d)?(l=d,d=GetValue$3t(l,"key",void 0),y=GetValue$3t(l,"baseFrame",void 0),c=GetValue$3t(l,"columns",void 0),u=GetValue$3t(l,"rows",void 0)):IsPlainObject$S(y)?(l=y,y=GetValue$3t(l,"baseFrame",void 0),c=GetValue$3t(l,"columns",void 0),u=GetValue$3t(l,"rows",void 0)):Array.isArray(y)?(l=u,u=c,c=y,y=GetValue$3t(l,"baseFrame",void 0)):IsPlainObject$S(c)&&(l=c,c=GetValue$3t(l,"columns",void 0),u=GetValue$3t(l,"rows",void 0)),c===void 0){var r=GetValue$3t(l,"leftWidth",void 0),a=GetValue$3t(l,"rightWidth",void 0);r!==void 0&&a!==void 0&&(c=[r,void 0,a])}if(u===void 0){var v=GetValue$3t(l,"topHeight",void 0),o=GetValue$3t(l,"bottomHeight",void 0);v!==void 0&&o!==void 0&&(u=[v,void 0,o])}super(T),this.type=t,this.setPosition(E,h).setSize(S,e).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(GetValue$3t(l,"getFrameNameCallback",void 0)),this.setStretchMode(GetValue$3t(l,"stretchMode",0)),this.setPreserveRatio(GetValue$3t(l,"preserveRatio",!0));var p=GetValue$3t(l,"maxFixedPartScale",1),m=GetValue$3t(l,"maxFixedPartScaleX",p),g=GetValue$3t(l,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(m,g),this.setBaseTexture(d,y,c,u)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(T,E){return this.width===T&&this.height===E?this:(super.resize?super.resize(T,E):super.setSize(T,E),this.updateTexture(),this)}}return Object.assign(n.prototype,Methods$l),n};const GameObjectClasses=Phaser.GameObjects;var GameObjects=void 0,GetStampGameObject=function(s,t){if(GameObjects||(GameObjects={},GetGame(s).events.once("destroy",function(){for(var f in GameObjects)GameObjects[f].destroy();GameObjects=void 0})),!GameObjects.hasOwnProperty(t)){var n=GetGame(s).scene.systemScene,s=new GameObjectClasses[t](n);s.setOrigin(0),GameObjects[t]=s}return GameObjects[t]},DrawImage$2=function(s,t,n,f,T,E){var h=GetStampGameObject(this,"Image").setTexture(s,t).setDisplaySize(T,E);this.draw(h,n,f)},DrawTileSprite$1=function(s,t,n,f,T,E){var h=GetStampGameObject(this,"TileSprite").setTexture(s,t).setSize(T,E);this.draw(h,n,f)};const RenderTexture$2=Phaser.GameObjects.RenderTexture;let NinePatch$1=class extends NinePatchBase(RenderTexture$2,"rexNinePatch"){};var Methods$k={_drawImage:DrawImage$2,_drawTileSprite:DrawTileSprite$1};Object.assign(NinePatch$1.prototype,Methods$k);var IsInValidKey=function(s){return s==null||s===""||s.length===0},GetEntry=function(s,t,n){var f=s;if(!IsInValidKey(t)){typeof t=="string"&&(t=t.split("."));for(var T,E=0,h=t.length;E<h;E++){if(T=t[E],f[T]==null||typeof f[T]!="object"){var S;E===h-1?n===void 0?S={}:S=n:S={},f[T]=S}f=f[T]}}return f},SetValue=function(s,t,n,f){if(f===void 0&&(f="."),typeof s=="object"){if(IsInValidKey(t)){if(n==null)return;typeof n=="object"&&(s=n)}else{typeof t=="string"&&(t=t.split(f));var T=t.pop(),E=GetEntry(s,t);E[T]=n}return s}};ObjectFactory.register("ninePatch",function(s,t,n,f,T,E,h,S){var e=new NinePatch$1(this.scene,s,t,n,f,T,E,h,S);return this.scene.add.existing(e),e});SetValue(window,"RexPlugins.UI.NinePatch",NinePatch$1);const GetCalcMatrix$2=Phaser.GameObjects.GetCalcMatrix;var WebGLRenderer$3=function(s,t,n,f){var T=t.getRenderList();if(T.length!==0){n.addToRenderList(t);var E=s.pipelines.set(t.pipeline),h=t.frame.glTexture,S=E.setGameObject(t),e=n.roundPixels,d=GetCalcMatrix$2(t,n,f),y=E.calcMatrix.copyFrom(d.calc),c=t._displayOriginX,u=t._displayOriginY,l=n.alpha*t.alpha;s.pipelines.preBatch(t);for(var r=0,a=T.length;r<a;r++)T[r].webglRender(E,y,l,c,u,h,S,e);s.pipelines.postBatch(t)}};const SetTransform$2=Phaser.Renderer.Canvas.SetTransform;var CanvasRenderer$3=function(s,t,n,f){var T=s.currentContext,E=t.getRenderList();if(!(E.length===0||!SetTransform$2(s,T,t,n,f))){n.addToRenderList(t);var h=n.roundPixels,S=-t._displayOriginX,e=-t._displayOriginY;T.translate(S,e);for(var d=0,y=E.length;d<y;d++)E[d].canvasRender(T,S,e,h);T.restore()}};const Render$4={renderWebGL:WebGLRenderer$3,renderCanvas:CanvasRenderer$3};var SetTexture=function(s,t){return this.texture=this.scene.sys.textures.get(s),this.frame=this.texture.get(t),this},Resize$1=function(s,t){if(this.width===s&&this.height===t)return this;this.width=s,this.height=t,this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=s,n.hitArea.height=t),this},AddChild$4=function(s){return this.lastAppendedChildren.length=0,Array.isArray(s)?(this.children.add(s),this.lastAppendedChildren.push(...s)):(this.children.add(s),this.lastAppendedChildren.push(s)),this};const RemoveItem$d=Phaser.Utils.Array.Remove;var RemoveChild$3=function(s){return this.poolManager&&this.poolManager.free(s),RemoveItem$d(this.children.list,s),this.lastAppendedChildren.length=0,this.dirty=!0,this},RemoveChildren$1=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},GetLastAppendedChildren$1=function(){return this.lastAppendedChildren},GetChildren$1=function(){return this.children.list};const TintMethods={setTint(s){return this.tint=s,this.tintFill=!1,this},setTintFill(s){return this.tint=s,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var methods$B={setTexture:SetTexture,resize:Resize$1,setSize:Resize$1,addChild:AddChild$4,removeChild:RemoveChild$3,removeChildren:RemoveChildren$1,clear:RemoveChildren$1,getLastAppendedChildren:GetLastAppendedChildren$1,getChildren:GetChildren$1};Object.assign(methods$B,TintMethods);class Stack{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const GetValue$3s=Phaser.Utils.Objects.GetValue;var Pools$1={};let PoolManager$1=class{constructor(t){this.pools=GetValue$3s(t,"pools",Pools$1)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var n=t.type;return this.pools.hasOwnProperty(n)||(this.pools[n]=new Stack),this.pools[n].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var n=0,f=t.length;n<f;n++)this.free(t[n]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}};const MinVersion=60;var IsChecked=!1,CheckP3Version=function(s){if(!IsChecked){s===void 0&&(s=MinVersion);var t=parseInt(Phaser.VERSION.match(/\.(\d+)\./)[1]);t<s&&console.error(`Minimum supported version : 3.${s}`),IsChecked=!0}};CheckP3Version();const GameObject$4=Phaser.GameObjects.GameObject,IsPlainObject$R=Phaser.Utils.Objects.IsPlainObject,GetValue$3r=Phaser.Utils.Objects.GetValue,List=Phaser.Structs.List,StableSort=Phaser.Utils.Array.StableSort;class Blitter extends GameObject$4{constructor(t,n,f,T,E,h){IsPlainObject$R(n)&&(h=n,n=GetValue$3r(h,"x",0),f=GetValue$3r(h,"y",0),T=GetValue$3r(h,"texture"),E=GetValue$3r(h,"frame")),n===void 0&&(n=0),f===void 0&&(f=0),super(t,"rexBlitter"),this.children=new List,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var S=GetValue$3r(h,"reuseBob",!0);this.poolManager=S?new PoolManager$1(h):void 0,this.setTexture(T,E),this.setPosition(n,f),this.setOrigin(0,0),this.clearTint(),this.initPipeline(),this.initPostPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,n=this.children.list,f=0,T=n.length;f<T;f++){var E=n[f];ChildCanRender(E)&&(this.renderList.push(E),t||(t=E.depth!==0))}t&&StableSort(this.renderList,SortByDepth),this.displayListDirty=!1}return this.renderList}}var ChildCanRender=function(s){return s.active&&s.visible&&s.alpha>0},SortByDepth=function(s,t){return s._depth-t._depth};const Components$4=Phaser.GameObjects.Components;Phaser.Class.mixin(Blitter,[Components$4.Alpha,Components$4.BlendMode,Components$4.ComputedSize,Components$4.Depth,Components$4.GetBounds,Components$4.Mask,Components$4.Origin,Components$4.Pipeline,Components$4.PostPipeline,Components$4.ScrollFactor,Components$4.Transform,Components$4.Visible,Render$4,methods$B]);const ImageTypeName$1="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var GetValue$3q=function(s,t,n){if(!s||typeof s=="number")return n;if(s.hasOwnProperty(t))return s[t];if(t.indexOf(".")!==-1){for(var f=t.split("."),T=s,E=n,h=0;h<f.length;h++)if(T.hasOwnProperty(f[h]))E=T[f[h]],T=T[f[h]];else{E=n;break}return E}else return n},Clear=function(s){if(typeof s!="object"||s===null)return s;if(Array.isArray(s))s.length=0;else for(var t in s)delete s[t];return s};const DataMethods$2={enableData(){return this.data===void 0&&(this.data={}),this},setData(s,t){if(this.enableData(),arguments.length===1){var n=s;for(s in n)this.data[s]=n[s]}else this.data[s]=t;return this},getData(s,t){return this.enableData(),s===void 0?this.data:GetValue$3q(this.data,s,t)},incData(s,t,n){return n===void 0&&(n=0),this.enableData(),this.setData(s,this.getData(s,n)+t),this},mulData(s,t,n){return n===void 0&&(n=0),this.enableData(),this.setData(s,this.getData(s,n)*t),this},clearData(){return this.data&&Clear(this.data),this}};let Base$3=class{constructor(t,n){this.type=n,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(Base$3.prototype,DataMethods$2);const DegToRad$g=Phaser.Math.DegToRad,RadToDeg$9=Phaser.Math.RadToDeg,GetValue$3p=Phaser.Utils.Objects.GetValue;let RenderBase$1=class extends Base$3{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,n){return this.x=t,this.y=n,this}setRotation(t){return this.rotation=t,this}get angle(){return RadToDeg$9(this.rotation)}set angle(t){this.rotation=DegToRad$g(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,n){return n===void 0&&(n=!1),this.width=t,n&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,n){return n===void 0&&(n=t),this.scaleX=t,this.scaleY=n,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,n){return n===void 0&&(n=!1),this.height=t,n&&(this.scaleX=this.scaleY),this}setScale(t,n){return n===void 0&&(n=t),this.scaleX=t,this.scaleY=n,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,n){return n===void 0&&(n=!1),this.displayWidth=t,n&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,n){return n===void 0&&(n=!1),this.displayHeight=t,n&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,n){return n===void 0&&(n=t),this.setOriginX(t).setOriginY(n),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var n=GetValue$3p(t,"width",void 0),f=GetValue$3p(t,"height",void 0),T=GetValue$3p(t,"scale",void 0),E=GetValue$3p(t,"scaleX",T),h=GetValue$3p(t,"scaleY",T);n!==void 0?f===void 0&&h===void 0?this.setWidth(n,!0):this.setWidth(n):E!==void 0?this.setScaleX(E):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),f!==void 0?n===void 0&&E===void 0?this.setHeight(f,!0):this.setHeight(f):h!==void 0?this.setScaleY(h):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var S=GetValue$3p(t,"origin",void 0);return S!==void 0?this.setOrigin(S):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,n,f,T,E,h,S,e){}canvasRender(t,n,f,T){}};const TransformMatrix$2=Phaser.GameObjects.Components.TransformMatrix,GetTint$2=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var FrameMatrix=new TransformMatrix$2,WebglRender=function(s,t,n,f,T,E,h,S){var e=this._width,d=this._height,y=e*this.originX,c=d*this.originY,u=this.x-f,l=this.y-T,r=1,a=1;this.flipX&&(u+=e-y*2,r=-1),this.flipY&&(l+=d-c*2,a=-1),FrameMatrix.applyITRS(u,l,this.rotation,this.scaleX*r,this.scaleY*a),t.multiply(FrameMatrix,FrameMatrix);var v=-y,o=-c,p=v+e,m=o+d,g=FrameMatrix.setQuad(v,o,p,m,S),x=this.frame.u0,C=this.frame.v0,M=this.frame.u1,R=this.frame.v1,P=GetTint$2(this.tint,this.alpha*n);s.batchQuad(this.parent,g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],x,C,M,R,P,P,P,P,this.tintFill,E,h)},CanvasRender=function(s,t,n,f){s.save();var T=this._width,E=this._height,h=T*this.originX,S=E*this.originY,e=this.x-h,d=this.y-S,y=1,c=1;this.flipX&&(e+=T,y=-1),this.flipY&&(d+=E,c=-1),f&&(e=Math.round(e),d=Math.round(d)),s.translate(e,d),s.rotate(this.rotation),s.scale(this.scaleX*y,this.scaleY*c);var u=this.frame;s.drawImage(u.source.image,u.cutX,u.cutY,T,E,0,0,T,E),s.restore()};const IsPlainObject$Q=Phaser.Utils.Objects.IsPlainObject;let ImageData$1=class extends RenderBase$1{constructor(t,n){super(t,ImageTypeName$1),this.setFrame(n)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!IsPlainObject$Q(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}};var methods$A={webglRender:WebglRender,canvasRender:CanvasRender};Object.assign(ImageData$1.prototype,methods$A);var AddImage$2=function(s,t){typeof t=="string"&&(t={frame:t});var n=s.poolManager?s.poolManager.allocate(ImageTypeName$1):null;return n===null?n=new ImageData$1(s):n.setParent(s).setActive(),n.modifyPorperties(t),s.addChild(n),n},DrawImage$1=function(s,t,n,f,T,E){AddImage$2(this,{frame:t,x:n,y:f,width:T,height:E})},DrawTileSprite=function(s,t,n,f,T,E){var h=this.texture.get(t),S=h.width,e=h.height,d=Math.floor(T/S),y=Math.floor(E/e);n+=(T-d*S)/2,f+=(E-y*e)/2;for(var c=0;c<d;c++)for(var u=0;u<y;u++)AddImage$2(this,{frame:t,x:n+c*S,y:f+u*e})};const Methods$j={_drawImage:DrawImage$1,_drawTileSprite:DrawTileSprite};class NinePatch extends NinePatchBase(Blitter,"rexNinePatch2"){setBaseTexture(t,n,f,T){return this.setTexture(t,n),super.setBaseTexture(t,n,f,T),this}}Object.assign(NinePatch.prototype,Methods$j);ObjectFactory.register("ninePatch2",function(s,t,n,f,T,E,h,S){var e=new NinePatch(this.scene,s,t,n,f,T,E,h,S);return this.scene.add.existing(e),e});SetValue(window,"RexPlugins.UI.NinePatch2",NinePatch);const GetValue$3o=Phaser.Utils.Objects.GetValue;let RoundRectangle$3=class{constructor(t,n,f,T,E){t===void 0&&(t=0),n===void 0&&(n=t),f===void 0&&(f=0),T===void 0&&(T=0),E===void 0&&(E=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,n,f,T,E)}setTo(t,n,f,T,E){return this.setPosition(t,n),this.setRadius(E),this.setSize(f,T),this}setPosition(t,n){return this.x=t,this.y=n,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,n){return this.width=t,this.height=n,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var n,f;typeof t=="number"?(n=t,f=t):(n=GetValue$3o(t,"x",0),f=GetValue$3o(t,"y",0));var T=this.cornerRadius;T.tl=GetRadius(GetValue$3o(t,"tl",void 0),n,f),T.tr=GetRadius(GetValue$3o(t,"tr",void 0),n,f),T.bl=GetRadius(GetValue$3o(t,"bl",void 0),n,f),T.br=GetRadius(GetValue$3o(t,"br",void 0),n,f)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){SetRadius(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){SetRadius(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){SetRadius(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){SetRadius(this.cornerRadius.br,t)}};var GetRadius=function(s,t,n){return s===void 0?s={x:t,y:n}:typeof s=="number"&&(s={x:s,y:s}),SetConvex(s),s},SetRadius=function(s,t){typeof t=="number"?(s.x=t,s.y=t):(s.x=GetValue$3o(t,"x",0),s.y=GetValue$3o(t,"y",0)),SetConvex(s)},SetConvex=function(s){s.convex=s.x>=0||s.y>=0,s.x=Math.abs(s.x),s.y=Math.abs(s.y)},LineTo=function(s,t,n){var f=n.length;if(f>=2){var T=n[f-2],E=n[f-1];if(s===T&&t===E)return n}return n.push(s,t),n};const DegToRad$f=Phaser.Math.DegToRad;var ArcTo$1=function(s,t,n,f,T,E,h,S,e){h&&E>T?E-=360:!h&&E<T&&(E+=360);var d=E-T,y=DegToRad$f(d)/S;T=DegToRad$f(T);for(var c=0;c<=S;c++){var u=T+y*c,l=s+n*Math.cos(u),r=t+f*Math.sin(u);LineTo(l,r,e)}return e},Utils$3=Phaser.Renderer.WebGL.Utils,FillPathWebGL=function(s,t,n,f,T,E){for(var h=Utils$3.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*f),S=n.pathData,e=n.pathIndexes,d=0;d<e.length;d+=3){var y=e[d]*2,c=e[d+1]*2,u=e[d+2]*2,l=S[y+0]-T,r=S[y+1]-E,a=S[c+0]-T,v=S[c+1]-E,o=S[u+0]-T,p=S[u+1]-E,m=t.getX(l,r),g=t.getY(l,r),x=t.getX(a,v),C=t.getY(a,v),M=t.getX(o,p),R=t.getY(o,p);s.batchTri(n,m,g,x,C,M,R,0,0,1,1,h,h,h,2)}},Utils$2=Phaser.Renderer.WebGL.Utils,StrokePathWebGL=function(s,t,n,f,T){var E=s.strokeTint,h=Utils$2.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*n);E.TL=h,E.TR=h,E.BL=h,E.BR=h;var S=t.pathData,e=S.length-1,d=t.lineWidth,y=d/2,c=S[0]-f,u=S[1]-T;t.closePath||(e-=2);for(var l=2;l<e;l+=2){var r=S[l]-f,a=S[l+1]-T;s.batchLine(c,u,r,a,y,y,d,l-2,t.closePath?l===e-1:!1),c=r,u=a}};const GetCalcMatrix$1=Phaser.GameObjects.GetCalcMatrix;var PolygonWebGLRenderer=function(s,t,n,f){t.dirty&&(t.updateData(),t.dirty=!1),n.addToRenderList(t);var T=s.pipelines.set(t.pipeline),E=GetCalcMatrix$1(t,n,f),h=T.calcMatrix.copyFrom(E.calc),S=t._displayOriginX,e=t._displayOriginY,d=n.alpha*t.alpha;s.pipelines.preBatch(t),t.isFilled&&FillPathWebGL(T,h,t,d,S,e),t.isStroked&&StrokePathWebGL(T,t,d,S,e),s.pipelines.postBatch(t)},FillStyleCanvas=function(s,t,n,f){var T=n||t.fillColor,E=f||t.fillAlpha,h=(T&16711680)>>>16,S=(T&65280)>>>8,e=T&255;s.fillStyle="rgba("+h+","+S+","+e+","+E+")"},LineStyleCanvas=function(s,t,n,f){var T=n||t.strokeColor,E=f||t.strokeAlpha,h=(T&16711680)>>>16,S=(T&65280)>>>8,e=T&255;s.strokeStyle="rgba("+h+","+S+","+e+","+E+")",s.lineWidth=t.lineWidth};const SetTransform$1=Phaser.Renderer.Canvas.SetTransform;var PolygonCanvasRenderer=function(s,t,n,f){t.dirty&&(t.updateData(),t.dirty=!1),n.addToRenderList(t);var T=s.currentContext;if(SetTransform$1(s,T,t,n,f)){var E=t._displayOriginX,h=t._displayOriginY,S=t.pathData,e=S.length-1,d=S[0]-E,y=S[1]-h;T.beginPath(),T.moveTo(d,y),t.closePath||(e-=2);for(var c=2;c<e;c+=2){var u=S[c]-E,l=S[c+1]-h;T.lineTo(u,l)}T.closePath(),t.isFilled&&(FillStyleCanvas(T,t),T.fill()),t.isStroked&&(LineStyleCanvas(T,t),T.stroke()),T.restore()}};const Render$3={renderWebGL:PolygonWebGLRenderer,renderCanvas:PolygonCanvasRenderer},Shape$1=Phaser.GameObjects.Shape,IsPlainObject$P=Phaser.Utils.Objects.IsPlainObject,GetValue$3n=Phaser.Utils.Objects.GetValue,Earcut$1=Phaser.Geom.Polygon.Earcut;let RoundRectangle$2=class extends Shape$1{constructor(t,n,f,T,E,h,S,e){var d,y,c,u;if(IsPlainObject$P(n)){var l=n;n=l.x,f=l.y,T=l.width,E=l.height,h=l.radius,S=l.color,e=l.alpha,d=l.strokeColor,y=l.strokeAlpha,c=l.strokeWidth,u=l.shape}n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=1),E===void 0&&(E=T),h===void 0&&(h=0),u===void 0&&(u=0);var r=new RoundRectangle$3;if(super(t,"rexRoundRectangleShape",r),this.setShapeType(u),this.shapeType===0){var a=GetValue$3n(h,"radius",h);r.setTo(0,0,T,E,a)}else{var a={x:T/2,y:E/2};r.setTo(0,0,T,E,a)}var v=GetValue$3n(h,"iteration",void 0);this.setIteration(v),this.setPosition(n,f),this.setFillStyle(S,e),d!==void 0&&c===void 0&&(c=2),this.setStrokeStyle(c,d,y),this.updateDisplayOrigin(),this.dirty=!0}get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,n){return n===void 0&&(n=1),this.fillColor=t,this.fillAlpha=n,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&this._strokeColor!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,n,f){return f===void 0&&(f=1),this.lineWidth=t,this.strokeColor=n,this.strokeAlpha=f,this}updateData(){var t=this.geom,n=this.pathData;n.length=0;var f=t.width,T=t.height,E=t.cornerRadius,h,S=this.iteration+1;if(h=E.tl,IsArcCorner$1(h))if(h.convex){var e=h.x,d=h.y;ArcTo$1(e,d,h.x,h.y,180,270,!1,S,n)}else{var e=0,d=0;ArcTo$1(e,d,h.x,h.y,90,0,!0,S,n)}else LineTo(0,0,n);if(h=E.tr,IsArcCorner$1(h))if(h.convex){var e=f-h.x,d=h.y;ArcTo$1(e,d,h.x,h.y,270,360,!1,S,n)}else{var e=f,d=0;ArcTo$1(e,d,h.x,h.y,180,90,!0,S,n)}else LineTo(f,0,n);if(h=E.br,IsArcCorner$1(h))if(h.convex){var e=f-h.x,d=T-h.y;ArcTo$1(e,d,h.x,h.y,0,90,!1,S,n)}else{var e=f,d=T;ArcTo$1(e,d,h.x,h.y,270,180,!0,S,n)}else LineTo(f,T,n);if(h=E.bl,IsArcCorner$1(h))if(h.convex){var e=h.x,d=T-h.y;ArcTo$1(e,d,h.x,h.y,90,180,!1,S,n)}else{var e=0,d=T;ArcTo$1(e,d,h.x,h.y,360,270,!0,S,n)}else LineTo(0,T,n);return n.push(n[0],n[1]),this.pathIndexes=Earcut$1(n),this}setShapeType(t){return typeof t=="string"&&(t=ShapeTypeMap[t]),this.shapeType=t,this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,n){if(n===void 0&&(n=t),this.geom.width===t&&this.geom.height===n)return this;this.geom.setSize(t,n),this.shapeType===1&&this.setRadius({x:t/2,y:n/2}),this.updateDisplayOrigin(),this.dirty=!0;var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=n),this}resize(t,n){return this.setSize(t,n),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}};var IsArcCorner$1=function(s){return s.x>0&&s.y>0};const ShapeTypeMap={rectangle:0,circle:1};Object.assign(RoundRectangle$2.prototype,Render$3);ObjectFactory.register("roundRectangle",function(s,t,n,f,T,E,h){var S=new RoundRectangle$2(this.scene,s,t,n,f,T,E,h);return this.scene.add.existing(S),S});SetValue(window,"RexPlugins.UI.RoundRectangle",RoundRectangle$2);const Utils$1=Phaser.Renderer.WebGL.Utils;var WebGLRenderer$2=function(s,t,n,f){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){n.addToRenderList(t);var T=t.frame,E=T.width,h=T.height,S=Utils$1.getTintAppendFloatAlpha,e=s.pipelines.set(t.pipeline,t),d=e.setTexture2D(T.glTexture,t);s.pipelines.preBatch(t),e.batchTexture(t,T.glTexture,E,h,t.x,t.y,E/t.resolution,h/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,E,h,S(t.tintTopLeft,n.alpha*t._alphaTL),S(t.tintTopRight,n.alpha*t._alphaTR),S(t.tintBottomLeft,n.alpha*t._alphaBL),S(t.tintBottomRight,n.alpha*t._alphaBR),t.tintFill,0,0,n,f,!1,d),s.pipelines.postBatch(t)}},CanvasRenderer$2=function(s,t,n,f){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(n.addToRenderList(t),s.batchSprite(t,t.frame,n,f))};const Render$2={renderWebGL:WebGLRenderer$2,renderCanvas:CanvasRenderer$2},Color$4=Phaser.Display.Color,CanvasMethods={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(s){return this.context.fillStyle=s,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(s,t,n,f,T,E,h,S,e,d){var y=this.scene.sys.textures.getFrame(s,t);if(!y)return this;var c=y.cutWidth,u=y.cutHeight;n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=c),E===void 0&&(E=u),h===void 0&&(h=0),S===void 0&&(S=0),e===void 0&&(e=c),d===void 0&&(d=u);var l=y.cutX+h,r=y.cutY+S;return this.context.drawImage(y.source.image,l,r,e,d,n,f,T,E),this.dirty=!0,this},getDataURL(s,t){return this.canvas.toDataURL(s,t)},getPixel(s,t,n){n===void 0&&(n=new Color$4);var f=this.context.getImageData(s,t,1,1);return n.setTo(f.data[0],f.data[1],f.data[2],f.data[3]),n},setPixel(s,t,n,f,T,E){if(typeof n!="number"){var h=n;n=h.red,f=h.green,T=h.blue,E=h.alpha}E===void 0&&(E=n!==0||f!==0||T!==0?255:0);var S=this.context.createImageData(1,1);return S.data[0]=n,S.data[1]=f,S.data[2]=T,S.data[3]=E,this.context.putImageData(S,s,t),this.dirty=!0,this}};var CopyCanvasToTexture=function(s,t,n,f,T,E,h){var S=s.sys.textures,e=s.renderer;f===void 0&&(f=0),T===void 0&&(T=0),E===void 0&&(E=t.width),h===void 0&&(h=t.height);var d;S.exists(n)?d=S.get(n):d=S.createCanvas(n,E,h);var y=d.getSourceImage();y.width!==E&&(y.width=E),y.height!==h&&(y.height=h);var c=y.getContext("2d",{willReadFrequently:!0});c.clearRect(0,0,E,h),c.drawImage(t,f,T,E,h),e.gl&&d&&e.canvasToTexture(y,d.source[0].glTexture,!0,0)};const TextureMethods={updateTexture(s,t){s&&(t?s.call(t,this.canvas,this.context):s(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=this.width,n.hitArea.height=this.height),this},generateTexture(s,t,n,f,T){var E=this.canvas;return f===void 0?f=E.width:f*=this.resolution,T===void 0?T=E.height:T*=this.resolution,CopyCanvasToTexture(this.scene,E,s,t,n,f,T),this},loadTexture(s,t){var n=this.scene.sys.textures.getFrame(s,t);return n?(this.width!==n.cutWidth||this.height!==n.cutHeight?this.setSize(n.cutWidth,n.cutHeight):this.clear(),this.drawFrame(s,t),this.dirty=!0,this):this}};CheckP3Version();const CanvasPool$4=Phaser.Display.Canvas.CanvasPool,GameObject$3=Phaser.GameObjects.GameObject;let Canvas$1=class extends GameObject$3{constructor(t,n,f,T,E){n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=1),E===void 0&&(E=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=T,this._height=E,T=Math.max(Math.ceil(T*this.resolution),1),E=Math.max(Math.ceil(E*this.resolution),1),this.canvas=CanvasPool$4.create(this,T,E),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(n,f),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline(!0),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){CanvasPool$4.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,n){return this._width===t&&this._height===n?this:(this._width=t,this._height=n,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),n=Math.max(Math.ceil(n*this.resolution),1),this.canvas.width=t,this.canvas.height=n,this.frame.setSize(t,n),this.dirty=!0,this)}setSize(t,n){return this.setCanvasSize(t,n),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,n){return this.displayWidth=t,this.displayHeight=n,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,n){return this.setSize(t,n),this}};const Components$3=Phaser.GameObjects.Components;Phaser.Class.mixin(Canvas$1,[Components$3.Alpha,Components$3.BlendMode,Components$3.Crop,Components$3.Depth,Components$3.Flip,Components$3.GetBounds,Components$3.Mask,Components$3.Origin,Components$3.Pipeline,Components$3.PostPipeline,Components$3.ScrollFactor,Components$3.Tint,Components$3.Transform,Components$3.Visible,Render$2,CanvasMethods,TextureMethods]);const Pad$1=Phaser.Utils.String.Pad;var GetStyle=function(s,t,n){if(s==null)return s;switch(typeof s){case"string":return s;case"number":return`#${Pad$1(Math.floor(s).toString(16),6,"0",1)}`;case"function":return s(t,n);case"object":return s.hasOwnProperty("r")?s.hasOwnProperty("a")?`rgba(${s.r},${s.g},${s.b},${s.a})`:`rgb(${s.r},${s.g},${s.b})`:s.hasOwnProperty("h")?s.hasOwnProperty("a")?`hsla(${s.h},${s.s},${s.l},${s.a})`:`hsl(${s.h},${s.s},${s.l})`:s;default:return s}};const DegToRad$e=Phaser.Math.DegToRad;var AddRoundRectanglePath=function(s,t,n,f,T,E,h){var S=new RoundRectangle$3(t,n,f,T,E),e=S.minWidth,d=S.minHeight,y=f>=e?1:f/e,c=T>=d?1:T/d,u=S.cornerRadius,l,r,a,v,o,p,m;s.save(),s.beginPath(),s.translate(t,n),l=u.tl,IsArcCorner(l)?(r=l.x*y,a=l.y*c,IsConvexArc(l)?(v=r,o=a,ArcTo(s,v,o,r,a,180,270,!1,h)):(v=0,o=0,ArcTo(s,v,o,r,a,90,0,!0,h)),p=0,m=a):(s.lineTo(0,0),p=0,m=0),l=u.tr,IsArcCorner(l)?(r=l.x*y,a=l.y*c,IsConvexArc(l)?(v=f-r,o=a,ArcTo(s,v,o,r,a,270,360,!1,h)):(v=f,o=0,ArcTo(s,v,o,r,a,180,90,!0,h))):s.lineTo(f,0),l=u.br,IsArcCorner(l)?(r=l.x*y,a=l.y*c,IsConvexArc(l)?(v=f-r,o=T-a,ArcTo(s,v,o,r,a,0,90,!1,h)):(v=f,o=T,ArcTo(s,v,o,r,a,270,180,!0,h))):s.lineTo(f,T),l=u.bl,IsArcCorner(l)?(r=l.x*y,a=l.y*c,IsConvexArc(l)?(v=r,o=T-a,ArcTo(s,v,o,r,a,90,180,!1,h)):(v=0,o=T,ArcTo(s,v,o,r,a,360,270,!0,h))):s.lineTo(0,T),s.lineTo(p,m),s.closePath(),s.restore()},IsConvexArc=function(s){return!s.hasOwnProperty("convex")||s.convex},IsArcCorner=function(s){return s.x>0&&s.y>0},ArcTo=function(s,t,n,f,T,E,h,S,e){if(S&&h>E?h-=360:!S&&h<E&&(h+=360),E=DegToRad$e(E),h=DegToRad$e(h),e==null)s.ellipse(t,n,f,T,0,E,h,S);else{e+=1;for(var d,y,c,u=(h-E)/e,l=0;l<=e;l++)c=E+u*l,d=t+f*Math.cos(c),y=n+T*Math.sin(c),s.lineTo(d,y)}},DrawRoundRectangle=function(s,t,n,f,T,E,h,S,e,d,y,c,u){if(AddRoundRectanglePath(t,n,f,T,E,h,u),S!=null){if(y!=null){var l;c?l=t.createLinearGradient(0,0,T,0):l=t.createLinearGradient(0,0,0,E),l.addColorStop(0,S),l.addColorStop(1,y),S=l}t.fillStyle=S,t.fill()}e!=null&&d>0&&(t.strokeStyle=e,t.lineWidth=d,t.stroke())},DrawRoundRectangleBackground=function(s,t,n,f,T,E,h,S){if(!(t==null&&n==null)){var e=s.canvas.width,d=s.canvas.height;n==null&&(f=0);var y=f/2;e=Math.max(1,e-f),d=Math.max(1,d-f),DrawRoundRectangle(s.canvas,s.context,y,y,e,d,T,t,n,f,E,h,S)}},DrawContent$2=function(){DrawRoundRectangleBackground(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const GetValue$3m=Phaser.Utils.Objects.GetValue;let RoundRectangle$1=class extends Canvas$1{constructor(t,n,f,T,E,h,S,e,d,y,c){n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=1),E===void 0&&(E=T),h===void 0&&(h=0),super(t,n,f,T,E),this.type="rexRoundRectangleCanvas";var u=GetValue$3m(h,"radius",h),l=GetValue$3m(h,"iteration",void 0);this.setRadius(u),this.setIteration(l),this.setFillStyle(S,y,c),this.setStrokeStyle(e,d)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=GetStyle(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=GetStyle(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,n,f){return f===void 0&&(f=!0),this.fillStyle=t,this.fillColor2=n,this.isHorizontalGradient=f,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=GetStyle(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,n){return this.strokeStyle=t,this.lineWidth=n,this}updateTexture(){return this.clear(),DrawContent$2.call(this),super.updateTexture(),this}};ObjectFactory.register("roundRectangleCanvas",function(s,t,n,f,T,E,h,S,e,d){var y=new RoundRectangle$1(this.scene,s,t,n,f,T,E,h,S,e,d);return this.scene.add.existing(y),y});SetValue(window,"RexPlugins.UI.RoundRectangleCanvas",RoundRectangle$1);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Utils=Phaser.Renderer.WebGL.Utils,WebGLRenderer$1=function(s,t,n,f){if(!(t.width===0||t.height===0)){n.addToRenderList(t);var T=t.frame,E=T.width,h=T.height,S=Utils.getTintAppendFloatAlpha,e=s.pipelines.set(t.pipeline,t),d=e.setTexture2D(T.glTexture,t);s.pipelines.preBatch(t),e.batchTexture(t,T.glTexture,E,h,t.x,t.y,E/t.style.resolution,h/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,E,h,S(t.tintTopLeft,n.alpha*t._alphaTL),S(t.tintTopRight,n.alpha*t._alphaTR),S(t.tintBottomLeft,n.alpha*t._alphaBL),S(t.tintBottomRight,n.alpha*t._alphaBR),t.tintFill,0,0,n,f,!1,d),s.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var CanvasRenderer$1=function(s,t,n,f){t.width===0||t.height===0||(n.addToRenderList(t),s.batchSprite(t,t.frame,n,f))};const Render$1={renderWebGL:WebGLRenderer$1,renderCanvas:CanvasRenderer$1},CanvasPool$3=Phaser.Display.Canvas.CanvasPool;var MeasureTextMargins=function(s,t,n){n===void 0&&(n={});var f=CanvasPool$3.create(this),T=f.getContext("2d",{willReadFrequently:!0});s.syncFont(f,T);var E=T.measureText(t),h=Math.ceil(E.width*s.baselineX),S=h,e=2*S;if(S=S*s.baselineY|0,f.width=h,f.height=e,T.fillStyle="#f00",T.fillRect(0,0,h,e),T.font=s._font,T.textBaseline="alphabetic",T.fillStyle="#000",T.fillText(s.testString,0,S),n.left=0,h===0||e===0||!T.getImageData(0,0,h,e))return CanvasPool$3.remove(f),n;for(var d=T.getImageData(0,0,h,e).data,y=!1,c=0;c<h;c++){for(var u=0;u<e;u++){var l=(u*h+c)*4;if(d[l]!==255){n.left=c,y=!0;break}}if(y)break}return CanvasPool$3.remove(f),n};CheckP3Version();const GameObject$2=Phaser.GameObjects.GameObject;class TextBase extends GameObject$2{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,n){return this.style.setFixedSize(t,n)}setBackgroundColor(t,n,f){return this.style.setBackgroundColor(t,n,f)}setBackgroundStrokeColor(t,n){return this.style.setBackgroundStrokeColor(t,n)}setBackgroundCornerRadius(t,n){return this.style.setBackgroundCornerRadius(t,n)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,n){return this.style.setStroke(t,n)}setShadow(t,n,f,T,E,h){return this.style.setShadow(t,n,f,T,E,h)}setShadowOffset(t,n){return this.style.setShadowOffset(t,n)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,n){return this.style.setTextMetrics(t,n)}measureTextMargins(t,n){return MeasureTextMargins(this.style,t,n)}}const Components$2=Phaser.GameObjects.Components;Phaser.Class.mixin(TextBase,[Components$2.Alpha,Components$2.BlendMode,Components$2.ComputedSize,Components$2.Crop,Components$2.Depth,Components$2.Flip,Components$2.GetBounds,Components$2.Mask,Components$2.Origin,Components$2.Pipeline,Components$2.PostPipeline,Components$2.ScrollFactor,Components$2.Tint,Components$2.Transform,Components$2.Visible,Render$1]);var PropertyMap={backgroundColor:["backgroundColor",null,GetStyle],backgroundColor2:["backgroundColor2",null,GetStyle],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,GetStyle],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",GetStyle],stroke:["stroke","#fff",GetStyle],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",GetStyle],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",GetStyle],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",GetStyle],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|Mqgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const CanvasPool$2=Phaser.Display.Canvas.CanvasPool;var MeasureText=function(s){var t=CanvasPool$2.create(this),n=t.getContext("2d",{willReadFrequently:!0});s.syncFont(t,n);var f=n.measureText(s.testString);if("actualBoundingBoxAscent"in f){var T=f.actualBoundingBoxAscent,E=f.actualBoundingBoxDescent,d={ascent:T,descent:E,fontSize:T+E};return CanvasPool$2.remove(t),d}var h=Math.ceil(f.width*s.baselineX),S=h,e=2*S;S=S*s.baselineY|0,t.width=h,t.height=e,n.fillStyle="#f00",n.fillRect(0,0,h,e),n.font=s._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s.testString,0,S);var d={ascent:0,descent:0,fontSize:0};if(!n.getImageData(0,0,h,e))return d.ascent=S,d.descent=S+6,d.fontSize=d.ascent+d.descent,CanvasPool$2.remove(t),d;var y=n.getImageData(0,0,h,e).data,c=y.length,u=h*4,l,r,a=0,v=!1;for(l=0;l<S;l++){for(r=0;r<u;r+=4)if(y[a+r]!==255){v=!0;break}if(!v)a+=u;else break}for(d.ascent=S-l,a=c-u,v=!1,l=e;l>S;l--){for(r=0;r<u;r+=4)if(y[a+r]!==255){v=!0;break}if(!v)a-=u;else break}return d.descent=l-S,d.fontSize=d.ascent+d.descent,CanvasPool$2.remove(t),d},CONST={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const GetAdvancedValue$6=Phaser.Utils.Objects.GetAdvancedValue,GetValue$3l=Phaser.Utils.Objects.GetValue;let TextStyle$1=class{constructor(t,n,f){this.parent=t,f===void 0&&(f=PropertyMap),this.propertyMap=f,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(n,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==CONST.NO_WRAP&&this.wrapWidth===0}setStyle(t,n,f){if(n===void 0&&(n=!0),f===void 0&&(f=!1),t&&t.hasOwnProperty("wordWrap")){var T=t.wordWrap;T.hasOwnProperty("width")&&(t.wrap={mode:"word",width:T.width})}if(t&&t.hasOwnProperty("wrap")){var E=t.wrap;if(E.hasOwnProperty("mode")){var h=E.mode;typeof h=="string"&&(E.mode=WRAPMODE[h])}else E.hasOwnProperty("width")&&(E.mode=1)}t&&t.rtl&&f&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var S=this.propertyMap;for(var e in S){var d=S[e],y=d[0],c=f?d[1]:this[e],u=d[2];if(e==="wrapCallback"||e==="wrapCallbackScope")this[e]=GetValue$3l(t,y,c);else{var l=GetAdvancedValue$6(t,y,c);u&&(l=u(l)),this[e]=l}}var r=GetValue$3l(t,"font",null);r===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=r;var a=GetValue$3l(t,"fill",null);a!==null&&(this.color=GetStyle(a));var v=GetValue$3l(t,"metrics",!1);return v?this.metrics={ascent:GetValue$3l(v,"ascent",0),descent:GetValue$3l(v,"descent",0),fontSize:GetValue$3l(v,"fontSize",0)}:(n||!this.metrics)&&(this.metrics=MeasureText(this)),n?this.parent.updateText():this.parent}syncFont(t,n){n.font=this._font}syncStyle(t,n){n.textBaseline="alphabetic",n.fillStyle=this.color,n.strokeStyle=this.stroke,n.lineWidth=this.strokeThickness,n.lineCap="round",n.lineJoin="round"}syncShadow(t,n){n?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=MeasureText(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=GetValue$3l(t,"fontFamily","Courier"),this.fontSize=GetValue$3l(t,"fontSize","16px"),this.fontStyle=GetValue$3l(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,n){return this.fixedWidth=t,this.fixedHeight=n,t&&(this.parent.width=t),n&&(this.parent.height=n),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,n,f){return f===void 0&&(f=!0),this.backgroundColor=GetStyle(t,this.parent.canvas,this.parent.context),this.backgroundColor2=GetStyle(n,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=f,this.update(!1)}setBackgroundStrokeColor(t,n){return this.backgroundStrokeColor=GetStyle(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=n,this.update(!1)}setBackgroundCornerRadius(t,n){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=n,this.update(!1)}setFill(t){return this.color=GetStyle(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=GetStyle(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,n){return t===void 0?this.strokeThickness=0:(n===void 0&&(n=this.strokeThickness),this.stroke=GetStyle(t,this.parent.canvas,this.parent.context),this.strokeThickness=n),this.update(!0)}setShadow(t,n,f,T,E,h){return t===void 0&&(t=0),n===void 0&&(n=0),f===void 0&&(f="#000"),T===void 0&&(T=0),E===void 0&&(E=!1),h===void 0&&(h=!0),this.shadowOffsetX=t,this.shadowOffsetY=n,this.shadowColor=GetStyle(f,this.parent.canvas,this.parent.context),this.shadowBlur=T,this.shadowStroke=E,this.shadowFill=h,this.update(!1)}setShadowOffset(t,n){return t===void 0&&(t=0),n===void 0&&(n=t),this.shadowOffsetX=t,this.shadowOffsetY=n,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=GetStyle(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,n,f){return t===void 0&&(t="#000"),n===void 0&&(n=0),f===void 0&&(f=0),this.underlineColor=GetStyle(t,this.parent.canvas,this.parent.context),this.underlineThickness=n,this.underlineOffset=f,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=GetStyle(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setStrikethrough(t,n,f){return t===void 0&&(t="#000"),n===void 0&&(n=0),f===void 0&&(f=0),this.strikethroughColor=GetStyle(t,this.parent.canvas,this.parent.context),this.strikethroughThickness=n,this.strikethroughOffset=f,this.update(!1)}setStrikethroughColor(t){return t===void 0&&(t="#000"),this.strikethroughColor=GetStyle(t,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(t){return t===void 0&&(t=0),this.strikethroughThickness=t,this.update(!1)}setStrikethroughOffset(t){return t===void 0&&(t=0),this.strikethroughOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=WRAPMODE[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,n){return t===void 0&&(t="left"),n===void 0&&(n="top"),this.halign=t,this.valign=n,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,n){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,n&&(typeof n=="string"?(this.fontFamily=n,this.fontSize="",this.fontStyle=""):(this.fontFamily=GetValue$3l(n,"fontFamily",this.fontFamily),this.fontSize=GetValue$3l(n,"fontSize",this.fontSize),this.fontStyle=GetValue$3l(n,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},n=this.propertyMap;for(var f in n)t[f]=this[f];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}};const WRAPMODE={none:CONST.NO_WRAP,word:CONST.WORD_WRAP,char:CONST.CHAR_WRAP,character:CONST.CHAR_WRAP},DrawMethods={draw(s,t,n,f){var T=this.penManager;this.hitAreaManager.clear();var E=this.context;E.save();var h=this.defaultStyle;this.clear(),DrawRoundRectangleBackground(this,h.backgroundColor,h.backgroundStrokeColor,h.backgroundStrokeLineWidth,h.backgroundCornerRadius,h.backgroundColor2,h.backgroundHorizontalGradient,h.backgroundCornerIteration),s+=this.startXOffset,t+=this.startYOffset;var S=h.halign,e=h.valign,d,y=h.lineHeight,c=T.lines,u=c.length,l=h.maxLines,r,a,v;l>0&&u>l?(r=l,e==="center"?a=Math.floor((u-r)/2):e==="bottom"?a=u-r:a=0):(r=u,a=0),v=a+r;var o,p,m=this.rtl,g=m?this.parent.width:void 0;e==="center"?p=Math.max((f-r*y)/2,0):e==="bottom"?p=Math.max(f-r*y-2,0):p=0,p+=t;for(var x=a;x<v;x++)if(d=T.getLineWidth(x),d!==0){for(var C=c[x],M=C.length,R=S,P=0;P<M;P++){var w=C[P].prop.align;if(w!==void 0){R=w;break}}R==="center"?o=(n-d)/2:R==="right"?o=m?0:n-d:o=m?n-d:0,o+=s;for(var P=0;P<M;P++)this.drawPen(C[P],o,p,g)}E.restore()},drawPen(s,t,n,f){t+=s.x,n+=s.y+(s.prop.y||0),f!==void 0&&(t=f-t);var T=this.canvas,E=this.context;E.save();var h=this.parser.propToContextStyle(this.defaultStyle,s.prop);if(h.buildFont(),h.syncFont(T,E),h.syncStyle(T,E),h.underlineThickness>0&&s.width>0){var S=n+h.underlineOffset-h.underlineThickness/2;this.drawLine(t,S,s.width,h.underlineThickness,h.underlineColor,h)}if(s.isTextPen&&this.drawText(t,n,s.text,h),s.isImagePen&&this.drawImage(t,n,s.prop.img,s.prop.color,h),h.strikethroughThickness>0&&s.width>0){var S=n+h.strikethroughOffset-h.strikethroughThickness/2;this.drawLine(t,S,s.width,h.strikethroughThickness,h.strikethroughColor,h)}if(E.restore(),s.hasAreaMarker&&s.width>0){var e,d=s.prop.area;if(d)e={key:d};else{var y=s.prop.url;e={key:`url:${y}`,url:y}}this.hitAreaManager.add(t,n-this.startYOffset,s.width,this.defaultStyle.lineHeight,e)}},clear(){var s=this.canvas;this.context.clearRect(0,0,s.width,s.height)},drawLine(s,t,n,f,T,E){this.autoRound&&(s=Math.round(s),t=Math.round(t));var h=this.context;E.syncShadow(h,E.shadowStroke);var S=h.lineCap;h.lineCap="butt",h.strokeStyle=T,h.lineWidth=f,h.beginPath(),h.moveTo(s,t),h.lineTo(s+n,t),h.stroke(),h.lineCap=S},drawText(s,t,n,f){this.autoRound&&(s=Math.round(s),t=Math.round(t));var T=this.context;f.stroke&&f.stroke!=="none"&&f.strokeThickness>0&&(f.syncShadow(T,f.shadowStroke),T.strokeText(n,s,t)),f.color&&f.color!=="none"&&(f.syncShadow(T,f.shadowFill),T.fillText(n,s,t))},drawImage(s,t,n,f,T){t-=this.startYOffset,this.parent.imageManager.draw(n,this.context,s,t,f,this.autoRound)}},GetValue$3k=Phaser.Utils.Objects.GetValue,NO_NEWLINE$3=CONST.NO_NEWLINE,RAW_NEWLINE$1=CONST.RAW_NEWLINE;class Pen{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=GetValue$3k(t,"text",""),this.x=GetValue$3k(t,"x",0),this.y=GetValue$3k(t,"y",0),this.width=GetValue$3k(t,"width",0);var n=GetValue$3k(t,"prop",null);n===null&&(n={}),this.prop=n,this.newLineMode=GetValue$3k(t,"newLineMode",0),this.startIndex=GetValue$3k(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===RAW_NEWLINE$1&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==NO_NEWLINE$3&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===RAW_NEWLINE$1&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var Clone$1=function(s,t){var n=Array.isArray(s);if(t===void 0?t=n?[]:{}:Clear(t),n){t.length=s.length;for(var f=0,T=s.length;f<T;f++)t[f]=s[f]}else for(var E in s)t[E]=s[E];return t};const GetFastValue$2=Phaser.Utils.Objects.GetFastValue,NO_NEWLINE$2=CONST.NO_NEWLINE,WRAPPED_NEWLINE$1=CONST.WRAPPED_NEWLINE;class PenManager{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=GetFastValue$2(t,"tagToText",NOOP),this.tagToTextScope=GetFastValue$2(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,n=this.lines.length;t<n;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,n,f,T,E,h){var S=this.pensPool.pop();return S==null&&(S=new Pen),PEN_CONFIG.text=t,PEN_CONFIG.x=n,PEN_CONFIG.y=f,PEN_CONFIG.width=T,PEN_CONFIG.prop=E,PEN_CONFIG.newLineMode=h,S.resetFromJSON(PEN_CONFIG),this.addPen(S),this}addImagePen(t,n,f,T){return this.addTextPen("",t,n,f,T,NO_NEWLINE$2),this}addNewLinePen(){var t=this.lastPen,n=t?t.lastX:0,f=t?t.y:0,T=t?Clone$1(t.prop):null;return this.addTextPen("",n,f,0,T,WRAPPED_NEWLINE$1),this}addPen(t){var n=this.lastPen;n==null?t.startIndex=0:t.startIndex=n.endIndex,this.pens.push(t);var f=this.lastLine;f==null&&(f=this.linesPool.pop()||[],this.lines.push(f)),f.push(t),t.newLineMode!==NO_NEWLINE$2&&(f=this.linesPool.pop()||[],this.lines.push(f)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new PenManager),t.clear();for(var n=0,f=this.lines.length;n<f;n++)for(var T=this.lines[n],E=0,h=T.length;E<h;E++){var S=T[E];t.addPen(S.text,S.x,S.y,S.width,Clone$1(S.prop),S.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var n=this.lines[t];return n&&n[0]?n[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var n,f=!1,T;for(n=t;n>=0&&(T=this.lines[n],f=T!=null&&T.length>0,!f);n--);if(!f)return 0;var E=T[T.length-1];return E.endIndex}getLineWidth(t){var n=this.lines[t];if(!n)return 0;var f=n[n.length-1];if(f==null)return 0;var T=f.lastX;return T}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,n=0,f=0,T=this.lines.length;f<T;f++)t=this.getLineWidth(f),t>n&&(n=t);return this.maxLinesWidth=n,n}getLineWidths(){for(var t=[],n=0,f=this.lines.length;n<f;n++)t.push(this.getLineWidth(n));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",n=this.pens,f=0,T=n.length;f<T;f++)t+=n[f].plainText;return t}get rawTextLength(){for(var t=0,n=this.pens,f=0,T=this.pens.length;f<T;f++)t+=n[f].rawTextLength;return t}getSliceTagText(t,n,f){var T=this.lastPen;if(T==null)return"";var E=T.endIndex;(t===void 0||t===0)&&(t=-1),(n===void 0||n===E)&&(n=E+1),f===void 0&&(f=!1);for(var h="",S,e,d,y,c,u,l,r=0,a=this.pens.length;r<a&&(S=this.pens[r],y=S.endIndex,!(!(y<=t)&&(S=this.pens[r],e=f?S.wrapText:S.plainText,u=S.prop,d=S.startIndex,c=d>=t&&y<=n,c||(e=e.substring(t-d,n-d)),this.tagToTextScope?h+=this.tagToText.call(this.tagToTextScope,e,u,l):h+=this.tagToText(e,u,l),l=u,y>=n)));r++);return h}get length(){return this.lines.length}set length(t){this.clear()}}var PEN_CONFIG={};const Rectangle$6=Phaser.Geom.Rectangle;var RectanglePool=new Stack;class HitAreaManager{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,n=this.hitAreas.length;t<n;t++)Clear(this.hitAreas[t].data);return RectanglePool.pushMultiple(this.hitAreas),this}add(t,n,f,T,E){var h=RectanglePool.pop();return h===null?h=new Rectangle$6(t,n,f,T):h.setTo(t,n,f,T),h.data=E,this.hitAreas.push(h),this}getFirst(t,n){for(var f=0,T=this.hitAreas.length;f<T;f++){var E=this.hitAreas[f];if(E.contains(t,n))return E}return null}getByKey(t){for(var n=0,f=this.hitAreas.length;n<f;n++){var T=this.hitAreas[n];if(T.data.key===t)return T}return null}drawBounds(t,n,f){n===void 0&&(n=16777215),f&&t.save().scaleCanvas(f.scaleX,f.scaleY).rotateCanvas(f.rotation).translateCanvas(f.x,f.y);for(var T=0,E=this.hitAreas.length;T<E;T++){var h=this.hitAreas[T];t.lineStyle(1,n).strokeRect(h.x,h.y,h.width,h.height)}return f&&t.restore(),this}}var SetInteractive$1=function(){this.parent.on("pointerdown",OnAreaDown,this).on("pointerup",OnAreaUp,this).on("pointermove",OnAreaOverOut,this).on("pointerover",OnAreaOverOut,this).on("pointerout",function(s,t){OnAreaOverOut.call(this,s,null,null,t)},this)},OnAreaDown=function(s,t,n,f){var T=this.hitAreaManager.getFirst(t,n);if(T!==null){var E=T.data.key;FireEvent$2.call(this,"areadown",E,s,t,n,f),T.data.isDown=!0}},OnAreaUp=function(s,t,n,f){var T=this.hitAreaManager.getFirst(t,n);if(T!==null){var E=T.data,h=E.key;if(FireEvent$2.call(this,"areaup",h,s,t,n,f),E.isDown){FireEvent$2.call(this,"areaclick",h,s,t,n,f);var S=E.url;S&&window.open(S,"_blank")}E.isDown=!1}},OnAreaOverOut=function(s,t,n,f){if(t===null){this.lastHitAreaKey!==null&&(FireEvent$2.call(this,"areaout",this.lastHitAreaKey,s,t,n,f),this.hitAreaManager.getByKey(this.lastHitAreaKey).isDown=!1,this.lastHitAreaKey=null);return}var T=this.hitAreaManager.getFirst(t,n),E=T?T.data.key:null;if(this.lastHitAreaKey!==E){if(this.lastHitAreaKey!==null){FireEvent$2.call(this,"areaout",this.lastHitAreaKey,s,t,n,f);var h=this.hitAreaManager.getByKey(this.lastHitAreaKey);this.urlTagCursorStyle&&h.data.url&&(this.scene.input.manager.canvas.style.cursor=""),h.isDown=!1}E!==null&&(FireEvent$2.call(this,"areaover",E,s,t,n,f),this.urlTagCursorStyle&&T.data.url&&(this.scene.input.manager.canvas.style.cursor=this.urlTagCursorStyle)),this.lastHitAreaKey=E}},FireEvent$2=function(s,t,n,f,T,E){this.parent.emit(`${s}-${t}`,n,f,T,E),this.parent.emit(s,t,n,f,T,E)};const NO_NEWLINE$1=CONST.NO_NEWLINE,RAW_NEWLINE=CONST.RAW_NEWLINE,WRAPPED_NEWLINE=CONST.WRAPPED_NEWLINE,NO_WRAP$1=CONST.NO_WRAP,WORD_WRAP=CONST.WORD_WRAP,CHAR_WRAP=CONST.CHAR_WRAP,splitRegExp=CONST.SPLITREGEXP;var WrapText=function(s,t,n,f,T,E){f<=0&&(n=NO_WRAP$1);var h=[];if(!s||!s.length)return h;for(var S=n===NO_WRAP$1,e=n===WORD_WRAP,d=s.split(splitRegExp),y,c,u,l=0,r=d.length;l<r;l++){if(y=d[l],u=l===r-1?NO_NEWLINE$1:RAW_NEWLINE,S){var a=t(y);h.push(E.getLine(y,a,u));continue}if(c=l===0?f-T:f,y.length<=100){var a=t(y);if(a<=c){h.push(E.getLine(y,a,u));continue}}var v,o;e?(v=y.split(" "),o=v[v.length-1]==="",o&&(v.length-=1)):v=y;for(var p,m,g,x="",C=0,M,R=e?t(" "):void 0,P=0,w=v.length;P<w;P++){if(p=v[P],m=t(p),g=P===w-1,e&&(!g||o)&&(p+=" ",m+=R),e&&m>f){x!==""?h.push(E.getLine(x,C,WRAPPED_NEWLINE)):P===0&&T>0&&h.push(E.getLine("",0,WRAPPED_NEWLINE)),h.push(...WrapText(p,t,CHAR_WRAP,f,0,E));var A=h.pop();x=A.text,C=A.width,E.freeLine(A),x===" "&&(x="",C=0);continue}M=C+m,M>c?(h.push(E.getLine(x,C,WRAPPED_NEWLINE)),x=p,C=m,c=f):(x+=p,C=M),g&&h.push(E.getLine(x,C,u))}}return h};const GetValue$3j=Phaser.Utils.Objects.GetValue,NO_WRAP=CONST.NO_WRAP,NO_NEWLINE=CONST.NO_NEWLINE;class CanvasText{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=GetValue$3j(t,"context",null),this.canvas=this.context.canvas,this.parser=GetValue$3j(t,"parser",null),this.defaultStyle=GetValue$3j(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new HitAreaManager,this.lastHitAreaKey=null,this.urlTagCursorStyle=null;var n=this.context;this.getTextWidth=function(f){return n.measureText(f).width}}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,n,f,T,E){if(E===void 0&&(E=this.penManager),E.clear(),t==="")return E;var h=this.parent.style;if(h.isWrapFitMode){var S=this.parent.padding;f=h.fixedWidth-S.left-S.right}for(var e=this.canvas,d=this.context,y=function(I){return d.measureText(I).width},c=0,u=0,l=h.wrapCallback,r=h.wrapCallbackScope,a=!0,v,o,p,m=this.parser.splitText(t),g,x,C=this.wrapTextLinesPool,M=0,R=m.length;M<R;M++)if(g=this.parser.tagTextToProp(m[M],o),v=g.plainText,o=g.prop,o.img){var P=this.imageManager.getOuterWidth(o.img);f>0&&n!==NO_WRAP&&f<c+P&&(E.addNewLinePen(),u+=T,c=0),E.addImagePen(c,u,P,Clone$1(o)),c+=P}else if(v!==""){if(d.save(),p=this.parser.propToContextStyle(this.defaultStyle,o),p.buildFont(),p.syncFont(e,d),p.syncStyle(e,d),!l)x=WrapText(v,y,n,f,c,C);else{x=l.call(r,v,y,f,c),typeof x=="string"&&(x=x.split(`
`));for(var G,w=0,A=x.length;w<A;w++)G=x[w],typeof G=="string"?x[w]=C.getLine(G,y(G),w<A-1?2:0):a=!1}for(var G,w=0,A=x.length;w<A;w++)G=x[w],E.addTextPen(G.text,c,u,G.width,Clone$1(o),G.newLineMode),G.newLineMode!==NO_NEWLINE?(c=0,u+=T):c+=G.width;a&&C.freeLines(x),x=null,d.restore()}for(var M=0,R=this.lines.length;M<R;M++){var O=this.lines[M],L=O[O.length-1];L&&(L.width+=this.parser.getStrokeThinkness(this.defaultStyle,L.prop))}return E}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,n=this.defaultStyle.maxLines;return n>0&&t>n&&(t=n),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,n=this.defaultStyle.lineHeight*t;return t>0&&(n-=this.defaultStyle.lineSpacing),n}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new PenManager({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,n,f){var T;if(t==null)T=this.penManager.plainText;else{var E=this.parser.splitText(t,1);T="";for(var h=0,S=E.length;h<S;h++)T+=E[h]}return(n!=null||f!=null)&&(n==null&&(n=0),f==null&&(f=T.length),T=T.substring(n,f)),T}getPenManager(t,n){if(t===void 0)return this.copyPenManager(n,this.penManager);n===void 0&&(n=this.newPenManager());var f=this.defaultStyle;return this.updatePenManager(t,f.wrapMode,f.wrapWidth,f.lineHeight,n),n}getText(t,n,f,T){if(t==null)return this.penManager.getSliceTagText(n,f,T);var E=this.tmpPenManager,h=this.defaultStyle;return this.updatePenManager(t,h.wrapMode,h.wrapWidth,h.lineHeight,E),E.getSliceTagText(n,f,T)}copyPenManager(t,n){return n===void 0&&(n=this.penManager),n.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var methods$z={setInteractive:SetInteractive$1};Object.assign(CanvasText.prototype,DrawMethods,methods$z);class WrapTextLinesPool extends Stack{freeLine(t){if(t)return this.push(t),this}freeLines(t){if(t)return this.pushMultiple(t),this}getLine(t,n,f){var T=this.pop();return T===null&&(T={}),T.text=t,T.width=n,T.newLineMode=f,T}}const IsPlainObject$O=Phaser.Utils.Objects.IsPlainObject,GetValue$3i=Phaser.Utils.Objects.GetValue;var AddImage$1=function(s,t){IsPlainObject$O(s)?(t=s,s=t.key):t===void 0&&(t={key:s}),t.hasOwnProperty("key")||(t.key=s);var n=t.key,f=t.frame,T=t.width,E=t.height;if(T===void 0||E===void 0){var h=this.textureManager.getFrame(n,f),S=h?h.cutWidth:0,e=h?h.cutHeight:0;T===void 0&&E===void 0?(T=S,E=e):T===void 0?T=S*(E/e):E===void 0&&(E=e*(T/S))}this.images[s]={key:n,frame:f,width:T,height:E,y:GetValue$3i(t,"y",0),left:GetValue$3i(t,"left",0),right:GetValue$3i(t,"right",0),originX:GetValue$3i(t,"originX",0),originY:GetValue$3i(t,"originY",0),tintFill:GetValue$3i(t,"tintFill",!1)}};const CanvasPool$1=Phaser.Display.Canvas.CanvasPool;var DrawFrameToCanvas=function(s,t,n,f,T,E,h,S){n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=s.cutWidth),E===void 0&&(E=s.cutHeight),S===void 0&&(S=!1),S&&(n=Math.round(n),f=Math.round(f));var e=t.getContext("2d",{willReadFrequently:!0});if(h){var d=CanvasPool$1.create(null,T,E,Phaser.CANVAS,!0),y=d.getContext("2d",{willReadFrequently:!0});y.drawImage(s.source.image,s.cutX,s.cutY,s.cutWidth,s.cutHeight,0,0,T,E),y.globalCompositeOperation="source-in",y.fillStyle=h,y.fillRect(0,0,T,E),e.drawImage(d,0,0,T,E,n,f,T,E),CanvasPool$1.remove(d)}else e.drawImage(s.source.image,s.cutX,s.cutY,s.cutWidth,s.cutHeight,n,f,T,E)},DrawImage=function(s,t,n,f,T,E){var h=this.get(s),S=this.textureManager.getFrame(h.key,h.frame),e=h.width,d=h.height;n+=h.left-h.originX*e,f+=h.y-h.originY*d,h.tintFill||(T=void 0),DrawFrameToCanvas(S,t.canvas,n,f,e,d,T,E)};class ImageManager{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,n){if(typeof t=="string")AddImage$1.call(this,t,n);else if(Array.isArray(t))for(var f=t,T=0,E=f.length;T<E;T++)AddImage$1.call(this,f[T]);else{var f=t;for(var t in f)AddImage$1.call(this,t,f[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var n=this.get(t);return n?n.width+n.left+n.right:0}getFrame(t){var n=this.get(t);return n?this.textureManager.getFrame(n.key,n.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var methods$y={draw:DrawImage};Object.assign(ImageManager.prototype,methods$y);var AppendText$1=function(s,t){!s&&s!==0&&(s=""),t===void 0&&(t=!0),Array.isArray(s)&&(s=s.join(`
`));var n;return t?n=`${this.text}
${s}`:n=`${this.text}${s}`,n!=this.text&&this.setText(n),this};const IsPlainObject$N=Phaser.Utils.Objects.IsPlainObject,AddToDOM=Phaser.DOM.AddToDOM,CanvasPool=Phaser.Display.Canvas.CanvasPool,GameObject$1=Phaser.GameObjects.GameObject,GetValue$3h=Phaser.Utils.Objects.GetValue,RemoveFromDOM$1=Phaser.DOM.RemoveFromDOM,SPLITREGEXP=CONST.SPLITREGEXP;var SharedPensPools=null,SharedLinesPool=null,SharedWrapTextLinesPool=null;class Text extends TextBase{constructor(t,n,f,T,E,h,S){if(IsPlainObject$N(n)){var e=n;n=GetValue$3h(e,"x",0),f=GetValue$3h(e,"y",0),T=GetValue$3h(e,"text",""),E=GetValue$3h(e,"style")}if(n===void 0&&(n=0),f===void 0&&(f=0),super(t,h),this.renderer=t.sys.game.renderer,this.setPosition(n,f),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=CanvasPool.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,E){if(E.hasOwnProperty("align")){var d=E.align;delete E.align,E.halign=d}E.hasOwnProperty("stroke")&&!E.hasOwnProperty("strokeThickness")&&(E.strokeThickness=1)}this.style=new TextStyle$1(this,E);var y=GetValue$3h(E,"images",void 0);y&&this.addImage(y),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var c=GetValue$3h(E,"sharedPool",!0),u,l,r;c?(SharedPensPools||(SharedPensPools={},SharedLinesPool=new Stack,SharedWrapTextLinesPool=new WrapTextLinesPool,this.scene.game.events.once("destroy",function(){SharedPensPools=null,SharedLinesPool=null,SharedWrapTextLinesPool=null})),SharedPensPools.hasOwnProperty(h)||(SharedPensPools[h]=new Stack),u=SharedPensPools[h],l=SharedLinesPool,r=SharedWrapTextLinesPool):(u=new Stack,l=new Stack,r=new WrapTextLinesPool),this.canvasText=new CanvasText({parent:this,context:this.context,parser:S,style:this.style,pensPool:u,linesPool:l,wrapTextLinesPool:r}),this.parser=S,this.initRTL(),E&&E.padding&&this.setPadding(E.padding),this.setText(T),this.setUrlTagCursorStyle(GetValue$3h(E,"urlTagCursorStyle","pointer")),GetValue$3h(E,"interactive",!1)&&this.setInteractive()}preDestroy(){RemoveFromDOM$1(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),CanvasPool.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",AddToDOM(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(t){t===void 0&&(t=!0);var n=this.style;if(n.rtl===t)return this;if(n.rtl=t,t?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",AddToDOM(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),n.halign==="left"?n.halign="right":n.halign==="right"&&(n.halign="left"),this._imageManager){var f=this._imageManager.images;for(var T in f)f[T].originX=1-f[T].originX}return this}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}setPadding(t,n,f,T){if(typeof t=="object"){var E=t,h=GetValue$3h(E,"x",null);h!==null?(t=h,f=h):(t=GetValue$3h(E,"left",0),f=GetValue$3h(E,"right",t));var S=GetValue$3h(E,"y",null);S!==null?(n=S,T=S):(n=GetValue$3h(E,"top",0),T=GetValue$3h(E,"bottom",n))}else t===void 0&&(t=0),n===void 0&&(n=t),f===void 0&&(f=t),T===void 0&&(T=n);return this.padding.left=t,this.padding.top=n,this.padding.right=f,this.padding.bottom=T,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var n=this.canvasText,f=this.style;t&&n.updatePenManager(this._text,f.wrapMode,f.wrapWidth,f.lineHeight);var T=this.padding,E,h,S=Math.ceil(n.linesWidth);f.fixedWidth===0?(this.width=S+T.left+T.right,E=S):(this.width=f.fixedWidth,E=this.width-T.left-T.right,E<S&&(E=S)),f.fixedHeight===0?(this.height=n.linesHeight+T.top+T.bottom,h=n.linesHeight):(this.height=f.fixedHeight,h=this.height-T.top-T.bottom,h<n.linesHeight&&(h=n.linesHeight));var e=this.width,d=this.height;this.updateDisplayOrigin();var y=f.resolution;e*=y,d*=y,e=Math.max(Math.ceil(e),1),d=Math.max(Math.ceil(d),1);var c=this.canvas,u=this.context;c.width!==e||c.height!==d?(c.width=e,c.height=d,this.frame.setSize(e,d)):u.clearRect(0,0,e,d),u.save(),u.scale(y,y);var l=this.style.rtl?T.right:T.left,r=T.top;n.draw(l,r,E,h),u.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(c,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),n={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=n,t}setInteractive(t,n,f){var T=!!this.input;return GameObject$1.prototype.setInteractive.call(this,t,n,f),T||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,n,f){return typeof t=="number"&&(f=n,n=t,t=void 0),t=this.canvasText.getText(t,n,f,!0),t.split(SPLITREGEXP)}getPlainText(t,n,f){return typeof t=="number"&&(f=n,n=t,t=void 0),this.canvasText.getPlainText(t,n,f)}getText(t,n,f,T){return typeof t=="number"&&(T=f,f=n,n=t,t=void 0),T===void 0&&(T=!1),this.canvasText.getText(t,n,f,T)}getSubString(t,n,f){return typeof t=="number"&&(f=n,n=t,t=void 0),this.getText(t,n,f)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,n){return this.canvasText.getPenManager(t,n)}setSize(t,n){return this.setFixedSize(t,n)}resize(t,n){return this.setFixedSize(t,n)}get imageManager(){return this._imageManager||(this._imageManager=new ImageManager(this.scene)),this._imageManager}addImage(t,n){return this.imageManager.add(t,n),this}drawAreaBounds(t,n){return this.canvasText.hitAreaManager.drawBounds(t,n,this),this}generateTexture(t,n,f,T,E){var h=this.canvas;return T===void 0?T=h.width:T*=this.resolution,E===void 0?E=h.height:E*=this.resolution,CopyCanvasToTexture(this.scene,h,t,n,f,T,E),this}}var methods$x={appendText:AppendText$1};Object.assign(Text.prototype,methods$x);var SplitText=function(s,t){for(var n=this.tagRegex,f=[],T=0,E=!1,h=!1;;){var S=n.RE_SPLITTEXT.exec(s);if(!S)break;var e=S[0];if(h)if(n.RE_ESC_CLOSE.test(e))h=!1;else continue;else if(E)if(n.RE_RAW_CLOSE.test(e))E=!1;else continue;else n.RE_ESC_OPEN.test(e)?h=!0:n.RE_RAW_OPEN.test(e)&&(E=!0);var d=n.RE_SPLITTEXT.lastIndex,y=d-e.length;if(T<y){var c=s.substring(T,y);f.push(c)}t===void 0&&f.push(e),T=d}var u=s.length;return T<u&&f.push(s.substring(T,u)),f};const PROP_REMOVE=!1,PROP_ADD=!0;var GETPROP_RESULT$1={plainText:null,prevProp:null},TagTextToProp=function(s,t){var n=this.tagRegex;t==null&&(t={});var f="";if(t.img&&UpdateProp(t,PROP_REMOVE,"img"),t.esc)n.RE_ESC_CLOSE.test(s)?UpdateProp(t,PROP_REMOVE,"esc"):f=s;else if(t.raw)n.RE_RAW_CLOSE.test(s)?UpdateProp(t,PROP_REMOVE,"raw"):f=s;else if(n.RE_ESC_OPEN.test(s))UpdateProp(t,PROP_ADD,"esc",!0);else if(n.RE_ESC_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"esc");else if(n.RE_RAW_OPEN.test(s))UpdateProp(t,PROP_ADD,"raw",!0);else if(n.RE_RAW_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"raw");else if(n.RE_BLOD_OPEN.test(s))UpdateProp(t,PROP_ADD,"b",!0);else if(n.RE_BLOD_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"b");else if(n.RE_ITALICS_OPEN.test(s))UpdateProp(t,PROP_ADD,"i",!0);else if(n.RE_ITALICS_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"i");else if(n.RE_WEIGHT_OPEN.test(s)){var T=s.match(n.RE_WEIGHT_OPEN);UpdateProp(t,PROP_ADD,"weight",T[1])}else if(n.RE_WEIGHT_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"weight");else if(n.RE_SIZE_OPEN.test(s)){var T=s.match(n.RE_SIZE_OPEN);UpdateProp(t,PROP_ADD,"size",`${T[1]}px`)}else if(n.RE_SIZE_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"size");else if(n.RE_COLOR_OPEN.test(s)){var T=s.match(n.RE_COLOR_OPEN);UpdateProp(t,PROP_ADD,"color",T[1])}else if(n.RE_COLOR_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"color");else if(n.RE_UNDERLINE_OPEN.test(s))UpdateProp(t,PROP_ADD,"u",!0);else if(n.RE_UNDERLINE_OPENC.test(s)){var T=s.match(n.RE_UNDERLINE_OPENC);UpdateProp(t,PROP_ADD,"u",T[1])}else if(n.RE_UNDERLINE_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"u");else if(n.RE_STRIKETHROUGH_OPEN.test(s))UpdateProp(t,PROP_ADD,"s",!0);else if(n.RE_STRIKETHROUGH_OPENC.test(s)){var T=s.match(n.RE_STRIKETHROUGH_OPENC);UpdateProp(t,PROP_ADD,"s",T[1])}else if(n.RE_STRIKETHROUGH_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"s");else if(n.RE_SHADOW_OPEN.test(s))UpdateProp(t,PROP_ADD,"shadow",!0);else if(n.RE_SHADOW_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"shadow");else if(n.RE_STROKE_OPEN.test(s))UpdateProp(t,PROP_ADD,"stroke",!0);else if(n.RE_STROKE_OPENC.test(s)){var T=s.match(n.RE_STROKE_OPENC);UpdateProp(t,PROP_ADD,"stroke",T[1])}else if(n.RE_STROKE_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"stroke");else if(n.RE_OFFSETY_OPEN.test(s)){var T=s.match(n.RE_OFFSETY_OPEN);UpdateProp(t,PROP_ADD,"y",parseFloat(T[1]))}else if(n.RE_OFFSETY_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"y");else if(n.RE_IMAGE_OPEN.test(s)){var T=s.match(n.RE_IMAGE_OPEN);UpdateProp(t,PROP_ADD,"img",T[1])}else if(n.RE_IMAGE_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"img");else if(n.RE_AREA_OPEN.test(s)){var T=s.match(n.RE_AREA_OPEN);UpdateProp(t,PROP_ADD,"area",T[1])}else if(n.RE_AREA_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"area");else if(n.RE_URL_OPEN.test(s)){var T=s.match(n.RE_URL_OPEN);UpdateProp(t,PROP_ADD,"url",T[1])}else if(n.RE_URL_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"url");else if(n.RE_ALIGN_OPEN.test(s)){var T=s.match(n.RE_ALIGN_OPEN);UpdateProp(t,PROP_ADD,"align",T[1])}else if(n.RE_ALIGN_CLOSE.test(s))UpdateProp(t,PROP_REMOVE,"align");else if(n.RE_ID_OPEN.test(s)){var T=s.match(n.RE_ID_OPEN);UpdateProp(t,PROP_ADD,"id",T[1])}else n.RE_ID_CLOSE.test(s)?UpdateProp(t,PROP_REMOVE,"id"):f=s;var E=GETPROP_RESULT$1;return E.plainText=f,E.prop=t,E},UpdateProp=function(s,t,n,f){return t===PROP_ADD?s[n]=f:s.hasOwnProperty(n)&&delete s[n],s},PropToContextStyle=function(s,t){var n=STYLE_RESULT$1;if(t.hasOwnProperty("img"))n.image=t.img;else{if(n.image=null,t.hasOwnProperty("family")?n.fontFamily=t.family:n.fontFamily=s.fontFamily,t.hasOwnProperty("size")){var f=t.size;typeof f=="number"&&(f=`${f}px`),n.fontSize=f}else n.fontSize=s.fontSize;n.fontStyle=GetFontStyle(t),t.hasOwnProperty("color")?n.color=t.color:n.color=s.color,t.hasOwnProperty("stroke")?t.stroke===!0?(n.stroke=s.stroke,n.strokeThickness=s.strokeThickness):(n.stroke=t.stroke,n.strokeThickness=s.strokeThickness):(n.stroke=s.stroke,n.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(n.shadowColor=s.shadowColor,n.shadowOffsetX=s.shadowOffsetX,n.shadowOffsetY=s.shadowOffsetY,n.shadowBlur=s.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0):(n.shadowColor=t.shadow,n.shadowOffsetX=s.shadowOffsetX,n.shadowOffsetY=s.shadowOffsetY,n.shadowBlur=s.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0):(n.shadowColor="#000",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowStroke=!1,n.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(n.underlineColor=s.underlineColor,n.underlineThickness=s.underlineThickness,n.underlineOffset=s.underlineOffset):(n.underlineColor=t.u,n.underlineThickness=s.underlineThickness,n.underlineOffset=s.underlineOffset):(n.underlineColor="#000",n.underlineThickness=0,n.underlineOffset=0),t.hasOwnProperty("s")?t.s===!0?(n.strikethroughColor=s.strikethroughColor,n.strikethroughThickness=s.strikethroughThickness,n.strikethroughOffset=s.strikethroughOffset):(n.strikethroughColor=t.s,n.strikethroughThickness=s.strikethroughThickness,n.strikethroughOffset=s.strikethroughOffset):(n.strikethroughColor="#000",n.strikethroughThickness=0,n.strikethroughOffset=0),n},GetFontStyle=function(s){var t=s.b,n=s.weight,f=s.i;return t||n||f?f?t?"bold italic":n?`${n} italic`:"italic":t?"bold":n.toString():""},STYLE_RESULT$1=new TextStyle$1,PropToTagText=function(s,t,n){n==null&&(n=EMPTYPROP);var f=this.delimiters[0],T=this.delimiters[1],E=[];for(var h in n)t.hasOwnProperty(h)||E.push(`${f}/${h}${T}`);for(var h in t){var S=t[h];if(n[h]!==S)switch(h){case"size":E.push(`${f}size=${S.replace("px","")}${T}`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"url":case"align":case"id":E.push(`${f}${h}=${S}${T}`);break;case"u":case"s":S===!0?E.push(`${f}${h}${T}`):E.push(`${f}${h}=${S}${T}`);break;default:E.push(`${f}${h}${T}`);break}}return E.push(s),E.join("")},EMPTYPROP={},EscapeRegex=function(s){return s.replace(re0,"\\$&").replace(re1,"\\x2d")},re0=/[|\\{}()[\]^$+*?.]/g,re1=/-/g,DelimiterLeftSave,DelimiterRightSave,TagRegexSave={},GetOpenTagRegString=function(s,t,n,f){return f===void 0?`${s}${n}${t}`:`${s}${n}=(${f})${t}`},GetCloseTagRegString=function(s,t,n){return`${s}/${n}${t}`},NUMBER_PARAM="[-.0-9]+",COLOR_PARAM="[a-z]+|#[0-9abcdef]+",STR_PARAM="[^\\]]+",SetDelimiters=function(s,t){if(t===void 0){var n=s;s=n[0],t=n[1]}if(DelimiterLeftSave===s&&DelimiterRightSave===t)return!1;DelimiterLeftSave=s,DelimiterRightSave=t,s=EscapeRegex(s),t=EscapeRegex(t);var f="esc",T=GetOpenTagRegString(s,t,f),E=GetCloseTagRegString(s,t,f),h="raw",S=GetOpenTagRegString(s,t,h),e=GetCloseTagRegString(s,t,h),d="b",y=GetOpenTagRegString(s,t,d),c=GetCloseTagRegString(s,t,d),u="i",l=GetOpenTagRegString(s,t,u),r=GetCloseTagRegString(s,t,u),a="weight",v=GetOpenTagRegString(s,t,a,NUMBER_PARAM),o=GetCloseTagRegString(s,t,a),p="size",m=GetOpenTagRegString(s,t,p,NUMBER_PARAM),g=GetCloseTagRegString(s,t,p),x="color",C=GetOpenTagRegString(s,t,x,COLOR_PARAM),M=GetCloseTagRegString(s,t,x),R="u",P=GetOpenTagRegString(s,t,R),w=GetOpenTagRegString(s,t,R,COLOR_PARAM),A=GetCloseTagRegString(s,t,R),G="s",O=GetOpenTagRegString(s,t,G),L=GetOpenTagRegString(s,t,G,COLOR_PARAM),I=GetCloseTagRegString(s,t,G),F="shadow",D=GetOpenTagRegString(s,t,F),V=GetCloseTagRegString(s,t,F),k="stroke",W=GetOpenTagRegString(s,t,k),X=GetOpenTagRegString(s,t,k,COLOR_PARAM),H=GetCloseTagRegString(s,t,k),$="y",z=GetOpenTagRegString(s,t,$,NUMBER_PARAM),b=GetCloseTagRegString(s,t,$),B="img",N=GetOpenTagRegString(s,t,B,STR_PARAM),U=GetCloseTagRegString(s,t,B),Y="area",K=GetOpenTagRegString(s,t,Y,STR_PARAM),Z=GetCloseTagRegString(s,t,Y),J="url",Q=GetOpenTagRegString(s,t,J,STR_PARAM),j=GetCloseTagRegString(s,t,J),q="align",tt=GetOpenTagRegString(s,t,q,STR_PARAM),_=GetCloseTagRegString(s,t,q),it="id",rt=GetOpenTagRegString(s,t,it,STR_PARAM),at=GetCloseTagRegString(s,t,it);return TagRegexSave.RE_ESC_OPEN=new RegExp(T,"i"),TagRegexSave.RE_ESC_CLOSE=new RegExp(E,"i"),TagRegexSave.RE_RAW_OPEN=new RegExp(S,"i"),TagRegexSave.RE_RAW_CLOSE=new RegExp(e,"i"),TagRegexSave.RE_BLOD_OPEN=new RegExp(y,"i"),TagRegexSave.RE_BLOD_CLOSE=new RegExp(c,"i"),TagRegexSave.RE_ITALICS_OPEN=new RegExp(l,"i"),TagRegexSave.RE_ITALICS_CLOSE=new RegExp(r,"i"),TagRegexSave.RE_WEIGHT_OPEN=new RegExp(v,"i"),TagRegexSave.RE_WEIGHT_CLOSE=new RegExp(o,"i"),TagRegexSave.RE_SIZE_OPEN=new RegExp(m,"i"),TagRegexSave.RE_SIZE_CLOSE=new RegExp(g,"i"),TagRegexSave.RE_COLOR_OPEN=new RegExp(C,"i"),TagRegexSave.RE_COLOR_CLOSE=new RegExp(M,"i"),TagRegexSave.RE_UNDERLINE_OPEN=new RegExp(P,"i"),TagRegexSave.RE_UNDERLINE_OPENC=new RegExp(w,"i"),TagRegexSave.RE_UNDERLINE_CLOSE=new RegExp(A,"i"),TagRegexSave.RE_STRIKETHROUGH_OPEN=new RegExp(O,"i"),TagRegexSave.RE_STRIKETHROUGH_OPENC=new RegExp(L,"i"),TagRegexSave.RE_STRIKETHROUGH_CLOSE=new RegExp(I,"i"),TagRegexSave.RE_SHADOW_OPEN=new RegExp(D,"i"),TagRegexSave.RE_SHADOW_CLOSE=new RegExp(V,"i"),TagRegexSave.RE_STROKE_OPEN=new RegExp(W,"i"),TagRegexSave.RE_STROKE_OPENC=new RegExp(X,"i"),TagRegexSave.RE_STROKE_CLOSE=new RegExp(H,"i"),TagRegexSave.RE_OFFSETY_OPEN=new RegExp(z,"i"),TagRegexSave.RE_OFFSETY_CLOSE=new RegExp(b,"i"),TagRegexSave.RE_IMAGE_OPEN=new RegExp(N,"i"),TagRegexSave.RE_IMAGE_CLOSE=new RegExp(U,"i"),TagRegexSave.RE_AREA_OPEN=new RegExp(K,"i"),TagRegexSave.RE_AREA_CLOSE=new RegExp(Z,"i"),TagRegexSave.RE_URL_OPEN=new RegExp(Q,"i"),TagRegexSave.RE_URL_CLOSE=new RegExp(j,"i"),TagRegexSave.RE_ALIGN_OPEN=new RegExp(tt,"i"),TagRegexSave.RE_ALIGN_CLOSE=new RegExp(_,"i"),TagRegexSave.RE_ID_OPEN=new RegExp(rt,"i"),TagRegexSave.RE_ID_CLOSE=new RegExp(at,"i"),TagRegexSave.RE_SPLITTEXT=new RegExp([S,e,T,E,y,c,l,r,v,o,m,g,C,M,P,w,A,O,L,I,D,V,W,X,H,z,b,N,U,K,Z,Q,j,tt,_,rt,at].join("|"),"ig"),!0},GetTagRegex=function(s,t){return s!==void 0&&SetDelimiters(s,t),Object.assign({},TagRegexSave)};const GetValue$3g=Phaser.Utils.Objects.GetValue;let Parser$2=class{constructor(t){var n=GetValue$3g(t,"delimiters","[]");this.tagRegex=GetTagRegex(n),this.delimiters=n}getStrokeThinkness(t,n){var f;return n.hasOwnProperty("stroke")?f=t.strokeThickness:f=0,f}setDelimiters(t,n){return SetDelimiters(t,n)&&(this.tagRegex=GetTagRegex()),this}};var methods$w={splitText:SplitText,tagTextToProp:TagTextToProp,propToContextStyle:PropToContextStyle,propToTagText:PropToTagText};Object.assign(Parser$2.prototype,methods$w);class BBCodeText extends Text{constructor(t,n,f,T,E){var h=new Parser$2(E);super(t,n,f,T,E,"rexBBCodeText",h)}setDelimiters(t,n){return this.parse.setDelimiters(t,n),this}}ObjectFactory.register("BBCodeText",function(s,t,n,f){var T=new BBCodeText(this.scene,s,t,n,f);return this.scene.add.existing(T),T});SetValue(window,"RexPlugins.UI.BBCodeText",BBCodeText);var GETPROP_RESULT={plainText:null,prevProp:null},STYLE_RESULT=new TextStyle$1;let Parser$1=class{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,n){this.tags[t]=n}getTag(t){return this.tags[t]}splitText(t,n){for(var f=[],T=0;;){var E=RE_SPLITTEXT.exec(t);if(!E)break;var h=E[0],S=RE_SPLITTEXT.lastIndex-h.length;if(T<S&&f.push(t.substring(T,S)),n===void 0)f.push(h);else if(n===1){if(RE_CLASS_HEADER.test(h)){var e=h.match(RE_CLASS);f.push(e[2])}else if(RE_STYLE_HEADER.test(h)){var e=h.match(RE_STYLE);f.push(e[2])}}T=RE_SPLITTEXT.lastIndex}var d=t.length;return T<d&&f.push(t.substring(T,d)),f}tagTextToProp(t,n){var f,T;if(RE_CLASS_HEADER.test(t)){var E=t.match(RE_CLASS);if(E!=null){var h=E[1],S=this.tags;S.hasOwnProperty(h)?T=S[h]:T={},T._class=h,f=E[2]}}else if(RE_STYLE_HEADER.test(t)){var E=t.match(RE_STYLE);if(E!=null){var e=E[1];T=StyleToProp(e),T._style=e,f=E[2]}}f==null&&(f=t),T==null&&(T={});var d=GETPROP_RESULT;return d.plainText=f,d.prop=T,d}propToContextStyle(t,n){var f=STYLE_RESULT;if(n.hasOwnProperty("img"))f.image=n.img;else{if(f.image=null,n.hasOwnProperty("family")||n.hasOwnProperty("fontFamily")||n.hasOwnProperty("font-family")){var T=n.hasOwnProperty("family")?n.family:n.hasOwnProperty("fontFamily")?n.fontFamily:n["font-family"];f.fontFamily=T}else f.fontFamily=t.fontFamily;if(n.hasOwnProperty("size")||n.hasOwnProperty("fontSize")||n.hasOwnProperty("font-size")){var E=n.hasOwnProperty("size")?n.size:n.hasOwnProperty("fontSize")?n.fontSize:n["font-size"];typeof E=="number"&&(E=`${E}px`),f.fontSize=E}else f.fontSize=t.fontSize;if(n.hasOwnProperty("style")||n.hasOwnProperty("fontStyle")||n.hasOwnProperty("font-style")){var h=n.hasOwnProperty("style")?n.style:n.hasOwnProperty("fontStyle")?n.fontStyle:n["font-style"];f.fontStyle=h}else f.fontStyle=t.fontStyle;if(n.hasOwnProperty("color")||n.hasOwnProperty("font-color")){var S=n.hasOwnProperty("color")?n.color:n["font-color"];f.color=S}else f.color=t.color;if(n.hasOwnProperty("stroke")){var e=n.stroke;f.stroke=e.hasOwnProperty("color")?e.color:t.stroke,f.strokeThickness=e.hasOwnProperty("thickness")?e.thickness:t.strokeThickness}else f.stroke=t.stroke,f.strokeThickness=t.strokeThickness}if(n.hasOwnProperty("shadow")){var d=n.shadow;f.shadowColor=d.hasOwnProperty("color")?d.color:t.shadowColor,f.shadowOffsetX=d.hasOwnProperty("offsetX")?d.offsetX:t.shadowOffsetX,f.shadowOffsetY=d.hasOwnProperty("offsetY")?d.offsetY:t.shadowOffsetY,f.shadowBlur=d.hasOwnProperty("blur")?d.blur:t.shadowBlur,f.shadowStroke=!0,f.shadowFill=!0}else f.shadowColor=t.shadowColor,f.shadowOffsetX=t.shadowOffsetX,f.shadowOffsetY=t.shadowOffsetY,f.shadowBlur=t.shadowBlur,f.shadowStroke=t.shadowStroke,f.shadowFill=t.shadowFill;if(n.hasOwnProperty("u")||n.hasOwnProperty("underline")){var y=n.hasOwnProperty("u")?n.u:n.underline;f.underlineColor=y.hasOwnProperty("color")?y.color:t.underlineColor,f.underlineThickness=y.hasOwnProperty("thickness")?y.thickness:t.underlineThickness,f.underlineOffset=y.hasOwnProperty("offset")?y.offset:t.underlineOffset}else f.underlineColor=t.underlineColor,f.underlineThickness=t.underlineThickness,f.underlineOffset=t.underlineOffset;if(n.hasOwnProperty("s")||n.hasOwnProperty("strikethrough")){var c=n.hasOwnProperty("s")?n.s:n.strikethrough;f.strikethroughColor=c.hasOwnProperty("color")?c.color:t.strikethroughColor,f.strikethroughThickness=c.hasOwnProperty("thickness")?c.thickness:t.strikethroughThickness,f.strikethroughOffset=c.hasOwnProperty("offset")?c.offset:t.strikethroughOffset}else f.strikethroughColor=t.strikethroughColor,f.strikethroughThickness=t.strikethroughThickness,f.strikethroughOffset=t.strikethroughOffset;return f}getStrokeThinkness(t,n){var f;if(n.hasOwnProperty("stroke")){var T=n.stroke;f=T.hasOwnProperty("thickness")?T.thickness:t.strokeThickness}else f=t.strokeThickness;return f}propToTagText(t,n,f){return n.hasOwnProperty("_class")?t===""&&this.isTextTag(n._class)?"":`<class='${n._class}'>${t}</class>`:n.hasOwnProperty("_style")?`<style='${n._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var n=this.tags[t];return n?n.img==null:!1}};var StyleToProp=function(s){s=s.split(";");for(var t={},n,f,T,E=0,h=s.length;E<h;E++)if(n=s[E].split(":"),f=n[0],T=n[1],!(isEmpty(f)||isEmpty(T))){switch(f){case"stroke":var S=T.split(" "),e=S.length;T={},e>=1&&(T.color=S[0]),e>=2&&(T.thickness=parseInt(S[1].replace("px","")));break;case"shadow":var S=T.split(" "),e=S.length;T={},e>=1&&(T.color=S[0]),e>=2&&(T.offsetX=parseInt(S[1].replace("px",""))),e>=3&&(T.offsetY=parseInt(S[2].replace("px",""))),e>=4&&(T.blur=parseInt(S[3].replace("px","")));break;case"u":case"underline":case"s":case"strikethrough":var S=T.split(" "),e=S.length;T={},e>=1&&(T.color=S[0]),e>=2&&(T.thickness=parseInt(S[1].replace("px",""))),e>=3&&(T.offset=parseInt(S[2].replace("px",""))),f==="underline"?f="u":f==="strikethrough"&&(f="s");break;case"y":T=parseFloat(T);break}t[f]=T}return t},isEmpty=function(s){return s=s.replace(RE_SPACE,""),s.length===0},RE_SPLITTEXT=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,RE_CLASS_HEADER=/<\s*class=/i,RE_CLASS=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,RE_STYLE_HEADER=/<\s*style=/i,RE_STYLE=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,RE_SPACE=/^\s+|\s+$/;const GetValue$3f=Phaser.Utils.Objects.GetValue;class TagText extends Text{constructor(t,n,f,T,E){var h=GetValue$3f(E,"tags",void 0),S=new Parser$1(h);super(t,n,f,T,E,"rexTagText",S)}addTag(t,n){return this.parser.addTag(t,n),this.updateText(!0)}addTags(t){for(var n in t)this.parser.addTag(n,t[n]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}ObjectFactory.register("tagText",function(s,t,n,f){var T=new TagText(this.scene,s,t,n,f);return this.scene.add.existing(T),T});SetValue(window,"RexPlugins.UI.TagText",TagText);const GetValue$3e=Phaser.Utils.Objects.GetValue;var GetPadding$1=function(s,t){return t===void 0?s:s[t]},SetPadding$1=function(s,t,n){s===void 0&&(s={}),t===void 0&&(t=0);var f=typeof t;return f==="string"?s[t]=n:f==="number"?(s.left=t,s.right=t,s.top=t,s.bottom=t):(s.left=GetValue$3e(t,"left",0),s.right=GetValue$3e(t,"right",0),s.top=GetValue$3e(t,"top",0),s.bottom=GetValue$3e(t,"bottom",0)),s};let Base$2=class{constructor(t,n){this.setParent(t),this.type=n,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,n){return!1}};Object.assign(Base$2.prototype,DataMethods$2);const RenderMethods={renderContent(){},render(){if(!this.willRender)return this;var s=this.context;if(s.save(),s.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,n=this.drawY;this.autoRound&&(t=Math.round(t),n=Math.round(n)),s.translate(t,n),s.scale(this.scaleX,this.scaleY),s.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),s.restore(),this}},RotateAround$9=Phaser.Math.RotateAround;var CanvasPositionToBobPosition=function(s,t,n,f){return f===void 0?f={}:f===!0&&(globPoint$1===void 0&&(globPoint$1={}),f=globPoint$1),f.x=(s-n.drawX)/n.scaleX,f.y=(t-n.drawY)/n.scaleY,n.rotation!==0&&RotateAround$9(f,0,0,-n.rotation),f},globPoint$1;const Rectangle$5=Phaser.Geom.Rectangle;var Contains$1=function(s,t){if(this.width===0||this.height===0)return!1;var n=CanvasPositionToBobPosition(s,t,this,!0);return GetBobBounds(this).contains(n.x,n.y)},GetBobBounds=function(s){bobBounds===void 0&&(bobBounds=new Rectangle$5);var t=s.drawTLX,n=s.drawTLY;return bobBounds.setTo(t,n,s.drawTRX-t,s.drawBLY-n),bobBounds},bobBounds;const RotateAround$8=Phaser.Math.RotateAround;var BobPositionToCanvasPosition=function(s,t,n,f){return f===void 0?f={}:f===!0&&(globPoint===void 0&&(globPoint={}),f=globPoint),f.x=t,f.y=n,s.rotation!==0&&RotateAround$8(f,0,0,s.rotation),f.x=f.x*s.scaleX+s.drawX,f.y=f.y*s.scaleY+s.drawY,f},globPoint;const TransformMatrix$1=Phaser.GameObjects.Components.TransformMatrix;var GameObjectLocalXYToWorldXY=function(s,t,n,f){f===void 0?f={}:f===!0&&(f=globOut$2);var T=t-s.width*s.originX,E=n-s.height*s.originY;return tempMatrix$2===void 0&&(tempMatrix$2=new TransformMatrix$1,parentMatrix$1=new TransformMatrix$1),s.parentContainer?s.getWorldTransformMatrix(tempMatrix$2,parentMatrix$1):tempMatrix$2.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY),tempMatrix$2.transformPoint(T,E,f),f},tempMatrix$2,parentMatrix$1,globOut$2={},BobPositionToWorldPosition=function(s,t,n,f,T){var E=BobPositionToCanvasPosition(t,n,f,!0),h=GameObjectLocalXYToWorldXY(s,E.x,E.y,T);return h},GetBobWorldPosition=function(s,t,n,f,T){typeof n!="number"&&(T=n,n=0,f=0);var E=t.drawCenterX+n,h=t.drawCenterY+f;return BobPositionToWorldPosition(s,t,E,h,T)},GetWorldPosition=function(s,t,n){return GetBobWorldPosition(this.parent,this,s,t,n)},Methods$i={contains:Contains$1,getWorldPosition:GetWorldPosition};Object.assign(Methods$i,RenderMethods);const DegToRad$d=Phaser.Math.DegToRad,RadToDeg$8=Phaser.Math.RadToDeg,GetValue$3d=Phaser.Utils.Objects.GetValue;class RenderBase extends Base$2{constructor(t,n){super(t,n),this.renderable=!0,this.scrollFactorX=1,this.scrollFactorY=1,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,n){return this.x=t,this.y=n,this}setInitialPosition(t,n){return this.x0=t,this.y0=n,this}setScrollFactorX(t){return this.scrollFactorX=t,this}setScrollFactorY(t){return this.scrollFactorY=t,this}setScrollFactor(t,n){return n===void 0&&(n=t),this.scrollFactorX=t,this.scrollFactorY=n,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return RadToDeg$8(this._rotation)}set angle(t){this.rotation=DegToRad$d(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,n){return n===void 0&&(n=!1),this.width=t,n&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,n){return n===void 0&&(n=!1),this.height=t,n&&(this.scaleX=this.scaleY),this}setScale(t,n){return n===void 0&&(n=t),this.scaleX=t,this.scaleY=n,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var n=GetValue$3d(t,"width",void 0),f=GetValue$3d(t,"height",void 0),T=GetValue$3d(t,"scaleX",void 0),E=GetValue$3d(t,"scaleY",void 0);return n!==void 0?f===void 0&&E===void 0?this.setWidth(n,!0):this.setWidth(n):T!==void 0&&this.setScaleX(T),f!==void 0?n===void 0&&T===void 0?this.setHeight(f,!0):this.setHeight(f):E!==void 0&&this.setScaleY(E),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){var t=this.x+this.leftSpace+this.offsetX-this.originX*this.width;return this.parent._textOX*this.scrollFactorX+t}get drawY(){var t=this.y+this.offsetY;return this.parent._textOY*this.scrollFactorY+t}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(RenderBase.prototype,Methods$i);var GetProperty=function(s,t,n){return t.hasOwnProperty(s)?t[s]:n[s]};const GetValue$3c=Phaser.Utils.Objects.GetValue;class Background extends RenderBase{constructor(t,n){super(t,"background"),this.setScrollFactor(0),this.setColor(GetValue$3c(n,"color",null),GetValue$3c(n,"color2",null),GetValue$3c(n,"horizontalGradient",!0)),this.setStroke(GetValue$3c(n,"stroke",null),GetValue$3c(n,"strokeThickness",2)),this.setCornerRadius(GetValue$3c(n,"cornerRadius",0),GetValue$3c(n,"cornerIteration",null))}set color(t){t=GetStyle(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=GetStyle(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,n,f){return f===void 0&&(f=!0),this.color=t,this.color2=n,this.horizontalGradient=f,this}set stroke(t){t=GetStyle(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,n){return t!=null&&n===void 0&&(n=2),this.stroke=t,this.strokeThickness=n,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,GetProperty("color2",t,this),GetProperty("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,GetProperty("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,GetProperty("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,n){return this.cornerRadius=t,this.cornerIteration=n,this}renderContent(){DrawRoundRectangleBackground(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const GetValue$3b=Phaser.Utils.Objects.GetValue;class InnerBounds extends RenderBase{constructor(t,n){super(t,"innerbounds"),this.setScrollFactor(0),this.setColor(GetValue$3b(n,"color",null),GetValue$3b(n,"color2",null),GetValue$3b(n,"horizontalGradient",!0)),this.setStroke(GetValue$3b(n,"stroke",null),GetValue$3b(n,"strokeThickness",2))}set color(t){t=GetStyle(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=GetStyle(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,n,f){return f===void 0&&(f=!0),this.color=t,this.color2=n,this.horizontalGradient=f,this}set stroke(t){t=GetStyle(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,n){return t!=null&&n===void 0&&(n=2),this.stroke=t,this.strokeThickness=n,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,GetValue$3b(t,"color2",null),GetValue$3b(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,GetValue$3b(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,n=t.left,f=t.top,T=this.parent.width-t.left-t.right,E=this.parent.height-t.top-t.bottom,h=this.context;if(this.color!=null){var S;if(this.color2!=null){var e;this.horizontalGradient?e=h.createLinearGradient(0,0,T,0):e=h.createLinearGradient(0,0,0,E),e.addColorStop(0,this.color),e.addColorStop(1,this.color2),S=e}else S=this.color;h.fillStyle=S,h.fillRect(n,f,T,E)}this.stroke!=null&&this.strokeThickness>0&&(h.strokeStyle=this.stroke,h.lineWidth=this.strokeThickness,h.strokeRect(n,f,T,E))}}const GetValue$3a=Phaser.Utils.Objects.GetValue;class TextStyle{constructor(t,n){this.parent=t,this.set(n)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(GetValue$3a(t,"bold",!1)),this.setItalic(GetValue$3a(t,"italic",!1)),this.setFontSize(GetValue$3a(t,"fontSize","16px")),this.setFontFamily(GetValue$3a(t,"fontFamily","Courier")),this.setColor(GetValue$3a(t,"color","#fff")),this.setStrokeStyle(GetValue$3a(t,"stroke",null),GetValue$3a(t,"strokeThickness",0)),this.setShadow(GetValue$3a(t,"shadowColor",null),GetValue$3a(t,"shadowOffsetX",0),GetValue$3a(t,"shadowOffsetY",0),GetValue$3a(t,"shadowBlur",0)),this.setOffset(GetValue$3a(t,"offsetX",0),GetValue$3a(t,"offsetY",0)),this.setSpace(GetValue$3a(t,"leftSpace",0),GetValue$3a(t,"rightSpace",0)),this.setAlign(GetValue$3a(t,"align",void 0)),this.setBackgroundColor(GetValue$3a(t,"backgroundColor",null)),this.setBackgroundHeight(GetValue$3a(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(GetValue$3a(t,"backgroundBottomY",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(GetProperty("stroke",t,this),GetProperty("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(GetProperty("shadowOffsetX",t,this),GetProperty("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new TextStyle(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=GetStyle(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,n){return this.stroke=GetStyle(t),n!==void 0&&(this.strokeThickness=n),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=GetStyle(t),this}setShadowOffset(t,n){return t===void 0&&(t=0),n===void 0&&(n=0),this.shadowOffsetX=t,this.shadowOffsetY=n,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,n,f,T){return this.setShadowColor(t).setShadowOffset(n,f).setShadowBlur(T),this}setBackgroundColor(t){return this.backgroundColor=GetStyle(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,n){return this.setOffsetX(t).setOffsetY(n),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,n){return this.setLeftSpace(t).setRightSpace(n),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var n=this.hasFill,f=this.hasStroke;return t.fillStyle=n?this.color:"#000",t.strokeStyle=f?this.stroke:"#000",t.lineWidth=f?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,n){return this.syncFont(t).syncStyle(t),t.measureText(n)}}var SetFixedSize=function(s,t){return s===void 0&&(s=0),t===void 0&&(t=0),this.fixedWidth===s&&this.fixedHeight===t?this:(this.fixedWidth=s,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(s>0?s:this.width,t>0?t:this.height),this)},SetPadding=function(s,t){var n=this.padding,f=n.left,T=n.right,E=n.top,h=n.bottom;return SetPadding$1(n,s,t),this.dirty=this.dirty||f!=n.left||T!=n.right||E!=n.top||h!=n.bottom,this},GetPadding=function(s){return GetPadding$1(this.padding,s)},ModifyTextStyle=function(s){return this.textStyle.modify(s),this},ModifyDefaultTextStyle=function(s){return this.defaultTextStyle.modify(s),this},ResetTextStyle=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},SetTestString=function(s){return this.testString=s,this};const RemoveItem$c=Phaser.Utils.Array.Remove;var RemoveChild$2=function(s){return this.poolManager.free(s),RemoveItem$c(this.children,s),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},RemoveChildren=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const RemoveItem$b=Phaser.Utils.Array.Remove;var PopChild=function(s){return RemoveItem$b(this.children,s),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},ClearContent=function(){return this.setText(),this},AddChild$3=function(s,t){var n=Array.isArray(s);return t===void 0||t===this.children.length?n?this.children.push(...s):this.children.push(s):n?this.children.splice(t,0,...s):this.children.splice(t,0,s),this.lastAppendedChildren.length=0,n?this.lastAppendedChildren.push(...s):this.lastAppendedChildren.push(s),this};const CharTypeName="text",ImageTypeName="image",DrawerTypeName="drawer",SpaceTypeName="space",CmdTypeName="command";var IsNewLineChar=function(s){return s.type===CharTypeName&&s.text===`
`},IsPageBreakChar=function(s){return s.type===CharTypeName&&s.text==="\f"},IsSpaceChar=function(s){return s.type===CharTypeName&&s.text===" "},IsChar=function(s){return s.type===CharTypeName},IsCommand=function(s){return s.type===CmdTypeName};class CharData extends RenderBase{constructor(t,n,f){super(t,CharTypeName),this.updateTextFlag=!1,this.style=new TextStyle(this,f),this.setText(n)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.clearTextSize();else{var n=this.style.getTextMetrics(this.context,this.text);this.textWidth=n.width;var f,T;"actualBoundingBoxAscent"in n?(f=n.actualBoundingBoxAscent,T=n.actualBoundingBoxDescent):(f=0,T=0),this.textHeight=f+T,this.ascent=f,this.descent=T}return this.updateTextFlag=!1,this}clearTextSize(){return this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0,this}copyTextSize(t){return this.textWidth=t.textWidth,this.textHeight=t.textHeight,this.ascent=t.ascent,this.descent=t.descent,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){return this.textWidth===0?!1:super.willRender}renderContent(){var t=this.context,n=this.style;if(n.hasBackgroundColor){t.fillStyle=n.backgroundColor;var f=this.drawTLX,T=this.drawTRX-f,E=n.backgroundBottomY;E==null&&(E=this.drawBLY);var h=n.backgroundHeight;h==null&&(h=E-this.drawTLY);var S=E-h;t.fillRect(f,S,T,h)}var e=n.hasFill,d=n.hasStroke;!e&&!d||(n.syncFont(t).syncStyle(t),d&&(n.syncShadow(t),t.strokeText(this.text,0,0)),e&&(n.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var CreateCharChild=function(s,t){t&&this.textStyle.modify(t);var n=this.poolManager.allocate(CharTypeName);return n===null?n=new CharData(this,s,this.textStyle):n.setParent(this).setActive().modifyStyle(this.textStyle).setText(s),n},CreateCharChildren=function(s,t){t&&this.textStyle.modify(t);for(var n=[],f=0,T=s.length;f<T;f++){var E=s.charAt(f),h=this.poolManager.allocate(CharTypeName);h===null?h=new CharData(this,E,this.textStyle):h.setParent(this).setActive().modifyStyle(this.textStyle).setText(E),n.push(h)}return n},AppendText=function(s,t){var n=this.createCharChildren(s,t);return this.addChild(n),this},SetText$2=function(s,t){return s===void 0&&(s=""),this.removeChildren(),AppendText.call(this,s,t),this.dirty=!0,this},InsertText=function(s,t,n){var f=this.createCharChildren(t,n);return s=this.getCharChildIndex(s,!0),this.addChild(f,s),this},RemoveText=function(s,t){t===void 0&&(t=1);for(var n=0;n<t;n++){var f=this.getCharChildIndex(s,!0);if(f===void 0)break;this.removeChild(this.children[f])}return this},GetText=function(s){var t="";return this.forEachCharChild(function(n){t+=n.text},void 0,s),t};Phaser.Display.Canvas.CanvasPool;class ImageData extends RenderBase{constructor(t,n,f){super(t,ImageTypeName),this.setTexture(n,f),this.color=void 0}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,n){return this.key=t,this.frame=n,this.frameObj=this.scene.sys.textures.getFrame(t,n),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,n){return n===void 0&&(n=!1),this.height=t,n&&(this.scaleX=this.scaleY),this}setColor(t){return this.color=t,this}modifyPorperties(t){return t.hasOwnProperty("color")&&this.setColor(t.color),super.modifyPorperties(t),this}renderContent(){DrawFrameToCanvas(this.frameObj,this.canvas,0,0,this.frameWidth,this.frameHeight,this.color,!1)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var CreateImageChild=function(s,t,n){var f=this.poolManager.allocate(ImageTypeName);return f===null?f=new ImageData(this,s,t):f.setParent(this).setActive().setTexture(s,t),f.modifyPorperties(n),f},AppendImage=function(s,t,n){var f=this.createImageChild(s,t,n);return this.addChild(f),this};class Drawer extends RenderBase{constructor(t,n,f,T){super(t,DrawerTypeName),this.setRenderCallback(n),this.setDrawerSize(f,T)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,n){return t===!0?(this.toLocalPosition=!1,t=void 0,n=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),n===void 0&&(n=t),this.drawerWidth=t,this.drawerHeight=n,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var CreateDrawerChild=function(s,t,n){var f=this.poolManager.allocate(DrawerTypeName);return f===null?f=new Drawer(this,s,t,n):f.setParent(this).setActive().setRenderCallback(s).setDrawerSize(t,n),f},AppendDrawer=function(s,t,n){var f=this.createDrawerChild(s,t,n);return this.addChild(f),this};let Space$1=class extends RenderBase{constructor(t,n){super(t,SpaceTypeName),this.setSpaceWidth(n)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}};var CreateSpaceChild=function(s){var t=this.poolManager.allocate(SpaceTypeName);return t===null?t=new Space$1(this,s):t.setParent(this).setActive().setSpaceWidth(s),t},AppendSpace=function(s){var t=this.createSpaceChild(s);return this.addChild(t),this};class Command extends Base$2{constructor(t,n,f,T,E){super(t,CmdTypeName),this.setName(n).setParameter(T).setCallback(f,E)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,n){return this.callback=t,this.scope=n,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var CreateCommandChild=function(s,t,n,f){var T=this.poolManager.allocate(CmdTypeName);return T===null?T=new Command(this,s,t,n,f):T.setParent(this).setActive().setName(s).setCallback(t,f).setParameter(n),T},AppendCommand$3=function(s,t,n,f){var T=this.createCommandChild(s,t,n,f);return this.addChild(T),this},SetWrapConfig=function(s){return s===void 0?s={}:typeof s=="object"&&(s=DeepClone(s)),this.wrapConfig=s,this},CreateWrapResultData=function(s){var t={callback:void 0,start:0,isLastPage:!1,maxLines:void 0,padding:void 0,letterSpacing:void 0,hAlign:void 0,vAlign:void 0,children:[],lines:[],maxLineWidth:0,linesHeight:0,lineHeight:void 0,maxLineHeight:0,linesWidth:0,lineWidth:void 0};return Object.assign(t,s)},GetWord=function(s,t,n,f){f===void 0&&(f={word:[],width:0}),f.word.length=0;for(var T=s.length,E=t,h=f.word,S=0;E<T;){var e=s[E];if(!e.renderable){h.push(e),E++;continue}var d=e.type===CharTypeName?e.text:null;if(d!==null&&d!==" "&&d!==`
`&&d!=="\f")h.push(e),S+=e.outerWidth,E++;else{E===t&&(h.push(e),S+=e.outerWidth);break}if(n)break}return f.width=S,f},GetChildrenAlign=function(s){for(var t=0,n=s.length;t<n;t++){var f=s[t];if(f.align!==void 0)return f.align}},OffsetChildren=function(s,t,n){if(!(t===0&&n===0))for(var f=0,T=s.length;f<T;f++){var E=s[f];E.renderable&&(E.x+=t,E.y+=n)}},AlignLines$1=function(s,t,n){var f=s.hAlign,T=s.vAlign,E,h,S=s.linesHeight;switch(T){case 1:case"center":h=(n-S)/2;break;case 2:case"bottom":h=n-S;break;default:h=0;break}for(var e=s.lines,d=0,y=e.length;d<y;d++){var c=e[d],u=c.width,l=c.children,r=GetChildrenAlign(l);switch(r===void 0&&(r=f),r){case 1:case"center":E=(t-u)/2;break;case 2:case"right":E=t-u;break;default:E=0;break}OffsetChildren(l,E,h)}},GetDefaultTextHeight=function(){var s=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,n;return"actualBoundingBoxAscent"in s?(t=s.actualBoundingBoxAscent,n=s.actualBoundingBoxDescent):(t=0,n=0),Result.ascent=t,Result.descent=n,Result.height=t+n,Result},Result={};const GetValue$39=Phaser.Utils.Objects.GetValue;var RunWordWrap$1=function(s){var t=GetValue$39(s,"start",0);SetPadding$1(this.wrapPadding,GetValue$39(s,"padding",0));var n=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,T=GetValue$39(s,"lineHeight"),E=GetValue$39(s,"ascent",T),h;if(T===void 0){var S=GetValue$39(s,"useDefaultTextHeight",!1);if(h=GetValue$39(s,"maxLines",0),this.fixedHeight>0&&!S){var U=this.fixedHeight-n;if(h>0)T=U/h;else{var e=GetDefaultTextHeight.call(this);T=e.height,E=e.ascent,h=Math.floor((U-E)/T)}}else{var e=GetDefaultTextHeight.call(this);T=e.height,E=e.ascent}}else if(this.fixedHeight>0){if(h=GetValue$39(s,"maxLines"),h===void 0){var U=this.fixedHeight-n;h=Math.floor(U/T)}}else h=GetValue$39(s,"maxLines",0);E===void 0&&(E=T);var d=h===0,y=GetValue$39(s,"wrapWidth",void 0);y===void 0&&(this.fixedWidth>0?y=this.fixedWidth-f:y=1/0);for(var c=GetValue$39(s,"letterSpacing",0),u=GetValue$39(s,"hAlign",0),l=GetValue$39(s,"vAlign",0),r=GetValue$39(s,"charWrap",!1),a=CreateWrapResultData({callback:"runWordWrap",start:t,padding:this.wrapPadding,letterSpacing:c,maxLines:h,hAlign:u,vAlign:l,ascent:E,lineHeight:T,wrapWidth:y,charWrap:r}),v=this.children,o=0,p=v.length;o<p;o++)v[o].setActive(!1);y+=c;for(var m=this.padding.left+this.wrapPadding.left,g=this.padding.top+this.wrapPadding.top+E,x=m,C=g,M=y,R=t,P=v.length,w=a.children,A=a.lines,G=[],O=0,L=0,I,F=!1;R<P;){I=GetWord(v,R,r,I);var D=I.word,V=D.length,k=I.width+V*c;R+=V;var W=IsNewLineChar(D[0]);F=IsPageBreakChar(D[0]);var X=W||F;if(M<k||X){if(X){var H=D[0];H.setActive().setPosition(x,C),w.push(H),G.push(H)}x=m,C+=T,M=y,A.push({children:G,width:O}),L=Math.max(L,O),O=0,G=[];var $=F||!d&&A.length===h;if($)break;if(X)continue}M-=k,O+=k;for(var o=0,p=D.length;o<p;o++){var z=D[o];z.setActive(),w.push(z),G.push(z),z.renderable&&(z.setPosition(x,C),x+=z.outerWidth+c)}}G.length>0&&(A.push({children:G,width:O}),L=Math.max(L,O)),a.start+=w.length,a.isLastPage=!F&&a.start===P,a.maxLineWidth=L,a.linesHeight=A.length*T;var b=this.fixedWidth>0?this.fixedWidth:a.maxLineWidth+f,B=this.fixedHeight>0?this.fixedHeight:a.linesHeight+n,N=b-f,U=B-n;AlignLines$1(a,N,U),this.setCanvasSize(b,B);for(var o=0,p=w.length;o<p;o++){var z=w[o];z.renderable&&(z.x0=z.x,z.y0=z.y)}return a};const Merge$2=Phaser.Utils.Objects.Merge;var RunWordWrap=function(s){return s===void 0&&(s={}),RunWordWrap$1.call(this,Merge$2(s,this.wrapConfig))},AlignLines=function(s,t,n){var f=s.hAlign,T=s.vAlign,E,h,S=s.rtl,e=s.lines,d=s.lineWidth,y=s.linesWidth;switch(f){case 1:case"center":E=(t-y)/2;break;case 2:case"right":E=t-y;break;default:E=0;break}S&&(E+=d);for(var c=0,u=e.length;c<u;c++){var l=e[S?u-c-1:c],r=l.children,a=l.height,v=GetChildrenAlign(r);switch(v===void 0&&(v=T),v){case 1:case"center":h=(n-a)/2;break;case 2:case"bottom":h=n-a;break;default:h=0;break}OffsetChildren(r,E,h),E+=d}};const GetValue$38=Phaser.Utils.Objects.GetValue;var RunVerticalWrap$1=function(s){var t=GetValue$38(s,"start",0);SetPadding$1(this.wrapPadding,GetValue$38(s,"padding",0));var n=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,f=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,T=GetValue$38(s,"lineWidth",void 0),E;if(T===void 0)if(E=GetValue$38(s,"maxLines",0),this.fixedWidth>0){var H=this.fixedWidth-f;T=H/E}else T=0;else if(this.fixedWidth>0){if(E=GetValue$38(s,"maxLines",void 0),E===void 0){var H=this.fixedWidth-f;E=Math.floor(H/T)+1}}else E=GetValue$38(s,"maxLines",0);var h=E===0,S=GetValue$38(s,"fixedCharacterHeight",void 0);if(S===void 0){var e=GetValue$38(s,"charPerLine",void 0);if(e!==void 0){var $=this.fixedHeight-n;S=Math.floor($/e)}}var d=GetValue$38(s,"wrapHeight",void 0);d===void 0&&(this.fixedHeight>0?d=this.fixedHeight-n:d=1/0);for(var y=GetValue$38(s,"letterSpacing",0),c=GetValue$38(s,"rtl",!0),u=GetValue$38(s,"hAlign",c?2:0),l=GetValue$38(s,"vAlign",0),r=CreateWrapResultData({callback:"runVerticalWrap",start:t,padding:this.wrapPadding,letterSpacing:y,maxLines:E,hAlign:u,vAlign:l,lineWidth:T,fixedCharacterHeight:S,wrapHeight:d,rtl:c}),a=this.children,v=0,o=a.length;v<o;v++)a[v].setActive(!1);d+=y;for(var p=this.padding.left+this.wrapPadding.left,m=this.padding.top+this.wrapPadding.top,g=p,x=m,C=d,M=t,R=a.length,P=r.children,w=r.lines,A=[],G=0,O=0;M<R;){var L=a[M];if(M++,!L.renderable){L.setActive(),P.push(L),A.push(L);continue}var I=(S!==void 0?S:L.height)+y,F=IsNewLineChar(L),D=IsPageBreakChar(L),V=F||D;if(C<I||V){F&&(L.setActive().setPosition(g,x).setOrigin(.5),P.push(L),A.push(L)),g=p,x=m,C=d,w.push({children:A,height:G}),O=Math.max(O,G),G=0,A=[];var k=D||!h&&w.length===E;if(k)break;if(V)continue}C-=I,G+=I,L.setActive().setPosition(g,x).setOrigin(.5),P.push(L),A.push(L),x+=I}A.length>0&&(w.push({children:A,height:G}),O=Math.max(O,G)),r.start+=P.length,r.isLastPage=r.start===R,r.maxLineHeight=O,r.linesWidth=w.length*T;var W=this.fixedWidth>0?this.fixedWidth:r.linesWidth+f,X=this.fixedHeight>0?this.fixedHeight:r.maxLineHeight+n,H=W-f,$=X-n;AlignLines(r,H,$),this.setCanvasSize(W,X);for(var v=0,o=P.length;v<o;v++){var L=P[v];L.renderable&&(L.x0=L.x,L.y0=L.y)}return r};const Merge$1=Phaser.Utils.Objects.Merge;var RunVerticalWrap=function(s){return s===void 0&&(s={}),RunVerticalWrap$1.call(this,Merge$1(s,this.wrapConfig))};const GetValue$37=Phaser.Utils.Objects.GetValue;var RunWrap=function(s){var t=GetValue$37(this.wrapConfig,"callback");return t||(t=GetValue$37(s,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,s)};const SetAlignMethods={setVAlign(s){return this.wrapConfig.vAlign=s,this},setHAlign(s){return this.wrapConfig.hAlign=s,this}},SetTextOXYMethods$1={setTextOX(s){return s===this._textOX?this:(this._textOX=s,this)},setTextOY(s){return s===this._textOY?this:(this._textOY=s,this)},setTextOXY(s,t){if(!(s===this._textOX&&t===this._textOY))return this._textOX=s,this._textOY=t,this},addTextOX(s){return this.setTextOX(this._textOX+s),this},addTextOY(s){return this.setTextOY(this._textOY+s),this},addTextOXY(s,t){return this.setTextOXY(this._textOX+s,this._textOY+t),this}};var RenderContent=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var s,t=0,n=this.children.length;t<n;t++)s=this.children[t],s.active&&s.render();this.innerBounds.active&&this.innerBounds.render()},ForEachChild=function(s,t,n){n===void 0&&(n=!0);for(var f=this.children,T=0,E=0,h=f.length;E<h;E++){var S=f[E];if(!(n&&!S.active)){var e;if(t?e=s.call(this,S,T,f):e=s(S,T,f),T++,e)break}}return this},ForEachRenderableChild=function(s,t,n){n===void 0&&(n=!0);for(var f=this.children,T=0,E=0,h=f.length;E<h;E++){var S=f[E];if(!(n&&!S.active)&&S.renderable&&!S.removed){var e;if(t?e=s.call(this,S,T,f):e=s(S,T,f),T++,e)break}}return this},ForEachCharChild=function(s,t,n){n===void 0&&(n=!0);for(var f=this.children,T=0,E=0,h=f.length;E<h;E++){var S=f[E];if(!(n&&!S.active)&&IsChar(S)&&!S.removed){var e;if(t?e=s.call(this,S,T,f):e=s(S,T,f),T++,e)break}}return this},GetChildren=function(){return this.children};const GetAll=Phaser.Utils.Array.GetAll;var GetActiveChildren=function(){return GetAll(this.children,"active",!0)},GetCharChildren=function(s,t){return t===void 0&&(t=[]),this.forEachCharChild(function(n){t.push(n)},void 0,s),t},GetLastAppendedChildren=function(){return this.lastAppendedChildren},GetBobCenterPosition=function(s,t,n,f){typeof t!="number"&&(f=t,t=0,n=0);var T=s.drawCenterX+t,E=s.drawCenterY+n;return BobPositionToCanvasPosition(s,T,E,f)};const GetDistance$1=Phaser.Math.Distance.BetweenPointsSquared;var GetNearestChild=function(s,t){var n={x:s,y:t},f=1/0,T=null;return this.forEachRenderableChild(function(E){var h=GetDistance$1(n,GetBobCenterPosition(E,!0));f>h&&(f=h,T=E)}),T},GetCharWorldPosition=function(s,t,n,f){return typeof s=="number"&&(s=this.getCharChild(s,!0)),GetBobWorldPosition(this,s,t,n,f)},SetToMinSize=function(){for(var s=this.children,t=0,n=0,f=0,T=s.length;f<T;f++){var E=s[f];if(!(!E.renderable||!E.active||!E.visible)){var h=E.x0!==void 0?E.x0:E.x,S=E.y0!==void 0?E.y0:E.y;t=Math.max(t,h),n=Math.max(n,S)}}var e=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,d=n+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==e||this.height!==d)&&(this.dirty=!0,this.setCanvasSize(e,d)),this},GetCharChildIndex=function(s,t){t===void 0&&(t=!0);for(var n=this.children,f=0,T=n.length;f<T;f++){var E=n[f];if(!(t&&!E.active)&&IsChar(E)&&!E.removed){if(s===0)return f;s--}}},GetCharChild=function(s,t){t===void 0&&(t=!0);for(var n=this.children,f=0,T=n.length;f<T;f++){var E=n[f];if(!(t&&!E.active)&&IsChar(E)&&!E.removed){if(s===0)return E;s--}}},GetCharIndex=function(s,t){if(typeof s!="number"&&(s=this.children.indexOf(s),s<0))return null;t===void 0&&(t=!0);var n=this.children;s>=n.length&&(s=n.length);for(var f=0,T=0;T<s;T++){var E=n[T];t&&!E.active||IsChar(E)&&!E.removed&&f++}return f},SetChildrenInteractiveEnable=function(s){return s===void 0&&(s=!0),this.childrenInteractiveEnable!==s&&(this.lastOverChild=null),this.childrenInteractiveEnable=s,this},GetFirstChildContains=function(f,t,n){for(var f=f,T=0,E=f.length;T<E;T++){var h=f[T];if(!(!h.active||!h.renderable)&&h.contains(t,n))return h}return null},SetChildrenInteractive$1=function(){return this.on("pointerdown",OnPointerDown$1,this).on("pointerdown",OnPointerUp$1,this).on("pointermove",OnPointOverOut,this).on("pointerover",OnPointOverOut,this).on("pointerout",function(s,t){OnPointOverOut.call(this,s,null,null,t)},this),this},OnPointerDown$1=function(s,t,n,f){if(this.childrenInteractiveEnable){var T=GetFirstChildContains(this.children,t,n);T&&this.emit("child.pointerdown",T,s,t,n,f)}},OnPointerUp$1=function(s,t,n,f){if(this.childrenInteractiveEnable){var T=GetFirstChildContains(this.children,t,n);T&&this.emit("child.pointerup",T,s,t,n,f)}},OnPointOverOut=function(s,t,n,f){if(this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,s,t,n,f),this.lastOverChild=null);return}var T=GetFirstChildContains(this.children,t,n);T!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,s,t,n,f),T!==null&&this.emit("child.pointerover",T,s,t,n,f),this.lastOverChild=T)}};const GameObject=Phaser.GameObjects.GameObject;var SetInteractive=function(s,t,n){var f=!!this.input;return GameObject.prototype.setInteractive.call(this,s,t,n),f||SetChildrenInteractive$1.call(this),this};const BringToTop=Phaser.Utils.Array.BringToTop,SendToBack=Phaser.Utils.Array.SendToBack,MoveUp=Phaser.Utils.Array.MoveUp,MoveDown=Phaser.Utils.Array.MoveDown,MoveAbove=Phaser.Utils.Array.MoveAbove,MoveBelow=Phaser.Utils.Array.MoveBelow,MoveChildMethods={moveChildToFist(s){return SendToBack(this.children,s),this},moveChildToLast(s){return BringToTop(this.children,s),this},movechildUp(s){return MoveUp(this.children,s),this},movechildDown(s){return MoveDown(this.children,s),this},movechildAbove(s,t){return MoveAbove(this.children,s,t),this},movechildBelow(s,t){return MoveBelow(this.children,s,t),this}},BackgroundMethods={setBackgroundColor(s,t,n){return this.background.setColor(s,t,n),this},setBackgroundStroke(s,t){return this.background.setStroke(s,t),this},setBackgroundCornerRadius(s,t){return this.background.setCornerRadius(s,t),this}},InnerBoundsMethods={setInnerBoundsColor(s,t,n){return this.innerBounds.setColor(s,t,n),this},setInnerBoundsStroke(s,t){return this.innerBounds.setStroke(s,t),this}};var Methods$h={setFixedSize:SetFixedSize,setPadding:SetPadding,getPadding:GetPadding,modifyTextStyle:ModifyTextStyle,modifyDefaultTextStyle:ModifyDefaultTextStyle,resetTextStyle:ResetTextStyle,setTestString:SetTestString,removeChild:RemoveChild$2,removeChildren:RemoveChildren,popChild:PopChild,clearContent:ClearContent,addChild:AddChild$3,createCharChild:CreateCharChild,createCharChildren:CreateCharChildren,setText:SetText$2,appendText:AppendText,insertText:InsertText,removeText:RemoveText,getText:GetText,createImageChild:CreateImageChild,appendImage:AppendImage,createDrawerChild:CreateDrawerChild,appendDrawer:AppendDrawer,createSpaceChild:CreateSpaceChild,appendSpace:AppendSpace,createCommandChild:CreateCommandChild,appendCommand:AppendCommand$3,setWrapConfig:SetWrapConfig,runWordWrap:RunWordWrap,runVerticalWrap:RunVerticalWrap,runWrap:RunWrap,renderContent:RenderContent,forEachChild:ForEachChild,forEachRenderableChild:ForEachRenderableChild,forEachCharChild:ForEachCharChild,getChildren:GetChildren,getActiveChildren:GetActiveChildren,getCharChildren:GetCharChildren,getLastAppendedChildren:GetLastAppendedChildren,getNearestChild:GetNearestChild,getCharWorldPosition:GetCharWorldPosition,setToMinSize:SetToMinSize,getCharChildIndex:GetCharChildIndex,getCharChild:GetCharChild,getCharIndex:GetCharIndex,setChildrenInteractiveEnable:SetChildrenInteractiveEnable,setInteractive:SetInteractive};Object.assign(Methods$h,MoveChildMethods,BackgroundMethods,InnerBoundsMethods,SetAlignMethods,SetTextOXYMethods$1);const GetFastValue$1=Phaser.Utils.Objects.GetFastValue;var Pools={};class PoolManager{constructor(t){this.pools=GetFastValue$1(t,"pools",Pools)}free(t){if(!this.pools)return this;var n=t.type;return this.pools.hasOwnProperty(n)||(this.pools[n]=new Stack),this.pools[n].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var n=0,f=t.length;n<f;n++)this.free(t[n]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const IsPlainObject$M=Phaser.Utils.Objects.IsPlainObject,GetValue$36=Phaser.Utils.Objects.GetValue;class DynamicText extends Canvas$1{constructor(t,n,f,T,E,h){IsPlainObject$M(n)?(h=n,n=GetValue$36(h,"x",0),f=GetValue$36(h,"y",0),T=GetValue$36(h,"width",0),E=GetValue$36(h,"height",0)):IsPlainObject$M(T)&&(h=T,T=GetValue$36(h,"width",0),E=GetValue$36(h,"height",0));var S=T===0?1:T,e=E===0?1:E;super(t,n,f,S,e),this.type="rexDynamicText",this.autoRound=!0,this.padding=SetPadding$1(),this.wrapPadding=SetPadding$1();var d=GetValue$36(h,"style",void 0);this.defaultTextStyle=new TextStyle(null,d),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(GetValue$36(h,"testString","|Mqgy")),this._textOX=0,this._textOY=0,this.background=new Background(this,GetValue$36(h,"background",void 0)),this.innerBounds=new InnerBounds(this,GetValue$36(h,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new PoolManager(h),this.setFixedSize(T,E),this.setPadding(GetValue$36(h,"padding",0)),this.setWrapConfig(GetValue$36(h,"wrap",void 0)),this.setChildrenInteractiveEnable(GetValue$36(h,"childrenInteractive",!1));var y=GetValue$36(h,"text",void 0);y&&this.setText(y)}updateTexture(){return this.renderContent(),super.updateTexture(),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,n){return this.setFixedSize(t,n),this}get textOX(){return this._textOX}set textOX(t){this.setTextOX(t)}get textOY(){return this._textOY}set textOY(t){this.setTextOY(t)}}Object.assign(DynamicText.prototype,Methods$h);ObjectFactory.register("dynamicText",function(s,t,n,f,T){var E=new DynamicText(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.DynamicText",DynamicText);const PropertyMethods$1={hasProperty(s){var t=this.gameObject;if(t.hasOwnProperty(s))return!0;var n=t[s];return n!==void 0},getProperty(s){return this.gameObject[s]},setProperty(s,t){return this.gameObject[s]=t,this},easeProperty(s,t,n,f,T,E,h,S){S===void 0&&(S=this.gameObject);var e=this.tweens,d=e[s];d&&d.remove();var y={targets:S,duration:n,ease:f,repeat:T,yoyo:E,onComplete:function(){e[s].remove(),e[s]=null,h&&h(S,s)},onCompleteScope:this};return y[s]=t,d=this.scene.tweens.add(y),d.timeScale=this.timeScale,e[s]=d,this},getTweenTask(s){return this.tweens[s]},freeTweens(){var s=this.tweens,t;for(var n in s)t=s[n],t&&t.remove(),s[n]=null;return this}},CallMethods$1={hasMethod(s){return typeof this.gameObject[s]=="function"},call(s,...t){if(!this.hasMethod(s))return this;var n=this.gameObject;return n[s].apply(n,t),this}},DataMethods$1={hasData(s){var t=this.gameObject;return t.data?t.data.has(s):!1},getData(s){return this.gameObject.getData(s)},setData(s,t){return this.gameObject.setData(s,t),this}};class BobBase{constructor(t,n,f){this.GOManager=t,this.tweens={},this.effects={},this.setGO(n,f)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,n){return t.setName(n),this.gameObject=t,this.name=n,this.freeTweens(),this}setTimeScale(t){var n=this.tweens;for(var f in n){var T=n[f];T&&(T.timeScale=t)}return this}}Object.assign(BobBase.prototype,PropertyMethods$1,CallMethods$1,DataMethods$1);var IsEmpty=function(s){for(var t in s)return!1;return!0},HasProperty=function(s,t){if(!s)return!1;if(s.hasOwnProperty(t))return!0;for(;s;){if(Object.getOwnPropertyDescriptor(s,t))return!0;s=s.__proto__}return!1},GetFXFactory=function(s){return s.preFX?s.preFX:s.postFX?s.postFX:null},AddClearEffectCallback=function(s,t){s._effectSwitchNames||(s._effectSwitchNames=[],s.clearAllEffects=function(){for(var n=s._effectSwitchNames,f=0,T=n.length;f<T;f++)s[n[f]]=null;return s},s.on("destroy",s.clearAllEffects,s)),s._effectSwitchNames.push(t)},AddBarrelProperties=function(s){if(HasProperty(s,"barrel"))return s;var t=GetFXFactory(s);if(!t)return s;var n;return Object.defineProperty(s,"barrel",{get:function(){return n},set:function(f){n!==f&&(n=f,n===null||n===!1?s._barrelEffect&&(t.remove(s._barrelEffect),s._barrelEffect=void 0):(s._barrelEffect||(s._barrelEffect=t.addBarrel()),s._barrelEffect.amount=n))}}),s.barrel=null,AddClearEffectCallback(s,"barrel"),s},AddColorMatrixEffectPropertiesBase=function(s,t,n){if(HasProperty(s,t))return s;var f=GetFXFactory(s);if(!f)return s;var T=`_${t}Effect`,E;return Object.defineProperty(s,t,{get:function(){return E},set:function(h){if(E!==h)if(E=h,E===null||E===!1)s[T]&&(f.remove(s[T]),s[T]=void 0);else{s[T]||(s[T]=f.addColorMatrix());var S=s[T];S[t](n===1?h:void 0)}}}),s[t]=null,AddClearEffectCallback(s,t),s},AddBlackWhiteProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"blackWhite"),s},AddBloomProperties=function(s){if(HasProperty(s,"bloomColor"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f=1,T=1,E=1,h=1,S=4;return Object.defineProperty(s,"bloomColor",{get:function(){return n},set:function(e){n!==e&&(n=e,n===null||n===!1?s._bloom&&(t.remove(s._bloom),s._bloom=void 0,t.setPadding(0)):(s._bloom||(s._bloom=t.addBloom(n,f,T,E,h,S),t.setPadding(Math.max(f,T)+1)),s._bloom.color=n))}}),Object.defineProperty(s,"bloomOffsetX",{get:function(){return f},set:function(e){if(f!==e&&(f=e,s._bloom)){var d=Math.max(f,T);t.setPadding(d+1),s._bloom.offsetX=f}}}),Object.defineProperty(s,"bloomOffsetY",{get:function(){return T},set:function(e){if(T!==e&&(T=e,s._bloom)){var d=Math.max(f,T);t.setPadding(d+1),s._bloom.offsetY=T}}}),Object.defineProperty(s,"bloomBlurStrength",{get:function(){return E},set:function(e){E!==e&&(E=e,s._bloom&&(s._bloom.blurStrength=E))}}),Object.defineProperty(s,"bloomStrength",{get:function(){return h},set:function(e){h!==e&&(h=e,s._bloom&&(s._bloom.strength=h))}}),Object.defineProperty(s,"bloomSteps",{get:function(){return S},set:function(e){S!==e&&(S=e,s._bloom&&(s._bloom.steps=S))}}),s.bloomColor=null,AddClearEffectCallback(s,"bloomColor"),s},AddBlurProperties=function(s){if(HasProperty(s,"blurColor"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f=0,T=1,E=1,h=1,S=4;return Object.defineProperty(s,"blurColor",{get:function(){return n},set:function(e){n!==e&&(n=e,n===null||n===!1?s._blur&&(t.remove(s._blur),s._blur=void 0,t.setPadding(0)):(s._blur||(s._blur=t.addBlur(f,T,E,h,n,S),t.setPadding(Math.max(T,E)+1)),s._blur.color=n))}}),Object.defineProperty(s,"blurQuality",{get:function(){return f},set:function(e){f!==e&&(f=e,s._blur&&(s._blur.quality=f))}}),Object.defineProperty(s,"blurX",{get:function(){return T},set:function(e){if(T!==e&&(T=e,s._blur)){var d=Math.max(T,E);t.setPadding(d+1),s._blur.x=T}}}),Object.defineProperty(s,"blurY",{get:function(){return E},set:function(e){if(E!==e&&(E=e,s._blur)){var d=Math.max(T,E);t.setPadding(d+1),s._blur.y=E}}}),Object.defineProperty(s,"blurStrength",{get:function(){return h},set:function(e){h!==e&&(h=e,s._blur&&(s._blur.strength=h))}}),Object.defineProperty(s,"blurSteps",{get:function(){return S},set:function(e){S!==e&&(S=e,s._blur&&(s._blur.steps=S))}}),s.blurColor=null,AddClearEffectCallback(s,"blurColor"),s},AddBokehProperties=function(s){if(HasProperty(s,"bokehRadius"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f=1,T=.2;return Object.defineProperty(s,"bokehRadius",{get:function(){return n},set:function(E){n!==E&&(n=E,n===null||n===!1?s._bokeh&&(t.remove(s._bokeh),s._bokeh=void 0):(s._bokeh||(s._bokeh=t.addBokeh(n,f,T)),s._bokeh.radius=n))}}),Object.defineProperty(s,"bokehAmount",{get:function(){return f},set:function(E){f!==E&&(f=E,s._bokeh&&(s._bokeh.amount=f))}}),Object.defineProperty(s,"bokehContrast",{get:function(){return T},set:function(E){T!==E&&(T=E,s._bokeh&&(s._bokeh.contrast=T))}}),s.bokehRadius=null,AddClearEffectCallback(s,"bokehRadius"),s},AddBrightnessProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"brightness",1),s},AddBrownProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"brown"),s},AddCircleProperties=function(s){if(HasProperty(s,"circleColor"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f=8,T=0,E=.4,h=1,S=.005;return Object.defineProperty(s,"circleColor",{get:function(){return n},set:function(e){n!==e&&(n=e,n===null||n===!1?s._circle&&(t.remove(s._circle),s._circle=void 0):(s._circle||(s._circle=t.addCircle(f,n,T,h,S),s.circleBackgroundAlpha=E),s._circle.color=n))}}),Object.defineProperty(s,"circleThickness",{get:function(){return f},set:function(e){f!==e&&(f=e,s._circle&&(s._circle.thickness=f))}}),Object.defineProperty(s,"circleBackgroundColor",{get:function(){return T},set:function(e){T!==e&&(T=e,s._circle&&(s._circle.backgroundColor=T))}}),Object.defineProperty(s,"circleBackgroundAlpha",{get:function(){return E},set:function(e){E!==e&&(E=e,s._circle&&(s._circle.glcolor2[3]=E))}}),Object.defineProperty(s,"circleScale",{get:function(){return h},set:function(e){h!==e&&(h=e,s._circle&&(s._circle.scale=h))}}),Object.defineProperty(s,"circleFeather",{get:function(){return S},set:function(e){S!==e&&(S=e,s._circle&&(s._circle.feather=S))}}),s.circleColor=null,AddClearEffectCallback(s,"circleColor"),s},AddContrastProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"contrast",1),s},AddDesaturateProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"desaturate",1),s},AddDesaturateLuminanceProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"desaturateLuminance"),s},AddDisplacementProperties=function(s){if(HasProperty(s,"displacementKey"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f=.005,T=.005;return Object.defineProperty(s,"displacementKey",{get:function(){return n},set:function(E){n!==E&&(n=E,n===null||n===!1?s._displacement&&(t.remove(s._displacement),s._displacement=void 0):(s._displacement||(s._displacement=t.addDisplacement(n,f,T)),s._displacement.setTexture(n)))}}),Object.defineProperty(s,"displacementX",{get:function(){return f},set:function(E){f!==E&&(f=E,s._displacement&&(s._displacement.x=f))}}),Object.defineProperty(s,"displacementY",{get:function(){return T},set:function(E){T!==E&&(T=E,s._displacement&&(s._displacement.y=T))}}),s.displacementKey=null,AddClearEffectCallback(s,"displacementKey"),s},AddGlowProperties=function(s){if(HasProperty(s,"glowColor"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f=4,T=0;return Object.defineProperty(s,"glowColor",{get:function(){return n},set:function(E){n!==E&&(n=E,n===null||n===!1?s._glow&&(t.remove(s._glow),s._glow=void 0,t.setPadding(0)):(s._glow||(s._glow=t.addGlow(n,f,T),t.setPadding(f+1)),s._glow.color=n))}}),Object.defineProperty(s,"glowOuterStrength",{get:function(){return f},set:function(E){f!==E&&(f=E,s._glow&&(t.setPadding(f+1),s._glow.outerStrength=f))}}),Object.defineProperty(s,"glowInnerStrength",{get:function(){return T},set:function(E){T!==E&&(T=E,s._glow&&(s._glow.innerStrength=T))}}),s.glowColor=null,AddClearEffectCallback(s,"glowColor"),s},AddGradientProperties=function(s){if(HasProperty(s,"gradientColor"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f,T=.5,E=0,h=0,S=0,e=1,d=0;return Object.defineProperty(s,"gradientColor",{get:function(){return[n,f]},set:function(y){var c,u;y===null||y===!1?(c=null,u=null):(c=y[0],u=y[1]),!(n===c&&f===u)&&(n=c,f=u,n===null||n===!1?s._gradient&&(t.remove(s._gradient),s._gradient=void 0):(s._gradient||(s._gradient=t.addGradient(n,f,T,E,h,S,e,d)),s._gradient.color1=n,s._gradient.color2=f))}}),Object.defineProperty(s,"gradientColor1",{get:function(){return n},set:function(y){if(y===null||y===!1){s.gradientColor=y;return}n!==y&&(n=y,s._gradient&&(s._gradient.color1=n))}}),Object.defineProperty(s,"gradientColor2",{get:function(){return f},set:function(y){if(y===null||y===!1){s.gradientColor=y;return}f!==y&&(f=y,s._gradient&&(s._gradient.color2=f))}}),Object.defineProperty(s,"gradientAlpha",{get:function(){return T},set:function(y){T!==y&&(T=y,s._gradient&&(s._gradient.alpha=T))}}),Object.defineProperty(s,"gradientFromX",{get:function(){return E},set:function(y){E!==y&&(E=y,s._gradient&&(s._gradient.fromX=E))}}),Object.defineProperty(s,"gradientFromY",{get:function(){return h},set:function(y){h!==y&&(h=y,s._gradient&&(s._gradient.fromY=h))}}),Object.defineProperty(s,"gradientToX",{get:function(){return S},set:function(y){S!==y&&(S=y,s._gradient&&(s._gradient.toX=S))}}),Object.defineProperty(s,"gradientToY",{get:function(){return e},set:function(y){e!==y&&(e=y,s._gradient&&(s._gradient.toY=e))}}),Object.defineProperty(s,"gradientSize",{get:function(){return d},set:function(y){d!==y&&(d=y,s._gradient&&(s._gradient.size=d))}}),s.gradientColor=null,AddClearEffectCallback(s,"gradientColor"),s},AddGrayscaleProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"grayscale",1),s},AddHueProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"hue",1),s},AddKodachromeProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"kodachrome"),s},AddLSDProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"lsd"),s},AddNegativeProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"negative"),s},AddPixelateProperties=function(s){if(HasProperty(s,"pixelate"))return s;var t=GetFXFactory(s);if(!t)return s;var n;return Object.defineProperty(s,"pixelate",{get:function(){return n},set:function(f){n!==f&&(n=f,n===null||n===!1?s._pixelateEffect&&(t.remove(s._pixelateEffect),s._pixelateEffect=void 0):(s._pixelateEffect||(s._pixelateEffect=t.addPixelate()),s._pixelateEffect.amount=n))}}),s.pixelate=null,AddClearEffectCallback(s,"pixelate"),s},AddPolaroidProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"polaroid"),s},AddRevealProperties=function(s){if(HasProperty(s,"revealLeft"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f,T,E,h=.1,S=function(){n=null,f=null,T=null,E=null},e=function(d){d._revealEffect&&(t.remove(d._revealEffect),d._revealEffect=void 0)};return Object.defineProperty(s,"revealLeft",{get:function(){return n},set:function(d){n!==d&&(S(),n=d,n===null||n===!1?e(s):(s._revealEffect||(s._revealEffect=t.addReveal(h,0,0)),s._revealEffect.direction=1,s._revealEffect.axis=0,s._revealEffect.progress=n))}}),Object.defineProperty(s,"revealRight",{get:function(){return f},set:function(d){f!==d&&(S(),f=d,f===null||f===!1?e(s):(s._revealEffect||(s._revealEffect=t.addReveal(h,0,0)),s._revealEffect.direction=0,s._revealEffect.axis=0,s._revealEffect.progress=f))}}),Object.defineProperty(s,"revealUp",{get:function(){return T},set:function(d){T!==d&&(S(),T=d,T===null||T===!1?e(s):(s._revealEffect||(s._revealEffect=t.addReveal(h,0,0)),s._revealEffect.direction=1,s._revealEffect.axis=1,s._revealEffect.progress=T))}}),Object.defineProperty(s,"revealDown",{get:function(){return E},set:function(d){E!==d&&(S(),E=d,E===null||E===!1?e(s):(s._revealEffect||(s._revealEffect=t.addReveal(h,0,0)),s._revealEffect.direction=0,s._revealEffect.axis=1,s._revealEffect.progress=E))}}),Object.defineProperty(s,"revealWidth",{get:function(){return h},set:function(d){h!==d&&(h=d,s._revealEffect&&(s._revealEffect.wipeWidth=h))}}),s.revealLeft=null,AddClearEffectCallback(s,"revealLeft"),AddClearEffectCallback(s,"revealRight"),AddClearEffectCallback(s,"revealUp"),AddClearEffectCallback(s,"revealDown"),s},AddSaturateProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"saturate",1),s},AddSepiaProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"sepia"),s},AddShadowProperties=function(s){if(HasProperty(s,"shadowColor"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f=0,T=0,E=.1,h=1,S=6,e=1;return Object.defineProperty(s,"shadowColor",{get:function(){return n},set:function(d){n!==d&&(n=d,n===null||n===!1?s._shadow&&(t.remove(s._shadow),s._shadow=void 0):(s._shadow||(s._shadow=t.addShadow(f,T,E,h,n,S,e)),s._shadow.color=n))}}),Object.defineProperty(s,"shadowX",{get:function(){return f},set:function(d){f!==d&&(f=d,s._shadow&&(s._shadow.x=f))}}),Object.defineProperty(s,"shadowY",{get:function(){return T},set:function(d){T!==d&&(T=d,s._shadow&&(s._shadow.y=T))}}),Object.defineProperty(s,"decay",{get:function(){return E},set:function(d){E!==d&&(E=d,s._shadow&&(s._shadow.decay=E))}}),Object.defineProperty(s,"shadowPower",{get:function(){return h},set:function(d){h!==d&&(h=d,s._shadow&&(s._shadow.power=h))}}),Object.defineProperty(s,"shadowSamples",{get:function(){return S},set:function(d){S!==d&&(S=d,s._shadow&&(s._shadow.samples=S))}}),Object.defineProperty(s,"shadowIntensity",{get:function(){return e},set:function(d){e!==d&&(e=d,s._shadow&&(s._shadow.intensity=e))}}),s.shadowColor=null,AddClearEffectCallback(s,"shadowColor"),s},AddShiftToBGRProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"shiftToBGR"),s},AddShineProperties=function(s){if(HasProperty(s,"shineSpeed"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f=.5,T=3;return Object.defineProperty(s,"shineSpeed",{get:function(){return n},set:function(E){n!==E&&(n=E,n===null||n===!1?s._shine&&(t.remove(s._shine),s._shine=void 0):(s._shine||(s._shine=t.addShine(n,f,T)),s._shine.speed=n))}}),Object.defineProperty(s,"shineLineWidth",{get:function(){return f},set:function(E){f!==E&&(f=E,s._shine&&(s._shine.lineWidth=f))}}),Object.defineProperty(s,"shineGradient",{get:function(){return T},set:function(E){T!==E&&(T=E,s._shine&&(s._shine.gradient=T))}}),s.shineSpeed=null,AddClearEffectCallback(s,"shineSpeed"),s},AddTechnicolorProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"technicolor"),s},AddTiltShiftProperties=function(s){if(HasProperty(s,"tiltShiftRadius"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f=1,T=.2,E=1,h=1,S=1;return Object.defineProperty(s,"tiltShiftRadius",{get:function(){return n},set:function(e){n!==e&&(n=e,n===null||n===!1?s._tiltShift&&(t.remove(s._tiltShift),s._tiltShift=void 0):(s._tiltShift||(s._tiltShift=t.addTiltShift(n,f,T,E,h,S)),s._tiltShift.radius=n))}}),Object.defineProperty(s,"tiltShiftAmount",{get:function(){return f},set:function(e){f!==e&&(f=e,s._tiltShift&&(s._tiltShift.amount=f))}}),Object.defineProperty(s,"tiltShiftContrast",{get:function(){return T},set:function(e){T!==e&&(T=e,s._tiltShift&&(s._tiltShift.contrast=T))}}),Object.defineProperty(s,"tiltShiftBlurX",{get:function(){return E},set:function(e){E!==e&&(E=e,s._tiltShift&&(s._tiltShift.blurX=E))}}),Object.defineProperty(s,"tiltShiftBlurY",{get:function(){return h},set:function(e){h!==e&&(h=e,s._tiltShift&&(s._tiltShift.blurY=h))}}),Object.defineProperty(s,"tiltShiftStrength",{get:function(){return S},set:function(e){S!==e&&(S=e,s._tiltShift&&(s._tiltShift.strength=S))}}),s.tiltShiftRadius=null,AddClearEffectCallback(s,"tiltShiftRadius"),s},AddVignetteProperties=function(s){if(HasProperty(s,"vignetteColor"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f=.5,T=.5,E=.5;return Object.defineProperty(s,"vignetteRadius",{get:function(){return n},set:function(h){n!==h&&(n=h,n===null||n===!1?s._vignette&&(t.remove(s._vignette),s._vignette=void 0):(s._vignette||(s._vignette=t.addVignette(f,T,n,E)),s._vignette.radius=n))}}),Object.defineProperty(s,"vignetteX",{get:function(){return f},set:function(h){f!==h&&(f=h,s._vignette&&(s._vignette.x=f))}}),Object.defineProperty(s,"vignetteY",{get:function(){return T},set:function(h){T!==h&&(T=h,s._vignette&&(s._vignette.y=T))}}),Object.defineProperty(s,"vignetteStrength",{get:function(){return E},set:function(h){E!==h&&(E=h,s._vignette&&(s._vignette.strength=E))}}),s.vignetteRadius=null,AddClearEffectCallback(s,"vignetteRadius"),s},AddVintagePinholeProperties=function(s){return AddColorMatrixEffectPropertiesBase(s,"vintagePinhole"),s},AddWipeProperties=function(s){if(HasProperty(s,"wipeLeft"))return s;var t=GetFXFactory(s);if(!t)return s;var n,f,T,E,h=.1,S=function(){n=null,f=null,T=null,E=null},e=function(d){d._wipeEffect&&(t.remove(d._wipeEffect),d._wipeEffect=void 0)};return Object.defineProperty(s,"wipeLeft",{get:function(){return n},set:function(d){n!==d&&(S(),n=d,n===null||n===!1?e(s):(s._wipeEffect||(s._wipeEffect=t.addWipe(h,0,0)),s._wipeEffect.direction=1,s._wipeEffect.axis=0,s._wipeEffect.progress=n))}}),Object.defineProperty(s,"wipeRight",{get:function(){return f},set:function(d){f!==d&&(S(),f=d,f===null||f===!1?e(s):(s._wipeEffect||(s._wipeEffect=t.addWipe(h,0,0)),s._wipeEffect.direction=0,s._wipeEffect.axis=0,s._wipeEffect.progress=f))}}),Object.defineProperty(s,"wipeUp",{get:function(){return T},set:function(d){T!==d&&(S(),T=d,T===null||T===!1?e(s):(s._wipeEffect||(s._wipeEffect=t.addWipe(h,0,0)),s._wipeEffect.direction=1,s._wipeEffect.axis=1,s._wipeEffect.progress=T))}}),Object.defineProperty(s,"wipeDown",{get:function(){return E},set:function(d){E!==d&&(S(),E=d,E===null||E===!1?e(s):(s._wipeEffect||(s._wipeEffect=t.addWipe(h,0,0)),s._wipeEffect.direction=0,s._wipeEffect.axis=1,s._wipeEffect.progress=E))}}),Object.defineProperty(s,"wipeWidth",{get:function(){return h},set:function(d){h!==d&&(h=d,s._wipeEffect&&(s._wipeEffect.wipeWidth=h))}}),s.wipeLeft=null,AddClearEffectCallback(s,"wipeLeft"),AddClearEffectCallback(s,"wipeRight"),AddClearEffectCallback(s,"wipeUp"),AddClearEffectCallback(s,"wipeDown"),s};const EffectMap={barrel:AddBarrelProperties,blackWhite:AddBlackWhiteProperties,bloom:AddBloomProperties,blur:AddBlurProperties,bokeh:AddBokehProperties,brightness:AddBrightnessProperties,brown:AddBrownProperties,circle:AddCircleProperties,contrast:AddContrastProperties,desaturate:AddDesaturateProperties,desaturateLuminance:AddDesaturateLuminanceProperties,displacement:AddDisplacementProperties,glow:AddGlowProperties,gradient:AddGradientProperties,grayscale:AddGrayscaleProperties,hue:AddHueProperties,kodachrome:AddKodachromeProperties,lsd:AddLSDProperties,negative:AddNegativeProperties,pixelate:AddPixelateProperties,polaroid:AddPolaroidProperties,reveal:AddRevealProperties,saturate:AddSaturateProperties,sepia:AddSepiaProperties,shadow:AddShadowProperties,shiftToBGR:AddShiftToBGRProperties,shine:AddShineProperties,technicolor:AddTechnicolorProperties,tiltShift:AddTiltShiftProperties,vignette:AddVignetteProperties,vintagePinhole:AddVintagePinholeProperties,wipe:AddWipeProperties};var AddEffectProperties=function(s,t){if(t===void 0)t=!0;else if(typeof t=="string")t={config:!0};else if(Array.isArray(t))for(var n=t,t={},f=0,T=n.length;f<T;f++)t[n[f]]=!0;if(t===!0)for(var E in EffectMap)EffectMap[E](s);else for(var E in t)t[E]&&EffectMap[E]&&EffectMap[E](s);return s};const FadeTint=0,FadeAlpha=1,FadeRevealUp=2,FadeRevealDown=3,FadeRevealLeft=4,FadeRevealRight=5,FadeMode={tint:FadeTint,alpha:FadeAlpha,revealUp:FadeRevealUp,revealDown:FadeRevealDown,revealLeft:FadeRevealLeft,revealRight:FadeRevealRight},FadeMethods$1={setGOFadeMode(s){return typeof s=="string"&&(s=FadeMode[s]),this.fadeMode=s,this},setGOFadeTime(s){return this.fadeTime=s,this},useTintFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===FadeTint)&&this.fadeTime>0&&s.setTint!==void 0},useAlphaFadeEffect(s){return(this.fadeMode===void 0||this.fadeMode===FadeAlpha)&&this.fadeTime>0&&s.setAlpha!==void 0},useRevealEffect(s){return this.fadeMode>=FadeRevealUp&&this.fadeMode<=FadeRevealRight&&this.fadeTime>0&&(s.preFX||s.postFX)},fadeBob(s,t,n,f){var T=s.gameObject;if(this.useTintFadeEffect(T))t!==void 0&&s.setProperty("tintGray",255*t),s.easeProperty("tintGray",Math.floor(255*n),this.fadeTime,"Linear",0,!1,f);else if(this.useAlphaFadeEffect(T))t!==void 0&&s.setProperty("alpha",t),s.easeProperty("alpha",n,this.fadeTime,"Linear",0,!1,f);else if(this.useRevealEffect(T)){AddEffectProperties(T,"reveal");var E;switch(this.fadeMode){case FadeRevealUp:E="revealUp";break;case FadeRevealDown:E="revealDown";break;case FadeRevealLeft:E="revealLeft";break;case FadeRevealRight:E="revealRight";break}t===void 0&&(t=0),T[E]=t,s.easeProperty(E,n,this.fadeTime,"Linear",0,!1,f),s.getTweenTask(E).once("complete",function(){T[E]=null})}else f&&f(T);return this}};var GetR=function(s){return s>>16&255},GetG=function(s){return s>>8&255},GetB=function(s){return s&255};const MaskR=~(255<<16)&16777215,MaskG=16711935,MaskB=16776960;var SetR=function(s,t){return(t&255)<<16|s&MaskR},SetG=function(s,t){return(t&255)<<8|s&MaskG},SetB=function(s,t){return t&255|s&MaskB},SetRGB=function(s,t,n,f){return(t&255)<<16|(n&255)<<8|f&255},AddTintRGBProperties=function(s,t){if(s.hasOwnProperty("tintR"))return s;t===void 0&&(t=16777215);var n=GetR(t),f=GetG(t),T=GetB(t);return Object.defineProperty(s,"tint",{get:function(){return t},set:function(E){E=Math.floor(E)&16777215,s.setTint&&s.setTint(E),t!==E&&(t=E,n=GetR(t),f=GetG(t),T=GetB(t))}}),Object.defineProperty(s,"tintR",{get:function(){return n},set:function(E){E=Math.floor(E)&255,n!==E&&(n=E,s.tint=SetR(t,E))}}),Object.defineProperty(s,"tintG",{get:function(){return f},set:function(E){E=Math.floor(E)&255,f!==E&&(f=E,s.tint=SetG(t,E))}}),Object.defineProperty(s,"tintB",{get:function(){return T},set:function(E){E=Math.floor(E)&255,T!==E&&(T=E,s.tint=SetB(t,E))}}),Object.defineProperty(s,"tintGray",{get:function(){return Math.floor((n+f+T)/3)},set:function(E){E=Math.floor(E)&255,(n!==E||f!==E||T!==E)&&(n=E,f=E,T=E,s.tint=SetRGB(t,E,E,E))}}),s.tint=t,s};const EventEmitter$1=Phaser.Events.EventEmitter;var MonitorViewport=function(s){if(s.events)return s;var t=new EventEmitter$1,n=s.x;Object.defineProperty(s,"x",{get:function(){return n},set:function(h){n!==h&&(n=h,t.emit("update",s))}});var f=s.y;Object.defineProperty(s,"y",{get:function(){return f},set:function(h){f!==h&&(f=h,t.emit("update",s))}});var T=s.width;Object.defineProperty(s,"width",{get:function(){return T},set:function(h){T!==h&&(T=h,t.emit("update",s))}});var E=s.height;return Object.defineProperty(s,"height",{get:function(){return E},set:function(h){E!==h&&(E=h,t.emit("update",s))}}),s.events=t,s},VPXYToXY=function(s,t,n,f,T,E){return E===void 0?E={}:E===!0&&(E=GlobXY),typeof n!="number"&&(n=0,f=0),E.x=T.x+T.width*s+n,E.y=T.y+T.height*t+f,E},GlobXY={},AddViewportCoordinateProperties=function(s,t,n,f,T,E,h){if(s.hasOwnProperty("vp"))return s;typeof n=="function"&&(h=n,n=void 0),typeof T=="function"&&(h=T,T=void 0),n===void 0&&(n=.5),f===void 0&&(f=.5),T===void 0&&(T=0),E===void 0&&(E=0),h===void 0&&(h=VPXYToXY),MonitorViewport(t);var S=t.events;s.vp=t;var e=function(){h(n,f,T,E,t,s)};S.on("update",e),s.once("destroy",function(){S.off("update",e),s.vp=void 0}),Object.defineProperty(s,"vpx",{get:function(){return n},set:function(d){n!==d&&(n=d,e())}}),Object.defineProperty(s,"vpy",{get:function(){return f},set:function(d){f!==d&&(f=d,e())}}),Object.defineProperty(s,"vpxOffset",{get:function(){return T},set:function(d){T!==d&&(T=d,e())}}),Object.defineProperty(s,"vpyOffset",{get:function(){return E},set:function(d){E!==d&&(E=d,e())}}),e()};const RemoveItem$a=Phaser.Utils.Array.Remove,AddMethods$1={has(s){return this.bobs.hasOwnProperty(s)},exists(s){return this.bobs.hasOwnProperty(s)},get(s){return this.bobs[s]},getGO(s){var t=this.get(s);return t?t.gameObject:null},addGO(s,t){this.remove(s,!0),this.useTintFadeEffect(t)&&AddTintRGBProperties(t),this.viewportCoordinateEnable&&AddViewportCoordinateProperties(t,this.viewport),this.effectPropertiesConfig&&AddEffectProperties(t,this.effectPropertiesConfig),t.once("destroy",function(){RemoveItem$a(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var n=new this.BobClass(this,t,s);return this.bobs[s]=n,this},add(s,...t){var n=this.createGameObjectCallback,f=this.createGameObjectScope,T=n.call(f,this.scene,...t);this.addGO(s,T);var E=this.get(s);return this.fadeBob(E,0,1),this},forEachGO(s,t){for(var n in this.bobs){var f=this.bobs[n].gameObject,T;if(t?T=s.call(t,f,n,this):T=s(f,n,this),T)break}return this}},RemoveMethods$1={remove(s,t){if(!this.has(s))return this;var n=this.get(s);return delete this.bobs[s],this.removedGOs.push(n.gameObject),t?n.destroy():this.fadeBob(n,void 0,0,function(){n.destroy()}),this},removeAll(){var s=this.bobs;for(var t in s)this.remove(t);return this},clear(s){s===void 0&&(s=!0);var t=this.bobs;for(var n in t)s&&t[n].destroy(),delete t[n];return this.removedGOs.length=0,this}},PropertyMethods={hasProperty(s,t){return this.has(s)?this.get(s).hasProperty(t):!1},getProperty(s,t){if(this.has(s))return this.get(s).getProperty(t)},isNumberProperty(s,t){var n=this.getProperty(s,t);return typeof n=="number"},setProperty(s,t,n){return this.has(s)?(this.symbols&&typeof n=="string"&&this.isNumberProperty(s,t)&&(n in this.symbols?n=this.symbols[n]:console.warn(`Can't find symbol ${n}`)),this.get(s).setProperty(t,n),this):this},easeProperty(s,t,n,f,T,E,h,S){return this.has(s)?(f===void 0&&(f=1e3),T===void 0&&(T="Linear"),E===void 0&&(E=0),h===void 0&&(h=!1),this.symbols&&typeof n=="string"&&this.isNumberProperty(s,t)&&(n in this.symbols?n=this.symbols[n]:console.warn(`Can't find symbol ${n}`)),this.get(s).easeProperty(t,n,f,T,E,h,S),this):this},hasTweenTask(s,t){if(!this.has(s))return!1;var n=this.get(s).tweens;return n.hasOwnProperty(t)},getTweenTask(s,t){if(!this.has(s))return null;var n=this.get(s).tweens,f=n[t];return f||null}},CallMethods={hasMethod(s,t){return this.has(s)?this.get(s).hasMethod(t):!1},call(s,t,...n){return this.has(s)?(this.get(s).call(t,...n),this):this}},DataMethods={hasData(s,t){return this.has(s)?this.get(s).hasData(t):!1},getData(s,t){if(this.has(s))return this.get(s).getData(t)},setData(s,t,n){return this.has(s)?(this.get(s).setData(t,n),this):this}};var GetDisplayWidth=function(s){return s.displayWidth!==void 0?s.displayWidth:s.width},GetDisplayHeight=function(s){return s.displayHeight!==void 0?s.displayHeight:s.height};const Rectangle$4=Phaser.Geom.Rectangle,Vector2=Phaser.Math.Vector2,RotateAround$7=Phaser.Math.RotateAround;var GetBounds=function(s,t){if(t===void 0?t=new Rectangle$4:t===!0&&(GlobRect$2===void 0&&(GlobRect$2=new Rectangle$4),t=GlobRect$2),s.getBounds)return s.getBounds(t);var n,f,T,E,h,S,e,d;if(s.parentContainer){var y=s.parentContainer.getBoundsTransformMatrix();GetTopLeft(s,t),y.transformPoint(t.x,t.y,t),n=t.x,f=t.y,GetTopRight(s,t),y.transformPoint(t.x,t.y,t),T=t.x,E=t.y,GetBottomLeft(s,t),y.transformPoint(t.x,t.y,t),h=t.x,S=t.y,GetBottomRight(s,t),y.transformPoint(t.x,t.y,t),e=t.x,d=t.y}else GetTopLeft(s,t),n=t.x,f=t.y,GetTopRight(s,t),T=t.x,E=t.y,GetBottomLeft(s,t),h=t.x,S=t.y,GetBottomRight(s,t),e=t.x,d=t.y;return t.x=Math.min(n,T,h,e),t.y=Math.min(f,E,S,d),t.width=Math.max(n,T,h,e)-t.x,t.height=Math.max(f,E,S,d)-t.y,t},GlobRect$2=void 0,GetTopLeft=function(s,t,n){return t===void 0?t=new Vector2:t===!0&&(GlobVector===void 0&&(GlobVector=new Vector2),t=GlobVector),s.getTopLeft?s.getTopLeft(t):(t.x=s.x-GetDisplayWidth(s)*s.originX,t.y=s.y-GetDisplayHeight(s)*s.originY,PrepareBoundsOutput(s,t,n))},GetTopRight=function(s,t,n){return t===void 0?t=new Vector2:t===!0&&(GlobVector===void 0&&(GlobVector=new Vector2),t=GlobVector),s.getTopRight?s.getTopRight(t):(t.x=s.x-GetDisplayWidth(s)*s.originX+GetDisplayWidth(s),t.y=s.y-GetDisplayHeight(s)*s.originY,PrepareBoundsOutput(s,t,n))},GetBottomLeft=function(s,t,n){return t===void 0?t=new Vector2:t===!0&&(GlobVector===void 0&&(GlobVector=new Vector2),t=GlobVector),s.getBottomLeft?s.getBottomLeft(t):(t.x=s.x-GetDisplayWidth(s)*s.originX,t.y=s.y-GetDisplayHeight(s)*s.originY+GetDisplayHeight(s),PrepareBoundsOutput(s,t,n))},GetBottomRight=function(s,t,n){return t===void 0?t=new Vector2:t===!0&&(GlobVector===void 0&&(GlobVector=new Vector2),t=GlobVector),s.getBottomRight?s.getBottomRight(t):(t.x=s.x-GetDisplayWidth(s)*s.originX+GetDisplayWidth(s),t.y=s.y-GetDisplayHeight(s)*s.originY+GetDisplayHeight(s),PrepareBoundsOutput(s,t,n))},GlobVector=void 0,PrepareBoundsOutput=function(s,t,n){if(n===void 0&&(n=!1),s.rotation!==0&&RotateAround$7(t,s.x,s.y,s.rotation),n&&s.parentContainer){var f=s.parentContainer.getBoundsTransformMatrix();f.transformPoint(t.x,t.y,t)}return t};const GetValue$35=Phaser.Utils.Objects.GetValue;var DrawBounds$2=function(s,t,n){var f,T,E,h,S;if(typeof n=="number"?f=n:(f=GetValue$35(n,"color"),T=GetValue$35(n,"lineWidth"),E=GetValue$35(n,"fillColor"),h=GetValue$35(n,"fillAlpha",1),S=GetValue$35(n,"padding",0)),Array.isArray(s))for(var e=0,d=s.length;e<d;e++)Draw(s[e],t,f,T,E,h,S);else Draw(s,t,f,T,E,h,S)},Draw=function(s,t,n,f,T,E,h){var S=s.getBounds||s.width!==void 0&&s.height!==void 0;if(S){n===void 0&&(n=16777215),f===void 0&&(f=1),T===void 0&&(T=null),E===void 0&&(E=1),h===void 0&&(h=0);var e=GetTopLeft(s,Points[0]);e.x-=h,e.y-=h;var d=GetTopRight(s,Points[1]);d.x+=h,d.y-=h;var y=GetBottomRight(s,Points[2]);y.x+=h,y.y+=h;var c=GetBottomLeft(s,Points[3]);c.x-=h,c.y+=h,T!==null&&t.fillStyle(T,E).fillPoints(Points,!0,!0),n!==null&&t.lineStyle(f,n).strokePoints(Points,!0,!0)}},Points=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],DrawGameObjectsBounds=function(s,t){return this.forEachGO(function(n){n.drawBounds?n.drawBounds(s,t):DrawBounds$2(n,s,t)}),this},Methods$g={drawGameObjectsBounds:DrawGameObjectsBounds};Object.assign(Methods$g,FadeMethods$1,AddMethods$1,RemoveMethods$1,PropertyMethods,CallMethods,DataMethods);const CameraClass=Phaser.Cameras.Scene2D.BaseCamera;var IsCameraObject=function(s){return s instanceof CameraClass};const Rectangle$3=Phaser.Geom.Rectangle;var GetViewport=function(s,t,n){return IsCameraObject(t)||(n=t,t=void 0),n===void 0?n=new Rectangle$3:n===!0&&(n=globRect),t?s.scale.getViewPort(t,n):s.scale.getViewPort(n)},globRect=new Rectangle$3;const GetValue$34=Phaser.Utils.Objects.GetValue;class GOManager{constructor(t,n){this.scene=t,this.BobClass=GetValue$34(n,"BobClass",BobBase),this.setCreateGameObjectCallback(GetValue$34(n,"createGameObject"),GetValue$34(n,"createGameObjectScope")),this.setEventEmitter(GetValue$34(n,"eventEmitter",void 0));var f=GetValue$34(n,"fade",500);typeof f=="number"?(this.setGOFadeMode(),this.setGOFadeTime(f)):(this.setGOFadeMode(GetValue$34(f,"mode")),this.setGOFadeTime(GetValue$34(f,"time",500)));var T=GetValue$34(n,"viewportCoordinate",!1);T!==!1?(this.setViewportCoordinateEnable(GetValue$34(n,"enable",!0)),this.setViewport(GetValue$34(T,"viewport"))):this.setViewportCoordinateEnable(!1);var E=GetValue$34(n,"effectProperties",!1);this.setEffectPropertiesConfig(E),this.setSymbols(GetValue$34(n,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var n=this.bobs;for(var f in n)n[f].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,n){return this.createGameObjectCallback=t,this.createGameObjectScope=n,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setEffectPropertiesConfig(t){return t===void 0&&(t=!0),this.effectPropertiesConfig=t,this}setViewport(t){return t===void 0&&(t=GetViewport(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return IsEmpty(this.bobs)&&this.removedGOs.length===0}}Object.assign(GOManager.prototype,EventEmitterMethods$1,Methods$g);var SortGameObjectsByDepth=function(s,t){if(s.length<=1)return s;t===void 0&&(t=!1);var n,f=s[0];return f.displayList?n=f.displayList:f.parentContainer?n=f.parentContainer.list:n=f.scene.sys.displayList,n.depthSort&&(n.depthSort(),n=n.list),t?s.sort(function(T,E){return n.indexOf(E)-n.indexOf(T)}):s.sort(function(T,E){return n.indexOf(T)-n.indexOf(E)}),s};const GetValue$33=Phaser.Utils.Objects.GetValue;class LayerManager extends GOManager{constructor(t,n){n===void 0?n={}:Array.isArray(n)&&(n={layers:n}),n.hasOwnProperty("fade")||(n.fade=0),n.viewportCoordinate=!1,super(t,n);var f=GetValue$33(n,"layers");if(f)for(var T=0,E=f.length;T<E;T++)this.add(f[T])}setCreateGameObjectCallback(t,n){return t||(t=CreateLayer),super.setCreateGameObjectCallback(t,n),this}addGO(t,n){return super.addGO(t,n),n.name=t,this}getLayer(t){return this.getGO(t)}getLayers(t){return t===void 0&&(t=[]),this.forEachGO(function(n){t.push(n)}),SortGameObjectsByDepth(t,!1),t}addToLayer(t,n){var f=this.getGO(t);if(!f){console.warn(`Can't get layer "${t}"`);return}return n.isRexContainerLite?n.addToLayer(f):f.add(n),this}removeFromLayer(t,n,f){var T=this.getGO(t);if(!T){console.warn(`Can't get layer "${t}"`);return}return f===void 0&&(f=!0),n.isRexContainerLite?n.removeFromLayer(T,f):(T.remove(n),f&&n.addToDisplayList()),this}clearLayer(t,n){n===void 0&&(n=!0);var f=this.getGO(t);if(!f){console.warn(`Can't get layer "${t}"`);return}if(n)for(var T=f.getAll(),E=0,h=T.length;E<h;E++)T.destroy();else f.removeAll();return this}}var CreateLayer=function(s,t){var n=s.add.layer();return t!==void 0&&n.setDepth(t),n},GetSoundManager=function(s){return IsSceneObject(s)?s.sys.sound:s.sound};const GetValue$32=Phaser.Utils.Objects.GetValue;class TickTask extends ComponentBase{constructor(t,n){super(t,n),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(GetValue$32(n,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=TICKINGMODE[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const TICKINGMODE={no:0,lazy:1,always:2},GetValue$31=Phaser.Utils.Objects.GetValue;class SceneUpdateTickTask extends TickTask{constructor(t,n){super(t,n);var f=this.scene?"update":"step";this.tickEventName=GetValue$31(n,"tickEventName",f),this.isSceneTicker=!IsGameUpdateEvent(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var IsGameUpdateEvent=function(s){return s==="step"||s==="poststep"};const GetValue$30=Phaser.Utils.Objects.GetValue,Clamp$f=Phaser.Math.Clamp;let Timer$1=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=GetValue$30(t,"state",IDLE$8),this.timeScale=GetValue$30(t,"timeScale",1),this.delay=GetValue$30(t,"delay",0),this.repeat=GetValue$30(t,"repeat",0),this.repeatCounter=GetValue$30(t,"repeatCounter",0),this.repeatDelay=GetValue$30(t,"repeatDelay",0),this.duration=GetValue$30(t,"duration",0),this.nowTime=GetValue$30(t,"nowTime",0),this.justRestart=GetValue$30(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?COUNTDOWN:DELAY,this.repeatCounter=0,this}stop(){return this.state=IDLE$8,this}update(t,n){this.state===IDLE$8||this.state===DONE||n===0||this.timeScale===0||(this.nowTime+=n*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=REPEATDELAY)):(this.nowTime=this.duration,this.state=DONE):this.nowTime>=0&&(this.state=COUNTDOWN))}get t(){var t;switch(this.state){case IDLE$8:case DELAY:case REPEATDELAY:t=0;break;case COUNTDOWN:t=this.nowTime/this.duration;break;case DONE:t=1;break}return Clamp$f(t,0,1)}set t(t){t=Clamp$f(t,-1,1),t<0?(this.state=DELAY,this.nowTime=-this.delay*t):(this.state=COUNTDOWN,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===IDLE$8}get isDelay(){return this.state===DELAY}get isCountDown(){return this.state===COUNTDOWN}get isRunning(){return this.state===DELAY||this.state===COUNTDOWN}get isDone(){return this.state===DONE}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}};const IDLE$8=0,DELAY=1,COUNTDOWN=2,REPEATDELAY=3,DONE=-1;class TimerTickTask extends SceneUpdateTickTask{constructor(t,n){super(t,n),this.timer=new Timer$1}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const GetValue$2$=Phaser.Utils.Objects.GetValue,GetAdvancedValue$5=Phaser.Utils.Objects.GetAdvancedValue,GetEaseFunction=Phaser.Tweens.Builders.GetEaseFunction;class EaseValueTaskBase extends TimerTickTask{resetFromJSON(t){return this.timer.resetFromJSON(GetValue$2$(t,"timer")),this.setEnable(GetValue$2$(t,"enable",!0)),this.setTarget(GetValue$2$(t,"target",this.parent)),this.setDelay(GetAdvancedValue$5(t,"delay",0)),this.setDuration(GetAdvancedValue$5(t,"duration",1e3)),this.setEase(GetValue$2$(t,"ease","Linear")),this.setRepeat(GetValue$2$(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=GetEaseFunction(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,n){if(!this.isRunning||!this.enable||!this.parent.active)return this;var f=this.target,T=this.timer;return T.update(t,n),T.isDelay||this.updateGameObject(f,T),this.emit("update",f,this),T.isDone&&this.complete(),this}updateGameObject(t,n){}}const SoundObjectClass=Phaser.Sound.BaseSound;var IsSoundObject=function(s){return s instanceof SoundObjectClass};const GetValue$2_=Phaser.Utils.Objects.GetValue,GetAdvancedValue$4=Phaser.Utils.Objects.GetAdvancedValue,Linear$d=Phaser.Math.Linear;let Fade$3=class extends EaseValueTaskBase{constructor(t,n,f){IsSoundObject(t)&&(f=n,n=t,t=void 0),n.active=!0,n.scene=t,n.game=n.manager.game,super(n,f),this.volume={},this.resetFromJSON(f)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(GetValue$2_(t,"mode",0)),this.setEnable(GetValue$2_(t,"enable",!0)),this.setVolumeRange(GetAdvancedValue$4(t,"volume.start",this.parent.volume),GetAdvancedValue$4(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=MODE$4[t]),this.mode=t,this}setVolumeRange(t,n){return this.volume.start=t,this.volume.end=n,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,n){t.volume=Linear$d(this.volume.start,this.volume.end,n.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.stop(),this.parent.destroy();break}return this}};const MODE$4={stop:1,destroy:2};var FadeIn$1=function(s,t,n,f,T){IsSoundObject(s)&&(T=f,f=n,n=t,t=s,s=void 0),f===void 0&&(f=1),T===void 0&&(T=0);var E={mode:0,volume:{start:T,end:f},duration:n};typeof t=="string"&&(t=s.sys.sound.add(t));var h;return t.hasOwnProperty("_fade")?(h=t._fade,h.stop().resetFromJSON(E)):(h=new Fade$3(s,t,E),t._fade=h),h.start(),t.isPlaying||t.setVolume(T).play(),t},FadeOut=function(s,t,n,f){IsSoundObject(s)&&(f=n,n=t,t=s,s=void 0),f===void 0&&(f=!0);var T={mode:f?2:1,volume:{start:t.volume,end:0},duration:n},E;return t.hasOwnProperty("_fade")?(E=t._fade,E.stop().resetFromJSON(T)):(E=new Fade$3(s,t,T),t._fade=E),E.start(),t.isPlaying||t.play(),t};const GetValue$2Z=Phaser.Utils.Objects.GetValue,BackgroundMusicMethods={setBackgroundMusicLoop(s){return s===void 0&&(s=!0),this.backgroundMusicLoop=s,this},setBackgroundMusicFadeTime(s){return this.backgroundMusicFadeTime=s,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(s){return this.backgroundMusic=s,s&&(s.once("complete",function(){this.backgroundMusic===s&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===s&&(this.backgroundMusic=void 0)},this),s.isPlaying||s.play()),this},playBackgroundMusic(s,t){if(this.backgroundMusic&&this.backgroundMusic.key===s)return this;this.stopBackgroundMusic();var n=this.sound.add(s,{loop:GetValue$2Z(t,"loop",this.backgroundMusicLoop),mute:GetValue$2Z(t,"mute",this.backgroundMusicMute),volume:GetValue$2Z(t,"volume",this.backgroundMusicVolume),detune:GetValue$2Z(t,"detune",0),rate:GetValue$2Z(t,"rate",1)});return this.setCurrentBackgroundMusic(n),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(s){return this.backgroundMusic&&FadeIn$1(this.backgroundMusic,s,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(s,t){return this.backgroundMusic&&FadeOut(this.backgroundMusic,s,t),this},crossFadeBackgroundMusic(s,t){var n=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(s).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=n,this},setBackgroundMusicMute(s){return s===void 0&&(s=!0),this.backgroundMusicMute=s,this},setBackgroundMusicVolume(s){return this.backgroundMusicVolume=s,this},setBackgroundMusicRate(s){return this.backgroundMusic&&this.backgroundMusic.setRate(s),this},setBackgroundMusicDetune(s){return this.backgroundMusic&&this.backgroundMusic.setDetune(s),this}},GetValue$2Y=Phaser.Utils.Objects.GetValue,BackgroundMusic2Methods={setBackgroundMusic2Loop(s){return s===void 0&&(s=!0),this.backgroundMusic2Loop=s,this},setBackgroundMusic2FadeTime(s){return this.backgroundMusic2FadeTime=s,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(s){return this.backgroundMusic2=s,s&&(s.once("complete",function(){this.backgroundMusic2===s&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===s&&(this.backgroundMusic2=void 0)},this),s.isPlaying||s.play()),this},playBackgroundMusic2(s,t){if(this.backgroundMusic2&&this.backgroundMusic2.key===s)return this;this.stopBackgroundMusic2();var n=this.sound.add(s,{loop:GetValue$2Y(t,"loop",this.backgroundMusicLoop),mute:GetValue$2Y(t,"mute",this.backgroundMusic2Mute),volume:GetValue$2Y(t,"volume",this.backgroundMusic2Volume),detune:GetValue$2Y(t,"detune",0),rate:GetValue$2Y(t,"rate",1)});return this.setCurrentBackgroundMusic2(n),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(s){return this.backgroundMusic2&&FadeIn$1(this.backgroundMusic2,s,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(s,t){return this.backgroundMusic2&&FadeOut(this.backgroundMusic2,s,t),this},crossFadeBackgroundMusic2(s,t){var n=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(s).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=n,this},setBackgroundMusic2Mute(s){return s===void 0&&(s=!0),this.backgroundMusic2Mute=s,this},setBackgroundMusic2Volume(s){return this.backgroundMusic2Volume=s,this},setBackgroundMusic2Rate(s){return this.backgroundMusic2&&this.backgroundMusic2.setRate(s),this},setBackgroundMusic2Detune(s){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(s),this}},RemoveItem$9=Phaser.Utils.Array.Remove,GetValue$2X=Phaser.Utils.Objects.GetValue,SoundEffectsMethods={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(s,t){var n=this.sound.add(s,{mute:GetValue$2X(t,"mute",this.soundEffectsMute),volume:GetValue$2X(t,"volume",this.soundEffectsVolume),detune:GetValue$2X(t,"detune",0),rate:GetValue$2X(t,"rate",1)});return this.soundEffects.push(n),n.once("complete",function(){n.destroy(),this.sound&&RemoveItem$9(this.soundEffects,n)},this).once("destroy",function(){this.sound&&RemoveItem$9(this.soundEffects,n)},this).play(),this},stopAllSoundEffects(){for(var s=this.soundEffects.length-1;s>=0;s--){var t=this.soundEffects[s];t.stop(),t.destroy()}return this},fadeInSoundEffect(s){var t=this.getLastSoundEffect();return t&&FadeIn$1(t,s,this.soundEffectsVolume,0),this},fadeOutSoundEffect(s,t){var n=this.getLastSoundEffect();return n&&FadeOut(n,s,t),this},fadeOutAllSoundEffects(s,t){for(var n=this.soundEffects.length-1;n>=0;n--)FadeOut(this.soundEffects[n],s,t);return this},setSoundEffectMute(s,t){if(s===void 0&&(s=!0),t===void 0&&(t=!1),t){var n=this.getLastSoundEffect();n&&n.setMute(s)}else this.soundEffectsMute=s;return this},setSoundEffectVolume(s,t){if(t===void 0&&(t=!1),t){var n=this.getLastSoundEffect();n&&n.setVolume(s)}else this.soundEffectsVolume=s;return this},setSoundEffectDetune(s,t){t===void 0&&(t=!1);var n;t?n=[this.getLastSoundEffect()]:n=this.soundEffects;for(var f=0,T=n.length;f<T;f++)n[f].setDetune(s);return this},setSoundEffectRate(s,t){t===void 0&&(t=!1);var n;t?n=[this.getLastSoundEffect()]:n=this.soundEffects;for(var f=0,T=n.length;f<T;f++)n[f].setRate(s);return this}},RemoveItem$8=Phaser.Utils.Array.Remove,GetValue$2W=Phaser.Utils.Objects.GetValue,SoundEffects2Methods={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(s,t){var n=this.sound.add(s,{mute:GetValue$2W(t,"mute",this.soundEffects2Mute),volume:GetValue$2W(t,"volume",this.soundEffects2Volume),detune:GetValue$2W(t,"detune",0),rate:GetValue$2W(t,"rate",1)});return this.soundEffects2.push(n),n.once("complete",function(){n.destroy(),this.sound&&RemoveItem$8(this.soundEffects2,n)},this).once("destroy",function(){this.sound&&RemoveItem$8(this.soundEffects2,n)},this).play(),this},stopAllSoundEffects2(){for(var s=this.soundEffects.length-1;s>=0;s--){var t=this.soundEffects[s];t.stop(),t.destroy()}return this},fadeInSoundEffect2(s){var t=this.getLastSoundEffect2();return t&&FadeIn$1(t,s,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(s,t){var n=this.getLastSoundEffect2();return n&&FadeOut(n,s,t),this},fadeOutAllSoundEffects2(s,t){for(var n=this.soundEffects2.length-1;n>=0;n--)FadeOut(this.soundEffects2[n],s,t);return this},setSoundEffect2Mute(s,t){if(s===void 0&&(s=!0),t===void 0&&(t=!1),t){var n=this.getLastSoundEffect2();n&&n.setMute(s)}else this.soundEffects2Mute=s;return this},setSoundEffect2Volume(s,t){if(t===void 0&&(t=!1),t){var n=this.getLastSoundEffect2();n&&n.setVolume(s)}else this.soundEffects2Volume=s;return this},setSoundEffect2Detune(s,t){t===void 0&&(t=!1);var n;t?n=[this.getLastSoundEffect2()]:n=this.soundEffects2;for(var f=0,T=n.length;f<T;f++)n[f].setDetune(s);return this},setSoundEffect2Rate(s,t){t===void 0&&(t=!1);var n;t?n=[this.getLastSoundEffect2()]:n=this.soundEffects2;for(var f=0,T=n.length;f<T;f++)n[f].setRate(s);return this}};var Methods$f={};Object.assign(Methods$f,BackgroundMusicMethods,BackgroundMusic2Methods,SoundEffectsMethods,SoundEffects2Methods);const GetValue$2V=Phaser.Utils.Objects.GetValue;class SoundManager{constructor(t,n){this.sound=GetSoundManager(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=GetValue$2V(n,"bgm.volume",1),this._backgroundMusicMute=GetValue$2V(n,"bgm.mute",!1),this.setBackgroundMusicLoop(GetValue$2V(n,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(GetValue$2V(n,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=GetValue$2V(n,"bgm2.volume",1),this._backgroundMusic2Mute=GetValue$2V(n,"bgm2.mute",!1),this.setBackgroundMusic2Loop(GetValue$2V(n,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(GetValue$2V(n,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=GetValue$2V(n,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=GetValue$2V(n,"soundEffect2.volume",1);var f=GetValue$2V(n,"bgm.initial",void 0);f&&this.setCurrentBackgroundMusic(f);var T=GetValue$2V(n,"bgm2.initial",void 0);T&&this.setCurrentBackgroundMusic2(T)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(t){this._backgroundMusicMute=t,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(t){this._backgroundMusic2Mute=t,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(t){this._soundEffectsMute=t;for(var n=this.soundEffects,f=0,T=n.length;f<T;f++)n[f].setMute(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var n=this.soundEffects,f=0,T=n.length;f<T;f++)n[f].setVolume(t)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(t){this._soundEffects2Mute=t;for(var n=this.soundEffects,f=0,T=soundEffects2.length;f<T;f++)n[f].setMute(t)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(t){this._soundEffects2Volume=t;for(var n=this.soundEffects2,f=0,T=n.length;f<T;f++)n[f].setVolume(t)}}Object.assign(SoundManager.prototype,Methods$f);const GetValue$2U=Phaser.Utils.Objects.GetValue;class BaseClock extends TickTask{constructor(t,n){super(t,n),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.isRunning=GetValue$2U(t,"isRunning",!1),this.timeScale=GetValue$2U(t,"timeScale",1),this.now=GetValue$2U(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class Clock extends BaseClock{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,n){return!this.isRunning||this.timeScale===0?this:(this.tick(n),this)}}var Yoyo$1=function(s,t){return t===void 0&&(t=.5),s<=t?s=s/t:s=1-(s-t)/(1-t),s};const Clamp$e=Phaser.Math.Clamp;class Timer{constructor(t,n){this.setTimeline(t).reset(n)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,n,f,T){return this.target=t,this.onStart=n,this.onProgress=f,this.onComplete=T,this}setDuration(t,n){return n===void 0&&(n=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=n,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=Clamp$e(t,0,1),this.yoyo&&(t=Yoyo$1(t)),t}setProgress(t){t=Clamp$e(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,n){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=n,this.t=this.getProgress(),this.runCallback(this.onProgress);var f=this.remainder<=0;return f&&this.runCallback(this.onComplete),f}}let TimerPool$1=class extends Stack{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var n=0,f=t.length;n<f;n++)this.free(t[n]);return this}};const GetValue$2T=Phaser.Utils.Objects.GetValue,TimerPool=new TimerPool$1;class Timeline extends Clock{constructor(t,n){super(t,n),this.addedTimers=[],this.timers=[],this.timerPool=GetValue$2T(n,"pool",TimerPool)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var n=this.timerPool.allocate();return n?n.setTimeline(this).reset(t):n=new Timer(this,t),this.addedTimers.push(n),n.runCallback(n.onStart),this.isRunning||this.start(),n}delayCall(t,n,f,T){var E=this.addTimer({duration:t,onComplete:function(h,S,e){f===void 0&&(f=[]),f.push(e),n.apply(T,f)}});return E}delayEvent(t,n){this.removeDelayEvent(n);var f=this.delayCall(t,function(){this.removeDelayEvent(n),this.emit(n)},[],this);return this.once(`_remove.${n}`,function(){f.remove(),f=void 0}),this}removeDelayEvent(t){return this.emit(`_remove.${t}`),this}getTimers(t){for(var n=[],f=[this.addedTimers,this.timers],T=0,E=f.length;T<E;T++)for(var h=f[T],S=0,e=h.length;S<e;S++){var d=h[S];d.name===t&&n.push(d)}return n}update(t,n){if(super.update(t,n),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var f=[],T=0,E=this.timers.length;T<E;T++){var h=this.timers[T],S=h.update(this.now,this.delta);S?this.timerPool.free(h):f.push(h)}this.timers=f,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}const WaitCompleteEvent="_wait.complete",RemoveWaitEvents="_remove.wait";var PreUpdateDelayCall=function(s,t,n,f,T){var E=GetSceneObject(s),h=E.time.delayedCall(t,function(){E.sys.events.once("preupdate",function(){n.call(f,T)})});return h};let WaitEvent$1=class{constructor(t){t||(this.setEventEmitter(!0),t=this),this.parent=t,this.waitId=0,this.waitCompleteEventName=WaitCompleteEvent,this.removeWaitEventsEventName=RemoveWaitEvents}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.parent=null}waitEvent(t,n,f){var T=this.getWaitCompleteTriggerCallback(f);return t.once(n,T,this),this.parent.once(this.removeWaitEventsEventName,function(){t.off(n,T,this)}),this.parent}getWaitCompleteTriggerCallback(t){t===void 0&&(t=!0);var n=this.waitId,f=this,T=function(){n<f.waitId||(f.waitId++,f.removeWaitEvents(),f.parent.emit(f.waitCompleteEventName))};if(t){var E=function(){PreUpdateDelayCall(f.parent,0,T)};return E}else return T}removeWaitEvents(){return this.parent.emit(this.removeWaitEventsEventName),this}addWaitCompleteCallback(t,n){return this.parent.on(this.waitCompleteEventName,t,n),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}};Object.assign(WaitEvent$1.prototype,EventEmitterMethods$1);const WaitTimeMethods={waitTime(s){var t=this.parent.timeline;return t.delayEvent(s,"delay"),this.parent.once(this.removeWaitEventsEventName,function(){t.removeDelayEvent("delay")}),this.waitEvent(t,"delay")}};var Split=function(s,t){var n=`(?<!\\\\)\\${t}`,f=`\\${t}`;return s.split(new RegExp(n,"g")).map(function(T){return T.replace(f,t)})};const WaitInputMethods={setClickTarget(s){this.clickTarget=s,s?IsSceneObject(s)?this.clickEE=s.input:this.clickEE=s.setInteractive():this.clickEE=null},waitClick(){return this.clickEE?this.waitEvent(this.clickEE,"pointerdown"):this.waitTime(0)},waitKeyDown(s){var t=this.scene.input.keyboard;if(typeof s=="string"){if(s.indexOf("|")===-1)return this.waitEvent(t,`keydown-${s.toUpperCase()}`);for(var n=Split(s,"|"),f=0,T=n.length;f<T;f++)this.waitEvent(t,`keydown-${s.toUpperCase()}`);return this.parent}else return this.waitEvent(t,"keydown")}},WaitGameObjectMethods={waitGameObjectTweenComplete(s,t,n){var f=this.parent.getGameObjectTweenTask(s,t,n);return f?this.waitEvent(f,"complete"):this.waitTime(0)},waitGameObjectDataFlag(s,t,n,f){var T=this.parent.getGameObject(s,t);if(!T)return this.waitTime(0);if(T.getData(n)===f)return this.waitTime(0);var E=`changedata-${n}`,h=function(S,e,d){e=!!e,e===f&&S.emit("_dataFlagMatch")};return T.on(E,h),this.parent.once(this.removeWaitEventsEventName,function(){T.off(E,h)}),this.waitEvent(T,"_dataFlagMatch")},waitGameObjectDestroy(s,t){var n=this.parent.getGameObject(s,t);return n?this.waitEvent(n,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(s){if(s){var t=this.parent.getGameObjectManager(s);return t?this.waitEvent(t,"empty"):this.waitTime(0)}else{var n=this.parent.gameObjectManagers,f=!1;for(var T in n)f=!0,this.waitEvent(n[T],"empty");return f?this.parent:this.waitTime(0)}}},WaitCameraMethods={setCameraTarget(s){return this.cameraTarget=s,this},waitCameraEffectComplete(s){var t=this.cameraTarget;if(!t)return this.waitTime(0);var n,f;switch(s){case"camera.fadein":n=t.fadeEffect,f="camerafadeincomplete";break;case"camera.fadeout":n=t.fadeEffect,f="camerafadeoutcomplete";break;case"camera.flash":n=t.flashEffect,f="cameraflashcomplete";break;case"camera.shake":n=t.shakeEffect,f="camerashakecomplete";break;case"camera.zoom":n=t.zoomEffect,f="camerazoomcomplete";break;case"camera.rotate":n=t.rotateToEffect,f="camerarotatecomplete";break;case"camera.scroll":n=t.panEffect,f="camerapancomplete";break}return n.isRunning?this.waitEvent(t,f):this.waitTime(0)}},WaitMusicMethods={waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var s=this.parent.soundManager.getLastSoundEffect();return s?this.waitEvent(s,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var s=this.parent.soundManager.getLastSoundEffect2();return s?this.waitEvent(s,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var s=this.parent.soundManager.getBackgroundMusic();return s?this.waitEvent(s,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var s=this.parent.soundManager.getBackgroundMusic2();return s?this.waitEvent(s,"complete"):this.waitTime(0)}};var WaitAny$1=function(s){if(!s)return this.waitTime(0);var t=!1;for(var n in s)switch(n){case"time":t=!0,this.waitTime(s.time);break;case"click":t=!0,this.waitClick(s.key);break;case"key":t=!0,this.waitKeyDown(s.key);break;case"bgm":t=!0,this.waitBackgroundMusicComplete();break;case"bgm2":t=!0,this.waitBackgroundMusic2Complete();break;case"se":t=!0,this.waitSoundEffectComplete();break;case"se2":t=!0,this.waitSoundEffect2Complete();break;case"camera":t=!0,this.waitCameraEffectComplete(`camera.${s.camera.toLowerCase()}`);break;default:var f=n.split(".");if(f.length===2){var T=f[0],E=f[1],h=this.parent.getGameObjectManager(void 0,T);if(!h)continue;if(E==="destroy")return this.waitGameObjectDestroy(void 0,T);var S=h.getProperty(T,E);if(typeof S=="number"){t=!0,this.waitGameObjectTweenComplete(void 0,T,E);continue}var e=E,d=e.startsWith("!");d&&(e=e.substring(1)),h.hasData(T,E)&&(t=!0,this.waitGameObjectDataFlag(void 0,T,e,!d))}break}return t||this.waitTime(0),this.parent};class WaitEventManager extends WaitEvent$1{constructor(t,n){super(t),this.waitCompleteEventName=GetValue$3q(n,"completeEventName",this.waitCompleteEventName),this.setClickTarget(GetValue$3q(n,"clickTarget",this.scene)),this.setCameraTarget(GetValue$3q(n,"camera",this.scene.cameras.main))}get clickTarget(){return this.parent.clickTarget}set clickTarget(t){this.parent.clickTarget=t}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(t){this.parent.cameraTarget=t}destroy(){super.destroy(),this.setClickTarget(),this.setCameraTarget()}get scene(){return this.parent.managersScene}}var Methods$e={waitAny:WaitAny$1};Object.assign(WaitEventManager.prototype,WaitTimeMethods,WaitInputMethods,WaitGameObjectMethods,WaitCameraMethods,WaitMusicMethods,Methods$e);const GetValue$2S=Phaser.Utils.Objects.GetValue;var InitManagers=function(s,t){this.clickTarget=void 0,this.cameraTarget=void 0,this.managersScene=s,this.gameObjectManagers={};var n=GetValue$2S(t,"layers",!1);n!==!1&&(this.gameObjectManagers.layer=new LayerManager(s,n));var f=GetValue$2S(t,"sounds");return f!==!1&&(this.soundManager=new SoundManager(s,f)),this.timeline=new Timeline(this),this.waitEventManager=new WaitEventManager(this,t),this},SetTimeScale=function(s){this.timeline.timeScale=s;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(s);return this},GetTimeScale=function(){return this.timeline.timeScale},DestroyManagers=function(s){this.waitEventManager.destroy(),this.waitEventManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(s),delete this.gameObjectManagers[t];this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.cameraTarget=void 0,this.managersScene=void 0};const GameObjectManagerMethods$1={addGameObjectManager(s,t){s===void 0&&(s={}),t===void 0&&(t=GOManager),s.createGameObjectScope||(s.createGameObjectScope=this);var n=new t(this.managersScene,s);return this.gameObjectManagers[s.name]=n,this},getGameObjectManager(s,t){if(s){var n=this.gameObjectManagers[s];return n}else for(var s in this.gameObjectManagers){var n=this.gameObjectManagers[s];if(n.has(t))return n}},getGameObjectManagerNames(){var s=[];for(var t in this.gameObjectManagers)s.push(t);return s},getGameObjectManagerName(s){for(var t in this.gameObjectManagers)if(this.gameObjectManagers[t].has(s))return t},hasGameObjectMananger(s){return s in this.gameObjectManagers}},GameObjectMethods={createGameObject(s,t,...n){return this.getGameObjectManager(s,t).add(t,...n),this},destroyGameObject(s,t){var n=this.getGameObjectManager(s,t);return t===void 0?n.removeAll():n.remove(t),this},hasGameObject(s,t){return!!this.getGameObjectManager(s,t)},callGameObjectMethod(s,t,n,...f){return this.getGameObjectManager(s,t).call(t,n,...f),this},setGameObjectProperty(s,t,n,f){return this.getGameObjectManager(s,t).setProperty(t,n,f),this},easeGameObjectProperty(s,t,n,f,T,E,h,S){return this.getGameObjectManager(s,t).easeProperty(t,n,f,T,E,h,S),this},getGameObjectTweenTask(s,t,n){return this.getGameObjectManager(s,t).getTweenTask(t,n)},getGameObject(s,t,n){var f=this.getGameObjectManager(s,t);if(typeof t=="string")return f.getGO(t);var T=t;T===void 0&&(T=f.bobs),n===void 0&&(n={});for(t in T)n[t]=f.getGO(t);return n},addGameObject(s,t,n){var f=this.getGameObjectManager(s,t);if(typeof t=="string")f.addGO(t,n);else{var T=t;for(t in T)f.addGO(t,T[t])}return this},drawGameObjectsBounds(s,t,n){s instanceof Phaser.GameObjects.Graphics&&(n=t,t=s,s=void 0),s===void 0&&(s=this.getGameObjectManagerNames()),Array.isArray(s)||(s=[s]);for(var f=0,T=s.length;f<T;f++)this.getGameObjectManager(s[f]).drawGameObjectsBounds(t,n);return this}};var Extend=function(s){class t extends s{}var n={initManagers:InitManagers,setTimeScale:SetTimeScale,getTimeScale:GetTimeScale,destroyManagers:DestroyManagers};return Object.assign(t.prototype,n,GameObjectManagerMethods$1,GameObjectMethods),t},FLOAT=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,HEX=/^0x[0-9A-F]+$/i,TypeConvert=function(s){if(typeof s!="string")return s;if(s==="")s=null;else if(FLOAT.test(s))s=parseFloat(s);else if(HEX.test(s))s=parseInt(s,16);else switch(s){case"false":s=!1;break;case"true":s=!0;break;case"null":s=null;break;case"undefined":s=void 0;break}return s};let BracketParser$1=class{constructor(t){this.setEventEmitter(GetValue$3q(t,"eventEmitter",void 0)),this.setValueConverter(GetValue$3q(t,"valueConvert",!0)),this.setLoopEnable(GetValue$3q(t,"loop",!1)),this.setMultipleLinesTagEnable(GetValue$3q(t,"multipleLinesTag",!1));var n=GetValue$3q(t,"delimiters","<>");this.setDelimiters(n[0],n[1]),this.setTranslateTagNameCallback(GetValue$3q(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,n){n===void 0&&(n=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=n,t=EscapeRegex(this.delimiterLeft),n=EscapeRegex(this.delimiterRight);var f=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${n}`,f),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=TypeConvert:t||(t=BypassValueConverter),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,n=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var f=this.reSplit.exec(t);if(!f){if(this.progressIndex<n&&(this.onContent(t.substring(this.progressIndex,n)),this.isPaused)){this.progressIndex=n;break}this.onComplete(),this.isRunning=!1;return}var T=this.reSplit.lastIndex,E=T-f[0].length;if(this.progressIndex<E&&(this.onContent(t.substring(this.progressIndex,E)),this.isPaused)){this.progressIndex=E;break}if(this.onTag(f[1]),this.progressIndex=T,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,n){return this.isPaused?this:(this.pause(),t.once(n,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};const BypassValueConverter=function(s){return s};Object.assign(BracketParser$1.prototype,EventEmitterMethods$1);var StringToValues=function(s,t){if(s==null)return[];t===void 0&&(t=TypeConvert);for(var n=s.split(","),f=0,T=n.length;f<T;f++)n[f]=t(n[f]);return n};class BracketParser extends BracketParser$1{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(GetValue$3q(t,"regex.tag",void 0)),this.setValueExpression(GetValue$3q(t,"regex.value",void 0));var n=GetValue$3q(t,"delimiters","<>");this.setDelimiters(n[0],n[1])}setTagExpression(t){return t||(t=DefaultTokenExpression),this.tagExpression=t,this}setValueExpression(t){return t||(t=DefaultTokenExpression),this.valueExpression=t,this}setDelimiters(t,n){super.setDelimiters(t,n);var f=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(f,"i"),this.tagExpression!==DefaultTokenExpression||this.valueExpression!==DefaultTokenExpression){var T=`${this.tagExpression}(=${this.valueExpression})?`,E=`/${this.tagExpression}`;t=EscapeRegex(this.delimiterLeft),n=EscapeRegex(this.delimiterRight);var h=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${T})|(${E}))${n}`,h)}return this}onTag(t){var n=t.match(this.reTag),f=n[1],T=f.charAt(0)==="/";if(T&&(f=f.substring(1,f.length)),this.translateTagNameCallback&&(f=this.translateTagNameCallback(f)),this.skipEventFlag=!1,T)this.emit(`-${f}`),this.skipEventFlag||this.emit("-",f),this.lastTagEnd=f;else{var E=StringToValues(n[3],this.valueConverter);this.emit(`+${f}`,...E),this.skipEventFlag||this.emit("+",f,...E),this.lastTagStart=f}}}const DefaultTokenExpression="[^=]+";var OnParseColorTag=function(s,t,n){var f="color",T;t.on("start",function(){T=s.textStyle.color}).on(`+${f}`,function(E){s.textStyle.setColor(E),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setColor(T),t.skipEvent()}).on("complete",function(){s.textStyle.setColor(T)})},OnParseStrokeColorTag=function(s,t,n){var f="stroke",T;t.on("start",function(){T=s.textStyle.stroke,s.textStyle.setStrokeStyle(null)}).on(`+${f}`,function(E){E===void 0&&(E=T),s.textStyle.setStrokeStyle(E),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){s.textStyle.setStrokeStyle(T)})},OnParseBoldTag=function(s,t,n){var f="b";t.on("start",function(){s.textStyle.setBold(!1)}).on(`+${f}`,function(){s.textStyle.setBold(!0),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setBold(!1),t.skipEvent()})},OnParseItalicTag=function(s,t,n){var f="i";t.on("start",function(){s.textStyle.setItalic(!1)}).on(`+${f}`,function(){s.textStyle.setItalic(!0),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setItalic(!1),t.skipEvent()})},OnParseFontSizeTag=function(s,t,n){var f="size",T;t.on("start",function(){T=s.textStyle.fontSize}).on(`+${f}`,function(E){s.textStyle.setFontSize(E),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setFontSize(T),t.skipEvent()}).on("complete",function(){s.textStyle.setFontSize(T)})},OnParseOffsetYTag=function(s,t,n){var f="y",T;t.on("start",function(){T=s.textStyle.offsetY,s.textStyle.setOffsetY(0)}).on(`+${f}`,function(E){E===void 0&&(E=T),s.textStyle.setOffsetY(E),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetY(0)})},OnParseOffsetXTag=function(s,t,n){var f="x",T;t.on("start",function(){T=s.textStyle.offsetY,s.textStyle.setOffsetX(0)}).on(`+${f}`,function(E){E===void 0&&(E=T),s.textStyle.setOffsetX(E),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){s.textStyle.setOffsetX(0)})},OnParseLeftSpaceTag=function(s,t,n){var f="left",T;t.on("start",function(){T=s.textStyle.leftSpace,s.textStyle.setLeftSpace(0)}).on(`+${f}`,function(E){E===void 0&&(E=T),s.textStyle.setLeftSpace(E),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setLeftSpace(0)})},OnParseRightSpaceTag=function(s,t,n){var f="right",T;t.on("start",function(){T=s.textStyle.rightSpace,s.textStyle.setRightSpace(0)}).on(`+${f}`,function(E){E===void 0&&(E=T),s.textStyle.setRightSpace(E),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){s.textStyle.setRightSpace(0)})},OnParseShadowColorTag=function(s,t,n){var f="shadow",T;t.on("start",function(){T=s.textStyle.shadowColor,s.textStyle.setShadowColor(null)}).on(`+${f}`,function(E){E===void 0&&(E=T),s.textStyle.setShadowColor(E),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){s.textStyle.setShadowColor(T)})},OnParseAlignTag=function(s,t,n){var f="align";t.on(`+${f}`,function(T){s.textStyle.setAlign(T),t.skipEvent()}).on(`-${f}`,function(){s.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){s.textStyle.setAlign()})},OnParseImageTag$1=function(s,t,n){var f="img";t.on(`+${f}`,function(T){var E=s.imageManager.get(T);AppendImage.call(s,E.key,E.frame,{width:E.width,hieght:E.height,leftSpace:E.left,rightSpace:E.right,color:E.tintFill?s.textStyle.color:void 0}),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},OnParseImageTag=function(s,t,n){var f="space";t.on(`+${f}`,function(T){AppendSpace.call(s,T),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},OnParseTypingSpeedTag=function(s,t,n){var f="speed";t.on(`+${f}`,function(T){AppendCommand$2(s,T),t.skipEvent()}).on(`-${f}`,function(){AppendCommand$2(s,void 0),t.skipEvent()})},SetTypingSpeed=function(s){this.typeWriter.setTypingSpeed(s)},AppendCommand$2=function(s,t){AppendCommand$3.call(s,"speed",SetTypingSpeed,t,s)},OnParsePlaySoundEffectTag=function(s,t,n){var f="se";t.on(`+${f}`,function(T,E){AppendCommand$3.call(s,f,PlaySoundEffect,[T,E],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2";t.on(`+${f}`,function(T,E){AppendCommand$3.call(s,f,PlaySoundEffect2,[T,E],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},PlaySoundEffect=function(s){if(!this.skipSoundEffect){var t=s[0],n=s[1];this.soundManager.playSoundEffect(t),n&&this.soundManager.fadeInSoundEffect(n)}},PlaySoundEffect2=function(s){if(!this.skipSoundEffect){var t=s[0],n=s[1];this.soundManager.playSoundEffect2(t),n&&this.soundManager.fadeInSoundEffect2(n)}},OnParseFadeInSoundEffectTag=function(s,t,n){var f="se.fadein";t.on(`+${f}`,function(T){AppendCommand$3.call(s,f,FadeInSoundEffect,T,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.fadein";t.on(`+${f}`,function(T){AppendCommand$3.call(s,f,FadeInSoundEffect2,T,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},FadeInSoundEffect=function(s){this.soundManager.fadeInSoundEffect(s)},FadeInSoundEffect2=function(s){this.soundManager.fadeInSoundEffect2(s)},OnParseFadeOutSoundEffectTag=function(s,t,n){var f="se.fadeout";t.on(`+${f}`,function(T,E){E=E==="stop",AppendCommand$3.call(s,f,FadeOutSoundEffect,[T,E],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.fadeout";t.on(`+${f}`,function(T,E){E=E==="stop",AppendCommand$3.call(s,f,FadeOutSoundEffect2,[T,E],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},FadeOutSoundEffect=function(s){this.soundManager.fadeOutSoundEffect(...s)},FadeOutSoundEffect2=function(s){this.soundManager.fadeOutSoundEffect2(...s)},OnParseSetSoundEffectVolumeTag=function(s,t,n){var f="se.volume";t.on(`+${f}`,function(T){AppendCommand$3.call(s,f,SetSoundEffectVolume,T,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.volume";t.on(`+${f}`,function(T){AppendCommand$3.call(s,f,SetSoundEffectVolume2,T,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},SetSoundEffectVolume=function(s){this.soundManager.setSoundEffectVolume(s,!0)},SetSoundEffectVolume2=function(s){this.soundManager.setSoundEffectVolume2(s,!0)},OnParseSetSoundEffectMuteTag=function(s,t,n){var f="se.mute";t.on(`+${f}`,function(){AppendCommand$3.call(s,f,SetSoundEffectMute,void 0,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.mute";t.on(`+${f}`,function(){AppendCommand$3.call(s,f,SetSoundEffect2Mute,void 0,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se.unmute";t.on(`+${f}`,function(){AppendCommand$3.call(s,f,SetSoundEffectUnMute,void 0,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="se2.unmute";t.on(`+${f}`,function(){AppendCommand$3.call(s,f,SetSoundEffect2UnMute,void 0,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},SetSoundEffectMute=function(){this.soundManager.setSoundEffectMute(!0)},SetSoundEffect2Mute=function(){this.soundManager.setSoundEffect2Mute(!0)},SetSoundEffectUnMute=function(){this.soundManager.setSoundEffectMute(!1)},SetSoundEffect2UnMute=function(){this.soundManager.setSoundEffect2Mute(!1)},OnParsePlayBackgroundMusicTag=function(s,t,n){var f="bgm";t.on(`+${f}`,function(T,E){AppendCommand$3.call(s,f,PlayBackgroundMusic,[T,E],s),t.skipEvent()}).on(`-${f}`,function(){AppendCommand$3.call(s,"bgm.stop",StopBackgroundMusic,void 0,s),t.skipEvent()});var f="bgm2";t.on(`+${f}`,function(T,E){AppendCommand$3.call(s,f,PlayBackgroundMusic2,[T,E],s),t.skipEvent()}).on(`-${f}`,function(){AppendCommand$3.call(s,"bgm2.stop",StopBackgroundMusic2,void 0,s),t.skipEvent()})},PlayBackgroundMusic=function(s){var t=s[0],n=s[1];this.soundManager.playBackgroundMusic(t),n&&this.soundManager.fadeInBackgroundMusic(n)},StopBackgroundMusic=function(){this.soundManager.stopBackgroundMusic()},PlayBackgroundMusic2=function(s){var t=s[0],n=s[1];this.soundManager.playBackgroundMusic2(t),n&&this.soundManager.fadeInBackgroundMusic2(n)},StopBackgroundMusic2=function(){this.soundManager.stopBackgroundMusic2()},OnParseFadeInBackgroundMusicTag=function(s,t,n){var f="bgm.fadein";t.on(`+${f}`,function(T){AppendCommand$3.call(s,f,FadeInBackgroundMusic,T,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.fadein";t.on(`+${f}`,function(T){AppendCommand$3.call(s,f,FadeInBackgroundMusic2,T,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},FadeInBackgroundMusic=function(s){this.soundManager.fadeInBackgroundMusic(s)},FadeInBackgroundMusic2=function(s){this.soundManager.fadeInBackgroundMusic2(s)},OnParseFadeOutBackgroundMusicTag=function(s,t,n){var f="bgm.fadeout";t.on(`+${f}`,function(T,E){E=E==="stop",AppendCommand$3.call(s,f,FadeOutBackgroundMusic,[T,E],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.fadeout";t.on(`+${f}`,function(T,E){E=E==="stop",AppendCommand$3.call(s,f,FadeOutBackgroundMusic2,[T,E],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},FadeOutBackgroundMusic=function(s){this.soundManager.fadeOutBackgroundMusic(...s)},FadeOutBackgroundMusic2=function(s){this.soundManager.fadeOutBackgroundMusic2(...s)},OnParseCrossFadeBackgroundMusicTag=function(s,t,n){var f="bgm.cross";t.on(`+${f}`,function(T,E){AppendCommand$3.call(s,f,CrossFadeBackgroundMusic,[T,E],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.cross";t.on(`+${f}`,function(T,E){AppendCommand$3.call(s,f,CrossFadeBackgroundMusic2,[T,E],s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},CrossFadeBackgroundMusic=function(s){this.soundManager.crossFadeBackgroundMusic(...s)},CrossFadeBackgroundMusic2=function(s){this.soundManager.crossFadeBackgroundMusic2(...s)},OnParsePauseBackgroundMusicTag=function(s,t,n){var f="bgm.pause";t.on(`+${f}`,function(){AppendCommand$3.call(s,f,PauseBackgroundMusic,void 0,s),t.skipEvent()}).on(`-${f}`,function(){AppendCommand$3.call(s,"bgm.resume",ResumeBackgroundMusic,void 0,s),t.skipEvent()});var f="bgm2.pause";t.on(`+${f}`,function(){AppendCommand$3.call(s,f,PauseBackgroundMusic2,void 0,s),t.skipEvent()}).on(`-${f}`,function(){AppendCommand$3.call(s,"bgm2.resume",ResumeBackgroundMusic2,void 0,s),t.skipEvent()})},PauseBackgroundMusic=function(){this.soundManager.pauseBackgroundMusic()},ResumeBackgroundMusic=function(){this.soundManager.resumeBackgroundMusic()},PauseBackgroundMusic2=function(){this.soundManager.pauseBackgroundMusic2()},ResumeBackgroundMusic2=function(){this.soundManager.resumeBackgroundMusic2()},OnParseSetBackgroundMusicVolumeTag=function(s,t,n){var f="bgm.volume";t.on(`+${f}`,function(T){AppendCommand$3.call(s,f,SetBackgroundMusicVolume,T,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.volume";t.on(`+${f}`,function(T){AppendCommand$3.call(s,f,SetBackgroundMusicVolume2,T,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},SetBackgroundMusicVolume=function(s){this.soundManager.setBackgroundMusicVolume(s)},SetBackgroundMusicVolume2=function(s){this.soundManager.setBackgroundMusicVolume2(s)},OnParseSetBackgroundMusicMuteTag=function(s,t,n){var f="bgm.mute";t.on(`+${f}`,function(){AppendCommand$3.call(s,f,SetBackgroundMusicMute,void 0,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.mute";t.on(`+${f}`,function(){AppendCommand$3.call(s,f,SetBackgroundMusic2Mute,void 0,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm.unmute";t.on(`+${f}`,function(){AppendCommand$3.call(s,f,SetBackgroundMusicUnMute,void 0,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()});var f="bgm2.unmute";t.on(`+${f}`,function(){AppendCommand$3.call(s,f,SetBackgroundMusic2UnMute,void 0,s),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},SetBackgroundMusicMute=function(){this.soundManager.setBackgroundMusicMute(!0)},SetBackgroundMusic2Mute=function(){this.soundManager.setBackgroundMusic2Mute(!0)},SetBackgroundMusicUnMute=function(){this.soundManager.setBackgroundMusicMute(!1)},SetBackgroundMusic2UnMute=function(){this.soundManager.setBackgroundMusic2Mute(!1)},OnParseFadeInCameraTag=function(s,t,n){var f="camera.fadein";t.on(`+${f}`,function(T,E,h,S){AppendCommand$3.call(s,f,PlayFadeInEffect,[T,E,h,S],s),t.skipEvent()})},PlayFadeInEffect=function(s){this.cameraTarget.fadeIn(...s)},OnParseFadeOutCameraTag=function(s,t,n){var f="camera.fadeout";t.on(`+${f}`,function(T,E,h,S){AppendCommand$3.call(s,f,PlayFadeOutEffect,[T,E,h,S],s),t.skipEvent()})},PlayFadeOutEffect=function(s){this.cameraTarget.fadeOut(...s)},OnParseShakeCameraTag=function(s,t,n){var f="camera.shake";t.on(`+${f}`,function(T,E){AppendCommand$3.call(s,f,PlayShakeEffect,[T,E],s),t.skipEvent()})},PlayShakeEffect=function(s){this.cameraTarget.shake(...s)},OnParseFlashCameraTag=function(s,t,n){var f="camera.flash";t.on(`+${f}`,function(T,E,h,S){AppendCommand$3.call(s,f,PlayFlashEffect,[T,E,h,S],s),t.skipEvent()})},PlayFlashEffect=function(s){this.cameraTarget.flash(...s)},OnParseZoomCameraTag=function(s,t,n){var f="camera.zoom";t.on(`+${f}`,function(T){AppendCommand$3.call(s,f,Zoom,T,s),t.skipEvent()}).on(`+${f}.to`,function(T,E,h){AppendCommand$3.call(s,"camera.zoom.to",ZoomTo,[T,E,h],s),t.skipEvent()})},Zoom=function(s){this.cameraTarget.setZoom(s)},ZoomTo=function(s){this.cameraTarget.zoomTo(...s)};const DegToRad$c=Phaser.Math.DegToRad;var OnParseRotateCameraTag=function(s,t,n){var f="camera.rotate";t.on(`+${f}`,function(T){T=DegToRad$c(T),AppendCommand$3.call(s,f,Rotate$1,T,s),t.skipEvent()}).on(`+${f}.to`,function(T,E,h){T=DegToRad$c(T),AppendCommand$3.call(s,"camera.rotate.to",RotateTo,[T,E,h],s),t.skipEvent()})},Rotate$1=function(s){this.cameraTarget.setRotation(s)},RotateTo=function(s){var t=s[0],n=s[1],f=s[2];this.cameraTarget.rotateTo(t,!1,n,f)},OnParseScrollCameraTag=function(s,t,n){var f="camera.scroll";t.on(`+${f}`,function(T,E){AppendCommand$3.call(s,f,Scroll,[T,E],s),t.skipEvent()}).on(`+${f}.to`,function(T,E,h,S){AppendCommand$3.call(s,"camera.scroll.to",ScrollTo,[T,E,h,S],s),t.skipEvent()})},Scroll=function(s){this.cameraTarget.setScroll(...s)},ScrollTo=function(s){var t=s[0],n=s[1],f=s[2],T=s[3],E=this.cameraTarget,h=E.scrollX,S=E.scrollY;E.setScroll(t,n),t+=E.centerX,n+=E.centerY,E.setScroll(h,S),E.pan(t,n,f,T)},OnParseWaitTag=function(s,t,n){var f="wait",T="click";t.on(`+${f}`,function(E){AppendCommand$1(s,E),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()}).on(`+${T}`,function(){AppendCommand$1(s,"click"),t.skipEvent()}).on(`-${T}`,function(){t.skipEvent()})},Wait$2=function(s){this.typeWriter.wait(s)},AppendCommand$1=function(s,t){AppendCommand$3.call(s,"wait",Wait$2,t,s)},OnParseNewLineTag=function(s,t,n){var f="r";t.on(`+${f}`,function(){AppendText.call(s,`
`),t.skipEvent()}).on(`-${f}`,function(){t.skipEvent()})},OnParsePageBreakTag=function(s,t,n){for(var f=["pagebreak","pb"],T=0,E=f.length;T<E;T++){var h=f[T];t.on(`+${h}`,function(){AppendText.call(s,"\f"),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})}},OnParseContentOff=function(s,t,n){var f="content.off";t.on(`+${f}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},OnParseContentOn=function(s,t,n){var f="content.on";t.on(`+${f}`,function(){t.setContentOutputEnable(),t.skipEvent()})},OnParseContent=function(s,t,n){t.on("content",function(f){if(t.contentOutputEnable)AppendText.call(s,f);else{var T=`+${t.lastTagStart}`;s.emit(`parser.${T}#content`,t,f)}})},OnParseCustomTag=function(s,t,n){t.on("start",function(){s.emit("parser.start",t)}).on("+",function(f,...T){if(!t.skipEventFlag){var E=`+${f}`,h=T;s.emit(`parser.${E}`,t,...T,h),AppendCommand(s,E,h)}}).on("-",function(f){if(!t.skipEventFlag){var T=`-${f}`,E=[];s.emit(`parser.${T}`,t,E),AppendCommand(s,T,E)}}).on("complete",function(){s.emit("parser.complete",t)})},FireEvent$1=function(s,t){var n=`tag.${t}`;s==null?this.emit(n):this.emit(n,...s)},AppendCommand=function(s,t,n){AppendCommand$3.call(s,t,FireEvent$1,n,s)};const ParseCallbacks$2=[OnParseColorTag,OnParseStrokeColorTag,OnParseBoldTag,OnParseItalicTag,OnParseFontSizeTag,OnParseShadowColorTag,OnParseAlignTag,OnParseOffsetYTag,OnParseOffsetXTag,OnParseLeftSpaceTag,OnParseRightSpaceTag,OnParseImageTag$1,OnParseImageTag,OnParseTypingSpeedTag,OnParsePlaySoundEffectTag,OnParseFadeInSoundEffectTag,OnParseFadeOutSoundEffectTag,OnParseSetSoundEffectVolumeTag,OnParseSetSoundEffectMuteTag,OnParsePlayBackgroundMusicTag,OnParseFadeInBackgroundMusicTag,OnParseFadeOutBackgroundMusicTag,OnParseCrossFadeBackgroundMusicTag,OnParsePauseBackgroundMusicTag,OnParseSetBackgroundMusicVolumeTag,OnParseSetBackgroundMusicMuteTag,OnParseFadeInCameraTag,OnParseFadeOutCameraTag,OnParseShakeCameraTag,OnParseFlashCameraTag,OnParseZoomCameraTag,OnParseRotateCameraTag,OnParseScrollCameraTag,OnParseWaitTag,OnParseNewLineTag,OnParsePageBreakTag,OnParseContentOff,OnParseContentOn,OnParseContent,OnParseCustomTag];var AddParseCallbacks=function(s,t,n){for(var f=0,T=ParseCallbacks$2.length;f<T;f++)ParseCallbacks$2[f](s,t,n)},PreProcess=function(s,t){for(var n=s.commentLineStart,f=t.split(`
`),T=0,E=f.length;T<E;T++){var h=f[T];h===""||(h.trim().length===0||n&&h.startsWith(n))&&(f[T]="")}return f.join("")};const GetValue$2R=Phaser.Utils.Objects.GetValue;class Parser extends BracketParser{constructor(t,n){n===void 0&&(n={}),n.hasOwnProperty("delimiters")||(n.delimiters="[]"),super(n),AddParseCallbacks(t,this,n),this.setCommentLineStartSymbol(GetValue$2R(n,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(PreProcess(this,t)),this}}const TypingSpeedMethods$1={setDefaultTypingSpeed(s){return this.defaultSpeed=s,this},setTypingSpeed(s){return s===void 0&&(s=this.defaultSpeed),this.speed=s,this}},PageFadeOutCompleteEvent="page.fadeout",StopPlayEvent="_remove.play",ClearEvents$1=[PageFadeOutCompleteEvent,StopPlayEvent];var FadeOutPage=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(PageFadeOutCompleteEvent),this;var s=this.children.filter(function(f){return f.renderable}),t=this.fadeOutPageCallback(s,this.fadeOutPageDuration);if(!t)this.emit(PageFadeOutCompleteEvent);else if(t.once)t.once("complete",function(){this.emit(PageFadeOutCompleteEvent)},this);else if(t.then){var n=this;t.then(function(){n.emit(PageFadeOutCompleteEvent)})}else this.emit(PageFadeOutCompleteEvent);return this},WaitEvent=function(s,t){return new Promise(function(n,f){s.once(t,function(){n()})})},WaitComplete=function(s){return WaitEvent(s,"complete")},Start=function(s){return this.children=s,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(s),this.typing(),WaitComplete(this)};const TypingDelayTimerType="delay",TypingAnimationTimerType="anim";var Typing=function(s){s===void 0&&(s=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var n=this.getNextChild();if(!n){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(n.renderable){var f=this.animationConfig;if(f.duration>0){var T=this.timeline.addTimer({name:TypingAnimationTimerType,target:n,duration:f.duration,yoyo:f.yoyo,onStart:f.onStart,onProgress:f.onProgress,onComplete:f.onComplete});this.skipTypingAnimation&&T.seek(1)}else f.onStart&&f.onStart(n,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",n);var E=this.nextChild;if(E&&!(this.skipSpaceEnable&&IsSpaceChar(E))){if(t+=this.speed+s,s=0,t>0){this.typingTimer=this.timeline.addTimer({name:TypingDelayTimerType,target:this,duration:t,onComplete:function(h,S,e){h.typingTimer=void 0,Typing.call(h,e.remainder)}});break}}}else IsCommand(n)&&n.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},Pause=function(){return this.timeline.pause(),this},Resume=function(){return this.timeline.resume(),this},PauseTyping=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},ResumeTyping=function(s){return this.isTypingPaused?(s===void 0&&(s=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=s):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(s)),this):this},IsWaitCameraEffect=function(s){switch(s){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},IsWaitGameObject=function(s,t){var n=t.split(".");return s.gameObjectManagers.hasOwnProperty(n[0])},WaitGameObject=function(s,t,n,f){var T=s.waitEventManager,E=t.split("."),h=E[0],S=s.getGameObjectManager(h),e=`wait.${h}`;switch(E.length){case 1:T.waitGameObjectManagerEmpty(h),s.emit(e);return;case 2:var d=E[1];T.waitGameObjectDestroy(h,d),s.emit(e,d);return;case 3:var d=E[1],y=E[2],c=S.getProperty(d,y);if(typeof c=="number"){T.waitGameObjectTweenComplete(h,d,y),s.emit(e,d,y);return}var u=y,l=u.startsWith("!");if(l&&(u=u.substring(1)),S.hasData(d,u)){T.waitGameObjectDataFlag(h,d,u,!l),s.emit(e,d,u);return}else{T.waitTime(0);return}}};const KeyCodes=Phaser.Input.Keyboard.KeyCodes;var WaitAny=function(s,t,n,f){var T=s.waitEventManager;T.clearWaitCompleteCallbacks().addWaitCompleteCallback(n,f),typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var E=0,h=t.length;E<h;E++){var S=t[E];if(S==null||S==="wait"){var e=s.waitEventManager.getWaitCompleteTriggerCallback();s.emit("wait",e)}else if(typeof S=="number"||!isNaN(S)){var d=parseFloat(S);T.waitTime(d),s.emit("wait.time",d)}else if(S==="click")T.waitClick(),s.emit("wait.click");else if(S==="se"){T.waitSoundEffectComplete();var y=s.soundManager.getLastSoundEffect();s.emit("wait.music",y)}else if(S==="se2"){T.waitSoundEffect2Complete();var y=s.soundManager.getLastSoundEffect2();s.emit("wait.music",y)}else if(S==="bgm"){T.waitBackgroundMusicComplete();var y=s.soundManager.getBackgroundMusic();s.emit("wait.music",y)}else if(S==="bgm2"){T.waitBackgroundMusic2Complete();var y=s.soundManager.getBackgroundMusic2();s.emit("wait.music",y)}else if(KeyCodes.hasOwnProperty(S.toUpperCase()))T.waitKeyDown(S),s.emit("wait.keydown",S);else if(IsWaitCameraEffect(S))T.waitCameraEffectComplete(S),s.emit("wait.camera",S);else if(IsWaitGameObject(s,S))WaitGameObject(s,S);else{var e=s.waitEventManager.getWaitCompleteTriggerCallback();s.emit(`wait.${S}`,e)}}},Wait$1=function(s){return this.ignoreWait?this:(this.pauseTyping(),WaitAny(this.textPlayer,s,this.resumeTyping,this),this)},SetIgnoreWait$1=function(s){return s===void 0&&(s=!0),this.ignoreWait=s,this},SetSkipSpaceEnable=function(s){return s===void 0&&(s=!0),this.skipSpaceEnable=s,this},SetSkipTypingAnimation=function(s){if(s===void 0&&(s=!0),this.skipTypingAnimation=s,s)for(var t=this.timeline.getTimers(TypingAnimationTimerType),n=0,f=t.length;n<f;n++)t[n].seek(1);return this},SetSkipSoundEffect=function(s){if(s===void 0&&(s=!0),this.skipSoundEffect=s,s){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},SkipCurrentTypingDelay=function(){return this.typingTimer&&this.typingTimer.seek(1),this},Methods$d={fadeOutPage:FadeOutPage,start:Start,typing:Typing,pause:Pause,resume:Resume,pauseTyping:PauseTyping,resumeTyping:ResumeTyping,wait:Wait$1,setIgnoreWait:SetIgnoreWait$1,setSkipSpaceEnable:SetSkipSpaceEnable,setSkipTypingAnimation:SetSkipTypingAnimation,setSkipSoundEffect:SetSkipSoundEffect,skipCurrentTypingDelay:SkipCurrentTypingDelay};Object.assign(Methods$d,TypingSpeedMethods$1);const GetValue$2Q=Phaser.Utils.Objects.GetValue;class TypeWriter{constructor(t,n){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(GetValue$2Q(n,"onTypingStart",SetChildrenInvisible)),this.setDefaultTypingSpeed(GetValue$2Q(n,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(GetValue$2Q(n,"skipSpace",!1)),this.setAnimationConfig(GetValue$2Q(n,"animation",void 0)),this.setMinSizeEnable(GetValue$2Q(n,"minSizeEnable",!1)),this.setFadeOutPageCallback(GetValue$2Q(n,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=SetChildVisible),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var SetChildVisible=function(s){s.setVisible&&s.setVisible()},SetChildrenInvisible=function(s){for(var t=0,n=s.length;t<n;t++){var f=s[t];f.setVisible&&f.setVisible(!1)}};Object.assign(TypeWriter.prototype,EventEmitterMethods$1,Methods$d);class SpriteBob extends BobBase{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}const AnimationMethods={playAnimation(s,t){return this.has(s)||this.add(s),this.get(s).playAnimation(t),this},stopAnimation(s){return this.has(s)?(this.get(s).stopAnimation(),this):this},chainAnimation(s,t){return this.has(s)?(this.get(s).chainAnimation(t),this):this},pauseAnimation(s){return this.has(s)?(this.get(s).pauseAnimation(),this):this}};var Methods$c={};Object.assign(Methods$c,AnimationMethods);class SpriteManager extends GOManager{constructor(t,n){n===void 0&&(n={}),n.BobClass=SpriteBob,super(t,n)}setCreateGameObjectCallback(t,n){return!t||t==="sprite"?t=CreateSprite:t==="image"&&(t=CreateImage$1),super.setCreateGameObjectCallback(t,n),this}}var CreateSprite=function(s,t,n){return typeof n!="string"&&typeof n!="number"&&(n=void 0),s.add.sprite(0,0,t,n)},CreateImage$1=function(s,t,n){return typeof n!="string"&&typeof n!="number"&&(n=void 0),s.add.image(0,0,t,n)};Object.assign(SpriteManager.prototype,Methods$c);var IsPlayAnimationTag=function(s,t){return s.length===3&&s[0]===t&&s[2]==="play"},IsStopAnimationTag=function(s,t){return s.length===3&&s[0]===t&&s[2]==="stop"},OnParsePlayAnimationTag=function(s,t,n){var f=n.name;t.on("+",function(T,...E){if(!t.skipEventFlag){var h=T.split("."),S;if(IsPlayAnimationTag(h,f))S=h[1];else return;AppendCommand$3.call(s,`${f}.play`,PlayAnimation,[f,S,E],s),t.skipEvent()}}).on("+",function(T){if(!t.skipEventFlag){var E=T.split("."),h;if(IsStopAnimationTag(E,f))h=E[1];else return;AppendCommand$3.call(s,`${f}.stop`,StopAnimation,[f,h],s),t.skipEvent()}}).on("-",function(T){if(!t.skipEventFlag){var E=T.split("."),h;if(IsPlayAnimationTag(E,f))h=E[1];else return;AppendCommand$3.call(s,`${f}.stop`,StopAnimation,[f,h],s),t.skipEvent()}})},PlayAnimation=function(s){var t,n,f;[t,n,f]=s;var T=f.shift(),E=this.getGameObjectManager(t);E.playAnimation(n,T),f.length>0&&E.chainAnimation(n,f)},StopAnimation=function(s){var t,n;[t,...n]=s;var f=this.getGameObjectManager(t);f.stopAnimation(...n)},IsPauseAnimationTag=function(s,t){return s.length===3&&s[0]===t&&s[2]==="pause"},OnParsePauseAnimationTag=function(s,t,n){var f=n.name;t.on("+",function(T){if(!t.skipEventFlag){var E=T.split("."),h;if(IsPauseAnimationTag(E,f))h=E[1];else return;AppendCommand$3.call(s,`${f}.pause`,PauseAnimation,[f,h],s),t.skipEvent()}})},PauseAnimation=function(s){var t,n;[t,...n]=s;var f=this.getGameObjectManager(t);f.pauseAnimation(...n)},IsChainAnimationTag=function(s,t){return s.length===3&&s[0]===t&&s[2]==="chain"},OnParseChainAnimationTag=function(s,t,n){var f=n.name;t.on("+",function(T){if(!t.skipEventFlag){var E=T.split("."),h;if(IsChainAnimationTag(E,f))h=E[1];else return;var S=Array.prototype.slice.call(arguments,1);AppendCommand$3.call(s,`${f}.chain`,ChainAnimation,[f,h,S],s),t.skipEvent()}})},ChainAnimation=function(s){var t,n;[t,...n]=s;var f=this.getGameObjectManager(t);f.chainAnimation(...n)};const ParseCallbacks$1=[OnParsePlayAnimationTag,OnParsePauseAnimationTag,OnParseChainAnimationTag];var AddSpriteManager=function(s){s===void 0&&(s={}),s.name="sprite",s.parseCallbacks=ParseCallbacks$1,this.addGameObjectManager(s,SpriteManager)},IsAddGameObjectTag=function(s,t){return s.length===2&&s[0]===t},OnParseAddGameObjectTag=function(s,t,n){var f=n.name;t.on("+",function(T,...E){if(!t.skipEventFlag){var h=T.split("."),S;if(IsAddGameObjectTag(h,f))S=h[1];else return;AppendCommand$3.call(s,`${f}.add`,AddGameObject,[f,S,...E],s),t.skipEvent()}}).on("-",function(T){if(!t.skipEventFlag){var E=T.split("."),h;if(IsAddGameObjectTag(E,f))h=E[1];else return;AppendCommand$3.call(s,`${f}.remove`,RemoveGameObject,[f,h],s),t.skipEvent()}})},AddGameObject=function(s){var t,n;[t,...n]=s;var f=this.getGameObjectManager(t);f.add(...n)},RemoveGameObject=function(s){var t,n;[t,...n]=s;var f=this.getGameObjectManager(t);f.remove(...n)},OnParseRemoveAllGameObjectsTag=function(s,t,n){var f=n.name;t.on("-",function(T){t.skipEventFlag||T===f&&(AppendCommand$3.call(s,`${f}.removeall`,RemoveAllSprites,f,s),t.skipEvent())})},RemoveAllSprites=function(s){var t=this.getGameObjectManager(s);t.removeAll()},IsPropTag=function(s,t){return s.length===3&&s[0]===t},OnParseCallGameObjectMethodTag=function(s,t,n){var f=n.name;t.on("+",function(T,...E){if(!t.skipEventFlag){var h=T.split("."),S,e;if(IsPropTag(h,f))S=h[1],e=h[2];else return;AppendCommand$3.call(s,`${f}.call`,CallMethod,[f,S,e,...E],s),t.skipEvent()}})},CallMethod=function(s){var t,n,f,T;[t,n,f,...T]=s;var E=`${t}.${f}`;if(this.emit(E,n,...T),!(this.listenerCount(E)>0)){var h=this.getGameObjectManager(t);h.hasMethod(n,f)?h.call(n,f,...T):h.setProperty(n,f,T[0])}},EaseMode={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},IsEasePropertyTag=function(s,t){return s.length===4&&s[0]===t&&EaseMode[s[3]]},OnParseEaseGameObjectPropertyTag=function(s,t,n){var f=n.name;s.getGameObjectManager(f),t.on("+",function(T,E,h,S,e){if(!t.skipEventFlag){var d=T.split("."),y,c,u;if(IsEasePropertyTag(d,f))y=d[1],c=d[2],u=d[3];else return;typeof S=="number"&&(e=S,S=void 0),AppendCommand$3.call(s,`${f}.ease`,EaseProperty,[f,y,c,E,h,S,e,u],s),t.skipEvent()}})},EaseProperty=function(s){var t,n,f,T,E,h,S,e;[t,n,f,T,E,h,S,e]=s;var d=this.getGameObjectManager(t),y=d.getProperty(n,f);if(typeof y=="number"){e.endsWith("Left")||e.endsWith("Up")?e.startsWith("to")||e.startsWith("yoyo")?T=y-T:e.startsWith("from")&&(d.setProperty(n,f,y-T),T=y):e.endsWith("Right")||e.endsWith("Down")?e.startsWith("to")||e.startsWith("yoyo")?T=y+T:e.startsWith("from")&&(d.setProperty(n,f,y+T),T=y):e==="from"&&(d.setProperty(n,f,T),T=y);var c=e.startsWith("yoyo");d.easeProperty(n,f,T,E,h,S,c)}};const ParseCallbacks=[OnParseAddGameObjectTag,OnParseRemoveAllGameObjectsTag,OnParseCallGameObjectMethodTag,OnParseEaseGameObjectPropertyTag],AddGameObjectManager=GameObjectManagerMethods$1.addGameObjectManager,GameObjectManagerMethods={addGameObjectManager(s,t){s===void 0&&(s={});var n=s.name;n||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),AddGameObjectManager.call(this,s,t);var f=s.parseCallbacks;f?f=[...f,...ParseCallbacks]:f=ParseCallbacks;for(var T=0,E=f.length;T<E;T++)f[T](this,this.parser,s);return this}};var SetClickTarget=function(s){return this.waitEventManager.setClickTarget(s),this},SetCameraTarget=function(s){return this.waitEventManager.setCameraTarget(s),this},SetNextPageInput=function(s){var t=this;s?typeof s=="function"?this.nextPageInput=function(n,f){var T=t.waitEventManager;T.clearWaitCompleteCallbacks().addWaitCompleteCallback(n,f);var E=T.getWaitCompleteTriggerCallback();s.call(t,E)}:this.nextPageInput=function(n,f){WaitAny(t,s,n,f)}:this.nextPageInput=null},AddImage=function(s,t){return this.imageManager.add(s,t),this};const PlayMethods={play(s){return this.isPlaying?this:(this.removeChildren(),this.parser.start(s),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(s){var t=WaitComplete(this);return this.play(s),t}};var TypingNextPage=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once(PageFadeOutCompleteEvent,_TypingNextPage,this).fadeOutPage(),this)},_TypingNextPage=function(){var s=this.runWrap(this.lastWrapResult);this.lastWrapResult=s,this.emit("page.start");var t=function(){this.emit(StopPlayEvent),s.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?TypingNextPage.call(this):this.nextPageInput&&this.nextPageInput(TypingNextPage,this))};this.once(StopPlayEvent,function(){this.typeWriter.off("complete",t,this)},this),this.typeWriter.once("complete",t,this).start(s.children)};const PauseMethods={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},ResumeMethods={resume(){return this.timeline.resume(),this},resumeTyping(s){return this.typeWriter.resumeTyping(s),this}};var Wait=function(s){return this.typeWriter.wait(s),this};const TypingSpeedMethods={setDefaultTypingSpeed(s){return this.defaultTypingSpeed=s,this},setTypingSpeed(s){return this.typingSpeed=s,this}};var SetIgnoreWait=function(s){return this.typeWriter.setIgnoreWait(s),this},SetIgnoreNextPageInput=function(s){return s===void 0&&(s=!0),this.ignoreNextPageInput=s,this},ShowPage=function(){if(!this.isPlaying||!this.isPageTyping)return this;var s=this.typeWriter.speed,t=this.typeWriter.ignoreWait,n=this.typeWriter.skipTypingAnimation,f=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(s).setIgnoreWait(t).setSkipTypingAnimation(n).setSkipSoundEffect(f)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this};const SpriteMethods={getSprite(s){return this.getGameObject("sprite",s)},addSprite(s,t){return this.addGameObject("sprite",s,t),this}},ContentMethods={setContentOutputEnable(s){return this.parser.setContentOutputEnable(s),this},setContentCallback(s,t){return this.contentCallback=s,this.contentCallbackScope=t,this}};var Methods$b={setClickTarget:SetClickTarget,setCameraTarget:SetCameraTarget,setNextPageInput:SetNextPageInput,addImage:AddImage,typingNextPage:TypingNextPage,wait:Wait,setIgnoreWait:SetIgnoreWait,setIgnoreNextPageInput:SetIgnoreNextPageInput,showPage:ShowPage};Object.assign(Methods$b,GameObjectManagerMethods,PlayMethods,PauseMethods,ResumeMethods,TypingSpeedMethods,SpriteMethods,ContentMethods);var ClearEvents=function(s){for(var t=0,n=ClearEvents$1.length;t<n;t++)s.emit(ClearEvents$1[t])};const IsPlainObject$L=Phaser.Utils.Objects.IsPlainObject,GetValue$2P=Phaser.Utils.Objects.GetValue;class TextPlayer extends Extend(DynamicText){constructor(t,n,f,T,E,h){IsPlainObject$L(n)?h=n:IsPlainObject$L(T)&&(h=T),h===void 0&&(h={});var S=h.text;delete h.text,super(t,n,f,T,E,h),this.type="rexTextPlayer",this.initManagers(t,h),this.parser=new Parser(this,GetValue$2P(h,"parser",void 0)),this.typeWriter=new TypeWriter(this,GetValue$2P(h,"typing",void 0)),this._imageManager=void 0;var e=GetValue$2P(h,"images",void 0);e&&this.addImage(e);var d=GetValue$2P(h,"sprites");d!==!1&&d!==null&&AddSpriteManager.call(this,d),this.setIgnoreNextPageInput(GetValue$2P(h,"ignoreNextPageInput",!1)),this.setNextPageInput(GetValue$2P(h,"nextPageInput",null)),this.isPlaying=!1,S&&this.play(S)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new ImageManager(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||this.ignoreDestroy||(ClearEvents(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(TextPlayer.prototype,Methods$b);ObjectFactory.register("textPlayer",function(s,t,n,f,T){var E=new TextPlayer(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.TextPlayer",TextPlayer);const ElementProperties$1={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},StyleProperties$1={direction:["direction",void 0]};var CopyProperty=function(s,t,n){if(typeof n=="string")s.hasOwnProperty(n)&&(t[n]=s[n]);else{var f=n;if(Array.isArray(f))for(var T=0,E=f.length;T<E;T++)CopyProperty(s,t,f[T]);else for(var n in f)CopyProperty(s,t,n)}},CopyElementConfig=function(s){s===void 0&&(s={});var t={};return CopyProperty(s,t,"inputType"),CopyProperty(s,t,"type"),CopyProperty(s,t,"style"),CopyProperty(s,t,StyleProperties$1),CopyProperty(s,t,ElementProperties$1),t},LastOpenedEditor$1=void 0,SetLastOpenedEditor$1=function(s){s!==LastOpenedEditor$1&&(LastOpenedEditor$1!==void 0&&LastOpenedEditor$1.close(),LastOpenedEditor$1=s)},CloseLastOpenEditor$1=function(s){s===LastOpenedEditor$1&&(LastOpenedEditor$1=void 0)};const GetValue$2O=Phaser.Utils.Objects.GetValue;var SetProperties=function(s,t,n){n===void 0&&(n={});var f,T;for(var E in s)f=s[E],T=GetValue$2O(t,E,f[1]),T!==void 0&&(n[f[0]]=T);return n},StopPropagationTouchEvents=function(s){s.addEventListener("touchstart",callback,!1),s.addEventListener("touchmove",callback,!1),s.addEventListener("touchend",callback,!1),s.addEventListener("mousedown",callback,!1),s.addEventListener("mouseup",callback,!1),s.addEventListener("mousemove",callback,!1)},callback=function(s){s.stopPropagation()},EnterClose=function(){return this.close(),this.emit("keydown-ENTER",this.parent,this),this},OnOpen=function(){this.isOpened=!0,this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",EnterClose,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this)},RemoveElement=function(s){if(s){var t=s.parentElement;t&&t.removeChild(s)}},OnClose=function(){this.isOpened=!1,this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),RemoveElement(this.node),this.node=void 0,this.emit("close",this)};const GetValue$2N=Phaser.Utils.Objects.GetValue;var CreateElement=function(s,t){var n,f=GetValue$2N(t,"inputType",void 0);f===void 0&&(f=GetValue$2N(t,"type","text")),f==="textarea"?(n=document.createElement("textarea"),n.style.resize="none"):(n=document.createElement("input"),n.type=f);var T=GetValue$2N(t,"style",void 0),E=n.style;SetProperties(StyleProperties$1,T,E),E.position="absolute",E.opacity=0,E.pointerEvents="none",E.zIndex=0,E.transform="scale(0)",SetProperties(ElementProperties$1,t,n),StopPropagationTouchEvents(n);var h=s.scene.sys.scale,S=h.isFullscreen?h.fullscreenTarget:document.body;return S.appendChild(n),n.addEventListener("focus",function(e){OnOpen.call(s)}),n.addEventListener("blur",function(e){OnClose.call(s)}),n},Open$2=function(){return this.isOpened?this:this.readOnly?this:(SetLastOpenedEditor$1(this),this.node||(this.node=CreateElement(this,this.nodeConfig)),this.setFocus(),this)},Close$1=function(){return this.isOpened?(CloseLastOpenEditor$1(this),this.setBlur(),this):this},Methods$a={open:Open$2,close:Close$1};const GetValue$2M=Phaser.Utils.Objects.GetValue;class HiddenTextEditBase extends ComponentBase{constructor(t,n){super(t);var f=GetValue$2M(n,"inputType",void 0);f===void 0&&(f=GetValue$2M(n,"type","text")),this.setEnterCloseEnable(GetValue$2M(n,"enterClose",f!=="textarea"));var T=GetValue$2M(n,"onOpen",void 0);T||(T=GetValue$2M(n,"onFocus",void 0)),this.onOpenCallback=T;var E=GetValue$2M(n,"onClose",void 0);E||(E=GetValue$2M(n,"onBlur",void 0)),this.onCloseCallback=E,this.onUpdateCallback=GetValue$2M(n,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=CopyElementConfig(n),this.node=void 0}destroy(){this.close(),super.destroy()}onClickOutside(t){IsPointerInHitArea(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){this.node&&(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node&&(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,n){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,n),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){this.node&&this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){this.node&&(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(t){this.node&&(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,n){return this.node?(this.node.style[t]=n,this):this}getStyle(t){if(this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(HiddenTextEditBase.prototype,Methods$a);var NumberInputUpdateCallback=function(s,t,n){s=s.replace(" ","");var f=n.previousText;if(s===f)return s;if(isNaN(s)){n.emit("nan",s,n),s=f;var T=n.cursorPosition-1;n.setText(s),n.setCursorPosition(T)}else n.previousText=s;return s},SelectRange=function(s){var t=s.parent,n=s.isOpened?s.selectionStart:null,f=s.isOpened?s.selectionEnd:null,T=s.prevSelectionStart,E=s.prevSelectionEnd;if(!(T===n&&E===f)){var h,S;T===null?(h=n,S=f):n===null?(h=T,S=E):(h=Math.min(T,n),S=Math.max(E,f));for(var e=h;e<S;e++){var d;T===null?d=!1:d=e>=T&&e<E;var y;if(n===null?y=!1:y=e>=n&&e<f,d!==y){var c=t.getCharChild(e);if(c){var u=d?"cursorout":"cursorin";t.emit(u,c,e,t)}}}s.prevSelectionStart=n,s.prevSelectionEnd=f}},ScrollToBob=function(s){var t=s.parent,n=0,f=t.width,T=0,E=t.height,h=s.drawX,S=s.drawY,e=h+s.drawTLX,d=h+s.drawTRX,y=S+s.drawTLY,c=S+s.drawBLY,u;e<n?u=n-e:d>f?u=f-d:u=0;var l;y<T?l=T-y:c>E?l=E-c:l=0,t._textOX+=u,t._textOY+=l},MoveCursor=function(s){var t=s.parent,n=t.text,f=s.cursorPosition;if(s.prevCursorPosition!==f){if(s.prevCursorPosition!==null&&s.prevCursorPosition>n.length&&(s.prevCursorPosition=null),s.prevCursorPosition!==null){var T=t.getCharChild(s.prevCursorPosition);T&&(T.text===`
`&&T.clearTextSize(),t.emit("cursorout",T,s.prevCursorPosition,t))}if(f!=null){var T=t.getCharChild(f);T&&(T.text===`
`&&T.copyTextSize(t.lastInsertCursor),ScrollToBob(T),t.emit("cursorin",T,f,t))}t.emit("movecursor",f,s.prevCursorPosition,t),s.prevCursorPosition=f}},ClearSelectRange=function(s){var t=s.prevSelectionStart;if(t!==null){for(var n=s.prevSelectionEnd,f=s.parent,T=t;T<n;T++){var E=f.getCharChild(T);E&&f.emit("cursorout",E,T,f)}s.prevSelectionStart=null,s.prevSelectionEnd=null}},ClearCursor=function(s){var t=s.prevCursorPosition;if(t!==null){var n=s.parent,f=n.getCharChild(t);f&&n.emit("cursorout",f,t,n),s.prevCursorPosition=null}};const GetValue$2L=Phaser.Utils.Objects.GetValue;let HiddenTextEdit$1=class extends HiddenTextEditBase{constructor(t,n){super(t,n),this.setSelectAllWhenFocusEnable(GetValue$2L(n,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,t.on("pointerdown",function(f,T,E,h){var S=t.getNearestChild(T,E),e=t.getCharIndex(S);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(e),this.cursorMoveStartIndex=e,this.firstClickAfterOpen=!1},this).on("pointermove",function(f,T,E,h){if(f.isDown){var S=t.getNearestChild(T,E),e=t.getCharIndex(S);this.cursorMoveStartIndex<e?this.selectText(this.cursorMoveStartIndex,e+1):this.selectText(e,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")}).on("keydown-ENTER",function(){t.emit("keydown-ENTER")})}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,n=this.text;if(this.onUpdateCallback){var f=this.onUpdateCallback(n,t,this);f!=null&&(n=f)}return t.text!==n&&t.setText(n),this.isOpened?this.selectionStart!==this.selectionEnd?(ClearCursor(this),SelectRange(this)):(ClearSelectRange(this),MoveCursor(this)):(ClearSelectRange(this),ClearCursor(this)),this}setNumberInput(){return this.onUpdateCallback=NumberInputUpdateCallback,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}};const GetValue$2K=Phaser.Utils.Objects.GetValue,PropertiesList=["inputType","onOpen","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var CreateHiddenTextEdit=function(s,t){var n=GetValue$2K(t,"edit");return n===void 0&&(n={}),CopyProperty(t,n,PropertiesList),new HiddenTextEdit$1(s,n)},HasValue=function(s,t){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var n=t.split("."),f=s,T=0;T<n.length;T++)if(f.hasOwnProperty(n[T]))f=f[n[T]];else return!1;return!0}else return!1},InjectDefaultConfig=function(s){var t=!s.textArea;if(!HasValue(s,"wrap.vAlign")){var n=t?"center":"top";SetValue(s,"wrap.vAlign",n)}if(HasValue(s,"wrap.charWrap")||SetValue(s,"wrap.charWrap",!0),!HasValue(s,"wrap.maxLines")){var n=t?1:void 0;SetValue(s,"wrap.maxLines",n)}if(t&&SetValue(s,"wrap.wrapWidth",1/0),HasValue(s,"wrap.useDefaultTextHeight")||SetValue(s,"wrap.useDefaultTextHeight",!0),s.edit||(s.edit={}),!HasValue(s.edit,"inputType")){var n=t?"text":"textarea";SetValue(s.edit,"inputType",n)}return s},ExtractByPrefix=function(s,t,n,f){if(n===void 0&&(n="."),f===void 0&&(f={}),!s)return f;if(t in s)return Object.assign(f,s[t]);t+=n;for(var T in s)T.startsWith(t)&&(f[T.replace(t,"")]=s[T]);return f},GetPartialData=function(s,t,n){if(n===void 0&&(n={}),Array.isArray(t))for(var f,T=0,E=t.length;T<E;T++)f=t[T],n[f]=s[f];else for(var f in t)n[f]=s[f];return n},IsKeyValueEqual=function(s,t){for(var n in s)if(!(n in t)||s[n]!==t[n])return!1;for(var n in t)if(!(n in s))return!1;return!0},RegisterCursorStyle=function(s){IsEmpty(s)||this.setCursorStyle(s).on("cursorin",function(t){var n=this.cursorStyle,f=GetPartialData(t.style,n);IsKeyValueEqual(n,f)||(t.styleSave=f,t.modifyStyle(n))},this).on("cursorout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},RegisterFocusStyle=function(s){IsEmpty(s)||this.setFocusStyle(s).on("open",function(){var t=this.background,n=this.focusStyle,f=GetPartialData(t,n);IsKeyValueEqual(n,f)||(t.styleSave=f,t.modifyStyle(n))},this).on("close",function(){var t=this.background;t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},CreateInsertCursorChild=function(s){var t=s.createCharChild("|");return t.text="",t};function Diff(){}Diff.prototype={diff(s,t,n={}){let f=n.callback;typeof n=="function"&&(f=n,n={}),this.options=n;let T=this;function E(l){return f?(setTimeout(function(){f(void 0,l)},0),!0):l}s=this.castInput(s),t=this.castInput(t),s=this.removeEmpty(this.tokenize(s)),t=this.removeEmpty(this.tokenize(t));let h=t.length,S=s.length,e=1,d=h+S;n.maxEditLength&&(d=Math.min(d,n.maxEditLength));let y=[{newPos:-1,components:[]}],c=this.extractCommon(y[0],t,s,0);if(y[0].newPos+1>=h&&c+1>=S)return E([{value:this.join(t),count:t.length}]);function u(){for(let l=-1*e;l<=e;l+=2){let r,a=y[l-1],v=y[l+1],o=(v?v.newPos:0)-l;a&&(y[l-1]=void 0);let p=a&&a.newPos+1<h,m=v&&0<=o&&o<S;if(!p&&!m){y[l]=void 0;continue}if(!p||m&&a.newPos<v.newPos?(r=clonePath(v),T.pushComponent(r.components,void 0,!0)):(r=a,r.newPos++,T.pushComponent(r.components,!0,void 0)),o=T.extractCommon(r,t,s,l),r.newPos+1>=h&&o+1>=S)return E(buildValues(T,r.components,t,s,T.useLongestToken));y[l]=r}e++}if(f)(function l(){setTimeout(function(){if(e>d)return f();u()||l()},0)})();else for(;e<=d;){let l=u();if(l)return l}},pushComponent(s,t,n){let f=s[s.length-1];f&&f.added===t&&f.removed===n?s[s.length-1]={count:f.count+1,added:t,removed:n}:s.push({count:1,added:t,removed:n})},extractCommon(s,t,n,f){let T=t.length,E=n.length,h=s.newPos,S=h-f,e=0;for(;h+1<T&&S+1<E&&this.equals(t[h+1],n[S+1]);)h++,S++,e++;return e&&s.components.push({count:e}),s.newPos=h,S},equals(s,t){return this.options.comparator?this.options.comparator(s,t):s===t||this.options.ignoreCase&&s.toLowerCase()===t.toLowerCase()},removeEmpty(s){let t=[];for(let n=0;n<s.length;n++)s[n]&&t.push(s[n]);return t},castInput(s){return s},tokenize(s){return s.split("")},join(s){return s.join("")}};function buildValues(s,t,n,f,T){let E=0,h=t.length,S=0,e=0;for(;E<h;E++){let y=t[E];if(y.removed){if(y.value=s.join(f.slice(e,e+y.count)),e+=y.count,E&&t[E-1].added){let c=t[E-1];t[E-1]=t[E],t[E]=c}}else{if(!y.added&&T){let c=n.slice(S,S+y.count);c=c.map(function(u,l){let r=f[e+l];return r.length>u.length?r:u}),y.value=s.join(c)}else y.value=s.join(n.slice(S,S+y.count));S+=y.count,y.added||(e+=y.count)}}let d=t[h-1];return h>1&&typeof d.value=="string"&&(d.added||d.removed)&&s.equals("",d.value)&&(t[h-2].value+=d.value,t.pop()),t}function clonePath(s){return{newPos:s.newPos,components:s.components.slice(0)}}const characterDiff=new Diff;function diffChars(s,t,n){return characterDiff.diff(s,t,n)}const extendedWordChars=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,reWhitespace=/\S/,wordDiff=new Diff;wordDiff.equals=function(s,t){return this.options.ignoreCase&&(s=s.toLowerCase(),t=t.toLowerCase()),s===t||this.options.ignoreWhitespace&&!reWhitespace.test(s)&&!reWhitespace.test(t)};wordDiff.tokenize=function(s){let t=s.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&extendedWordChars.test(t[n])&&extendedWordChars.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};const lineDiff=new Diff;lineDiff.tokenize=function(s){let t=[],n=s.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(let f=0;f<n.length;f++){let T=n[f];f%2&&!this.options.newlineIsToken?t[t.length-1]+=T:(this.options.ignoreWhitespace&&(T=T.trim()),t.push(T))}return t};const sentenceDiff=new Diff;sentenceDiff.tokenize=function(s){return s.split(/(\S.+?[.!?])(?=\s+|$)/)};const cssDiff=new Diff;cssDiff.tokenize=function(s){return s.split(/([{}:;,]|\s+)/)};const objectPrototypeToString=Object.prototype.toString,jsonDiff=new Diff;jsonDiff.useLongestToken=!0;jsonDiff.tokenize=lineDiff.tokenize;jsonDiff.castInput=function(s){const{undefinedReplacement:t,stringifyReplacer:n=(f,T)=>typeof T>"u"?t:T}=this.options;return typeof s=="string"?s:JSON.stringify(canonicalize(s,null,null,n),n,"  ")};jsonDiff.equals=function(s,t){return Diff.prototype.equals.call(jsonDiff,s.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function canonicalize(s,t,n,f,T){t=t||[],n=n||[],f&&(s=f(T,s));let E;for(E=0;E<t.length;E+=1)if(t[E]===s)return n[E];let h;if(objectPrototypeToString.call(s)==="[object Array]"){for(t.push(s),h=new Array(s.length),n.push(h),E=0;E<s.length;E+=1)h[E]=canonicalize(s[E],t,n,f,T);return t.pop(),n.pop(),h}if(s&&s.toJSON&&(s=s.toJSON()),typeof s=="object"&&s!==null){t.push(s),h={},n.push(h);let S=[],e;for(e in s)s.hasOwnProperty(e)&&S.push(e);for(S.sort(),E=0;E<S.length;E+=1)e=S[E],h[e]=canonicalize(s[e],t,n,f,e);t.pop(),n.pop()}else h=s;return h}const arrayDiff=new Diff;arrayDiff.tokenize=function(s){return s.slice()};arrayDiff.join=arrayDiff.removeEmpty=function(s){return s};const RemoveItem$7=Phaser.Utils.Array.Remove;var SetText$1=function(s,t){var n=s.text;if(t!==n){if(n==null&&(n=""),RemoveItem$7(s.children,s.lastInsertCursor),t==="")s.removeChildren();else for(var f=diffChars(n,t),T=0,E=0,h=f.length;E<h;E++){var S=f[E];S.removed?s.removeText(T,S.count):(S.added&&s.insertText(T,S.value),T+=S.count)}s.children.push(s.lastInsertCursor),s.runWrap(),s.emit("textchange",t,s)}};const SetTextOXYMethods={setTextOYByPercentage(s){return this.setTextOY(-this.textVisibleHeight*s),this},getTextOYPercentage(){var s=this.textVisibleHeight;return s===0?0:this._textOY/-s},setTextOXByPercentage(s){return this.setTextOX(-this.textVisibleWidth*s),this},getTextOXPercentage(){var s=this.textVisibleWidth;return s===0?0:this._textOX/-s}},IsPlainObject$K=Phaser.Utils.Objects.IsPlainObject;class CanvasInput extends DynamicText{constructor(t,n,f,T,E,h){IsPlainObject$K(n)?h=n:IsPlainObject$K(T)&&(h=T),h===void 0&&(h={}),InjectDefaultConfig(h);var S=h.text;S&&delete h.text;var e=ExtractByPrefix(h.background,"focus"),d=ExtractByPrefix(h.style,"cursor");super(t,n,f,T,E,h),this.type="rexCanvasInput",this.contentWidth=void 0,this.contentHeight=void 0,this.lineHeight=void 0,this.linesCount=void 0,this._text,this.textEdit=CreateHiddenTextEdit(this,h),h.focusStyle&&Object.assign(e,h.focusStyle),RegisterFocusStyle.call(this,e),h.cursorStyle&&Object.assign(d,h.cursorStyle),RegisterCursorStyle.call(this,d);var y=h.onAddChar;y&&this.on("addchar",y);var c=h.onCursorOut;c&&this.on("cursorout",c);var u=h.onCursorIn;u&&this.on("cursorin",u);var l=h.onMoveCursor;l&&this.on("movecursor",l),this.setParseTextCallback(h.parseTextCallback),this.lastInsertCursor=CreateInsertCursorChild(this),S||(S=""),this.setText(S)}addChild(t,n){if(super.addChild(t,n),Array.isArray(t))for(var f=t,T=0,E=f.length;T<E;T++){var t=f[T];IsChar(t)&&this.emit("addchar",t,n+T,this)}else IsChar(t)&&this.emit("addchar",t,n,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(SetText$1(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}runWrap(t){var n=super.runWrap(t);return this.contentWidth=n.maxLineWidth,this.contentHeight=n.linesHeight,this.lineHeight=n.lineHeight,this.linesCount=n.lines.length,n}setSize(t,n){return this.width===t&&this.height===n?this:(super.setSize(t,n),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=DefaultParseTextCallback),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput().setSelectAllWhenFocusEnable(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}get topTextOY(){return 0}get bottomTextOY(){return-this.tableVisibleHeight}get leftTextOX(){return 0}get rightTextOX(){return-this.textVisibleWidth}get textVisibleHeight(){var t=this.contentHeight-this.height;return t<0&&(t=0),t}get textVisibleWidth(){var t=this.contentWidth-this.width;return t<0&&(t=0),t}set t(t){this.setTextOYByPercentage(t).updateTexture()}get t(){return this.getTextOYPercentage()}set s(t){this.setTextOXByPercentage(t).updateTexture()}get s(){return this.getTextOXPercentage()}}var DefaultParseTextCallback=function(s){return s};Object.assign(CanvasInput.prototype,SetTextOXYMethods);ObjectFactory.register("canvasInput",function(s,t,n,f,T){var E=new CanvasInput(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.CanvasInput",CanvasInput);var GetTickDelta=function(s){return GetGame(s).loop.delta};const GetValue$2J=Phaser.Utils.Objects.GetValue,Wrap$2=Phaser.Math.Wrap;class HiddenTextEdit extends HiddenTextEditBase{constructor(t,n){n===void 0&&(n={}),n.onUpdate==="number"&&(n.onUpdate=NumberInputUpdateCallback),super(t,n),this.setCursor(GetValue$2J(n,"cursor","|")),this.setCursorFlashDuration(GetValue$2J(n,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,n=this.text;if(this.onUpdateCallback){var f=this.onUpdateCallback(n,t,this);f!=null&&(n=f)}if(this.isOpened&&this.hasCursor){var T=this.cursorPosition;n=n.substring(0,T)+this.cursor+n.substring(T),this.prevCursorPosition!==T&&(this.prevCursorPosition=T)}return t.text!==n&&(t.setText(n),this.emit("textchange",n,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var n=this.cursorFlashTimer+GetTickDelta(this.scene);return this.cursorFlashTimer=Wrap$2(n,0,this.cursorFlashDuration),t}}ObjectFactory.register("hiddenEdit",function(s,t){var n=new HiddenTextEdit(s,t);return n});SetValue(window,"RexPlugins.UI.HiddenEdit",HiddenTextEdit);const GetCalcMatrix=Phaser.GameObjects.GetCalcMatrix;var WebGLRenderer=function(s,t,n,f){t.updateData(),n.addToRenderList(t);var T=s.pipelines.set(t.pipeline),E=GetCalcMatrix(t,n,f),h=T.calcMatrix.copyFrom(E.calc),S=t._displayOriginX,e=t._displayOriginY,d=n.alpha*t.alpha;s.pipelines.preBatch(t);for(var y=t.geom,c,u=0,l=y.length;u<l;u++)c=y[u],c.visible&&c.webglRender(T,h,d,S,e);s.pipelines.postBatch(t)};const SetTransform=Phaser.Renderer.Canvas.SetTransform;var CanvasRenderer=function(s,t,n,f){t.updateData(),n.addToRenderList(t);var T=s.currentContext;if(SetTransform(s,T,t,n,f)){for(var E=t._displayOriginX,h=t._displayOriginY,S=t.geom,e,d=0,y=S.length;d<y;d++)e=S[d],e.visible&&e.canvasRender(T,E,h);T.restore()}};const Render={renderWebGL:WebGLRenderer,renderCanvas:CanvasRenderer},Shape=Phaser.GameObjects.Shape,RemoveItem$6=Phaser.Utils.Array.Remove;class BaseShapes extends Shape{constructor(t,n,f,T,E){n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=2),E===void 0&&(E=T),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(n,f),this.setSize(T,E),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,n){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==n,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=n,this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=t,f.hitArea.height=n),this}resize(t,n){return this.setSize(t,n),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,n){return n===void 0&&(n=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==n,this._fillColor=t,this._fillAlpha=n,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,n,f){return f===void 0&&(f=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==n||this.strokeAlpha!==f,this._lineWidth=t,this._strokeColor=n,this._strokeAlpha=f,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,n=0,f=t.length;n<f;n++){var T=t[n];T.dirty&&T.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Clear(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var n=t.name;return n&&(this.shapes[n]=t),this.dirty=!0,this}deleteShape(t){var n=this.getShape(t);return n&&(delete this.shapes[t],RemoveItem$6(this.geom,n)),this}}Object.assign(BaseShapes.prototype,Render);const StyleMethods$2={setBoxFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==s||this.boxFillAlpha!==t,this.boxFillColor=s,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==s||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=s,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(s,t,n){return n===void 0&&(n=1),this.dirty=this.dirty||this.boxLineWidth!==s||this.boxStrokeColor!==t||this.boxStrokeAlpha!==n,this.boxLineWidth=s,this.boxStrokeColor=t,this.boxStrokeAlpha=n,this},setUncheckedBoxStrokeStyle(s,t,n){return n===void 0&&(n=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==s||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==n,this.uncheckedBoxLineWidth=s,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=n,this},setCheckerStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==s||this.checkAlpha!==t,this.checkerColor=s,this.checkAlpha=t,this},setBoxShape(s){return s===void 0&&(s=!1),this.isCircleShape===s?this:(this.isCircleShape=s,this.isSizeChanged=!0,this.dirty=!0,this)}},SizeMethods$1={setBoxSize(s){return this.dirty=this.dirty||this.boxSize!==s,this.boxSize=s,this},setCheckerSize(s){return this.dirty=this.dirty||this.checkerSize!==s,this.checkerSize=s,this}};var FillStyle=function(s,t){return s==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=s,this.fillAlpha=t),this},LineStyle=function(s,t,n){return s==null||t==null?this.isStroked=!1:(n===void 0&&(n=1),this.isStroked=!0,this.lineWidth=s,this.strokeColor=t,this.strokeAlpha=n),this};const StyleMethods$1={fillStyle:FillStyle,lineStyle:LineStyle};class BaseGeom{constructor(){this.name=void 0,this.dirty=!0,this.visible=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}reset(){return this.setVisible().fillStyle().lineStyle(),this}webglRender(t,n,f,T,E){}canvasRender(t,n,f){}updateData(){this.dirty=!1}}Object.assign(BaseGeom.prototype,StyleMethods$1,DataMethods$2);const Earcut=Phaser.Geom.Polygon.Earcut;class PathBase extends BaseGeom{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=Earcut(this.pathData),super.updateData(),this}webglRender(t,n,f,T,E){this.isFilled&&FillPathWebGL(t,n,this,f,T,E),this.isStroked&&StrokePathWebGL(t,this,f,T,E)}canvasRender(t,n,f){var T=this.pathData,E=T.length-1,h=T[0]-n,S=T[1]-f;t.beginPath(),t.moveTo(h,S),this.closePath||(E-=2);for(var e=2;e<E;e+=2){var d=T[e]-n,y=T[e+1]-f;t.lineTo(d,y)}this.closePath&&t.closePath(),this.isFilled&&(FillStyleCanvas(t,this),t.fill()),this.isStroked&&(LineStyleCanvas(t,this),t.stroke())}}const DegToRad$b=Phaser.Math.DegToRad;class Arc extends PathBase{constructor(t,n,f,T,E,h,S,e){t===void 0&&(t=0),n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=0),E===void 0&&(E=0),h===void 0&&(h=360),S===void 0&&(S=!1),e===void 0&&(e=!1),super(),this.setCenterPosition(t,n),this.setRadius(f,T),this.setAngle(E,h,S),this.setPie(e),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,n){return n===void 0&&(n=t),this.x=t,this.y=n,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,n){return n===void 0&&(n=t),this.radiusX=t,this.radiusY=n,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,n,f){return f===void 0&&(f=!1),this.startAngle=t,this.endAngle=n,this.anticlockwise=f,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),ArcTo$1(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,n,f){t.beginPath();var T=this.x-n,E=this.y-f,h=DegToRad$b(this.startAngle),S=DegToRad$b(this.endAngle);this.pie&&(t.moveTo(T,E),t.lineTo(T+Math.cos(h)*this.radiusX,E+Math.sin(h)*this.radiusY)),t.ellipse(T,E,this.radiusX,this.radiusY,0,h,S,this.anticlockwise),this.pie&&t.lineTo(T,E),this.isFilled&&(FillStyleCanvas(t,this),t.fill()),this.isStroked&&(LineStyleCanvas(t,this),t.stroke())}}class Circle extends Arc{constructor(t,n,f){super(t,n,f,f,0,360)}}class Curve extends PathBase{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),n=0,f=t.length;n<f;n++)this.pathData.push(t[n].x,t[n].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class Ellipse extends Arc{constructor(t,n,f,T){super(t,n,f,T,0,360)}}class Line extends PathBase{constructor(t,n,f,T){t===void 0&&(t=0),n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=0),super(),this.setP0(t,n),this.setP1(f,T)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,n){return this.x0=t,this.y0=n,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,n){return this.x1=t,this.y1=n,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var StartAt=function(s,t,n){return n.length=0,s!=null&&n.push(s,t),n};const QuadraticBezierInterpolation=Phaser.Math.Interpolation.QuadraticBezier;var QuadraticBezierTo=function(s,t,n,f,T,E){for(var h=E.length,S=E[h-2],e=E[h-1],d=1,y=T-1;d<=y;d++){var c=d/y;E.push(QuadraticBezierInterpolation(c,S,s,n),QuadraticBezierInterpolation(c,e,t,f))}return E};const CubicBezierInterpolation=Phaser.Math.Interpolation.CubicBezier;var CubicBezierCurveTo=function(s,t,n,f,T,E,h,S){for(var e=S.length,d=S[e-2],y=S[e-1],c=1,u=h-1;c<=u;c++){var l=c/u;S.push(CubicBezierInterpolation(l,d,s,n,T),CubicBezierInterpolation(l,y,t,f,E))}return S},DuplicateLast=function(s){var t=s.length;if(t<2)return s;var n=s[t-2],f=s[t-1];return s.push(n),s.push(f),s};const AddPathMethods={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(s,t){return this.restorePathData(),this.accumulationLengths=void 0,StartAt(s,t,this.pathData),this.firstPointX=s,this.firstPointY=t,this.lastPointX=s,this.lastPointY=t,this},lineTo(s,t,n){return n===void 0&&(n=!1),n&&(s+=this.lastPointX,t+=this.lastPointY),LineTo(s,t,this.pathData),this.lastPointX=s,this.lastPointY=t,this},verticalLineTo(s,t){return this.lineTo(s,this.lastPointY,t),this},horizontalLineTo(s,t){return this.lineTo(this.lastPointX,s,t),this},ellipticalArc(s,t,n,f,T,E,h){return h===void 0&&(h=!1),ArcTo$1(s,t,n,f,T,E,h,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(s,t,n,f,T,E){return this.ellipticalArc(s,t,n,n,f,T,E),this},quadraticBezierTo(s,t,n,f){return QuadraticBezierTo(s,t,n,f,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=f,this.lastCX=s,this.lastCY=t,this},smoothQuadraticBezierTo(s,t){var n=this.lastPointX*2-this.lastCX,f=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(n,f,s,t),this},cubicBezierCurveTo(s,t,n,f,T,E){return CubicBezierCurveTo(s,t,n,f,T,E,this.iterations,this.pathData),this.lastPointX=T,this.lastPointY=E,this.lastCX=n,this.lastCY=f,this},smoothCubicBezierCurveTo(s,t,n,f){var T=this.lastPointX*2-this.lastCX,E=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(T,E,s,t,n,f),this},close(){var s=this.pathData[0],t=this.pathData[1];return(s!==this.lastPointX||t!==this.lastPointY)&&this.lineTo(s,t),this.closePath=!0,this},end(){return DuplicateLast(this.pathData),this}},PointRotateAround$1=Phaser.Math.RotateAround;var RotateAround$6=function(s,t,n,f){for(var T={x:0,y:0},E=0,h=f.length-1;E<h;E+=2)T.x=f[E],T.y=f[E+1],PointRotateAround$1(T,s,t,n),f[E]=T.x,f[E+1]=T.y;return f},Scale$2=function(s,t,n,f,T){for(var E=0,h=T.length-1;E<h;E+=2){var S=T[E]-s,e=T[E+1]-t;S*=n,e*=f,T[E]=S+s,T[E+1]=e+t}return T},Offset=function(s,t,n){for(var f=0,T=n.length-1;f<T;f+=2)n[f]+=s,n[f+1]+=t;return n};const DegToRad$a=Phaser.Math.DegToRad,PointRotateAround=Phaser.Math.RotateAround,TransformPointsMethods={rotateAround(s,t,n){if(this.pathData.length===0)return this;n=DegToRad$a(n),RotateAround$6(s,t,n,this.pathData);var f=this.pathData.length;if(this.lastPointX=this.pathData[f-2],this.lastPointY=this.pathData[f-1],this.lastCX!==void 0){var T={x:this.lastCX,y:this.lastCY};PointRotateAround(T,s,t,n),this.lastCX=T.x,this.lastCY=T.y}return this},scale(s,t,n,f){if(this.pathData.length===0)return this;if(Scale$2(s,t,n,f,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this.lastCX!==void 0){var T=this.lastCX-s,E=this.lastCY-t;T*=n,E*=f,this.lastCX=T+s,this.lastCY=E+t}return this},offset(s,t){return Offset(s,t,this.pathData),this}};var Copy=function(s,t,n,f){n===void 0&&(n=0),f===void 0&&(f=t.length),s.length=f-n;for(var T=0,E=s.length;T<E;T++)s[T]=t[T+n];return s};const SavePathDataMethods={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(Copy(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}},DistanceBetween$6=Phaser.Math.Distance.Between,Wrap$1=Phaser.Math.Wrap,Linear$c=Phaser.Math.Linear;var AppendFromPathSegment=function(s,t,n,f,T){if(f===void 0&&(f=n,n=0),n=WrapT(n),f=WrapT(f),n!==f){var E=t[t.length-1],h=E*n,S=E*f;n<f?AddPathSegment(s,t,h,S,T):(AddPathSegment(s,t,h,E,T),AddPathSegment(s,t,0,S,T)),DuplicateLast(T)}},AddPathSegment=function(s,t,n,f,T){for(var E=n>0,h=0,S=t.length;h<S;h++){var e=h*2,d=t[h];if(E){if(d<n)continue;if(d==n)E=!1;else{var y=d-t[h-1],c=1-(d-n)/y;T.push(GetInterpolation(s,e-2,e,c)),T.push(GetInterpolation(s,e-1,e+1,c)),E=!1}}if(d<=f){if(T.push(s[e]),T.push(s[e+1]),d===f)break}else{var y=d-t[h-1],c=1-(d-f)/y;T.push(GetInterpolation(s,e-2,e,c)),T.push(GetInterpolation(s,e-1,e+1,c));break}}},GetInterpolation=function(s,t,n,f){var T=s[t],E=s[n];return Linear$c(T,E,f)},WrapT=function(s){return s===0?0:s%1===0?1:Wrap$1(s,0,1)};const PathSegmentMethods={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var s=this.accumulationLengths,t=this.pathData,n,f,T,E,h,S=0,e=0,d=t.length;e<d;e+=2)T=t[e],E=t[e+1],h=n===void 0?0:DistanceBetween$6(n,f,T,E),S+=h,s.push(S),n=T,f=E;return this.totalPathLength=S,this},setDisplayPathSegment(s,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,AppendFromPathSegment(this.pathDataSave,this.accumulationLengths,s,t,this.pathData),this},appendFromPathSegment(s,t,n){return t===void 0?this.pathData.push(...s.pathData):(s.updateAccumulationLengths(),AppendFromPathSegment(s.pathData,s.accumulationLengths,t,n,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},GraphicsMethods={draw(s,t,n){var f=this.toPoints();return t&&s.fillPoints(f,this.closePath,this.closePath),n&&s.strokePoints(f,this.closePath,this.closePath),this}};var ToPoints=function(s,t){t===void 0&&(t=[]);for(var n=0,f=s.length-1;n<f;n+=2)t.push({x:s[n],y:s[n+1]});return t};const Polygon=Phaser.Geom.Polygon;var ToPolygon=function(s,t){return t===void 0&&(t=new Polygon),t.setTo(s),t};class PathDataBuilder{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return ToPoints(this.pathData)}toPolygon(t){return ToPolygon(this.pathData,t)}}Object.assign(PathDataBuilder.prototype,AddPathMethods,TransformPointsMethods,SavePathDataMethods,PathSegmentMethods,GraphicsMethods);class Lines extends PathBase{constructor(){super(),this.builder=new PathDataBuilder(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,n){return this.builder.startAt(t,n),this.dirty=!0,this}lineTo(t,n,f){return this.builder.lineTo(t,n,f),this.dirty=!0,this}verticalLineTo(t,n){return this.builder.verticalLineTo(t,n),this.dirty=!0,this}horizontalLineTo(t,n){return this.builder.horizontalLineTo(t,n),this.dirty=!0,this}ellipticalArc(t,n,f,T,E,h,S){return this.builder.ellipticalArc(t,n,f,T,E,h,S),this.dirty=!0,this}arc(t,n,f,T,E,h){return this.builder.arc(t,n,f,T,E,h),this.dirty=!0,this}quadraticBezierTo(t,n,f,T){return this.builder.quadraticBezierTo(t,n,f,T),this.dirty=!0,this}smoothQuadraticBezierTo(t,n){return this.builder.smoothQuadraticBezierTo(t,n),this.dirty=!0,this}cubicBezierCurveTo(t,n,f,T,E,h){return this.builder.cubicBezierCurveTo(t,n,f,T,E,h),this.dirty=!0,this}smoothCubicBezierCurveTo(t,n,f,T){return this.builder.smoothCubicBezierCurveTo(t,n,f,T),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,n,f){return this.builder.rotateAround(t,n,f),this.dirty=!0,this}scale(t,n,f,T){return this.builder.scale(t,n,f,T),this.dirty=!0,this}offset(t,n){return this.builder.offset(t,n),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,n,f){return this.builder.appendFromPathSegment(t.builder,n,f),this}copyPathFrom(t,n,f){return this.builder.clear().appendFromPathSegment(t.builder,n,f),this}setDisplayPathSegment(t,n){return this.builder.setDisplayPathSegment(t,n),this}}const GetTint$1=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let Rectangle$2=class extends BaseGeom{constructor(t,n,f,T){t===void 0&&(t=0),n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=f),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,n),this.setSize(f,T)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,n){return this.x=t,this.y=n,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,n){return this.width=t,this.height=n,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,n){return this.centerX=t,this.centerY=n,this}updateData(){this.pathData.length=0;var t=this.x,n=t+this.width,f=this.y,T=f+this.height;return this.pathData.push(t,f),this.pathData.push(n,f),this.pathData.push(n,T),this.pathData.push(t,T),this.pathData.push(t,f),super.updateData(),this}webglRender(t,n,f,T,E){if(this.isFilled){var h=t.fillTint,S=GetTint$1(this.fillColor,this.fillAlpha*f);h.TL=S,h.TR=S,h.BL=S,h.BR=S,t.batchFillRect(-T+this.x,-E+this.y,this.width,this.height)}this.isStroked&&StrokePathWebGL(t,this,f,T,E)}canvasRender(t,n,f){this.isFilled&&(FillStyleCanvas(t,this),t.fillRect(-n,-f,this.width,this.height)),this.isStroked&&(LineStyleCanvas(t,this),t.beginPath(),t.rect(-n,-f,this.width,this.height),t.stroke())}};const GetValue$2I=Phaser.Utils.Objects.GetValue;class RoundRectangle extends PathBase{constructor(t,n,f,T,E,h){t===void 0&&(t=0),n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=f),E===void 0&&(E=0),h===void 0&&(h=6),super(),this.setTopLeftPosition(t,n),this.setSize(f,T),this.setRadius(E),this.setIterations(h),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,n){return this.x=t,this.y=n,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,n){return this.width=t,this.height=n,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,n){return this.centerX=t,this.centerY=n,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var n=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==n,this._convexTL=n,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var n=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==n,this._convexTR=n,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var n=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==n,this._convexBL=n,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var n=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==n,this._convexBR=n,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=GetValue$2I(t,"tl",0),this.radiusTR=GetValue$2I(t,"tr",0),this.radiusBL=GetValue$2I(t,"bl",0),this.radiusBR=GetValue$2I(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var n=this.width,f=this.height,T,E=this.iterations+1;if(T=this.radiusTL,T>0)if(this._convexTL){var h=T,S=T;ArcTo$1(h,S,T,T,180,270,!1,E,t)}else{var h=0,S=0;ArcTo$1(h,S,T,T,90,0,!0,E,t)}else LineTo(0,0,t);if(T=this.radiusTR,T>0)if(this._convexTR){var h=n-T,S=T;ArcTo$1(h,S,T,T,270,360,!1,E,t)}else{var h=n,S=0;ArcTo$1(h,S,T,T,180,90,!0,E,t)}else LineTo(n,0,t);if(T=this.radiusBR,T>0)if(this._convexBR){var h=n-T,S=f-T;ArcTo$1(h,S,T,T,0,90,!1,E,t)}else{var h=n,S=f;ArcTo$1(h,S,T,T,270,180,!0,E,t)}else LineTo(n,f,t);if(T=this.radiusBL,T>0)if(this._convexBL){var h=T,S=f-T;ArcTo$1(h,S,T,T,90,180,!1,E,t)}else{var h=0,S=f;ArcTo$1(h,S,T,T,360,270,!0,E,t)}else LineTo(0,f,t);return t.push(t[0],t[1]),Offset(this.x,this.y,t),super.updateData(),this}}const GetTint=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;let Triangle$1=class extends BaseGeom{constructor(t,n,f,T,E,h){t===void 0&&(t=0),n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=0),E===void 0&&(E=0),h===void 0&&(h=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,n),this.setP1(f,T),this.setP2(E,h)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,n){return this.x0=t,this.y0=n,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,n){return this.x1=t,this.y1=n,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,n){return this.dirty=this.dirty||this.x2!==t||this.y2!==n,this.x2=t,this.y2=n,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,n,f,T,E){if(this.isFilled){var h=GetTint(this.fillColor,this.fillAlpha*f),S=this.x0-T,e=this.y0-E,d=this.x1-T,y=this.y1-E,c=this.x2-T,u=this.y2-E,l=n.getX(S,e),r=n.getY(S,e),a=n.getX(d,y),v=n.getY(d,y),o=n.getX(c,u),p=n.getY(c,u);t.batchTri(l,r,a,v,o,p,h,h,h)}this.isStroked&&StrokePathWebGL(t,this,f,T,E)}canvasRender(t,n,f){var T=this.x1-n,E=this.y1-f,h=this.x2-n,S=this.y2-f,e=this.x3-n,d=this.y3-f;t.beginPath(),t.moveTo(T,E),t.lineTo(h,S),t.lineTo(e,d),t.closePath(),this.isFilled&&(FillStyleCanvas(t,this),t.fill()),this.isStroked&&(LineStyleCanvas(t,this),t.stroke())}};const ShapesUpdateMethods$4={buildShapes(){this.addShape(new RoundRectangle().setName("box")).addShape(new Lines().setName("checker"))},updateShapes(){var s=this.width/2,t=this.height/2,n=Math.min(s,t),f=n*2,T=s-n,E=t-n,h=this.boxLineWidth,S=Math.max(f/10,2),e=this.getShape("box"),d=this.getShape("checker");if(this.isSizeChanged){var u=f*(1-this.boxSize)/2,y=h/2,c=f*this.boxSize-h;e.setTopLeftPosition(T+y+u,E+y+u).setSize(c,c),this.isCircleShape?e.setRadius(c/2):e.setRadius(0);var u=f*(1-this.checkerSize)/2,l=f*this.checkerSize/4,r=l*1,a=l*2,v=l*3;d.startAt(r,a).lineTo(a,v).lineTo(v,r).offset(T+u,E+u).end()}this.checked?(e.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(h,this.boxStrokeColor,this.boxStrokeAlpha),d.lineStyle(S,this.checkerColor)):(e.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(h,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),d.lineStyle()),this.checked&&d.setDisplayPathSegment(this.checkerAnimProgress)}},GetValue$2H=Phaser.Utils.Objects.GetValue,Linear$b=Phaser.Math.Linear;class EaseValueTask extends EaseValueTaskBase{constructor(t,n){super(t,n),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var n=this.target;this.propertyKey=GetValue$2H(t,"key","value");var f=n[this.propertyKey];return this.fromValue=GetValue$2H(t,"from",f),this.toValue=GetValue$2H(t,"to",f),this.setEase(GetValue$2H(t,"ease",this.ease)),this.setDuration(GetValue$2H(t,"duration",this.duration)),this.setRepeat(GetValue$2H(t,"repeat",0)),this.setDelay(GetValue$2H(t,"delay",0)),this.setRepeatDelay(GetValue$2H(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),n[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,n){var f=n.t;f=this.easeFn(f),t[this.propertyKey]=Linear$b(this.fromValue,this.toValue,f)}}const CheckerAnimationMethods={setCheckerAnimationDuration(s){return s===void 0&&(s=0),this.checkerAnimDuration=s,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new EaseValueTask(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}};var methods$v={};Object.assign(methods$v,StyleMethods$2,SizeMethods$1,ShapesUpdateMethods$4,CheckerAnimationMethods);const GetValue$2G=Phaser.Utils.Objects.GetValue,IsPlainObject$J=Phaser.Utils.Objects.IsPlainObject,DefaultBoxFillColor=23730,DefaultCheckerColor=16777215;class CheckboxShape extends BaseShapes{constructor(t,n,f,T,E,h,S){IsPlainObject$J(n)?(S=n,n=GetValue$2G(S,"x",0),f=GetValue$2G(S,"y",0),T=GetValue$2G(S,"width",2),E=GetValue$2G(S,"height",2),h=GetValue$2G(S,"color",DefaultBoxFillColor)):IsPlainObject$J(h)&&(S=h,h=GetValue$2G(S,"color",DefaultBoxFillColor)),super(t,n,f,T,E),this.type="rexCheckbox",h===void 0&&(h=DefaultBoxFillColor),this.setBoxShape(GetValue$2G(S,"circleBox",!1)),this.setBoxFillStyle(h,GetValue$2G(S,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(GetValue$2G(S,"uncheckedColor",null),GetValue$2G(S,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(GetValue$2G(S,"boxLineWidth",4),GetValue$2G(S,"boxStrokeColor",h),GetValue$2G(S,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,GetValue$2G(S,"uncheckedBoxStrokeColor",this.boxStrokeColor),GetValue$2G(S,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(GetValue$2G(S,"checkerColor",DefaultCheckerColor),GetValue$2G(S,"checkerAlpha",1)),this.setBoxSize(GetValue$2G(S,"boxSize",1)),this.setCheckerSize(GetValue$2G(S,"checkerSize",1)),this.setCheckerAnimationDuration(GetValue$2G(S,"animationDuration",150)),this.buildShapes();var e=GetValue$2G(S,"checked");e===void 0&&(e=GetValue$2G(S,"value",!1)),this.setValue(e)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(CheckboxShape.prototype,methods$v);const GetValue$2F=Phaser.Utils.Objects.GetValue;class Button extends ComponentBase{constructor(t,n){super(t,n),this._enable=void 0,t.setInteractive(GetValue$2F(n,"inputConfig",void 0)),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(GetValue$2F(t,"enable",!0)),this.setMode(GetValue$2F(t,"mode",1)),this.setClickInterval(GetValue$2F(t,"clickInterval",100)),this.setDragThreshold(GetValue$2F(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var n=t?"enable":"disable";this.emit(n,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=CLICKMODE$1[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,n,f,T){this.pointer===void 0&&(this.pointer=t,this.emit("down",this,this.parent,t,T),this.mode===0&&this.click(t.downTime,t,T))}onRelease(t,n,f,T){this.pointer===t&&(this.emit("up",this,this.parent,t,T),this.mode===1&&this.click(t.upTime,t,T),this.pointer=void 0)}onPointOut(t,n){this.pointer===t&&this.cancel()}onMove(t,n,f,T){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,n,f){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,n,f),this;this.pointer=void 0;var T=this.lastClickTime;return T!==void 0&&t-T<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,n,f),this)}cancel(){return this.pointer=void 0,this}onOver(t,n,f,T){return this.enable?(this.emit("over",this,this.parent,t,T),this):this}onOut(t,n){return this.enable?(this.emit("out",this,this.parent,t,n),this):this}}const CLICKMODE$1={press:0,pointerdown:0,release:1,pointerup:1},GetValue$2E=Phaser.Utils.Objects.GetValue;class Checkbox extends CheckboxShape{constructor(t,n,f,T,E,h,S){super(t,n,f,T,E,h,S),this._click=new Button(this,GetValue$2E(S,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(GetValue$2E(S,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}ObjectFactory.register("checkbox",function(s,t,n,f,T,E){var h=new Checkbox(this.scene,s,t,n,f,T,E);return this.scene.add.existing(h),h});SetValue(window,"RexPlugins.UI.Checkbox",Checkbox);const StyleMethods={setTrackFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==s||this.trackFillAlpha!==t,this.trackFillColor=s,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==s||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=s,this.falseValueTrackFillAlpha=t,this},setThumbStyle(s,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==s||this.checkAlpha!==t,this.thumbColor=s,this.thumbAlpha=t,this}},SizeMethods={setTrackSize(s,t){return this.dirty=this.dirty||this.trackWidth!==s||this.trackHeight!==t,this.trackWidth=s,this.trackHeight=t,this},setTrackRadius(s){return this.dirty=this.dirty||this.trackRadius!==s,this.trackRadius=s,this},setThumbSize(s,t){return t===void 0&&(t=s),this.dirty=this.dirty||this.thumbWidth!==s||this.thumbHeight!==t,this.thumbWidth=s,this.thumbHeight=t,this},setThumbRadius(s){return this.dirty=this.dirty||this.thumbRadius!==s,this.thumbRadius=s,this}},PositionMethods={setThumbPosition(s,t){return t===void 0&&(t=1-s),this.thumbLeftX=s,this.thumbRightX=t,this},setRTL(s){return s===void 0&&(s=!0),this.rtl=s,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Linear$a=function(s,t,n){return(t-s)*n+s},MixColor=function(s,t,n){var f=Linear$a(GetR(s),GetR(t),n),T=Linear$a(GetG(s),GetG(t),n),E=Linear$a(GetB(s),GetB(t),n);return(f&255)<<16|(T&255)<<8|E&255};const Linear$9=Phaser.Math.Linear,ShapesUpdateMethods$3={buildShapes(){this.addShape(new RoundRectangle().setName("track")).addShape(new RoundRectangle().setName("thumb"))},updateShapes(){var s=this.width,t=this.height,n=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,f=this.getShape("track");if(this.isSizeChanged){var T=s*this.trackWidth,E=t*this.trackHeight,h=(s-T)/2,S=(t-E)/2,e=t*this.trackRadius;f.setTopLeftPosition(h,S).setSize(T,E).setRadius(e)}var d=MixColor(this.falseValueTrackColor,this.trackFillColor,n),y=Linear$9(this.falseValueTrackFillAlpha,this.trackFillAlpha,n);f.fillStyle(d,y);var c=this.getShape("thumb");if(this.isSizeChanged){var u=s*this.thumbWidth,l=t*this.thumbHeight,r=t*this.thumbRadius;c.setSize(u,l).setRadius(r)}var a=Linear$9(this.thumbLeftX,this.thumbRightX,n)*s;this.rtl&&(a=s-a);var v=t/2;c.setCenterPosition(a,v),c.fillStyle(this.thumbColor,this.thumbAlpha)}},ToggleAnimationMethods={setToggleAnimationDuration(s){return s===void 0&&(s=0),this.toggleAnimDuration=s,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new EaseValueTask(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}};var methods$u={};Object.assign(methods$u,StyleMethods,SizeMethods,PositionMethods,ShapesUpdateMethods$3,ToggleAnimationMethods);var GrayScale=function(s){var t=.3*GetR(s)+.59*GetG(s)+.11*GetB(s);return(t&255)<<16|(t&255)<<8|t&255};const GetValue$2D=Phaser.Utils.Objects.GetValue,IsPlainObject$I=Phaser.Utils.Objects.IsPlainObject,DefaultTrackFillColor=23730,DefaultThumbFillColor=16777215;class ToggleSwitchShape extends BaseShapes{constructor(t,n,f,T,E,h,S){IsPlainObject$I(n)?(S=n,n=GetValue$2D(S,"x",0),f=GetValue$2D(S,"y",0),T=GetValue$2D(S,"width",2),E=GetValue$2D(S,"height",2),h=GetValue$2D(S,"color",DefaultTrackFillColor)):IsPlainObject$I(h)&&(S=h,h=GetValue$2D(S,"color",DefaultTrackFillColor)),super(t,n,f,T,E),this.type="rexToggleSwitch",h===void 0&&(h=DefaultTrackFillColor),this.setTrackFillStyle(h,GetValue$2D(S,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(GetValue$2D(S,"falseValueTrackColor",GrayScale(h)),GetValue$2D(S,"falseValueTrackFillAlpha",1)),this.setThumbStyle(GetValue$2D(S,"thumbColor",DefaultThumbFillColor),GetValue$2D(S,"thumbAlpha",1)),this.setTrackSize(GetValue$2D(S,"trackWidth",.9),GetValue$2D(S,"trackHeight",.5)),this.setTrackRadius(GetValue$2D(S,"trackRadius",this.trackHeight*.5));var e=GetValue$2D(S,"thumbHeight",void 0),d=GetValue$2D(S,"thumbWidth",e);d===void 0&&(d=this.trackHeight*.9),this.setThumbSize(d,e),this.setThumbRadius(GetValue$2D(S,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(GetValue$2D(S,"thumbLeft",.3),GetValue$2D(S,"thumbRight",void 0)),this.setRTL(GetValue$2D(S,"rtl",!1)),this.setToggleAnimationDuration(GetValue$2D(S,"animationDuration",150)),this.buildShapes(),this.setValue(GetValue$2D(S,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,n){n===void 0&&(n=this.toggleAnimDuration);var f=this.toggleAnimDuration;return this.toggleAnimDuration=n,this.value=t,this.toggleAnimDuration=f,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(ToggleSwitchShape.prototype,methods$u);const GetValue$2C=Phaser.Utils.Objects.GetValue;class ToggleSwitch extends ToggleSwitchShape{constructor(t,n,f,T,E,h,S){super(t,n,f,T,E,h,S),this._click=new Button(this,GetValue$2C(S,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(GetValue$2C(S,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}ObjectFactory.register("toggleSwitch",function(s,t,n,f,T,E){var h=new ToggleSwitch(this.scene,s,t,n,f,T,E);return this.scene.add.existing(h),h});SetValue(window,"RexPlugins.UI.ToggleSwitch",ToggleSwitch);const LoadImageMethods={loadFromURL(s,t){var n=this,f=new Image;return f.onload=function(){n.width!==f.width||n.height!==f.height?n.resize(f.width,f.height):n.clear(),n.context.drawImage(f,0,0),n.updateTexture(),t&&t(),f.onload=null,f.src="",f.remove()},f.src=s,this},loadFromURLPromise(s){var t=this;return new Promise(function(n,f){t.loadFromURL(s,n)})},loadFromFile(s,t){var n=URL.createObjectURL(s);return this.loadFromURL(n,function(){URL.revokeObjectURL(n),t&&t()}),this},loadFromFilePromise(s){var t=this;return new Promise(function(n,f){t.loadFromFile(s,n)})}};class Canvas extends Canvas$1{}Object.assign(Canvas.prototype,LoadImageMethods);ObjectFactory.register("canvas",function(s,t,n,f){var T=new Canvas(this.scene,s,t,n,f);return this.scene.add.existing(T),T});SetValue(window,"RexPlugins.UI.Canvas",Canvas);const GetValue$2B=Phaser.Utils.Objects.GetValue;class CircleMaskImage extends Canvas$1{constructor(t,n,f,T,E,h){super(t,n,f),this.type="rexCircleMaskImage",this.setTexture(T,E,h)}setTexture(t,n,f){typeof n=="object"&&(f=n,n=void 0),typeof f=="string"&&(f={maskType:f});var T=GetValue$2B(f,"maskType",0),E=GetValue$2B(f,"backgroundColor",void 0),h=GetValue$2B(f,"strokeColor",void 0),S=h!=null?10:0,e=GetValue$2B(f,"strokeWidth",S);if(T===void 0?T=0:typeof T=="string"&&(T=MASKTYPE[T]),this._textureKey=t,this._frameName=n,T===null)return this.loadTexture(t,n),this.dirty=!0,this;var d=this.scene.sys.textures.getFrame(t,n);if(!d)return this;d.cutWidth!==this.width||d.cutHeight!==this.height?this.setCanvasSize(d.cutWidth,d.cutHeight):this.clear();var y=this.canvas,c=this.context,u=y.width,l=y.height;E!=null&&(c.fillStyle=E,c.fillRect(0,0,u,l)),c.save(),c.beginPath();var r=e/2;switch(T){case 1:var m=Math.floor(u/2),g=Math.floor(l/2),a=m-r,v=g-r;c.ellipse(m,g,a,v,0,0,2*Math.PI);break;case 2:var o=GetValue$2B(f,"radius",0),p=GetValue$2B(f,"iteration",void 0);AddRoundRectanglePath(c,r,r,u-e,l-e,o,p);break;default:var m=Math.floor(u/2),g=Math.floor(l/2),x=Math.min(m,g)-r;c.arc(m,g,x,0,2*Math.PI);break}return h!=null&&(c.strokeStyle=h,c.lineWidth=e,c.stroke()),c.clip(),this.loadTexture(t,n),c.restore(),this.dirty=!0,this}resize(t,n){return this.setDisplaySize(t,n),this}}const MASKTYPE={circle:0,ellipse:1,roundRectangle:2};ObjectFactory.register("circleMaskImage",function(s,t,n,f,T){var E=new CircleMaskImage(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.CircleMaskImage",CircleMaskImage);const GetValue$2A=Phaser.Utils.Objects.GetValue;class AlphaMaskImage extends Canvas$1{constructor(t,n,f,T,E,h){super(t,n,f),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(T,E,h)}setTexture(t,n,f){typeof n=="object"&&(f=n,n=void 0),typeof f=="string"&&(f={mask:{key:f}});var T=GetValue$2A(f,"mask.key"),E=GetValue$2A(f,"mask.frame"),h=GetValue$2A(f,"mask.invertAlpha",!1),S=GetValue$2A(f,"mask.scale"),e=GetValue$2A(f,"backgroundColor");if(T){this._maskKey=T,this._maskFrame=E,this._maskScale=S;var d=T?this.scene.sys.textures.get(T):null;this.maskFrame=d?d.get(E):null}this._textureKey=t,this._frameName=n;var y=this.maskFrame;if(y===null)return this.loadTexture(t,n),this.dirty=!0,this;var c=e!=null;this.loadTexture(t,n);var u=this.canvas,l=this.context,r=u.width,a=u.height;l.save(),l.globalCompositeOperation=h?"destination-out":"destination-in";var v,o;this._maskScale!=null?(v=y.cutWidth*this._maskScale,o=y.cutHeight*this._maskScale):(v=r,o=a);var p=(r-v)/2,m=(a-o)/2;return this.drawFrame(this._maskKey,this._maskFrame,p,m,v,o),l.restore(),c&&(l.save(),l.globalCompositeOperation="destination-over",l.fillStyle=e,l.fillRect(0,0,r,a),l.restore()),this.dirty=!0,this}resize(t,n){return this.setDisplaySize(t,n),this}}ObjectFactory.register("alphaMaskImage",function(s,t,n,f,T){var E=new AlphaMaskImage(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.AlphaMaskImage",AlphaMaskImage);const Linear$8=Phaser.Math.Linear,Percent$5=Phaser.Math.Percent,ProgressValueMethods={setValue(s,t,n){return s==null?this:(t!==void 0&&(s=Percent$5(s,t,n)),this.value=s,this)},addValue(s,t,n){return t!==void 0&&(s=Percent$5(s,t,n)),this.value+=s,this},getValue(s,t){var n=this.value;return s!==void 0&&(n=Linear$8(s,t,n)),n}},Percent$4=Phaser.Math.Percent;var SetEaseValuePropName=function(s){return this.easeValuePropName=s,this},SetEaseValueDuration=function(s){return this.easeValueDuration=s,this},SetEaseValueFunction=function(s){return this.easeFunction=s,this},StopEaseValue=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},EaseValueTo=function(s,t,n){return s==null?this:(t!==void 0&&(s=Percent$4(s,t,n)),this.easeValueTask===void 0&&(this.easeValueTask=new EaseValueTask(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:s,duration:this.easeValueDuration,ease:this.easeFunction}),this)},EaseValueRepeat=function(s,t,n,f){return n===void 0&&(n=-1),f===void 0&&(f=0),this.easeValueTask===void 0&&(this.easeValueTask=new EaseValueTask(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:s,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:n,repeatDelay:f}),this};const EaseValueMethods={setEaseValuePropName:SetEaseValuePropName,setEaseValueDuration:SetEaseValueDuration,setEaseValueFunction:SetEaseValueFunction,stopEaseValue:StopEaseValue,easeValueTo:EaseValueTo,easeValueRepeat:EaseValueRepeat},GetValue$2z=Phaser.Utils.Objects.GetValue,Clamp$d=Phaser.Math.Clamp;function ProgressBase(s){class t extends s{bootProgressBase(f){this.eventEmitter=GetValue$2z(f,"eventEmitter",this);var T=GetValue$2z(f,"valuechangeCallback",null);if(T!==null){var E=GetValue$2z(f,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",T,E)}return this.setEaseValuePropName("value").setEaseValueDuration(GetValue$2z(f,"easeValue.duration",0)).setEaseValueFunction(GetValue$2z(f,"easeValue.ease","Linear")),this}get value(){return this._value}set value(f){f=Clamp$d(f,0,1);var T=this._value,E=T!=f;this.dirty=this.dirty||E,this._value=f,E&&this.eventEmitter.emit("valuechange",this._value,T,this.eventEmitter)}}return Object.assign(t.prototype,ProgressValueMethods,EaseValueMethods),t}const RadToDeg$7=Phaser.Math.RadToDeg,DegToRad$9=Phaser.Math.DegToRad;var FillArc=function(s,t,n,f,T,E,h,S){var e=Math.abs(h-E)===360,d=DegToRad$9(E),y=DegToRad$9(h),c=Math.cos(d),u=Math.sin(d),l=Math.cos(y),r=Math.sin(y);return s.startAt(t+c*f,n+u*f),s.arc(t,n,f,E,h,S),e&&T===0||(s.lineTo(t+l*T,n+r*T),T>0&&s.arc(t,n,T,h,E,!S)),s.close(),s};const ShapesUpdateMethods$2={buildShapes(){this.addShape(new Lines().setName("track")).addShape(new Lines().setName("bar")).addShape(new Circle().setName("center"))},updateShapes(){var s=this.radius,t=this.thickness*this.radius,n=this.radius,f=n-t,T=this.getShape("track");this.trackColor!=null&&this.thickness>0?(T.fillStyle(this.trackColor),FillArc(T,s,s,n,f,0,360,!1)):T.reset();var E=this.getShape("bar");if(this.barColor!=null&&this.thickness>0){var h,S,e;if(this.value===1)h=!1,S=0,e=360;else{h=this.anticlockwise,S=RadToDeg$7(this.startAngle);var d=360*(h?1-this.value:this.value);e=d+S}E.fillStyle(this.barColor),FillArc(E,s,s,n,f,S,e,!1)}else E.reset();var y=this.getShape("center");this.centerColor&&f>0?y.setCenterPosition(s,s).setRadius(f).fillStyle(this.centerColor):y.reset()}},GetValue$2y=Phaser.Utils.Objects.GetValue,IsPlainObject$H=Phaser.Utils.Objects.IsPlainObject,Clamp$c=Phaser.Math.Clamp,DefaultStartAngle$1=Phaser.Math.DegToRad(270);let CircularProgress$1=class extends ProgressBase(BaseShapes){constructor(t,n,f,T,E,h,S){IsPlainObject$H(n)&&(S=n,n=GetValue$2y(S,"x",0),f=GetValue$2y(S,"y",0),T=GetValue$2y(S,"radius",1),E=GetValue$2y(S,"barColor",void 0),h=GetValue$2y(S,"value",0)),T===void 0&&(T=1);var e=T*2;super(t,n,f,e,e),this.type="rexCircularProgress",this.bootProgressBase(S),this.setRadius(T),this.setTrackColor(GetValue$2y(S,"trackColor",void 0)),this.setBarColor(E),this.setCenterColor(GetValue$2y(S,"centerColor",void 0)),this.setThickness(GetValue$2y(S,"thickness",.2)),this.setStartAngle(GetValue$2y(S,"startAngle",DefaultStartAngle$1)),this.setAnticlockwise(GetValue$2y(S,"anticlockwise",!1)),this.buildShapes(),this.setValue(h)}resize(t,n){return t=Math.floor(Math.min(t,n)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var n=t*2;this.resize(n,n)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Clamp$c(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}};Object.assign(CircularProgress$1.prototype,ShapesUpdateMethods$2);ObjectFactory.register("circularProgress",function(s,t,n,f,T,E){var h=new CircularProgress$1(this.scene,s,t,n,f,T,E);return this.scene.add.existing(h),h});SetValue(window,"RexPlugins.UI.CircularProgress",CircularProgress$1);var DrawCircle=function(s,t,n,f,T,E,h,S,e,d,y,c){d===void 0&&(d=0),y===void 0&&(y=2*Math.PI),c===void 0&&(c=!1),t.beginPath(),t.ellipse(n,f,T,E,0,d,y,c),h!=null&&(t.fillStyle=h,t.fill()),S!=null&&(t.strokeStyle=S,t.lineWidth=e,t.stroke())},DrawText=function(s,t,n,f,T,E,h,S,e,d,y){e===void 0&&S!=null&&(e=2),d===void 0&&(d="start"),y===void 0&&(y="alphabetic"),t.font=E,t.textAlign=d,t.textBaseline=y,t.fillStyle=h,t.strokeStyle=S,t.lineWidth=e,t.lineCap="round",t.lineJoin="round",S!=null&&S!=="none"&&e>0&&t.strokeText(T,n,f),h!=null&&h!=="none"&&t.fillText(T,n,f)};const PI2$1=Phaser.Math.PI2;var DrawContent$1=function(){var s=this.radius,t=this.thickness*this.radius,n=this.radius-t/2,f=this.radius-t,T=this.canvas,E=this.context,h=this.anticlockwise,S=this.startAngle,e=this.endAngle,d=this._deltaAngle;if(this.trackColor&&t>0&&(E.save(),DrawCircle(T,E,s,s,n,n,void 0,this.trackColor,t,S,e,h),E.restore()),this.barColor&&n>0){var y;h?y=(S-d*this.value+PI2$1)%PI2$1:y=(S+d*this.value)%PI2$1,E.save();var c;if(this.barColor2){var u=s+n*Math.cos(S),l=s+n*Math.sin(S),r=s+n*Math.cos(y),a=s+n*Math.sin(y),v=E.createLinearGradient(u,l,r,a);v.addColorStop(0,this.barColor2),v.addColorStop(1,this.barColor),c=v}else c=this.barColor;DrawCircle(T,E,s,s,n,n,void 0,c,t,S,y,h),E.restore()}if(this.centerColor&&f>0){var o;this.centerColor2?(o=this.context.createRadialGradient(s,s,0,s,s,f),o.addColorStop(0,this.centerColor),o.addColorStop(1,this.centerColor2)):o=this.centerColor,E.save(),DrawCircle(T,E,s,s,f,f,o),E.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(E.save(),DrawText(T,E,s,s,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),E.restore())};const GetValue$2x=Phaser.Utils.Objects.GetValue,IsPlainObject$G=Phaser.Utils.Objects.IsPlainObject,NormalizeAngle$1=Phaser.Math.Angle.Normalize,Clamp$b=Phaser.Math.Clamp,DefaultStartAngle=Phaser.Math.DegToRad(270),PI2=Phaser.Math.PI2;class CircularProgress extends ProgressBase(Canvas$1){constructor(t,n,f,T,E,h,S){IsPlainObject$G(n)&&(S=n,n=GetValue$2x(S,"x",0),f=GetValue$2x(S,"y",0),T=GetValue$2x(S,"radius",1),E=GetValue$2x(S,"barColor",void 0),h=GetValue$2x(S,"value",0));var e=T*2;super(t,n,f,e,e),this.type="rexCircularProgressCanvas",this.bootProgressBase(S),this.setRadius(T),this.setTrackColor(GetValue$2x(S,"trackColor",void 0)),this.setBarColor(E),this.setBarColor2(GetValue$2x(S,"barColor2",void 0)),this.setCenterColor(GetValue$2x(S,"centerColor",void 0)),this.setThickness(GetValue$2x(S,"thickness",.2)),this.setStartAngle(GetValue$2x(S,"startAngle",DefaultStartAngle)),this.setEndAngle(GetValue$2x(S,"endAngle",this.startAngle+PI2)),this.setAnticlockwise(GetValue$2x(S,"anticlockwise",!1)),this.setTextColor(GetValue$2x(S,"textColor",void 0)),this.setTextStrokeColor(GetValue$2x(S,"textStrokeColor",void 0),GetValue$2x(S,"textStrokeThickness",void 0));var d=GetValue$2x(S,"textFont",void 0);d?this.setTextFont(d):this.setTextFont(GetValue$2x(S,"textSize","16px"),GetValue$2x(S,"textFamily","Courier"),GetValue$2x(S,"textStyle","")),this.setTextFormatCallback(GetValue$2x(S,"textFormatCallback",void 0),GetValue$2x(S,"textFormatCallbackScope",void 0)),this.setValue(h)}resize(t,n){return t=Math.floor(Math.min(t,n)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var n=t*2;this.resize(n,n)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get barColor2(){return this._barColor2}set barColor2(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}setBarColor2(t){return this.barColor2=t,this}get startAngle(){return this._startAngle}set startAngle(t){t=NormalizeAngle$1(t),this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t,this._deltaAngle=GetDeltaAngle(this._startAngle,this._endAngle,this._anticlockwise)}setStartAngle(t){return this.startAngle=t,this}get endAngle(){return this._endAngle}set endAngle(t){t=NormalizeAngle$1(t),this.dirty=this.dirty||this._endAngle!=t,this._endAngle=t,this._deltaAngle=GetDeltaAngle(this._startAngle,this._endAngle,this._anticlockwise)}setEndAngle(t){return this.endAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t,this._deltaAngle=GetDeltaAngle(this._startAngle,this._endAngle,this._anticlockwise)}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Clamp$b(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,n){return this.centerColor=t,this.centerColor2=n,this}get textColor(){return this._textColor}set textColor(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,n){return n===void 0&&(n=2),this.textStrokeColor=t,this.textStrokeThickness=n,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,n,f){var T;return n===void 0?T=t:T=f+" "+t+" "+n,this.textFont=T,this}setTextFormatCallback(t,n){return this.textFormatCallback=t,this.textFormatCallbackScope=n,this}updateTexture(){return this.clear(),DrawContent$1.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var n;return this.textFormatCallbackScope?n=this.textFormatCallback(t):n=this.textFormatCallback.call(this.textFormatCallbackScope,t),n}}var GetDeltaAngle=function(s,t,n){return n?s<=t?PI2+s-t:s-t:s>=t?PI2+t-s:t-s};ObjectFactory.register("circularProgressCanvas",function(s,t,n,f,T,E){var h=new CircularProgress(this.scene,s,t,n,f,T,E);return this.scene.add.existing(h),h});SetValue(window,"RexPlugins.UI.CircularProgressCanvas",CircularProgress);var UpdateShapes=function(){var s=this.skewX,t=this.width-Math.abs(s),n=this.height,f=this.getShape("trackFill");f.fillStyle(this.trackColor),f.isFilled&&BuildRectangle(f,0,0,t,n,s).close();var T=this.getShape("bar");if(T.fillStyle(this.barColor),T.isFilled){var E,h;this.rtl?(E=t*(1-this.value),h=t):(E=0,h=t*this.value),BuildRectangle(T,E,0,h,n,s).close()}var S=this.getShape("trackStroke");S.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),S.isStroked&&BuildRectangle(S,0,0,t,n,s).end()},BuildRectangle=function(s,t,n,f,T,E){var h=(t+f)/2;return E>=0?s.startAt(h+E,n).lineTo(f+E,n).lineTo(f,T).lineTo(t,T).lineTo(t+E,n).lineTo(h+E,n):s.startAt(h,n).lineTo(f,n).lineTo(f-E,T).lineTo(t-E,T).lineTo(t,n).lineTo(h,n),s};const GetValue$2w=Phaser.Utils.Objects.GetValue,IsPlainObject$F=Phaser.Utils.Objects.IsPlainObject;let LineProgress$1=class extends ProgressBase(BaseShapes){constructor(t,n,f,T,E,h,S,e){IsPlainObject$F(n)?(e=n,n=GetValue$2w(e,"x",0),f=GetValue$2w(e,"y",0),T=GetValue$2w(e,"width",2),E=GetValue$2w(e,"height",2),h=GetValue$2w(e,"barColor",void 0),S=GetValue$2w(e,"value",0)):IsPlainObject$F(T)?(e=T,T=GetValue$2w(e,"width",2),E=GetValue$2w(e,"height",2),h=GetValue$2w(e,"barColor",void 0),S=GetValue$2w(e,"value",0)):IsPlainObject$F(h)&&(e=h,h=GetValue$2w(e,"barColor",void 0),S=GetValue$2w(e,"value",0)),super(t,n,f,T,E,e),this.type="rexLineProgress",this.bootProgressBase(e),this.addShape(new Lines().setName("trackFill")).addShape(new Lines().setName("bar")).addShape(new Lines().setName("trackStroke")),this.setTrackColor(GetValue$2w(e,"trackColor",void 0)),this.setBarColor(h),this.setTrackStroke(GetValue$2w(e,"trackStrokeThickness",2),GetValue$2w(e,"trackStrokeColor",void 0)),this.setSkewX(GetValue$2w(e,"skewX",0)),this.setRTL(GetValue$2w(e,"rtl",!1)),this.setValue(S)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,n){return this.trackStrokeThickness=t,this.trackStrokeColor=n,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}};var Methods$9={updateShapes:UpdateShapes};Object.assign(LineProgress$1.prototype,Methods$9);ObjectFactory.register("lineProgress",function(s,t,n,f,T,E,h){var S=new LineProgress$1(this.scene,s,t,n,f,T,E,h);return this.scene.add.existing(S),S});SetValue(window,"RexPlugins.UI.LineProgress",LineProgress$1);var AddPolygonPath=function(s,t){s.save(),s.beginPath();var n=t[0];s.moveTo(n.x,n.y);for(var f=1,T=t.length;f<T;f++)n=t[f],s.lineTo(n.x,n.y);s.closePath(),s.restore()},DrawPolygon=function(s,t,n,f,T,E,h){h===void 0&&(h="round"),AddPolygonPath(t,n),t.lineJoin=h,f!=null&&(t.fillStyle=f,t.fill()),T!=null&&(t.strokeStyle=T,t.lineWidth=E,t.stroke())},DrawContent=function(){var s=this.skewX,t=this.width-Math.abs(s),n=this.height,f=this.canvas,T=this.context;(this.trackColor||this.trackStrokeColor)&&BuildPolygon(0,0,t,n,s,this.trackPoints);var E,h;if(this.barColor&&(this.rtl?(E=t*(1-this.value),h=t):(E=0,h=t*this.value),BuildPolygon(E,0,h,n,s,this.barPoints)),this.trackColor&&(T.save(),DrawPolygon(f,T,this.trackPoints,this.trackColor),T.restore()),this.barColor){T.save();var S;if(this.barColor2){var e;if(this.isHorizontalGradient){var d=n/2;e=T.createLinearGradient(E,d,h,d)}else{var y=t/2;e=T.createLinearGradient(y,0,y,n)}e.addColorStop(0,this.rtl?this.barColor:this.barColor2),e.addColorStop(1,this.rtl?this.barColor2:this.barColor),S=e}else S=this.barColor;DrawPolygon(f,T,this.barPoints,S),T.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(T.save(),DrawPolygon(f,T,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),T.restore())},BuildPolygon=function(s,t,n,f,T,E){E===void 0&&(E=[]),E.length=4;for(var h=0;h<4;h++)E[h]||(E[h]={});var S;return T>=0?(S=E[0],S.x=s+T,S.y=t,S=E[1],S.x=n+T,S.y=t,S=E[2],S.x=n,S.y=f,S=E[3],S.x=s,S.y=f):(S=E[0],S.x=s,S.y=t,S=E[1],S.x=n,S.y=t,S=E[2],S.x=n-T,S.y=f,S=E[3],S.x=s-T,S.y=f),E};const GetValue$2v=Phaser.Utils.Objects.GetValue,IsPlainObject$E=Phaser.Utils.Objects.IsPlainObject;class LineProgress extends ProgressBase(Canvas$1){constructor(t,n,f,T,E,h,S,e){IsPlainObject$E(n)?(e=n,n=GetValue$2v(e,"x",0),f=GetValue$2v(e,"y",0),T=GetValue$2v(e,"width",2),E=GetValue$2v(e,"height",2),h=GetValue$2v(e,"barColor",void 0),S=GetValue$2v(e,"value",0)):IsPlainObject$E(T)?(e=T,T=GetValue$2v(e,"width",2),E=GetValue$2v(e,"height",2),h=GetValue$2v(e,"barColor",void 0),S=GetValue$2v(e,"value",0)):IsPlainObject$E(h)&&(e=h,h=GetValue$2v(e,"barColor",void 0),S=GetValue$2v(e,"value",0)),super(t,n,f,T,E),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(e),this.setTrackColor(GetValue$2v(e,"trackColor",void 0)),this.setBarColor(h,GetValue$2v(e,"barColor2",void 0),GetValue$2v(e,"isHorizontalGradient",void 0)),this.setTrackStroke(GetValue$2v(e,"trackStrokeThickness",2),GetValue$2v(e,"trackStrokeColor",void 0)),this.setSkewX(GetValue$2v(e,"skewX",0)),this.setRTL(GetValue$2v(e,"rtl",!1)),this.setValue(S)}get trackColor(){return this._trackColor}set trackColor(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,n){return this.trackStrokeThickness=t,this.trackStrokeColor=n,this}get barColor(){return this._barColor}set barColor(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=GetStyle(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,n,f){return f===void 0&&(f=!0),this.barColor=t,this.barColor2=n,this.isHorizontalGradient=f,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return this.clear(),DrawContent.call(this),super.updateTexture(),this}}ObjectFactory.register("circularProgressCanvas",function(s,t,n,f,T,E,h){var S=new LineProgress(this.scene,s,t,n,f,T,E,h);return this.scene.add.existing(S),S});SetValue(window,"RexPlugins.UI.LineProgressCanvas",LineProgress);Phaser.Math.Wrap;const Linear$7=Phaser.Math.Linear;var DrawFitTriangle=function(){var s=this.getShape("triangle"),t=this.padding,n=this.width-t.right,f=0+t.left,T=this.height-t.bottom,E=0+t.top,h=(f+n)/2,S=(E+T)/2,e={0:{a:{x:f,y:E},b:{x:n,y:S},c:{x:f,y:T}},1:{a:{x:f,y:E},b:{x:h,y:T},c:{x:n,y:E}},2:{a:{x:n,y:E},b:{x:f,y:S},c:{x:n,y:T}},3:{a:{x:f,y:T},b:{x:h,y:E},c:{x:n,y:T}}},d,y,c,u,l,r;if(this.previousDirection===void 0){var a=e[this.direction],v=a.a,o=a.b,p=a.c;d=v.x,y=v.y,c=o.x,u=o.y,l=p.x,r=p.y}else{var m=e[this.previousDirection],g=e[this.direction],x=this.easeDirectionProgress;d=Linear$7(m.a.x,g.a.x,x),y=Linear$7(m.a.y,g.a.y,x),c=Linear$7(m.b.x,g.b.x,x),u=Linear$7(m.b.y,g.b.y,x),l=Linear$7(m.c.x,g.c.x,x),r=Linear$7(m.c.y,g.c.y,x)}s.startAt(d,y).lineTo(c,u).lineTo(l,r),this.arrowOnly?s.end():s.close()};const DegToRad$8=Phaser.Math.DegToRad,Rad120=DegToRad$8(120);var DrawCircleVerticesTriangle=function(t){var t=this.getShape("triangle"),n=this.width/2,f=this.height/2,T=Math.min(n,f)*this.radius,E=this.verticeRotation;t.startAt(n+T*Math.cos(E+Rad120),f+T*Math.sin(E+Rad120)).lineTo(n+T*Math.cos(E),f+T*Math.sin(E)).lineTo(n+T*Math.cos(E-Rad120),f+T*Math.sin(E-Rad120)),this.arrowOnly?t.end():t.close()};const ShapesUpdateMethods$1={buildShapes(){this.addShape(new Lines().setName("triangle"))},updateShapes(){var s=this.getShape("triangle");this.arrowOnly?s.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):s.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?DrawFitTriangle.call(this):DrawCircleVerticesTriangle.call(this)}},EaseDirectionMethods={setEaseDuration(s){return s===void 0&&(s=0),this.easeDuration=s,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new EaseValueTask(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}},GetValue$2u=Phaser.Utils.Objects.GetValue,IsPlainObject$D=Phaser.Utils.Objects.IsPlainObject,DegToRad$7=Phaser.Math.DegToRad,RadToDeg$6=Phaser.Math.RadToDeg;class Triangle extends BaseShapes{constructor(t,n,f,T,E,h,S){var e,d,y,c,u,l,r,a;if(IsPlainObject$D(n)){var v=n;n=v.x,f=v.y,T=v.width,E=v.height,h=v.color,S=v.alpha,e=v.strokeColor,d=v.strokeAlpha,y=v.strokeWidth,c=v.arrowOnly,u=v.direction,l=v.easeDuration,r=v.padding,a=v.radius}n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=1),E===void 0&&(E=T),c===void 0&&(c=!1),u===void 0&&(u=0),l===void 0&&(l=0),r===void 0&&(r=0),a===void 0&&(a=void 0),super(t,n,f,T,E),this.type="rexTriangle",this.setFillStyle(h,S),e!==void 0&&y===void 0&&(y=2),this.setStrokeStyle(y,e,d),this.setArrowOnly(c),this.setDirection(u,l),this.setPadding(r),this.setRadius(a),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=ParseDirection(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,n){return n!==void 0&&this.setEaseDuration(n),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,n,f,T){if(typeof t=="object"){var E=t,h=GetValue$2u(E,"x",null);h!==null?(t=h,f=h):(t=GetValue$2u(E,"left",0),f=GetValue$2u(E,"right",t));var S=GetValue$2u(E,"y",null);S!==null?(n=S,T=S):(n=GetValue$2u(E,"top",0),T=GetValue$2u(E,"bottom",n))}else t===void 0&&(t=0),n===void 0&&(n=t),f===void 0&&(f=t),T===void 0&&(T=n);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=n||this.padding.right!=f||this.padding.bottom!=T,this.padding.left=t,this.padding.top=n,this.padding.right=f,this.padding.bottom=T,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return RadToDeg$6(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=DegToRad$7(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const DirectionNameMap={right:0,down:1,left:2,up:3};var ParseDirection=function(s){return typeof s=="string"&&(s=DirectionNameMap[s]),s=s%4,s};Object.assign(Triangle.prototype,ShapesUpdateMethods$1,EaseDirectionMethods);ObjectFactory.register("triangle",function(s,t,n,f,T,E){var h=new Triangle(this.scene,s,t,n,f,T,E);return this.scene.add.existing(h),h});SetValue(window,"RexPlugins.UI.Triangle",Triangle);CheckP3Version();const Zone$1=Phaser.GameObjects.Zone,AddItem=Phaser.Utils.Array.Add,RemoveItem$5=Phaser.Utils.Array.Remove;let Base$1=class extends Zone$1{constructor(t,n,f,T,E){n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=1),E===void 0&&(E=1),super(t,n,f,T,E),this.children=[]}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var n,f=this.children.length-1;f>=0;f--)n=this.children[f],!n.parentContainer&&!n.displayList&&n.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var n=this;return AddItem(this.children,t,0,function(f){f.once("destroy",n.onChildDestroy,n)},this),this}remove(t,n){var f=this;return RemoveItem$5(this.children,t,function(T){T.off("destroy",f.onChildDestroy,f),n&&T.destroy()}),this}onChildDestroy(t,n){this.remove(t,!1)}clear(t){for(var n=this,f,T=0,E=this.children.length;T<E;T++)f=this.children[T],f.off("destroy",n.onChildDestroy,n),t&&f.destroy();return this.children.length=0,this}};const Components$1=Phaser.GameObjects.Components;Phaser.Class.mixin(Base$1,[Components$1.Alpha,Components$1.Flip]);var GetParent$1=function(s,t){var n;if(t===void 0)s.hasOwnProperty("rexContainer")&&(n=s.rexContainer.parent);else for(n=GetParent$1(s);n&&n.name!==t;)n=GetParent$1(n);return n},GetTopmostParent$1=function(s){for(var t=GetParent$1(s);t;)s=t,t=GetParent$1(t);return s};const DegToRad$6=Phaser.Math.DegToRad,RadToDeg$5=Phaser.Math.RadToDeg;var GetLocalState=function(s){if(!s.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return RadToDeg$5(this.rotation)},set:function(n){this.rotation=DegToRad$6(n)}}),Object.defineProperty(t,"displayWidth",{get:function(){return s.width*this.scaleX},set:function(n){this.scaleX=n/s.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return s.height*this.scaleY},set:function(n){this.scaleY=n/s.height}}),s.rexContainer=t}return s.rexContainer};const Parent={setParent(s,t){t===void 0&&(t=this);var n=GetLocalState(s);return t?(n.parent=t,n.self=s):(n.parent=null,n.self=null),this},getParent(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),GetParent$1(s,t)},getTopmostParent(s){return s===void 0&&(s=this),GetTopmostParent$1(s)}},GetValue$2t=Phaser.Utils.Objects.GetValue,BaseAdd=Base$1.prototype.add;var Add$8=function(s,t){this.setParent(s);var n=GetLocalState(s);return SetupSyncFlags(n,t),this.resetChildState(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),BaseAdd.call(this,s),this.addToParentContainer(s),this.addToRenderLayer(s),this},AddLocal=function(s,t){this.setParent(s);var n=GetLocalState(s);return SetupSyncFlags(n,t),n.x=s.x,n.y=s.y,n.rotation=s.rotation,n.scaleX=s.scaleX,n.scaleY=s.scaleY,n.alpha=s.alpha,n.visible=s.visible,n.active=s.active,this.updateChildPosition(s).updateChildAlpha(s).updateChildVisible(s).updateChildActive(s).updateChildScrollFactor(s).updateChildMask(s),BaseAdd.call(this,s),this.addToRenderLayer(s),this},SetupSyncFlags=function(s,t){t===void 0&&(t=!0),typeof t=="boolean"?(s.syncPosition=t,s.syncRotation=t,s.syncScale=t,s.syncAlpha=t,s.syncScrollFactor=t):(s.syncPosition=GetValue$2t(t,"syncPosition",!0),s.syncRotation=GetValue$2t(t,"syncRotation",!0),s.syncScale=GetValue$2t(t,"syncScale",!0),s.syncAlpha=GetValue$2t(t,"syncAlpha",!0),s.syncScrollFactor=GetValue$2t(t,"syncScrollFactor",!0))};const AddChild$2={add(s){return Array.isArray(s)?this.addMultiple(s):Add$8.call(this,s),this},pin(s,t){return Array.isArray(s)?this.addMultiple(s,t):Add$8.call(this,s,t),this},addMultiple(s){for(var t=0,n=s.length;t<n;t++)Add$8.call(this,s[t]);return this},addLocal(s){return Array.isArray(s)?this.addMultiple(s):AddLocal.call(this,s),this},pinLocal(s,t){return Array.isArray(s)?this.addMultiple(s,t):AddLocal.call(this,s,t),this},addLocalMultiple(s){for(var t=0,n=s.length;t<n;t++)AddLocal.call(this,s[t]);return this}},BaseRemove=Base$1.prototype.remove,BaseClear=Base$1.prototype.clear,RemoveChild$1={remove(s,t){return GetParent$1(s)!==this?this:(this.setParent(s,null),t||this.removeFromRenderLayer(s),BaseRemove.call(this,s,t),this)},unpin(s,t){return GetParent$1(s)!==this?this:(this.setParent(s,null),t||this.removeFromRenderLayer(s),BaseRemove.call(this,s,t),this)},clear(s){for(var t=this.children,n=0,f=t.length;n<f;n++){var T=t[n];this.setParent(T,null),s||this.removeFromRenderLayer(T)}return BaseClear.call(this,s),this}},ChildState={getLocalState(s){return GetLocalState(s)},resetChildState(s){return this.resetChildPositionState(s).resetChildVisibleState(s).resetChildAlphaState(s).resetChildActiveState(s),this},resetChildrenState(s){for(var t=0,n=s.length;t<n;t++)this.resetChildState(s[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},RotateAround$5=Phaser.Math.RotateAround,Transform={worldToLocal(s){return s.x-=this.x,s.y-=this.y,RotateAround$5(s,0,0,-this.rotation),s.x/=this.scaleX,s.y/=this.scaleY,s},localToWorld(s){return s.x*=this.scaleX,s.y*=this.scaleY,RotateAround$5(s,0,0,this.rotation),s.x+=this.x,s.y+=this.y,s}};var GetScale=function(s,t){return s===t?1:s/t};const Position={updateChildPosition(s){s.isRexContainerLite&&(s.syncChildrenEnable=!1);var t=GetLocalState(s),n=t.parent;return t.syncPosition&&(s.x=t.x,s.y=t.y,n.localToWorld(s)),t.syncRotation&&(s.rotation=t.rotation+n.rotation),t.syncScale&&(s.scaleX=t.scaleX*n.scaleX,s.scaleY=t.scaleY*n.scaleY),s.isRexContainerLite&&(s.syncChildrenEnable=!0,s.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(s){var t=GetLocalState(s),n=t.parent;return t.x=s.x,t.y=s.y,n.worldToLocal(t),t.scaleX=GetScale(s.scaleX,n.scaleX),t.scaleY=GetScale(s.scaleY,n.scaleY),t.rotation=s.rotation-n.rotation,this},setChildPosition(s,t,n){return s.x=t,s.y=n,this.resetChildPositionState(s),this},setChildLocalPosition(s,t,n){var f=GetLocalState(s);return f.x=t,f.y=n,this.updateChildPosition(s),this},resetLocalPositionState(){var s=GetLocalState(this).parent;return s&&s.resetChildPositionState(this),this}},DegToRad$5=Phaser.Math.DegToRad,Rotation={updateChildRotation(s){var t=GetLocalState(s),n=t.parent;return t.syncRotation&&(s.rotation=n.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(s){var t=GetLocalState(s),n=t.parent;return t.rotation=s.rotation-n.rotation,this},setChildRotation(s,t){return s.rotation=t,this.resetChildRotationState(s),this},setChildAngle(s,t){return s.angle=t,this.resetChildRotationState(s),this},setChildLocalRotation(s,t){var n=GetLocalState(s);return n.rotation=t,this.updateChildRotation(s),this},setChildLocalAngle(s,t){var n=GetLocalState(s);return n.rotation=DegToRad$5(t),this.updateChildRotation(s),this},resetLocalRotationState(){var s=GetLocalState(this).parent;return s&&s.resetChildRotationState(this),this}},Scale$1={updateChildScale(s){var t=GetLocalState(s),n=t.parent;return t.syncScale&&(s.scaleX=n.scaleX*t.scaleX,s.scaleY=n.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(s){var t=GetLocalState(s),n=t.parent;return t.scaleX=GetScale(s.scaleX,n.scaleX),t.scaleY=GetScale(s.scaleY,n.scaleY),this},setChildScale(s,t,n){return n===void 0&&(n=t),s.scaleX=t,s.scaleY=n,this.resetChildScaleState(s),this},setChildLocalScale(s,t,n){n===void 0&&(n=t);var f=GetLocalState(s);return f.scaleX=t,f.scaleY=n,this.updateChildScale(s),this},setChildDisplaySize(s,t,n){return s.setDisplaySize(t,n),this.resetChildScaleState(s),this},resetLocalScaleState(){var s=GetLocalState(this).parent;return s&&s.resetChildScaleState(this),this}},Visible$1={updateChildVisible(s){var t=GetLocalState(s),n=t.parent,f=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return s.visible=n.visible&&t.visible&&f,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(s){var t=GetLocalState(s);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=s.visible,this},setChildVisible(s,t){return this.setChildLocalVisible(s,t),this},setChildLocalVisible(s,t){t===void 0&&(t=!0);var n=GetLocalState(s);return n.visible=t,this.updateChildVisible(s),this},setChildMaskVisible(s,t){t===void 0&&(t=!0);var n=GetLocalState(s);return n.maskVisible=t,this.updateChildVisible(s),this},resetLocalVisibleState(){var s=GetLocalState(this).parent;return s&&s.resetChildVisibleState(this),this}},Alpha={updateChildAlpha(s){var t=GetLocalState(s),n=t.parent;return t.syncAlpha&&(s.alpha=n.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(s){var t=GetLocalState(s),n=t.parent;return t.alpha=GetScale(s.alpha,n.alpha),this},setChildAlpha(s,t){return s.alpha=t,this.resetChildAlphaState(s),this},setChildLocalAlpha(s,t){var n=GetLocalState(s);return n.alpha=t,this.updateChildAlpha(s),this},resetLocalAlphaState(){var s=GetLocalState(this).parent;return s&&s.resetChildAlphaState(this),this}},Active={updateChildActive(s){var t=GetLocalState(s),n=t.parent;return s.active=n.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(s){var t=GetLocalState(s);return t.active=s.active,this},setChildActive(s,t){return s.active=t,this.resetChildActiveState(s),this},setChildLocalActive(s,t){t===void 0&&(t=!0);var n=GetLocalState(s);return n.active=t,this.updateChildActive(s),this},resetLocalActiveState(){var s=GetLocalState(this).parent;return s&&s.resetChildActiveState(this),this}},ScrollFactor={updateChildScrollFactor(s){var t=GetLocalState(s),n=t.parent;return t.syncScrollFactor&&(s.scrollFactorX=n.scrollFactorX,s.scrollFactorY=n.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},Mask={updateChildMask(s){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==s&&(s.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(s){return this.mask=s,this},clearMask(s){s===void 0&&(s=!1);var t=this;return this._mask=null,this.setChildMaskVisible(this),this.children.forEach(function(n){n.clearMask&&n.clearMask(!1),n.hasOwnProperty("isRexContainerLite")||t.setChildMaskVisible(n)}),s&&this.mask&&this.mask.destroy(),this}},Depth={setDepth(s,t){if(this.depth=s,!t&&this.children)for(var n=this.getAllChildren(),f=0,T=n.length;f<T;f++)n[f].depth=s;return this},swapDepth(s){var t=this.depth,n=s.depth;return this.setDepth(n),s.setDepth(t),this},incDepth(s){if(this.depth+=s,this.children)for(var t=this.getAllChildren(),n=0,f=t.length;n<f;n++)t[n].depth+=s;return this},bringToTop(){var s=this.displayList,t=this.getAllChildren([this]);SortGameObjectsByDepth(t,!1);for(var n=0,f=t.length;n<f;n++){var T=t[n];s.exists(T)&&s.bringToTop(T)}return this},moveDepthBelow(s){var t=this.displayList;if(s.displayList!==t)return this;var n=this.getAllChildren([this]);SortGameObjectsByDepth(n,!1);for(var f=0,T=n.length;f<T;f++){var E=n[f];if(t.exists(E)){t.moveBelow(s,E);break}}return this},moveDepthAbove(s){var t=this.displayList;if(s.displayList!==t)return this;var n=this.getAllChildren([this]);SortGameObjectsByDepth(n,!0);for(var f=0,T=n.length;f<T;f++){var E=n[f];if(t.exists(E)){t.moveAbove(s,E);break}}return this},bringChildToTop(s){var t=this.getAllChildren([this]);SortGameObjectsByDepth(t,!0);var n=t[0];return n===s?this:n.displayList!==s.displayList?this:(n.displayList.moveAbove(s,n),this)},sendChildToBack(s){var t=this.getAllChildren([this]);SortGameObjectsByDepth(t,!1);var n=t[0];return n===s?this:n.displayList!==s.displayList?this:(n.displayList.moveBelow(s,n),this)}};var DepthFirstSearch=function(s,t){var n=t(s);if(!n&&s.isRexContainerLite)for(var f=s.children,T=0,E=f.length;T<E;T++)DepthFirstSearch(f[T],t)},BreadthFirstSearch=function(s,t){for(var n=[s];n.length>0;){var f=n.shift(),T=t(f);!T&&f.isRexContainerLite&&n.push(...f.children)}};const ArrayUtils=Phaser.Utils.Array,Children={getChildren(s){if(!s)s=this.children;else for(var t=0,n=this.children.length;t<n;t++)s.push(this.children[t]);return s},getAllChildren(s){s===void 0&&(s=[]);var t=this;return BreadthFirstSearch(t,function(n){n!==t&&s.push(n)}),s},getAllVisibleChildren(s){s===void 0&&(s=[]);var t=this;return BreadthFirstSearch(t,function(n){if(n!==t){if(!n.visible)return!0;s.push(n)}}),s},bfs(s,t){return t===void 0&&(t=this),BreadthFirstSearch(t,s),this},dfs(s,t){return t===void 0&&(t=this),DepthFirstSearch(t,s),this},contains(s){var t=GetParent$1(s);return t?t===this?!0:this.contains(t):!1},getByName(s,t){if(t){for(var n=[this],f,T;n.length;){f=n.shift();for(var E=0,h=f.children.length;E<h;E++){if(T=f.children[E],T.name===s)return T;T.isRexContainerLite&&n.push(T)}}return null}else return ArrayUtils.GetFirst(this.children,"name",s)},getRandom(s,t){return ArrayUtils.GetRandom(this.children,s,t)},getFirst(s,t,n,f){return ArrayUtils.GetFirstElement(this.children,s,t,n,f)},getAll(s,t,n,f){return ArrayUtils.GetAll(this.children,s,t,n,f)},count(s,t,n,f){return ArrayUtils.CountAllMatching(this.children,s,t,n,f)},swap(s,t){return ArrayUtils.Swap(this.children,s,t),this},setAll(s,t,n,f){return ArrayUtils.SetAll(this.children,s,t,n,f),this}};var GetLocalStates=function(s){for(var t=[],n=0,f=s.length;n<f;n++){var T=s[n];T.hasOwnProperty("rexContainer")&&t.push(T.rexContainer)}return t},GetScene=function(s){for(var t=0,n=s.length;t<n;t++){var f=s[t].scene;if(f)return f}return null},UpdateChild=function(s,t,n){if(!n.parent){s.remove();return}var f=n.parent,T=n.self;switch(t){case"x":case"y":f.updateChildPosition(T);break;case"angle":case"rotation":f.updateChildRotation(T);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":f.updateChildScale(T);break;case"alpha":f.updateChildAlpha(T);break;default:f.updateChildPosition(T),f.updateChildRotation(T),f.updateChildScale(T),f.updateChildAlpha(T);break}};const Tween={tweenChild(s){var t=s.targets;Array.isArray(t)||(t=[t]);var n=this.scene||GetScene(t);if(n){s.targets=GetLocalStates(t);var f=n.tweens.add(s);return f.on("update",UpdateChild),f}},tweenSelf(s){return s.targets=[this],this.tweenChild(s)},createTweenChildConfig(s){var t=s.targets;t&&(Array.isArray(t)||(t=[t]),s.targets=GetLocalStates(t));var n=s.onUpdate;return s.onUpdate=function(f,T){n&&n(f,T),UpdateChild(f,void 0,T)},s},tween(s){var t=this.scene;return s.targets||(s.targets=this),t.tweens.add(s)}},ContainerKlass=Phaser.GameObjects.Container;var IsContainerGameObject=function(s){return s instanceof ContainerKlass};const LayerKlass=Phaser.GameObjects.Layer;var IsLayerGameObject=function(s){return s instanceof LayerKlass},GetValidChildren=function(s){var t=s.getAllChildren([s]);return t=t.filter(function(n){return!!n.displayList||!!n.parentContainer}),t},AddToContainer=function(s){var t=GetValidChildren(this);SortGameObjectsByDepth(t),s.add(t)},RemoveFromContainer=function(s,t,n){if(this.scene){var f=GetValidChildren(this);SortGameObjectsByDepth(f,t),s.remove(f),n&&f.forEach(function(T){T.addToDisplayList()})}};const P3Container={addToContainer(s){return IsContainerGameObject(s)?(this._setParentContainerFlag=!0,AddToContainer.call(this,s),this._setParentContainerFlag=!1,this):this},addToLayer(s){return IsLayerGameObject(s)?(AddToContainer.call(this,s),this):this},removeFromContainer(){return this.parentContainer?(this._setParentContainerFlag=!0,RemoveFromContainer.call(this,this.parentContainer,!0,!1),this._setParentContainerFlag=!1,this):this},removeFromLayer(s){return s===void 0&&(s=!0),IsLayerGameObject(this.displayList)?(RemoveFromContainer.call(this,this.displayList,!1,s),this):this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var s=this.getParent();s;){var t=s.parentContainer;if(t)return t;s=s.getParent()}return null},addToParentContainer(s){if(!s.displayList)return this;var t=this.getParentContainer();return t?(s.isRexContainerLite?s.addToContainer(t):t.add(s),this):this}},RenderLayer={hasLayer(){return!!this.privateRenderLayer},enableLayer(){if(this.hasLayer())return this;var s=this.scene.add.layer();return this.moveDepthBelow(s),this.addToLayer(s),this.privateRenderLayer=s,this},getLayer(){return this.hasLayer()||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.hasLayer())return this.privateRenderLayer;for(var s=this.getParent();s;){var t=s.privateRenderLayer;if(t)return t;s=s.getParent()}return null},addToRenderLayer(s){if(!s.displayList)return this;var t=this.getRenderLayer();if(!t)return this;s.isRexContainerLite?s.addToLayer(t):t.add(s);var n=GetLocalState(s);return n.layer=t,this},removeFromRenderLayer(s){var t=GetLocalState(s),n=t.layer;return n?(s.isRexContainerLite?s.removeFromLayer(!0):n.remove(s),t.layer=null,this):this}},Rectangle$1=Phaser.Geom.Rectangle,Union=Phaser.Geom.Rectangle.Union;var GetBoundsOfGameObjects=function(s,t){t===void 0?t=new Rectangle$1:t===!0&&(GlobRect$1===void 0&&(GlobRect$1=new Rectangle$1),t=GlobRect$1),t.setTo(0,0,0,0);for(var n,f=!0,T=0,E=s.length;T<E;T++)if(n=s[T],!!n.getBounds){var h=GetBounds(n,!0);f?(t.setTo(h.x,h.y,h.width,h.height),f=!1):Union(h,t,t)}return t},GlobRect$1;const GameObjectClass=Phaser.GameObjects.GameObject;var IsGameObject=function(s){return s instanceof GameObjectClass},GetValue$2s=Phaser.Utils.Objects.GetValue,DynamicTexture$1=Phaser.Textures.DynamicTexture,UUID$2=Phaser.Utils.String.UUID,Snapshot=function(s){if(s){var t=s.gameObjects,n=s.renderTexture,f=GetValue$2s(s,"x",void 0),T=GetValue$2s(s,"y",void 0),E=GetValue$2s(s,"width",void 0),h=GetValue$2s(s,"height",void 0),S=GetValue$2s(s,"originX",0),e=GetValue$2s(s,"originY",0),d=GetValue$2s(s,"padding",0),y,c;if(E===void 0||h===void 0||f===void 0||T===void 0){var u=GetBoundsOfGameObjects(t,!0),l=f!==void 0&&T!==void 0;l?(E=Math.max(f-u.left,u.right-f)*2,h=Math.max(T-u.top,u.bottom-T)*2,S=.5,e=.5):(f=u.x,T=u.y,E=u.width,h=u.height,S=0,e=0),y=u.x,c=u.y}else y=f+(0-S)*E,c=T+(0-e)*h;y-=d,c-=d,E+=d*2,h+=d*2;var r=t[0].scene;a&&!n&&(n=new DynamicTexture$1(r.sys.textures,UUID$2(),E,h)),n||(n=r.add.renderTexture(0,0,E,h)),n.setPosition&&n.setPosition(f,T),(n.width!==E||n.height!==h)&&n.setSize(E,h),n.setOrigin&&n.setOrigin(S,e),n.camera.setScroll(y,c),t=SortGameObjectsByDepth(Clone$1(t)),n.draw(t);var a=s.saveTexture;if(a)if(IsGameObject(n))n.saveTexture(a);else{var v=n,o=v.manager;o.exists(v.key)?o.renameTexture(v.key,key):(v.key=key,o.list[key]=v,o.emit("addtexture",key,v),o.emit(`addtexture-${key}`,v))}return n}};const RenderTexture$1={snapshot(s){var t=this.scaleX,n=this.scaleY,f=t===1&&n===1;f||this.setScale(1),s===void 0&&(s={}),s.gameObjects=this.getAllVisibleChildren(),s.x=this.x,s.y=this.y,s.originX=this.originX,s.originY=this.originY;var T=Snapshot(s),E=!!T.scene;return f||(this.setScale(t,n),E&&T.setScale(t,n)),E?T:this}},GetValue$2r=Phaser.Utils.Objects.GetValue;var DrawBounds$1=function(s,t){var n=GetValue$2r(t,"drawContainer",!0),f=GetValue$2r(t,"children");return f===void 0&&(f=this.getAllVisibleChildren([this])),n||(f=f.filter(function(T){return!T.isRexContainerLite})),DrawBounds$2(f,s,t),this};const RotateAround$4=Phaser.Math.RotateAround;var ChangeOrigin$1=function(s,t,n){n===void 0&&(n=t);var f={x:(t-s.originX)*s.displayWidth,y:(n-s.originY)*s.displayHeight};return RotateAround$4(f,0,0,s.rotation),s.originX=t,s.originY=n,s.x=s.x+f.x,s.y=s.y+f.y,s},ChangeOrigin=function(s,t){this.syncChildrenEnable=!1,ChangeOrigin$1(this,s,t),this.syncChildrenEnable=!0;for(var n=this.getAllChildren(),f=0,T=n.length;f<T;f++)this.resetChildPositionState(n[f]);return this},methods$t={changeOrigin:ChangeOrigin,drawBounds:DrawBounds$1};Object.assign(methods$t,Parent,AddChild$2,RemoveChild$1,ChildState,Transform,Position,Rotation,Scale$1,Visible$1,Alpha,Active,ScrollFactor,Mask,Depth,Children,Tween,P3Container,RenderLayer,RenderTexture$1);class ContainerLite extends Base$1{constructor(t,n,f,T,E,h){Array.isArray(T)&&(h=T,T=void 0,E=void 0),super(t,n,f,T,E),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this.privateRenderLayer=void 0,h&&this.add(h)}destroy(t){!this.scene||this.ignoreDestroy||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,n){return this.setSize(t,n),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return GetParent$1(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=GetParent$1(this);return t?t.setParentContainerFlag:!1}}Object.assign(ContainerLite.prototype,methods$t);var GetSizerConfig$1=function(s){return s.hasOwnProperty("rexSizer")||(s.rexSizer={}),s.rexSizer};function GetSizerConfig(s){return s===void 0&&(s=this),GetSizerConfig$1(s)}var GetChildPrevState=function(s){var t=GetSizerConfig$1(s);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},PushIntoBounds=function(s){return s===void 0&&(s=GetViewport(this.scene)),this.left=Math.max(this.left,s.left),this.right=Math.min(this.right,s.right),this.top=Math.max(this.top,s.top),this.bottom=Math.min(this.bottom,s.bottom),this};const ALIGN$1=Phaser.Display.Align,AlignConst={center:ALIGN$1.CENTER,left:ALIGN$1.LEFT_CENTER,right:ALIGN$1.RIGHT_CENTER,top:ALIGN$1.TOP_CENTER,bottom:ALIGN$1.BOTTOM_CENTER,"left-top":ALIGN$1.TOP_LEFT,"top-left":ALIGN$1.TOP_LEFT,"left-center":ALIGN$1.LEFT_CENTER,"center-left":ALIGN$1.LEFT_CENTER,"left-bottom":ALIGN$1.BOTTOM_LEFT,"bottom-left":ALIGN$1.BOTTOM_LEFT,"center-top":ALIGN$1.TOP_CENTER,"top-center":ALIGN$1.TOP_CENTER,"center-center":ALIGN$1.CENTER,"center-bottom":ALIGN$1.BOTTOM_CENTER,"bottom-center":ALIGN$1.BOTTOM_CENTER,"right-top":ALIGN$1.TOP_RIGHT,"top-right":ALIGN$1.TOP_RIGHT,"right-center":ALIGN$1.RIGHT_CENTER,"center-right":ALIGN$1.RIGHT_CENTER,"right-bottom":ALIGN$1.BOTTOM_RIGHT,"bottom-right":ALIGN$1.BOTTOM_RIGHT};var globZone=new Phaser.GameObjects.Zone({sys:{queueDepthSort:NOOP,events:{once:NOOP}}},0,0,1,1);globZone.setOrigin(0);var ALIGN_CONST={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},GetBottom=function(s){var t=GetDisplayHeight(s);return s.y+t-t*s.originY},GetCenterX=function(s){var t=GetDisplayWidth(s);return s.x-t*s.originX+t*.5},SetBottom=function(s,t){var n=GetDisplayHeight(s);return s.y=t-n+n*s.originY,s},SetCenterX=function(s,t){var n=GetDisplayWidth(s),f=n*s.originX;return s.x=t+f-n*.5,s},BottomCenter=function(s,t,n,f){return n===void 0&&(n=0),f===void 0&&(f=0),SetCenterX(s,GetCenterX(t)+n),SetBottom(s,GetBottom(t)+f),s},GetLeft=function(s){var t=GetDisplayWidth(s);return s.x-t*s.originX},SetLeft=function(s,t){var n=GetDisplayWidth(s);return s.x=t+n*s.originX,s},BottomLeft=function(s,t,n,f){return n===void 0&&(n=0),f===void 0&&(f=0),SetLeft(s,GetLeft(t)-n),SetBottom(s,GetBottom(t)+f),s},GetRight=function(s){var t=GetDisplayWidth(s);return s.x+t-t*s.originX},SetRight=function(s,t){var n=GetDisplayWidth(s);return s.x=t-n+n*s.originX,s},BottomRight=function(s,t,n,f){return n===void 0&&(n=0),f===void 0&&(f=0),SetRight(s,GetRight(t)+n),SetBottom(s,GetBottom(t)+f),s},SetCenterY=function(s,t){var n=GetDisplayHeight(s),f=n*s.originY;return s.y=t+f-n*.5,s},CenterOn=function(s,t,n){return SetCenterX(s,t),SetCenterY(s,n)},GetCenterY=function(s){var t=GetDisplayHeight(s);return s.y-t*s.originY+t*.5},Center=function(s,t,n,f){return n===void 0&&(n=0),f===void 0&&(f=0),CenterOn(s,GetCenterX(t)+n,GetCenterY(t)+f),s},LeftCenter=function(s,t,n,f){return n===void 0&&(n=0),f===void 0&&(f=0),SetLeft(s,GetLeft(t)-n),SetCenterY(s,GetCenterY(t)+f),s},RightCenter=function(s,t,n,f){return n===void 0&&(n=0),f===void 0&&(f=0),SetRight(s,GetRight(t)+n),SetCenterY(s,GetCenterY(t)+f),s},GetTop=function(s){var t=GetDisplayHeight(s);return s.y-t*s.originY},SetTop=function(s,t){var n=GetDisplayHeight(s);return s.y=t+n*s.originY,s},TopCenter=function(s,t,n,f){return n===void 0&&(n=0),f===void 0&&(f=0),SetCenterX(s,GetCenterX(t)+n),SetTop(s,GetTop(t)-f),s},TopLeft=function(s,t,n,f){return n===void 0&&(n=0),f===void 0&&(f=0),SetLeft(s,GetLeft(t)-n),SetTop(s,GetTop(t)-f),s},TopRight=function(s,t,n,f){return n===void 0&&(n=0),f===void 0&&(f=0),SetRight(s,GetRight(t)+n),SetTop(s,GetTop(t)-f),s},AlignInMap=[];AlignInMap[ALIGN_CONST.BOTTOM_CENTER]=BottomCenter;AlignInMap[ALIGN_CONST.BOTTOM_LEFT]=BottomLeft;AlignInMap[ALIGN_CONST.BOTTOM_RIGHT]=BottomRight;AlignInMap[ALIGN_CONST.CENTER]=Center;AlignInMap[ALIGN_CONST.LEFT_CENTER]=LeftCenter;AlignInMap[ALIGN_CONST.RIGHT_CENTER]=RightCenter;AlignInMap[ALIGN_CONST.TOP_CENTER]=TopCenter;AlignInMap[ALIGN_CONST.TOP_LEFT]=TopLeft;AlignInMap[ALIGN_CONST.TOP_RIGHT]=TopRight;var QuickSet=function(s,t,n,f,T){return AlignInMap[n](s,t,f,T)},AlignIn=function(s,t,n,f,T,E){globZone.setPosition(t,n).setSize(f,T),QuickSet(s,globZone,E)};const GetValue$2q=Phaser.Utils.Objects.GetValue,Group$1=Phaser.GameObjects.Group;var DrawBounds=function(s,t){var n=s.scene,f,T,E,h,S;if(typeof t=="number")f=t;else{f=GetValue$2q(t,"color"),T=GetValue$2q(t,"lineWidth");var e=GetValue$2q(t,"name",!1);e&&(E=GetValue$2q(e,"createTextCallback",DefaultCreateTextCallback),h=GetValue$2q(e,"createTextCallbackScope",void 0),S=GetValue$2q(e,"align","left-top"),typeof S=="string"&&(S=AlignConst[S]))}if(f===void 0&&(f=16777215),T===void 0&&(T=1),E&&!s.children){s.children=new Group$1(n),s.once("destroy",function(a,v){a.children.destroy(!v),a.children=void 0});var d=s.clear.bind(s);s.clear=function(){d(),s.children.clear(!1,!0)}}for(var y=this.getAllShownChildren([this]),c,u,l=0,r=y.length;l<r;l++){if(c=y[l],c.getBounds||c.width!==void 0&&c.height!==void 0)GlobRect=GetBounds(c,GlobRect);else continue;f!=null&&s.lineStyle(T,f).strokeRectShape(GlobRect),c.name&&E&&(h?u=E.call(h,n):u=E(n),u&&(u.setText(c.name),s.children.add(u),AlignIn(u,GlobRect.x,GlobRect.y,GlobRect.width,GlobRect.height,S)))}return this},DefaultCreateTextCallback=function(s,t,n){return s.add.text(0,0,"")},GlobRect=void 0;const GetValue$2p=Phaser.Utils.Objects.GetValue;var GetBoundsConfig=function(s,t){return s===void 0&&(s=0),t===void 0&&(t={}),typeof s=="number"?(t.left=s,t.right=s,t.top=s,t.bottom=s):(t.left=GetValue$2p(s,"left",0),t.right=GetValue$2p(s,"right",0),t.top=GetValue$2p(s,"top",0),t.bottom=GetValue$2p(s,"bottom",0)),t};const ContainerAdd=ContainerLite.prototype.add;var AddChild$1=function(s){return ContainerAdd.call(this,s),this.sizerEventsEnable&&(s.emit("sizer.add",s,this),this.emit("add",s,this)),this};const AddChildMethods$8={addBackground(s,t,n){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(n=t,t=void 0),t===void 0&&(t=0),AddChild$1.call(this,s),this.backgroundChildren.push(s);var f=this.getSizerConfig(s);return f.padding=GetBoundsConfig(t),n!==void 0&&this.addChildrenMap(n,s),this},isBackground(s){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(s)!==-1}};var GetParent=function(s,t){var n=null;if(t===void 0)s.hasOwnProperty("rexContainer")&&(n=s.rexContainer.parent,n?n.isRexSizer||(n=GetParent(n)):n=null);else for(n=GetParent(s);n&&n.name!==t;)n=GetParent(n);return n},GetTopmostParent=function(s){for(var t=GetParent(s);t;)s=t,t=GetParent(t);return s};const GetParentSizerMethods={getParentSizer(s,t){return typeof s=="string"&&(t=s,s=void 0),s===void 0&&(s=this),GetParent(s,t)},getTopmostSizer(s){return s===void 0&&(s=this),GetTopmostParent(s)},hasParentSizer(s,t){t===void 0&&(t=this);for(var n=GetParent(t);n;){if(n===s)return!0;n=GetParent(n)}return!1},hasChild(s,t){return t===void 0&&(t=this),this.hasParentSizer(t,s)}},RemoveItem$4=Phaser.Utils.Array.Remove,ContainerRemove=ContainerLite.prototype.remove,GetParentSizer$1=GetParentSizerMethods.getParentSizer;var RemoveChild=function(s,t){for(var n=GetParentSizer$1(s);n;)n.removeChildCallback&&n.removeChildCallback(s,t),n=GetParentSizer$1(n);return this.isBackground(s)&&RemoveItem$4(this.backgroundChildren,s),ContainerRemove.call(this,s,t),!t&&this.sizerEventsEnable&&(s.emit("sizer.remove",s,this),this.emit("remove",s,this)),this};const RemoveItem$3=Phaser.Utils.Array.Remove,GetParentSizer=GetParentSizerMethods.getParentSizer,RemoveChildMethods$7={removeFromParentSizer(){var s=GetParentSizer(gameObject);return s&&s.remove(this),this},removeBackground(s,t){return this.backgroundChildren===void 0?this:this.getParentSizer(s)!==this?this:(RemoveItem$3(this.backgroundChildren,s),RemoveChild.call(this,s,t),this)},removeAllBackgrounds(s){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],s);return this}};var AddChildrenMap=function(s,t){if(typeof s=="string")this.childrenMap[s]=t;else{var n=s;for(s in n)this.childrenMap[s]=n[s]}return this},RemoveChildrenMap=function(s){if(typeof s=="object"){var t=s;for(var s in this.childrenMap)if(this.childrenMap[s]===t)return delete this.childrenMap[s],this}return delete this.childrenMap[s],this},GetElement=function(s,t){if(typeof s=="string"&&(s=s.split(".")),s.length!==0){var n=s.shift(),f=null;if(n.charAt(0)==="#")n=n.substring(1),f=this.getByName(n,t);else if(n.indexOf("[")===-1)this.childrenMap&&(f=this.childrenMap[n]);else{var T=n.match(RE_OBJ);if(T!=null&&this.childrenMap){var E=this.childrenMap[T[1]];E&&(f=E[T[2]])}}return s.length===0?f:f&&f.childrenMap?f.getElement(s):null}};const RE_OBJ=/(\S+)\[(\d+)\]/i;var GetChildIndex=function(s){if(Array.isArray(this.sizerChildren)){var t=this.sizerChildren.indexOf(s);return t===-1&&(t=null),t}else{if(this.getParentSizer(s)!==this)return null;for(var n in this.sizerChildren)if(this.sizerChildre[n]===s)return n;return null}};const PaddingMethods={getInnerPadding(s){return GetPadding$1(this.space,s)},setInnerPadding(s,t){return SetPadding$1(this.space,s,t),this},getOuterPadding(s){return GetPadding$1(this.getSizerConfig(this).padding,s)},setOuterPadding(s,t){return SetPadding$1(this.getSizerConfig(this).padding,s,t),this},getChildOuterPadding(s,t){return typeof s=="string"&&(s=this.getElement(s)),GetPadding$1(this.getSizerConfig(s).padding,t)},setChildOuterPadding(s,t,n){return typeof s=="string"&&(s=this.getElement(s)),SetPadding$1(this.getSizerConfig(s).padding,t,n),this}};var ResolveWidth$2=function(s){var t=this.childrenWidth,n=this.minWidth!==void 0?this.minWidth:0;return s===void 0?(s=Math.max(n,t),this.layoutWarnEnable&&n>0&&t>n&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${n}) < childrenWidth (${t})`)):this.layoutWarnEnable&&(n>s||t>s)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${n}) or childrenWidth (${t} > targetWidth ${s})`),s},ResolveChildrenWidth$1=function(s){var t,n;for(var f in this.sizerChildren)t=this.sizerChildren[f],t&&t.isRexSizer&&!t.ignoreLayout&&(n=this.getExpandedChildWidth(t,s),n=t.resolveWidth(n),t.resolveChildrenWidth(n))},ResolveHeight$2=function(s){var t=this.childrenHeight,n=this.minHeight!==void 0?this.minHeight:0;return s===void 0?(s=Math.max(n,t),this.layoutWarnEnable&&n>0&&t>n&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${n}) < childrenHeight (${t})`)):this.layoutWarnEnable&&(n>s||t>s)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${n}) or childrenHeight (${t}) > targetHeight (${s})`),s},PostResolveSize$1=function(s,t){},GetChildWidth$1=function(s){var t;return s.isRexSizer?t=Math.max(s.minWidth,s.childrenWidth):s.minWidth!==void 0?t=s.minWidth:t=GetDisplayWidth(s),t},GetChildHeight=function(s){var t;return s.isRexSizer?t=Math.max(s.minHeight,s.childrenHeight):s.minHeight!==void 0?t=s.minHeight:t=GetDisplayHeight(s),t},GetExpandedChildWidth$3=function(s,t){return t},GetExpandedChildHeight$3=function(s,t){return t},GetChildrenWidth$5=function(){return 0},GetChildrenHeight$5=function(){return 0},GetAllChildrenSizers=function(s){s===void 0&&(s=[]);for(var t=s.length,n=this.getChildrenSizers(s),f=s.length,T=t;T<f;T++)n[T].getAllChildrenSizers(s);return s},GetChildrenSizers$5=function(s){return s===void 0&&(s=[]),s};const GetShownChildrenMethods={getShownChildren(s){s===void 0&&(s=[]);for(var t=this.children,n,f=0,T=t.length;f<T;f++)n=t[f],!(n.rexSizer&&n.rexSizer.hidden)&&s.push(n);return s},getAllShownChildren(s){s===void 0&&(s=[]);for(var t=[this];t.length>0;){var n=t.shift();n.rexSizer&&n.rexSizer.hidden||(n!==this&&s.push(n),n.isRexContainerLite&&t.push(...n.children))}return s}};var PreLayout$4=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var s=this.getChildrenSizers(),t,n=0,f=s.length;n<f;n++)t=s[n],!t.ignoreLayout&&t.preLayout()},Layout=function(){var s=this.scaleX,t=this.scaleY,n=s===1&&t===1;return n||this.setScale(1),this.runLayout(),this.postLayout(),this._postLayout(),n||this.setScale(s,t),this},RunLayout=function(s,t,n){if(this.ignoreLayout)return this;var f=!s;return f&&this.preLayout(),t=this.resolveWidth(t),f&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),n=this.resolveHeight(n),this.postResolveSize(t,n),this.resize(t,n),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this},LayoutChildren$6=function(){},_PostLayout=function(s,t,n){return this._anchor&&this._anchor.updatePosition(),this},PostLayout=function(s,t,n){return this},RunWidthWrap$2=function(s){var t,n;for(var f in this.sizerChildren)t=this.sizerChildren[f],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(n=this.getExpandedChildWidth(t,s),t.isRexSizer&&(n=t.resolveWidth(n)),t.runWidthWrap(n));return this};class Anchor extends ComponentBase{constructor(t,n){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(n)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var n,f;t.x!==void 0?(n=null,f=t.x):t.left!==void 0?(n=0,f=t.left):t.right!==void 0?(n=1,f=t.right):t.centerX!==void 0&&(n=.5,f=t.centerX);var T,E;t.y!==void 0?(T=null,E=t.y):t.top!==void 0?(T=0,E=t.top):t.bottom!==void 0?(T=1,E=t.bottom):t.centerY!==void 0&&(T=.5,E=t.centerY);var h,S;f!==void 0&&(f=f.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),h=parseFloat(f[0])/100,S=f[1]===""?0:parseFloat(f[1]));var e,d;E!==void 0&&(E=E.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),e=parseFloat(E[0])/100,d=E[1]===""?0:parseFloat(E[1]));var y=t.width,c,u;y!==void 0&&(y=y.split("%"),c=parseFloat(y[0])/100,u=y[1]===""?0:parseFloat(y[1]));var l=t.height,r,a;l!==void 0&&(l=l.split("%"),r=parseFloat(l[0])/100,a=l[1]===""?0:parseFloat(l[1])),this.setAlign(n,T),this.setPercentage(h,e),this.setOffset(S,d),this.setSizePercentage(c,r),this.setSizePadding(u,a);var v=t.onResizeCallback,o=t.onResizeCallbackScope;v!==void 0&&this.setResizeCallback(v,o);var p=t.onUpdateViewportCallback,m=t.onUpdateViewportCallbackScope;return p!==void 0&&this.setUpdateViewportCallback(p,m),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,n){return this.alignX=t,this.alignY=n,this}setPercentage(t,n){return this.percentageX=t,this.percentageY=n,this}setOffset(t,n){return this.offsetX=t,this.offsetY=n,this}setSizePercentage(t,n){return this.percentageWidth=t,this.percentageHeight=n,this}setSizePadding(t,n){return this.paddingWidth=t,this.paddingHeight=n,this}setResizeCallback(t,n){return this.onResizeCallback=t,this.onResizeCallbackScope=n,this}setUpdateViewportCallback(t,n){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=n,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,n=this.onResizeCallbackScope,f=this.anchorWidth,T=this.anchorHeight;if(!(f===void 0&&T===void 0||!t)){var E=this.parent;f===void 0&&(f=E.width),T===void 0&&(T=E.height),n?t.call(n,f,T,E,this):t(f,T,E,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=GetViewport(this.scene,t,this.viewport);var n=this.viewport,f=this.onUpdateViewportCallback,T=this.onUpdateViewportCallbackScope;f&&(T?f.call(T,n,this.parent,this):f(n,this.parent,this))}}var SetAnchor=function(s){s===void 0&&(s={});var t=s.hasOwnProperty("width"),n=s.hasOwnProperty("height"),f=s.hasOwnProperty("onResizeCallback");return(t||n)&&!f&&(s.onResizeCallback=function(T,E,h){t&&h.setMinWidth(T),n&&h.setMinHeight(E),h.layout()}),this._anchor===void 0?this._anchor=new Anchor(this,s):this._anchor.resetFromJSON(s),this};const GetValue$2o=Phaser.Utils.Objects.GetValue,GetAdvancedValue$3=Phaser.Utils.Objects.GetAdvancedValue,Linear$6=Phaser.Math.Linear;class Scale extends EaseValueTaskBase{constructor(t,n){super(t,n),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(n),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(GetValue$2o(t,"mode",0)),this.setScaleRange(GetAdvancedValue$3(t,"start",void 0),GetAdvancedValue$3(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=MODE$3[t]),this.mode=t,this}setScaleRange(t,n){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=GetAdvancedValue$3(t,"x",this.parent.scaleX),this.startY=GetAdvancedValue$3(t,"y",this.parent.scaleY)),typeof n=="number"?(this.endX=n,this.endY=n):(this.endX=GetAdvancedValue$3(n,"x",void 0),this.endY=GetAdvancedValue$3(n,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var n=this.repeat;return this.mode===2&&n!==-1&&(n=(n+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(n),super.start(),this}updateGameObject(t,n){var f=n.t;n.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasScaleX&&(t.scaleX=Linear$6(this.startX,this.endX,f)),this.hasScaleY&&(t.scaleY=Linear$6(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const MODE$3={stop:0,destroy:1,yoyo:2};var PopUp$1=function(s,t,n,f,T){f===void 0&&(f="Cubic");var E,h;switch(n){case 0:case"x":E={x:0},h={x:s.scaleX};break;case 1:case"y":E={y:0},h={y:s.scaleY};break;default:E=0,h=s.scale;break}var S={mode:0,start:E,end:h,duration:t,ease:f};return T===void 0?T=new Scale(s,S):T.resetFromJSON(S),T.restart(),T},ScaleDownDestroy=function(s,t,n,f,T,E){f===void 0&&(f="Linear"),T instanceof Scale&&(E=T,T=void 0),T===void 0&&(T=!0);var h={};switch(h.mode=T?1:0,n){case 0:case"x":h.end={x:0};break;case 1:case"y":h.end={y:0};break;default:h.end=0;break}return h.duration=t,h.ease=f,E===void 0?E=new Scale(s,h):E.resetFromJSON(h),E.restart(),E},Yoyo=function(s,t,n,f,T,E,h){n===void 0&&(n=1.2),f===void 0&&(f=0),E===void 0&&(E="Cubic");var S,e;switch(T){case 0:case"x":S={x:s.scaleX},e={x:n};break;case 1:case"y":S={y:s.scaleX},e={y:n};break;default:S=s.scaleX,e=n;break}var d={mode:2,start:S,end:e,duration:t/2,ease:E,repeat:f};return h===void 0?h=new Scale(s,d):h.resetFromJSON(d),h.restart(),h};const IsPlainObject$C=Phaser.Utils.Objects.IsPlainObject;var OnInitScale=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var n=GetParentSizerMethods.getParentSizer(s);n&&n.resetChildPositionState(s)})};const ScaleMethods={popUp(s,t,n){if(IsPlainObject$C(s)){var f=s;s=f.duration,t=f.orientation,n=f.ease}var T=this._scaleBehavior===void 0;return this._scaleBehavior=PopUp$1(this,s,t,n,this._scaleBehavior),T&&OnInitScale(this,this._scaleBehavior),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(s,t,n){return this.popUp(s,t,n),WaitComplete(this._scaleBehavior)},scaleDownDestroy(s,t,n,f){if(IsPlainObject$C(s)){var T=s;s=T.duration,t=T.orientation,n=T.ease,f=T.destroy}var E=this._scaleBehavior===void 0;return this._scaleBehavior=ScaleDownDestroy(this,s,t,n,f,this._scaleBehavior),E&&OnInitScale(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(s,t,n,f){return this.scaleDownDestroy(s,t,n,f),WaitComplete(this._scaleBehavior)},scaleDown(s,t,n){return this.scaleDownDestroy(s,t,n,!1),this},scaleDownPromise(s,t,n){return this.scaleDown(s,t,n),WaitComplete(this._scaleBehavior)},scaleYoyo(s,t,n,f,T){if(IsPlainObject$C(s)){var E=s;s=E.duration,t=E.peakValue,n=E.repeat,f=E.orientation,T=E.ease}var h=this._scaleBehavior===void 0;return this._scaleBehavior=Yoyo(this,s,t,n,f,T,this._scaleBehavior),h&&OnInitScale(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(s,t,n,f,T){return this.scaleYoyo(s,t,n,f,T),WaitComplete(this._scaleBehavior)}},GetValue$2n=Phaser.Utils.Objects.GetValue,GetAdvancedValue$2=Phaser.Utils.Objects.GetAdvancedValue,Linear$5=Phaser.Math.Linear;let Fade$2=class extends EaseValueTaskBase{constructor(t,n){super(t,n),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(GetValue$2n(t,"mode",0)),this.setAlphaRange(GetAdvancedValue$2(t,"start",this.parent.alpha),GetAdvancedValue$2(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=MODE$2[t]),this.mode=t,this}setAlphaRange(t,n){return this.alphaStart=t,this.alphaEnd=n,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,n){var f=n.t;n.isOddIteration&&(f=1-f),t.alpha=Linear$5(this.alphaStart,this.alphaEnd,f)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}};const MODE$2={stop:0,destroy:1,yoyo:2},IsPlainObject$B=Phaser.Utils.Objects.IsPlainObject;var FadeIn=function(s,t,n,f){var T,E;IsPlainObject$B(n)?(T=n.start,E=n.end):E=n,T===void 0&&(T=0),E===void 0&&(E=1);var h={mode:0,start:T,end:E,duration:t};return f===void 0?f=new Fade$2(s,h):f.resetFromJSON(h),f.restart(),f},FadeOutDestroy=function(s,t,n,f){n instanceof Fade$2&&(f=n,n=void 0),n===void 0&&(n=!0);var T={mode:n?1:0,end:0,duration:t};return f===void 0?f=new Fade$2(s,T):f.resetFromJSON(T),f.restart(),f};const IsPlainObject$A=Phaser.Utils.Objects.IsPlainObject;var OnInitFade=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var n=GetParentSizerMethods.getParentSizer(s);n&&n.resetChildAlphaState(s)})};const FadeMethods={fadeIn(s,t){if(IsPlainObject$A(s)){var n=s;s=n.duration,t=n.alpha}var f=this._fade===void 0;return this._fade=FadeIn(this,s,t,this._fade),f&&OnInitFade(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(s,t){return this.fadeIn(s,t),WaitComplete(this._fade)},fadeOutDestroy(s,t){if(IsPlainObject$A(s)){var n=s;s=n.duration,t=n.destroy}var f=this._fade===void 0;return this._fade=FadeOutDestroy(this,s,t,this._fade),f&&OnInitFade(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(s,t){return this.fadeOutDestroy(s,t),WaitComplete(this._fade)},fadeOut(s){return this.fadeOutDestroy(s,!1),this},fadeOutPromise(s){return this.fadeOut(s),WaitComplete(this._fade)}},GetValue$2m=Phaser.Utils.Objects.GetValue,GetAdvancedValue$1=Phaser.Utils.Objects.GetAdvancedValue,Linear$4=Phaser.Math.Linear;class EaseMove extends EaseValueTaskBase{constructor(t,n){super(t,n),this.resetFromJSON(n),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(GetValue$2m(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var n=GetAdvancedValue$1(t,"x",void 0),f=GetAdvancedValue$1(t,"y",void 0);this.setTargetPosition(n,f)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=MODE$1[t]),this.mode=t,this}setTargetPosition(t,n){if(typeof t=="number"||typeof n=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=n;else{var f=t;this.startX=GetAdvancedValue$1(f,"startX",void 0),this.startY=GetAdvancedValue$1(f,"startY",void 0),this.endX=GetAdvancedValue$1(f,"endX",void 0),this.endY=GetAdvancedValue$1(f,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,n){var f=n.t;n.isOddIteration&&(f=1-f),f=this.easeFn(f),this.hasMoveX&&(t.x=Linear$4(this.startX,this.endX,f)),this.hasMoveY&&(t.y=Linear$4(this.startY,this.endY,f))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const MODE$1={stop:0,destroy:1,yoyo:2};var ParseValue=function(s,t){if(typeof s=="number")return s;var n=s[0],f=parseFloat(s.substr(2));switch(n){case"+":return t+f;case"-":return t-f;case"*":return t*f;case"/":return t/f}},EaseMoveTo=function(s,t,n,f,T,E,h){E instanceof EaseMove&&(h=E,E=void 0),E===void 0&&(E=!1);var S={};return S.mode=E?1:0,n!==void 0&&(S.startX=s.x,S.endX=ParseValue(n,s.x)),f!==void 0&&(S.startY=s.y,S.endY=ParseValue(f,s.y)),S.duration=t,S.ease=T===void 0?"Linear":T,h===void 0?h=new EaseMove(s,S):h.resetFromJSON(S),h.restart(),h},EaseMoveFrom=function(s,t,n,f,T,E,h){E instanceof EaseMove&&(h=E,E=void 0),E===void 0&&(E=!1);var S={};return S.mode=E?1:0,n!==void 0&&(S.startX=ParseValue(n,s.x),S.endX=s.x),f!==void 0&&(S.startY=ParseValue(f,s.y),S.endY=s.y),S.duration=t,S.ease=T===void 0?"Linear":T,h===void 0?h=new EaseMove(s,S):h.resetFromJSON(S),h.restart(),h};const IsPlainObject$z=Phaser.Utils.Objects.IsPlainObject,DistanceBetween$5=Phaser.Math.Distance.Between;var OnInitEaseMove=function(s,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(s.emit(t.completeEventName,s),t.completeEventName=void 0)}),t.on("update",function(){var n=GetParentSizerMethods.getParentSizer(s);n&&n.resetChildPositionState(s)})};const EaseMoveMethods={moveFrom(s,t,n,f,T){if(IsPlainObject$z(s)){var E=s;t=E.x,n=E.y,E.hasOwnProperty("speed")?s=DistanceBetween$5(t,n,this.x,this.y)*1e3/E.speed:s=E.duration,f=E.ease}var h=this._easeMove===void 0;return this._easeMove=EaseMoveFrom(this,s,t,n,f,T,this._easeMove),h&&OnInitEaseMove(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(s,t,n,f,T){return this.moveFrom(s,t,n,f,T),WaitComplete(this._easeMove)},moveFromDestroy(s,t,n,f){return this.moveFrom(s,t,n,f,!0),this},moveFromDestroyPromise(s,t,n,f){return this.moveFromDestroy(s,t,n,f),WaitComplete(this._easeMove)},moveTo(s,t,n,f,T){if(IsPlainObject$z(s)){var E=s;t=E.x,n=E.y,E.hasOwnProperty("speed")?s=DistanceBetween$5(t,n,this.x,this.y)*1e3/E.speed:s=E.duration,f=E.ease}var h=this._easeMove===void 0;return this._easeMove=EaseMoveTo(this,s,t,n,f,T,this._easeMove),h&&OnInitEaseMove(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(s,t,n,f,T){return this.moveTo(s,t,n,f,T),WaitComplete(this._easeMove)},moveToDestroy(s,t,n,f){return this.moveTo(s,t,n,f,!0),this},moveToDestroyPromise(s,t,n,f){return this.moveToDestroy(s,t,n,f,!0),WaitComplete(this._easeMove)},moveStop(s){return this._easeMove?(this._easeMove.stop(s),this):this}},GetValue$2l=Phaser.Utils.Objects.GetValue;class ShakePosition extends TickTask{constructor(t,n){super(t,n),this.timer=new Timer$1,this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(GetValue$2l(t,"timer")),this.setEnable(GetValue$2l(t,"enable",!0)),this.setMode(GetValue$2l(t,"mode",1)),this.isRunning=GetValue$2l(t,"isRunning",!1),this.setMagnitudeMode(GetValue$2l(t,"magnitudeMode",1)),this.setAxisMode(GetValue$2l(t,"axis",0)),this.setDuration(GetValue$2l(t,"duration",500)),this.setMagnitude(GetValue$2l(t,"magnitude",10)),this.ox=GetValue$2l(t,"ox",void 0),this.oy=GetValue$2l(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=MODE[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=MANITUDEMODE[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=DIRECTIONNODE[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,n){if(typeof t!="number"){var f=t;n=GetValue$2l(f,"magnitude",void 0),t=GetValue$2l(f,"duration",void 0)}return n!==void 0&&this.setMagnitude(n),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,n){return this.start(t,n),this}update(t,n){if(!this.isRunning||!this.enable)return this;var f=this.parent;if(!f.active)return this;if(this.timer.update(t,n),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=f.x,this.oy=f.y);var T=this.magnitude;this.magnitudeMode===1&&(T*=1-this.timer.t);var E=Math.random()*Math.PI*2,h=this.ox+Math.cos(E)*T,S=this.oy+Math.sin(E)*T;switch(this.axisMode){case 1:f.x=h;break;case 2:f.y=S;break;default:f.x=h,f.y=S;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}}const MODE={effect:0,behavior:1},DIRECTIONNODE={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},MANITUDEMODE={constant:0,decay:1},IsPlainObject$y=Phaser.Utils.Objects.IsPlainObject;var OnInitShake=function(s,t){t.on("complete",function(){s.emit("shake.complete",s)})};const ShakeMethods={shake(s,t,n){if(IsPlainObject$y(s)){var f=s;s=f.duration,t=f.magnitude,n=f.magnitudeMode}return this._shake===void 0&&(this._shake=new ShakePosition(this,{mode:0,magnitudeMode:1}),OnInitShake(this,this._shake)),s!==void 0&&this._shake.setDuration(s),t!==void 0&&this._shake.setMagnitude(t),n!==void 0&&this._shake.setMagnitudeMode(n),this._shake.shake(),this},shakePromise(s,t){return this.shake(s,t),WaitComplete(this._shake)}},IsPlainObject$x=Phaser.Utils.Objects.IsPlainObject;class EaseData extends ComponentBase{constructor(t,n){super(t,n),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var n=this.easeTasks[t];return n===void 0&&(n=new EaseValueTask(this.parent),this.easeTasks[t]=n,n.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),n}easeTo(t,n,f,T){if(IsPlainObject$x(t)){var E=t;t=E.key,n=E.value,f=E.duration,T=E.ease;var h=E.speed;f===void 0&&h!==void 0&&(f=Math.abs(n-this.parent.data.values[t])/h*1e3)}f===void 0&&(f=1e3),T===void 0&&(T="Linear");var S=this.getEaseTask(t);return S.restart({key:t,to:n,duration:f,ease:T}),this}easeFrom(t,n,f,T){if(IsPlainObject$x(t)){var E=t;t=E.key,n=E.value,f=E.duration,T=E.ease;var h=E.speed;f===void 0&&h!==void 0&&(f=Math.abs(n-this.parent.data.values[t])/h*1e3)}f===void 0&&(f=1e3),T===void 0&&(T="Linear");var S=this.getEaseTask(t);return S.restart({key:t,from:n,duration:f,ease:T}),this}stopEase(t,n){n===void 0&&(n=!0);var f=this.easeTasks[t];return f&&f.stop(n),this}stopAll(t){t===void 0&&(t=!0);for(var n in this.easeTasks)this.stopEase(n,t);return this}}var OnInitEaseData=function(s,t){t.on("complete",function(n){s.emit(`easedata.${n}.complete`,s),s.emit("easedata.complete",n,s)})};const EaseDataMethods={easeDataTo(s,t,n,f){return this._easeData||(this._easeData=new EaseData(this),OnInitEaseData(this,this._easeData)),this._easeData.easeTo(s,t,n,f),this},easeDataToPromise(s,t,n,f){return this.easeDataTo(s,t,n,f),WaitEvent(this._easeData,`complete-${s}`)},stopEaseData(s,t){return this._easeData?(this._easeData.stopEase(s,t),this):this},stopAllEaseData(s){return this._easeData?(this._easeData.stopAll(s),this):this}};var Show=function(s){_hide(s,!1)},Hide=function(s){_hide(s,!0)},IsShown=function(s){if(!s)return!1;var t=GetSizerConfig$1(s);return!t.hidden},_hide=function(s,t){if(s){var n=GetSizerConfig$1(s);n.hidden=t;var f=GetParent$1(s);f?f.setChildVisible(s,!t):s.setVisible(!t)}};const HideMethods={show(s){return s===void 0&&(s=this),Show(s),this},hide(s){return s===void 0&&(s=this),Hide(s),this},isShow(s){return s===void 0&&(s=this),IsShown(s)}};var eventemitter3={exports:{}};(function(s){var t=Object.prototype.hasOwnProperty,n="~";function f(){}Object.create&&(f.prototype=Object.create(null),new f().__proto__||(n=!1));function T(e,d,y){this.fn=e,this.context=d,this.once=y||!1}function E(e,d,y,c,u){if(typeof y!="function")throw new TypeError("The listener must be a function");var l=new T(y,c||e,u),r=n?n+d:d;return e._events[r]?e._events[r].fn?e._events[r]=[e._events[r],l]:e._events[r].push(l):(e._events[r]=l,e._eventsCount++),e}function h(e,d){--e._eventsCount===0?e._events=new f:delete e._events[d]}function S(){this._events=new f,this._eventsCount=0}S.prototype.eventNames=function(){var d=[],y,c;if(this._eventsCount===0)return d;for(c in y=this._events)t.call(y,c)&&d.push(n?c.slice(1):c);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(y)):d},S.prototype.listeners=function(d){var y=n?n+d:d,c=this._events[y];if(!c)return[];if(c.fn)return[c.fn];for(var u=0,l=c.length,r=new Array(l);u<l;u++)r[u]=c[u].fn;return r},S.prototype.listenerCount=function(d){var y=n?n+d:d,c=this._events[y];return c?c.fn?1:c.length:0},S.prototype.emit=function(d,y,c,u,l,r){var a=n?n+d:d;if(!this._events[a])return!1;var v=this._events[a],o=arguments.length,p,m;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),o){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,y),!0;case 3:return v.fn.call(v.context,y,c),!0;case 4:return v.fn.call(v.context,y,c,u),!0;case 5:return v.fn.call(v.context,y,c,u,l),!0;case 6:return v.fn.call(v.context,y,c,u,l,r),!0}for(m=1,p=new Array(o-1);m<o;m++)p[m-1]=arguments[m];v.fn.apply(v.context,p)}else{var g=v.length,x;for(m=0;m<g;m++)switch(v[m].once&&this.removeListener(d,v[m].fn,void 0,!0),o){case 1:v[m].fn.call(v[m].context);break;case 2:v[m].fn.call(v[m].context,y);break;case 3:v[m].fn.call(v[m].context,y,c);break;case 4:v[m].fn.call(v[m].context,y,c,u);break;default:if(!p)for(x=1,p=new Array(o-1);x<o;x++)p[x-1]=arguments[x];v[m].fn.apply(v[m].context,p)}}return!0},S.prototype.on=function(d,y,c){return E(this,d,y,c,!1)},S.prototype.once=function(d,y,c){return E(this,d,y,c,!0)},S.prototype.removeListener=function(d,y,c,u){var l=n?n+d:d;if(!this._events[l])return this;if(!y)return h(this,l),this;var r=this._events[l];if(r.fn)r.fn===y&&(!u||r.once)&&(!c||r.context===c)&&h(this,l);else{for(var a=0,v=[],o=r.length;a<o;a++)(r[a].fn!==y||u&&!r[a].once||c&&r[a].context!==c)&&v.push(r[a]);v.length?this._events[l]=v.length===1?v[0]:v:h(this,l)}return this},S.prototype.removeAllListeners=function(d){var y;return d?(y=n?n+d:d,this._events[y]&&h(this,y)):(this._events=new f,this._eventsCount=0),this},S.prototype.off=S.prototype.removeListener,S.prototype.addListener=S.prototype.on,S.prefixed=n,S.EventEmitter=S,s.exports=S})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EE=getDefaultExportFromCjs(eventemitter3Exports);class EventEmitter extends EE{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}const EventEmitterMethods={setEventEmitter(s,t){return t===void 0&&(t=EventEmitter),this._privateEE=s===!0||s===void 0,this._eventEmitter=this._privateEE?new t:s,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(s){return this._eventEmitter&&s&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},StateProperties$1=["next","exit","enter"];let FSM$1=class{constructor(t){var n=GetValue$3q(t,"states",void 0);n&&this.addStates(n);var f=GetValue$3q(t,"extend",void 0);if(f)for(var T in f)(!this.hasOwnProperty(T)||this[T]===void 0)&&(this[T]=f[T]);var E=GetValue$3q(t,"eventEmitter",void 0),h=GetValue$3q(t,"EventEmitterClass",void 0);this.setEventEmitter(E,h),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(GetValue$3q(t,"enable",!0)),this.start(GetValue$3q(t,"start",void 0));var n=GetValue$3q(t,"init",void 0);return n&&n.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var n="exit_"+this._prevState,f=this[n];f&&f.call(this),this.emit(n,this)}if(this._stateLock=!1,this._state!=null){var T="enter_"+this._state,E=this[T];E&&E.call(this),this.emit(T,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,n=this["next_"+this.state];return n&&(typeof n=="string"?t=n:t=n.call(this)),this.goto(t),this}get stateProperties(){return StateProperties$1}addState(t,n){typeof t!="string"&&(n=t,t=n.name);for(var f=this.stateProperties,T=0,E=f.length;T<E;T++){var h=f[T],S=n[h];S&&(this[`${h}_${t}`]=S)}return this}addStates(t){if(Array.isArray(t))for(var n=0,f=t.length;n<f;n++)this.addState(t[n]);else for(var T in t)this.addState(T,t[T]);return this}runMethod(t,n,f,T,E,h){var S=this[t+"_"+this.state];if(S){var e=arguments.length;switch(e){case 1:return S.call(this);case 2:return S.call(this,n);case 3:return S.call(this,n,f);case 4:return S.call(this,n,f,T);case 5:return S.call(this,n,f,T,E);case 6:return S.call(this,n,f,T,E,h)}for(var d=new Array(e-1),y=1;y<e;y++)d[y-1]=arguments[y];return S.apply(this,d)}}};Object.assign(FSM$1.prototype,EventEmitterMethods);var HasListener=function(s,t,n,f,T){T===void 0&&(T=!1);var E=s._events[t];if(!E)return!1;for(var h=0,S=E.length;h<S;h++){var e=E[h];if(e.fn===n&&e.context===f&&e.once===T)return!0}return!1};const StateProperties=["next","exit","enter","update","preupdate","postupdate"];class FSM extends FSM$1{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=GetValue$3q(t,"scene",void 0),this}get stateProperties(){return StateProperties}update(t,n){this.runMethod("update",t,n)}preupdate(t,n){this.runMethod("preupdate",t,n)}postupdate(t,n){this.runMethod("postupdate",t,n)}startUpdate(t){t||(t=this._scene);var n=t.sys.events;return HasListener(n,"update",this.update,this)?this:(this._scene=t,n.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var n=t.sys.events;return HasListener(n,"preupdate",this.preupdate,this)?this:(this._scene=t,n.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var n=t.sys.events;return HasListener(n,"postupdate",this.postupdate,this)?this:(this._scene=t,n.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}let State$1=class extends FSM{constructor(t,n){super(n),this.parent=t;var f=n.initState||"IDLE";this.start(f)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var n=t.runTransitionInCallback();t.delayCall(n,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var n=t.runTransitionOutCallback();t.delayCall(n,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}};var PostStepDelayCall=function(s,t,n,f,T){var E=GetSceneObject(s),h=E.time.delayedCall(t,function(){E.game.events.once("poststep",function(){n.call(f,T)})});return h};const DelayCallMethods$1={delayCall(s,t,n){return this.delayCallTimer=PostStepDelayCall(this,s,t,n),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},ConfigurationMethods$1={setTransitInTime(s){return this.transitInTime=s,this},setTransitOutTime(s){return this.transitOutTime=s,this},setTransitInCallback(s){return s||(s=NOOP),this.transitInCallback=s,this},setTransitOutCallback(s){return s||(s=NOOP),this.transitOutCallback=s,this}},OpenMethods$1={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(s,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?s:this.parent;var n=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=n,this}},CloseMethods={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(s,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?s:this.parent;var n=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=n,this}};var methods$s={};Object.assign(methods$s,DelayCallMethods$1,ConfigurationMethods$1,OpenMethods$1,CloseMethods);const GetValue$2k=Phaser.Utils.Objects.GetValue;class OpenCloseTransition extends ComponentBase{constructor(t,n){super(t,n),this.setTransitInTime(GetValue$2k(n,"duration.in",200)),this.setTransitOutTime(GetValue$2k(n,"duration.out",200)),this.setTransitInCallback(GetValue$2k(n,"transitIn")),this.setTransitOutCallback(GetValue$2k(n,"transitOut")),this.oneShotMode=GetValue$2k(n,"destroy",!1),this.delayCallTimer=void 0,this._state=new State$1(this,{eventEmitter:!1,initState:GetValue$2k(n,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(OpenCloseTransition.prototype,methods$s);const Rectangle=Phaser.GameObjects.Rectangle;class FullWindowRectangle extends Rectangle{constructor(t,n,f){super(t,0,0,2,2,n,1),this.setAlpha(f),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.sys.events.on("prerender",this.resize,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,n=t.sys.scale.gameSize,f=t.sys.cameras.main,T=n.width,E=n.height,h=1/f.zoom,S=T/2,e=E/2,d=T*h,y=E*h;(this.x!==S||this.y!==e)&&this.setPosition(S,e),(this.width!==d||this.height!==y)&&this.setSize(d,y).setOrigin(.5)}}const GetValue$2j=Phaser.Utils.Objects.GetValue;class TouchEventStop extends ComponentBase{constructor(t,n){super(t,{eventEmitter:!1}),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.setHitAreaMode(GetValue$2j(t,"hitAreaMode",0)),this.setEnable(GetValue$2j(t,"enable",!0)),this.setStopMode(GetValue$2j(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,n,f,T){this.stopAllLevels&&T.stopPropagation()},this).on("pointerup",function(t,n,f,T){this.stopAllLevels&&T.stopPropagation()},this).on("pointermove",function(t,n,f,T){this.stopAllLevels&&T.stopPropagation()},this).on("pointerover",function(t,n,f,T){this.stopAllLevels&&T.stopPropagation()},this).on("pointerout",function(t,n){this.stopAllLevels&&n.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=HitAreaMode[t]);var n=this.parent;return n.input&&n.removeInteractive(),t===0?n.setInteractive():n.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var HitAreaMode={default:0,fullWindow:1};const GetValue$2i=Phaser.Utils.Objects.GetValue;class Cover extends FullWindowRectangle{constructor(t,n){var f=GetValue$2i(n,"color",0),T=GetValue$2i(n,"alpha",.8);super(t,f,T),this.touchEventStop=new TouchEventStop(this,{hitAreaMode:1})}}var CreateCover=function(s,t){var n=s.scene,f=new Cover(n,t);return n.add.existing(f),s.isRexContainerLite?(s.pin(f,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1}),s.moveDepthBelow(f)):n.children.moveBelow(f,s),f};const DefaultTransitCallbacks$1={popUp(s,t){s._modalScaleSave!==void 0?(s.scaleX=s._modalScaleSave,s.scaleY=s._modalScaleSave):s._modalScaleSave=s.scaleX,PopUp$1(s,t)},scaleDown(s,t){ScaleDownDestroy(s,t,void 0,void 0,!1)},fadeIn(s,t){s._modalAlphaSave!==void 0?s.alpha=s._modalAlphaSave:s._modalAlphaSave=s.alpha,FadeIn(s,t)},fadeOut(s,t){FadeOutDestroy(s,t,!1)}};var DefaultCoverTransitInCallback=function(s,t){s._modalAlphaSave!==void 0?s.alpha=s._modalAlphaSave:s._modalAlphaSave=s.alpha,FadeIn(s,t,s.alpha)},DefaultCoverTransitOutCallback=function(s,t){FadeOutDestroy(s,t,!1)},IsPointInBounds=function(s,t,n,f,T){if(!s||f&&!f(s,t,n))return!1;var E=GetBounds(s,!0);return!(!E.contains(t,n)||T&&!T(s,t,n))};const GetValue$2h=Phaser.Utils.Objects.GetValue;let Modal$2=class extends OpenCloseTransition{constructor(t,n){n===void 0&&(n={}),n.transitIn==null&&(n.transitIn=TransitionMode$1.popUp),n.transitOut==null&&(n.transitOut=TransitionMode$1.scaleDown),n.destroy=GetValue$2h(n,"destroy",!0),super(t,n);var f=GetValue$2h(n,"cover");this.cover=f!==!1?CreateCover(t,f):void 0,this.cover&&(this.setCoverTransitInCallback(GetValue$2h(f,"transitIn",DefaultCoverTransitInCallback)),this.setCoverTransitOutCallback(GetValue$2h(f,"transitOut",DefaultCoverTransitOutCallback)));var T=GetValue$2h(n,"touchOutsideClose",!1),E=GetValue$2h(n,"duration.hold",-1),h=GetValue$2h(n,"timeOutClose",E>=0),S=GetValue$2h(n,"anyTouchClose",!1),e=GetValue$2h(n,"manualClose",!1);e&&(T=!1,S=!1,h=!1),S&&(T=!1),h?this.setDisplayTime(E):this.setDisplayTime(-1),S?this.once("open",this.anyTouchClose,this):T&&this.once("open",this.touchOutsideClose,this),GetValue$2h(n,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&IsPointInBounds(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),n=this.cover;return n&&this.coverTransitInCallback&&this.coverTransitInCallback(n,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),n=this.cover;return n&&this.coverTransitOutCallback&&this.coverTransitOutCallback(n,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=TransitionMode$1[t]),t){case TransitionMode$1.popUp:t=DefaultTransitCallbacks$1.popUp;break;case TransitionMode$1.fadeIn:t=DefaultTransitCallbacks$1.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=TransitionMode$1[t]),t){case TransitionMode$1.scaleDown:t=DefaultTransitCallbacks$1.scaleDown;break;case TransitionMode$1.fadeOut:t=DefaultTransitCallbacks$1.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}};const TransitionMode$1={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var Modal$1=function(s,t){var n=new Modal$2(s,t);return n.on("open",function(){s.emit("modal.open",n)}),n.on("close",function(f){s.emit("modal.close",f,n)}),s.on("modal.requestClose",n.requestClose,n),n},ModalPromise=function(s,t){var n=Modal$1(s,t);return new Promise(function(f,T){n.once("close",function(E){f(E)})})},ModalClose=function(s,t){s.emit("modal.requestClose",t)},IsFunction=function(s){return s&&typeof s=="function"};const ModalMethods$1={modal(s,t){return IsFunction(s)&&(t=s,s=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,s),this._modalBehavior=Modal$1(this,s)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(s){var t=this;return new Promise(function(n,f){t.modal(s,n)})},modalClose(s){return ModalClose(this,s),this}};var IsPointerInBounds=function(s,t,n,f){if(t)return IsPointInBounds(s,t.worldX,t.worldY,n,f);for(var T=s.scene.input.manager,E=T.pointersTotal,h=T.pointers,S=0;S<E;S++)if(t=h[S],IsPointInBounds(s,t.worldX,t.worldY,n,f))return!0;return!1},IsInTouching=function(s,t){return(IsGameObject(s)||typeof s=="string")&&(t=s,s=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),IsPointerInBounds(t,s)},IsArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},ContainsPoint=function(s,t,n,f,T){return IsPointInBounds(s,t,n,GetPreTestCallback(f),GetPostTestCallback(T))},IsNotHiddenSizer=function(s){var t=s.rexSizer&&s.rexSizer.hidden;return!t},GetPreTestCallback=function(s){return s?function(t,n,f){return IsNotHiddenSizer(t)?(s(t,n,f),!0):!1}:IsNotHiddenSizer},GetPostTestCallback=function(s){return s},PointToChild$1=function(s,t,n,f,T){if(IsFunction(n)||(T=n,n=void 0,f=void 0),T===void 0&&(this.sizerChildren?T=this.sizerChildren:T=this.children),IsArray(T)){for(var E,h=0,S=T.length;h<S;h++)if(E=T[h],ContainsPoint(E,s,t,n,f))return E}else{var E;for(var e in T)if(E=T[e],ContainsPoint(E,s,t,n,f))return E}return null},ResizeGameObject=function(s,t,n){!s||t===void 0&&n===void 0||(HasResizeMethod(s)?(t===void 0&&(t=s.width),n===void 0&&(n=s.height),s.resize?s.resize(t,n):s.setSize(t,n)):(t!==void 0&&(s.displayWidth=t),n!==void 0&&(s.displayHeight=n)))},ExcludeClassList=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],HasResizeMethod=function(s){if(s.resize)return!0;if(!s.setSize)return!1;for(var t=0,n=ExcludeClassList.length;t<n;t++){var f=ExcludeClassList[t];if(f&&s instanceof f)return!1}return!0},CopyState=function(s,t){return t===void 0?t={}:t===!0&&(t=GlobState),t.x=s.x,t.y=s.y,t.scaleX=s.scaleX,t.scaleY=s.scaleY,t.width=s.width,t.height=s.height,t.displayWidth=s.displayWidth,t.displayHeight=s.displayHeight,t},GlobState={},PreLayoutChild=function(s){this.sizerEventsEnable&&(CopyState(s,this.getChildPrevState(s)),this.layoutedChildren.push(s))},LayoutChild=function(s,t,n,f,T,E,h,S){AlignIn(s,t,n,f,T,E),h!==void 0&&(s.x+=h),S!==void 0&&(s.y+=S),this.resetChildPositionState(s),this.sizerEventsEnable&&s.emit("sizer.postlayout",s,this)};const ALIGN_CENTER$4=Phaser.Display.Align.CENTER;var LayoutBackgrounds=function(){if(this.backgroundChildren!==void 0)for(var s=this.backgroundChildren,t=this.left,n=this.top,f=this.width,T=this.height,E,h,S,e,d,y,c,u=0,l=s.length;u<l;u++)E=s[u],h=E.rexSizer,!h.hidden&&(S=h.padding,PreLayoutChild.call(this,E),e=t+S.left,d=n+S.top,y=f-S.left-S.right,c=T-S.top-S.bottom,ResizeGameObject(E,y,c),LayoutChild.call(this,E,e,d,y,c,ALIGN_CENTER$4))};const IsPlainObject$w=Phaser.Utils.Objects.IsPlainObject;var SetDraggable=function(s,t,n){if(IsPlainObject$w(s)){var f=s;s=f.sensor,n=f.target,t=f.draggable}else typeof t!="boolean"&&(n=t,t=void 0);var T=typeof s;if(T==="string"){var E=s;if(s=this.getElement(E),!s)return console.error(`Can get element '${E}'`),this}else(s===void 0||T!="object")&&(t=s,s=this);return t===void 0&&(t=!0),s.input&&s.input._rexUIDragSizer?s.input.draggable=t:t&&(s.setInteractive(),s.scene.input.setDraggable(s),s.on("drag",function(h,S,e){var d=n===void 0?this.getTopmostSizer():n;d.x+=S-s.x,d.y+=e-s.y,d.emit("sizer.drag",h,S,e)},this).on("dragstart",function(h,S,e){var d=n===void 0?this.getTopmostSizer():n;d.emit("sizer.dragstart",h,S,e)},this).on("dragend",function(h,S,e,d){var y=n===void 0?this.getTopmostSizer():n;y.emit("sizer.dragend",h,S,e,d)},this).on("drop",function(h,S){var e=n===void 0?this.getTopmostSizer():n;e.emit("sizer.drop",h,S)}),s.input._rexUIDragSizer=!0),this};const ClickMethods={onClick(s,t,n,f){return s?(typeof s=="function"&&(f=n,n=t,t=s,s=this),s._click===void 0&&(s._click=new Button(s,f)),s._click.on("click",t,n),this):this},offClick(s,t,n){return typeof s=="function"&&(n=t,t=s,s=this),s._click===void 0?this:(s._click.off("click",t,n),this)},enableClick(s,t){return s&&typeof s!="object"&&(t=s,s=this),s._click===void 0?this:(s._click.setEnable(t),this)},disableClick(s){return s&&typeof s!="object"&&(s=this),s._click===void 0?this:(s._click.setEnable(!1),this)}},GetValue$2g=Phaser.Utils.Objects.GetValue;class ClickOutside extends ComponentBase{constructor(t,n){super(t,n),this._enable=void 0;var f=GetValue$2g(n,"inputConfig",void 0);f&&t.setInteractive(f),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(GetValue$2g(t,"enable",!0)),this.setMode(GetValue$2g(t,"mode",1)),this.setClickInterval(GetValue$2g(t,"clickInterval",100)),this.setDragThreshold(GetValue$2g(t,"threshold",void 0)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this),t.input.on("pointermove",this.onMove,this)}shutdown(t){if(!this.isShutdown){var n=this.parent.scene;n.input.off("pointerdown",this.onPress,this),n.input.off("pointerup",this.onRelease,this),n.input.off("pointermove",this.onMove,this),this.pointer=null,super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var n=t?"enable":"disable";this.emit(n,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=CLICKMODE[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}isPointerInside(t){var n=this.parent,f=n.input?IsPointerInHitArea:IsPointerInBounds;return f(n,t)}onPress(t){this.parent.willRender(t.camera)&&this.pointer===void 0&&(this.pointer=t,this.mode===0&&(this.isPointerInside(t)||this.click(t.downTime,t)))}onRelease(t){this.parent.willRender(t.camera)&&this.pointer===t&&(this.mode===1&&(this.isPointerInside(t)||this.click(t.upTime,t)),this.pointer=void 0)}onMove(t,n,f,T){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&(t.getDistance()>=this.dragThreshold||this.isPointerInside(t))&&this.cancel()}click(t,n){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,n),this;this.pointer=void 0;var f=this.lastClickTime;return f!==void 0&&t-f<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,n),this)}cancel(){return this.pointer=void 0,this}}const CLICKMODE={press:0,pointerdown:0,release:1,pointerup:1},ClickOutsideMethods={onClickOutside(s,t,n,f){return s?(typeof s=="function"&&(f=n,n=t,t=s,s=this),s._clickOutside===void 0&&(s._clickOutside=new ClickOutside(s,f)),s._clickOutside.on("clickoutside",t,n),this):this},offClickOutside(s,t,n){return typeof s=="function"&&(n=t,t=s,s=this),s._clickOutside===void 0?this:(s._clickOutside.off("clickoutside",t,n),this)},enableClickOutside(s,t){return s&&typeof s!="object"&&(t=s,s=this),s._clickOutside===void 0?this:(s._clickOutside.setEnable(t),this)},disableClickOutside(s){return s&&typeof s!="object"&&(s=this),s._clickOutside===void 0?this:(s._clickOutside.setEnable(!1),this)}};class Cooldown extends FSM{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,n){this.remainderTime-=n,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>n?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const GetValue$2f=Phaser.Utils.Objects.GetValue;class InTouching extends ComponentBase{constructor(t,n){super(t,n),this._enable=void 0,this.cooldown=new Cooldown,this.parent.setInteractive(GetValue$2f(n,"inputConfig",void 0)),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(GetValue$2f(t,"enable",!0)),this.setCooldown(GetValue$2f(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,n,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,n){this.cooldown.update(t,n),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}const TouchingMethods={isPointerInBounds(s){return s===void 0?s=this:typeof s=="string"&&(s=this.getElement(s)),s?IsPointerInBounds(s):!1},onTouching(s,t,n,f){return s?(typeof s=="function"&&(f=n,n=t,t=s,s=this),s._inTouching===void 0&&(s._inTouching=new InTouching(s,f)),s._inTouching.on("intouch",t,n),this):this},offTouching(s,t,n){return typeof s=="function"&&(n=t,t=s,s=this),s._inTouching===void 0?this:(s._inTouching.off("intouch",t,n),this)},onTouchingEnd(s,t,n,f){return s?(typeof s=="function"&&(f=n,n=t,t=s,s=this),s._inTouching===void 0&&(s._inTouching=new InTouching(s,f)),s._inTouching.on("touchend",t,n),this):this},offTouchingEnd(s,t,n){return typeof s=="function"&&(n=t,t=s,s=this),s._inTouching===void 0?this:(s._inTouching.off("touchend",t,n),this)},enableTouching(s,t){return s&&typeof s!="object"&&(t=s,s=this),s._inTouching===void 0?this:(s._inTouching.setEnable(t),this)},disableTouching(s){return s&&typeof s!="object"&&(s=this),s._inTouching===void 0?this:(s._inTouching.setEnable(!1),this)}};var PointToChild=function(s,t,n){for(var f,T=0,E=s.length;T<E;T++)if(f=s[T],!!ContainsPoint(f,t,n))return f.pointToChild(t,n);return null},EmitChildEvent=function(s,t,n,f,T,E,h){var S;T===void 0?S=f:S=PointToChild(n,f,T),S&&s.emit(t,S,E,h)};const GetValue$2e=Phaser.Utils.Objects.GetValue;var DownChild=function(s){var t=GetValue$2e(s,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",OnDown,this))},OnDown=function(s,t,n,f){var T=this._childrenInteractive;EmitChildEvent(T.eventEmitter,`${T.eventNamePrefix}down`,T.targetSizers,s.worldX,s.worldY,s,f)};const GetValue$2d=Phaser.Utils.Objects.GetValue;var UpChild=function(s){var t=GetValue$2d(s,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",OnUp,this))},OnUp=function(s,t,n,f){var T=this._childrenInteractive;EmitChildEvent(T.eventEmitter,`${T.eventNamePrefix}up`,T.targetSizers,s.worldX,s.worldY,s,f)};const GetValue$2c=Phaser.Utils.Objects.GetValue;var OverChild=function(s){var t=GetValue$2c(s,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",OnMove$1,this).on("pointerover",OnMove$1,this).on("pointerout",OnOut$1,this))},OnMove$1=function(s,t,n,f){var T=this._childrenInteractive,E=PointToChild(T.targetSizers,s.worldX,s.worldY),h=T.lastOverChild;E&&h&&E===h||(T.lastOverChild=E,EmitChildEvent(T.eventEmitter,`${T.eventNamePrefix}out`,T.targetSizers,h,void 0,s,f),EmitChildEvent(T.eventEmitter,`${T.eventNamePrefix}over`,T.targetSizers,E,void 0,s,f))},OnOut$1=function(s,t){var n=this._childrenInteractive,f=n.lastOverChild;n.lastOverChild=null,EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}out`,n.targetSizers,f,void 0,s,t)};const GetValue$2b=Phaser.Utils.Objects.GetValue;var ClickChild=function(s){var t=GetValue$2b(s,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var n=this._childrenInteractive;this._click=new Button(this,t),this._click.on("click",function(f,T,E,h){EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}click`,n.targetSizers,E.worldX,E.worldY,E,h)},this)}};const GetValue$2a=Phaser.Utils.Objects.GetValue;class OnePointerTracer extends TickTask{constructor(t,n){var f=GetSceneObject(t);f===t&&(t=void 0),super(f,n),this.gameObject=t,t&&t.setInteractive(GetValue$2a(n,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.setEnable(GetValue$2a(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(GetValue$2a(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=TOUCH0$2,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,n){if(this.enable&&this.pointer===void 0){var f=this.bounds?this.bounds.contains(t.x,t.y):!0;f&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=TOUCH1$2,this.gameObject===void 0&&(this.isTouchingAnyObject=n.length>0),this.onDragStart())}}onPointerUp(t){if(this.enable){var n=this.bounds?this.bounds.contains(t.x,t.y):!0;n&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=TOUCH0$2,this.onDragEnd())}}onPointerMove(t){if(this.enable&&t.isDown){var n=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointer===t;!f&&n||(f&&!n?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===TOUCH1$2&&this.onDragEnd(),this.pointer=void 0,this.tracerState=TOUCH0$2,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,n){}postUpdate(t,n){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=IDLE$7,this}}const TOUCH0$2=0,TOUCH1$2=1,IDLE$7="IDLE",GetValue$29=Phaser.Utils.Objects.GetValue,DistanceBetween$4=Phaser.Math.Distance.Between;class Tap extends OnePointerTracer{constructor(t,n){super(t,n);var f=this,T={states:{IDLE:{enter:function(){f.stop(),f.tapsCount=0,f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var E=f.lastPointer;f.x=E.x,f.y=E.y,f.worldX=E.worldX,f.worldY=E.worldY}},BEGIN:{enter:function(){f.start(),f.tapsCount=0,f.emit("tappingstart",f,f.gameObject,f.lastPointer)}},RECOGNIZED:{enter:function(){f.start(),f.emit("tap",f,f.gameObject,f.lastPointer),f.emit(`${f.tapsCount}tap`,f,f.gameObject,f.lastPointer)}}},init:function(){this.state=IDLE$6},eventEmitter:!1};this.setRecongizedStateObject(new FSM(T))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(GetValue$29(t,"time",250)),this.setTapInterval(GetValue$29(t,"tapInterval",200)),this.setDragThreshold(GetValue$29(t,"threshold",9)),this.setTapOffset(GetValue$29(t,"tapOffset",10));var n=GetValue$29(t,"taps",void 0);return n!==void 0?this.setTaps(n):(this.setMaxTaps(GetValue$29(t,"maxTaps",void 0)),this.setMinTaps(GetValue$29(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case IDLE$6:this.state=BEGIN$5;break;case BEGIN$5:var t=this.lastPointer,n=DistanceBetween$4(t.upX,t.upY,t.x,t.y);n>this.tapOffset&&(this.state=RECOGNIZED$5,this.state=BEGIN$5);break;case RECOGNIZED$5:this.state=BEGIN$5;break}}onDragEnd(){this.state===BEGIN$5&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=RECOGNIZED$5))}onDrag(){this.state!==IDLE$6&&this.pointer.getDistance()>this.dragThreshold&&(this.state=IDLE$6)}preUpdate(t,n){if(!(!this.isRunning||!this.enable)&&this.state===BEGIN$5){var f=this.lastPointer;if(f.isDown){var T=t-f.downTime;T>this.holdTime&&(this.state=IDLE$6)}else{var E=t-f.upTime;E>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=RECOGNIZED$5:this.state=IDLE$6)}}}postUpdate(t,n){!this.isRunning||!this.enable||this.state===RECOGNIZED$5&&(this.state=IDLE$6)}get isTapped(){return this.state===RECOGNIZED$5}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,n){return n===void 0&&(n=t),this.setMinTaps(t).setMaxTaps(n),this}}const IDLE$6="IDLE",BEGIN$5="BEGIN",RECOGNIZED$5="RECOGNIZED",GetValue$28=Phaser.Utils.Objects.GetValue;class Press extends OnePointerTracer{constructor(t,n){super(t,n);var f=this,T={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var E=f.lastPointer;f.x=E.x,f.y=E.y,f.worldX=E.worldX,f.worldY=E.worldY}},BEGIN:{enter:function(){f.start()},exit:function(){f.stop()}},RECOGNIZED:{enter:function(){f.emit("pressstart",f,f.gameObject,f.lastPointer)},exit:function(){f.emit("pressend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=IDLE$5},eventEmitter:!1};this.setRecongizedStateObject(new FSM(T))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(GetValue$28(t,"threshold",9)),this.setHoldTime(GetValue$28(t,"time",251)),this}onDragStart(){this.state=BEGIN$4,this.holdTime===0&&(this.state=RECOGNIZED$4)}onDragEnd(){this.state=IDLE$5}onDrag(){this.state!==IDLE$5&&this.pointer.getDistance()>this.dragThreshold&&(this.state=IDLE$5)}preUpdate(t,n){if(!(!this.isRunning||!this.enable)&&this.state===BEGIN$4){var f=t-this.pointer.downTime;f>=this.holdTime&&(this.state=RECOGNIZED$4)}}get isPressed(){return this.state===RECOGNIZED$4}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const IDLE$5="IDLE",BEGIN$4="BEGIN",RECOGNIZED$4="RECOGNIZED",GetValue$27=Phaser.Utils.Objects.GetValue;class Pan extends OnePointerTracer{constructor(t,n){super(t,n);var f=this,T={states:{IDLE:{},BEGIN:{enter:function(){var E=f.pointer;f.startX=E.x,f.startY=E.y,f.startWorldX=E.worldX,f.startWorldY=E.worldY}},RECOGNIZED:{enter:function(){f.emit("panstart",f,f.gameObject,f.lastPointer)},exit:function(){var E=f.lastPointer;f.endX=E.x,f.endY=E.y,f.endWorldX=E.worldX,f.endWorldY=E.worldY,f.emit("panend",f,f.gameObject,f.lastPointer)}}},init:function(){this.state=IDLE$4},eventEmitter:!1};this.setRecongizedStateObject(new FSM(T))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(GetValue$27(t,"threshold",10)),this}onDragStart(){this.state=BEGIN$3,this.dragThreshold===0&&(this.state=RECOGNIZED$3)}onDragEnd(){this.state=IDLE$4}onDrag(){switch(this.state){case BEGIN$3:this.pointer.getDistance()>=this.dragThreshold&&(this.state=RECOGNIZED$3);break;case RECOGNIZED$3:var t=this.pointer.position,n=this.pointer.prevPosition;this.dx=t.x-n.x,this.dy=t.y-n.y;var f=this.pointer;this.x=f.x,this.y=f.y,this.worldX=f.worldX,this.worldY=f.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===RECOGNIZED$3}setDragThreshold(t){return this.dragThreshold=t,this}}const IDLE$4="IDLE",BEGIN$3="BEGIN",RECOGNIZED$3="RECOGNIZED",DistanceBetween$3=Phaser.Math.Distance.Between,AngleBetween$1=Phaser.Math.Angle.Between,VelocityMethods={getDt:function(){var s=GetTickDelta(this.scene);return s},getVelocity:function(){var s=this.pointer.position,t=this.pointer.prevPosition,n=DistanceBetween$3(t.x,t.y,s.x,s.y),f=n/(this.getDt()*.001);return f},getVelocityX:function(){var s=this.pointer.position,t=this.pointer.prevPosition,n=Math.abs(s.x-t.x),f=n/(this.getDt()*.001);return f},getVelocityY:function(){var s=this.pointer.position,t=this.pointer.prevPosition,n=Math.abs(s.y-t.y),f=n/(this.getDt()*.001);return f},getVelocityAngle:function(){var s=this.pointer.position,t=this.pointer.prevPosition,n=AngleBetween$1(t.x,t.y,s.x,s.y);return n}},DIRMODE$1={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var AngleToDirections=function(s,t,n){switch(n===void 0?n={}:n===!0&&(n=globOut$1),n.left=!1,n.right=!1,n.up=!1,n.down=!1,s=(s+360)%360,t){case 0:s<180?n.down=!0:n.up=!0;break;case 1:s>90&&s<=270?n.left=!0:n.right=!0;break;case 2:s>45&&s<=135?n.down=!0:s>135&&s<=225?n.left=!0:s>225&&s<=315?n.up=!0:n.right=!0;break;case 3:s>22.5&&s<=67.5?(n.down=!0,n.right=!0):s>67.5&&s<=112.5?n.down=!0:s>112.5&&s<=157.5?(n.down=!0,n.left=!0):s>157.5&&s<=202.5?n.left=!0:s>202.5&&s<=247.5?(n.left=!0,n.up=!0):s>247.5&&s<=292.5?n.up=!0:(s>292.5&&s<=337.5&&(n.up=!0),n.right=!0);break}return n},globOut$1={};const GetValue$26=Phaser.Utils.Objects.GetValue,RadToDeg$4=Phaser.Math.RadToDeg;class Swipe extends OnePointerTracer{constructor(t,n){super(t,n);var f=this,T={states:{IDLE:{enter:function(){f.x=0,f.y=0,f.worldX=0,f.worldY=0},exit:function(){var E=f.lastPointer;f.x=E.x,f.y=E.y,f.worldX=E.worldX,f.worldY=E.worldY}},BEGIN:{enter:function(){f.validDrag=!1}},RECOGNIZED:{enter:function(){f.start(),f.updateDirectionStates(),f.emit("swipe",f,f.gameObject,f.lastPointer)},exit:function(){f.stop(),f.clearDirectionStates()}}},init:function(){this.state=IDLE$3},eventEmitter:!1};this.setRecongizedStateObject(new FSM(T)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(GetValue$26(t,"threshold",10)),this.setVelocityThreshold(GetValue$26(t,"velocityThreshold",1e3)),this.setDirectionMode(GetValue$26(t,"dir","8dir")),this}onDragStart(){this.state=BEGIN$2}onDragEnd(){this.state=IDLE$3}onDrag(){this.state===BEGIN$2&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=RECOGNIZED$2))}postUpdate(t,n){!this.isRunning||!this.enable||this.state===RECOGNIZED$2&&(this.state=IDLE$3)}get isSwiped(){return this.state===RECOGNIZED$2}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=DIRMODE$1[t]),this.dirMode=t,this}updateDirectionStates(){var t=RadToDeg$4(this.getVelocityAngle());return AngleToDirections(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Swipe.prototype,VelocityMethods);const IDLE$3="IDLE",BEGIN$2="BEGIN",RECOGNIZED$2="RECOGNIZED",GetValue$25=Phaser.Utils.Objects.GetValue,SpliceOne$2=Phaser.Utils.Array.SpliceOne,DistanceBetween$2=Phaser.Math.Distance.Between,AngleBetween=Phaser.Math.Angle.Between;class TwoPointersTracer{constructor(t,n){var f=GetSceneObject(t);f===t&&(t=void 0);var T=f.input.manager.pointersTotal-1;T<2&&f.input.addPointer(2-T),this.scene=f,this.gameObject=t,t&&t.setInteractive(GetValue$25(n,"inputConfig",void 0)),this.setEventEmitter(GetValue$25(n,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.setEnable(GetValue$25(t,"enable",!0)),this.bounds=GetValue$25(t,"bounds",void 0),this.tracerState=TOUCH0$1,this.pointers.length=0,Clear(this.movedState),this}boot(){this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,Clear(this.movedState),this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0,this.gameObject=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&this.pointers.length!==2){var n=this.bounds?this.bounds.contains(t.x,t.y):!0;if(n){var f=this.pointers.indexOf(t);if(f===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case TOUCH0$1:this.tracerState=TOUCH1$1,this.onDrag1Start();break;case TOUCH1$1:this.tracerState=TOUCH2,this.onDrag2Start();break}}}}onPointerUp(t){if(this.enable){var n=this.bounds?this.bounds.contains(t.x,t.y):!0;if(n){var f=this.pointers.indexOf(t);if(f!==-1)switch(delete this.movedState[t.id],SpliceOne$2(this.pointers,f),this.tracerState){case TOUCH1$1:this.tracerState=TOUCH0$1,this.onDrag1End();break;case TOUCH2:this.tracerState=TOUCH1$1,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(this.enable&&t.isDown){var n=this.bounds?this.bounds.contains(t.x,t.y):!0,f=this.pointers.indexOf(t)!==-1;if(!(!f&&n)){if(f&&!n)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case TOUCH1$1:this.onDrag1();break;case TOUCH2:this.onDrag2();break}}}}dragCancel(){return this.tracerState===TOUCH2&&this.onDrag2End(),this.pointers.length=0,Clear(this.movedState),this.tracerState=TOUCH0$1,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==TOUCH2)return 0;var t=this.pointers[0],n=this.pointers[1];return DistanceBetween$2(t.x,t.y,n.x,n.y)}get angleBetween(){if(this.tracerState!==TOUCH2)return 0;var t=this.pointers[0],n=this.pointers[1];return AngleBetween(t.x,t.y,n.x,n.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var n=t.position,f=t.prevPosition;tmpDragVector.x=n.x-f.x,tmpDragVector.y=n.y-f.y}else tmpDragVector.x=0,tmpDragVector.y=0;return tmpDragVector}get centerX(){if(this.tracerState!==TOUCH2)return 0;var t=this.pointers[0].position,n=this.pointers[1].position;return(t.x+n.x)/2}get centerY(){if(this.tracerState!==TOUCH2)return 0;var t=this.pointers[0].position,n=this.pointers[1].position;return(t.y+n.y)/2}get prevCenterX(){if(this.tracerState!==TOUCH2)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,n=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+n.x)/2}get prevCenterY(){if(this.tracerState!==TOUCH2)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,n=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+n.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=IDLE$2,this}}Object.assign(TwoPointersTracer.prototype,EventEmitterMethods$1);var tmpDragVector={};const TOUCH0$1=0,TOUCH1$1=1,TOUCH2=2,IDLE$2="IDLE",GetValue$24=Phaser.Utils.Objects.GetValue;class Pinch extends TwoPointersTracer{constructor(t,n){super(t,n);var f=this,T={states:{IDLE:{enter:function(){f.prevDistance=void 0,f.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("pinchstart",f)},exit:function(){f.emit("pinchend",f)}}},init:function(){this.state=IDLE$1},eventEmitter:!1};this.setRecongizedStateObject(new FSM(T))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(GetValue$24(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=BEGIN$1,this.dragThreshold===0&&(this.state=RECOGNIZED$1)}onDrag2End(){this.state=IDLE$1}onDrag2(){switch(this.state){case BEGIN$1:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=RECOGNIZED$1}break;case RECOGNIZED$1:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===RECOGNIZED$1}setDragThreshold(t){return this.dragThreshold=t,this}}const IDLE$1="IDLE",BEGIN$1="BEGIN",RECOGNIZED$1="RECOGNIZED",RotateAround$3=Phaser.Math.RotateAround;var RotateObjectAround=function(s,t,n,f){return RotateAround$3(s,t,n,f),s.rotation+=f,s},ScreenXYToWorldXY=function(s,t,n,f){return f===void 0?f={}:f===!0&&(f=globalOut),n.getWorldPoint(s,t,f),f},globalOut={},SpinObject=function(s,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var n=this.movementCenterX,f=this.movementCenterY,T=ScreenXYToWorldXY(this.centerX,this.centerY,t,!0),E=T.x,h=T.y,S=this.rotation;if(Array.isArray(s))for(var e=s,d=0,y=e.length;d<y;d++)s=e[d],s.x+=n,s.y+=f,RotateObjectAround(s,E,h,S);else s.x+=n,s.y+=f,RotateObjectAround(s,E,h,S);return this};const GetValue$23=Phaser.Utils.Objects.GetValue,WrapDegrees=Phaser.Math.Angle.WrapDegrees,ShortestBetween=Phaser.Math.Angle.ShortestBetween,RadToDeg$3=Phaser.Math.RadToDeg,DegToRad$4=Phaser.Math.DegToRad;class Rotate extends TwoPointersTracer{constructor(t,n){super(t,n);var f=this,T={states:{IDLE:{enter:function(){f.prevAngle=void 0,f.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){f.emit("rotatestart",f)},exit:function(){f.emit("rotateend",f)}}},init:function(){this.state=IDLE},eventEmitter:!1};this.setRecongizedStateObject(new FSM(T))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(GetValue$23(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=WrapDegrees(RadToDeg$3(this.angleBetween)),this.state=BEGIN,this.dragThreshold===0&&(this.state=RECOGNIZED)}onDrag2End(){this.state=IDLE}onDrag2(){switch(this.state){case BEGIN:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=WrapDegrees(RadToDeg$3(this.angleBetween));this.angle=ShortestBetween(this.prevAngle,t),this.prevAngle=t,this.state=RECOGNIZED}break;case RECOGNIZED:var t=WrapDegrees(RadToDeg$3(this.angleBetween));this.angle=ShortestBetween(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===RECOGNIZED}get rotation(){return DegToRad$4(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var methods$r={spinObject:SpinObject};Object.assign(Rotate.prototype,methods$r);const IDLE="IDLE",BEGIN="BEGIN",RECOGNIZED="RECOGNIZED",GetValue$22=Phaser.Utils.Objects.GetValue;var TapChild=function(s){var t=GetValue$22(s,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var n=this._childrenInteractive;this._tap=new Tap(this,t),this._tap.on("tap",function(f,T,E){EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}${f.tapsCount}tap`,n.targetSizers,f.worldX,f.worldY,E)},this)}};const GetValue$21=Phaser.Utils.Objects.GetValue;var PressChild=function(s){var t=GetValue$21(s,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var n=this._childrenInteractive;this._press=new Press(this,t),this._press.on("pressstart",function(f,T,E){EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}pressstart`,n.targetSizers,f.worldX,f.worldY,E)},this).on("pressend",function(f,T,E){EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}pressend`,n.targetSizers,f.worldX,f.worldY,E)},this)}};const GetValue$20=Phaser.Utils.Objects.GetValue;var SwipeChild=function(s){var t=GetValue$20(s,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var n=this._childrenInteractive;this._swipe=new Swipe(this,t),this._swipe.on("swipe",function(f,T,E){var h=f.left?"left":f.right?"right":f.up?"up":"down";EmitChildEvent(n.eventEmitter,`${n.eventNamePrefix}swipe${h}`,n.targetSizers,f.worldX,f.worldY,E)},this)}};const GetValue$1$=Phaser.Utils.Objects.GetValue;var SetChildrenInteractive=function(s,t){return s.setInteractive(),GetValue$1$(t,"dropZone",!1)&&(s.input.dropZone=!0),s._childrenInteractive={targetSizers:GetValue$1$(t,"targets",[s]),eventEmitter:GetValue$1$(t,"eventEmitter",s),eventNamePrefix:GetValue$1$(t,"inputEventPrefix","child.")},DownChild.call(s,t),UpChild.call(s,t),OverChild.call(s,t),ClickChild.call(s,t),TapChild.call(s,t),PressChild.call(s,t),SwipeChild.call(s,t),s},SetChildrenInteractiveWrap=function(s){return SetChildrenInteractive(this,s),this},BroadcastEvent=function(){for(var s=this.getAllChildren([this]),t=0,n=s.length;t<n;t++){var f=s[t];f.emit.apply(f,arguments)}return this},methods$q={getSizerConfig:GetSizerConfig,getChildPrevState:GetChildPrevState,pushIntoBounds:PushIntoBounds,drawBounds:DrawBounds,resolveWidth:ResolveWidth$2,resolveChildrenWidth:ResolveChildrenWidth$1,resolveHeight:ResolveHeight$2,postResolveSize:PostResolveSize$1,getChildWidth:GetChildWidth$1,getChildHeight:GetChildHeight,getExpandedChildWidth:GetExpandedChildWidth$3,getExpandedChildHeight:GetExpandedChildHeight$3,getChildrenWidth:GetChildrenWidth$5,getChildrenHeight:GetChildrenHeight$5,addChildrenMap:AddChildrenMap,addElement:AddChildrenMap,removeChildrenMap:RemoveChildrenMap,getElement:GetElement,getChildIndex:GetChildIndex,getAllChildrenSizers:GetAllChildrenSizers,getChildrenSizers:GetChildrenSizers$5,preLayout:PreLayout$4,layout:Layout,runLayout:RunLayout,layoutChildren:LayoutChildren$6,runWidthWrap:RunWidthWrap$2,layoutBackgrounds:LayoutBackgrounds,postLayout:PostLayout,_postLayout:_PostLayout,setAnchor:SetAnchor,isInTouching:IsInTouching,pointToChild:PointToChild$1,setDraggable:SetDraggable,setChildrenInteractive:SetChildrenInteractiveWrap,broadcastEvent:BroadcastEvent};Object.assign(methods$q,PaddingMethods,AddChildMethods$8,RemoveChildMethods$7,GetParentSizerMethods,ScaleMethods,FadeMethods,EaseMoveMethods,ShakeMethods,EaseDataMethods,ClickMethods,ClickOutsideMethods,TouchingMethods,HideMethods,ModalMethods$1,GetShownChildrenMethods);const GetValue$1_=Phaser.Utils.Objects.GetValue;class Base extends ContainerLite{constructor(t,n,f,T,E,h){super(t,n,f,1,1),this.isRexSizer=!0,this.setMinSize(T,E),this.setName(GetValue$1_(h,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0,this.enableLayoutWarn();var S=GetValue$1_(h,"anchor",void 0);S&&this.setAnchor(S),this.setInnerPadding(GetValue$1_(h,"space",0));var e=GetValue$1_(h,"draggable",!1);e&&this.setDraggable(e),this.setSizerEventsEnable(GetValue$1_(h,"sizerEvents",!1)),this.setDirty(!0),GetValue$1_(h,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var n=this.getAllChildrenSizers([this]),f=0,T=n.length;f<T;f++)n[f].sizerEventsEnable=!1;super.destroy(t),Clear(this.backgroundChildren),Clear(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,n){return this.setMinWidth(t).setMinHeight(n),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}enableLayoutWarn(t){return t===void 0&&(t=!0),this.layoutWarnEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-GetDisplayWidth(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+GetDisplayWidth(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+GetDisplayWidth(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-GetDisplayHeight(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+GetDisplayHeight(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+GetDisplayHeight(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left*this.scaleX}get innerRight(){return this.right-this.space.right*this.scaleX}get innerTop(){return this.top+this.space.top*this.scaleY}get innerBottom(){return this.bottom-this.space.bottom*this.scaleY}get innerWidth(){return(this.width-this.space.left-this.space.right)*this.scaleX}get innerHeight(){return(this.height-this.space.top-this.space.bottom)*this.scaleY}get minInnerWidth(){var t=(this.minWidth-this.space.left-this.space.right)*this.scaleX;return Math.max(t,0)}get minInnerHeight(){var t=(this.minHeight-this.space.top-this.space.bottom)*this.scaleY;return Math.max(t,0)}}Object.assign(Base.prototype,methods$q);var GetChildrenWidth$4=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,n,f,T;for(var E in t)n=t[E],f=n.rexSizer.padding,T=this.getChildWidth(n)+f.left+f.right,s=Math.max(T,s);return s+this.space.left+this.space.right},GetChildrenHeight$4=function(){if(this.rexSizer.hidden)return 0;var s=0,t=this.sizerChildren,n,f,T;for(var E in t)n=t[E],T=n.isRexSizer?Math.max(n.minHeight,n.childrenHeight):n.minHeight!==void 0?n.minHeight:GetDisplayHeight(n),f=n.rexSizer.padding,T+=f.top+f.bottom,s=Math.max(T,s);return s+this.space.top+this.space.bottom},GetExpandedChildWidth$2=function(s,t){t===void 0&&(t=this.width);var n,f=s.rexSizer;if(f.expandWidth){var T=t-this.space.left-this.space.right,E=f.padding;n=T-E.left-E.right}return n},GetExpandedChildHeight$2=function(s,t){t===void 0&&(t=this.height);var n,f=s.rexSizer;if(f.expandHeight){var T=t-this.space.top-this.space.bottom,E=f.padding;n=T-E.top-E.bottom}return n},GetChildrenSizers$4=function(s){s===void 0&&(s=[]);var t=this.sizerChildren,n;for(var f in t)n=t[f],n.isRexSizer&&s.push(n);return s},CheckSize=function(s,t){s.width<s.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${s.constructor.name}`),s.height<s.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${s.constructor.name}`)},LayoutChildren$5=function(){var s,t,n,f=this.innerLeft,T=this.innerTop,E=this.innerWidth,h=this.innerHeight,S,e,d,y,c,u,l=this.sizerChildren;for(var r in l)s=l[r],!s.rexSizer.hidden&&(t=s.rexSizer,n=t.padding,PreLayoutChild.call(this,s),s.isRexSizer?(s.runLayout(this,this.getExpandedChildWidth(s),this.getExpandedChildHeight(s)),CheckSize(s,this)):(c=void 0,u=void 0,t.expandWidth&&(c=E-n.left-n.right),t.expandHeight&&(u=h-n.top-n.bottom),ResizeGameObject(s,c,u)),S=f+n.left,d=E-n.left-n.right,e=T+n.top,y=h-n.top-n.bottom,LayoutChild.call(this,s,S,e,d,y,t.align,t.alignOffsetX,t.alignOffsetY))};const IsPlainObject$v=Phaser.Utils.Objects.IsPlainObject,GetValue$1Z=Phaser.Utils.Objects.GetValue,ALIGN_CENTER$3=Phaser.Display.Align.CENTER,UUID$1=Phaser.Utils.String.UUID;var Add$7=function(s,t,n,f,T,E,h,S,e){if(AddChild$1.call(this,s),IsPlainObject$v(t)){var y=t;t=GetValue$1Z(y,"key",void 0),n=GetValue$1Z(y,"align",ALIGN_CENTER$3),S=GetValue$1Z(y,"offsetX",0),e=GetValue$1Z(y,"offsetY",0),f=GetValue$1Z(y,"padding",0),T=GetValue$1Z(y,"expand",!0),s.isRexSizer||(E=GetValue$1Z(y,"minWidth",s._minWidth),h=GetValue$1Z(y,"minHeight",s._minHeighted))}var d=t!==void 0;d||(t=UUID$1()),typeof n=="string"&&(n=AlignConst[n]),n===void 0&&(n=ALIGN_CENTER$3),S===void 0&&(S=0),e===void 0&&(e=0),f===void 0&&(f=0),T===void 0&&(T=!0),s.isRexSizer||(E===void 0&&(E=s._minWidth),h===void 0&&(h=s._minHeight));var y=this.getSizerConfig(s);return y.align=n,y.alignOffsetX=S,y.alignOffsetY=e,y.padding=GetBoundsConfig(f),IsPlainObject$v(T)?(y.expandWidth=GetValue$1Z(T,"width",!1),y.expandHeight=GetValue$1Z(T,"height",!1)):(y.expandWidth=T,y.expandHeight=T),s.isRexSizer||(y.expandWidth&&(s.minWidth=E===void 0?GetDisplayWidth(s):E),y.expandHeight&&(s.minHeight=h===void 0?GetDisplayHeight(s):h)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=s,d&&this.addChildrenMap(t,s),this};const AddChildMethods$7={add:Add$7},ContainerClear=ContainerLite.prototype.clear;var ClearChildren=function(s){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!s&&this.sizerEventsEnable,n;if(t&&(n=this.getChildren([])),ContainerClear.call(this,s),t)for(var f,T=0,E=n.length;T<E;T++)f=n[T],f.emit("sizer.remove",f,this),this.emit("remove",f,this);return this};const RemoveChildMethods$6={remove(s,t){var n;if(typeof s=="string"){if(n=s,s=this.sizerChildren[n],!s)return this}else{if(this.getParentSizer(s)!==this)return this;n=this.childToKey(s)}return n&&(delete this.sizerChildren[n],this.childrenMap.hasOwnProperty(n)&&delete this.childrenMap[n]),RemoveChild.call(this,s,t),this},removeAll(s){for(var t in this.sizerChildren)this.remove(t,s);return this},clear(s){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return ClearChildren.call(this,s),this}};var methods$p={getChildrenWidth:GetChildrenWidth$4,getChildrenHeight:GetChildrenHeight$4,getExpandedChildWidth:GetExpandedChildWidth$2,getExpandedChildHeight:GetExpandedChildHeight$2,getChildrenSizers:GetChildrenSizers$4,layoutChildren:LayoutChildren$5};Object.assign(methods$p,AddChildMethods$7,RemoveChildMethods$6);var IndexOf=function(s,t){if(Array.isArray(s))return s.indexOf(t);for(var n in s)if(s[n]===t)return n;return null};const IsPlainObject$u=Phaser.Utils.Objects.IsPlainObject,GetValue$1Y=Phaser.Utils.Objects.GetValue;class OverlapSizer extends Base{constructor(t,n,f,T,E,h){IsPlainObject$u(n)?(h=n,n=GetValue$1Y(h,"x",0),f=GetValue$1Y(h,"y",0),T=GetValue$1Y(h,"width",void 0),E=GetValue$1Y(h,"height",void 0)):IsPlainObject$u(T)&&(h=T,T=GetValue$1Y(h,"width",void 0),E=GetValue$1Y(h,"height",void 0)),super(t,n,f,T,E,h),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var n=t;if(this.sizerChildren.hasOwnPropery(n))return n}else return IndexOf(this.sizerChildren,t);return null}}Object.assign(OverlapSizer.prototype,methods$p);var GetDistance=Phaser.Math.Distance.Between,IsLocalPointInKnob=function(s,t,n){var f=s.width/2;return GetDistance(f,f,t,n)<=f};const GetAngle$1=Phaser.Math.Angle.Between,NormalizeAngle=Phaser.Math.Angle.Normalize;var OnTouchPad=function(s,t,n){if(this.enable&&s.isDown){var f=this.sizerChildren.knob;if(IsLocalPointInKnob(f,t,n)){var T=f.width/2,E=f.startAngle,h=GetAngle$1(T,T,t,n),S=f.anticlockwise?E-h:h-E,e=NormalizeAngle(S)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-e)<.1?this.value=e:this.easeValueTo(e)}}},InstallEvents$1=function(){var s=this.sizerChildren.knob;s.on("pointerdown",OnTouchPad,this).on("pointermove",OnTouchPad,this).setInteractive()};const GetAngle=Phaser.Math.Angle.Between,WrapAngle=Phaser.Math.Angle.Wrap;var OnPointerDown=function(s,t,n){if(!(!this.enable||this.panPointer)){var f=this.sizerChildren.knob;IsLocalPointInKnob(f,t,n)&&OnPanStart.call(this,s)}},OnPointerMove=function(s,t,n){if(this.enable&&s.isDown){var f=this.sizerChildren.knob;switch(this.panState){case TOUCH0:IsLocalPointInKnob(f,t,n)&&OnPanStart.call(this,s);break;case TOUCH1:IsLocalPointInKnob(f,t,n)?OnPan.call(this):OnPanEnd.call(this);break}}},OnPointerUp=function(s,t,n){!this.enable||this.panPointer!==s||OnPanEnd.call(this)},OnPanStart=function(s){this.panPointer=s,this.panState=TOUCH1},OnPanEnd=function(){this.panPointer=void 0,this.panState=TOUCH0},OnPan=function(){var s=this.panPointer.prevPosition,t=this.panPointer.position,n=this.sizerChildren.knob,f=GetAngle(n.x,n.y,s.x,s.y),T=GetAngle(n.x,n.y,t.x,t.y),E=n.anticlockwise?f-T:T-f,h=WrapAngle(E)/(Math.PI*2);this.stopEaseValue(),this.value+=h};const TOUCH0=0,TOUCH1=1;var InstallEvents=function(){var s=this.sizerChildren.knob;s.on("pointerdown",OnPointerDown,this).on("pointermove",OnPointerMove,this).on("pointerup",OnPointerUp,this).setInteractive(),this.panPointer=void 0,this.panState=TOUCH0},SetTextFormatCallback=function(s,t){return this.textFormatCallback=s,this.textFormatCallbackScope=t,this},GetFormatText=function(s){s===void 0&&(s=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(s):t=this.textFormatCallback.call(this.textFormatCallbackScope,s),t},UpdateText=function(s){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(GetFormatText.call(this,s)),t.layout&&t.layout()),this};const TextObjectMethods={setTextFormatCallback:SetTextFormatCallback,getFormatText:GetFormatText,updateText:UpdateText},GetValue$1X=Phaser.Utils.Objects.GetValue,SnapTo$1=Phaser.Math.Snap.To;class Knob extends ProgressBase(OverlapSizer){constructor(t,n){n===void 0&&(n={}),super(t,n),this.type="rexKnob",this.bootProgressBase(n);var f=GetValue$1X(n,"background",void 0),T=GetValue$1X(n,"text",void 0);f&&this.addBackground(f),T&&(n.textColor=void 0,n.textStrokeColor=void 0,this.setTextFormatCallback(GetValue$1X(n,"textFormatCallback",void 0),GetValue$1X(n,"textFormatCallbackScope",void 0)));var E=new CircularProgress$1(t,n);E.setDepth(GetValue$1X(n,"knobDepth",0)),E._value=-1,t.add.existing(E),this.add(E,"knob"),T&&(this.add(T,"text","center",0,!1),t.children.moveBelow(E,T)),this.addChildrenMap("background",f),this.addChildrenMap("knob",E),this.addChildrenMap("text",T),this.setEnable(GetValue$1X(n,"enable",void 0)),this.setGap(GetValue$1X(n,"gap",void 0)),this.setValue(GetValue$1X(n,"value",0),GetValue$1X(n,"min",void 0),GetValue$1X(n,"max",void 0));var h=GetValue$1X(n,"input",0);switch(typeof h=="string"&&(h=INPUTMODE$1[h]),h){case 0:InstallEvents.call(this);break;case 1:InstallEvents$1.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=SnapTo$1(t,this.gap));var n=this.value;this.sizerChildren.knob.value=t;var f=this.value;n!==f&&(this.updateText(),this.eventEmitter.emit("valuechange",f,n,this.eventEmitter))}}const INPUTMODE$1={pan:0,drag:0,click:1,none:-1};Object.assign(Knob.prototype,TextObjectMethods);ObjectFactory.register("knob",function(s){var t=new Knob(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Knob",Knob);const ShapeClasses={arc:Arc,circle:Circle,curve:Curve,ellipse:Ellipse,line:Line,lines:Lines,rectangle:Rectangle$2,roundRectangle:RoundRectangle,triangle:Triangle$1},GetValue$1W=Phaser.Utils.Objects.GetValue,IsPlainObject$t=Phaser.Utils.Objects.IsPlainObject,ClearAll=function(){for(var s=this.getShapes(),t=0,n=s.length;t<n;t++)s[t].lineStyle().fillStyle()},ShapesUpdateMethods={createShape(s,t){var n=ShapeClasses[s],f=new n;return t&&f.setName(t),f},buildShapes(s){var t=GetValue$1W(s,"create",void 0);if(IsPlainObject$t(t)){var n=t;for(var f in n){var T=n[f];switch(typeof T){case"number":for(var E=0;E<T;E++)this.addShape(this.createShape(f));break;case"string":this.addShape(this.createShape(f,T));break;default:for(var h=T,E=0,S=h.length;E<S;E++)this.addShape(this.createShape(f,h[E]));break}}}else if(Array.isArray(t))for(var n=t,E=0,S=n.length;E<S;E++){var e=n[E];this.addShape(this.createShape(e.type,e.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(GetValue$1W(s,"update"))},setUpdateShapesCallback(s){return s===void 0&&(s=ClearAll),this.dirty=this.dirty||this.updateCallback!==s,this.updateCallback=s,this},updateShapes(){this.updateCallback.call(this)}},TransformMatrix=Phaser.GameObjects.Components.TransformMatrix,TransformXY=Phaser.Math.TransformXY;var WorldXYToGameObjectLocalXY=function(s,t,n,f,T){f===void 0&&(f=s.scene.cameras.main),T===void 0?T={}:T===!0&&(T=globOut);var E=f.scrollX,h=f.scrollY,S=t+E*s.scrollFactorX-E,e=n+h*s.scrollFactorY-h;return s.parentContainer?(tempMatrix$1===void 0&&(tempMatrix$1=new TransformMatrix,parentMatrix=new TransformMatrix),s.getWorldTransformMatrix(tempMatrix$1,parentMatrix),tempMatrix$1.applyInverse(S,e,T)):TransformXY(S,e,s.x,s.y,s.rotation,s.scaleX,s.scaleY,T),T.x+=s.displayOriginX,T.y+=s.displayOriginY,T},tempMatrix$1,parentMatrix,globOut={};const GetValue$1V=Phaser.Utils.Objects.GetValue,IsPlainObject$s=Phaser.Utils.Objects.IsPlainObject;class CustomShapes extends BaseShapes{constructor(t,n,f,T,E,h){IsPlainObject$s(n)&&(h=n,n=GetValue$1V(h,"x",0),f=GetValue$1V(h,"y",0),T=GetValue$1V(h,"width",2),E=GetValue$1V(h,"height",2)),super(t,n,f,T,E),this.type=GetValue$1V(h,"type","rexCustomShapes"),this.buildShapes(h)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,n,f,T){return typeof f=="boolean"&&(T=f,f=void 0),WorldXYToGameObjectLocalXY(this,t,n,f,T)}}Object.assign(CustomShapes.prototype,ShapesUpdateMethods);ObjectFactory.register("customShapes",function(s,t,n,f,T){var E=new CustomShapes(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.CustomShapes",CustomShapes);const GetValue$1U=Phaser.Utils.Objects.GetValue,IsPlainObject$r=Phaser.Utils.Objects.IsPlainObject;class CustomProgress extends ProgressBase(CustomShapes){constructor(t,n,f,T,E,h){IsPlainObject$r(n)&&(h=n,n=GetValue$1U(h,"x",0),f=GetValue$1U(h,"y",0),T=GetValue$1U(h,"width",2),E=GetValue$1U(h,"height",2)),h===void 0&&(h={}),h.type||(h.type="rexCustomProgress"),super(t,n,f,T,E,h),this.bootProgressBase(h),this.setValue(GetValue$1U(h,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}ObjectFactory.register("customProgress",function(s,t,n,f,T){var E=new CustomProgress(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.CustomProgress",CustomProgress);const SetTransitionCallbackMethods={setTransitionStartCallback(s,t){return this.onStartCallback=s,this.onStartCallbackScope=t,this},setTransitionProgressCallback(s,t){return this.onProgressCallback=s,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(s,t){return this.onCompleteCallback=s,this.onCompleteCallbackScope=t,this}},IsPlainObject$q=Phaser.Utils.Objects.IsPlainObject,GetValue$1T=Phaser.Utils.Objects.GetValue,GetRandomItem=Phaser.Utils.Array.GetRandom;var DirMode={out:0,in:1},GetValueFromConfigs=function(s,t,...n){for(var f=0,T=n.length;f<T;f++){var E=n[f];if(E&&E.hasOwnProperty(s))return E[s]}return t};const TransitionMethods={setTransitionDirection(s){return typeof s=="string"&&(s=DirMode[s]),this.dir=s,this},setDuration(s){return this.duration=s,this},setEaseFunction(s){return this.easeFunction=s,this},setNextTexture(s,t){return this.nextImage.setTexture(s,t),this},transit(s,t,n){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),n!==void 0&&(s={key:s,frame:t,mode:n}),this.currentTransitionMode=void 0,IsPlainObject$q(s)){var f=s;s=GetValue$1T(f,"key",void 0),t=GetValue$1T(f,"frame",void 0),n=GetValue$1T(f,"mode"),Array.isArray(n)&&(n=GetRandomItem(n));var T;this.transitionModes&&this.transitionModes.hasOwnProperty(n)&&(T=this.transitionModes[n],this.currentTransitionMode=n),this.setDuration(GetValueFromConfigs("duration",this.duration,f,T)).setEaseFunction(GetValueFromConfigs("ease",this.easeFunction,f,T)).setTransitionDirection(GetValueFromConfigs("dir",this.dir,f,T));var E=GetValueFromConfigs("mask",void 0,f,T);E&&this.setMaskGameObject(E),this.setMaskEnable(E===!0);var h=GetValueFromConfigs("onStart",void 0,f,T),S=GetValueFromConfigs("onProgress",void 0,f,T),e=GetValueFromConfigs("onComplete",void 0,f,T);(h!==void 0||S!==void 0||e!==void 0)&&this.setTransitionStartCallback(h,GetValueFromConfigs("onStartScope",void 0,f,T)).setTransitionProgressCallback(S,GetValueFromConfigs("onProgressScope",void 0,f,T)).setTransitionCompleteCallback(e,GetValueFromConfigs("onCompleteScope",void 0,f,T))}return this.setNextTexture(s,t),this.start(),this},addTransitionMode(s,t){return this.transitionModes===void 0&&(this.transitionModes={}),IsPlainObject$q(s)&&(t=s,s=t.name,delete t.name),this.transitionModes[s]=t,this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new EaseValueTask(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var DrawShape=function(s,t,n,f,T){switch(this.clear().fillStyle(16777215),this.shapeType){case 1:n=n.left;var E=Math.min(s,t)/2;this.fillCircle(-s*(f-.5),-t*(T-.5),E+n);break;default:this.fillRect(-(s*f)-n.left,-(t*T)-n.top,s+n.left+n.right,t+n.top+n.bottom);break}};const Graphics=Phaser.GameObjects.Graphics;class DefaultMaskGraphics extends Graphics{constructor(t,n,f){n===void 0&&(n=0),typeof n=="string"&&(n=SHAPEMODE[n]),super(t.scene),this.parent=t,this.shapeType=n,this.padding=GetBoundsConfig(f),this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,n){var f=this.parent;return t===void 0&&(t=f.x),n===void 0&&(n=f.y),super.setPosition(t,n),this}resize(t,n,f){var T=this.parent;t===void 0&&(t=T.width),n===void 0&&(n=T.height),f===void 0?f=this.padding:typeof f=="number"&&(f=GetBoundsConfig(f));var E=this.width!==t||this.height!==n,h=this.padding!==f&&!IsKeyValueEqual(this.padding,f);return!E&&!h?this:(this.width=t,this.height=n,h&&Clone$1(f,this.padding),this.originX=T.originX,this.originY=T.originY,DrawShape.call(this,t,n,f,T.originX,T.originY),this)}setOrigin(t,n){n===void 0&&(n=t);var f=this.parent;return t===void 0&&(t=f.originX),n===void 0&&(n=f.originY),this.originX===t&&this.originY===n?this:(this.originX=t,this.originY=n,DrawShape.call(this,this.width,this.height,this.padding,t,n),this)}}const SHAPEMODE={rectangle:0,circle:1},MaskMethods={setMaskGameObject(s){if(!s)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(s===!0&&this.maskGameObject instanceof DefaultMaskGraphics)return this;if(this.maskGameObject===s)return this;this.removeMaskGameObject()}return s===!0&&(s=new DefaultMaskGraphics(this)),s.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(s),this.maskGameObject=s,s._maskObject||(s._maskObject=s.createGeometryMask(),s.once("destroy",function(){s._maskObject.destroy(),s._maskObject=void 0})),this.childrenMask=s._maskObject,this},removeMaskGameObject(s){return s===void 0&&(s=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,s),this.maskGameObject=void 0,this},setImageMaskEnable(s,t,n){return t===void 0&&(t=!0),n===void 0&&(n=!1),t?(this.childrenMask||this.setMaskGameObject(!0),s.setMask(this.childrenMask),this.childrenMask.setInvertAlpha(n)):s.clearMask(),this},setCurrentImageMaskEnable(s,t){return this.setImageMaskEnable(this.currentImage,s,t),this},setNextImageMaskEnable(s,t){return this.setImageMaskEnable(this.nextImage,s,t),this},setCellImagesMaskEnable(s,t){for(var n=this.getCellImages(),f=0,T=n.length;f<T;f++)this.setImageMaskEnable(n[f],s,t);return this},setMaskEnable(s,t){return this.setImageMaskEnable(this.backImage,s,t),this.setImageMaskEnable(this.frontImage,s,t),this.setCellImagesMaskEnable(s,t),this}};var GetFrameNameCallback=function(s,t){typeof s=="object"&&(s=s.name),t===void 0&&(t=",");var n;return s==="__BASE"?n=function(f,T){return`${f}${t}${T}`}:n=function(f,T){return`${s}_${f}${t}${T}`},n},GenerateFrames=function(s,t,n,f,T,E){n==null&&(n="__BASE"),E||(E=GetFrameNameCallback(n,E));for(var h=s.sys.textures.get(t),S=typeof n=="object"?n:h.get(n),e=S.width,d=S.height,y,c,u,l=e/f,r=d/T,a=S.cutX,v=S.cutY,o=0,p=0,m=0;m<T;m++){o=0;for(var g=0;g<f;g++)u=E(g,m),y=o+a,c=p+v,h.add(u,0,y,c,l,r),o+=l;p+=r}return{getFrameNameCallback:E,cellWidth:l,cellHeight:r,columns:f,rows:T}};const GetValue$1S=Phaser.Utils.Objects.GetValue,DefaultImageClass=Phaser.GameObjects.Image,IsPlainObject$p=Phaser.Utils.Objects.IsPlainObject,RotateAround$2=Phaser.Math.RotateAround;var GridCutImage=function(s,t,n,f){IsPlainObject$p(t)&&(f=t,t=GetValue$1S(f,"columns",1),n=GetValue$1S(f,"rows",1));var T=GetValue$1S(f,"createImageCallback");if(!T){var E=GetValue$1S(f,"ImageClass",DefaultImageClass);T=function(D,V,k){return new E(D,0,0,V,k)}}for(var h=GetValue$1S(f,"originX",.5),S=GetValue$1S(f,"originY",.5),e=GetValue$1S(f,"add",!0),d=GetValue$1S(f,"align",e),y=GetValue$1S(f,"objectPool",void 0),c=s.scene,u=s.texture,l=s.frame,r=GenerateFrames(c,u,l,t,n),a=r.getFrameNameCallback,v=s.scaleX,o=s.scaleY,p=s.rotation,m=s.getTopLeft(),g=m.x,x=m.y,C=[],M=r.cellWidth*v,R=r.cellHeight*o,P=0;P<n;P++)for(var w=0;w<t;w++){var A,G=a(w,P);if(y&&y.length>0?A=y.pop().setTexture(u,G):A=T(c,u,G),e&&c.add.existing(A),d){var O=g+M*w,L=x+R*P,I=O+h*M,F=L+S*R;A.setOrigin(h,S).setPosition(I,F).setScale(v,o).setRotation(p),RotateAround$2(A,g,x,p)}C.push(A)}return C};const GridCutMethods={gridCutImage(s,t,n,f){f===void 0&&(f={}),f.objectPool=this.imagesPool;for(var T=GridCutImage(s,t,n,f),E,h=0,S=T.length;h<S;h++)E=T[h],E.setVisible(!0),this.add(E);return this.cellImages=T,this.setChildLocalVisible(s,!1),T},gridCutCurrentImage(s,t,n){return this.gridCutImage(this.currentImage,s,t,n)},gridCutNextImage(s,t,n){return this.gridCutImage(this.nextImage,s,t,n)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var s=this.cellImages[0].texture,t=this.cellImages,n,f,T=0,E=t.length;T<E;T++)n=t[T],this.setChildLocalAlpha(n,1).setChildLocalScale(n,1).setChildLocalVisible(n,!1),n.clearMask(),f=n.frame.name,n.setTexture(),s.remove(f);return this.imagesPool.push(...t),t.length=0,this}},FlipMethods={setFlipX(s){return this.flipX=s,this},setFlipY(s){return this.flipY=s,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(s,t){return this.flipX=s,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var methods$o={};Object.assign(methods$o,SetTransitionCallbackMethods,TransitionMethods,MaskMethods,GridCutMethods,FlipMethods);var OnStart=function(s,t,n,f){},OnProgress=function(s,t,n,f){s.setChildLocalAlpha(t,1-f).setChildLocalAlpha(n,f)},OnComplete=function(s,t,n,f){s.setChildLocalAlpha(t,1)};const IsPlainObject$o=Phaser.Utils.Objects.IsPlainObject,GetValue$1R=Phaser.Utils.Objects.GetValue,Clamp$a=Phaser.Math.Clamp;class TransitionImage extends ContainerLite{constructor(t,n,f,T,E,h){IsPlainObject$o(n)?(h=n,n=GetValue$1R(h,"x",0),f=GetValue$1R(h,"y",0),T=GetValue$1R(h,"key",void 0),E=GetValue$1R(h,"frame",void 0)):IsPlainObject$o(E)&&(h=E,E=void 0);var S=GetValue$1R(h,"back",void 0),e=GetValue$1R(h,"front",void 0);S||(S=t.add.image(n,f,T,E)),e||(e=t.add.image(n,f,T,E));var d=GetValue$1R(h,"width",e.width),y=GetValue$1R(h,"height",e.height);super(t,n,f,d,y),this.type="rexTransitionImage",S.setVisible(!1),this.addMultiple([S,e]),this.backImage=S,this.frontImage=e,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var c=GetValue$1R(h,"onStart",void 0),u=GetValue$1R(h,"onProgress",void 0),l=GetValue$1R(h,"onComplete",void 0),r=GetValue$1R(h,"dir",0);c===void 0&&u===void 0&&l===void 0&&(c=OnStart,u=OnProgress,l=OnComplete,r=0),this.setTransitionStartCallback(c,GetValue$1R(h,"onStartScope",void 0)).setTransitionProgressCallback(u,GetValue$1R(h,"onProgressScope",void 0)).setTransitionCompleteCallback(l,GetValue$1R(h,"onCompleteScope",void 0)).setTransitionDirection(r).setDuration(GetValue$1R(h,"duration",1e3)).setEaseFunction(GetValue$1R(h,"ease","Linear"));var a=GetValue$1R(h,"mask",void 0);a&&this.setMaskGameObject(a),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||this.ignoreDestroy||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=Clamp$a(t,0,1),this._t!==t){this._t=t;var n=this.currentImage,f=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),RunCallback(this.onStartCallback,this.onStartCallbackScope,this,n,f,t)),RunCallback(this.onProgressCallback,this.onProgressCallbackScope,this,n,f,t),t===1){RunCallback(this.onCompleteCallback,this.onCompleteCallbackScope,this,n,f,t);var T=f.texture.key,E=f.frame.name;this.frontImage.setTexture(T,E),this.backImage.setTexture(T,E),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,n){return super.setOrigin(t,n),this.backImage.setOrigin(t,n),this.frontImage.setOrigin(t,n),this.maskGameObject&&this.maskGameObject.setOrigin(t,n),this}setTexture(t,n){return this.frontImage.setTexture(t,n),this.backImage.setTexture(t,n).setVisible(!1),this}}var RunCallback=function(s,t,n,f,T,E){s&&(t?s.call(t,n,f,T,E):s(n,f,T,E))};Object.assign(TransitionImage.prototype,methods$o);ObjectFactory.register("transitionImage",function(s,t,n,f,T){var E=new TransitionImage(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.TransitionImage",TransitionImage);const SlideLeft="slideLeft",SlideRight="slideRight",SlideUp="slideUp",SlideDown="slideDown",SlideAwayLeft="slideAwayLeft",SlideAwayRight="slideAwayRight",SlideAwayUp="slideAwayUp",SlideAwayDown="slideAwayDown",PushLeft="pushLeft",PushRight="pushRight",PushUp="pushUp",PushDown="pushDown",ZoomOut="zoomOut",ZoomIn="zoomIn",ZoomInOut="zoomInOut",Fade$1="fade",CrossFade="crossFade",WipeLeft="wipeLeft",WipeRight="wipeRight",WipeUp="wipeUp",WipeDown="wipeDown",IrisOut="irisOut",IrisIn="irisIn",IrisInOut="irisInOut",PieOut="pieOut",PieIn="pieIn",PieInOut="pieInOut",Blinds="blinds",Squares="squares",Diamonds="diamonds",Circles="circles",Curtain="curtain",Pixellate="pixellate",Dissolve="dissolve",RevealLeft="revealLeft",RevealRight="revealRight",RevealUp="revealUp",RevealDown="revealDown";var AddSlideAwayModes=function(s){s.addTransitionMode(SlideAwayRight,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=n.width*T;t.setChildLocalPosition(n,E,0)},onComplete:function(t,n,f,T){t.setChildLocalPosition(n,0,0)}}).addTransitionMode(SlideAwayLeft,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=n.width*-T;t.setChildLocalPosition(n,E,0)},onComplete:function(t,n,f,T){t.setChildLocalPosition(n,0,0)}}).addTransitionMode(SlideAwayDown,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=n.height*T;t.setChildLocalPosition(n,0,E)},onComplete:function(t,n,f,T){t.setChildLocalPosition(n,0,0)}}).addTransitionMode(SlideAwayUp,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=n.height*-T;t.setChildLocalPosition(n,0,E)},onComplete:function(t,n,f,T){t.setChildLocalPosition(n,0,0)}})},AddSlideModes=function(s){s.addTransitionMode(SlideRight,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=f.width*(T-1);t.setChildLocalPosition(f,E,0)},onComplete:function(t,n,f,T){t.setChildLocalPosition(f,0,0)}}).addTransitionMode(SlideLeft,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=f.width*(1-T);t.setChildLocalPosition(f,E,0)},onComplete:function(t,n,f,T){t.setChildLocalPosition(f,0,0)}}).addTransitionMode(SlideDown,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=f.height*(T-1);t.setChildLocalPosition(f,0,E)},onComplete:function(t,n,f,T){t.setChildLocalPosition(f,0,0)}}).addTransitionMode(SlideUp,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=f.height*(1-T);t.setChildLocalPosition(f,0,E)},onComplete:function(t,n,f,T){t.setChildLocalPosition(f,0,0)}})},AddSliderModes=function(s){s.addTransitionMode(PushRight,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=n.width*T;t.setChildLocalPosition(n,E,0);var E=f.width*(T-1);t.setChildLocalPosition(f,E,0)},onComplete:function(t,n,f,T){t.setChildLocalPosition(n,0,0),t.setChildLocalPosition(f,0,0)}}).addTransitionMode(PushLeft,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=n.width*-T;t.setChildLocalPosition(n,E,0);var E=f.width*(1-T);t.setChildLocalPosition(f,E,0)},onComplete:function(t,n,f,T){t.setChildLocalPosition(n,0,0),t.setChildLocalPosition(f,0,0)}}).addTransitionMode(PushDown,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=n.height*T;t.setChildLocalPosition(n,0,E);var E=f.height*(T-1);t.setChildLocalPosition(f,0,E)},onComplete:function(t,n,f,T){t.setChildLocalPosition(n,0,0),t.setChildLocalPosition(f,0,0)}}).addTransitionMode(PushUp,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=n.height*-T;t.setChildLocalPosition(n,0,E);var E=f.height*(1-T);t.setChildLocalPosition(f,0,E)},onComplete:function(t,n,f,T){t.setChildLocalPosition(n,0,0),t.setChildLocalPosition(f,0,0)}})},AddZoomModes=function(s){s.addTransitionMode(ZoomOut,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=1-T;t.setChildLocalScale(n,E,E)},onComplete:function(t,n,f,T){t.setChildLocalScale(n,1,1)}}).addTransitionMode(ZoomIn,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){var E=T;t.setChildLocalScale(f,E,E)},onComplete:function(t,n,f,T){t.setChildLocalScale(f,1,1)}}).addTransitionMode(ZoomInOut,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,n,f,T){f.tint=0},onProgress:function(t,n,f,T){var E;T<.5?(E=1-Yoyo$1(T),t.setChildLocalScale(n,E,E)):(n.visible&&t.setChildVisible(n,!1),E=1-Yoyo$1(T),t.setChildLocalScale(f,E,E))},onComplete:function(t,n,f,T){t.setChildLocalScale(n,1,1),t.setChildVisible(n,!0),n.tint=16777215,t.setChildLocalScale(f,1,1),t.setChildVisible(f,!0),f.tint=16777215}})},AddFadeModes=function(s){s.addTransitionMode(Fade$1,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,n,f,T){f.tint=0},onProgress:function(t,n,f,T){var E;T<.5?(T=Yoyo$1(T),E=Math.floor(255*(1-T)),n.tint=(E<<16)+(E<<8)+E):(n.visible&&t.setChildVisible(n,!1),T=Yoyo$1(T),E=Math.floor(255*(1-T)),f.tint=(E<<16)+(E<<8)+E)},onComplete:function(t,n,f,T){t.setChildVisible(n,!0),n.tint=16777215,t.setChildVisible(f,!0),f.tint=16777215}}).addTransitionMode(CrossFade,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,n,f,T){},onProgress:function(t,n,f,T){t.setChildLocalAlpha(n,1-T),t.setChildLocalAlpha(f,T)},onComplete:function(t,n,f,T){t.setChildLocalAlpha(n,1)}})},CreateMask$7=function(s){var t=new CustomProgress(s,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){var n=this.getShape("rect").fillStyle(16777215),f=1-this.value;switch(this.wipeMode){case"right":n.setSize(this.width*f,this.height).setTopLeftPosition(this.width-n.width,0);break;case"left":n.setSize(this.width*f,this.height).setTopLeftPosition(0,0);break;case"down":n.setSize(this.width,this.height*f).setTopLeftPosition(0,this.height-n.height);break;case"up":n.setSize(this.width,this.height*f).setTopLeftPosition(0,0);break}}});return t},AddWipeModes=function(s){var t=CreateMask$7(s.scene);s.once("destroy",function(){t.destroy()}).addTransitionMode(WipeRight,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){n.setCurrentImageMaskEnable(!0),n.maskGameObject.wipeMode="right"},onProgress:function(n,f,T,E){n.maskGameObject.setValue(E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}}).addTransitionMode(WipeLeft,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){n.setCurrentImageMaskEnable(!0),n.maskGameObject.wipeMode="left"},onProgress:function(n,f,T,E){n.maskGameObject.setValue(E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}}).addTransitionMode(WipeDown,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){n.setCurrentImageMaskEnable(!0),n.maskGameObject.wipeMode="down"},onProgress:function(n,f,T,E){n.maskGameObject.setValue(E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}}).addTransitionMode(WipeUp,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){n.setCurrentImageMaskEnable(!0),n.maskGameObject.wipeMode="up"},onProgress:function(n,f,T,E){n.maskGameObject.setValue(E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}})},CreateMask$6=function(s){var t=new CustomProgress(s,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){this.getShape("rect").fillStyle(16777215).setSize(this.width*this.value,this.height*this.value).setCenterPosition(this.centerX,this.centerY)}});return t},AddIrisModes=function(s){var t=CreateMask$6(s.scene);s.once("destroy",function(){t.destroy()}).addTransitionMode(IrisOut,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){n.setCurrentImageMaskEnable(!0,!0)},onProgress:function(n,f,T,E){n.maskGameObject.setValue(E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}}).addTransitionMode(IrisIn,{ease:"Linear",dir:"in",mask:t,onStart:function(n,f,T,E){n.setNextImageMaskEnable(!0,!0)},onProgress:function(n,f,T,E){n.maskGameObject.setValue(1-E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}}).addTransitionMode(IrisInOut,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){T.tint=0,n.setCurrentImageMaskEnable(!0),n.setNextImageMaskEnable(!0)},onProgress:function(n,f,T,E){var h;E<.5?(E=Yoyo$1(E),h=Math.floor(255*(1-E)),n.maskGameObject.setValue(1-E),f.tint=(h<<16)+(h<<8)+h):(f.visible&&n.setChildVisible(f,!1),E=Yoyo$1(E),h=Math.floor(255*(1-E)),n.maskGameObject.setValue(1-E),T.tint=(h<<16)+(h<<8)+h)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1),n.setChildVisible(f,!0),f.tint=16777215,n.setChildVisible(T,!0),T.tint=16777215}})},CreateMask$5=function(s){var t=new CustomProgress(s,{type:"Graphics",create:[{name:"pie",type:"arc"}],update:function(){var n=Math.max(this.width,this.height)*2,f=90*this.value;this.getShape("pie").fillStyle(16777215).setCenterPosition(this.centerX,0).setRadius(n).setAngle(90-f,90+f).setPie()}});return t},AddPieModes=function(s){var t=CreateMask$5(s.scene);s.once("destroy",function(){t.destroy()}).addTransitionMode(PieOut,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){n.setCurrentImageMaskEnable(!0,!0)},onProgress:function(n,f,T,E){n.maskGameObject.setValue(E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}}).addTransitionMode(PieIn,{ease:"Linear",dir:"in",mask:t,onStart:function(n,f,T,E){n.setNextImageMaskEnable(!0,!0)},onProgress:function(n,f,T,E){n.maskGameObject.setValue(1-E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}}).addTransitionMode(PieInOut,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){T.tint=0,n.setCurrentImageMaskEnable(!0),n.setNextImageMaskEnable(!0)},onProgress:function(n,f,T,E){var h;E<.5?(E=Yoyo$1(E),h=Math.floor(255*(1-E)),n.maskGameObject.setValue(1-E),f.tint=(h<<16)+(h<<8)+h):(f.visible&&n.setChildVisible(f,!1),E=Yoyo$1(E),h=Math.floor(255*(1-E)),n.maskGameObject.setValue(1-E),T.tint=(h<<16)+(h<<8)+h)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1),n.setChildVisible(f,!0),f.tint=16777215,n.setChildVisible(T,!0),T.tint=16777215}})},CreateMask$4=function(s,t){var n=new CustomProgress(s,{type:"Graphics",create:{rectangle:t},update:function(){for(var f=this.getShapes(),T=this.width/t,E=0;E<t;E++)f[E].fillStyle(16777215).setSize(T*this.value,this.height).setTopLeftPosition(T*E,0)}});return n},AddBlindsModes=function(s){var t=CreateMask$4(s.scene,10);s.once("destroy",function(){t.destroy()}).addTransitionMode(Blinds,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){n.setCurrentImageMaskEnable(!0,!0)},onProgress:function(n,f,T,E){n.maskGameObject.setValue(E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}})},CreateMask$3=function(s,t,n){var f=new CustomProgress(s,{type:"Graphics",create:{rectangle:t*n},update:function(){for(var T=this.getShapes(),E=this.width/t,h=this.height/n,S=0;S<n;S++)for(var e=0;e<t;e++)T[e*n+S].fillStyle(16777215).setSize(E*this.value,h*this.value).setCenterPosition(E*(e+.5),h*(S+.5))}});return f},AddSquaresModes=function(s){var t=CreateMask$3(s.scene,Math.ceil(s.width/40),Math.ceil(s.height/40));s.once("destroy",function(){t.destroy()}).addTransitionMode(Squares,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){n.setCurrentImageMaskEnable(!0,!0)},onProgress:function(n,f,T,E){n.maskGameObject.setValue(E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}})},CreateMask$2=function(s,t,n){var f=new CustomProgress(s,{type:"Graphics",create:{lines:t*n},update:function(){for(var T=this.getShapes(),E=this.width/(t-1),h=this.height/n,S=h*2,e=E*this.value,d=h*this.value,y=0;y<n;y++)for(var c=0;c<t;c++){var u=c*E,l=y*S+c%2*h;T[c*n+y].fillStyle(16777215).start(u+e,l).lineTo(u,l+d).lineTo(u-e,l).lineTo(u,l-d).lineTo(u+e,l).close()}}});return f},AddDiamondsMode=function(s){var t=CreateMask$2(s.scene,Math.ceil(s.width/60),Math.ceil(s.height/60));s.once("destroy",function(){t.destroy()}).addTransitionMode(Diamonds,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){n.setCurrentImageMaskEnable(!0,!0)},onProgress:function(n,f,T,E){n.maskGameObject.setValue(E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}})},CreateMask$1=function(s,t,n){var f=new CustomProgress(s,{type:"Graphics",create:{circle:t*n},update:function(){for(var T=this.getShapes(),E=this.width/(t-1),h=this.height/n,S=h*2,e=Math.max(E,h)*this.value,d=0;d<n;d++)for(var y=0;y<t;y++){var c=y*E,u=d*S+y%2*h;T[y*n+d].fillStyle(16777215).setCenterPosition(c,u).setRadius(e)}}});return f},AddCirclesMode=function(s){var t=CreateMask$1(s.scene,Math.ceil(s.width/60),Math.ceil(s.height/60));s.once("destroy",function(){t.destroy()}).addTransitionMode(Circles,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){n.setCurrentImageMaskEnable(!0,!0)},onProgress:function(n,f,T,E){n.maskGameObject.setValue(E)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1)}})},CreateMask=function(s,t){var n=new CustomProgress(s,{type:"Graphics",create:{lines:t},update:function(){for(var f=this.getShapes(),T=this.width/t,E=T/2,h=0;h<t;h++){var S=T*h,e=this.height*this.value,d=S+E;f[h].fillStyle(16777215).start(S,0).horizontalLineTo(e).arc(d,e,E,180,0,!0).horizontalLineTo(-e).lineTo(S,0).close()}}});return n},AddCurtainMode=function(s){var t=CreateMask(s.scene,10);s.once("destroy",function(){t.destroy()}).addTransitionMode(Curtain,{ease:"Linear",dir:"out",mask:t,onStart:function(n,f,T,E){T.tint=0,n.setCurrentImageMaskEnable(!0,!0),n.setNextImageMaskEnable(!0,!0)},onProgress:function(n,f,T,E){var h;E<.5?(E=Yoyo$1(E),h=Math.floor(255*(1-E)),n.maskGameObject.setValue(E),f.tint=(h<<16)+(h<<8)+h):(f.visible&&n.setChildVisible(f,!1),E=Yoyo$1(E),h=Math.floor(255*(1-E)),n.maskGameObject.setValue(E),T.tint=(h<<16)+(h<<8)+h)},onComplete:function(n,f,T,E){n.removeMaskGameObject(!1),n.setChildVisible(f,!0),f.tint=16777215,n.setChildVisible(T,!0),T.tint=16777215}})},AddPixellateMode=function(s){s.addTransitionMode(Pixellate,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,n,f,T){t.setChildVisible(f,!1),n.effect=n.preFX.addPixelate(0),f.effect=f.preFX.addPixelate(0)},onProgress:function(t,n,f,T){if(T<.5){T=Yoyo$1(T);var E=Math.min(n.width,n.height)/5;n.effect.amount=Math.ceil(E*T)}else{n.visible&&t.setChildVisible(n,!1),f.visible||t.setChildVisible(f,!0),T=Yoyo$1(T);var E=Math.min(f.width,f.height)/5;f.effect.amount=Math.ceil(E*T)}},onComplete:function(t,n,f,T){n.preFX.remove(n.effect),delete n.effect,t.setChildVisible(n,!0),f.preFX.remove(f.effect),delete f.effect}})};const frag$1=`vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }
float Perlin(vec3 P) {
    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));
    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);
    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);
    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;
    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0); gx1 = fract(gx1);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),
        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),
        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),
        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));
    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));
    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;
    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;
    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),
        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),
        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),
            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);
    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);
}
float Perlin(vec2 P) { return Perlin(vec3(P, 0.0)); }
`,frag=`#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
// Scene buffer
uniform sampler2D uMainSampler;
uniform sampler2D uMainSampler2;

uniform int resizeMode;
uniform float progress;
uniform float fromRatio;
uniform float toRatio;
varying vec2 outFragCoord;
// Effect parameters
uniform float noiseX;
uniform float noiseY;
uniform float noiseZ;
uniform float fromEdgeStart;
uniform float fromEdgeWidth;
uniform float toEdgeStart;
uniform float toEdgeWidth;

${frag$1}

vec4 getFromColor (vec2 uv) {
  return texture2D(uMainSampler, uv);
}

vec4 getToColor (vec2 uv) {
  if (resizeMode == 2) {
    //  cover
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(min(fromRatio / toRatio, 1.0), min((toRatio / fromRatio), 1.0)));
  } else if (resizeMode == 1) {
    //  contain
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(max(fromRatio / toRatio, 1.0), max((toRatio / fromRatio), 1.0)));
  } else {
    //  stretch
    return texture2D(uMainSampler2, vec2(uv.x, 1.0 - uv.y));
  }
}

vec4 transition (vec2 uv) {    
  vec4 colorFront = getFromColor(uv);
  vec4 colorTo = getToColor(uv);

  float noise = (Perlin(vec3(uv.x * noiseX, uv.y * noiseY, noiseZ)) + 1.0) / 2.0
    * (1.0 - (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth))
    + (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth) * 0.5;
  vec4 colorResult = colorFront * smoothstep(progress - (fromEdgeStart + fromEdgeWidth), progress - fromEdgeStart, noise)
    + colorTo * smoothstep((1.0 - progress) - (toEdgeStart + toEdgeWidth), (1.0 - progress) - toEdgeStart, (1.0 - noise));
  return colorResult;
}

void main () {
  vec2 uv = outFragCoord;
  gl_FragColor = transition(uv);
}
`,PostFXPipeline=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,GetValue$1Q=Phaser.Utils.Objects.GetValue,Clamp$9=Phaser.Math.Clamp;class DissolvePostFxPipeline extends PostFXPipeline{constructor(t){super({name:"rexDissolvePostFx",game:t,renderTarget:!0,fragShader:frag}),this._progress=0,this.toFrame=null,this.targetTexture=null,this.resizeMode=1,this.toRatio=1,this.noiseX=0,this.noiseY=0,this.noiseZ=0,this.fromEdgeStart=.01,this.fromEdgeWidth=.05,this.toEdgeStart=.01,this.toEdgeWidth=.05}resetFromJSON(t){return this.setProgress(GetValue$1Q(t,"progress",0)),this.setTransitionTargetTexture(GetValue$1Q(t,"toTexture","__DEFAULT"),GetValue$1Q(t,"toFrame",void 0),GetValue$1Q(t,"resizeMode",1)),this.setNoise(GetValue$1Q(t,"noiseX",void 0),GetValue$1Q(t,"noiseY",void 0),GetValue$1Q(t,"noiseZ",void 0)),this.setFromEdge(GetValue$1Q(t,"fromEdgeStart",.01),GetValue$1Q(t,"fromEdgeWidth",.05)),this.setToEdge(GetValue$1Q(t,"toEdgeStart",.01),GetValue$1Q(t,"toEdgeWidth",.05)),this}onBoot(){this.setTransitionTargetTexture()}onPreRender(){this.set1f("progress",this.progress),this.set1i("resizeMode",this.resizeMode),this.set1f("noiseX",this.noiseX),this.set1f("noiseY",this.noiseY),this.set1f("noiseZ",this.noiseZ),this.set1f("fromEdgeStart",this.fromEdgeStart),this.set1f("fromEdgeWidth",this.fromEdgeWidth),this.set1f("toEdgeStart",this.toEdgeStart),this.set1f("toEdgeWidth",this.toEdgeWidth)}onDraw(t){this.set1f("fromRatio",t.width/t.height),this.bindTexture(this.targetTexture,1),this.bindAndDraw(t)}get progress(){return this._progress}set progress(t){this._progress=Clamp$9(t,0,1)}setProgress(t){return this.progress=t,this}setTransitionTargetTexture(t,n,f){t===void 0&&(t="__DEFAULT");var T=this.game.textures.getFrame(t,n);return T||(T=this.game.textures.getFrame("__DEFAULT")),this.toRatio=T.width/T.height,this.toFrame=T,this.targetTexture=T.glTexture,f!==void 0&&(this.resizeMode=f),this.set1i("uMainSampler2",1),this.set1f("toRatio",this.toRatio),this}setResizeMode(t){return typeof t=="string"&&(t=ResizeMode[t]),this.resizeMode=t,this}setNoise(t,n,f){return t===void 0&&(t=4+Math.random()*6),n===void 0&&(n=4+Math.random()*6),f===void 0&&(f=Math.random()*10),this.noiseX=t,this.noiseY=n,this.noiseZ=f,this}setFromEdge(t,n){return this.fromEdgeStart=t,this.fromEdgeWidth=n,this}setToEdge(t,n){return this.toEdgeStart=t,this.toEdgeWidth=n,this}}var ResizeMode={stretch:0,contain:1,cover:2},RegisterPostPipeline=function(s,t,n){GetGame(s).renderer.pipelines.addPostPipeline(t,n)},AddPostFxPipelineInstance=function(s,t,n){n===void 0&&(n={}),s.setPostPipeline(t);var f=s.postPipelines[s.postPipelines.length-1];return f.resetFromJSON(n),n.name&&(f.name=n.name),f};const SpliceOne$1=Phaser.Utils.Array.SpliceOne;var RemovePostFxPipelineInstance=function(s,t,n){if(n===void 0)for(var f=s.postPipelines,T=f.length-1;T>=0;T--){var E=f[T];E instanceof t&&(E.destroy(),SpliceOne$1(f,T))}else for(var f=s.postPipelines,T=0,h=f.length;T<h;T++){var E=f[T];E instanceof t&&E.name===n&&(E.destroy(),SpliceOne$1(f,T))}},AddDissolveMode=function(s){RegisterPostPipeline(s.scene.game,"rexDissolvePostFx",DissolvePostFxPipeline),s.addTransitionMode(Dissolve,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,n,f,T){n.effect=AddPostFxPipelineInstance(n,DissolvePostFxPipeline)},onProgress:function(t,n,f,T){n.effect.setProgress(T)},onComplete:function(t,n,f,T){RemovePostFxPipelineInstance(n,DissolvePostFxPipeline),delete n.effect}})};const WipeWidth=.1,DirLeftToRight=0,DirTopToBottom=0,DirRightToLeft=1,DirBottomToTop=1,AxisX=0,AxisY=1;var AddRevealModes=function(s){s.addTransitionMode(RevealRight,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,n,f,T){f.effect=f.preFX.addReveal(WipeWidth,DirLeftToRight,AxisX)},onProgress:function(t,n,f,T){f.effect.progress=T},onComplete:function(t,n,f,T){f.preFX.remove(f.effect),delete f.effect}}).addTransitionMode(RevealLeft,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,n,f,T){f.effect=f.preFX.addReveal(WipeWidth,DirRightToLeft,AxisX)},onProgress:function(t,n,f,T){f.effect.progress=T},onComplete:function(t,n,f,T){f.preFX.remove(f.effect),delete f.effect}}).addTransitionMode(RevealDown,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,n,f,T){f.effect=f.preFX.addReveal(WipeWidth,DirTopToBottom,AxisY)},onProgress:function(t,n,f,T){f.effect.progress=T},onComplete:function(t,n,f,T){f.preFX.remove(f.effect),delete f.effect}}).addTransitionMode(RevealUp,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,n,f,T){f.effect=f.preFX.addReveal(WipeWidth,DirBottomToTop,AxisY)},onProgress:function(t,n,f,T){f.effect.progress=T},onComplete:function(t,n,f,T){f.preFX.remove(f.effect),delete f.effect}})};const Modes=[AddSlideAwayModes,AddSlideModes,AddSliderModes,AddZoomModes,AddFadeModes,AddIrisModes,AddPieModes,AddWipeModes,AddBlindsModes,AddSquaresModes,AddDiamondsMode,AddCirclesMode,AddCurtainMode,AddPixellateMode,AddDissolveMode,AddRevealModes];class TransitionImagePack extends TransitionImage{constructor(t,n,f,T,E,h){super(t,n,f,T,E,h);for(var S=0,e=Modes.length;S<e;S++)Modes[S](this)}}ObjectFactory.register("transitionImagePack",function(s,t,n,f,T){var E=new TransitionImagePack(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.TransitionImagePack",TransitionImagePack);var FitTo=function(s,t,n,f){n===void 0&&(n=!0),f===void 0?f={}:f===!0&&(f=globalSize);var T=s.width,E=s.height,h=t.width,S=t.height;if(T<=h&&E<=S)if(n){var e=T/E,d=h/S;d<e?(f.width=h,f.height=h/e):d>e?(f.width=S*e,f.height=S):(f.width=h,f.height=S)}else f.width=T,f.height=E;else{var e=T/E;f.width=Math.min(T,h),f.height=Math.min(E,S);var y=f.width/f.height;y<e?f.height=f.width/e:y>e&&(f.width=f.height*e)}return f},globalSize={},ScaleImage=function(){var s=this.image,t=FitTo(s,{width:this.width,height:this.height},this.scaleUp,!0);return s.setDisplaySize(t.width,t.height),this.resetChildScaleState(s),this},methods$n={scaleImage:ScaleImage};Object.assign(methods$n,FlipMethods);var ResizeBackground=function(){var s=this.background;return s?(s.setOrigin(this.originX,this.originY),s.setPosition(this.x,this.y),ResizeGameObject(s,this.displayWidth,this.displayHeight),this.resetChildScaleState(s),this):this};const IsPlainObject$n=Phaser.Utils.Objects.IsPlainObject,GetValue$1P=Phaser.Utils.Objects.GetValue;class ImageBox extends ContainerLite{constructor(t,n,f,T,E,h){IsPlainObject$n(n)?(h=n,n=GetValue$1P(h,"x",0),f=GetValue$1P(h,"y",0),T=GetValue$1P(h,"key",void 0),E=GetValue$1P(h,"frame",void 0)):IsPlainObject$n(E)&&(h=E,E=void 0);var S=GetValue$1P(h,"image");S?S.setPosition(n,f).setOrigin(.5):(S=t.add.image(n,f,T,E),T===void 0&&S.setVisible(!1)),super(t,n,f,1,1),this.type="rexImageBox";var e=GetValue$1P(h,"background",!0);e&&this.add(e),this.background=e,this.add(S),this.image=S,this.scaleUp=GetValue$1P(h,"scaleUp",!1);var d=GetValue$1P(h,"width",S.width),y=GetValue$1P(h,"height",S.height);this.resize(d,y)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}resize(t,n){return super.resize(t,n),ResizeBackground.call(this),this.scaleImage(),this}setTexture(t,n){var f=this.image;return f.setTexture(t,n),t!==null?(this.setChildVisible(f,!0),this.scaleImage()):this.setChildVisible(f,!1),this}}Object.assign(ImageBox.prototype,methods$n);ObjectFactory.register("imageBox",function(s,t,n,f,T){var E=new ImageBox(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.ImageBox",ImageBox);ObjectFactory.register("fullWindowRectangle",function(s,t){var n=new FullWindowRectangle(this.scene,s,t);return this.scene.add.existing(n),n});SetValue(window,"RexPlugins.UI.FullWindowRectangle",FullWindowRectangle);ObjectFactory.register("cover",function(s){var t=new Cover(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Cover",Cover);var Resize=function(s,t){if(this.scene.sys.scale.autoRound&&(s=Math.floor(s),t=Math.floor(t)),this.width===s&&this.height===t)return this;var n=this.node.style;return n.width=`${s}px`,n.height=`${t}px`,this.updateSize(),this};const ElementProperties={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},StyleProperties={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},ElementEvents={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},GetValue$1O=Phaser.Utils.Objects.GetValue;var RouteEvents=function(s,t,n,f){var T=GetValue$1O(f,"preventDefault",!1),E=GetValue$1O(f,"preTest");for(let h in n)t.addEventListener(h,function(S){(!E||E(s,h))&&s.emit(n[h],s,S),T&&S.preventDefault()})};const DOMElement$2=Phaser.GameObjects.DOMElement,IsPlainObject$m=Phaser.Utils.Objects.IsPlainObject,GetValue$1N=Phaser.Utils.Objects.GetValue;class InputText extends DOMElement$2{constructor(t,n,f,T,E,h){IsPlainObject$m(n)?(h=n,n=GetValue$1N(h,"x",0),f=GetValue$1N(h,"y",0),T=GetValue$1N(h,"width",0),E=GetValue$1N(h,"height",0)):IsPlainObject$m(T)&&(h=T,T=GetValue$1N(h,"width",0),E=GetValue$1N(h,"height",0)),h===void 0&&(h={});var S,e=GetValue$1N(h,"inputType",void 0);e===void 0&&(e=GetValue$1N(h,"type","text")),e==="textarea"?(S=document.createElement("textarea"),S.style.resize="none"):(S=document.createElement("input"),S.type=e),SetProperties(ElementProperties,h,S);var d=GetValue$1N(h,"style",void 0);d=SetProperties(StyleProperties,h,d);var y=S.style;for(var c in h)c in ElementProperties||c in StyleProperties||c in y&&(d[c]=h[c]);d["box-sizing"]="border-box",super(t,n,f,S,d),this.type="rexInputText",this.resize(T,E),RouteEvents(this,S,ElementEvents),StopPropagationTouchEvents(S),GetValue$1N(h,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get inputType(){return this.node.tagName.toLowerCase()==="textarea"?"textarea":this.node.type}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,n){return t===void 0?this.node.select():this.node.setSelectionRange(t,n),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,n){return this.node.style[t]=n,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var methods$m={resize:Resize};Object.assign(InputText.prototype,methods$m);ObjectFactory.register("inputText",function(s){var t=new InputText(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.InputText",InputText);const GetValue$1M=Phaser.Utils.Objects.GetValue;var CreateFileInput=function(s,t){var n=document.createElement("input");n.type="file";var f=GetValue$1M(t,"accept",""),T=GetValue$1M(t,"multiple",!1);return n.setAttribute("accept",f),T?n.setAttribute("multiple",""):n.removeAttribute("multiple"),n},Delay=function(s,t){return s===void 0&&(s=0),new Promise(function(n,f){setTimeout(function(){n(t)},s)})},ClickPromise=function({game:s,fileInput:t,closeDelay:n}){return WaitEvent(GetGame(s).events,"focus").then(function(){return Delay(n)}).then(function(){var f={files:t.files};return Promise.resolve(f)})};const GetValue$1L=Phaser.Utils.Objects.GetValue,RemoveFromDOM=Phaser.DOM.RemoveFromDOM;var Open$1=function(s,t){var n=GetValue$1L(t,"closeDelay",200),f=CreateFileInput(s,t);return f.click(),ClickPromise({game:s,fileInput:f,closeDelay:n}).then(function(T){return RemoveFromDOM(f),f.remove(),Promise.resolve(T)})},SyncTo=function(s){return this.setOrigin(s.originX,s.originY),this.setPosition(s.x,s.y),this.resize(s.displayWidth,s.displayHeight),this},GetCache=function(s,t,n){if(n===void 0)switch(t){case"image":case"svg":n="textures";break;case"animation":n="json";break;case"tilemapTiledJSON":case"tilemapCSV":n="tilemap";break;case"glsl":n="shader";break;default:n=t;break}s=GetGame(s);var f;return n==="textures"?f=s.textures:f=s.cache[n],f},FileObjectToCache=function(s,t,n,f,T,E){if(!(T===null||T===!1))if(IsFunction(T))T();else{var h=GetCache(s,n,T);h.exists(f)&&h.remove(f)}var S=s.load;if(E&&S.once(`filecomplete-${n}-${f}`,function(d,y,c){E(c)}),IsFunction(t))t();else{var e=window.URL.createObjectURL(t);S[n](f,e)}S.start()},LoadFile=function(s,t,n,f,T){var E=this.scene;return FileObjectToCache(E,s,t,n,f,T),this},LoadFilePromise=function(s,t,n,f){var T=this.scene;return new Promise(function(E,h){var S=function(e){E(e)};FileObjectToCache(T,s,t,n,f,S)})};const LoadFileMethods={loadFile:LoadFile,loadFilePromise:LoadFilePromise},DOMElement$1=Phaser.GameObjects.DOMElement,IsPlainObject$l=Phaser.Utils.Objects.IsPlainObject,GetValue$1K=Phaser.Utils.Objects.GetValue;class FileChooser extends DOMElement$1{constructor(t,n,f,T,E,h){IsPlainObject$l(n)?(h=n,n=GetValue$1K(h,"x",0),f=GetValue$1K(h,"y",0),T=GetValue$1K(h,"width",0),E=GetValue$1K(h,"height",0)):IsPlainObject$l(T)&&(h=T,T=GetValue$1K(h,"width",0),E=GetValue$1K(h,"height",0));var S=document.createElement("input");S.type="file";var e=S.style;e.display="none";var d=document.createElement("label");d.appendChild(S);var y=GetValue$1K(h,"style",void 0);super(t,n,f,d,y),this.type="rexFileChooser",this.resetFromJSON(h),this.resize(T,E);var c=this;S.onchange=function(){c.emit("change",c)},this.setCloseDelay(GetValue$1K(h,"closeDelay",200)),S.onclick=function(){ClickPromise({game:t,fileInput:S,closeDelay:c.closeDelay}).then(function(){c.emit("select",c)})}}resetFromJSON(t){return this.setAccept(GetValue$1K(t,"accept","")),this.setMultiple(GetValue$1K(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}setOpenEnable(t){return t===void 0&&(t=!0),this.fileInput.disabled=!t,this}}var methods$l={resize:Resize,syncTo:SyncTo};Object.assign(FileChooser.prototype,methods$l,LoadFileMethods);ObjectFactory.register("fileChooser",function(s){var t=new FileChooser(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.FileChooser",FileChooser);const DropEnableMethods={setDropEnable(s){return s===void 0&&(s=!0),this.dropEnable=s,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},FilterMethods={addFilter(s,t){return this.filters||(this.filters={}),this.filters[s]=t,this},addFilters(s){this.filters||(this.filters={});for(var t in s)this.filters[t]=s[t];return this}};var Methods$8={resize:Resize,syncTo:SyncTo};Object.assign(Methods$8,DropEnableMethods,FilterMethods,LoadFileMethods);const DragDropEvents={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},DOMElement=Phaser.GameObjects.DOMElement,IsPlainObject$k=Phaser.Utils.Objects.IsPlainObject,GetValue$1J=Phaser.Utils.Objects.GetValue;class FileDropZone extends DOMElement{constructor(t,n,f,T,E,h){IsPlainObject$k(n)?(h=n,n=GetValue$1J(h,"x",0),f=GetValue$1J(h,"y",0),T=GetValue$1J(h,"width",0),E=GetValue$1J(h,"height",0)):IsPlainObject$k(T)&&(h=T,T=GetValue$1J(h,"width",0),E=GetValue$1J(h,"height",0)),h===void 0&&(h={});var S=document.createElement("div"),e=GetValue$1J(h,"style",void 0);super(t,n,f,S,e),this.type="rexFileDropZone",this.resize(T,E),this._files=[],this.setDropEnable(GetValue$1J(h,"dropEnable",!0));var d=GetValue$1J(h,"filters");d&&this.addFilters(d),RouteEvents(this,S,DragDropEvents,{preventDefault:!0,preTest(y){return y.dropEnable}}),this.on("drop",function(y,c){this._files=c.dataTransfer.files;var u=this._files;if(u&&this.filters)for(var l in this.filters){for(var r=this.filters[l],a=[],v=0,o=u.length;v<o;v++){var p=u[v];r(p,u)&&a.push(p)}a.length>0&&this.emit(`drop.${l}`,a)}},this)}get files(){return this._files}}Object.assign(FileDropZone.prototype,Methods$8);ObjectFactory.register("fileDropZone",function(s){var t=new FileDropZone(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.FileDropZone",FileDropZone);var GetChildrenWidth$3=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,n=this.sizerChildren,f,T,E;if(this.orientation===0)for(var h=this.space.item,S=!0,e=0,d=n.length;e<d;e++)f=n[e],!f.rexSizer.hidden&&(f.rexSizer.proportion===0||s?E=this.getChildWidth(f):E=0,T=f.rexSizer.padding,E+=T.left+T.right,S?S=!1:E+=h,t+=E);else for(var e=0,d=n.length;e<d;e++)f=n[e],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(T=f.rexSizer.padding,E=this.getChildWidth(f)+T.left+T.right,t=Math.max(E,t)));return t+this.space.left+this.space.right},GetChildrenHeight$3=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);var t=0,n=this.sizerChildren,f,T,E;if(this.orientation===0)for(var h=0,S=n.length;h<S;h++)f=n[h],!f.rexSizer.hidden&&(T=f.rexSizer.padding,E=this.getChildHeight(f)+T.top+T.bottom,t=Math.max(E,t));else for(var e=this.space.item,d=!0,h=0,S=n.length;h<S;h++)f=n[h],f.hasOwnProperty("rexSizer")&&(f.rexSizer.hidden||(f.rexSizer.proportion===0||s?E=this.getChildHeight(f):E=0,T=f.rexSizer.padding,E+=T.top+T.bottom,d?d=!1:E+=e,t+=E));return t+this.space.top+this.space.bottom},GetExpandedChildWidth$1=function(s,t){t===void 0&&(t=this.width);var n,f=s.rexSizer,T=f.padding;if(this.orientation===0)f.proportion>0&&this.proportionLength>0&&(n=f.proportion*this.proportionLength);else if(f.expand){var E=t-this.space.left-this.space.right;n=E-T.left-T.right}return n},GetExpandedChildHeight$1=function(s,t){t===void 0&&(t=this.height);var n,f=s.rexSizer,T=f.padding;if(this.orientation===0){if(f.expand){var E=t-this.space.top-this.space.bottom;n=E-T.top-T.bottom}}else f.proportion>0&&this.proportionLength>0&&(n=f.proportion*this.proportionLength);return n},GetChildrenSizers$3=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,n,f=0,T=t.length;f<T;f++)n=t[f],n.isRexSizer&&s.push(n);return s},PreLayout$3=function(){this.hasRatioFitChild=!1;for(var s=this.sizerChildren,t=0,n=s.length;t<n;t++){var f=s[t];f.rexSizer.hidden||f.rexSizer.fitRatio&&(ResizeGameObject(f,1,1),this.hasRatioFitChild=!0)}return this._childrenProportion=void 0,this.proportionLength=void 0,PreLayout$4.call(this),this},PostResolveSize=function(s,t){if(this.hasRatioFitChild){var n;this.orientation===0?n=t-this.getInnerPadding("top")-this.getInnerPadding("bottom"):s-this.getInnerPadding("left")-this.getInnerPadding("right");for(var f=this.sizerChildren,T,E,h=0,S=f.length;h<S;h++){var e=f[h];if(!e.rexSizer.hidden){var d=e.rexSizer.fitRatio;d&&(this.orientation===0?(E=n-this.getChildOuterPadding(e,"top")-this.getChildOuterPadding(e,"bottom"),T=E*d):(T=n-this.getChildOuterPadding(e,"top")-this.getChildOuterPadding(e,"bottom"),E=T/d),ResizeGameObject(e,T,E),e.isRexSizer&&e.setMinSize(T,E))}}this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(s,!0)}};const Wrap=Phaser.Math.Wrap;var LayoutChildren$4=function(){for(var s=this.sizerChildren,t,n,f,T=this.innerLeft,E=this.innerTop,h=this.innerWidth,S=this.innerHeight,e=T,d=E,y,c,u,l,r,a,v,o=this.startChildIndex,p=0,m=s.length;p<m;p++)o===0?v=p:v=Wrap(p+o,0,m),this.rtl&&(v=m-v-1),t=s[v],!t.rexSizer.hidden&&(n=t.rexSizer,f=n.padding,PreLayoutChild.call(this,t),t.isRexSpace?(r=0,a=0):(r=this.getExpandedChildWidth(t),a=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,r,a),CheckSize(t,this)):ResizeGameObject(t,r,a),r===void 0&&(r=GetDisplayWidth(t)),a===void 0&&(a=GetDisplayHeight(t)),this.orientation===0?(y=e+f.left,n.proportion===0||this.proportionLength===0?u=r:u=n.proportion*this.proportionLength,c=d+f.top,l=S-f.top-f.bottom):(y=e+f.left,u=h-f.left-f.right,c=d+f.top,n.proportion===0||this.proportionLength===0?l=a:l=n.proportion*this.proportionLength),LayoutChild.call(this,t,y,c,u,l,n.align),this.orientation===0?e+=u+f.left+f.right+this.space.item:d+=l+f.top+f.bottom+this.space.item)},ResolveWidth$1=function(t){var t=ResolveWidth$2.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var n=t-this.childrenWidth;n>0?(n=t-this.getChildrenWidth(!1),this.proportionLength=n/this.childrenProportion):this.proportionLength=0}return t},ResolveHeight$1=function(t){var t=ResolveHeight$2.call(this,t);if(this.proportionLength===void 0&&this.orientation===1){var n=t-this.childrenHeight;n>0?(n=t-this.getChildrenHeight(!1),this.proportionLength=n/this.childrenProportion):this.proportionLength=0}return t};const Zone=Phaser.GameObjects.Zone;class Space extends Zone{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var GetNearestChildIndex$1=function(s,t){var n=this.sizerChildren;if(n.length===0)return-1;for(var f=-1,T=1/0,E=0,h=n.length;E<h;E++){var S=n[E],e;this.orientation===0?e=Math.abs(S.left-s):e=Math.abs(S.top-t),T>e&&(T=e,f=E)}var S=n[n.length-1],e;return this.orientation===0?e=Math.abs(S.right-s):e=Math.abs(S.bottom-t),T>e&&(T=e,f=E+1),f};const IsPlainObject$j=Phaser.Utils.Objects.IsPlainObject,GetValue$1I=Phaser.Utils.Objects.GetValue,ALIGN_CENTER$2=Phaser.Display.Align.CENTER,PROPORTIONMODE={min:0,full:-1};var Add$6=function(s,t,n,f,T,E,h,S,e,d){AddChild$1.call(this,s);var y=s.isRexSpace,c=typeof t;if(t===null)return this;if(c!=="number"){if(c==="string")t=PROPORTIONMODE[t];else if(IsPlainObject$j(t)){var u=t;t=GetValue$1I(u,"proportion",void 0),n=GetValue$1I(u,"align",ALIGN_CENTER$2),f=GetValue$1I(u,"padding",0),T=GetValue$1I(u,"expand",!1),E=GetValue$1I(u,"key",void 0),h=GetValue$1I(u,"index",void 0),s.isRexSizer||(S=GetValue$1I(u,"minWidth",void 0),e=GetValue$1I(u,"minHeight",void 0)),d=GetValue$1I(u,"fitRatio",0)}}typeof n=="string"&&(n=AlignConst[n]),t===void 0&&(t=y?1:0),n===void 0&&(n=ALIGN_CENTER$2),f===void 0&&(f=0),T===void 0&&(T=!1),S===void 0&&(y?S=0:s.isRexSizer||(S=s._minWidth)),e===void 0&&(y?e=0:s.isRexSizer||(e=s._minHeight)),d===void 0&&(d=0);var u=this.getSizerConfig(s);return u.proportion=t,u.align=n,u.padding=GetBoundsConfig(f),u.expand=T,u.fitRatio=t===0?d:0,h===void 0||h>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(h,0,s),s.isRexSizer||(t>0&&(this.orientation===0?s.minWidth=S===void 0?GetDisplayWidth(s):S:s.minHeight=e===void 0?GetDisplayHeight(s):e),T&&(this.orientation===0?s.minHeight=e:s.minWidth=S)),E!==void 0&&this.addChildrenMap(E,s),this};const AddChildMethods$6={add:Add$6,addSpace(s){return this.insertSpace(void 0,s),this},insertSpace(s,t){return t===void 0&&(t=1),Add$6.call(this,new Space(this.scene),{proportion:t,minWidth:0,minHeight:0,index:s}),this},insert(s,t,n,f,T,E,h,S){return IsPlainObject$j(n)&&(n.index=s),Add$6.call(this,t,n,f,T,E,h,s,S),this},insertAtPosition(s,t,n,f,T,E,h,S,e){var d=GetNearestChildIndex$1.call(this,s,t);return d===-1&&(d=void 0),this.insert(d,n,f,T,E,h,S,e),this}},RemoveItem$2=Phaser.Utils.Array.Remove,RemoveChildMethods$5={remove(s,t){return this.getParentSizer(s)!==this?this:(RemoveItem$2(this.sizerChildren,s),RemoveChild.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,ClearChildren.call(this,s),this}},AlignMethods={getChildAlign(s){return this.getSizerConfig(s).align},setChildAlign(s,t){return typeof t=="string"&&(t=AlignConst[t]),this.getSizerConfig(s).align=t,this}},ProportionMethods={getChildProportion(s){return this.getSizerConfig(s).proportion},setChildProportion(s,t){return this.getSizerConfig(s).proportion=t,this}},ExpandMethods$1={getChildExpand(s){return this.getSizerConfig(s).expand},setChildExpand(s,t){return this.getSizerConfig(s).expand=t,this}};var methods$k={getChildrenWidth:GetChildrenWidth$3,getChildrenHeight:GetChildrenHeight$3,getExpandedChildWidth:GetExpandedChildWidth$1,getExpandedChildHeight:GetExpandedChildHeight$1,getChildrenSizers:GetChildrenSizers$3,preLayout:PreLayout$3,postResolveSize:PostResolveSize,layoutChildren:LayoutChildren$4,resolveWidth:ResolveWidth$1,resolveHeight:ResolveHeight$1};Object.assign(methods$k,AddChildMethods$6,RemoveChildMethods$5,AlignMethods,ProportionMethods,ExpandMethods$1);var GetChildrenProportion=function(){for(var s=0,t=this.sizerChildren,n,f,T=0,E=t.length;T<E;T++)n=t[T],!n.rexSizer.hidden&&(f=n.rexSizer.proportion,f>0&&(s+=f));return s},OrientationMode={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},GetOrientationMode=function(s){return typeof s=="string"&&(s=OrientationMode[s]),s};const IsPlainObject$i=Phaser.Utils.Objects.IsPlainObject,GetValue$1H=Phaser.Utils.Objects.GetValue;class Sizer extends Base{constructor(t,n,f,T,E,h,S){IsPlainObject$i(n)?(S=n,n=GetValue$1H(S,"x",0),f=GetValue$1H(S,"y",0),T=GetValue$1H(S,"width",void 0),E=GetValue$1H(S,"height",void 0),h=GetValue$1H(S,"orientation",0)):IsPlainObject$i(T)?(S=T,T=GetValue$1H(S,"width",void 0),E=GetValue$1H(S,"height",void 0),h=GetValue$1H(S,"orientation",0)):IsPlainObject$i(h)&&(S=h,h=GetValue$1H(S,"orientation",0)),h===void 0&&(h=0),super(t,n,f,T,E,S),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(h),this.setItemSpacing(GetValue$1H(S,"space.item",0)),this.setStartChildIndex(GetValue$1H(S,"startChildIndex",0)),this.setRTL(GetValue$1H(S,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=GetOrientationMode(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=GetChildrenProportion.call(this)),this._childrenProportion}}Object.assign(Sizer.prototype,methods$k);var SetDisplaySize=function(s,t,n){if(s){var f=t==null,T=n==null;return f&&T||(f||(s.displayWidth=t),T||(s.displayHeight=n),f&&(s.scaleX=s.scaleY),T&&(s.scaleY=s.scaleX)),s}},ResetDisplayContent$1=function(s){s===void 0?s={}:typeof s=="string"&&(s={text:s});var t=s.text||"";this.setText(t);var n=this.childrenMap.icon;if(n){s.icon?this.show(n):this.hide(n);var f=s.iconSize;f&&(this.setChildDisplaySize(n,f,f),this.iconWidth!==void 0&&this.setIconSize(f)),s.icon!==!0&&this.setIconTexture(s.icon,s.iconFrame)}var T=this.childrenMap.action;if(T){s.action?this.show(T):this.hide(T);var E=s.actionSize;E&&(this.setChildDisplaySize(T,E,E),this.actionWidth!==void 0&&this.setActionSize(E)),s.action!==!0&&this.setActionTexture(s.action,s.actionFrame)}return this},methods$j={appendText:AppendText$1,resetDisplayContent:ResetDisplayContent$1};class LabelBase extends Sizer{get text(){var t=this.childrenMap.text;return t?t.text:""}set text(t){var n=this.childrenMap.text;n&&n.setText(t)}setText(t){return this.text=t,this}setIconTexture(t,n){var f=this.childrenMap.icon;return f?(f.setTexture(t,n),this.iconWidth!==void 0&&this.iconHeight!==void 0&&(SetDisplaySize(f,this.iconWidth,this.iconHeight),this.resetChildScaleState(f)),this):this}setTexture(t,n){return this.setIconTexture(t,n),this}setIconSize(t,n){return n===void 0&&(n=t),this.iconWidth=t,this.iconHeight=n,this}get texture(){var t=this.childrenMap.icon;if(t)return t.texture}get frame(){var t=this.childrenMap.icon;if(t)return t.frame}setActionTexture(t,n){var f=this.childrenMap.action;return f===void 0?this:(f.setTexture(t,n),this.actionWidth!==void 0&&this.actionHeight!==void 0&&(SetDisplaySize(f,this.actionWidth,this.actionHeight),this.resetChildScaleState(f)),this)}get actionTexture(){var t=this.childrenMap.action;if(t)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t)return t.frame}setActionSize(t,n){return n===void 0&&(n=t),this.actionWidth=t,this.actionHeight=n,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&this.iconHeight!==void 0&&SetDisplaySize(t,this.iconWidth,this.iconHeight);var n=this.childrenMap.action;n&&this.actionWidth!==void 0&&this.actionHeight!==void 0&&SetDisplaySize(n,this.actionWidth,this.actionHeight),super.preLayout()}postLayout(t,n,f){var T=this.childrenMap.iconMask;T&&(T.setPosition(),this.resetChildPositionState(T));var E=this.childrenMap.actionMask;return E&&(E.setPosition(),this.resetChildPositionState(E)),this}resize(t,n){super.resize(t,n);var f=this.childrenMap.iconMask;f&&f.resize();var T=this.childrenMap.actionMask;return T&&T.resize(),this}}Object.assign(LabelBase.prototype,methods$j);var AddChildMask=function(s,t,n,f){var T=new DefaultMaskGraphics(t,n,f);if(s&&!s.isRexSizer){var E=T.createGeometryMask();s.setMask(E),this.once("destroy",function(){s.setMask(),E.destroy()})}return this.pin(T),T};const GetValue$1G=Phaser.Utils.Objects.GetValue;class Label extends LabelBase{constructor(t,n){super(t,n),this.type="rexLabel";var f=GetValue$1G(n,"background",void 0),T=GetValue$1G(n,"icon",void 0),E=GetValue$1G(n,"iconMask",void 0),h=GetValue$1G(n,"text",void 0),S=GetValue$1G(n,"action",void 0),e=GetValue$1G(n,"actionMask",void 0),d=GetValue$1G(n,"align",void 0);if(f&&this.addBackground(f),(d==="right"||d==="bottom"||d==="center")&&this.addSpace(),T){var y;this.orientation===0?(h||S)&&(y={right:GetValue$1G(n,"space.icon",0),top:GetValue$1G(n,"space.iconTop",0),bottom:GetValue$1G(n,"space.iconBottom",0),left:GetValue$1G(n,"space.iconLeft",0)}):(h||S)&&(y={bottom:GetValue$1G(n,"space.icon",0),left:GetValue$1G(n,"space.iconLeft",0),right:GetValue$1G(n,"space.iconRight",0),top:GetValue$1G(n,"space.iconTop",0)});var c=GetValue$1G(n,"squareFitIcon",!1)?1:0;if(this.add(T,{proportion:0,padding:y,fitRatio:c}),E&&(E=AddChildMask.call(this,T,T,1)),!c){var u=GetValue$1G(n,"iconSize",void 0);this.setIconSize(GetValue$1G(n,"iconWidth",u),GetValue$1G(n,"iconHeight",u))}}if(h){var l=GetValue$1G(n,"space.text",0),r=GetValue$1G(n,"expandTextWidth",!1),a=GetValue$1G(n,"expandTextHeight",!1),v,y,o;this.orientation===0?(v=r?1:0,S&&(y={right:l}),o=a):(v=a?1:0,S&&(y={bottom:l}),o=r),this.add(h,{proportion:v,expand:o,padding:y})}if(S){var y;this.orientation===0?y={top:GetValue$1G(n,"space.actionTop",0),bottom:GetValue$1G(n,"space.actionBottom",0),right:GetValue$1G(n,"space.actionRight",0)}:y={left:GetValue$1G(n,"space.actionLeft",0),right:GetValue$1G(n,"space.actionRight",0),bottom:GetValue$1G(n,"space.actionBottom",0)};var c=GetValue$1G(n,"squareFitAction",!1)?1:0;if(this.add(S,{proportion:0,padding:y,fitRatio:c}),e&&(e=AddChildMask.call(this,S,S,1)),!c){var p=GetValue$1G(n,"actionSize");this.setActionSize(GetValue$1G(n,"actionWidth",p),GetValue$1G(n,"actionHeight",p))}}d==="center"&&this.addSpace(),this.addChildrenMap("background",f),this.addChildrenMap("icon",T),this.addChildrenMap("iconMask",E),this.addChildrenMap("text",h),this.addChildrenMap("action",S),this.addChildrenMap("actionMask",e)}}const GetValue$1F=Phaser.Utils.Objects.GetValue;var CreateCanvas=function(s,t){var n=GetValue$1F(t,"canvas"),f=GetValue$1F(n,"width",128),T=GetValue$1F(n,"height",128),E=new Canvas(s,0,0,f,T);s.add.existing(E);var h=GetValue$1F(n,"key"),S=GetValue$1F(n,"frame"),e=GetValue$1F(n,"fill");return e!==void 0?E.fill(e):h!==void 0&&E.loadTexture(h,S),E.setTexture=E.loadTexture.bind(E),E},CreateImageBox=function(s,t){var n=new ImageBox(s,{scaleUp:GetValue$1F(t,"scaleUpIcon",!1),background:GetValue$1F(t,"iconBackground"),image:CreateCanvas(s,t)});return s.add.existing(n),n};const GetValue$1E=Phaser.Utils.Objects.GetValue;var GetClickTarget=function(s,t){var n=GetValue$1E(t,"clickTarget",this);return typeof n=="string"&&(n=s.getElement(n)),n};const GetValue$1D=Phaser.Utils.Objects.GetValue;var CreateClickBehavior=function(s,t){var n=GetClickTarget(s,t);if(n){var f=GetValue$1D(t,"click"),T=new Button(n,f);return T.on("click",s.open,s),T}};const Config={accept:"image/*",multiple:!1};var OnSelectFile=function(s,t){if(t.length!==0){var n=s.childrenMap.icon,f=n.image,T=t[0];return f.loadFromFilePromise(T).then(function(){return n.scaleImage(),s.emit("select",T,s),Promise.resolve(T)})}},CreateFileChooser=function(s,t){var n=s.scene,f=new FileChooser(n,Config);return n.add.existing(f),s.pin(f),f.on("change",function(){OnSelectFile(s,f.files)}),f};const OpenMethods={async openPromise(){var s=this;return Open$1(this.scene.game,Config).then(function(t){return OnSelectFile(s,t.files)})},open(){return this.openPromise(),this},setClickOpenEnable(s){return s===void 0&&(s=!0),this.clickBehavior&&this.clickBehavior.setEnable(s),this.fileChooser&&this.fileChooser.setOpenEnable(s),this}};var GetFileName=function(s){if(!s)return null;var t=s.name;return t.substr(0,t.lastIndexOf("."))},SaveTexture=function(s){var t=this.childrenMap.canvas;return t.generateTexture(s),this},methods$i={getFileName:GetFileName,saveTexture:SaveTexture};Object.assign(methods$i,OpenMethods);const GetValue$1C=Phaser.Utils.Objects.GetValue;class ImageInputLabel extends Label{constructor(t,n){var f=CreateImageBox(t,n);n.icon=f,super(t,n),this.type="rexImageFileInputLabel";var T=this.iconWidth,E=this.iconWidth;T!==void 0&&E!==void 0&&f.resize(T,E),this.clickTarget=GetClickTarget(this,n),this.clickTarget&&(GetValue$1C(n,"domButton",!0)?this.fileChooser=CreateFileChooser(this):this.clickBehavior=CreateClickBehavior(this,n)),this.addChildrenMap("canvas",f.image),this.addChildrenMap("iconBackground",f.background),this.addChildrenMap("fileChooser",this.fileChooser)}postLayout(){this.fileChooser&&(this.fileChooser.syncTo(this.clickTarget),this.resetChildState(this.fileChooser))}}Object.assign(ImageInputLabel.prototype,methods$i);ObjectFactory.register("imageInputLabel",function(s){var t=new ImageInputLabel(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.ImageInputLabel",ImageInputLabel);let Style$1=class extends ComponentBase{constructor(t,n){return super(t),new Proxy(this,this)}get(t,n){if(HasProperty(t,n))return t[n];var f=t.parent;if(HasProperty(f,n))return f[n]}set(t,n,f){return HasProperty(t,n)?t[n]=f:HasProperty(t.parent,n)&&(t.parent[n]=f),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.parent.setFrame(t)}get scale(){return this.parent.scaleX}set scale(t){this.parent.setScale(t)}};const GetValue$1B=Phaser.Utils.Objects.GetValue;class StyleManager extends ComponentBase{constructor(t,n){super(t,n),this.style=GetValue$1B(n,"style",this);var f=GetValue$1B(n,"propertiesMap");this.activeStyle=ExtractStyle(n,"active",f),this.hoverStyle=ExtractStyle(n,"hover",f),this.disableStyle=ExtractStyle(n,"disable",f),this.onModifyStyle=GetValue$1B(n,"onModifyStyle")}getStyle(t){return GetPartialData(this.style,t)}modifyStyle(t){for(var n in t)this.style[n]=t[n];return this.onModifyStyle&&this.onModifyStyle(this.parent,t),this}applyStyle(t){if(t){var n=this.getStyle(t);if(!IsKeyValueEqual(n,t))return this.modifyStyle(t),n}}setActiveState(t){return SetStateEnableMethod.call(this,"active",t),this}setHoverState(t){return SetStateEnableMethod.call(this,"hover",t),this}setDisableState(t){return SetStateEnableMethod.call(this,"disable",t),this}}var ExtractStyle=function(s,t,n){var f=ExtractByPrefix(s,t);if(n)for(var T in f)n.hasOwnProperty(T)&&(f[n[T]]=f[T],delete f[T]);return f},SetStateEnableMethod=function(s,t){t===void 0&&(t=!0);var n=`${s}State`,f=`${s}Style`,T=`${s}StyleSave`;this[n]!==t&&(this[n]=t,t?this[T]=this.applyStyle(this[f]):(this.applyStyle(this[T]),this[T]=void 0))};const HelperMethods={addStyleManager(s){return this.styleManager=new StyleManager(this,s),this},setActiveState(s){return this.styleManager.setActiveState(s),this},setHoverState(s){return this.styleManager.setHoverState(s),this},setDisableState(s){return this.styleManager.setDisableState(s),this}},PhaserImage=Phaser.GameObjects.Image,GetValue$1A=Phaser.Utils.Objects.GetValue;class StatesImage extends PhaserImage{constructor(t,n){n===void 0&&(n={});var f=GetValue$1A(n,"x",0),T=GetValue$1A(n,"y",0),E=GetValue$1A(n,"key",""),h=GetValue$1A(n,"frame",void 0);super(t,f,T,E,h),this.type="rexStatesImage";var S=GetValue$1A(n,"effects",!0);S&&AddEffectProperties(this,S),this.style=new Style$1(this,n),n.style=this.style,this.addStyleManager(n),delete n.style}}Object.assign(StatesImage.prototype,HelperMethods);ObjectFactory.register("statesImage",function(s){var t=new StatesImage(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.StatesImage",StatesImage);class StatesRoundRectangle extends RoundRectangle$2{constructor(t,n){n===void 0&&(n={}),super(t,n),this.type="rexStatesRoundRectangleShape",n.style=this,n.propertiesMap=PropertiesMap,this.addStyleManager(n),delete n.style,delete n.propertiesMap}}const PropertiesMap={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(StatesRoundRectangle.prototype,HelperMethods);ObjectFactory.register("statesRoundRectangle",function(s){var t=new StatesRoundRectangle(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.StatesRoundRectangle",StatesRoundRectangle);class Style extends ComponentBase{constructor(t,n){return super(t),new Proxy(this,this)}get(t,n){if(HasProperty(t,n))return t[n];var f=t.parent;if(HasProperty(f,n))return f[n]}set(t,n,f){return HasProperty(t,n)?t[n]=f:HasProperty(t.parent,n)&&(t.parent[n]=f),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.parent.setFrame(t)}get leftWidth(){return this.parent.leftWidth}set leftWidth(t){var n=this.parent;parent.setSlices(n.width,n.height,t,n.rightWidth,n.topHeight,n.bottomHeight)}get rightWidth(){return this.parent.rightWidth}set rightWidth(t){var n=this.parent;parent.setSlices(n.width,n.height,n.leftWidth,t,n.topHeight,n.bottomHeight)}get topHeight(){return this.parent.topHeight}set topHeight(t){var n=this.parent;parent.setSlices(n.width,n.height,n.leftWidth,n.rightWidth,t,n.bottomHeight)}get bottomHeight(){return this.parent.bottomHeight}set bottomHeight(t){var n=this.parent;parent.setSlices(n.width,n.height,n.leftWidth,n.rightWidth,n.topHeight,t)}}const PhaserNineSlice=Phaser.GameObjects.NineSlice,GetValue$1z=Phaser.Utils.Objects.GetValue;class StatesNineSlice extends PhaserNineSlice{constructor(t,n){n===void 0&&(n={});var f=GetValue$1z(n,"x",0),T=GetValue$1z(n,"y",0),E=GetValue$1z(n,"key",null),h=GetValue$1z(n,"frame",null),S=GetValue$1z(n,"width",0),e=GetValue$1z(n,"height",0),d=GetValue$1z(n,"leftWidth",0),y=GetValue$1z(n,"rightWidth",0),c=GetValue$1z(n,"topHeight",0),u=GetValue$1z(n,"bottomHeight",0);super(t,f,T,E,h,S,e,d,y,c,u),this.type="rexStatesNineSlice";var l=GetValue$1z(n,"effects",!0);l&&AddEffectProperties(this,l),this.style=new Style(this,n),n.style=this.style,this.addStyleManager(n),delete n.style}}Object.assign(StatesNineSlice.prototype,HelperMethods);ObjectFactory.register("statesNineSlice",function(s){var t=new StatesNineSlice(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.StatesNineSlice",StatesNineSlice);const PhaserText=Phaser.GameObjects.Text,GetValue$1y=Phaser.Utils.Objects.GetValue;class StatesText extends PhaserText{constructor(t,n){n===void 0&&(n={});var f=GetValue$1y(n,"x",0),T=GetValue$1y(n,"y",0),E=GetValue$1y(n,"text","");super(t,f,T,E,n),this.type="rexStatesText",n.style=this.style,n.onModifyStyle=function(h,S){var e=S.hasOwnProperty("fontStyle")||S.hasOwnProperty("fontSize")||S.hasOwnProperty("fontFamily");h.style.update(e)},this.addStyleManager(n),delete n.style}}Object.assign(StatesText.prototype,HelperMethods);ObjectFactory.register("statesText",function(s){var t=new StatesText(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.StatesText",StatesText);var SetChart=function(s){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,FillConfig(this,s)),this},FillConfig=function(s,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var n=t.options;n.responsive=!1,n.maintainAspectRatio=!1,n.hasOwnProperty("devicePixelRatio")||(n.devicePixelRatio=1);var f=!1;n.animation===void 0?n.animation={}:n.animation===!1&&(f=!0,n.animation={});var T=n.animation;f&&(T.duration=0);var E=T.onProgress;T.onProgress=function(S){E&&E(S),s.needRedraw()};var h=T.onComplete;return T.onComplete=function(S){h&&h(S),s.needRedraw()},t},GetChartDataset=function(s){if(this.chart!==void 0)if(typeof s=="string"){for(var t=this.chart.data.datasets,n,f=0,T=t.length;f<T;f++)if(n=t[f],n.label===s)return n}else return this.chart.data.datasets[s]},GetChartData=function(s,t){var n=this.getChartDataset(s);if(n!==void 0){if(typeof t=="string"){var f=this.chart.data.labels;if(t=f.indexOf(t),t===-1)return}return n.data[t]}},SetChartData=function(s,t,n){if(this.chart===void 0)return this;var f=this.getChartDataset(s);if(typeof t=="string"){var T=this.chart.data.labels;if(t=T.indexOf(t),t===-1)return this}return f.data[t]=n,this},UpdateChart=function(){return this.chart===void 0?this:(this.chart.update(),this)};let Chart$1=class extends Canvas{constructor(t,n,f,T,E,h){super(t,n,f,T,E),this.type="rexChart",this.chart=void 0,h!==void 0&&this.setChart(h)}destroy(t){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,n){if(t===this.width&&n===this.height)return this;if(super.resize(t,n),this.chart){var f=this.chart;f.height=this.canvas.height,f.width=this.canvas.width,f.aspectRatio=f.height?f.width/f.height:null,f.update()}return this}};var methods$h={setChart:SetChart,getChartDataset:GetChartDataset,getChartData:GetChartData,setChartData:SetChartData,updateChart:UpdateChart};Object.assign(Chart$1.prototype,methods$h);ObjectFactory.register("chart",function(s,t,n,f,T){var E=new Chart$1(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.Chart",Chart$1);ObjectFactory.register("container",function(s,t,n,f,T){var E=new ContainerLite(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.Container",ContainerLite);ObjectFactory.register("sizer",function(s,t,n,f,T,E){var h=new Sizer(this.scene,s,t,n,f,T,E);return this.scene.add.existing(h),h});SetValue(window,"RexPlugins.UI.Sizer",Sizer);var Sum=function(){return Array.prototype.reduce.call(arguments,Add$5,0)},Add$5=function(s,t){return s+t},GetChildrenWidth$2=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,n,f=this.sizerChildren,T,E,h,S,e=0;e<this.columnCount;e++){if(S=this.columnProportions[e],n=0,S===0||s){for(var d=0;d<this.rowCount;d++)T=f[d*this.columnCount+e],T&&(T.rexSizer.hidden||(E=T.rexSizer.padding,h=this.getChildWidth(T)+E.left+E.right,n=Math.max(n,h)));t+=n}this.columnWidth[e]=n}var y=this.space,c=Math.max(y.indentLeftOdd,y.indentLeftEven);return t+Sum(y.left,c,...y.column,y.right)},GetChildrenHeight$2=function(s){if(this.rexSizer.hidden)return 0;s===void 0&&(s=!0);for(var t=0,n,f=this.sizerChildren,T,E,h,S,e=0;e<this.rowCount;e++){if(S=this.rowProportions[e],n=0,S===0||s){for(var d=0;d<this.columnCount;d++)T=f[e*this.columnCount+d],T&&(T.rexSizer.hidden||(h=T.isRexSizer?Math.max(T.minHeight,T.childrenHeight):T.hasOwnProperty("minHeight")?T.minHeight:GetDisplayHeight(T),E=T.rexSizer.padding,h+=E.top+E.bottom,n=Math.max(n,h)));t+=n}this.rowHeight[e]=n}var y=this.space,c=Math.max(y.indentTopOdd,y.indentTopEven);return t+Sum(y.top,c,...y.row,y.bottom)},GetExpandedChildWidth=function(s,t){var n,f=s.rexSizer;if(f.expandWidth){var T=f.padding;n=t-T.left-T.right}return n},GetExpandedChildHeight=function(s,t){var n,f=s.rexSizer;if(f.expandHeight){var T=f.padding;n=t-T.top-T.bottom}return n},GetChildrenSizers$2=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,n,f=0,T=t.length;f<T;f++)n=t[f],n&&n.isRexSizer&&s.push(n);return s},PreLayout$2=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,PreLayout$4.call(this),this},LayoutChildren$3=function(){for(var s,t,n,f=this.innerLeft,T=this.innerTop,E,h=T,S,e,d,y,c,u,l=this.space.column,r=this.space.row,a=this.space.indentLeftOdd,v=this.space.indentLeftEven,o=this.space.indentTopOdd,p=this.space.indentTopEven,m,g,x,C,M=0;M<this.rowCount;M++){g=this.getRowHeight(M),x=M%2?v:a,E=f+x;for(var R=0;R<this.columnCount;R++){if(m=this.getColumnWidth(R),s=this.getChildAt(R,M),!s||s.rexSizer.hidden){E+=m+l[R];continue}PreLayoutChild.call(this,s),c=this.getExpandedChildWidth(s,m),u=this.getExpandedChildHeight(s,g),s.isRexSizer?(s.runLayout(this,c,u),CheckSize(s,this)):ResizeGameObject(s,c,u),t=s.rexSizer,n=t.padding,S=E+n.left,d=m-n.left-n.right,C=R%2?p:o,e=h+C+n.top,y=g-n.top-n.bottom,LayoutChild.call(this,s,S,e,d,y,t.align),E+=m+l[R]}h+=g+r[M]}},ResolveWidth=function(t){var t=ResolveWidth$2.call(this,t);if(this.proportionWidthLength===void 0){var n=this.totalColumnProportions;if(n>0){var f=t-this.getChildrenWidth(!1);f>=0&&(this.proportionWidthLength=f/n)}else this.proportionWidthLength=0}return t},ResolveHeight=function(t){var t=ResolveHeight$2.call(this,t);if(this.proportionHeightLength===void 0){var n=this.totalRowProportions;if(n>0){var f=t-this.getChildrenHeight(!1);f>=0&&(this.proportionHeightLength=f/n)}else this.proportionHeightLength=0}return t},ResolveChildrenWidth=function(s){var t,n,f;for(var T in this.sizerChildren)t=this.sizerChildren[T],t&&t.isRexSizer&&!t.ignoreLayout&&(f=this.getColumnWidth(parseInt(T)%this.columnCount),n=this.getExpandedChildWidth(t,f),n=t.resolveWidth(n),t.resolveChildrenWidth(n))},RunWidthWrap$1=function(s){var t,n,f;for(var T in this.sizerChildren)t=this.sizerChildren[T],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(f=this.getColumnWidth(parseInt(T)%this.columnCount),n=this.getExpandedChildWidth(t,f),t.isRexSizer&&(n=t.resolveWidth(n)),t.runWidthWrap(n));return this};const IsPlainObject$h=Phaser.Utils.Objects.IsPlainObject,GetValue$1x=Phaser.Utils.Objects.GetValue,ALIGN_CENTER$1=Phaser.Display.Align.CENTER;var GetEmptyCellIndex=function(s,t,n,f,T){if(typeof s=="number"||typeof t=="number")if(s===void 0){for(var E,h=0;h<f;h++)if(E=t*f+h,!n[E])return E}else if(t===void 0){for(var E,h=0;h<T;h++)if(E=h*f+s,!n[E])return E}else{var E=t*f+s;if(!n[E])return E}else if(t===!0){for(var E,h=0;h<f;h++)for(var S=0;S<T;S++)if(E=S*f+h,!n[E])return E}else for(var h=0,e=n.length;h<e;h++)if(!n[h])return h;return null},Add$4=function(s,t,n,f,T,E,h){if(AddChild$1.call(this,s),IsPlainObject$h(t)){var e=t;t=GetValue$1x(e,"column",void 0),n=GetValue$1x(e,"row",void 0),f=GetValue$1x(e,"align",ALIGN_CENTER$1),T=GetValue$1x(e,"padding",0),E=GetValue$1x(e,"expand",!1),h=GetValue$1x(e,"key",void 0)}var S=GetEmptyCellIndex(t,n,this.sizerChildren,this.columnCount,this.rowCount);if(S===null){if(typeof t=="number"&&typeof n=="number")return this;n===!0||typeof n=="number"?this.addEmptyColumn():this.addEmptyRow(),S=GetEmptyCellIndex(t,n,this.sizerChildren,this.columnCount,this.rowCount)}typeof f=="string"&&(f=AlignConst[f]),f===void 0&&(f=ALIGN_CENTER$1),T===void 0&&(T=0),E===void 0&&(E=!0);var e=this.getSizerConfig(s);return e.align=f,e.padding=GetBoundsConfig(T),IsPlainObject$h(E)?(e.expandWidth=GetValue$1x(E,"width",!1),e.expandHeight=GetValue$1x(E,"height",!1)):(e.expandWidth=E,e.expandHeight=E),this.sizerChildren[S]=s,h!==void 0&&this.addChildrenMap(h,s),this};const AddChildMethods$5={add:Add$4};var Fill=function(s,t,n,f){n===void 0&&(n=0),f===void 0&&(f=s.length-1);for(var T=n;T<=f;T++)s[T]=t;return s};const RemoveChildMethods$4={remove(s,t){if(this.getParentSizer(s)!==this)return this;var n=this.sizerChildren.indexOf(s);return n!==-1&&(this.sizerChildren[n]=null),RemoveChild.call(this,s,t),this},removeAt(s,t,n){var f=this.getChildAt(s,t);return f&&this.remove(f,n),this},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--){var n=this.sizerChildren[t];n&&this.remove(n,s)}return this},clear(s){return Fill(this.sizerChildren,null),ClearChildren.call(this,s),this}},SetSpaceMethods={setColumnSpace(s){if(this.space.column||(this.space.column=[]),this.space.column.length=this.columnCount-1,typeof s=="number")Fill(this.space.column,s);else for(var t=0,n=this.columnCount-1;t<n;t++)this.space.column[t]=s[t]||0;return this},setRowSpace(s){if(this.space.row||(this.space.row=[]),this.space.row.length=this.rowCount-1,typeof s=="number")Fill(this.space.row,s);else for(var t=0,n=this.rowCount-1;t<n;t++)this.space.row[t]=s[t]||0;return this},setIndentLeft(s,t){return this.space.indentLeftOdd=s,this.space.indentLeftEven=t,this},setIndentTop(s,t){return this.space.indentTopOdd=s,this.space.indentTopEven=t,this}},GetValue$1w=Phaser.Utils.Objects.GetValue;var ResetGrid=function(s,t,n,f,T){if(n===void 0&&(n=0),f===void 0&&(f=0),this.columnCount=s,this.rowCount=t,this.gridCount=s*t,this.removeAll(),this.sizerChildren.length=s*t,Fill(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=s,typeof n=="number")Fill(this.columnProportions,n);else for(var E=0;E<s;E++)this.columnProportions[E]=n[E]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof f=="number")Fill(this.rowProportions,f);else for(var E=0;E<t;E++)this.rowProportions[E]=f[E]||0;this.columnWidth=[],this.columnWidth.length=s,this.rowHeight=[],this.rowHeight.length=t,this.setColumnSpace(GetValue$1w(T,"column",0)),this.setRowSpace(GetValue$1w(T,"row",0));var h=this.scene,S=this.createCellContainerCallback;if(S)for(var e=0,d=this.rowCount;e<d;e++)for(var y=0,c=this.columnCount;y<c;y++){var u={column:y,row:e},l=S(h,y,e,u);l&&this.add(l,u)}return this},InseryEmptyRow=function(s,t,n){t===void 0&&(t=this.rowProportions[0]||0),n===void 0&&(n=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var f=[s*this.columnCount,0],T=0;T<this.columnCount;T++)f.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,f),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(s,0,n),this},AddEmptyRow=function(s,t){return InseryEmptyRow.call(this,this.rowCount,s,t),this},InsertEmptyColumn=function(s,t,n){t===void 0&&(t=this.columnProportions[0]||0),n===void 0&&(n=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var f=this.rowCount-1;f>=0;f--){var T=f*this.columnCount+s;this.sizerChildren.splice(T,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(s,0,n),this},AddEmptyColumn=function(s,t){return InsertEmptyColumn.call(this,this.columnCount,s,t),this},methods$g={getChildrenWidth:GetChildrenWidth$2,getChildrenHeight:GetChildrenHeight$2,getExpandedChildWidth:GetExpandedChildWidth,getExpandedChildHeight:GetExpandedChildHeight,getChildrenSizers:GetChildrenSizers$2,preLayout:PreLayout$2,layoutChildren:LayoutChildren$3,resolveWidth:ResolveWidth,resolveHeight:ResolveHeight,resolveChildrenWidth:ResolveChildrenWidth,runWidthWrap:RunWidthWrap$1,resetGrid:ResetGrid,inseryEmptyRow:InseryEmptyRow,addEmptyRow:AddEmptyRow,insertEmptyColumn:InsertEmptyColumn,addEmptyColumn:AddEmptyColumn};Object.assign(methods$g,AddChildMethods$5,RemoveChildMethods$4,SetSpaceMethods);var GetTotalColumnProportions=function(){for(var s=0,t,n=0;n<this.columnCount;n++)t=this.columnProportions[n],t>0&&(s+=t);return s},GetTotalRowProportions=function(){for(var s=0,t,n=0;n<this.rowCount;n++)t=this.rowProportions[n],t>0&&(s+=t);return s};const IsPlainObject$g=Phaser.Utils.Objects.IsPlainObject,GetValue$1v=Phaser.Utils.Objects.GetValue;class GridSizer extends Base{constructor(t,n,f,T,E,h,S,e,d,y){IsPlainObject$g(n)?(y=n,n=GetValue$1v(y,"x",0),f=GetValue$1v(y,"y",0),T=GetValue$1v(y,"width",void 0),E=GetValue$1v(y,"height",void 0),h=GetValue$1v(y,"column",y.col||0),S=GetValue$1v(y,"row",0),e=GetValue$1v(y,"columnProportions",0),d=GetValue$1v(y,"rowProportions",0)):IsPlainObject$g(T)?(y=T,T=GetValue$1v(y,"width",void 0),E=GetValue$1v(y,"height",void 0),h=GetValue$1v(y,"column",y.col||0),S=GetValue$1v(y,"row",0),e=GetValue$1v(y,"columnProportions",0),d=GetValue$1v(y,"rowProportions",0)):IsPlainObject$g(h)?(y=h,h=GetValue$1v(y,"column",y.col||0),S=GetValue$1v(y,"row",0),e=GetValue$1v(y,"columnProportions",0),d=GetValue$1v(y,"rowProportions",0)):IsPlainObject$g(e)&&(y=e,e=GetValue$1v(y,"columnProportions",0),d=GetValue$1v(y,"rowProportions",0)),super(t,n,f,T,E,y),this.type="rexGridSizer",this.sizerChildren=[],this.addChildrenMap("items",this.sizerChildren),this.setCreateCellContainerCallback(GetValue$1v(y,"createCellContainerCallback")),this.setIndentLeft(GetValue$1v(y,"space.indentLeftOdd",0),GetValue$1v(y,"space.indentLeftEven",0)),this.setIndentTop(GetValue$1v(y,"space.indentTopOdd",0),GetValue$1v(y,"space.indentTopEven",0)),this.resetGrid(h,S,e,d,GetValue$1v(y,"space",void 0))}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0,this.createCellContainerCallback=void 0)}setColumnProportion(t,n){return t>=this.columnProportions.length?this:(this.columnProportions[t]=n,this)}setRowProportion(t,n){return t>=this.rowProportions.length?this:(this.rowProportions[t]=n,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=GetTotalColumnProportions.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=GetTotalRowProportions.call(this)),this._totalRowProportions}getChildAt(t,n){return this.sizerChildren[n*this.columnCount+t]}childToGridIndex(t,n){if(!t)return null;var f=this.sizerChildren.indexOf(t);return f===-1?null:(n===void 0&&(n={}),n.x=f%this.columnCount,n.y=Math.floor(f/this.columnCount),n)}getColumnWidth(t){var n=this.columnProportions[t],f=n===0?this.columnWidth[t]:n*this.proportionWidthLength;return f}getRowHeight(t){var n=this.rowProportions[t],f=n===0?this.rowHeight[t]:n*this.proportionHeightLength;return f}setCreateCellContainerCallback(t){return this.createCellContainerCallback=t,this}}Object.assign(GridSizer.prototype,methods$g);ObjectFactory.register("gridSizer",function(s,t,n,f,T,E,h,S,e){var d=new GridSizer(this.scene,s,t,n,f,T,E,h,S,e);return this.scene.add.existing(d),d});SetValue(window,"RexPlugins.UI.GridSizer",GridSizer);var GetChildrenWidth$1=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},GetChildrenHeight$1=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},GetChildrenSizers$1=function(s){s===void 0&&(s=[]);for(var t=this.sizerChildren,n,f=0,T=t.length;f<T;f++)n=t[f],n!==`
`&&n.isRexSizer&&s.push(n);return s},PreLayout$1=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,PreLayout$4.call(this),this},LayoutChildren$2=function(){for(var s=this.innerWidth,t=this.justifyPercentage,n=this.space.item,f=this.space.line,T=this.space.indentLeftOdd,E=this.space.indentLeftEven,h=this.space.indentTopOdd,S=this.space.indentTopEven,e,d,y,c=0,u,l,r=this.innerLeft,a=this.innerTop,v,o,p,m,g=this.widthWrapResult.lines,x,C,M,R,P=a,w=0,A=g.length;w<A;w++){switch(x=g[w],C=x.children,this.rtl&&C.reverse(),u=w%2?E:T,R=r+u,M=s-x.width,this.align){case 0:break;case 1:R+=M;break;case 2:R+=M/2;break;case 3:c=GetJustifySpace(s,M,t,C.length);break;case 4:c=GetJustifySpace(s,M,t,C.length),c===0&&(R+=M);break;case 5:c=GetJustifySpace(s,M,t,C.length),c===0&&(R+=M/2);break}for(var G=!0,O=0,L=C.length;O<L;O++)e=C[O],!e.rexSizer.hidden&&(d=e.rexSizer,y=d.padding,PreLayoutChild.call(this,e),v=R+y.left,G?G=!1:v+=n,l=O%2?S:h,o=P+l+y.top,p=GetDisplayWidth(e),m=GetDisplayHeight(e),R=v+p+y.right+c,LayoutChild.call(this,e,v,o,p,m,d.align));P+=x.height+f}},GetJustifySpace=function(s,t,n,f){return t/s<=n?t/(f-1):0},RunChildrenWrap=function(s,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var n=this.sizerChildren,f=this.space.item,T=this.space.line,E=this.space.indentLeftOdd,h=this.space.indentLeftEven,S=this.space.indentTopOdd,e=this.space.indentTopEven,d,y,c,u=0,l,r=t.lines,a=void 0,v,o=0,p=n.length;o<p;o++){if(d=n[o],d===`
`)d=void 0,y=0,v=!0;else{if(d.rexSizer.hidden)continue;d.isRexSizer&&d.layout(),y=GetChildWidth(d),v=u<y||a===void 0}if(v){a&&(a.width=s-(u+f),t.width=Math.max(t.width,a.width),t.height+=a.height+T),a={children:[],height:0},r.push(a);var l=r.length%2?E:h;u=s-l}u-=y+f,d&&(a.children.push(d),c=GeChildHeight(d),a.height=Math.max(a.height,c))}return a&&(a.width=s-(u+f),t.width=Math.max(t.width,a.width),t.height+=a.height),t.height+=Math.max(S,e),t},GetChildWidth=function(s){var t=s.rexSizer.padding;return GetDisplayWidth(s)+t.left+t.right},GeChildHeight=function(s){var t=s.rexSizer.padding;return GetDisplayHeight(s)+t.top+t.bottom},RunWidthWrap=function(s){var t=s-this.space.left-this.space.right;this.widthWrapResult=RunChildrenWrap.call(this,t,this.widthWrapResult),RunWidthWrap$2.call(this,s)};const DistanceBetween$1=Phaser.Math.Distance.Between;var GetNearestChildIndex=function(s,t){var n=this.sizerChildren;if(n.length===0)return-1;for(var f=-1,T=1/0,E=0,h=n.length;E<h;E++){var S=n[E];if(!(Math.abs(S.centerY-t)>S.height/2)){var d=DistanceBetween$1(S.left,S.centerY,s,t);T>d&&(T=d,f=E);var e=n[E+1];if(!(e&&e.y===S.y)){var d=DistanceBetween$1(S.right,S.centerY,s,t);T>d&&(T=d,f=E+1)}}}return f};const IsPlainObject$f=Phaser.Utils.Objects.IsPlainObject,GetValue$1u=Phaser.Utils.Objects.GetValue,ALIGN_CENTER=Phaser.Display.Align.CENTER;var Add$3=function(s,t,n,f){if(s===`
`)return this.addNewLine(),this;if(AddChild$1.call(this,s),IsPlainObject$f(t)){var T=t;t=GetValue$1u(T,"padding",0),n=GetValue$1u(T,"key",void 0),f=GetValue$1u(T,"index",void 0)}t===void 0&&(t=0);var T=this.getSizerConfig(s);return T.align=ALIGN_CENTER,T.padding=GetBoundsConfig(t),f===void 0||f>=this.sizerChildren.length?this.sizerChildren.push(s):this.sizerChildren.splice(f,0,s),n!==void 0&&this.addChildrenMap(n,s),this};const AddChildMethods$4={add(s,t,n){if(IsArray(s))for(var f=s,T=0,E=f.length;T<E;T++)Add$3.call(this,f[T],t);else Add$3.call(this,s,t,n);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(s,t,n,f){return Add$3.call(this,t,n,f,s),this},insertAtPosition(s,t,n,f,T){var E=GetNearestChildIndex.call(this,s,t);return E===-1&&(E=void 0),this.insert(E,n,f,T),this}},RemoveItem$1=Phaser.Utils.Array.Remove,RemoveChildMethods$3={remove(s,t){return this.getParentSizer(s)!==this?this:(RemoveItem$1(this.sizerChildren,s),RemoveChild.call(this,s,t),this)},removeAll(s){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],s);return this},clear(s){return this.sizerChildren.length=0,ClearChildren.call(this,s),this}};var methods$f={getChildrenWidth:GetChildrenWidth$1,getChildrenHeight:GetChildrenHeight$1,getChildrenSizers:GetChildrenSizers$1,preLayout:PreLayout$1,layoutChildren:LayoutChildren$2,runWidthWrap:RunWidthWrap};Object.assign(methods$f,AddChildMethods$4,RemoveChildMethods$3);var GetMaxChildWidth=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,n,f,T=0,E=s.length;T<E;T++)n=s[T],n!==`
`&&(f=this.getChildWidth(n),t=Math.max(f,t));return t},GetMaxChildHeight=function(s){s===void 0&&(s=this.sizerChildren);for(var t=0,n,f,T=0,E=s.length;T<E;T++)n=s[T],n!==`
`&&(f=n.isRexSizer?Math.max(n.minHeight,n.childrenHeight):n.hasOwnProperty("minHeight")?n.minHeight:GetDisplayHeight(n),t=Math.max(f,t));return t};const IsPlainObject$e=Phaser.Utils.Objects.IsPlainObject,GetValue$1t=Phaser.Utils.Objects.GetValue;class FixWidthSizer extends Base{constructor(t,n,f,T,E,h){IsPlainObject$e(n)?(h=n,n=GetValue$1t(h,"x",0),f=GetValue$1t(h,"y",0),T=GetValue$1t(h,"width",void 0),E=GetValue$1t(h,"height",void 0)):IsPlainObject$e(T)&&(h=T,T=GetValue$1t(h,"width",void 0),E=GetValue$1t(h,"height",void 0)),super(t,n,f,T,E,h),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(GetValue$1t(h,"orientation",0)),this.setItemSpacing(GetValue$1t(h,"space.item",0)),this.setLineSpacing(GetValue$1t(h,"space.line",0)),this.setIntentLeft(GetValue$1t(h,"space.indentLeftOdd",0),GetValue$1t(h,"space.indentLeftEven",0)),this.setIntentTop(GetValue$1t(h,"space.indentTopOdd",0),GetValue$1t(h,"space.indentTopEven",0)),this.setAlign(GetValue$1t(h,"align",0)),this.setJustifyPercentage(GetValue$1t(h,"justifyPercentage",.25)),this.setRTL(GetValue$1t(h,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=GetOrientationMode(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,n){return this.space.indentLeftOdd=t,this.space.indentLeftEven=n,this}setIntentTop(t,n){return this.space.indentTopOdd=t,this.space.indentTopEven=n,this}setAlign(t){return typeof t=="string"&&(t=ALIGN[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=GetMaxChildWidth.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=GetMaxChildHeight.call(this)),this._maxChildHeight}}const ALIGN={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(FixWidthSizer.prototype,methods$f);ObjectFactory.register("fixWidthSizer",function(s,t,n,f,T){var E=new FixWidthSizer(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.FixWidthSizer",FixWidthSizer);ObjectFactory.register("overlapSizer",function(s,t,n,f,T){var E=new OverlapSizer(this.scene,s,t,n,f,T);return this.scene.add.existing(E),E});SetValue(window,"RexPlugins.UI.OverlapSizer",OverlapSizer);ObjectFactory.register("space",function(){var s=new Space(this.scene);return s});SetValue(window,"RexPlugins.UI.Space",Space);ObjectFactory.register("label",function(s){var t=new Label(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Label",Label);var CreateBackground$2=function(s,t){var n;t&&(t.hasOwnProperty("type")?n=t.type:t.hasOwnProperty("leftWidth")?n="nineSlice":t.hasOwnProperty("key")&&(n="image"));var f;switch(n){case"image":f=new StatesImage(s,t);break;case"nineSlice":t.hasOwnProperty("stretchMode")?f=new NinePatch$1(s,t):f=new StatesNineSlice(s,t);break;default:f=new StatesRoundRectangle(s,t);break}return s.add.existing(f),f};const GetValue$1s=Phaser.Utils.Objects.GetValue,PhaserBitmapText=Phaser.GameObjects.BitmapText;var CreateText=function(s,t){var n=GetValue$1s(t,"$type");n===void 0&&GetValue$1s(t,"key")&&(n="bitmaptext");var f;switch(n){case"bitmaptext":case"bitmap":var T=GetValue$1s(t,"key"),E=GetValue$1s(t,"size");E===void 0&&(E=GetValue$1s(t,"fontSize")),f=new PhaserBitmapText(s,0,0,T,"",E);var h=GetValue$1s(t,"color");h!==void 0&&f.setTint(h);break;case"bbcodetext":case"bbcode":f=new BBCodeText(s,0,0,"",t);break;case"text":default:f=new StatesText(s,t);break}return s.add.existing(f),f};const BitmapTextKlass=Phaser.GameObjects.BitmapText;var IsBitmapTextGameObject=function(s){return s instanceof BitmapTextKlass};const TextKlass=Phaser.GameObjects.Text;var IsTextGameObject=function(s){return s instanceof TextKlass},TextRunWidthWrap=function(s){var t=function(n){var f=s.padding,T=n-f.left-f.right,E=s.style;return IsTextGameObject(s)?(E.wordWrapWidth=T,E.maxLines=0):(E.wrapMode===0&&(E.wrapMode=1),E.wrapWidth=T,E.maxLines=0),E.fixedWidth=n,E.fixedHeight=0,s.updateText(),s.minHeight=s.height,s};return t},DynamicTextRunWidthWrap=function(s){var t=function(n){return s.setFixedSize(n,0).runWordWrap(),s.minHeight=s.height,s};return t},BitmapTextRunWidthWrap=function(s){var t=function(n){return s.setMaxWidth(n),s.minHeight=s.height,s};return t},IsDynamicTextGameObject=function(s){return s instanceof DynamicText},WrapExpandText=function(s,t){return t===void 0&&(t=0),s._minWidth=t,s.runWidthWrap=IsDynamicTextGameObject(s)?DynamicTextRunWidthWrap(s):IsBitmapTextGameObject(s)?BitmapTextRunWidthWrap(s):TextRunWidthWrap(s),s},CreateImage=function(s,t){var n=new StatesImage(s,t);return s.add.existing(n),n};const GetValue$1r=Phaser.Utils.Objects.GetValue;var BuildLabelConfig=function(s,t,n){t=t?DeepClone(t):{};var f=GetValue$1r(n,"background",CreateBackground$2),T=GetValue$1r(n,"text",CreateText),E=GetValue$1r(n,"icon",CreateImage),h=GetValue$1r(n,"action",CreateImage);if(f?t.background=f(s,t.background):delete t.background,T){var S=GetValue$1r(t,"wrapText",!1);S&&(S===!0&&(S="word"),SetValue(t,"text.wrap.mode",S),t.expandTextWidth=!0),t.text=T(s,t.text),S&&(t.text=WrapExpandText(t.text))}else delete t.text;return E&&t.icon!==null?t.icon=E(s,t.icon):delete t.icon,h&&t.action!==null?t.action=h(s,t.action):delete t.action,t};class SimpleLabel extends Label{constructor(t,n,f){n=BuildLabelConfig(t,n,f),super(t,n),this.type="rexSimpleLabel"}setActiveState(t){return RunMethod(this.getChildren(),"setActiveState",t),this}setHoverState(t){return RunMethod(this.getChildren(),"setHoverState",t),this}setDisableState(t){return RunMethod(this.getChildren(),"setDisableState",t),this}}var RunMethod=function(s,t,n){for(var f=0,T=s.length;f<T;f++){var E=s[f];E&&E[t]&&E[t](n)}};ObjectFactory.register("simpleLabel",function(s,t){var n=new SimpleLabel(this.scene,s,t);return this.scene.add.existing(n),n});SetValue(window,"RexPlugins.UI.SimpleLabel",SimpleLabel);const GetValue$1q=Phaser.Utils.Objects.GetValue;var LayoutMode0$2=function(s){var t=this.scene,n=GetValue$1q(s,"orientation",0);this.setOrientation(n);var f=GetValue$1q(s,"icon",void 0),T=GetValue$1q(s,"iconMask",void 0),E=GetValue$1q(s,"innerBackground",void 0),h=GetValue$1q(s,"title",void 0),S=GetValue$1q(s,"separator",void 0),e=GetValue$1q(s,"text",void 0),d=GetValue$1q(s,"action",void 0),y=GetValue$1q(s,"actionMask",void 0);if(f){var v;this.orientation===0?v={right:GetValue$1q(s,"space.icon",0),top:GetValue$1q(s,"space.iconTop",0),bottom:GetValue$1q(s,"space.iconBottom",0),left:GetValue$1q(s,"space.iconLeft",0)}:v={bottom:GetValue$1q(s,"space.icon",0),left:GetValue$1q(s,"space.iconLeft",0),right:GetValue$1q(s,"space.iconRight",0),top:GetValue$1q(s,"space.iconTop",0)};var c=GetValue$1q(s,"squareFitIcon",!1)?1:0;if(this.add(f,{proportion:0,padding:v,fitRatio:c}),T&&(T=AddChildMask.call(this,f,f,1)),!c){var u=GetValue$1q(s,"iconSize",void 0);this.setIconSize(GetValue$1q(s,"iconWidth",u),GetValue$1q(s,"iconHeight",u))}}var l=new Sizer(t,{orientation:1});E&&l.addBackground(E);var r=GetValue$1q(s,"space.separator",0);if(h){var a=GetValue$1q(s,"align.title","left"),v={bottom:!S&&e?r:0,left:GetValue$1q(s,"space.titleLeft",0),right:GetValue$1q(s,"space.titleRight",0)};l.add(h,{proportion:0,align:a,padding:v})}if(S){var v={top:h?r:0,bottom:e?r:0,left:GetValue$1q(s,"space.separatorLeft",0),right:GetValue$1q(s,"space.separatorRight",0)};l.add(S,{expand:!0,padding:v})}if(e){var a=GetValue$1q(s,"align.text","left"),v={left:GetValue$1q(s,"space.textLeft",0),right:GetValue$1q(s,"space.textRight",0)};l.add(e,{proportion:0,align:a,padding:v})}var v=void 0;if(d&&(v={right:GetValue$1q(s,"space.text",0)}),this.add(l,{proportion:1,padding:v}),d){var v;this.orientation===0?v={top:GetValue$1q(s,"space.actionTop",0),bottom:GetValue$1q(s,"space.actionBottom",0),right:GetValue$1q(s,"space.actionRight",0)}:v={left:GetValue$1q(s,"space.actionLeft",0),right:GetValue$1q(s,"space.actionRight",0),bottom:GetValue$1q(s,"space.actionBottom",0)};var c=GetValue$1q(s,"squareFitAction",!1)?1:0;if(this.add(d,{proportion:0,padding:v,fitRatio:c}),y&&(y=AddChildMask.call(this,d,d,1)),!c){var o=GetValue$1q(s,"actionSize");this.setActionSize(GetValue$1q(s,"actionWidth",o),GetValue$1q(s,"actionHeight",o))}}this.addChildrenMap("icon",f),this.addChildrenMap("iconMask",T),this.addChildrenMap("innerSizer",l),this.addChildrenMap("innerBackground",E),this.addChildrenMap("title",h),this.addChildrenMap("separator",S),this.addChildrenMap("text",e),this.addChildrenMap("action",d),this.addChildrenMap("actionMask",y)};const GetValue$1p=Phaser.Utils.Objects.GetValue;var LayoutMode1$1=function(s){this.setOrientation(1),this.setRTL(!1);var t=this.scene,n=GetValue$1p(s,"title",void 0),f=GetValue$1p(s,"separator",void 0),T=GetValue$1p(s,"innerBackground",void 0),E=GetValue$1p(s,"icon",void 0),h=GetValue$1p(s,"iconMask",void 0),S=GetValue$1p(s,"text",void 0),e=GetValue$1p(s,"action",void 0),d=GetValue$1p(s,"actionMask",void 0);if(n){var y=GetValue$1p(s,"align.title","left"),c={bottom:GetValue$1p(s,"space.title",0),left:GetValue$1p(s,"space.titleLeft",0),right:GetValue$1p(s,"space.titleRight",0)};this.add(n,{proportion:0,align:y,padding:c})}if(f){var u=GetValue$1p(s,"space.separator",0),c={top:n?u:0,bottom:S?u:0,left:GetValue$1p(s,"space.separatorLeft",0),right:GetValue$1p(s,"space.separatorRight",0)};this.add(f,{proportion:0,expand:!0,padding:c})}var l=GetValue$1p(s,"orientation",0),r=new Sizer(t,{orientation:l,rtl:GetValue$1p(s,"rtl",!1),space:{left:GetValue$1p(s,"space.innerLeft",0),right:GetValue$1p(s,"space.innerRight",0),top:GetValue$1p(s,"space.innerTop",0),bottom:GetValue$1p(s,"space.innerBottom",0)}});if(T&&r.addBackground(T),this.add(r,{proportion:1,expand:!0}),E){var c=void 0;r.orientation===0?c={right:GetValue$1p(s,"space.icon",0),top:GetValue$1p(s,"space.iconTop",0),bottom:GetValue$1p(s,"space.iconBottom",0),left:GetValue$1p(s,"space.iconLeft",0)}:c={bottom:GetValue$1p(s,"space.icon",0),left:GetValue$1p(s,"space.iconLeft",0),right:GetValue$1p(s,"space.iconRight",0),top:GetValue$1p(s,"space.iconTop",0)};var a=GetValue$1p(s,"squareFitIcon",!1)?1:0;if(r.add(E,{proportion:0,padding:c,fitRatio:a}),h&&(h=AddChildMask.call(this,E,E,1)),!a){var v=GetValue$1p(s,"iconSize",void 0);this.setIconSize(GetValue$1p(s,"iconWidth",v),GetValue$1p(s,"iconHeight",v))}}if(S){var y=GetValue$1p(s,"align.text","left"),o=GetValue$1p(s,"space.text",0),p=GetValue$1p(s,"expandTextWidth",!1),m=GetValue$1p(s,"expandTextHeight",!1),g,c,x;r.orientation===0?(g=p?1:0,e&&(c={right:o}),x=m):(g=m?1:0,e&&(c={bottom:o}),x=p),r.add(S,{proportion:g,expand:x,align:y,padding:c})}if(e){var c;r.orientation===0?c={top:GetValue$1p(s,"space.actionTop",0),bottom:GetValue$1p(s,"space.actionBottom",0),right:GetValue$1p(s,"space.actionRight",0)}:c={left:GetValue$1p(s,"space.actionLeft",0),right:GetValue$1p(s,"space.actionRight",0),bottom:GetValue$1p(s,"space.actionBottom",0)};var a=GetValue$1p(s,"squareFitAction",!1)?1:0;if(r.add(e,{proportion:0,padding:c,fitRatio:a}),d&&(d=AddChildMask.call(this,e,e,1)),!a){var C=GetValue$1p(s,"actionSize");this.setActionSize(GetValue$1p(s,"actionWidth",C),GetValue$1p(s,"actionHeight",C))}}this.addChildrenMap("title",n),this.addChildrenMap("separator",f),this.addChildrenMap("innerSizer",r),this.addChildrenMap("innerBackground",T),this.addChildrenMap("icon",E),this.addChildrenMap("iconMask",h),this.addChildrenMap("text",S),this.addChildrenMap("action",e),this.addChildrenMap("actionMask",d)};const GetValue$1o=Phaser.Utils.Objects.GetValue,LayoutCallbacks$1=[LayoutMode0$2,LayoutMode1$1];class TitleLabel extends LabelBase{constructor(t,n){super(t,n),this.type="rexTitleLabel";var f=GetValue$1o(n,"background",void 0);f&&this.addBackground(f);var T=GetValue$1o(n,"layoutMode",0),E=LayoutCallbacks$1[T]||LayoutCallbacks$1[0];E.call(this,n),this.addChildrenMap("background",n.background)}get title(){var t=this.childrenMap.title;return t?t.title:""}set title(t){var n=this.childrenMap.title;n&&n.setText(t)}setTitle(t){return this.title=t,this}resetDisplayContent(t){t===void 0?t={}:typeof t=="string"&&(t={text:t}),super.resetDisplayContent(t);var n=this.childrenMap.title;return n&&(t.title===void 0||(t.title?(this.show(n),this.setTitle(t.title)):this.hide(n))),this}}ObjectFactory.register("titleLabel",function(s){var t=new TitleLabel(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.TitleLabel",TitleLabel);const GetValue$1n=Phaser.Utils.Objects.GetValue,IsPlainObject$d=Phaser.Utils.Objects.IsPlainObject;var Build$1=function(s,t){var n=GetValue$1n(t,"background",void 0),f=GetValue$1n(t,"icon",void 0),T=GetValue$1n(t,"iconMask",void 0),E=GetValue$1n(t,"nameText",void 0),h=GetValue$1n(t,"valueText",void 0),S=GetValue$1n(t,"bar",void 0),e=GetValue$1n(t,"action",void 0),d=GetValue$1n(t,"actionMask",void 0),y=GetValue$1n(t,"barShape","line")==="line";if(IsPlainObject$d(S)){var c=y?LineProgress:CircularProgress;S=new c(s,S),s.add.existing(S),E&&s.children.moveBelow(S,E),h&&s.children.moveBelow(S,h)}var u=E||h||S;if(n&&this.addBackground(n),f){var l=void 0;this.orientation===0?(u||e)&&(l={right:GetValue$1n(t,"space.icon",0),top:GetValue$1n(t,"space.iconTop",0),bottom:GetValue$1n(t,"space.iconBottom",0)}):(u||e)&&(l={bottom:GetValue$1n(t,"space.icon",0),left:GetValue$1n(t,"space.iconLeft",0),right:GetValue$1n(t,"space.iconRight",0)}),this.add(f,{proportion:0,padding:l}),T&&(T=AddChildMask.call(this,f,f,1))}if(u){var r=new Sizer(s,{orientation:1}),a;if(E||h){if(a=new Sizer(s,{orientation:0}),E){E.text===""&&E.setText(" "),E.setOrigin(0,E.originY);var l={left:GetValue$1n(t,"space.name",0)};a.add(E,{padding:l})}if(h){h.text===""&&h.setText(" "),h.setOrigin(1,h.originY),a.addSpace();var l={right:GetValue$1n(t,"space.value",0)};a.add(h,{padding:l}),this.setValueTextFormatCallback(GetValue$1n(t,"valueTextFormatCallback",DefaultValueTextFormatCallback),GetValue$1n(t,"valueTextFormatCallbackScope",void 0))}r.add(a,{expand:!0})}if(S)if(y){var v=a?GetValue$1n(t,"space.bar"):0;v===void 0&&(v=GetValue$1n(t,"space.barTop",0));var l={top:v,bottom:GetValue$1n(t,"space.barBottom",0),left:GetValue$1n(t,"space.barLeft",0),right:GetValue$1n(t,"space.barRight",0)};r.add(S,{expand:!0,padding:l})}else{var l={top:GetValue$1n(t,"space.barTop",0),bottom:GetValue$1n(t,"space.barBottom",0),left:GetValue$1n(t,"space.barLeft",0),right:GetValue$1n(t,"space.barRight",0)};this.addBackground(S,l)}var l=void 0;e&&(l={right:GetValue$1n(t,"space.text",0)});var o=GetValue$1n(t,"align.text","bottom");this.add(r,{proportion:1,align:o,padding:l})}if(e){var l;this.orientation===0?l={top:GetValue$1n(t,"space.actionTop",0),bottom:GetValue$1n(t,"space.actionBottom",0)}:l={left:GetValue$1n(t,"space.actionLeft",0),right:GetValue$1n(t,"space.actionRight",0)},this.add(e,{proportion:0,padding:l}),d&&(d=AddChildMask.call(this,e,e,1))}this.addChildrenMap("background",n),this.addChildrenMap("icon",f),this.addChildrenMap("iconMask",T),this.addChildrenMap("name",E),this.addChildrenMap("value",h),this.addChildrenMap("bar",S),this.addChildrenMap("action",e),this.addChildrenMap("actionMask",d)},DefaultValueTextFormatCallback=function(s,t,n){return s.toString()};const Clamp$8=Phaser.Math.Clamp,SetValueMethods={setValueTextFormatCallback(s,t){return this.valueTextFormatCallback=s,this.valueTextFormatCallbackScope=t,this},getFormatValueText(s,t,n){s===void 0&&(s=this.value),t===void 0&&(t=this.minValue),n===void 0&&(n=this.maxValue);var f;return this.valueTextFormatCallbackScope?f=this.valueTextFormatCallback(s,t,n):f=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,s,t,n),f},updateValueText(s,t,n){var f=this.childrenMap.value;return f&&this.valueTextFormatCallback&&(f.setText(this.getFormatValueText(s,t,n)),f.layout&&f.layout()),this},setValue(s,t,n){return s=Clamp$8(s,t,n),this.value=s,this.minValue=t,this.maxValue=n,this.updateValueText(s,t,n),this.setBarValue(s,t,n),this},setEaseValueDuration(s){return this.easeValueDuration=s,this},easeValueTo(s,t,n){return this.minValue=t,this.maxValue=n,this.easeValueTask===void 0&&(this.easeValueTask=new EaseValueTask(this),this.easeValueTask.on("update",function(){this.setValue(this.value,this.minValue,this.maxValue)},this)),this.easeValueTask.restart({key:"value",to:s,duration:this.easeValueDuration}),this}};class NameValueLabel extends Sizer{constructor(t,n){super(t,n),this.type="rexNameValueLabel",Build$1.call(this,t,n),this.setEaseValueDuration(1e3)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var n=this.childrenMap.name;n!==void 0&&n.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var n=this.childrenMap.value;n!==void 0&&n.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var n=this.childrenMap.bar;n!==void 0&&n.setValue(t)}setBarValue(t,n,f){var T=this.childrenMap.bar;return T===void 0?this:(T.setValue(t,n,f),this)}easeBarValueTo(t,n,f){var T=this.childrenMap.bar;return T===void 0?this:(T.easeValueTo(t,n,f),this)}setTexture(t,n){var f=this.childrenMap.icon;if(f!==void 0)return f.setTexture(t,n),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}postLayout(t,n,f){var T=this.childrenMap.iconMask;T&&(T.setPosition(),this.resetChildPositionState(T));var E=this.childrenMap.actionMask;return E&&(E.setPosition(),this.resetChildPositionState(E)),this}resize(t,n){super.resize(t,n);var f=this.childrenMap.iconMask;f&&f.resize();var T=this.childrenMap.actionMask;return T&&T.resize(),this}}Object.assign(NameValueLabel.prototype,SetValueMethods);ObjectFactory.register("nameValueLabel",function(s){var t=new NameValueLabel(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.NameValueLabel",NameValueLabel);class LevelCounter extends EventEmitter{constructor(t){super(),this.setTable(GetValue$3q(t,"table")),this.setMaxLevel(GetValue$3q(t,"maxLevel"));var n=GetValue$3q(t,"exp",0),f=GetValue$3q(t,"level",void 0);f!==void 0&&!this.checkLevel(f,n)&&(console.error(`Level ${f} and Exp ${n} are mismatch`),f=void 0),this.resetExp(n,f)}setTable(t){return this.levelTable=t,this.isLevelMapFunction=IsFunction(t),this}setMaxLevel(t){t===void 0&&(Array.isArray(this.levelTable)?t=this.levelTable.length-1:t=-1);var n;return t!==-1?n=this.getExp(t):n=-1,this.hasMaxLevel=t!==-1,this.maxLevel=t,this.maxExp=n,this}resetExp(t,n){return this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),n===void 0&&(n=this.getLevel(t)),this._exp=t,this._level=n,this._requiredExp=this.getRequiredExpToNextLevel(n,t),this}get exp(){return this._exp}set exp(t){if(this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),t<this._exp){this.resetExp(t);return}if(t!==this._exp){for(var n=this.getLevel(t,this._level),f=this._level,T=this._exp,E;;){var h=this.getExp(f),S=this.getExp(f+1);if(E=Math.min(S,t),this.emit("levelup",f,T,E,h,S),f===n&&E===t)break;f++,T=S}this.resetExp(t,n)}}get level(){return this._level}set level(t){this.hasMaxLevel&&t>this.maxLevel?this.exp=this.maxExp:this.exp=this.getExp(t)}get requiredExp(){return this._requiredExp}getExp(t){return t===void 0?this._exp:this.isLevelMapFunction?this.levelTable(t):(this.hasMaxLevel&&t>this.maxLevel&&(t=this.maxLevel),this.levelTable[t])}getLevel(t,n){if(t===void 0)return this._level;for(n===void 0&&(n=0);;){var f=this.getExp(n+1);if(f>t||(n++,this.hasMaxLevel&&f===this.maxExp))break}return n}getRequiredExpToNextLevel(t,n){return t===void 0&&(t=this.level),n===void 0&&(n=this.exp),this.getExp(t+1)-n}checkLevel(t,n){return n>=this.getExp(t)&&n<this.getExp(t+1)}gainExp(t,n,f){return n&&this.on("levelup",n,f),this.exp+=t,n&&this.off("levelup",n,f),this}setExp(t,n,f){return n&&this.on("levelup",n,f),this.exp=t,n&&this.off("levelup",n,f),this}setLevel(t,n,f){return n&&this.on("levelup",n,f),this.level=t,n&&this.off("levelup",n,f),this}}var RunCommands=function(s,t,n){var f=GetValue$3q(n,"reverse",!1),T;if(IsArray(s[0]))if(f)for(var h=s.length,E=h-1;E>=0;E--)T=RunCommands(s[E],t,n);else for(var E=0,h=s.length;E<h;E++)T=RunCommands(s[E],t,n);else T=RunCommand(s,t,n);return T},RunCommand=function(s,t,n){var f=GetValue$3q(n,"argsConvert",void 0),T=GetValue$3q(n,"argsConvertScope",void 0),E=s[0];if(ARGS=Copy(ARGS,s,1),f){f===!0&&(f=TypeConvert,T=void 0);for(var h=0,S=ARGS.length;h<S;h++)T?ARGS[h]=f.call(T,ARGS[h],s):ARGS[h]=f(ARGS[h],s)}var e;typeof E=="string"?(e=t[E],e==null&&(e=GetValue$3q(t,E,null))):e=E;var d=e.apply(t,ARGS);return d},ARGS=[];const GetValue$1m=Phaser.Utils.Objects.GetValue;class Player extends ComponentBase{constructor(t,n){super(t,n);var f=GetValue$1m(n,"clock",void 0);f||(f=new Clock(t)),this.clock=f,this.clock.on("update",this.update,this),this.commands=[],this.resetFromJSON(n)}resetFromJSON(t){return this.clock.resetFromJSON(GetValue$1m(t,"clock",void 0)),this.state=GetValue$1m(t,"state",0),this.commands=GetValue$1m(t,"commands",[]),this.scope=GetValue$1m(t,"scope",void 0),this.setTimeUnit(GetValue$1m(t,"timeUnit",0)),this.setDtMode(GetValue$1m(t,"dtMode",0)),this.index=GetValue$1m(t,"index",0),this.nextTime=GetValue$1m(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,n,f){this.stop();var T=GetValue$1m(f,"timeUnit",void 0);T!==void 0&&this.setTimeUnit(T);var E=GetValue$1m(f,"dtMode",void 0);return E!==void 0&&this.setDtMode(E),t=t.filter(function(h){var S=h[0];return!isNaN(S)}).map(function(h){var S=h[0];return typeof S=="string"&&(h[0]=parseFloat(h[0])),h}),this.dtMode===0&&t.sort(function(h,S){var e=h[0],d=S[0];return e>d?1:e<d?-1:0}),Copy(this.commands,t),this.scope=n,this}clear(){return this.commands.length=0,this}append(t,n,...f){var T;return Array.isArray(n)?T=n:T=[n,...f],this.commands.push([t,T]),this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var n=this.commands;;){var f=n[this.index],T=f[1];if(IsArray(T)||(T=Copy(CMD,f,1)),RunCommands(T,this.scope),this.emit("runcommand",T,this.scope),this.index>=n.length-1)return this.nextTime=0,this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var n=this.commands[this.index][0];return this.timeUnit===1&&(n=n*1e3),this.dtMode===1&&(n+=t),n}setDtMode(t){return typeof t=="string"&&(t=DTMODE[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=TIMEUNITMODE[t]),this.timeUnit=t,this}}var CMD=[];const TIMEUNITMODE={ms:0,s:1,sec:1},DTMODE={abs:0,absolute:0,inc:1,increment:1};var OnLevelUp=function(s,t,n,f,T){var E=(n-t)/(T-f)*this.totalEaseDuration,h=n===T?s+1:s;this.player.append(0,this.setEaseValueDuration,E).append(0,this.easeValueTo,n,f,T).append(0,this.emit,"levelup.start",s,t,n,this).append(E,NOOP).append(0,this.emit,"levelup.end",h,t,n,this),this.player.isPlaying||this.player.start()};const ExpMethods={setExpTable(s){return this.levelCounter.setTable(s),this},resetExp(s){return this.levelCounter.resetExp(s),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1)),this},getExp(s){return this.levelCounter.getExp(s)},getLevel(s,t){return this.levelCounter.getLevel(s,t)},getRequiredExpToNextLevel(s,t){return this.levelCounter.getRequiredExpToNextLevel(s,t)},gainExp(s){return this.levelCounter.gainExp(s),this},setExp(s){return this.levelCounter.setExp(s),this},setLevel(s){return this.levelCounter.setLevel(s),this}},GetValue$1l=Phaser.Utils.Objects.GetValue;class ExpBar extends NameValueLabel{constructor(t,n){super(t,n),this.type="rexExpBar",this.setTotalEaseDuration(GetValue$1l(n,"easeDuration",1e3)),this.levelCounter=new LevelCounter(GetValue$1l(n,"levelCounter")),this.player=new Player(this,{scope:this,dtMode:1}),this.levelCounter.on("levelup",OnLevelUp,this),this.player.on("complete",function(){this.player.clear(),this.emit("levelup.complete",this.level,this)},this),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1))}destroy(t){!this.scene||this.ignoreDestroy||(this.levelCounter.destroy(),this.levelCounter=void 0,this.player.destroy(),this.player=void 0,super.destroy(t))}get exp(){return this.levelCounter.exp}set exp(t){this.levelCounter.exp=t}get level(){return this.levelCounter.level}set level(t){this.levelCounter.level=t}get requiredExp(){return this.levelCounter.requiredExp}setTotalEaseDuration(t){return this.totalEaseDuration=t,this}}Object.assign(ExpBar.prototype,ExpMethods);ObjectFactory.register("expBar",function(s){var t=new ExpBar(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.ExpBar",ExpBar);const SizerAdd$3=Sizer.prototype.add,SizerAddSpace=Sizer.prototype.addSpace;var Add$2=function(s){var t=!s.isRexSpace,n=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var f=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");f&&SizerAddSpace.call(this),SizerAdd$3.call(this,s,{proportion:n,expand:!0});var T=!this.buttonsExpand&&this.buttonsAlign==="center";T&&SizerAddSpace.call(this),this.hasTailSpace=T}else SizerAdd$3.call(this,s,{proportion:n,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var E=this.sizerChildren.length-1;SizerAdd$3.call(this,s,{index:E,proportion:n,expand:!0})}else SizerAdd$3.call(this,s,{proportion:n,expand:!0});return t&&this.buttonGroup.add(s),this};const AddChildMethods$3={addButton(s){if(IsArray(s))for(var t=s,n=0,f=t.length;n<f;n++)Add$2.call(this,t[n]);else Add$2.call(this,s);return this},addButtons(s){for(var t=0,n=s.length;t<n;t++)Add$2.call(this,s[t]);return this}},SizerRmove$2=Sizer.prototype.remove,SizerClear$2=Sizer.prototype.clear;var Remove$3=function(s,t){return this.getParentSizer(s)!==this?this:(this.buttonGroup.remove(s),SizerRmove$2.call(this,s,t),this)};const RemoveChildMethods$2={remove(s,t){if(IsArray(s))for(var n=s,f=0,T=n.length;f<T;f++)Remove$3.call(this,n[f],t);else Remove$3.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,SizerClear$2.call(this,s),this},removeButton(n,t){var n=this.getButton(n);return n?(this.remove(n,t),this):this},clearButtons(s){for(var t=this.buttonGroup.buttons,n=t.length-1;n>=0;n--)Remove$3.call(this,t[n],s);return this}};var OnButtonStateChange=function(s,t,n){if(s){var f=this.setValueCallback,T=this.setValueCallbackScope;f&&(T?f.call(T,s,t,n):f(s,t,n)),this.fireEvent("button.statechange",s,t,n)}},InjectSelectedProperty=function(s){var t=this;s._selected=void 0,Object.defineProperty(s,"selected",{get:function(){return s._selected},set:function(n){if(s._selected!==n){var f=s._selected;s._selected=n,OnButtonStateChange.call(t,s,n,f)}},enumerable:!0,configurable:!0}),s.selected=!1};const AddMethods={add(s){return this.buttons.push(s),s._click||(s._click=new Button(s,this.clickConfig),s._click.on("click",function(t,n,f,T){this.fireEvent("button.click",n,f,T)},this).on("enable",function(t,n){this.fireEvent("button.enable",n)},this).on("disable",function(t,n){this.fireEvent("button.disable",n)},this),s.on("pointerover",function(t,n,f,T){this.fireEvent("button.over",s,t,T)},this).on("pointerout",function(t,n){this.fireEvent("button.out",s,t,n)},this).on("pointerdown",function(t,n,f,T){this.fireEvent("button.down",s,t,T)},this).on("pointerup",function(t,n){this.fireEvent("button.up",s,t,n)},this)),this.buttonsType&&(s.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),InjectSelectedProperty.call(this,s)),this},addMultiple(s){for(var t=0,n=s.length;t<n;t++)this.add(s[t]);return this}},RemoveItem=Phaser.Utils.Array.Remove,RemoveMethods={remove(s){return this.buttonsType&&delete s.selected,RemoveItem(this.buttons,s),this},clear(){if(this.buttonsType)for(var s=this.buttons,t=0,n=s.length;t<n;t++)delete s[t].selected;return this.buttons.length=0,this}};var FireEvent=function(s,t,...n){if(this.buttons){var f;if(typeof t=="number"){if(f=t,t=this.buttons[f],!t)return}else if(f=this.buttons.indexOf(t),f===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(s,t,f,...n),this.groupName!==void 0?this.eventEmitter.emit(s,t,this.groupName,f,...n):this.eventEmitter.emit(s,t,f,...n)}};const GetValue$1k=Phaser.Utils.Objects.GetValue,ButtonsTypeMethods={setButtonsType(s){s===void 0&&(s={});var t=GetValue$1k(s,"buttonsType",s.type);if(this.buttonsType=t,!this.buttonsType)return this;var n,f;switch(n=GetValue$1k(s,"setValueCallback",void 0),f=GetValue$1k(s,"setValueCallbackScope",void 0),n===void 0&&(n=GetValue$1k(s,"setButtonStateCallback",void 0),f=GetValue$1k(s,"setButtonStateCallbackScope",void 0)),this.setValueCallback=n,this.setValueCallbackScope=f,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var s=this.parent,t=this.buttons;s._value=void 0;var n=void 0;return Object.defineProperty(s,"value",{get:function(){return s._value},set:function(f){if(s._value!==f){s._value=f;for(var T=0,E=t.length;T<E;T++){var h=t[T];h.rexSizer.hidden||(n===void 0?h.name===f?h.selected=!0:h.selected=!1:n===T?h.selected=!0:h.selected=!1)}}},enumerable:!0,configurable:!0}),s.on("button.click",function(f){n=this.buttons.indexOf(f),s.value=f.name,n=void 0},this),this},setCheckboxesType(){var s=this.parent;return s.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var s=this.buttons,t=0,n=s.length;t<n;t++){var f=s[t];f.selected=!1}return this},getAllButtonsState(){for(var s={},t=this.buttons,n=0,f=t.length;n<f;n++){var T=t[n];T.rexSizer.hidden||(s[T.name]=T.selected)}return s},setSelectedButtonName(s){return this.parent.value=s,this},getSelectedButtonName(){return this.parent.value},setButtonState(s,t){t===void 0&&(t=!0);for(var n=this.buttons,f=0,T=n.length;f<T;f++){var E=n[f];if(!E.rexSizer.hidden&&E.name===s){E.selected=t;break}}return this},getButtonState(s){for(var t=this.buttons,n=0,f=t.length;n<f;n++){var T=t[n];if(!T.rexSizer.hidden&&T.name===s)return T.selected}}};var GetGameObjectByName=function(s,t){if(s)if(IsArray(s)){for(var n,f=0,T=s.length;f<T;f++)if(n=TestName(s[f],t),n)return n}else{var n;for(var E in s)if(n=TestName(s[E],t),n)return n}else return null},TestName=function(s,t){return s?s.hasOwnProperty("name")?s.name===t?s:null:GetElementByName(s,t):null};const ButtonMethods$2={getButton(s){var t=this.buttons,n,f=typeof s;switch(f){case"number":n=t[s];break;case"string":n=GetGameObjectByName(t,s);break;default:n=s,t.indexOf(n)===-1&&(n=void 0);break}return n},setButtonEnable(s,t){var n=this.buttons;if(s===void 0||typeof s=="boolean"){t=s;for(var f=0,T=n.length;f<T;f++)n[f]._click.setEnable(t)}else this.getButton(s)._click.setEnable(t);return this},toggleButtonEnable(s){var t=this.buttons;if(s===void 0||typeof s=="boolean")for(var n=0,f=t.length;n<f;n++)t[n]._click.toggleEnable();else this.getButton(s)._click.toggleEnable();return this},getButtonEnable(s){return s===void 0&&(s=0),this.getButton(s)._click.enable},emitButtonClick(s){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",s),this},showButton(s){return Show(this.getButton(s)),this},hideButton(s){return Hide(this.getButton(s)),this},isButtonShown(s){return IsShown(this.getButton(s)),this},forEachButtton(s,t){for(var n=this.buttons,f=0,T=n.length;f<T;f++)t?s.call(t,n[f],f,n):s(n[f],f,n);return this}};class ButtonGroup{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var methods$e={fireEvent:FireEvent};Object.assign(ButtonGroup.prototype,AddMethods,RemoveMethods,ButtonsTypeMethods,ButtonMethods$2,methods$e);const ButtonStateMethods={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(s){return this.buttonGroup.setSelectedButtonName(s),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(s,t){return this.buttonGroup.setButtonState(s,t),this},getButtonState(s){return this.buttonGroup.getButtonState(s)}},GetValue$1j=Phaser.Utils.Objects.GetValue;let Buttons$1=class extends Sizer{constructor(t,n){n===void 0&&(n={});var f=n.space;typeof f=="number"&&(n.space={item:f}),super(t,n),this.type="rexButtons",this.buttonGroup=new ButtonGroup({parent:this,eventEmitter:GetValue$1j(n,"eventEmitter",this),groupName:GetValue$1j(n,"groupName",void 0),clickConfig:GetValue$1j(n,"click",void 0)}).setButtonsType(n);var T=GetValue$1j(n,"background",void 0),E=GetValue$1j(n,"buttons",void 0);this.buttonsExpand=GetValue$1j(n,"expand",!1),this.buttonsAlign=GetValue$1j(n,"align",void 0),T&&this.addBackground(T),E&&this.addButtons(E),this.addChildrenMap("background",T),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Buttons$1.prototype,AddChildMethods$3,RemoveChildMethods$2,ButtonMethods$2,ButtonStateMethods);ObjectFactory.register("buttons",function(s){var t=new Buttons$1(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Buttons",Buttons$1);const SizerAdd$2=GridSizer.prototype.add,AddChildMethods$2={addButton(s,t,n){return SizerAdd$2.call(this,s,t,n,void 0,0,this.buttonsExpand),this.buttonGroup.add(s),this},addButtons(s,t){for(var n=0,f=s;n<f;n++)this.addButton(s[n],void 0,t);return this}},SizerRmove$1=GridSizer.prototype.remove,SizerClear$1=GridSizer.prototype.clear;var Remove$2=function(n,t){var n=this.getButton(n);return n?(this.buttonGroup.remove(n),SizerRmove$1.call(this,n,t),this):this};const RemoveChildMethods$1={remove(s,t){if(IsArray(s))for(var n=s,f=0,T=n.length;f<T;f++)Remove$2.call(this,n[f],t);else Remove$2.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,SizerClear$1.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,n=t.length-1;n>=0;n--)Remove$2.call(this,t[n],s);return this}},GetValue$1i=Phaser.Utils.Objects.GetValue;class GridButtons extends GridSizer{constructor(t,n){n===void 0&&(n={});var f=GetValue$1i(n,"row",0),T=GetValue$1i(n,"column",n.col||0),E=GetValue$1i(n,"createCellContainerCallback"),h=GetValue$1i(n,"buttons",void 0),S=GetValue$1i(n,"expand",!0),e=S?1:0;if(E&&(n.createCellContainerCallback=void 0),h!==void 0){f=Math.max(f,h.length);for(var d=0,y=h.length;d<y;d++)T=Math.max(T,h[d].length)}n.row=f,n.column=T,n.columnProportions=e,n.rowProportions=e,super(t,n),this.type="rexGridButtons",this.buttonGroup=new ButtonGroup({parent:this,eventEmitter:GetValue$1i(n,"eventEmitter",this),groupName:GetValue$1i(n,"groupName",void 0),clickConfig:GetValue$1i(n,"click",void 0)}).setButtonsType(n);var c=GetValue$1i(n,"background",void 0);if(this.buttonsExpand=S,GetValue$1i(n,"space",void 0),c&&this.addBackground(c),h)for(var u,l,r=0,a=h.length;r<a;r++){u=h[r];for(var v=0,o=u.length;v<o;v++)l=u[v],l&&this.addButton(l,v,r)}else if(E)for(var p=0;p<f;p++)for(var m=0;m<T;m++){var l=E(t,m,p);l&&this.addButton(l,m,p)}this.addChildrenMap("background",c),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(GridButtons.prototype,AddChildMethods$2,RemoveChildMethods$1,ButtonMethods$2,ButtonStateMethods);ObjectFactory.register("gridButtons",function(s){var t=new GridButtons(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.GridButtons",GridButtons);const SizerAdd$1=FixWidthSizer.prototype.add;var Add$1=function(s){return SizerAdd$1.call(this,s),this.buttonGroup.add(s),this};const AddChildMethods$1={addButton(s){if(IsArray(s))for(var t=s,n=0,f=t.length;n<f;n++)Add$1.call(this,t[n]);else Add$1.call(this,s);return this},addButtons(s){if(IsArray(s[0]))for(var t=s,n,f=0,T=t.length-1;f<=T;f++){n=t[f];for(var E=0,h=n.length;E<h;E++)Add$1.call(this,n[E]);f>T&&SizerAdd$1.addNewLine(this)}else for(var E=0,h=s.length;E<h;E++)Add$1.call(this,s[E]);return this}},SizerRmove=FixWidthSizer.prototype.remove,SizerClear=FixWidthSizer.prototype.clear;var Remove$1=function(n,t){var n=this.getButton(n);return n?(this.buttonGroup.remove(n),SizerRmove.call(this,n,t),this):this};const RemoveChildMethods={remove(s,t){if(IsArray(s))for(var n=s,f=0,T=n.length;f<T;f++)Remove$1.call(this,n[f],t);else Remove$1.call(this,s,t);return this},clear(s){var t=this.buttonGroup.buttons;return t.length=0,SizerClear.call(this,s),this},removeButton(s,t){return this.remove(s,t),this},clearButtons(s){for(var t=this.buttonGroup.buttons,n=t.length-1;n>=0;n--)Remove$1.call(this,t[n],s);return this}},GetValue$1h=Phaser.Utils.Objects.GetValue;class Buttons extends FixWidthSizer{constructor(t,n){n===void 0&&(n={});var f=n.space;typeof f=="number"&&(n.space={item:f,line:f}),super(t,n),this.type="rexFixWidthButtons",this.buttonGroup=new ButtonGroup({parent:this,eventEmitter:GetValue$1h(n,"eventEmitter",this),groupName:GetValue$1h(n,"groupName",void 0),clickConfig:GetValue$1h(n,"click",void 0)}).setButtonsType(n);var T=GetValue$1h(n,"background",void 0),E=GetValue$1h(n,"buttons",void 0);this.buttonsAlign=GetValue$1h(n,"align",void 0),T&&this.addBackground(T),E&&this.addButtons(E),this.addChildrenMap("background",T),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Buttons.prototype,AddChildMethods$1,RemoveChildMethods,ButtonMethods$2,ButtonStateMethods);ObjectFactory.register("fixWidthButtons",function(s){var t=new Buttons(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.FixWidthButtons",Buttons);const FileChooserMethods={setAccept(s){return this.childrenMap.fileChooser.setAccept(s),this},setMultiple(s){return this.childrenMap.fileChooser.setMultiple(s),this},loadFile(s,t,n,f,T){return this.childrenMap.fileChooser.loadFile(s,t,n,f,T),this},loadFilePromise(s,t,n,f){return this.childrenMap.fileChooser.loadFilePromise(s,t,n,f)}},GetValue$1g=Phaser.Utils.Objects.GetValue;class FileSelectorButton extends Label{constructor(t,n){super(t,n),this.type="rexFileSelectorButton";var f=new FileChooser(t);t.add.existing(f),this.addBackground(f),this.addChildrenMap("fileChooser",f),this.setAccept(GetValue$1g(n,"accept","")),this.setMultiple(GetValue$1g(n,"multiple",!1)),f.on("change",function(T){var E=T.files;E.length!==0&&(E=Array.from(E),this.emit("select",E,this))},this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign(FileSelectorButton.prototype,FileChooserMethods);ObjectFactory.register("fileSelectorButton",function(s){var t=new FileSelectorButton(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.FileSelectorButton",FileSelectorButton);const ButtonMethods$1={getChoice(s){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(s)},getAction(s){return this.childrenMap.actionsSizer.getButton(s)},getToolbar(s){return this.childrenMap.toolbarSizer.getButton(s)},getLeftToolbar(s){return this.childrenMap.leftToolbarSizer.getButton(s)},setChoiceEnable(s,t){var n=this.childrenMap.choicesSizer;return n&&n.setButtonEnable(s,t),this},setActionEnable(s,t){return this.childrenMap.actionsSizer.setButtonEnable(s,t),this},setToolbarEnable(s,t){return this.childrenMap.toolbarSizer.setButtonEnable(s,t),this},setLeftToolbarEnable(s,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(s,t),this},toggleChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(s),this},toggleActionEnable(s){return this.childrenMap.actionsSizer.toggleButtonEnable(s),this},toggleToolbarEnable(s){return this.childrenMap.toolbarSizer.toggleButtonEnable(s),this},toggleLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(s),this},getChoiceEnable(s){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(s):!1},getActionEnable(s){return this.childrenMap.actionsSizer.getButtonEnable(s)},getToolbarEnable(s){return this.childrenMap.toolbarSizer.getButtonEnable(s)},getLeftToolbarEnable(s){return this.childrenMap.leftToolbarSizer.getButtonEnable(s)},emitChoiceClick(s){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(s),this},emitActionClick(s){return this.childrenMap.actionsSizer.emitButtonClick(s),this},emitToolbarClick(s){return this.childrenMap.toolbarSizer.emitButtonClick(s),this},emitLeftToolbarClick(s){return this.childrenMap.leftToolbarSizer.emitButtonClick(s),this},showChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.showButton(s),this},showAction(s){return this.childrenMap.actionsSizer.showButton(s),this},showToolbar(s){return this.childrenMap.toolbarSizer.showButton(s),this},showLeftToolbar(s){return this.childrenMap.leftToolbarSizer.showButton(s),this},hideChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(s),this},hideAction(s){return this.childrenMap.actionsSizer.hideButton(s),this},hideToolbar(s){return this.childrenMap.toolbarSizer.hideButton(s),this},hideLeftToolbar(s){return this.childrenMap.leftToolbarSizer.hideButton(s),this},addChoice(s){var t=this.childrenMap.choicesSizer;return t&&t.addButton(s),this},addAction(s){return this.childrenMap.actionsSizer.addButton(s),this},addToolbar(s){return this.childrenMap.toolbarSizer.addButton(s),this},addLeftToolbar(s){return this.childrenMap.leftToolbarSizer.addButton(s),this},removeChoice(s,t){var n=this.childrenMap.choicesSizer;return n&&n.removeButton(s,t),this},removeAction(s,t){return this.childrenMap.actionsSizer.removeButton(s,t),this},removeToolbar(s,t){return this.childrenMap.toolbarSizer.removeButton(s,t),this},removeLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.removeButton(s,t),this},clearChoices(s){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(s),this},clearActions(s){return this.childrenMap.actionsSizer.clearButtons(s),this},clearToolbar(s){return this.childrenMap.toolbarSizer.clearButtons(s),this},clearLeftToolbar(s){return this.childrenMap.leftToolbarSizer.clearButtons(s),this},forEachChoice(s,t){var n=this.childrenMap.choicesSizer;return n&&n.forEachButtton(s,t),this},forEachAction(s,t){return this.childrenMap.actionsSizer.forEachButtton(s,t),this},forEachToolbar(s,t){return this.childrenMap.toolbarSizer.forEachButtton(s,t),this},forEachLeftToolbar(s,t){return this.childrenMap.leftToolbarSizer.forEachButtton(s,t),this},setAllButtonsEnable(s){return s===void 0&&(s=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(s),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(s),this.childrenMap.actionsSizer&&this.setActionEnable(s),this.childrenMap.choicesSizer&&this.setChoiceEnable(s),this},getChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s?s.getAllButtonsState():{}},getChoicesButtonState(s){var t=this.childrenMap.choicesSizer;return s===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(s):!1},setChoicesButtonState(s,t){var n=this.childrenMap.choicesSizer;return n&&n.setButtonState(s,t),this},clearChoicesButtonStates(){var s=this.childrenMap.choicesSizer;return s&&s.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var s=this.childrenMap.choicesSizer;return s?s.getSelectedButtonName():""},setChoicesSelectedButtonName(s){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(s),this}},ModalMethods={onCreateModalBehavior(s){s.on("button.click",function(t,n,f,T,E){if(n==="actions"){var h={index:f,text:t.text,button:t,dialog:s};switch(s.buttonsType){case"radio":h.value=s.getChoicesSelectedButtonName();break;case"checkboxes":h.value=s.getChoicesButtonStates();break;default:h.value=void 0}s.modalClose(h)}})},modal(s,t){return s&&s.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,ModalMethods$1.modal.call(this,s,t),this}};var Methods$7={};Object.assign(Methods$7,ButtonMethods$1,ModalMethods);const GetValue$1f=Phaser.Utils.Objects.GetValue;class Dialog extends Sizer{constructor(t,n){n===void 0&&(n={}),n.orientation=1,super(t,n),this.type="rexDialog",this.eventEmitter=GetValue$1f(n,"eventEmitter",this);var f=GetValue$1f(n,"background",void 0),T=GetValue$1f(n,"title",void 0),E=GetValue$1f(n,"toolbar",void 0),h=GetValue$1f(n,"toolbarBackground",void 0),S=GetValue$1f(n,"leftToolbar",void 0),e=GetValue$1f(n,"leftToolbarBackground",void 0),d=GetValue$1f(n,"content",void 0),y=GetValue$1f(n,"description",void 0),c,u=GetValue$1f(n,"choices",void 0),l=GetValue$1f(n,"choicesBackground",void 0),r,a=GetValue$1f(n,"actions",void 0),v=GetValue$1f(n,"actionsBackground",void 0),o=GetValue$1f(n,"click",void 0);f&&this.addBackground(f);var p;E&&(p=new Buttons$1(t,{groupName:"toolbar",background:h,buttons:E,orientation:0,space:{item:GetValue$1f(n,"space.toolbarItem",0)},click:o,eventEmitter:this.eventEmitter}));var m;if(S&&(m=new Buttons$1(t,{groupName:"leftToolbar",background:e,buttons:S,orientation:0,space:{item:GetValue$1f(n,"space.leftToolbarItem",0)},click:o,eventEmitter:this.eventEmitter})),T||E||S){var g=!!T&&GetValue$1f(n,"expand.title",!0),x=GetValue$1f(n,"align.title","center"),C=T&&!g&&x==="center"||!T&&(E||S),M=!C,R;M?R=new Sizer(t,{orientation:0}):R=new OverlapSizer(t);var P=M?!0:{height:!0};if(m&&R.add(m,{align:"left",expand:P}),T){M&&!g&&x==="right"&&R.addSpace();var w={left:GetValue$1f(n,"space.titleLeft",0),right:GetValue$1f(n,"space.titleRight",0)},A=g?1:0;R.add(T,{align:x,proportion:A,expand:P,padding:w}),M&&!g&&x==="left"&&R.addSpace()}p&&(M&&!T&&R.addSpace(),R.add(p,{align:"right",expand:P}));var w;(d||y||u||a)&&(w={bottom:GetValue$1f(n,"space.title",0),top:GetValue$1f(n,"space.titleTop",0)});var A=GetValue$1f(n,"proportion.title",0);this.add(R,{padding:w,proportion:A,expand:!0})}if(d){var G=GetValue$1f(n,"align.content","center"),O=GetValue$1f(n,"space.content",0),w={left:GetValue$1f(n,"space.contentLeft",0),right:GetValue$1f(n,"space.contentRight",0),bottom:y||u||a?O:0},A=GetValue$1f(n,"proportion.content",0),L=GetValue$1f(n,"expand.content",!0);this.add(d,{align:G,padding:w,proportion:A,expand:L})}if(y){var G=GetValue$1f(n,"align.description","center"),I=GetValue$1f(n,"space.description",0),w={left:GetValue$1f(n,"space.descriptionLeft",0),right:GetValue$1f(n,"space.descriptionRight",0),bottom:u||a?I:0},A=GetValue$1f(n,"proportion.description",0),L=GetValue$1f(n,"expand.description",!0);this.add(y,{align:G,padding:w,proportion:A,expand:L})}if(u){var F=GetValue$1f(n,"choicesType","").split("-"),D=Contains(F,"wrap")?Buttons:Contains(F,"grid")?GridButtons:Buttons$1,V=Contains(F,"radio")?"radio":Contains(F,"checkboxes")?"checkboxes":void 0,k={left:GetValue$1f(n,"space.choicesBackgroundLeft",0),right:GetValue$1f(n,"space.choicesBackgroundRight",0),top:GetValue$1f(n,"space.choicesBackgroundTop",0),bottom:GetValue$1f(n,"space.choicesBackgroundBottom",0)},W=GetValue$1f(n,"space.choice",0);D===Buttons$1?k.item=W:D===Buttons?(k.item=W,k.line=GetValue$1f(n,"space.choiceLine",W)):(k.column=GetValue$1f(n,"space.choiceColumn",W),k.row=GetValue$1f(n,"space.choiceRow",W));var X={width:GetValue$1f(n,"choicesWidth",void 0),height:GetValue$1f(n,"choicesHeight",void 0),groupName:"choices",buttonsType:V,background:l,buttons:u,space:k,click:o,eventEmitter:this.eventEmitter,setValueCallback:GetValue$1f(n,"choicesSetValueCallback",void 0),setValueCallbackScope:GetValue$1f(n,"choicesSetValueCallbackScope",void 0)};D===Buttons$1&&(X.orientation=Contains(F,"x")?0:1),c=new D(t,X);var H=GetValue$1f(n,"space.choices",0),w={left:GetValue$1f(n,"space.choicesLeft",0),right:GetValue$1f(n,"space.choicesRight",0),bottom:a?H:0},G=GetValue$1f(n,"align.choices","center"),A=GetValue$1f(n,"proportion.choices",0),L=GetValue$1f(n,"expand.choices",!0);this.add(c,{align:G,padding:w,proportion:A,expand:L}),this.buttonsType=V}if(a){r=new Buttons$1(t,{groupName:"actions",background:v,buttons:a,orientation:0,space:{item:GetValue$1f(n,"space.action",0)},expand:GetValue$1f(n,"expand.actions",!1),align:GetValue$1f(n,"align.actions","center"),click:o,eventEmitter:this.eventEmitter});var w={left:GetValue$1f(n,"space.actionsLeft",0),right:GetValue$1f(n,"space.actionsRight",0),bottom:GetValue$1f(n,"space.actionsBottom",0)},A=GetValue$1f(n,"proportion.action",0);this.add(r,{align:"center",padding:w,proportion:A,expand:!0})}EmitButtonEvent(this,"click"),EmitButtonEvent(this,"over"),EmitButtonEvent(this,"out"),EmitButtonEvent(this,"enable"),EmitButtonEvent(this,"disable"),this.addChildrenMap("background",f),this.addChildrenMap("title",T),this.addChildrenMap("toolbar",E),this.addChildrenMap("leftToolbar",S),this.addChildrenMap("content",d),this.addChildrenMap("description",y),this.addChildrenMap("choices",c?c.buttons:void 0),this.addChildrenMap("actions",r?r.buttons:void 0),this.addChildrenMap("choicesSizer",c),this.addChildrenMap("actionsSizer",r),this.addChildrenMap("toolbarSizer",p),this.addChildrenMap("leftToolbarSizer",m)}}var Contains=function(s,t){return s.indexOf(t)!==-1},ButtonsGroupEventNameMap={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},EmitButtonEvent=function(s,t){s.on(`button.${t}`,function(n,f,T,E,h){ButtonsGroupEventNameMap.hasOwnProperty(f)&&s.emit(`${ButtonsGroupEventNameMap[f]}.${t}`,n,T,E,h)})};Object.assign(Dialog.prototype,Methods$7);ObjectFactory.register("dialog",function(s){var t=new Dialog(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Dialog",Dialog);var CreateLabel=function(s,t,n){var f=new SimpleLabel(s,t,n);return s.add.existing(f),f},ResetDisplayContent=function(s){return s===void 0&&(s={}),ResetTitle.call(this,s),ResetContent.call(this,s),ResetActions.call(this,s),ResetChoices.call(this,s),this},ResetTitle=function(s){var t=this.childrenMap.title;t.resetDisplayContent(s.title)},ResetContent=function(s){var t=this.childrenMap.content;if(t.resetDisplayContent)t.resetDisplayContent(s.content);else{var n=s.content||"";t.setText(n)}},ResetActions=function(s){var t=this.childrenMap.actions;if(t){var n=s.buttons;if(n){for(var E=this.scene,h=this.defaultActionConfig,S=this.defaultActionButtonCreator,e=0,d=n.length;e<d;e++){var y=n[e],c=t[e];c||(c=CreateLabel(E,h,S),this.addAction(c)),c.show().resetDisplayContent(y)}this.buttonMode=n.length;for(var e=n.length,d=t.length;e<d;e++)t[e].hide()}else{var f=t[0];f&&f.resetDisplayContent(s.buttonA);var T=t[1];T&&T.resetDisplayContent(s.buttonB)}}},ResetChoices=function(s){var t=this.childrenMap.choices;if(t){var n=s.choices;n||(n=[]);for(var f=this.scene,T=this.defaultChoiceConfig,E=this.defaultActionButtonCreator,h=0,S=n.length;h<S;h++){var e=n[h];typeof e=="string"&&(e={text:e});var d=t[h];d||(d=CreateLabel(f,T,E),this.addChoice(d)),d.show().resetDisplayContent(e);var y;e.hasOwnProperty("value")?y=e.value:y=e.text,d.setName(y)}for(var h=n.length,S=t.length;h<S;h++)t[h].hide()}},Modal=function(s,t){IsFunction(s)&&(t=s,s=void 0),s===void 0&&(s={});var n=this.buttonMode===0;return s.hasOwnProperty("anyTouchClose")||(s.anyTouchClose=n),s.hasOwnProperty("manualClose")||(s.manualClose=!n),ModalMethods$1.modal.call(this,s,t),this},Methods$6={resetDisplayContent:ResetDisplayContent,modal:Modal},OnPointerOverCallback=function(s){s.setHoverState&&s.setHoverState(!0)},OnPointerOutCallback=function(s){s.setHoverState&&s.setHoverState(!1)},OnChoiceButtonStateChange=function(s,t,n,f){s.setActiveState&&s.setActiveState(f)},OnButtonEnable=function(s){s.setDisableState&&s.setDisableState(!1)},OnButtonDisable=function(s){s.setDisableState&&s.setDisableState(!0)},RegisterEvents=function(){this.on("button.over",OnPointerOverCallback).on("button.out",OnPointerOutCallback).on("button.enable",OnButtonEnable).on("button.disable",OnButtonDisable).on("button.statechange",OnChoiceButtonStateChange)};const SCROLLMODE$1={v:0,vertical:0,y:0,h:1,horizontal:1,x:1,xy:2,vh:2};var GetScrollMode=function(s,t){t===void 0&&(t="scrollMode"),s.hasOwnProperty(t)||(s[t]=GetDefaultScrollMode(s));var n=s[t];return typeof n=="string"&&(n=SCROLLMODE$1[n]),n},GetDefaultScrollMode=function(s){var t=!!s.sliderY||!!s.scrollerY,n=!!s.sliderX||!!s.scrollerX,f;return t&&n?f=2:t?f=0:n?f=1:f=0,f};const GetValue$1e=Phaser.Utils.Objects.GetValue;var AddChild=function(s,t,n){var f=GetValue$1e(n,"child"),T=GetValue$1e(f,"gameObject",void 0);if(T){var E=GetValue$1e(n,"space.child",0);s.childMargin={};var h=s.childMargin,S={};if(typeof E=="number")switch(s.scrollMode){case 0:case 1:h.top=0,h.bottom=0,h.left=0,h.right=0;break;default:h.top=E,h.bottom=E,h.left=E,h.right=E;break}else switch(s.scrollMode){case 0:h.top=GetValue$1e(E,"top",0),h.bottom=GetValue$1e(E,"bottom",0),S.left=GetValue$1e(E,"left",0),S.right=GetValue$1e(E,"right",0);break;case 1:h.top=GetValue$1e(E,"left",0),h.bottom=GetValue$1e(E,"right",0),S.top=GetValue$1e(E,"top",0),S.bottom=GetValue$1e(E,"bottom",0);break;default:h.top=GetValue$1e(E,"top",0),h.bottom=GetValue$1e(E,"bottom",0),h.left=GetValue$1e(E,"left",0),h.right=GetValue$1e(E,"right",0);break}t.add(T,{column:1,row:1,align:GetValue$1e(f,"align","center"),padding:S,expand:{width:GetValue$1e(f,"expandWidth",!0),height:GetValue$1e(f,"expandHeight",!0)}})}s.addChildrenMap("child",T)};const Percent$3=Phaser.Math.Percent;var PositionToPercent=function(s,t,n){var f;return s.y===t.y?f=Percent$3(n.x,s.x,t.x):s.x===t.x&&(f=Percent$3(n.y,s.y,t.y)),f},OnDragThumb=function(s,t,n){if(this.enable){tmpPoint$4.x=t,tmpPoint$4.y=n;var f,T;this.reverseAxis?(f=this.getEndPoint(),T=this.getStartPoint()):(f=this.getStartPoint(),T=this.getEndPoint()),this.value=PositionToPercent(f,T,tmpPoint$4)}},tmpPoint$4={},OnTouchTrack=function(s,t,n){if(this.enable&&s.isDown){tmpPoint$3.x=s.worldX,tmpPoint$3.y=s.worldY;var f,T;this.reverseAxis?(f=this.getEndPoint(),T=this.getStartPoint()):(f=this.getStartPoint(),T=this.getEndPoint());var E=PositionToPercent(f,T,tmpPoint$3);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-E)<.1?this.value=E:this.easeValueTo(E)}},tmpPoint$3={},GetThumbAlignPoint=function(s,t){t===void 0&&(t=tmpPoint$2);var n=this.childrenMap.thumb,f=n.x,T=n.y;return AlignIn(n,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,s),t.x=n.x,t.y=n.y,n.x=f,n.y=T,t},tmpPoint$2={};const AlignLeft$1=Phaser.Display.Align.LEFT_CENTER,AlignTop$1=Phaser.Display.Align.TOP_CENTER;var GetStartPoint=function(s){if(s===void 0&&(s=tmpPoint$1),this.childrenMap.thumb){var t=this.orientation===0?AlignLeft$1:AlignTop$1;GetThumbAlignPoint.call(this,t,s)}else this.orientation===0?(s.x=this.innerLeft+1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerTop+1);return s},tmpPoint$1={};const AlignRight$1=Phaser.Display.Align.RIGHT_CENTER,AlignBottom$1=Phaser.Display.Align.BOTTOM_CENTER;var GetEndoint=function(s){if(s===void 0&&(s=tmpPoint),this.childrenMap.thumb){var t=this.orientation===0?AlignRight$1:AlignBottom$1;GetThumbAlignPoint.call(this,t,s)}else this.orientation===0?(s.x=this.innerRight-1,s.y=this.centerY):(s.x=this.centerX,s.y=this.innerBottom-1);return s},tmpPoint={};const Linear$3=Phaser.Math.Linear;var PercentToPosition=function(s,t,n,f){return f===void 0&&(f=tmpOut),f.x=Linear$3(t.x,n.x,s),f.y=Linear$3(t.y,n.y,s),f},tmpOut={},UpdateThumb=function(s){var t=this.childrenMap.thumb;if(t===void 0)return this;s===void 0&&(s=this.value);var n,f;return this.reverseAxis?(n=this.getEndPoint(),f=this.getStartPoint()):(n=this.getStartPoint(),f=this.getEndPoint()),PercentToPosition(s,n,f,t),this.resetChildPositionState(t),this};const AlignLeft=Phaser.Display.Align.LEFT_CENTER,AlignTop=Phaser.Display.Align.TOP_CENTER,AlignRight=Phaser.Display.Align.RIGHT_CENTER,AlignBottom=Phaser.Display.Align.BOTTOM_CENTER;var UpdateIndicator=function(s){var t=this.childrenMap.indicator;if(t===void 0)return this;s===void 0&&(s=this.value);var n=this.reverseAxis,f,T,E=this.childrenMap.thumb;if(E)if(this.orientation===0){var h=GetDisplayWidth(E);if(n){var S=E.x-h*E.originX;f=this.right-S}else{var S=E.x-h*E.originX,e=S+h;f=e-this.left}}else{var d=GetDisplayHeight(E);if(n){var y=E.y-d*E.originY;T=this.bottom-y}else{var y=E.y-d*E.originY,c=y+d;T=c-this.top}}else this.orientation===0?f=this.width*s:T=this.height*s;ResizeGameObject(t,f,T);var u;n?u=this.orientation===0?AlignRight:AlignBottom:u=this.orientation===0?AlignLeft:AlignTop,QuickSet(t,this,u),this.resetChildPositionState(t)};const GetValue$1d=Phaser.Utils.Objects.GetValue,IsPlainObject$c=Phaser.Utils.Objects.IsPlainObject,Clamp$7=Phaser.Math.Clamp,SnapTo=Phaser.Math.Snap.To;class Slider extends ProgressBase(Sizer){constructor(t,n){super(t,n),this.type="rexSlider",this.bootProgressBase(n),this.reverseAxis=GetValue$1d(n,"reverseAxis",!1);var f=GetValue$1d(n,"background",void 0),T=GetValue$1d(n,"track",void 0),E=GetValue$1d(n,"indicator",void 0),h=GetValue$1d(n,"thumb",void 0);f&&(IsPlainObject$c(f)&&(f=CreateBackground$2(t,f)),this.addBackground(f)),T&&(IsPlainObject$c(T)&&(T=CreateBackground$2(t,T)),this.add(T,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),E&&(IsPlainObject$c(E)&&(E=CreateBackground$2(t,E)),this.pin(E)),h&&(IsPlainObject$c(h)&&(h=CreateBackground$2(t,h)),this.pin(h));var S=GetValue$1d(n,"input",0);switch(typeof S=="string"&&(S=INPUTMODE[S]),S){case 0:h&&(h.setInteractive(),this.scene.input.setDraggable(h),h.on("drag",OnDragThumb,this).on("dragstart",function(e){this.eventEmitter.emit("inputstart",e)},this).on("dragend",function(e){this.eventEmitter.emit("inputend",e)},this));break;case 1:this.on("pointerdown",OnTouchTrack,this).on("pointermove",OnTouchTrack,this).on("pointerdown",function(e){this.eventEmitter.emit("inputstart",e)},this).on("pointerup",function(e){this.eventEmitter.emit("inputend",e)},this).on("pointerover",function(e){e.isDown&&this.eventEmitter.emit("inputstart",e)},this).on("pointerout",function(e){e.isDown&&this.eventEmitter.emit("inputend",e)},this).setInteractive();break}this.addChildrenMap("background",f),this.addChildrenMap("track",T),this.addChildrenMap("indicator",E),this.addChildrenMap("thumb",h),this.setEnable(GetValue$1d(n,"enable",void 0)),this.setGap(GetValue$1d(n,"gap",void 0)),this.setValue(GetValue$1d(n,"value",0),GetValue$1d(n,"min",void 0),GetValue$1d(n,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,n,f){return t&&n!==void 0&&(t=t/(f-n)),this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=SnapTo(t,this.gap));var n=this._value;this._value=Clamp$7(t,0,1),n!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,n,this.eventEmitter))}postLayout(t,n,f){return this.updateThumb(),this.updateIndicator(),this}}const INPUTMODE={pan:0,drag:0,click:1,none:-1};var methods$d={getStartPoint:GetStartPoint,getEndPoint:GetEndoint,updateThumb:UpdateThumb,updateIndicator:UpdateIndicator};Object.assign(Slider.prototype,methods$d);const GetValue$1c=Phaser.Utils.Objects.GetValue;class ScrollBar extends Sizer{constructor(t,n){super(t,n),this.type="rexScrollBar";var f=GetValue$1c(n,"background",void 0),T=GetValue$1c(n,"buttons",void 0),E=GetValue$1c(T,"top",GetValue$1c(T,"left",void 0)),h=GetValue$1c(T,"bottom",GetValue$1c(T,"right",void 0)),S,e=GetValue$1c(n,"slider",void 0);if(f&&this.addBackground(f),E){this.add(E);var d=new InTouching(E);d.on("intouch",function(){if(this.enable){var v=S.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=v}},this)}if(e){e.orientation=this.orientation,e.eventEmitter=this,e.value=null;var y;if(this.orientation===0){var c=GetValue$1c(e,"width",void 0);y=c===void 0?1:0}else{var u=GetValue$1c(e,"height",void 0);y=u===void 0?1:0}S=new Slider(t,e),t.add.existing(S),this.add(S,{proportion:y})}if(h){this.add(h);var d=new InTouching(h);d.on("intouch",function(){if(this.enable){var o=S.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=o}},this)}var l=[E,h];this.addChildrenMap("background",f),this.addChildrenMap("slider",S),this.addChildrenMap("buttons",l);var r=GetValue$1c(n,"valuechangeCallback",null);if(r!==null){var a=GetValue$1c(n,"valuechangeCallbackScope",void 0);this.on("valuechange",r,a)}this.setEnable(GetValue$1c(n,"enable",void 0)),this.setValue(GetValue$1c(n,"value",0)),this.setScrollStep(GetValue$1c(T,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,n,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,n,f),this}addValue(t,n,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,n,f),this}getValue(t,n){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,n):0}easeValueTo(t,n,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,n,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}var CreateScrollbar=function(s,t){t===void 0&&(t={});var n=Clone$1(t);t={slider:n},t.orientation=n.orientation,delete n.orientation,t.background=n.background,delete n.background,t.buttons=n.buttons,delete n.buttons;var f=new ScrollBar(s,t);s.add.existing(f);var T=f.childrenMap.slider;return f.addChildrenMap("track",T.childrenMap.track),f.addChildrenMap("indicator",T.childrenMap.indicator),f.addChildrenMap("thumb",T.childrenMap.thumb),f};class State extends FSM{constructor(t,n){super(n),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,n=this.parent,f=n.dragState;return f.isDown&&(t=n.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,n){this.next()}next_DRAGBEGIN(){var t,n=this.parent,f=n.dragState;return f.isDown?t=f.pointer.getDistance()>=n.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,n){this.next()}next_DRAG(){var t,n=this.parent,f=n.dragState;return f.isUp&&(n.outOfBounds?t="BACK":n.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,n){var f=this.parent,T=f.dragState;T.justMoved&&f.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,n=this.parent,f=n.dragState;return f.isDown?t="DRAG":n.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,n){this.parent.sliding(t,n),this.next()}next_BACK(){var t,n=this.parent,f=n.dragState;return f.isDown?t="DRAG":n.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,n){this.parent.pullBack(t,n),this.next()}}const GetValue$1b=Phaser.Utils.Objects.GetValue,DistanceBetween=Phaser.Math.Distance.Between;class DragSpeed extends ComponentBase{constructor(t,n){super(t,n),this._enable=void 0,t.setInteractive(GetValue$1b(n,"inputConfig",void 0)),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(GetValue$1b(t,"enable",!0)),this.holdThreshold=GetValue$1b(t,"holdThreshold",50),this.pointerOutReleaseEnable=GetValue$1b(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=GetTickDelta(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=DistanceBetween(this.preX,this.preY,this.x,this.y),n=t/(this.dt*.001);return n}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,n,f){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=n,this.localY=f)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,n,f){!this.enable||!t.isDown||this.pointer!==t||(this.localX=n,this.localY=f)}preupdate(t,n){if(this.enable){var f=this.pointer;this.justMoved=!1,f&&!this.isInTouched?(this.x=f.worldX,this.y=f.worldY,this.preX=f.worldX,this.preY=f.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",f,this.localX,this.localY)):f&&this.isInTouched?this.x===f.x&&this.y===f.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=f.worldX,this.y=f.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",f,this.localX,this.localY)):!f&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",f))}}}const GetValue$1a=Phaser.Utils.Objects.GetValue;class Movement{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(GetValue$1a(t,"value",0)),this.setSpeed(GetValue$1a(t,"speed",0)),this.setAcceleration(GetValue$1a(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class SlowDown{constructor(){this.value,this.dir,this.movement=new Movement}init(t,n,f,T,E){return this.value=t,this.end=E,E!==void 0?this.dir=t<E:this.dir=n,this.movement.setSpeed(f).setAcceleration(-T),this}stop(){this.movement.reset()}update(t){var n=this.movement.getDeltaValue(t);return this.dir||(n=-n),this.end===void 0?this.value+=n:n===0?this.value=this.end:(this.value+=n,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const GetValue$19=Phaser.Utils.Objects.GetValue,Clamp$6=Phaser.Math.Clamp;class Scroller extends ComponentBase{constructor(t,n){super(t,n);var f=GetValue$19(n,"enable",!0);this._state=new State(this,{enable:f,eventEmitter:!1});var T={inputConfig:GetValue$19(n,"inputConfig",void 0),enable:f,pointerOutRelease:GetValue$19(n,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new DragSpeed(t,T),this._enable=void 0,this._value=void 0,this._slowDown=new SlowDown;var E=GetValue$19(n,"valuechangeCallback",null);if(E!==null){var h=GetValue$19(n,"valuechangeCallbackScope",void 0);this.on("valuechange",E,h)}if(E=GetValue$19(n,"overmaxCallback",null),E!==null){var h=GetValue$19(n,"overmaxCallbackScope",void 0);this.on("overmax",E,h)}if(E=GetValue$19(n,"overminCallback",null),E!==null){var h=GetValue$19(n,"overminCallbackScope",void 0);this.on("overmin",E,h)}this.resetFromJSON(n),this.boot()}resetFromJSON(t){this.setOrientationMode(GetValue$19(t,"orientation",0)),this.setDragThreshold(GetValue$19(t,"threshold",10)),this.setSlidingDeceleration(GetValue$19(t,"slidingDeceleration",5e3)),this.setBackDeceleration(GetValue$19(t,"backDeceleration",2e3));var n=GetValue$19(t,"dragRate",1);n=n*(GetValue$19(t,"dragReverse",!1)?-1:1),this.setDragRate(n);var f=GetValue$19(t,"bounds",void 0);return f?this.setBounds(f):this.setBounds(GetValue$19(t,"max",0),GetValue$19(t,"min",0)),this.setValue(GetValue$19(t,"value",this.maxValue||0)),this.setEnable(GetValue$19(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=ORIENTATIONMODE$2[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,n){if(Array.isArray(t)){var f=t;t=f[0],n=f[1]}return t<n?(this.minValue=t,this.maxValue=n):(this.minValue=n,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var n=this._value,f=this.overMax(t),T=this.overMin(t);f&&this.emit("overmax",t,n),T&&this.emit("overmin",t,n),this.backEnable||(f&&(t=this.maxValue),T&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,n)}}setValue(t,n){return n===void 0&&(n=!1),n&&(t=Clamp$6(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,n){return this.setValue(this.value+t,n),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,n=this.dragSpeed;if(n===0){this._slowDown.stop(),this._state.next();return}var f=this.slidingDeceleration;this._slowDown.init(t,n>0,Math.abs(n),f)}sliding(t,n){n*=.001;var f=this._slowDown.update(n).value;this.overMax(f)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(f)?(this.value=this.minValue,this._slowDown.stop()):this.value=f}onPullBack(){var t=this.value,n=this.outOfMinBound?this.minValue:this.maxValue,f=Math.abs(n-t),T=this.backDeceleration,E=Math.sqrt(2*T*f);this._slowDown.init(t,void 0,E,T,n)}pullBack(t,n){n*=.001,this.value=this._slowDown.update(n).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const ORIENTATIONMODE$2={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},GetValue$18=Phaser.Utils.Objects.GetValue;class MouseWheelScroller extends ComponentBase{constructor(t,n){if(super(t,n),this.parent!==this.scene?this.focusMode=GetValue$18(n,"focus",!0):this.focusMode=!1,this.setSpeed(GetValue$18(n,"speed",.1)),this.setEnable(GetValue$18(n,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(GetValue$18(n,"inputConfig",void 0)).on("wheel",function(T,E,h,S,e){this.enable&&this.scroll(h)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,n,f,T,E,h){this.enable&&this.scroll(T)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const GetValue$17=Phaser.Utils.Objects.GetValue;var AddSlider=function(s,t,n,f){n=n.toUpperCase();var T=n==="Y",E=s.scrollMode===2,h=s.childrenMap.child,S,e,d=`slider${n}`;if(E||f.hasOwnProperty(d)?S=GetValue$17(f,d,void 0):S=GetValue$17(f,"slider",void 0),S){S===!0&&(S={}),S.orientation=T?1:0,e=CreateScrollbar(s.scene,S);var y,c,u,l=GetValue$17(S,"position",0);typeof l=="string"&&(l=SLIDER_POSITION_MAP[l]);var r=GetValue$17(f,`space.slider${n}`,void 0);r===void 0&&(r=GetValue$17(f,"space.slider",void 0),r===void 0&&(E?r=0:r=GetValue$17(f,"space.child",0)));var a=typeof r=="number";T?l===0?(y=2,c=1,u=a?{left:r}:r):(y=0,c=1,u=a?{right:r}:r):l===0?(y=1,c=2,u=a?{top:r}:r):(y=1,c=0,u=a?{bottom:r}:r),t.add(e,{column:y,row:c,align:"center",padding:u,expand:!0}),s[`hideUnscrollableSlider${n}`]=GetValue$17(S,"hideUnscrollableSlider",!1),s[`adaptThumb${n}SizeMode`]=GetValue$17(S,"adaptThumbSize",!1),s[`minThumb${n}Size`]=GetValue$17(S,"minThumbSize",void 0)}else s[`hideUnscrollableSlider${n}`]=!1,s[`adaptThumb${n}SizeMode`]=!1,s[`minThumb${n}Size`]=void 0;var v,o,p=`scroller${n}`;E||f.hasOwnProperty(p)?v=GetValue$17(f,p,!0):v=GetValue$17(f,"scroller",!0),v&&h&&(v===!0&&(v={}),v.orientation=T?0:1,o=new Scroller(h,v));var m=GetValue$17(f,E?`mouseWheelScroller${n}`:"mouseWheelScroller",!1),g;if(m&&h&&(g=new MouseWheelScroller(h,m)),s.addChildrenMap(`slider${n}`,e),s.addChildrenMap(`scroller${n}`,o),s.addChildrenMap(`mouseWheelScroller${n}`,g),(!E||T)&&(s.hideUnscrollableSlider=s[`hideUnscrollableSlider${n}`],s.adaptThumbSizeMode=s[`adaptThumb${n}SizeMode`],s.minThumbSize=s[`minThumb${n}Size`],s.addChildrenMap("slider",e),s.addChildrenMap("scroller",o),s.addChildrenMap("mouseWheelScroller",g)),e){var x,C;E?(x=T?"t":"s",C=`scroll${n}`):(x="t",C="scroll"),e.on("valuechange",function(P){s[x]=P,s.emit(C,s)})}if(o){var M,C;E?(M=`childO${n}`,C=`scroll${n}`):(M="childOY",C="scroll"),o.on("valuechange",function(w){s[M]=w,s.emit(C,s)})}if(g){var R=`addChildO${n}`;g.on("scroll",function(P){s[R](-P,!0)})}};const SLIDER_POSITION_MAP={right:0,left:1,bottom:0,top:1},GetValue$16=Phaser.Utils.Objects.GetValue;var CreateScrollableSizer=function(s,t){var n=s.scene,f=[0,1,0],T=[0,1,0],E=GetValue$16(t,"width"),h=GetValue$16(t,"height");if(!E){var S=GetValue$16(t,"child.expandWidth",!0);S||(f[1]=0)}if(!h){var e=GetValue$16(t,"child.expandHeight",!0);e||(T[1]=0)}var d=new GridSizer(n,{column:3,row:3,columnProportions:f,rowProportions:T});switch(AddChild(s,d,t),s.scrollMode){case 0:AddSlider(s,d,"y",t);break;case 1:AddSlider(s,d,"x",t);break;default:AddSlider(s,d,"y",t),AddSlider(s,d,"x",t);break}return d},ResizeController=function(){switch(this.scrollMode){case 0:case 1:SetControllerBounds.call(this),this.updateController(),HideUnscrollableSlider.call(this),AdaptThumbSize.call(this);break;default:SetControllerBounds.call(this,"y"),SetControllerBounds.call(this,"x"),this.updateController(),HideUnscrollableSlider.call(this,"y"),HideUnscrollableSlider.call(this,"x"),AdaptThumbSize.call(this,"y"),AdaptThumbSize.call(this,"x");break}return this},SetControllerBounds=function(s){var t,n,f,T;switch(this.scrollMode){case 0:case 1:t=this.topChildOY,n=this.bottomChildOY,f=this.childrenMap.scroller,T=this.childrenMap.slider;break;default:s=s.toUpperCase(),s==="Y"?(t=this.topChildOY,n=this.bottomChildOY):(t=this.leftChildOX,n=this.rightChildOX),f=this.childrenMap[`scroller${s}`],T=this.childrenMap[`slider${s}`]}f&&f.setBounds(t,n),T&&T.setEnable(t!==n)},HideUnscrollableSlider=function(s){switch(this.scrollMode){case 0:case 1:var t=this.childrenMap.slider;t&&this.hideUnscrollableSlider&&this.setChildVisible(t,this.isOverflow);break;default:s=s.toUpperCase();var t=this.childrenMap[`slider${s}`],n=this[`hideUnscrollableSlider${s}`],f=this[`isOverflow${s}`];t&&n&&this.setChildVisible(t,f);break}},AdaptThumbSize=function(s){switch(this.scrollMode){case 0:case 1:if(!this.adaptThumbSizeMode)return;var E=this.childrenMap.slider;if(!E)return;var t=Math.min(this.childVisibleHeight/this.childHeight,1),h=E.childrenMap.track,S=E.childrenMap.thumb,e=this.minThumbSize;if(this.scrollMode===0){var n=h.displayHeight*t;e!==void 0&&n<e&&(n=e),ResizeGameObject(S,void 0,n)}else{var f=h.displayWidth*t;e!==void 0&&f<e&&(f=e),ResizeGameObject(S,f,void 0)}LayoutSlider(E);break;default:s=s.toUpperCase();var T=this[`adaptThumb${s}SizeMode`];if(!T)return;var E=this.childrenMap[`slider${s}`];if(!E)return;var h=E.childrenMap.track,S=E.childrenMap.thumb,e=this[`minThumb${s}Size`];if(s==="Y"){var t=Math.min(this.childVisibleHeight/this.childHeight,1),n=h.displayHeight*t;e!==void 0&&n<e&&(n=e),ResizeGameObject(S,void 0,n)}else{var t=Math.min(this.childVisibleWidth/this.childWidth,1),f=h.displayWidth*t;e!==void 0&&f<e&&(f=e),ResizeGameObject(S,f,void 0)}LayoutSlider(E);break}},LayoutSlider=function(s){var t=s.minWidth,n=s.minHeight;s.minWidth=s.width,s.minHeight=s.height,s.layout(),s.minWidth=t,s.minHeight=n},UpdateController=function(){switch(this.scrollMode){case 0:case 1:var s=this.childrenMap.scroller,t=this.childrenMap.slider;s&&s.setValue(this.childOY),t&&t.setValue(this.t);break;default:var n=this.childrenMap.scrollerY,f=this.childrenMap.sliderY,T=this.childrenMap.scrollerX,E=this.childrenMap.sliderX;n&&n.setValue(this.childOY),f&&f.setValue(this.t),T&&T.setValue(this.childOX),E&&E.setValue(this.s);break}};const GetValue$15=Phaser.Utils.Objects.GetValue,Clamp$5=Phaser.Math.Clamp;class Scrollable extends Sizer{constructor(t,n){n===void 0&&(n={});var f=GetScrollMode(n),T=f===1;n.orientation=T?0:1,super(t,n),this.type=GetValue$15(n,"type","rexScrollable"),this.scrollMode=f;var E=GetValue$15(n,"background",void 0);E&&this.addBackground(E);var h=GetValue$15(n,"header",void 0);if(h){var S=GetValue$15(n,"align.header","center"),e=GetValue$15(n,"space.header",0),d;T?d={right:e}:d={bottom:e},this.add(h,{proportion:0,align:S,padding:d,expand:GetValue$15(n,"expand.header",!0)})}var y=CreateScrollableSizer(this,n);y&&this.add(y,{proportion:1,align:"center",padding:0,expand:!0});var c=GetValue$15(n,"footer",void 0);if(c){var S=GetValue$15(n,"align.footer","center"),u=GetValue$15(n,"space.footer",0),d;T?d={left:u}:d={top:u},this.add(c,{proportion:0,align:S,padding:d,expand:GetValue$15(n,"expand.footer",!0)})}this.addChildrenMap("background",E),this.addChildrenMap("header",h),this.addChildrenMap("footer",c),this.runLayoutFlag=!1}postLayout(t,n,f){return this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0),this.scrollMode===2&&this.setS(0)),this}set t(t){var n=this.childMargin;if(n.top!==0||n.bottom!==0){var f=this.childrenMap.child,T=f.topChildOY-f.bottomChildOY,E=T+n.top+n.bottom,h=E*t-n.top;t=T!==0?h/T:0}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,n=this.childMargin;if(n.top!==0||n.bottom!==0){var f=this.childrenMap.child,T=f.topChildOY-f.bottomChildOY,E=T+n.top+n.bottom,h=T*t+n.top;t=E!==0?h/E:0}return t}set s(t){var n=this.childMargin;if(n.left!==0||n.right!==0){var f=this.childrenMap.child,T=f.leftChildOX-f.rightChildOX,E=T+n.left+n.right,h=E*t-n.left;t=T!==0?h/T:0}this.childrenMap.child.s=t,this.updateController()}get s(){var t=this.childrenMap.child.s,n=this.childMargin;if(n.left!==0||n.right!==0){var f=this.childrenMap.child,T=f.leftChildOX-f.rightChildOX,E=T+n.left+n.right,h=T*t+n.left;t=E!==0?h/E:0}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}set childOX(t){this.childrenMap.child.childOX=t,this.updateController()}get childOX(){return this.childrenMap.child.childOX}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get leftChildOX(){return this.childrenMap.child.leftChildOX+this.childMargin.left}get rightChildOX(){return this.childrenMap.child.rightChildOX-this.childMargin.right}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get childVisibleWidth(){return this.childrenMap.child.childVisibleWidth}get childWidth(){return this.childrenMap.child.childWidth}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get isOverflowY(){return this.isOverflow}get isOverflowX(){var t=this.childrenMap.child;return t.leftChildOX!==t.rightChildOX}setChildOY(t,n){return n===void 0&&(n=!1),n&&(t=Clamp$5(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,n){return this.setChildOY(this.childOY+t,n),this}setT(t,n){return n===void 0&&(n=!1),n&&(t=Clamp$5(t,0,1)),this.t=t,this}addT(t,n){return this.setT(this.t+t,n),this}scrollToTop(){return this.t=0,this}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}setChildOX(t,n){return n===void 0&&(n=!1),n&&(t=Clamp$5(t,this.leftChildOX,this.rightChildOX)),this.childOX=t,this}addChildOX(t,n){return this.setChildOX(this.childOX+t,n),this}setS(t,n){return n===void 0&&(n=!1),n&&(t=Clamp$5(t,0,1)),this.s=t,this}addS(t,n){return this.setS(this.s+t,n),this}scrollToLeft(){return this.s=0,this}scrollToRight(){if(this.s=1,this.s===0)return this;do this.s=1;while(this.s!==1);return this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var n=this.childrenMap.slider;n&&n.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get sliderYEnable(){return this.sliderEnable}set sliderYEnable(t){this.sliderEnable=t}setSliderYEnable(t){return this.setSliderEnable(t),this}get sliderXEnable(){var t=this.childrenMap.sliderX;return t?t.enable:!1}set sliderXEnable(t){var n=this.childrenMap.sliderX;n&&n.setEnable(t)}setSliderXEnable(t){return t===void 0&&(t=!0),this.sliderXEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var n=this.childrenMap.scroller;n&&n.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get scrollerYEnable(){return this.scrollerEnable}set scrollerYEnable(t){this.scrollerEnable=t}setScrollerYEnable(t){return this.setScrollerEnable(t),this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var n=this.childrenMap.scrollerX;n&&n.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var n=this.childrenMap.scrollerX;n&&n.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var n=this.childrenMap.mouseWheelScroller;n&&n.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}get mouseWheelScrollerYEnable(){return this.mouseWheelScrollerEnable}set mouseWheelScrollerYEnable(t){this.mouseWheelScrollerEnable=t}setMouseWheelScrollerYEnable(t){return this.setMouseWheelScrollerEnable(t),this}get mouseWheelScrollerXEnable(){var t=this.childrenMap.mouseWheelScrollerX;return t?t.enable:!1}set mouseWheelScrollerXEnable(t){var n=this.childrenMap.mouseWheelScrollerX;n&&n.setEnable(t)}setMouseWheelScrollerXEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerXEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var n=this.childrenMap.child;return n.setInteractive(),n.input.dropZone=t,this}}var Methods$5={resizeController:ResizeController,updateController:UpdateController};Object.assign(Scrollable.prototype,Methods$5);const TextType=0,TagTextType=1,BitmapTextType=2;var GetTextObjectType=function(s){var t;return IsBitmapTextGameObject(s)?t=BitmapTextType:IsTextGameObject(s)?t=TextType:t=TagTextType,t},TextToLines=function(s,t,n){var f=GetTextObjectType(s);switch(f){case TextType:n=s.getWrappedText(t);break;case TagTextType:n=s.getPenManager(t,n);break;case BitmapTextType:s.maxWidth>0?n=s.setText(t).getTextBounds().wrappedText.split(`
`):n=t.split(`
`);break}return n},SetText=function(s){return s!==void 0&&(this.text=s),this.lines=TextToLines(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},TextHeightToLinesCount$1=function(s){return(s-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},LinesCountToTextHeight=function(s){return s*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},GetLines$1=function(s){var t=s+this.visibleLinesCount+1,n;switch(this.textObjectType){case TextType:n=this.lines.slice(s,t).join(`
`);break;case TagTextType:var f=this.lines.getLineStartIndex(s),T=this.lines.getLineEndIndex(t-1);n=this.lines.getSliceTagText(f,T,!0);break;case BitmapTextType:n=this.lines.slice(s,t).join(`
`);break}return n},SetNoWrapText=function(s,t){var n=GetTextObjectType(s);switch(n){case TextType:var E=s.style,f=E.wordWrapWidth,T=E.wordWrapCallback;E.wordWrapWidth=0,E.wordWrapCallback=void 0,s.setText(t),E.wordWrapWidth=f,E.wordWrapCallback=T;break;case TagTextType:var E=s.style,h=E.wrapMode;E.wrapMode=0,s.setText(t),E.wrapMode=h;break;case BitmapTextType:var S=s._maxWidth;s._maxWidth=0,s.setText(t),s._maxWidth=S;break}},ResetTextObjectPosition=function(){var s=this.textObject.rexSizer;this.textObject.y+=s.offsetY-s.preOffsetY,s.preOffsetY=s.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&CropTextObject.call(this)},CropTextObject=function(){if(this.textObject.setCrop){var s=this.textObject.rexSizer.offsetY,t,n;s<=0?(t=-s,n=this.height):(t=0,n=this.height-s),this.textObject.setCrop(0,t,this.width,n)}},UpdateTextObject=function(){var s=Math.max(Math.floor(TextHeightToLinesCount$1.call(this,-this.textOY)),0),t=LinesCountToTextHeight.call(this,s)+this.textOY,n=GetLines$1.call(this,s);return SetNoWrapText(this.textObject,n),this.textObject.rexSizer.offsetY=t,ResetTextObjectPosition.call(this),this},PreLayout=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,PreLayout$4.call(this),this},ResizeText=function(s,t,n){if(n+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===n)){switch(this.textObjectWidth=t,this._textObjectRealHeight=n,this.textObjectType){case TextType:case TagTextType:s.setFixedSize(t,n);var f=s.style,T=Math.max(t,0);this.textObjectType===TextType?f.wordWrapWidth=T:(f.wrapMode===0&&(f.wrapMode=1),f.wrapWidth=T);break;case BitmapTextType:s.setMaxWidth(t);break}this.setText()}},LayoutChildren$1=function(){var s,t,n,f=this.left,T=this.top,E,h,S,e;s=this.textObject,s.rexSizer.hidden||(t=s.rexSizer,n=t.padding,E=f+n.left,h=T+n.top,S=this.width-n.left-n.right,e=this.height-n.top-n.bottom,ResizeText.call(this,s,S,e),AlignIn(s,E,h,S,e,t.align),t.preOffsetY=0,ResetTextObjectPosition.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))};const Methods$4={setText:SetText,updateTextObject:UpdateTextObject,preLayout:PreLayout,layoutChildren:LayoutChildren$1},IsPlainObject$b=Phaser.Utils.Objects.IsPlainObject,GetValue$14=Phaser.Utils.Objects.GetValue,ALIGN_LEFTTOP$1=Phaser.Display.Align.TOP_LEFT;class TextBlock extends Base{constructor(t,n,f,T,E,h){IsPlainObject$b(n)?(h=n,n=GetValue$14(h,"x",0),f=GetValue$14(h,"y",0),T=GetValue$14(h,"width",void 0),E=GetValue$14(h,"height",void 0)):IsPlainObject$b(T)&&(h=T,T=GetValue$14(h,"width",void 0),E=GetValue$14(h,"height",void 0)),super(t,n,f,T,E,h),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=GetValue$14(h,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(GetValue$14(h,"clamplTextOY",!0)),this.alwaysScrollable=GetValue$14(h,"alwaysScrollable",!1);var S=GetValue$14(h,"background",void 0),e=GetValue$14(h,"text",void 0);e===void 0&&(e=CreateDefaultTextObject(t)),this.textCropEnable=GetValue$14(h,"textCrop",!!e.setCrop);var d=GetValue$14(h,"textMask",!this.textCropEnable);S&&this.addBackground(S),this.add(e),this.sizerChildren=[e];var y=this.getSizerConfig(e);y.align=ALIGN_LEFTTOP$1,y.padding=GetBoundsConfig(0),y.expand=!0,this.textObject=e,this.textObjectType=GetTextObjectType(e),y.preOffsetY=0,y.offsetY=0,d&&(this.textMask=AddChildMask.call(this,this.textObject,this)),this.addChildrenMap("background",S),this.addChildrenMap("text",e)}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case TextType:this.lines.length=0;break;case TagTextType:this.lines.destroy();break;case BitmapTextType:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case TextType:case TagTextType:var n=this.textObject.style;t=n.metrics.fontSize+n.strokeThickness;break;case BitmapTextType:var f=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*f;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case TextType:case TagTextType:t=this.textObject.lineSpacing;break;case BitmapTextType:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(TextHeightToLinesCount$1.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=LinesCountToTextHeight.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var n=this.topTextOY,f=this.bottomTextOY,T=this.textOYExceedTop(t),E=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:T?t=n:E&&(t=f)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),T&&(this.execeedTopState||this.emit("execeedtop",this,t,n)),this.execeedTopState=T,E&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=E}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var CreateDefaultTextObject=function(s){return s.add.text(0,0,"")};Object.assign(TextBlock.prototype,Methods$4);var InjectProperties$2=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.textOY},set:function(t){s.textOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTextOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTextOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.textObjectHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.textHeight}})};const SetTextMethods$1={setText(s){var t=this.childrenMap.child;return t.setText(s),this.resizeController(),this},appendText(s){return this.setText(this.text+s),this}},ScrollMethods$2={scrollToLine(s){return this.setChildOY(-this.lineHeight*s),this},scrollToNextLine(s){s===void 0&&(s=1);var t=this.lineIndex+s;return this.scrollToLine(t),this}},GetValue$13=Phaser.Utils.Objects.GetValue;class TextArea extends Scrollable{constructor(t,n){n===void 0&&(n={});var f=GetValue$13(n,"text",void 0),T=GetValue$13(n,"textWidth",void 0),E=GetValue$13(n,"textHeight",void 0),h=GetValue$13(n,"textCrop",!!f.setCrop),S=GetValue$13(n,"textMask",!h),e=GetValue$13(n,"content",""),d=new TextBlock(t,{width:T,height:E,text:f,textMask:S,textCrop:h&&!S,content:e,clamplTextOY:GetValue$13(n,"clamplChildOY",!1),alwaysScrollable:GetValue$13(n,"alwaysScrollable",!1)});t.add.existing(d),InjectProperties$2(d),n.scrollMode=0,n.type="rexTextArea",n.child={gameObject:d,expandWidth:T===void 0,expandHeight:E===void 0};var y=GetValue$13(n,"space",void 0);y&&(y.child=GetValue$13(y,"text",0)),super(t,n),this.addChildrenMap("text",f)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.textHeight}}Object.assign(TextArea.prototype,SetTextMethods$1,ScrollMethods$2);const GetValue$12=Phaser.Utils.Objects.GetValue;var CreateTextArea=function(s,t,n){t=t?DeepClone(t):{};var f=GetValue$12(n,"background",CreateBackground$2),T=GetValue$12(n,"text",CreateText),E=GetValue$12(n,"track",CreateBackground$2),h=GetValue$12(n,"thumb",CreateBackground$2);f?t.background=f(s,t.background):delete t.background,T?t.text=T(s,t.text):delete t.text;var S=t.slider;S!==!1&&(S===void 0&&(S={}),E?S.track=E(s,S.track):delete S.track,h?S.thumb=h(s,S.thumb):delete S.thumb,t.slider=S);var e=new TextArea(s,t);return s.add.existing(e),e};const GetValue$11=Phaser.Utils.Objects.GetValue;var CreateContent=function(s,t,n){var f=GetValue$11(t,"$type");f===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(f="textarea");var T;switch(f){case"textarea":T=new CreateTextArea(s,t,n);break;default:T=new CreateLabel(s,t,n);break}return s.add.existing(T),T};const GetValue$10=Phaser.Utils.Objects.GetValue;class ConfirmDialog extends Dialog{constructor(t,n,f){n=n?DeepClone(n):{},f===void 0&&(f={});var T=GetValue$10(f,"background",CreateBackground$2);T?n.background=T(t,n.background):delete n.background,n.title=CreateLabel(t,n.title,f.title),n.content=CreateContent(t,n.content,f.content),n.content instanceof TextArea&&HasValue(n,"height")&&!HasValue(n,"proportion.content")&&SetValue(n,"proportion.content",1);var E=n.button,h=n.buttonA||E,S=n.buttonB||E,e=n.buttonMode;e===void 0&&(e=h&&S?2:h?1:0);var d=f.button,y=f.buttonA||d,c=f.buttonB||d;switch(e){case 2:n.actions=[CreateLabel(t,h,y),CreateLabel(t,S,c)];break;case 1:n.actions=[CreateLabel(t,h,y)];break;case 0:break;default:n.actions=[];break}var u=n.choice;u&&(n.choices=[]),super(t,n),this.type="rexConfirmDialog",this.buttonMode=e,this.defaultActionConfig=E,this.defaultActionButtonCreator=d,this.defaultChoiceConfig=u,this.defaultChoiceCreator=f.choice;var l=this.childrenMap.actions;this.addChildrenMap("buttonA",l?l[0]:null),this.addChildrenMap("buttonB",l?l[1]:null),RegisterEvents.call(this)}}Object.assign(ConfirmDialog.prototype,Methods$6);ObjectFactory.register("confirmDialog",function(s,t){var n=new ConfirmDialog(this.scene,s,t);return this.scene.add.existing(n),n});SetValue(window,"RexPlugins.UI.ConfirmDialog",ConfirmDialog);const GetValue$$=Phaser.Utils.Objects.GetValue;var GetAddChildConfig=function(s,t,n){var f=GetValue$$(s,`proportion.${t}`,n.proportion),T=GetValue$$(s,`align.${t}`,"center"),E=GetValue$$(s,`space.${t}`,void 0);if(typeof E=="number"&&n.paddingKey){var h=E;E={},E[n.paddingKey]=h}var S=GetValue$$(s,`expand.${t}`,!0);return{proportion:f,align:T,padding:E,expand:S}},GetAddHeaderConfig=function(s){return GetAddChildConfig(s,"header",{proportion:0,paddingKey:"bottom"})},GetAddLeftSideConfig=function(s){return GetAddChildConfig(s,"leftSide",{proportion:0,paddingKey:"right"})},GetAddContentConfig=function(s){return GetAddChildConfig(s,"content",{proportion:1})},GetAddRightSideConfig=function(s){return GetAddChildConfig(s,"rightSide",{proportion:0,paddingKey:"left"})},GetAddFooterConfig=function(s){return GetAddChildConfig(s,"footer",{proportion:0,paddingKey:"top"})},GetAddContainerConfig=function(s){return{proportion:1,align:"center",padding:0,expand:!0}},CreatExpandContainer=function(s,t){var n=new Sizer(s,{orientation:t});return s.add.existing(n),n},LayoutMode0$1=function(s){var t=this.scene,n=s.header;n&&this.add(n,GetAddHeaderConfig(s));var f=CreatExpandContainer(t,0);this.add(f,GetAddContainerConfig());var T=s.leftSide;T&&f.add(T,GetAddLeftSideConfig(s));var E=s.content;E&&f.add(E,GetAddContentConfig(s));var h=s.rightSide;h&&f.add(h,GetAddRightSideConfig(s));var S=s.footer;S&&this.add(S,GetAddFooterConfig(s))},LayoutMode1=function(s){var t=this.scene,n=s.header;n&&this.add(n,GetAddHeaderConfig(s));var f=CreatExpandContainer(t,0);this.add(f,GetAddContainerConfig());var T=s.leftSide;T&&f.add(T,GetAddLeftSideConfig(s));var E=CreatExpandContainer(t,1);f.add(E,GetAddContainerConfig());var h=CreatExpandContainer(t,0);E.add(h,GetAddContainerConfig());var S=s.content;S&&h.add(S,GetAddContentConfig(s));var e=s.rightSide;e&&h.add(e,GetAddRightSideConfig(s));var d=s.footer;d&&E.add(d,GetAddFooterConfig(s))},LayoutMode2=function(s){var t=this.scene,n=s.header;n&&this.add(n,GetAddHeaderConfig(s));var f=CreatExpandContainer(t,0);this.add(f,GetAddContainerConfig());var T=CreatExpandContainer(t,1);f.add(T,GetAddContainerConfig());var E=CreatExpandContainer(t,0);T.add(E,GetAddContainerConfig());var h=s.leftSide;h&&E.add(h,GetAddLeftSideConfig(s));var S=s.content;S&&E.add(S,GetAddContentConfig(s));var e=s.footer;e&&T.add(e,GetAddFooterConfig(s));var d=s.rightSide;d&&f.add(d,GetAddRightSideConfig(s))},LayoutMode0=function(s){var t=this.scene,n=s.header;n&&this.add(n,GetAddHeaderConfig(s));var f=CreatExpandContainer(t,0);this.add(f,GetAddContainerConfig());var T=s.leftSide;T&&f.add(T,GetAddLeftSideConfig(s));var E=CreatExpandContainer(t,1);f.add(E,GetAddContainerConfig());var h=s.content;h&&E.add(h,GetAddContentConfig(s));var S=s.footer;S&&E.add(S,GetAddFooterConfig(s));var e=s.rightSide;e&&f.add(e,GetAddRightSideConfig(s))};const GetValue$_=Phaser.Utils.Objects.GetValue,LayoutCallbacks=[LayoutMode0$1,LayoutMode1,LayoutMode2,LayoutMode0];var Build=function(s){this.clear(!0);var t=GetValue$_(s,"background",void 0);t&&this.addBackground(t);var n=GetValue$_(s,"layoutMode",0);typeof n=="string"&&(n=LayoutModesMap[n.toUpperCase()]);var f=LayoutCallbacks[n]||LayoutCallbacks[0];f.call(this,s),this.addChildrenMap("background",s.background),this.addChildrenMap("header",s.header),this.addChildrenMap("leftSide",s.leftSide),this.addChildrenMap("content",s.content),this.addChildrenMap("rightSide",s.rightSide),this.addChildrenMap("footer",s.footer)};const LayoutModesMap={FFF:0,LFF:1,FFR:2,LFR:3};class HolyGrail extends Sizer{constructor(t,n){n===void 0&&(n={}),n.orientation=1,super(t,n),this.type="rexHolyGrail",this.build(n)}}var methods$c={build:Build};Object.assign(HolyGrail.prototype,methods$c);ObjectFactory.register("holyGrail",function(s){var t=new HolyGrail(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.HolyGrail",HolyGrail);const ButtonMethods={getButtonsSizer(s){return this.childrenMap[`${s}ButtonsSizer`]},getButton(s,t){var n=this.getButtonsSizer(s);return n?n.getButton(t):void 0},setButtonEnable(s,t,n){return this.getButtonsSizer(s).setButtonEnable(t,n),this},setLeftButtonEnable(s,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(s,t),this},setRightButtonEnable(s,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(s,t),this},setTopButtonEnable(s,t){return this.childrenMap.topButtonsSizer.setButtonEnable(s,t),this},setBottomButtonEnable(s,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(s,t),this},toggleButtonEnable(s,t){return this.getButtonsSizer(s).toggleButtonEnable(t),this},toggleLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(s),this},toggleRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(s),this},toggleTopButtonEnable(s){return this.childrenMap.topButtonsSizer.toggleButtonEnable(s),this},toggleBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(s),this},getButtonEnable(s,t){return this.getButtonsSizer(s).getButtonEnable(t)},getLeftButtonEnable(s){return this.childrenMap.leftButtonsSizer.getButtonEnable(s)},getRightButtonEnable(s){return this.childrenMap.rightButtonsSizer.getButtonEnable(s)},getTopButtonEnable(s){return this.childrenMap.topButtonsSizer.getButtonEnable(s)},getBottomButtonEnable(s){return this.childrenMap.bottomButtonsSizer.getButtonEnable(s)},emitButtonClick(s,t){var n=this.getButtonsSizer(s);return n?(n.emitButtonClick(t),this):this},emitLeftButtonClick(s){return this.childrenMap.leftButtonsSizer.emitButtonClick(s),this},emitRightButtonClick(s){return this.childrenMap.rightButtonsSizer.emitButtonClick(s),this},emitTopButtonClick(s){return this.childrenMap.topButtonsSizer.emitButtonClick(s),this},emitBottomButtonClick(s){return this.childrenMap.bottomButtonsSizer.emitButtonClick(s),this},getLeftButton(s){return this.childrenMap.leftButtonsSizer.getButton(s)},getRightButton(s){return this.childrenMap.rightButtonsSizer.getButton(s)},getTopButton(s){return this.childrenMap.topButtonsSizer.getButton(s)},getBottomButton(s){return this.childrenMap.bottomButtonsSizer.getButton(s)},showButton(s,t){return Show(this.getButton(s,t)),this},showLeftButton(s){return Show(this.getLeftButton(s)),this},showRightButton(s){return Show(this.getRightButton(s)),this},showTopButton(s){return Show(this.getTopButton(s)),this},showBottomButton(s){return Show(this.getBottomButton(s)),this},hideButton(s,t){return Hide(this.getButton(s,t)),this},hideLeftButton(s){return Hide(this.getLeftButton(s)),this},hideRightButton(s){return Hide(this.getRightButton(s)),this},hideTopButton(s){return Hide(this.getTopButton(s)),this},hideBottomButton(s){return Hide(this.getBottomButton(s)),this},addButton(s,t){return this.getButtonsSizer(s).addButton(t),this},addLeftButton(s){return this.addButton("left",s),this},addRightButton(s){return this.addButton("right",s),this},addTopButton(s){return this.addButton("top",s),this},removeButton(s,t,n){return this.getButtonsSizer(s).removeButton(t,n),this},removeLeftButton(s,t){return this.removeButton("left",s,t),this},removeRightButton(s,t){return this.removeButton("right",s,t),this},removeTopButton(s,t){return this.removeButton("top",s,t),this},removeBottomButton(s,t){return this.removeButton("bottom",s,t),this},clearButtons(s,t){return this.getButtonsSizer(s).clearButtons(t),this},clearLeftButtons(s){return this.clearButtons("left",s),this},clearRightButtons(s){return this.clearButtons("right",s),this},clearTopButtons(s){return this.clearButtons("top",s),this},clearBottomButtonss(s){return this.clearButtons("bottom",s),this},forEachButton(s,t,n){return this.getButtonsSizer(s).forEachButtton(t,n),this},forEachLeftButton(s,t){return this.childrenMap.leftButtonsSizer.forEachButtton(s,t),this},forEachRightButton(s,t){return this.childrenMap.rightButtonsSizer.forEachButtton(s,t),this},forEachTopButton(s,t){return this.childrenMap.topButtonsSizer.forEachButtton(s,t),this},forEachBottomButton(s,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(s,t),this}},GetValue$Z=Phaser.Utils.Objects.GetValue;class Tabs extends GridSizer{constructor(t,n){n===void 0&&(n={}),n.column=3,n.row=3,super(t,n),this.type="rexTabs",this.eventEmitter=GetValue$Z(n,"eventEmitter",this);var f=GetValue$Z(n,"background",void 0),T=GetValue$Z(n,"panel",void 0),E=GetValue$Z(n,"leftButtons",void 0),h=GetValue$Z(n,"leftButtonsBackground",void 0),S,e=GetValue$Z(n,"rightButtons",void 0),d=GetValue$Z(n,"rightButtonsBackground",void 0),y,c=GetValue$Z(n,"topButtons",void 0),u=GetValue$Z(n,"topButtonsBackground",void 0),l,r=GetValue$Z(n,"bottomButtons",void 0),a=GetValue$Z(n,"bottomButtonsBackground",void 0),v,o=GetValue$Z(n,"click",void 0);if(f&&this.addBackground(f),T&&this.add(T,1,1,"center",0,!0),E){var p=GetValue$Z(n,"space.leftButtonsOffset",0),m=GetValue$Z(n,"space.leftButton",0);S=new Buttons$1(t,{groupName:"left",background:h,buttons:E,orientation:1,space:{item:m},align:GetValue$Z(n,"align.leftButtons",void 0),click:o,eventEmitter:this.eventEmitter});var g={top:p};this.add(S,0,1,"top",g,!1)}if(e){var x=GetValue$Z(n,"space.rightButtonsOffset",0),C=GetValue$Z(n,"space.rightButton",0);y=new Buttons$1(t,{groupName:"right",background:d,buttons:e,orientation:1,space:{item:C},align:GetValue$Z(n,"align.rightButtons",void 0),click:o,eventEmitter:this.eventEmitter});var g={top:x};this.add(y,2,1,"top",g,!1)}if(c){var M=GetValue$Z(n,"space.topButtonsOffset",0),R=GetValue$Z(n,"space.topButton",0);l=new Buttons$1(t,{groupName:"top",background:u,buttons:c,orientation:0,space:{item:R},align:GetValue$Z(n,"align.topButtons",void 0),click:o,eventEmitter:this.eventEmitter});var g={left:M};this.add(l,1,0,"left",g,!1)}if(r){var P=GetValue$Z(n,"space.bottomButtonsOffset",0),w=GetValue$Z(n,"space.bottomButton",0);v=new Buttons$1(t,{groupName:"bottom",background:a,buttons:r,orientation:0,space:{item:w},align:GetValue$Z(n,"align.bottomButtons",void 0),click:o,eventEmitter:this.eventEmitter});var g={left:P};this.add(v,1,2,"left",g,!1)}this.addChildrenMap("background",f),this.addChildrenMap("panel",T),this.addChildrenMap("leftButtons",E),this.addChildrenMap("rightButtons",e),this.addChildrenMap("topButtons",c),this.addChildrenMap("bottomButtons",r),this.addChildrenMap("leftButtonsSizer",S),this.addChildrenMap("rightButtonsSizer",y),this.addChildrenMap("topButtonsSizer",l),this.addChildrenMap("bottomButtonsSizer",v)}}Object.assign(Tabs.prototype,ButtonMethods);ObjectFactory.register("tabs",function(s){var t=new Tabs(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Tabs",Tabs);ObjectFactory.register("slider",function(s){var t=new Slider(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Slider",Slider);class Cell{constructor(t,n){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,n){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,n),this}setCellContainerAlign(t){return typeof t=="string"&&(t=AlignConst[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var n=this.parent;this._deltaHeight===0&&t!==0?n.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&n.nonZeroDeltaHeightCount--;var f=this._deltaHeight!==t;if(this._deltaHeight=t,f){n.resetTotalRowsHeight();var T=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(T,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(Cell.prototype,DataMethods$2);const GetValue$Y=Phaser.Utils.Objects.GetValue,SpliceOne=Phaser.Utils.Array.SpliceOne;class Table{constructor(t,n){this.parent=t,this.cells=[],this.cellPool=new Stack,this.resetFromJSON(n)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var n=t.cellHeight;n===void 0&&(n=30);var f=t.cellWidth;return f===void 0&&(f=30),this.setDefaultCellHeight(n),this.setDefaultCellWidth(f),this.initCells(GetValue$Y(t,"cellsCount",0)),this.setColumnCount(GetValue$Y(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var n=this.cells;n.length=t;for(var f=0;f<t;f++)n[f]=null;return this}insertNewCells(t,n){var f=this.cells;if(t===f.length){var T=t+n;f.legth=T;for(var E=t;E<T;E++)f[E]=null}else{var h=[];h.length=n;for(var E=0;E<n;E++)h[E]=null;this.cells.splice(t,0,...h)}return this.resetTotalRowsHeight(),this}removeCells(t,n){for(var f=t+n,T=t;T<f;T++)this.freeCell(T);return f===this.cells.length?this.cells.length=t:(n===1?SpliceOne(this.cells,t):this.cells.splice(t,n),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,n){if(n===void 0&&(n=0),t===0)return 0;if(this.defaultCellHeightMode){var S=t/this.defaultCellHeight;switch(n){case 1:S=Math.ceil(S);break;default:S=Math.floor(S);break}return S}for(var f=this.rowCount,T=t,E,h,S=0;;)if(h=this.getRowHeight(S),T-=h,E=S>=0&&S<f,T>0&&E)S+=1;else{if(T===0)return n===2&&(S+=1),S;if(n===1){var e=S;S+=1,E=S>=0&&S<f,E||(S=e)}return S}}widthToColIndex(t,n){if(t===0)return 0;var f=t/this.defaultCellWidth;return n?f=Math.ceil(f):f=Math.floor(f),f}colRowToCellIndex(t,n){return t>=this.colCount?null:n*this.colCount+t}rowIndexToHeight(t,n){if(this.defaultCellHeightMode)return(n-t+1)*this.defaultCellHeight;for(var f,T=0,E=t;E<=n;E++)f=this.getRowHeight(E),T+=f;return T}colIndexToWidth(t,n){return(n-t+1)*this.defaultCellWidth}getRowHeight(t){var n=this.colCount;if(n<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var f=0,T,E=0;E<n;E++)T=this.getCellHeight(this.colRowToCellIndex(E,t)),f<T&&(f=T);return f}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var n;if(this.defaultCellHeightMode)n=this.defaultCellHeight;else{var f=this.getCell(t,!1),T=f?f.deltaHeight:0;n=this.defaultCellHeight+T}return n}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,n){if(!this.isValidCellIdx(t))return null;if(n===void 0&&(n=!0),this.cells[t]===null&&n){var f=this.newCell(t);this.cells[t]=f}return this.cells[t]}newCell(t){var n=this.cellPool.pop();return n===null?n=new Cell(this):n.setParent(this),n.index=t,n}buildCellIndex(t){t===void 0&&(t=0);for(var n=this.cells,f,T=t,E=n.length;T<E;T++)f=n[T],f&&(f.index=T);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var SetTableOY=function(s){var t=this.table,n=this.topTableOY,f=this.bottomTableOY,T=s>this.topTableOY,E=s<this.bottomTableOY;if(this.clampTableOXY){var h=t.rowCount,S=t.heightToRowIndex(this.instHeight,1);h<S?s=0:T?s=n:E&&(s=f)}return this._tableOY!==s&&(this._tableOY=s),T&&(this.execeedTopState||this.emit("execeedtop",this,s,n)),this.execeedTopState=T,E&&(this.execeedBottomState||this.emit("execeedbottom",this,s,f)),this.execeedBottomState=E,this},SetTableOX=function(s){var t=this.table,n=this.leftTableOX,f=this.rightTableOX,T=s>this.leftTableOX,E=s<this.rightTableOX;if(this.clampTableOXY){var h=t.colCount,S=t.widthToColIndex(this.instWidth,!0);h<S?s=0:T?s=n:E&&(s=f)}return this._tableOX!==s&&(this._tableOX=s),T&&(this.execeedLeftState||this.emit("execeedleft",this,s,n)),this.execeedLeftState=T,E&&(this.execeedRightState||this.emit("execeedright",this,s,f)),this.execeedRightState=E,this},MaskToGameObject=function(s){return s.hasOwnProperty("geometryMask")?s.geometryMask:s.bitmapMask};const Intersects=Phaser.Geom.Intersects.RectangleToRectangle,Overlaps=Phaser.Geom.Rectangle.Overlaps;var MaskChildren=function(s,t,n){if(t){n===void 0&&(n=s.getAllChildren());for(var f=s.getBounds(),T=MaskToGameObject(t),E,h,S,e=0,d=n.length;e<d;e++)if(E=n[e],E!==T&&IsVisible(E))if(E.getBounds)switch(h=E.getBounds(h),S=ContainsPoints(f,h),S){case 4:ShowAll(s,E);break;case 0:Intersects(f,h)||Overlaps(f,h)?ShowSome(s,E,t):ShowNone(s,E);break;default:ShowSome(s,E,t);break}else ShowSome(s,E,t)}},IsVisible=function(s){if(!s.displayList)return!1;for(;;){var t=s.rexContainer;if(t)if(t.visible){var n=t.parent;if(n){s=n;continue}else return!0}else return!1;else return s.visible}},ContainsPoints=function(s,t){var n=t.top,f=t.bottom,T=t.left,E=t.right,h=0;return h+=s.contains(T,n)?1:0,h+=s.contains(T,f)?1:0,h+=s.contains(E,n)?1:0,h+=s.contains(E,f)?1:0,h},ShowAll=function(s,t,n){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,s.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),s.setChildMaskVisible(t,!0))},ShowSome=function(s,t,n){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,s.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.setMask&&t.setMask(n),s.setChildMaskVisible(t,!0))},ShowNone=function(s,t,n){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,s.setChildMaskVisible(t,!1),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),s.setChildMaskVisible(t,!1))};const GetValue$X=Phaser.Utils.Objects.GetValue,MASKUPDATEMODE={update:0,everyTick:1},ChildrenMaskMethods={setupChildrenMask(s){return s===!1?this:(this.setMaskUpdateMode(GetValue$X(s,"updateMode",0)),this.enableChildrenMask(GetValue$X(s,"padding",0)),this.setMaskLayer(GetValue$X(s,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(s){return typeof s=="string"&&(s=MASKUPDATEMODE[s]),this.maskUpdateMode=s,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(s){var t=AddChildMask.call(this,null,this,0,s);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(s){return s===void 0&&(s=!0),this.maskChildrenFlag=s,this},setMaskLayer(s){return this.maskLayer=s,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):MaskChildren(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var s=MaskToGameObject(this.childrenMask);return s.setPosition().resize(),this.resetChildPositionState(s),this}};var ShowCells=function(){if(this.cellsCount!==0){var s=this.table;this.startRowIndex=Math.max(s.heightToRowIndex(-this.tableOY,2),0);for(var t=this.startRowIndex,n=Math.max(s.widthToColIndex(-this.tableOX),0),f=n,T=s.colRowToCellIndex(f,t),E=this.bottomBound,h=this.rightBound,S=s.cellsCount-1,e=s.colCount-1,d=this.getCellTLX(f),y=d,c=this.getCellTLY(t);c<E&&T<=S;){if(this.table.isValidCellIdx(T)){var u=s.getCell(T,!0);this.visibleCells.set(u),this.preVisibleCells.contains(u)||this.showCell(u);var l,r;if(this.scrollMode===0?(l=y,r=c):(l=c,r=y),u.cellContainerAlign==null)u.setXY(l,r);else{var a=u.getContainer();AlignIn(a,l,r,u.width,u.height,u.cellContainerAlign),u.setXY(a.x,a.y)}}y<h&&f<e?(y+=s.getColWidth(f),f+=1):(y=d,c+=s.getRowHeight(t),f=n,t+=1),T=s.colRowToCellIndex(f,t)}}},ShowCell=function(s){var t=null,n=s.getContainer();if(n?(t=n,s.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",s,t,this),this.cellContainersPool){var n=s.getContainer();n?t===null?this.cellContainersPool.add(n):t!==n&&(this.cellContainersPool.add(n),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},GetCellTLX=function(s){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,n=this.tableOX+this.table.colIndexToWidth(0,s-1)+t;return n},GetCellTLY=function(s){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,n=this.tableOY+this.table.rowIndexToHeight(0,s-1)+t;return n},HideCells=function(){var s=this.preVisibleCells,t=this.visibleCells;s.iterate(function(n){t.contains(n)||this.hideCell(n)},this)},HideCell=function(s){if(this.emit("cellinvisible",s),this.cellContainersPool){var t=s.popContainer();t&&this.cellContainersPool.killAndHide(t)}s.destroyContainer()},UpdateTable=function(s){return s===void 0&&(s=!1),s&&(ClearVisibleCellIndexes.call(this),this.hideCells()),ClearVisibleCellIndexes.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},ClearVisibleCellIndexes=function(){var s=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=s,this.visibleCells.clear()},IsCellVisible=function(s){var t=this.table.getCell(s,!1);return t&&this.visibleCells.contains(t)},PointToCellIndex=function(s,t){t-=this.y+this.topLeftY,s-=this.x+this.topLeftX;var n=this.tableOY-(this.scrollMode===0?t:s),f=this.tableOX-(this.scrollMode===0?s:t),T=this.table,E=T.heightToRowIndex(-n,0),h=T.widthToColIndex(-f),S=T.colRowToCellIndex(h,E);return S===null||!this.isCellVisible(S)?null:S},PointToCellContainer=function(s,t){var n=PointToCellIndex.call(this,s,t);if(n!==null)return this.getCellContainer(n)},EachVisibleCell=function(s,t){return this.visibleCells.each(s,t),this},IterateVisibleCell=function(s,t){return this.visibleCells.iterate(s,t),this},EachCell=function(s,t){return this.table.cells.slice().forEach(s,t),this},IterateCell=function(s,t){return this.table.cells.forEach(s,t),this},SetCellsCount=function(s){var t=this.cellsCount;return t===s?this:(t>s?this.removeCells(s,t-s):this.insertNewCells(t,s-t),this)};const Clamp$4=Phaser.Math.Clamp;var InsertNewCells=function(s,t){return typeof s=="object"&&(s=s.index),t===void 0&&(t=1),t<=0?this:(s=Clamp$4(s,0,this.cellsCount),this.table.insertNewCells(s,t),this)},RemoveCells=function(s,t){if(typeof s=="object"&&(s=s.index),t===void 0&&(t=1),s<0&&(t+=s,s=0),t<=0)return this;if(s>this.cellsCount)return this;for(var n,f=s,T=s+t;f<T;f++)n=this.getCell(f,!1),n&&(this.visibleCells.contains(n)&&(HideCell.call(this,n),this.visibleCells.delete(n)),this.preVisibleCells.delete(n));return this.table.removeCells(s,t),this},SetColumnCount=function(s){return this.table.colCount===s?this:(this.table.setColumnCount(s),this)},SetGridSize=function(s,t){return this.setCellsCount(s*t),this.table.setColumnCount(s),this},UpdateVisibleCell=function(s){var t=this.table.getCell(s,!1);return!t||!t.container?this:(ShowCell.call(this,t),this)},methods$b={setTableOY:SetTableOY,setTableOX:SetTableOX,showCells:ShowCells,showCell:ShowCell,getCellTLX:GetCellTLX,getCellTLY:GetCellTLY,hideCells:HideCells,hideCell:HideCell,updateTable:UpdateTable,isCellVisible:IsCellVisible,pointToCellIndex:PointToCellIndex,pointToCellContainer:PointToCellContainer,eachVisibleCell:EachVisibleCell,iterateVisibleCell:IterateVisibleCell,eachCell:EachCell,iterateCell:IterateCell,setCellsCount:SetCellsCount,insertNewCells:InsertNewCells,removeCells:RemoveCells,setColumnCount:SetColumnCount,setGridSize:SetGridSize,updateVisibleCell:UpdateVisibleCell};Object.assign(methods$b,ChildrenMaskMethods);const Group=Phaser.GameObjects.Group,Set=Phaser.Structs.Set,GetValue$W=Phaser.Utils.Objects.GetValue;let GridTable$1=class extends ContainerLite{constructor(t,n,f,T,E,h){h===void 0&&(h={}),super(t,n,f,T,E),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Set,this.preVisibleCells=new Set,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var S=GetValue$W(h,"reuseCellContainer",!1);S&&(this.cellContainersPool=new Group(t));var e=GetValue$W(h,"cellVisibleCallback",null);if(e!==null){var d=GetValue$W(h,"cellVisibleCallbackScope",void 0);this.on("cellvisible",e,d)}if(e=GetValue$W(h,"cellInvisibleCallback",null),e!==null){var d=GetValue$W(h,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",e,d)}GetValue$W(h,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(GetValue$W(h,"mask",void 0)),this.setScrollMode(GetValue$W(h,"scrollMode",0)),this.setClampMode(GetValue$W(h,"clamplTableOXY",!0));var y,c,u,l=this.scrollMode===0;if(l?(y=h.cellWidth,c=h.cellHeight,u=h.columns):(y=h.cellHeight,c=h.cellWidth,u=GetValue$W(h,"rows",h.columns)),u||(u=1),this.expandCellSize=y===void 0,this.expandCellSize){var T=l?this.width:this.height;y=T/u}h.cellWidth=y,h.cellHeight=c,h.columns=u,this.table=new Table(this,h),this.updateTable()}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=SCROLLMODE[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,n){return this.setTableOY(n).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,n){return this.addTableOY(n).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}setTableOXByPercentage(t){return this.setTableOX(-this.tableVisibleWidth*t),this}getTableOXPercentage(){var t=this.tableVisibleWidth;return t===0?0:this.tableOX/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}set s(t){this.setTableOXByPercentage(t).updateTable()}get s(){return this.getTableOXPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(t){this.scrollToBottom();var n=this.table.rowIndexToHeight(0,t-1);return this.setTableOY(-n).updateTable(),this}scrollToNextRow(t){return t===void 0&&(t=1),this.scrollToRow(this.startRowIndex+t),this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var n=this.table.getCell(t,!1),f;return n&&(f=n.getContainer()),f}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,n){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.height=n,this}setCellWidth(t,n){var f;return typeof t=="number"?f=this.table.getCell(t,!0):f=t,f.width=n,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t=this.tableWidth-this.instWidth;return t<0&&(t=0),t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,n){return this.width===t&&this.height===n?this:(super.resize(t,n),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}};Object.assign(GridTable$1.prototype,methods$b);const SCROLLMODE={v:0,vertical:0,h:1,horizontal:1};var InjectProperties$1=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.tableOY},set:function(t){s.tableOY=t}}),Object.defineProperty(s,"childOX",{configurable:!0,get:function(){return s.tableOX},set:function(t){s.tableOX=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTableOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTableOY}}),Object.defineProperty(s,"leftChildOX",{get:function(){return s.leftTableOX}}),Object.defineProperty(s,"rightChildOX",{get:function(){return s.rightTableOX}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.instHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.tableHeight}}),Object.defineProperty(s,"childVisibleWidth",{get:function(){return s.instWidth}}),Object.defineProperty(s,"childWidth",{get:function(){return s.tableWidth}})},TableOnCellVisible=function(s){s.on("cellvisible",function(t,h,f){var T=this.createCellContainerCallback,E=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var h;E?h=T.call(E,t,h,f):h=T(t,h,f),h&&(t.cellContainerAlign==null&&h.setOrigin&&h.setOrigin(0),h.isRexSizer&&h.layout()),t.item=void 0,t.items=void 0,t.setContainer(h)},this)},EmitCellEvent=function(s,t,n,f,T,E,h){var S;if(T===void 0?S=f:S=n.pointToCellIndex(f,T),S!=null){var e=n.getCellContainer(S);e&&s.emit(t,e,S,E,h)}},PointerUpDownCell=function(s,t){s.on("pointerdown",function(n,f,T,E){EmitCellEvent(this.eventEmitter,"cell.down",s,n.worldX,n.worldY,n,E)},this).on("pointerup",function(n,f,T,E){EmitCellEvent(this.eventEmitter,"cell.up",s,n.worldX,n.worldY,n,E)},this)},OverCell=function(s,t){s.on("pointermove",OnMove,this).on("pointerover",OnMove,this).on("pointerout",OnOut,this)},OnMove=function(s,t,n,f){var T=this.childrenMap.child,E=T.pointToCellIndex(s.worldX,s.worldY);if(E!==T.input.lastOverCellIndex){var h=T.input.lastOverCellIndex;T.input.lastOverCellIndex=E,EmitCellEvent(this.eventEmitter,"cell.out",T,h,void 0,s,f),EmitCellEvent(this.eventEmitter,"cell.over",T,E,void 0,s,f)}},OnOut=function(s,t){var n=this.childrenMap.child,f=n.input.lastOverCellIndex;n.input.lastOverCellIndex=void 0,EmitCellEvent(this.eventEmitter,"cell.out",n,f,void 0,s,t)};const GetValue$V=Phaser.Utils.Objects.GetValue;var ClickCell=function(s,t){var n=GetValue$V(t,"click",void 0);n!==!1&&(n===void 0&&(n={}),n.threshold=10,s._click=new Button(s,n),s._click.on("click",function(f,T,E,h){EmitCellEvent(this.eventEmitter,"cell.click",T,E.worldX,E.worldY,E,h)},this))};const GetValue$U=Phaser.Utils.Objects.GetValue;var TapCell=function(s,t){var n=GetValue$U(t,"tap",void 0);n!==!1&&(s._tap=new Tap(s,n),s._tap.on("tap",function(f,T,E){var h=`cell.${f.tapsCount}tap`;EmitCellEvent(this.eventEmitter,h,f.gameObject,f.worldX,f.worldY,E)},this))};const GetValue$T=Phaser.Utils.Objects.GetValue;var PressCell=function(s,t){var n=GetValue$T(t,"press",void 0);n!==!1&&(s._press=new Press(s,n),s._press.on("pressstart",function(f,T,E){EmitCellEvent(this.eventEmitter,"cell.pressstart",s,f.worldX,f.worldY,E)},this).on("pressend",function(f,T,E){EmitCellEvent(this.eventEmitter,"cell.pressend",s,f.worldX,f.worldY,E)},this))};const GetValue$S=Phaser.Utils.Objects.GetValue;var SwipeCell=function(s,t){var n=GetValue$S(t,"swipe",void 0);n!==!1&&(n===void 0&&(n={}),n.dir="4dir",s._swipe=new Swipe(s,n),s._swipe.on("swipe",function(f,T,E){var h=f.left?"left":f.right?"right":f.up?"up":"down";EmitCellEvent(this.eventEmitter,`cell.swipe${h}`,s,f.worldX,f.worldY,E)},this))},TableSetInteractive=function(s,t){s.setInteractive(),PointerUpDownCell.call(this,s,t),OverCell.call(this,s,t),ClickCell.call(this,s,t),TapCell.call(this,s,t),PressCell.call(this,s,t),SwipeCell.call(this,s,t)},SetItems=function(s){s===void 0?this.items=[]:this.items=s;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const ScrollMethods$1={scrollToRow(s){var t=this.childrenMap.child;return t.scrollToRow(s),this},scrollToNextRow(s){var t=this.childrenMap.child;return t.scrollToNextRow(s),this}},GetValue$R=Phaser.Utils.Objects.GetValue;class GridTable extends Scrollable{constructor(t,n){n===void 0&&(n={});var f=GetScrollMode(n),T=GetValue$R(n,"table",void 0);T===void 0&&(T={}),T.scrollMode=f===2?0:f,T.clamplTableOXY=GetValue$R(n,"clamplChildOY",!1);var E=GetValue$R(T,"width",void 0),h=GetValue$R(T,"height",void 0),S=new GridTable$1(t,0,0,E,h,T);t.add.existing(S);var e,d;T.scrollMode===0?(e=E===void 0,d=h===void 0):(e=h===void 0,d=E===void 0),InjectProperties$1(S),S._minWidth=E===void 0?0:void 0,S._minHeight=h===void 0?0:void 0,n.type="rexGridTable",n.child={gameObject:S,expandWidth:e,expandHeight:d};var y=GetValue$R(n,"space",void 0);y&&(y.child=GetValue$R(y,"table",0)),super(t,n),this.addChildrenMap("table",S),this.addChildrenMap("tableLayer",S.maskLayer),this.eventEmitter=GetValue$R(n,"eventEmitter",this);var c=GetValue$R(n,"createCellContainerCallback",NOOP),u=GetValue$R(n,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(c,u),TableOnCellVisible.call(this,S),this.resizeControllerFlag=!1;var l=f===0?"cellheightchange":"cellwidthchange";S.on(l,function(){this.resizeControllerFlag=!0},this),GetValue$R(T,"interactive",!0)&&TableSetInteractive.call(this,S,T),this.setItems(GetValue$R(n,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,n){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=n,this}refresh(){return this.setItems(this.items),this}getCell(t){var n=this.childrenMap.child;return n.getCell(t)}getCellContainer(t){var n=this.childrenMap.child;return n.getCellContainer(t)}updateVisibleCell(t){var n=this.childrenMap.child;return n.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}}var methods$a={setItems:SetItems};Object.assign(GridTable.prototype,ScrollMethods$1,methods$a);ObjectFactory.register("gridTable",function(s){var t=new GridTable(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.GridTable",GridTable);var GetEaseConfig=function(s,t){return s.sameOrientation?s.orientation=t.orientation:s.orientation=t.orientation===0?1:0,s},PopUp=function(s,t){s.popUp(GetEaseConfig(s.root.easeIn,s))},ScaleDown$1=function(s,t){s.scaleDown(GetEaseConfig(s.root.easeOut,s))};const SetTransitCallbackMethods={setTransitInCallback(s){return s===void 0&&(s=PopUp),this.transitInCallback=s,this},setTransitOutCallback(s){return s===void 0&&(s=ScaleDown$1),this.transitOutCallback=s,this}};var PostUpdateDelayCall=function(s,t,n,f,T){var E=GetSceneObject(s),h=E.time.delayedCall(t,function(){E.sys.events.once("postupdate",function(){n.call(f,T)})});return h};const DelayCallMethods={delayCall(s,t,n){return this.timer=PostUpdateDelayCall(this,s,t,n),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var ExpandSubMenu=function(s,t){var f=this.childrenMap.subMenu;if(f&&f.parentButton===s)return this;this.collapseSubMenu();var n;this.root.toggleOrientation?n=this.orientation===0?1:0:n=this.orientation;var f=new this.constructor(this.scene,{items:t,orientation:n,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:s});return this.pin(f),this.childrenMap.subMenu=f,this.root.emit("expand",f,s,this),this},Collapse=function(){var s=this.root;s.emit("collapse",this,this.parentButton,s);var t=s.easeOut.duration;return s.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},CollapseSubMenu=function(){var s=this.childrenMap.subMenu;return s===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(s),s.collapse(),this)},Methods$3={expandSubMenu:ExpandSubMenu,collapse:Collapse,collapseSubMenu:CollapseSubMenu};Object.assign(Methods$3,SetTransitCallbackMethods,DelayCallMethods);var CreateBackground$1=function(s,t,n,f){var T;return n&&(t.scene=s,f?T=n.call(f,t):T=n(t),t.scene=void 0),T},CreateButtons$3=function(s,t,n,f){var T,E=[],h;if(t&&n)for(var S=0,e=t.length;S<e;S++)T=t[S],T.scene=s,f?h=n.call(f,T,S,t):h=n(T,S,t),T.scene=void 0,E.push(h);return E},MenuSetInteractive=function(s){s.on(s.root.expandEventName,function(t,n){if(!this._isPassedEvent){var f=this.root.childrenKey,T=this.items[n][f];T&&this.expandSubMenu(t,T)}},s).on("button.click",function(t,n,f,T){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,n,f,T),this.root._isPassedEvent=!1)},s).on("button.over",function(t,n,f,T){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,n,f,T),this.root._isPassedEvent=!1)},s).on("button.out",function(t,n,f,T){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,n,f,T),this.root._isPassedEvent=!1)},s)},ParseEaseConfig=function(s,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=GetOrientationMode(t.orientation)===s.orientation:t.sameOrientation=!0,t.destroy=!1,t},Expand=function(){var s=this.root,t=s.easeIn.duration;s.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const GetValue$Q=Phaser.Utils.Objects.GetValue;class Menu extends Buttons$1{constructor(t,n){n===void 0&&(n={}),n.hasOwnProperty("orientation")||(n.orientation=1);var f=n._rootMenu,T=n._parentMenu,E=n._parentButton,h=GetValue$Q(n,"popup",!0),S=GetValue$Q(n,"items",void 0),e=GetValue$Q(n,"createBackgroundCallback",void 0),d=GetValue$Q(n,"createBackgroundCallbackScope",void 0);n.background=CreateBackground$1(t,S,e,d);var y=GetValue$Q(n,"createButtonCallback",void 0),c=GetValue$Q(n,"createButtonCallbackScope",void 0);if(n.buttons=CreateButtons$3(t,S,y,c),super(t,n),this.type="rexMenu",this.items=S,this.root=f===void 0?this:f,this.isRoot=this.root===this,this.parentMenu=T,this.parentButton=E,this.timer=void 0,this.isRoot){this.isPopUpMode=h;var u=n.bounds;u===void 0&&(u=GetViewport(t)),this.bounds=u,this.subMenuSide=[this.y<u.centerY?SUBMENU_DOWN:SUBMENU_UP,this.x<u.centerX?SUBMENU_RIGHT:SUBMENU_LEFT];var l=GetValue$Q(n,"subMenuSide",void 0);l!==void 0&&(typeof l=="string"&&(l=SubMenuSideMode[l]),this.subMenuSide[this.orientation]=l),this.toggleOrientation=GetValue$Q(n,"toggleOrientation",!1),this.expandEventName=GetValue$Q(n,"expandEvent","button.click"),this.easeIn=ParseEaseConfig(this,GetValue$Q(n,"easeIn",0)),this.easeOut=ParseEaseConfig(this,GetValue$Q(n,"easeOut",0)),this.setTransitInCallback(GetValue$Q(n,"transitIn")),this.setTransitOutCallback(GetValue$Q(n,"transitOut")),this.createBackgroundCallback=e,this.createBackgroundCallbackScope=d,this.createButtonCallback=y,this.createButtonCallbackScope=c,this.childrenKey=GetValue$Q(n,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=GetValue$Q(n,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var r=0,a=0;if(!this.root.easeIn.sameOrientation){var v=GetEaseConfig(this.root.easeIn,this).orientation,o=T?T.orientation:this.orientation,l=this.root.subMenuSide[o];v===0&&l===SUBMENU_LEFT&&(r=1),v===1&&l===SUBMENU_UP&&(a=1)}if(h&&this.setOrigin(r,a).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var l=this.root.subMenuSide[T.orientation];switch(l){case SUBMENU_LEFT:this.alignTop(E.top).alignRight(E.left);break;case SUBMENU_RIGHT:this.alignTop(E.top).alignLeft(E.right);break;case SUBMENU_UP:this.alignLeft(E.left).alignBottom(E.top);break;case SUBMENU_DOWN:this.alignLeft(E.left).alignTop(E.bottom);break}}MenuSetInteractive(this),h&&(this.pushIntoBounds(this.root.bounds),Expand.call(this))}destroy(t){!this.scene||this.ignoreDestroy||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const SUBMENU_LEFT=2,SUBMENU_RIGHT=0,SUBMENU_UP=3,SUBMENU_DOWN=1,SubMenuSideMode={up:SUBMENU_UP,down:SUBMENU_DOWN,left:SUBMENU_LEFT,right:SUBMENU_RIGHT};Object.assign(Menu.prototype,Methods$3);ObjectFactory.register("menu",function(s){var t=new Menu(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Menu",Menu);var methods$9={setWrapEnable(s){return s===void 0&&(s=!0),this.listWrapEnable=s,this},setCreateButtonCallback(s){return this.listCreateButtonCallback=s,this},setCreateListBackgroundCallback(s){return this.listCreateBackgroundCallback=s,this},setButtonClickCallback(s){return this.listOnButtonClick=s,this},setButtonOverCallback(s){return this.listOnButtonOver=s,this},setButtonOutCallback(s){return this.listOnButtonOut=s,this},setListExpandDirection(s){return typeof s=="string"&&(s=ListExpandDirections[s]),this.listExpandDirection=s,this},setListEaseInDuration(s){return s===void 0&&(s=0),this.listEaseInDuration=s,this},setListEaseOutDuration(s){return s===void 0&&(s=0),this.listEaseOutDuration=s,this},setListTransitInCallback(s){return this.listTransitInCallback=s,this},settListTransitOutCallback(s){return this.listTransitOutCallback=s,this},setListBounds(s){return this.listBounds=s,this},setListWidth(s){return this.listWidth=s,this},setListHeight(s){return this.listHeight=s,this},setListSize(s,t){return this.setListWidth(s).setListHeight(t),this},setListAlignmentMode(s){return this.listAlignMode=s,this},setListAlignmentSide(s){return s===void 0&&(s=""),this.listAlignSide=s,this},setListSpace(s){return s===void 0&&(s={}),this.listSpace=s,this},setListDraggable(s){return s===void 0&&(s=!0),this.listDraggable=s,this}};const ListExpandDirections={down:0,up:1};var CreateListPanel=function(){var s=this.scene,t,n=this.listCreateBackgroundCallback;n&&(t=n.call(this,s),s.add.existing(t));var f=[],T=this.listCreateButtonCallback;if(T)for(var E=this.options,h=0,S=E.length;h<S;h++){var e=T.call(this,s,E[h],h,E);s.add.existing(e),f.push(e)}var d=this.listWidth;d===void 0&&(this.listAlignMode==="text"?d=this.getElement("text").width:d=this.width);var y=this.listHeight,c;return this.listWrapEnable?c=new Buttons(s,{width:d,height:y,background:t,buttons:f,space:this.listSpace,draggable:this.listDraggable}):c=new Buttons$1(s,{width:d,height:y,orientation:"y",background:t,buttons:f,space:this.listSpace,draggable:this.listDraggable}),s.add.existing(c),c},ScaleDown=function(s,t,n,f,T){f===void 0&&(f="Linear");var E={};switch(E.mode=0,n){case 0:case"x":E.end={x:0};break;case 1:case"y":E.end={y:0};break;default:E.end=0;break}return E.duration=t,E.ease=f,T===void 0?T=new Scale(s,E):T.resetFromJSON(E),T.restart(),T},GetValueFromAliasKeys=function(s,t,n,f,T){return HasValue(s,t)?GetValue$3q(s,t):n&&HasValue(s,n)?GetValue$3q(s,n):f&&HasValue(s,f)?GetValue$3q(s,f):T};const GetValue$P=Phaser.Utils.Objects.GetValue;var SetPosition=function(s,t){var n=GetValue$P(t,"expandDirection",void 0);typeof n=="string"&&(n=ExpandDirections[n]);var f=GetValueFromAliasKeys(t,"alignTarget","alignTargetX"),T=GetValue$P(t,"alignTargetY",f),E=GetValue$P(t,"alignOffsetX",0),h=GetValue$P(t,"alignOffsetY",0),S=GetValue$P(t,"alignSide",""),e=S.includes("right"),d=GetValue$P(t,"bounds"),y=n===0,c=n===1,u=!y&&!c,l=e?1:0,r=y||u?0:1;s.setOrigin(l,r);var a,v;e?a=f.getTopRight().x:a=f.getTopLeft().x,v=T.getBottomLeft().y,s.setPosition(a+E,v+h);var o=d;o||(o=GetViewport(s.scene)),u&&s.getBottomLeft().y>o.bottom&&(v=T.getTopLeft().y,s.setOrigin(0,1).setPosition(a+E,v+h))};const ExpandDirections={down:0,up:1},GetValue$O=Phaser.Utils.Objects.GetValue;class DropDown extends OpenCloseTransition{constructor(t,n){n===void 0&&(n={}),n.transitIn==null&&(n.transitIn=function(E,h){PopUp$1(E,h,"y","Cubic")}),n.transitOut==null&&(n.transitOut=function(E,h){ScaleDown(E,h,"y","Linear")}),n.manualClose=!0,n.clickOutsideClose=!0,n.destroy=!0,super(t,n),SetPosition(t,n),t.isRexSizer&&t.layout();var f=GetValue$O(n,"touchOutsideClose",!1),T=GetValue$O(n,"anyTouchClose",!1);T&&(f=!1),T?this.once("open",this.anyTouchClose,this):f&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&IsPointInBounds(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var OpenListPanel=function(){if(this.listPanel)return this;var s=CreateListPanel.call(this);s.on("button.over",function(f,T,E,h){this.listOnButtonOver&&this.listOnButtonOver.call(this,f,T,E,h),this.emit("button.over",this,s,f,T,E,h)},this).on("button.out",function(f,T,E,h){this.listOnButtonOut&&this.listOnButtonOut.call(this,f,T,E,h),this.emit("button.out",this,s,f,T,E,h)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var n=new DropDown(s,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds,anyTouchClose:!0}).on("open",function(){s.on("button.click",function(f,T,E,h){this.listOnButtonClick&&this.listOnButtonClick.call(this,f,T,E,h),this.emit("button.click",this,s,f,T,E,h)},this),this.emit("list.open",this,s)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0},this);return this.listPanel=s,this.dropDownBehavior=n,this.pin(s),this},CloseListPanel=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this):this},ToggleListPanel=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},Methods$2={openListPanel:OpenListPanel,closeListPanel:CloseListPanel,toggleListPanel:ToggleListPanel};Object.assign(Methods$2,methods$9);const GetValue$N=Phaser.Utils.Objects.GetValue;class DropDownList extends Label{constructor(t,n){super(t,n),this.type="rexDropDownList",this.timer=void 0,this.setOptions(GetValue$N(n,"options"));var f=GetValue$N(n,"list");this.setWrapEnable(GetValue$N(f,"wrap",!1)),this.setCreateButtonCallback(GetValue$N(f,"createButtonCallback")),this.setCreateListBackgroundCallback(GetValue$N(f,"createBackgroundCallback")),this.setButtonClickCallback(GetValue$N(f,"onButtonClick")),this.setButtonOverCallback(GetValue$N(f,"onButtonOver")),this.setButtonOutCallback(GetValue$N(f,"onButtonOut")),this.setListExpandDirection(GetValue$N(f,"expandDirection")),this.setListEaseInDuration(GetValue$N(f,"easeIn",500)),this.setListEaseOutDuration(GetValue$N(f,"easeOut",100)),this.setListTransitInCallback(GetValue$N(f,"transitIn")),this.settListTransitOutCallback(GetValue$N(f,"transitOut")),this.setListSize(GetValue$N(f,"width"),GetValue$N(f,"height")),this.setListAlignmentMode(GetValue$N(f,"alignParent","text")),this.setListAlignmentSide(GetValue$N(f,"alignSide","")),this.setListBounds(GetValue$N(f,"bounds")),this.setListSpace(GetValue$N(f,"space")),this.setListDraggable(GetValue$N(f,"draggable",!1)),this.setValueChangeCallback(GetValue$N(n,"setValueCallback"),GetValue$N(n,"setValueCallbackScope")),this.setValue(GetValue$N(n,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,n){return this.valueChangeCallback=t,this.valueChangeCallbackScope=n,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var n=this._value;this._value=t;var f=this.valueChangeCallback,T=this.valueChangeCallbackScope;f&&(T?f.call(T,this,t,n):f(this,t,n)),this.emit("valuechange",this,t,n)}}emitButtonClick(t){var n=this.options[t];return n?(this.emit("button.click",this,void 0,n,t),this):this}}Object.assign(DropDownList.prototype,Methods$2);ObjectFactory.register("dropDownList",function(s){var t=new DropDownList(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.DropDownList",DropDownList);var BuildListConfig=function(s,t,n){t=t?DeepClone(t):{},n===void 0&&(n={});var f=t.label||t.button,T=t.button||t.label;delete t.label,delete t.button;var E=n.label||n.button||n,h=n.button||n.label||n,S=BuildLabelConfig(s,f,E);return S.list=t.list||{},S.list.createButtonCallback=function(e,d){var y=CreateLabel(e,T,h).resetDisplayContent(d);return d.hasOwnProperty("value")&&(y.value=d.value),y},S.list.onButtonOver=function(e,d,y,c){e.setHoverState&&e.setHoverState(!0)},S.list.onButtonOut=function(e,d,y,c){e.setHoverState&&e.setHoverState(!1)},S};class SimpleDropDownList extends DropDownList{constructor(t,n,f){n=BuildListConfig(t,n,f),super(t,n),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var n=0,f=t.length;n<f;n++){var T=t[n];typeof T=="string"&&(t[n]={text:T,value:T})}return super.setOptions(t),this}}ObjectFactory.register("simpleDropDownList",function(s,t){var n=new SimpleDropDownList(this.scene,s,t);return this.scene.add.existing(n),n});SetValue(window,"RexPlugins.UI.SimpleDropDownList",SimpleDropDownList);var TextHeightToLinesCount=function(s){var t=GetTextObjectType(s),n,f,T;switch(t){case TextType:case TagTextType:n=s.height-s.padding.top-s.padding.bottom,f=s.lineSpacing,T=s.style.metrics.fontSize+s.style.strokeThickness;break;case BitmapTextType:n=s.height,f=0;var E=s.fontSize/s.fontData.size;T=s.fontData.lineHeight*E;break}return(n-f)/(T+f)},GetLines=function(s,t){s===void 0&&(s=this.startLineIndex),t===void 0&&(t=s+this.pageLinesCount);var n;switch(this.textObjectType){case TextType:case BitmapTextType:n=this.lines.slice(s,t).join(`
`);break;case TagTextType:var f=this.lines.getLineStartIndex(s),T=this.lines.getLineEndIndex(t-1);n=this.lines.getSliceTagText(f,T,!0);break}return n},GetString=function(s){return Array.isArray(s)?s=s.join(`
`):typeof s=="number"&&(s=s.toString()),s};const SetContentMethods={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(n){var t=this.totalLinesCount;this.sections.push(GetString(n));var n=this.sections.join(`
`);this.lines=TextToLines(this.parent,n,this.lines);for(var f=this.totalLinesCount-t,T=Math.ceil(f/this.pageLinesCount),E=0;E<T;E++)this.pageStartIndexes.push(t+E*this.pageLinesCount);return this},setText(s,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var n=GetString(s).split(this.pageBreak),f=0,T=n.length;f<T;f++)this.appendPage(n[f]);return this},appendText(s){var t=this.content+GetString(s);return this.setText(t,!1),this}},Clamp$3=Phaser.Math.Clamp,GetPageMethods={getPage(s){return s===void 0&&(s=this.pageIndex),this.setPageIndex(s).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},getFirstPage(){return this.getPage(0)},getLastPage(){return this.getPage(this.lastPageIndex)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(s){return s=Clamp$3(s,0,this.lastPageIndex),this.pageIndex=s,this.startLineIndex=this.pageStartIndexes[s],this.endLineIndex=this.pageStartIndexes[s+1],this}},ShowMethods={showPage(s){return this.displayText(this.getPage(s)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},showFirstPage(){return this.displayText(this.getFirstPage()),this},showLastPage(){return this.displayText(this.getLastPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(s){SetNoWrapText(this.parent,s)}};var Methods$1={getLines:GetLines};Object.assign(Methods$1,SetContentMethods,GetPageMethods,ShowMethods);const GetValue$M=Phaser.Utils.Objects.GetValue,Clamp$2=Phaser.Math.Clamp;class TextPage extends ComponentBase{constructor(t,n){super(t,{eventEmitter:!1}),this.textObjectType=GetTextObjectType(this.parent),this.pageStartIndexes=[],this.lines=TextToLines(this.parent,""),this.sections=[],this.resetFromJSON(n)}resetFromJSON(t){return this.setMaxLines(GetValue$M(t,"maxLines",void 0)),this.setPageBreak(GetValue$M(t,"pageBreak",`\f
`)),this.setText(GetValue$M(t,"text","")),this.setStartLineIndex(GetValue$M(t,"start",0)),this.setPageIndex(GetValue$M(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case TextType:this.lines.length=0;break;case TagTextType:this.lines.destroy();break;case BitmapTextType:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get lastPageIndex(){return this.pageCount-1}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=Clamp$2(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case TextType:case TagTextType:var n=this.parent.style.maxLines;n>0?t=n:t=Math.floor(TextHeightToLinesCount(this.parent));break;case BitmapTextType:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(TextPage.prototype,Methods$1);var GetWrapText=function(s,t){var n=GetTextObjectType(s);switch(n){case TextType:s.style.syncFont(s.canvas,s.context),t=s.runWordWrap(t);break;case TagTextType:t=s.getText(t,void 0,void 0,!0);break;case BitmapTextType:t=s.setText(t).getTextBounds().wrappedText;break}return t};const GetFastValue=Phaser.Utils.Objects.GetFastValue,GetValue$L=Phaser.Utils.Objects.GetValue;class TextTyping extends ComponentBase{constructor(t,n){super(t,n),this.timer=null,this.resetFromJSON(n)}resetFromJSON(t){this.setTextWrapEnable(GetValue$L(t,"wrap",!1)),this.setTypeMode(GetValue$L(t,"typeMode",0)),this.setTypingSpeed(GetValue$L(t,"speed",333)),this.setTextCallback=GetFastValue(t,"setTextCallback",null),this.setTextCallbackScope=GetFastValue(t,"setTextCallbackScope",null),this.setTypingContent(GetFastValue(t,"text","")),this.typingIdx=GetFastValue(t,"typingIdx",0),this.insertIdx=null,this.insertChar=null;var n=GetFastValue(t,"elapsed",null);return n!==null&&this.start(void 0,void 0,this.typingIdx,n),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=TYPEMODE[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var n=TransferText(t);this.textWrapEnable&&(n=GetWrapText(this.parent,n)),this._text=n}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,n,f,T){return t!==void 0&&this.setTypingContent(t),n!==void 0&&(this.speed=n),f===void 0&&(f=0),this.typingIdx=f+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(T)),this}appendText(t){var n=this.text.concat(TransferText(t));return this.isTyping?this.setTypingContent(n):this.start(n,void 0,this.textLen),this}stop(t){var n=this.getTimer();if(n&&this.freeTimer(),t){for(;!this.isLastChar;)this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode),this.emit("typechar",this.insertChar),this.typingIdx++;this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)}return this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("typechar",this.insertChar),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,n,f,T){var E;if(T===0){var h=0,S=n;this.insertIdx=S,E=this.getSubString(t,h,S)}else if(T===1){var S=f,h=S-n;this.insertIdx=0,E=this.getSubString(t,h,S)}else if(T===2){var e=f/2,h=Math.floor(e-n/2),S=h+n;this.insertIdx=n%2?n:0,E=this.getSubString(t,h,S)}else if(T===3){var d=Math.floor(n/2),y;if(d>0){var S=f,h=S-d;y=this.getSubString(t,h,S)}else y="";var c=n-d,u;if(c>0){var h=0,S=h+c;this.insertIdx=S,u=this.getSubString(t,h,S)}else u="",this.insertIdx=0;E=u+y}return this.insertChar=E.charAt(this.insertIdx-1),E}startTimer(t){this.timer&&this.freeTimer();var n;return t===void 0?n=0:(this.speed,n=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:n,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?SetNoWrapText(this.parent,t):this.parent.setText(t)}getTextLength(t){var n=this.parent,f;return n.getPlainText?f=n.getPlainText(t).length:f=t.length,f}getSubString(t,n,f){var T=this.parent,E;return T.getSubString?E=T.getSubString(t,n,f):E=t.slice(n,f),E}}var TransferText=function(s){return Array.isArray(s)?s=s.join(`
`):typeof s=="number"&&(s=s.toString()),s};const TYPEMODE={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},GetValue$K=Phaser.Utils.Objects.GetValue;var TextBoxBase=function(s,t){t===void 0&&(t="rexTextBox");class n extends s{constructor(T,E){super(T,E),this.type=t;var h=this.childrenMap.text;this.page=new TextPage(h,GetValue$K(E,"page",void 0)),this.typing=new TextTyping(h,GetValue$K(E,"typing",E.type)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this).on("typechar",this.onTypeChar,this),this.textWidth=h.width,this.textHeight=h.height}start(T,E){return this.page.setText(T),E!==void 0&&this.setTypingSpeed(E),this.emit("start"),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var T=this.page.getNextPage();this.typing.start(T)}return this}pause(){return this.isTyping&&(this.typing.pause(),this.emit("pause")),this}resume(){return this.isTyping||(this.emit("resume"),this.typing.resume()),this}stop(T){return this.typing.stop(T),this}showLastPage(){return this.typing.stop(),this.page.showLastPage(),this.emit("type"),this.onPageEnd(),this}setTypeSpeed(T){return this.typing.setTypingSpeed(T),this}setTypingSpeed(T){return this.typing.setTypingSpeed(T),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}get typingSpeed(){return this.typing.speed}onType(){var T=this.childrenMap.text;(this.textWidth!==T.width||this.textHeight!==T.height)&&(this.textWidth=T.width,this.textHeight=T.height,this.getTopmostSizer().layout()),this.emit("type")}onTypeChar(T){this.emit("typechar",T)}onPageEnd(){var T=this.isLastPage;this.emit("pageend"),T&&this.emit("complete")}}return n};class TextBox extends TextBoxBase(TitleLabel){constructor(t,n){n===void 0&&(n={}),n.hasOwnProperty("layoutMode")||(n.layoutMode=1),super(t,n)}}ObjectFactory.register("textBox",function(s){var t=new TextBox(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.TextBox",TextBox);const GetValue$J=Phaser.Utils.Objects.GetValue;class NumberBar extends Sizer{constructor(t,n){super(t,n),this.type="rexNumberBar";var f=GetValue$J(n,"background",void 0),T=GetValue$J(n,"icon",void 0),E=GetValue$J(n,"iconMask",void 0),h=GetValue$J(n,"slider",void 0),S=GetValue$J(n,"text",void 0),e=GetValue$J(n,"space.icon",0),d=GetValue$J(n,"space.slider",0);if(f&&this.addBackground(f),T){var y;this.orientation===0?(h||S)&&(y={right:e}):(h||S)&&(y={bottom:e}),this.add(T,{proportion:0,align:"center",padding:y}),E&&(E=AddChildMask.call(this,T,T,1))}var c;if(h){h.orientation=this.orientation,h.eventEmitter=this,h.value=null,h.hasOwnProperty("input")||(h.input=-1),c=new Slider(t,h),t.add.existing(c);var y;this.orientation===0?S&&(y={right:d}):S&&(y={bottom:d});var u;if(this.orientation===0){var l=GetValue$J(h,"width",void 0);u=l===void 0?1:0}else{var r=GetValue$J(h,"height",void 0);u=r===void 0?1:0}this.add(c,{proportion:u,align:"center",padding:y})}S&&this.add(S),this.addChildrenMap("background",f),this.addChildrenMap("icon",T),this.addChildrenMap("iconMask",E),this.addChildrenMap("slider",c),this.addChildrenMap("text",S);var a=GetValue$J(n,"valuechangeCallback",null);if(a!==null){var v=GetValue$J(n,"valuechangeCallbackScope",void 0);this.on("valuechange",a,v)}this.setEnable(GetValue$J(n,"enable",void 0)),this.setValue(GetValue$J(n,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,n,f){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,n,f),this}addValue(t,n,f){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,n,f),this}getValue(t,n){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,n):0}easeValueTo(t,n,f){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,n,f),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var n;return t.text?n=t.text:n=t.getData("text"),n}set text(t){var n=this.childrenMap.text;n!==void 0&&(n.setText?n.setText(t):n.setData("text",t))}setText(t){return this.text=t,this}}ObjectFactory.register("numberBar",function(s){var t=new NumberBar(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.NumberBar",NumberBar);ObjectFactory.register("scrollBar",function(s){var t=new ScrollBar(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.ScrollBar",ScrollBar);const GetValue$I=Phaser.Utils.Objects.GetValue,BadgeKeys={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class Badge extends OverlapSizer{constructor(t,n){super(t,n),this.type="rexBadge";var f=GetValue$I(n,"background",void 0);f&&this.addBackground(f),this.addChildrenMap("background",f);var T=GetValue$I(n,"main",void 0);T&&this.add(T,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",T);for(var E in BadgeKeys){var h=GetValue$I(n,E,void 0);h&&(this.add(h,{key:E,align:BadgeKeys[E],expand:!1}),this.addChildrenMap(E,h))}}}ObjectFactory.register("badgeLabel",function(s){var t=new Badge(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.BadgeLabel",Badge);const OverlapSizerAdd=OverlapSizer.prototype.add;var Add=function(s,t,n,f,T,E,h,S,e){return s.setVisible(!1),OverlapSizerAdd.call(this,s,t,n,f,T,E,h,S,e),this};const AddChildMethods={add:Add,addPage:Add};var GetPage$1=function(s){return s===void 0?null:this.sizerChildren.hasOwnProperty(s)?this.sizerChildren[s]:null};const ContainerSetChildVisible$1=ContainerLite.prototype.setChildVisible;var SwapPage$1=function(s,t){this._previousKey=this._currentKey;var n=this.previousPage;n&&(this.swapMode===0?(ContainerSetChildVisible$1.call(this,n,!1),this.emit("pageinvisible",n,this._previousKey,this)):n.destroy()),s&&!this.sizerChildren.hasOwnProperty(s)&&this.emit("createpage",s,this),this._currentKey=s;var f=this.currentPage;return f&&(ContainerSetChildVisible$1.call(this,f,!0),this.emit("pagevisible",f,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&f.setAlpha(0).fadeIn(t,1)),this},HasPage=function(s){return this.sizerChildren.hasOwnProperty(s)},methods$8={getPage:GetPage$1,swapPage:SwapPage$1,hasPage:HasPage};Object.assign(methods$8,AddChildMethods);const GetValue$H=Phaser.Utils.Objects.GetValue;class Pages extends OverlapSizer{constructor(t,n){super(t,n),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(GetValue$H(n,"swapMode",0)),this.setFadeInDuration(GetValue$H(n,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=SWAPMODE[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(Pages.prototype,methods$8);const SWAPMODE={invisible:0,destroy:1};ObjectFactory.register("pages",function(s){var t=new Pages(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Pages",Pages);const Mesh=Phaser.GameObjects.Mesh;class MeshBase extends Mesh{get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}setInteractive(){var t=(function(n,f,T){for(var E=this.faces,h=0;h<E.length;h++){var S=E[h];if(S.contains(f,T))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,t),this}forceUpdate(){return this.dirtyCache[10]=1,this}}const Vector3=Phaser.Math.Vector3,Matrix4=Phaser.Math.Matrix4;var tempPosition=new Vector3,tempRotation=new Vector3,tempMatrix=new Matrix4,TransformVerts=function(s,t,n,f,T,E,h){t===void 0&&(t=0),n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=0),E===void 0&&(E=0),h===void 0&&(h=0),tempPosition.set(t,n,f),tempRotation.set(T,E,h),tempMatrix.fromRotationXYTranslation(tempRotation,tempPosition,!0);for(var S=0,e=s.vertices.length;S<e;S++)s.vertices[S].transformMat4(tempMatrix)};const IsPlainObject$a=Phaser.Utils.Objects.IsPlainObject,GetValue$G=Phaser.Utils.Objects.GetValue,GenerateGridVerts=Phaser.Geom.Mesh.GenerateGridVerts,RadToDeg$2=Phaser.Math.RadToDeg,DegToRad$3=Phaser.Math.DegToRad,FOV=45,PanZ=1+1/Math.sin(DegToRad$3(FOV));let Image$2=class extends MeshBase{constructor(t,n,f,T,E,h){IsPlainObject$a(n)&&(h=n,n=GetValue$G(h,"x",0),f=GetValue$G(h,"y",0),T=GetValue$G(h,"key",null),E=GetValue$G(h,"frame",null)),super(t,n,f,T,E),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(PanZ),this.hideCCW=GetValue$G(h,"hideCCW",!0);var S=GetValue$G(h,"gridWidth",0),e=GetValue$G(h,"gridHeight",S);this.resetVerts(S,e),this.prevFrame=this.frame}preUpdate(t,n){this.prevFrame!==this.frame&&(this.prevFrame=this.frame,this.syncSize()),super.preUpdate(t,n)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,FOV),this}resetVerts(E,h){if(E!==void 0&&(this.gridWidth=E),h!==void 0&&(this.gridHeight=h),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var f=this.frame.cutWidth,T=this.frame.cutHeight,E,h;this.gridWidth===0?E=Math.max(f/8,32):h=this.gridWidth,this.gridHeight===0?h=Math.max(T/8,32):h=this.gridHeight,GenerateGridVerts({mesh:this,width:f/this.height,height:T/this.height,widthSegments:Math.ceil(f/E),heightSegments:Math.ceil(T/h)});var S=this.transformInfo;return S&&this.transformVerts(S.x,S.y,S.z,S.rotateX,S.rotateY,S.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return RadToDeg$2(this.rotationX)}set angleX(t){this.rotationX=DegToRad$3(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return RadToDeg$2(this.rotationY)}set angleY(t){this.rotationY=DegToRad$3(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return RadToDeg$2(this.rotationZ)}set angleZ(t){this.rotationZ=DegToRad$3(t)}transformVerts(t,n,f,T,E,h){return t===void 0&&(t=0),n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=0),E===void 0&&(E=0),h===void 0&&(h=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=n,this.transformInfo.rotateX=T,this.transformInfo.rotateY=E,this.transformInfo.rotateZ=h,TransformVerts(this,t,n,f,T,E,h),this}};const DynamicTexture=Phaser.Textures.DynamicTexture;var CreateDynamicTexture=function(s,t,n){t===void 0&&(t=2),n===void 0&&(n=2);var f=new DynamicTexture(s.sys.textures,null,t,n);return f};const IsPlainObject$9=Phaser.Utils.Objects.IsPlainObject,GetValue$F=Phaser.Utils.Objects.GetValue;class RenderTexture extends Image$2{constructor(t,n,f,T,E,h){IsPlainObject$9(n)&&(h=n,n=GetValue$F(h,"x",0),f=GetValue$F(h,"y",0),T=GetValue$F(h,"width",32),E=GetValue$F(h,"height",32));var S=CreateDynamicTexture(t,T,E);super(t,n,f,S,null,h),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}snapshot(t,n){return n===void 0&&(n={}),n.gameObjects=t,n.renderTexture=this.rt,Snapshot(n),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var ForEachFace=function(s,t,n,f){if(Array.isArray(s))for(var T=!1,E=0,h=s.length;E<h;E++){var S=s[E];if(!(f&&!S)&&(n?T=t.call(n,S,E,s):T=t(S,E,s),T))return}else{var T=!1;for(var e in s){var S=s[e];if(!(f&&!S)&&(n?T=t.call(n,S,e,s):T=t(S,e,s),T))return}}};const RadToDeg$1=Phaser.Math.RadToDeg,DegToRad$2=Phaser.Math.DegToRad;class FaceContainer extends ContainerLite{constructor(t,n,f,T,E,h){super(t,n,f,T,E),this.faces=h,ForEachFace(h,function(S){S.setPosition(n,f),this.add(S)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return RadToDeg$1(this.rotationX)}set angleX(t){this.rotationX=DegToRad$2(t)}get rotateX(){return RadToDeg$1(this.rotationX)}set rotateX(t){this.rotationX=DegToRad$2(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return RadToDeg$1(this.rotationY)}set angleY(t){this.rotationY=DegToRad$2(t)}get rotateY(){return RadToDeg$1(this.rotationY)}set rotateY(t){this.rotationY=DegToRad$2(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return RadToDeg$1(this.rotationZ)}set angleZ(t){this.rotationZ=DegToRad$2(t)}get rotateZ(){return RadToDeg$1(this.rotationZ)}set rotateZ(t){this.rotationZ=DegToRad$2(t)}setDebug(t,n){return ForEachFace(this.faces,function(f){f.setDebug(t,n)},null,!0),this}panX(t){return ForEachFace(this.faces,function(n){n.panX(t)},null,!0),this}panY(t){return ForEachFace(this.faces,function(n){n.panY(t)},null,!0),this}panZ(t){return ForEachFace(this.faces,function(n){n.panZ(t)},null,!0),this}transformVerts(t,n,f,T,E,h){return ForEachFace(this.faces,function(S){S.transformVerts(t,n,f,T,E,h)},null,!0),this}forEachFace(t,n,f){return ForEachFace(this.faces,t,n,f),this}}const IsPlainObject$8=Phaser.Utils.Objects.IsPlainObject,DefaultImageConfig={key:"__WHITE"},ClassMap={image:Image$2,rendertexture:RenderTexture};var CreatePerspectiveObject=function(s,t){t===void 0&&(t=DefaultImageConfig);var n;return IsPlainObject$8(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),n=new ClassMap[t.type](s,t),s.add.existing(n)):n=t,n},CreateFaces=function(s,t,n){var f;if(n===void 0){f=[];for(var T,E,h=0,S=t.length;h<S;h++)E=t[h],E?T=CreatePerspectiveObject(s,E):T=null,f.push(T)}else{f={};for(var T,e,h=0,S=n.length;h<S;h++)e=n[h],t.hasOwnProperty(e)?T=CreatePerspectiveObject(s,t[e]):T=null,f[e]=T}return f};const DegToRad$1=Phaser.Math.DegToRad,RAD180=DegToRad$1(180);var LayoutFaces=function(s,t){var n=t.back;n&&(s.orientation===0?n.transformVerts(0,0,0,0,RAD180,0):n.transformVerts(0,0,0,RAD180,0,0))};const GetValue$E=Phaser.Utils.Objects.GetValue,Linear$2=Phaser.Math.Linear;let Flip$1=class extends EaseValueTaskBase{constructor(t,n){super(t,n),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(GetValue$E(t,"ease","Cubic")),this.setFrontToBackDirection(GetValue$E(t,"frontToBack",0)),this.setBackToFrontDirection(GetValue$E(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=DIRMODE[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=DIRMODE[t]),this.endAngleBF=t===0?-180:180,this}start(t,n){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var f=n+1,T=this.parent;return T.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*f):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*f),super.start(),this}flip(t,n){return this.isRunning?this:(t===void 0&&(t=this.duration),n===void 0&&(n=0),this.start(t,n),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+n+1)%2,this)}flipRight(t,n){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,n),this}flipLeft(t,n){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,n),this}updateGameObject(t,n){var f=this.easeFn(n.t),T=Linear$2(this.startAngle,this.endAngle,f);t.orientation===0?t.angleY=T:t.angleX=T}};const DIRMODE={right:0,"left-to-right":0,left:1,"right-to-left":1},IsPlainObject$7=Phaser.Utils.Objects.IsPlainObject,GetValue$D=Phaser.Utils.Objects.GetValue,FaceNames=["back","front"];class Card extends FaceContainer{constructor(t,n,f,T){IsPlainObject$7(n)&&(T=n,n=GetValue$D(T,"x",0),f=GetValue$D(T,"y",0));var E=CreateFaces(t,T,FaceNames),h=E.back,S=E.front,e=GetValue$D(T,"width"),d=GetValue$D(T,"height");if(e===void 0||d===void 0){if(e===void 0){var y=S?S.width:0,c=h?h.width:0;e=Math.max(y,c)}if(d===void 0){var u=S?S.height:0,l=h?h.height:0;d=Math.max(u,l)}}super(t,n,f,e,d,E),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,ForEachFace(E,function(a,v){this[`${v}Face`]=a},this);var r=GetValue$D(T,"flip",void 0);r!==!1&&(this.flip=new Flip$1(this,r)),this.setOrientation(GetValue$D(T,"orientation",0)),LayoutFaces(this,E),this.setFace(GetValue$D(T,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,ForEachFace(this.faces,function(n){n.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,ForEachFace(this.faces,function(n){n.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,ForEachFace(this.faces,function(n){n.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=ORIENTATIONMODE$1[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=FACEMODE$1[t]),this.currentFaceIndex=t;var n=t===1,f=n?180:0;this.orientation===0?this.angleY=f:this.angleX=f}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const ORIENTATIONMODE$1={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},FACEMODE$1={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const GetValue$C=Phaser.Utils.Objects.GetValue;var Init=function(s,t,n){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=GetValue$C(n,"useParentBounds",!1),t.setPosition(s.x,s.y).setVisible(!1),s.pin(t)},Exit=function(s,t){if(!s)return!1;for(var n=t.visibleSibling,f=0,T=n.length;f<T;f++)s.setChildVisible(n[f],!0);return n.length=0,s.setChildVisible(t,!1),t.isRunning=!1,!0},Enter=function(s,t){if(!s)return!1;Exit(s,t);var n=t.useParentBounds;Snapshot({gameObjects:s.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:n?s.displayWidth:void 0,height:n?s.displayHeighth:void 0,originX:n?s.originX:void 0,originY:n?s.originY:void 0}),s.setChildVisible(t,!0);for(var f=t.visibleSibling,T=s.children,E=0,h=T.length;E<h;E++){var S=T[E];S.visible&&S!==t&&(s.setChildVisible(S,!1),f.push(S))}return t.isRunning=!0,!0},MeshRenderTextureBase=function(s){return class extends s{constructor(n,f){var T=n.scene;super(T,0,0,1,1,f),T.add.existing(this),Init(n,this,f)}destroy(n){!this.scene||this.ignoreDestroy||(this.exit(),super.destroy(n))}enter(){var n=Enter(this.rexContainer.parent,this);return n&&this.syncSize(),this}exit(){return Exit(this.rexContainer.parent,this),this}}};class ContainerPerspective extends MeshRenderTextureBase(RenderTexture){get perspectiveState(){return this.isRunning}}const GetValue$B=Phaser.Utils.Objects.GetValue;var CreatePerspectiveCardMesh=function(s){var t=this.scene;this.setSnapshotPadding(GetValue$B(s,"snapshotPadding",0)),s=Clone$1(s),delete s.width,delete s.height,s.front={width:1,height:1},s.back={width:1,height:1};var n=new Card(t,s);t.add.existing(n);var f=n.flip;if(f){var T=this;f.on("start",function(){T.enterPerspectiveMode()}).on("complete",function(){T.exitPerspectiveMode()})}return n};const FaceIndexMap=["front","back"],PerspectiveMethods={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var s=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,s),this.setChildVisible(this.childrenMap.back,!s),this},setSnapshotPadding(s){return this.snapshotPadding=s,this},snapshotFace(s){typeof s=="number"&&(s=FaceIndexMap[s]);var t=this.perspectiveCard.faces[s],n=this.childrenMap[s];t.rt.clear();var f=n.visible;n.visible=!0;var T=n.isRexContainerLite?n.getAllVisibleChildren():n;return t.snapshot(T,{padding:this.snapshotPadding}),n.visible=f,this}},GetValue$A=Phaser.Utils.Objects.GetValue;class PerspectiveCard extends OverlapSizer{constructor(t,n){super(t,n),this.type="rexPerspectiveCard";var f=n.back,T=GetValue$A(n,"expand.back",!0);this.add(f,{key:"back",expand:T});var E=n.front,h=GetValue$A(n,"expand.front",!0);this.add(E,{key:"front",expand:h}),this.perspectiveCard=CreatePerspectiveCardMesh.call(this,n),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var n=t===0,f=this.childrenMap.front,T=this.childrenMap.back;this.setChildVisible(f,n),this.setChildVisible(T,!n)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,n,f,T,E,h){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,n,f,T,E,h),this}forEachFace(t,n,f){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,n,f),this}}Object.assign(PerspectiveCard.prototype,PerspectiveMethods);ObjectFactory.register("perspectiveCard",function(s){var t=new PerspectiveCard(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.PerspectiveCard",PerspectiveCard);var GetPageKeyByIndex=function(s){var t=this.getElement("tabs.buttons");if(!(s>=t.length))return t[s].name},GetPageIndexByKey=function(s){for(var t=this.getElement("tabs.buttons"),n=0,f=t.length;n<f;n++)if(t[n].name===s)return n};const IsPlainObject$6=Phaser.Utils.Objects.IsPlainObject,GetValue$z=Phaser.Utils.Objects.GetValue,UUID=Phaser.Utils.String.UUID;var AddPage=function(s,t,n){if(IsPlainObject$6(s)){var f=s;s=GetValue$z(f,"key"),t=GetValue$z(f,"tab"),n=GetValue$z(f,"page")}return s||(s=UUID()),t.name=s,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(n,{key:s}),this},SwapPage=function(s,t){var n;if(typeof s=="number"?n=s:n=this.getPageIndex(s),n!=null){var f;t!==void 0&&(f=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(n),f!==void 0&&(this.childrenMap.pages.fadeInDuration=f)}return this},SwapFirstPage=function(s){return this.swapPage(0,s),this},SwapLastPage=function(s){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,s),this};const SwapPageMethods={swapPage:SwapPage,swapFirstPage:SwapFirstPage,swapLastPage:SwapLastPage};var RemovePage=function(s,t){typeof s=="number"&&(s=this.getPageKey(s));var n=this.childrenMap.tabs,f=n.getByName(s),T=this.childrenMap.pages,E=T.getElement(s);return!f||!E?this:(T.removeChildrenMap(s),n.removeButton(f,t),T.remove(E,t),this)};const RemovePageMethods={removePage:RemovePage};var GetPage=function(s){return typeof s=="number"&&(s=this.getPageKey(s)),this.childrenMap.pages.getPage(s)},GetTab=function(s){var t;return typeof s=="number"?t=s:t=this.getPageIndex(s),this.getElement("tabs.buttons")[t]},methods$7={getPageKey:GetPageKeyByIndex,getPageIndex:GetPageIndexByKey,addPage:AddPage,getPage:GetPage,getTab:GetTab};Object.assign(methods$7,SwapPageMethods,RemovePageMethods);const GetValue$y=Phaser.Utils.Objects.GetValue,SizerAdd=Sizer.prototype.add;let TabPages$1=class extends Sizer{constructor(t,n){n===void 0&&(n={});var f=GetValue$y(n,"tabPosition","top"),T=f==="left"||f==="right"?"x":"y";n.orientation=T,super(t,n),this.type="rexTabPages";var E=GetValue$y(n,"background",void 0);E&&this.addBackground(E);var h=GetValue$y(n,"pages"),S=new Pages(t,h);t.add.existing(S);var e=T==="y",d=e?GetValue$y(n,"wrapTabs",!1):!1,y=GetValue$y(n,"tabs",void 0);y===void 0&&(y={});var c=d?Buttons:Buttons$1;y.orientation=e?"x":"y",y.buttonsType="radio";var u=new c(t,y);t.add.existing(u);var l=d?!0:GetValue$y(n,"expand.tabs",!1),r=GetValue$y(n,"align.tabs","left");switch(f){case"top":case"left":SizerAdd.call(this,u,{proportion:0,expand:l,align:r}),SizerAdd.call(this,S,{proportion:1,expand:!0});break;case"bottom":case"right":SizerAdd.call(this,S,{proportion:1,expand:!0}),SizerAdd.call(this,u,{proportion:0,expand:l,align:r});break}this.addChildrenMap("background",E),this.addChildrenMap("tabs",u),this.addChildrenMap("pages",S),u.on("button.click",function(a){var v=a.name;S.hasPage(v)&&S.swapPage(v)}),u.on("button.statechange",function(a,v,o,p){var m=o?"tab.focus":"tab.blur";this.emit(m,a,a.name)},this),S.on("pagevisible",function(a,v,o){this.emit("page.focus",a,v)}),S.on("pageinvisible",function(a,v,o){this.emit("page.blur",a,v)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(TabPages$1.prototype,methods$7);ObjectFactory.register("tabPages",function(s){var t=new TabPages$1(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.TabPages",TabPages$1);class Transition extends OpenCloseTransition{constructor(t,n){n===void 0&&(n={}),n.destroy=!1,super(t,n)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const ExpandMethods={expand(s){if(this.expanded===!0)return this;s===void 0&&(s=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,n=this.childrenMap.child;this.show(n);var f=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();return f.layout(),t.emit("folder.expand",s,this),n.emit("folder.expand",s,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,s),this},collapse(s){if(this.expanded===!1)return this;s===void 0&&(s=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,n=this.childrenMap.child;return t.emit("folder.collapse",s,this),n.emit("folder.collapse",s,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){this.setChildScale(n,1,1).hide(n);var f=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();f.layout(),this.emit("collapse.complete",this)},this).requestClose(null,s),this},toggle(s){return this.expanded?this.collapse(s):this.expand(s),this}};var DefaultExpandCallback=function(s,t){ScaleMethods.popUp.call(s,t,this.expandDirection)},DefaultCollapseCallback=function(s,t){ScaleMethods.scaleDown.call(s,t,this.expandDirection)};const ConfigurationMethods={setTransitionDuration(s){return this.transitionDuration=s,this.childTransition.setTransitInTime(s).setTransitOutTime(s),this},setExpandCallback(s){return s===void 0&&(s=DefaultExpandCallback.bind(this)),this.childTransition.setTransitInCallback(s),this},setCollapseCallback(s){return s===void 0&&(s=DefaultCollapseCallback.bind(this)),this.childTransition.setTransitOutCallback(s),this}},GetValue$x=Phaser.Utils.Objects.GetValue;let Folder$1=class extends Sizer{constructor(t,n){n===void 0&&(n={}),n.hasOwnProperty("orientation")||(n.orientation=1),super(t,n),this.type="rexFolder",this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var f=n.background,T=n.title,E=n.child;f&&this.addBackground(f);var h=this.orientation===1?"left":"top",c=GetValue$x(n,"align.title",h),u=GetValue$x(n,"expand.title",!0);this.add(T,{proportion:0,align:c,expand:u});var S=GetValue$x(n,"toggleByTarget",void 0),e=GetValue$x(n,"toggleClickConfig");S===void 0&&(S=T),S&&ClickMethods.onClick.call(S,function(){this.toggle()},this,e),this.childTransition=new Transition(E);var d=GetValue$x(n,"customChildOrigin",!1);if(!d){var y=this.rtl?1:0;E.setOrigin(y)}var c=GetValue$x(n,"align.child","left"),u=GetValue$x(n,"expand.child",!0),l=u?1:0;this.add(E,{proportion:l,align:c,expand:u}),this.addChildrenMap("title",T),this.addChildrenMap("child",E),this.addChildrenMap("background",f);var r=n.transition;this.setTransitionDuration(GetValue$x(r,"duration",200)),this.setExpandCallback(GetValue$x(r,"expandCallback",void 0)),this.setCollapseCallback(GetValue$x(r,"collapseCallback",void 0)),this.reLayoutTarget=GetValue$x(n,"reLayoutTarget",void 0);var a=n.onExpandStart;a&&this.on("expand.start",a);var v=n.onExpandComplete;v&&this.on("expand.complete",v);var o=n.onCollapseStart;o&&this.on("collapse.start",o);var p=n.onCollapseComplete;p&&this.on("collapse.complete",p)}};Object.assign(Folder$1.prototype,ExpandMethods,ConfigurationMethods);ObjectFactory.register("folder",function(s){var t=new Folder$1(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Folder",Folder$1);ObjectFactory.register("textArea",function(s){var t=new TextArea(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.TextArea",TextArea);var InjectProperties=function(s){Object.defineProperty(s,"childOY",{configurable:!0,get:function(){return s.textOY},set:function(t){s.textOY=t}}),Object.defineProperty(s,"topChildOY",{get:function(){return s.topTextOY}}),Object.defineProperty(s,"bottomChildOY",{get:function(){return s.bottomTextOY}}),Object.defineProperty(s,"childVisibleHeight",{get:function(){return s.textVisibleHeight}}),Object.defineProperty(s,"childHeight",{get:function(){return s.contentHeight}})};const SetTextMethods={setText(s){var t=this.childrenMap.child;return t.setText(s),this},appendText(s){return this.setText(this.text+s),this}},ScrollMethods={scrollToLine(s){return this.setChildOY(-this.lineHeight*s),this},scrollToNextLine(s){s===void 0&&(s=1);var t=this.lineIndex+s;return this.scrollToLine(t),this}},GetValue$w=Phaser.Utils.Objects.GetValue;class TextAreaInput extends Scrollable{constructor(t,n){n===void 0&&(n={});var f=GetValue$w(n,"text"),T;IsGameObject(f)?T=f:(f===void 0&&(f={}),f.textArea=!0,T=new CanvasInput(t,f),t.add.existing(T)),InjectProperties(T);var E=f.width===void 0,h=f.height===void 0;E&&(T.minWidth=0),h&&(T.minHeight=0),n.scrollMode=0,n.type="rexTextAreaInput",n.child={gameObject:T,expandWidth:E,expandHeight:h};var S=GetValue$w(n,"space",void 0);S&&(S.child=GetValue$w(S,"text",0)),n.scroller=!1,super(t,n),this.addChildrenMap("text",T);var e,d;T.on("cursorin",function(){var c=T.textOY,u=T.contentHeight,l=e!==c,r=d!==u;e=c,d=u,r&&this.resizeController(),(l||r)&&(this.t=T.t)},this),T.on("textchange",function(c){this.emit("textchange",c,this)},this);var y=GetValue$w(n,"content",void 0);y&&this.setText(y)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.lineHeight}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.contentHeight}get readOnly(){var t=this.childrenMap.child;return t.readOnly}set readOnly(t){var n=this.childrenMap.child;n.readOnly=t}setReadOnly(t){var n=this.childrenMap.child;return n.setReadOnly(t),this}}Object.assign(TextAreaInput.prototype,SetTextMethods,ScrollMethods);ObjectFactory.register("textAreaInput",function(s){var t=new TextAreaInput(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.TextAreaInput",TextAreaInput);var GetChildrenWidth=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,n=t.rexSizer;if(n.hidden)s=0;else switch(this.scrollMode){case 0:s=this.getChildWidth(t);break;case 1:s=0;break;default:s=0;break}return s},GetChildrenHeight=function(){if(this.rexSizer.hidden)return 0;var s,t=this.child,n=t.rexSizer;if(n.hidden)s=0;else switch(this.scrollMode){case 0:s=0;break;case 1:s=this.getChildHeight(t);break;default:s=0;break}return s},GetChildrenSizers=function(s){return s===void 0&&(s=[]),this.child&&this.child.isRexSizer&&s.push(this.child),s},ResetChildPosition=function(){var s=this.left,t=this.top;switch(this.scrollMode){case 0:t+=this.childOY;break;case 1:s+=this.childOY;break;default:t+=this.childOY,s+=this.childOX;break}this.child.setPosition(s,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},LayoutChildren=function(){var s=this.child,t,n;if(!s.rexSizer.hidden){switch(this.scrollMode){case 0:t=this.width;break;case 1:n=this.height;break}s.isRexSizer?s.runLayout(this,t,n):ResizeGameObject(s,t,n),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren()}},RemoveChildCallback=function(s,t){t||s.clearMask&&s.clearMask(!1)},methods$6={getChildrenWidth:GetChildrenWidth,getChildrenHeight:GetChildrenHeight,getChildrenSizers:GetChildrenSizers,resetChildPosition:ResetChildPosition,layoutChildren:LayoutChildren,removeChildCallback:RemoveChildCallback};Object.assign(methods$6,ChildrenMaskMethods);const IsPlainObject$5=Phaser.Utils.Objects.IsPlainObject,GetValue$v=Phaser.Utils.Objects.GetValue,ALIGN_LEFTTOP=Phaser.Display.Align.TOP_LEFT;class ScrollableBlock extends Base{constructor(t,n,f,T,E,h){IsPlainObject$5(n)?(h=n,n=GetValue$v(h,"x",0),f=GetValue$v(h,"y",0),T=GetValue$v(h,"width",void 0),E=GetValue$v(h,"height",void 0)):IsPlainObject$5(T)&&(h=T,T=GetValue$v(h,"width",void 0),E=GetValue$v(h,"height",void 0)),super(t,n,f,T,E,h),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this._childOX=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,this.setScrollMode(GetValue$v(h,"scrollMode",0));var S=GetValue$v(h,"clamplChildOY",!0),e=GetValue$v(h,"clamplChildOX",S);this.setClampMode(S,e);var d=GetValue$v(h,"child",void 0),y=GetValue$v(h,"expand",!0);d.setOrigin&&d.setOrigin(0),this.add(d),this.sizerChildren=[d];var c=this.getSizerConfig(d);c.align=ALIGN_LEFTTOP,c.expand=y,this.child=d,this.setupChildrenMask(GetValue$v(h,"mask",void 0)),this.childrenMask&&(this.maskGameObject=MaskToGameObject(this.childrenMask))}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=SCROLLMODE$1[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t,n){return this.clampChildOY=t,this.clampChildOX=n,this}get instHeight(){return this.scrollMode===0||this.scrollMode===2?this.height:this.width}get instWidth(){return this.scrollMode===0||this.scrollMode===2?this.width:this.height}get childHeight(){return this.scrollMode===0||this.scrollMode===2?GetDisplayHeight(this.child):GetDisplayWidth(this.child)}get childWidth(){return this.scrollMode===0||this.scrollMode===2?GetDisplayWidth(this.child):GetDisplayHeight(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get leftChildOX(){return 0}get rightChildOX(){return-this.visibleWidth}get childVisibleHeight(){return this.instHeight}get childVisibleWidth(){return this.instWidth}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}get visibleWidth(){var t=this.childWidth-this.childVisibleWidth;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}childOXExceedLeft(t){return t===void 0&&(t=this.childOX),t>this.leftChildOX}childOXExeceedRight(t){return t===void 0&&(t=this.childOX),t<this.rightChildOX}get childOY(){return this._childOY}set childOY(t){var n=this.topChildOY,f=this.bottomChildOY,T=this.childOYExceedTop(t),E=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:T?t=n:E&&(t=f)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),T&&(this.execeedTopState||this.emit("execeedtop",this,t,n)),this.execeedTopState=T,E&&(this.execeedBottomState||this.emit("execeedbottom",this,t,f)),this.execeedBottomState=E}get childOX(){return this._childOX}set childOX(t){var n=this.leftChildOX,f=this.rightChildOX,T=this.childOXExceedLeft(t),E=this.childOXExeceedRight(t);this.clampChildOX&&(this.childVisibleWidth>this.childWidth?t=0:T?t=n:E&&(t=f)),this._childOX!==t&&(this._childOX=t,this.resetChildPosition()),T&&(this.execeedLeftState||this.emit("execeedleft",this,t,n)),this.execeedLeftState=T,E&&(this.execeedRightState||this.emit("execeedright",this,t,f)),this.execeedRightState=E}setChildOY(t){return this.childOY=t,this}setChildOX(t){return this.childOX=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}set s(t){this.childOX=-this.visibleWidth*t}get s(){var t=this.visibleWidth;return t===0?0:this.childOX/-t}setChildOYByPercentage(t){return this.t=t,this}setChildOXByPercentage(t){return this.s=t,this}}Object.assign(ScrollableBlock.prototype,methods$6);var ScrollToChild=function(s,t){if(!this.hasChild(s))return this;switch(this.scrollMode){case 0:AlignChild.call(this,s,"y",t);break;case 1:AlignChild.call(this,s,"x",t);break;default:AlignChild.call(this,s,"y",t),AlignChild.call(this,s,"x",t);break}return this};const AlignYModes=["top","bottom","centerY","center"],AlignXModes=["left","right","centerX","center"];var AlignChild=function(s,t,n){t=t.toUpperCase();var f=t==="Y",T=this.childrenMap.child,E;if(f){if(n)for(var h=0,S=AlignYModes.length;h<S;h++){var e=AlignYModes[h];if(n.indexOf(e)!==-1){n=e;break}}switch(n){case"top":E=T.top-s.getTopLeft().y;break;case"bottom":E=T.bottom-s.getBottomLeft().y;break;case"centerY":case"center":E=T.centerY-s.getCenter().y;break;default:var d=T.top-s.getTopLeft().y,y=T.bottom-s.getBottomLeft().y;d<=0&&y>=0?E=0:E=Math.abs(d)<=Math.abs(y)?d:y;break}}else{if(n)for(var h=0,S=AlignXModes.length;h<S;h++){var e=AlignXModes[h];if(n.indexOf(e)!==-1){n=e;break}}switch(n){case"left":E=T.left-s.getTopLeft().x;break;case"right":E=T.right-s.getTopRight().x;break;case"centerX":case"center":E=T.centerX-s.getCenter().x;break;default:var c=T.left-s.getTopLeft().x,u=T.right-s.getTopRight().x;c<=0&&u>=0?E=0:E=Math.abs(c)<=Math.abs(u)?c:u;break}}switch(this.scrollMode){case 0:case 1:this.childOY+=E;break;default:this[`childO${t}`]+=E;break}};const GetValue$u=Phaser.Utils.Objects.GetValue;class ScrollablePanel extends Scrollable{constructor(t,n){n===void 0&&(n={});var f=GetScrollMode(n),T=GetValue$u(n,"panel",void 0);T===void 0&&(T={}),T.scrollMode=f,T.clamplChildOY=GetValue$u(n,"clamplChildOY",!1),T.clamplChildOX=GetValue$u(n,"clamplChildOX",!1);var E=new ScrollableBlock(t,T);t.add.existing(E);var h,S;switch(f){case 0:h=GetValue$u(n,"expand.panel",!0),S=!0;break;case 1:h=!0,S=GetValue$u(n,"expand.panel",!0);break;default:h=!0,S=!0}n.type="rexScrollablePanel",n.child={gameObject:E,expandWidth:h,expandHeight:S,align:GetValue$u(n,"align.panel","center")};var e=GetValue$u(n,"space",void 0);e&&(e.child=GetValue$u(e,"panel",0)),super(t,n),this.addChildrenMap("panel",E.child),this.addChildrenMap("panelLayer",E.maskLayer),this.addChildrenMap("mask",E.maskGameObject),this.addChildrenMap("scrollableBlock",E)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),SetChildrenInteractive(this.childrenMap.child,t),this}}var methods$5={scrollToChild:ScrollToChild};Object.assign(ScrollablePanel.prototype,methods$5);ObjectFactory.register("scrollablePanel",function(s){var t=new ScrollablePanel(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.ScrollablePanel",ScrollablePanel);const DefaultTransitCallbacks={popUp:function(s,t){s.popUp(t)},scaleDown:function(s,t){s.scaleDown(t)},fadeIn:function(s,t){s.fadeIn(t)},fadeOut:function(s,t){s.fadeOut(t)}},GetValue$t=Phaser.Utils.Objects.GetValue;class Toast extends Label{constructor(t,n){n===void 0&&(n={text:createDefaultTextObject(t)}),super(t,n),this.type="rexToast",this.setTransitInTime(GetValue$t(n,"duration.in",200)),this.setDisplayTime(GetValue$t(n,"duration.hold",1200)),this.setTransitOutTime(GetValue$t(n,"duration.out",200)),this.setTransitInCallback(GetValue$t(n,"transitIn",TransitionMode.popUp)),this.setTransitOutCallback(GetValue$t(n,"transitOut",TransitionMode.scaleDown)),this.player=new Player(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||this.ignoreDestroy||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=TransitionMode[t]),t){case TransitionMode.popUp:t=DefaultTransitCallbacks.popUp;break;case TransitionMode.fadeIn:t=DefaultTransitCallbacks.fadeIn;break}return t||(t=NOOP),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=TransitionMode[t]),t){case TransitionMode.scaleDown:t=DefaultTransitCallbacks.scaleDown;break;case TransitionMode.fadeOut:t=DefaultTransitCallbacks.fadeOut;break}return t||(t=NOOP),this.transitOutCallback=t,this}setScale(t,n){return n===void 0&&(n=t),this.scaleX0=t,this.scaleY0=n,super.setScale(t,n),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var n=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[NOOP]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[NOOP]]];return this.player.load(n,this).once("complete",function(){this.showMessage()},this).start(),this}}const TransitionMode={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};ObjectFactory.register("toast",function(s){var t=new Toast(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Toast",Toast);var CreateSwatch=function(s,t){if(t===!1)return null;if(IsGameObject(t))return t;var n=new RoundRectangle$2(s,t);return s.add.existing(n),n},CreateInputText$1=function(s,t,n){n===void 0&&(n=!0),n?t=t?DeepClone(t):{}:t||(t={});var f=new CanvasInput(s,t);return s.add.existing(f),f};const ColorNames=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],ColorValues=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];var ColorNameToIntegerDict={},name;for(var i$1=0,cnt=ColorNames.length;i$1<cnt;i$1++)name=ColorNames[i$1].toLowerCase(),ColorNameToIntegerDict[name]=ColorValues[i$1];var ColorNameToInteger=function(s){return s=s.toLowerCase(),ColorNameToIntegerDict.hasOwnProperty(s)?ColorNameToIntegerDict[s]:null},ColorStringToInteger=function(s){return typeof s!="string"||(s.startsWith("#")?s=parseInt(s.substring(1),16):s.startsWith("0x")?s=parseInt(s.substring(2),16):s=ColorNameToInteger(s)),s};const Pad=Phaser.Utils.String.Pad;var GetHexColorString=function(s,t){t===void 0&&(t="0x");var n=s.toString(16).toUpperCase();return n=Pad(n,6,0,1),n=t+n,n},SetSwatchColor=function(s,t){s&&(s.setTint?s.setTint(t):s.setFillStyle&&s.setFillStyle(t))};const GetValue$s=Phaser.Utils.Objects.GetValue,IsPlainObject$4=Phaser.Utils.Objects.IsPlainObject,Clamp$1=Phaser.Math.Clamp;let ColorInput$1=class extends Sizer{constructor(t,n){n===void 0&&(n={}),n.orientation=0,super(t,n),this.type="rexColorInputLite";var f=GetValue$s(n,"background",void 0),T=GetValue$s(n,"swatch"),E;IsPlainObject$4(T)&&(E=GetValue$s(T,"size"));var h=CreateSwatch(t,GetValue$s(n,"swatch")),S=GetValue$s(n,"inputText",{}),e;if(S&&(e=CreateInputText$1(t,S)),f&&this.addBackground(f),h){E=GetValue$s(n,"swatchSize",E);var d;E!==void 0?(ResizeGameObject(h,E,E),d=!1):d=GetValue$s(n,"squareExpandSwatch",!0);var y=d?1:0;this.add(h,{proportion:0,expand:!1,fitRatio:y})}if(e){var c=GetValue$s(S,"width")===void 0?1:0,u=GetValue$s(S,"height")===void 0;this.add(e,{proportion:c,expand:u})}this.addChildrenMap("background",f),this.addChildrenMap("swatch",h),this.addChildrenMap("inputText",e),e&&e.on("close",function(){this.setValue(e.value)},this);var l=GetValue$s(n,"valuechangeCallback",null);if(l!==null){var r=GetValue$s(n,"valuechangeCallbackScope",void 0);this.on("valuechange",l,r)}this.setValue(GetValue$s(n,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=ColorStringToInteger(t),t==null){var f=this.childrenMap.inputText;f&&f.setText(GetHexColorString(this._value));return}}else t=Clamp$1(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var n=this.childrenMap.swatch;n&&SetSwatchColor(n,t);var f=this.childrenMap.inputText;f&&f.setText(GetHexColorString(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}};var methods$4={setCreateColorPickerBackgroundCallback(s){return this.colorPickerCreateBackgroundCallback=s,this},setColorPickerHPalettePosition(s){return this.colorPickerHPalettePosition=s,this},setColorPickerExpandDirection(s){return typeof s=="string"&&(s=ColorPickerExpandDirections[s]),this.colorPickerExpandDirection=s,this},setColorPickerEaseInDuration(s){return s===void 0&&(s=0),this.colorPickerEaseInDuration=s,this},setColorPickerEaseOutDuration(s){return s===void 0&&(s=0),this.colorPickerEaseOutDuration=s,this},setColorPickerTransitInCallback(s){return this.colorPickerTransitInCallback=s,this},setColorPickerTransitOutCallback(s){return this.colorPickerTransitOutCallback=s,this},setColorPickerBounds(s){return this.colorPickerBounds=s,this},setColorPickerWidth(s){return this.colorPickerWidth=s,this},setColorPickerHeight(s){return this.colorPickerHeight=s,this},setColorPickerSize(s,t){return this.setColorPickerWidth(s).setColorPickerHeight(t),this},setColorPickerSpace(s){return s===void 0&&(s={}),this.colorPickerSpace=s,this},setColorComponentsHeight(s){return this.colorComponentsHeight=s,this},setColorComponentsFormatLabelConfig(s){return this.colorComponentsFormatLabelConfig=s,this},setColorComponentsInputTextConfig(s){return this.colorComponentsInputTextConfig=s,this},setColorComponentsSpace(s){return s===void 0&&(s={}),this.colorComponentsSpace=s,this}};const ColorPickerExpandDirections={down:0,up:1},Color$3=Phaser.Display.Color,Percent$2=Phaser.Math.Percent;var DrawHPalette=function(s,t,n){n===void 0&&(n=!1);var f=s.width,T=s.height,E=new Color$3;if(n)for(var h=0;h<T;h++){var S=Percent$2(h,0,T);E.setFromHSV(S,1,1),t.fillStyle=E.rgba,t.fillRect(0,h,f,1)}else for(var e=0;e<f;e++){var S=Percent$2(e,0,f);E.setFromHSV(S,1,1),t.fillStyle=E.rgba,t.fillRect(e,0,1,T)}},DrawSVPalette=function(s,t,n){for(var f=s.width,T=s.height,E=t.getImageData(0,0,f,T),h=E.data,S=new Color$3,e=0;e<T;e++)for(var d=0;d<f;d++){var y=Percent$2(d,0,f),c=1-Percent$2(e,0,T);S.setFromHSV(n,y,c);var u=(e*f+d)*4;h[u]=S.red,h[u+1]=S.green,h[u+2]=S.blue,h[u+3]=255}t.putImageData(E,0,0)};const Color$2=Phaser.Display.Color,Percent$1=Phaser.Math.Percent,ColorToRGBA$2=Phaser.Display.Color.ColorToRGBA,HSVToRGB$2=Phaser.Display.Color.HSVToRGB;class HPaletteCanvas extends Canvas{constructor(t,n,f,T,E,h){n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=2),E===void 0&&(E=2),super(t,n,f,T,E),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new Color$2,this.setOrientation(h),this.setSize(T,E)}setOrientation(t){return this.orientation=GetOrientationMode(t),this}updateTexture(){return DrawHPalette(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,n){return t===void 0?this.hue:(this.orientation===0?this.hue=Percent$1(t,0,this.width):this.hue=Percent$1(n,0,this.height),this.hue)}getColor(t,n){if(t===void 0)return this.color;var f=this.getHue(t,n);return this.colorObject.setFromRGB(HSVToRGB$2(f,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,n){return n===void 0?n={}:n===!0&&(LocalXY$1===void 0&&(LocalXY$1={}),n=LocalXY$1),this.colorObject.setFromRGB(ColorToRGBA$2(t)),this.orientation===0?(n.x=this.width*this.colorObject.h,n.y=this.height/2):(n.x=this.width/2,n.y=this.height*this.colorObject.h),n}}var LocalXY$1=void 0,RotateAround$1=Phaser.Math.RotateAround,LocalToWorld=function(s,t,n,f){f===void 0?f={}:f===!0&&(GlobOut===void 0&&(GlobOut={}),f=GlobOut),t-=s.width*s.originX,n-=s.height*s.originY;var T={x:t*s.scaleX,y:n*s.scaleY};return RotateAround$1(T,0,0,-s.rotation),f.x=s.x+t,f.y=s.y+n,f},GlobOut;class HPalette extends OverlapSizer{constructor(t,n){n===void 0&&(n={}),super(t,n);var f=n.width!=null?1:0,T=new HPaletteCanvas(t).setOrientation(f);t.add.existing(T),this.type="rexColorPicker.HPalette",T.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var E=new RoundRectangle$2(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(E),this.add(T,{key:"paletteCanvas",expand:!0}).add(E,{key:"marker",expand:!1})}resize(t,n){if(this.width===t&&this.height===n)return this;super.resize(t,n);var f=Math.min(t,n);return this.childrenMap.marker.setSize(f,f),this}onPaletteCanvasPointerDown(t,n,f,T){if(t.isDown){var E=this.childrenMap.paletteCanvas,h=E.getColor(n,f);this.setMarkerPosition(h),this.emit("input",h)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var n=this.childrenMap.paletteCanvas;return n.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var n=this.childrenMap.paletteCanvas,f=this.childrenMap.marker,T=n.colorToLocalPosition(t,!0);return LocalToWorld(n,T.x,T.y,f),this.resetChildPositionState(f),this}getHue(t,n){var f=this.childrenMap.paletteCanvas;return f.getHue(t,n)}}const Color$1=Phaser.Display.Color,Percent=Phaser.Math.Percent,ColorToRGBA$1=Phaser.Display.Color.ColorToRGBA,HSVToRGB$1=Phaser.Display.Color.HSVToRGB;class SVPaletteCanvas extends Canvas{constructor(t,n,f,T,E,h){n===void 0&&(n=0),f===void 0&&(f=0),T===void 0&&(T=2),E===void 0&&(E=2),super(t,n,f,T,E),this.type="rexColorPicker.SVPaletteCanvas",h===void 0&&(h=1),this.colorObject=new Color$1,this.setHue(h),this.setSize(T,E)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return DrawSVPalette(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,n){if(t===void 0)return this.colorObject.color;var f=Percent(t,0,this.width),T=1-Percent(n,0,this.height);return this.colorObject.setFromRGB(HSVToRGB$1(this.hue,f,T)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(ColorToRGBA$1(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,n){return n===void 0?n={}:n===!0&&(LocalXY===void 0&&(LocalXY={}),n=LocalXY),this.colorObject.setFromRGB(ColorToRGBA$1(t)),n.x=this.width*this.colorObject.s,n.y=this.height*(1-this.colorObject.v),n}}var LocalXY=void 0;class SVPalette extends OverlapSizer{constructor(t,n){super(t,n);var f=new SVPaletteCanvas(t);t.add.existing(f),this.type="rexColorPicker.SVPalette",f.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var T=new RoundRectangle$2(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(T),this.add(f,{key:"paletteCanvas",expand:!0}).add(T,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,n,f,T){if(t.isDown){var E=this.childrenMap.paletteCanvas,h=E.getColor(n,f);this.setMarkerPosition(h),this.emit("input",h)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var n=this.childrenMap.paletteCanvas;return n.setHue(t),this}setColor(t){if(this.color===t)return this;var n=this.childrenMap.paletteCanvas;return n.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var n=this.childrenMap.paletteCanvas,f=this.childrenMap.marker,T=n.colorToLocalPosition(t,!0);return LocalToWorld(n,T.x,T.y,f),this.resetChildPositionState(f),this}}const GetValue$r=Phaser.Utils.Objects.GetValue;class ColorPicker extends Sizer{constructor(t,n){super(t,n),this.type="rexColorPicker",this.freezePalettes=!1;var f=GetValue$r(n,"hPalette.position",0);typeof f=="string"&&(f=HPalettePositionNamesMap[f]);var T=f===0||f===2?1:0;this.setOrientation(T);var E=GetValue$r(n,"background",void 0),h,S;if(this.orientation===0){var h=GetValue$r(n,"hPalette.width",void 0);h===void 0&&(h=GetValue$r(n,"hPalette.size",10))}else S=GetValue$r(n,"hPalette.height",void 0),S===void 0&&(S=GetValue$r(n,"hPalette.size",10));var e=new HPalette(t,{width:h,height:S});t.add.existing(e);var d=GetValue$r(n,"svPalette.width",void 0),y=GetValue$r(n,"svPalette.height",void 0),c=new SVPalette(t,{width:d,height:y});t.add.existing(c),E&&this.addBackground(E);var u={proportion:0,expand:!0},l,r;this.orientation===0?(l=d===void 0?1:0,r=y===void 0):(l=y===void 0?1:0,r=d===void 0);var a={proportion:l,expand:r};f===0||f===3?this.add(c,a).add(e,u):this.add(e,u).add(c,a),e.on("input",function(){c.setHue(e.getHue()),this.setValue(c.color,!0)},this),c.on("input",function(){this.setValue(c.color,!0)},this),this.addChildrenMap("background",E),this.addChildrenMap("hPalette",e),this.addChildrenMap("svPalette",c);var v=GetValue$r(n,"valuechangeCallback",null);if(v!==null){var o=GetValue$r(n,"valuechangeCallbackScope",void 0);this.on("valuechange",v,o)}this.setValue(GetValue$r(n,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var n=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,n,this)}}setValue(t,n){return this.freezePalettes=!!n,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}postLayout(t,n,f){return this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),this}}var HPalettePositionNamesMap={bottom:0,left:1,top:2,right:3};const GetValue$q=Phaser.Utils.Objects.GetValue,Color=Phaser.Display.Color,ColorToRGBA=Phaser.Display.Color.ColorToRGBA,HSVToRGB=Phaser.Display.Color.HSVToRGB,Clamp=Phaser.Math.Clamp;class ColorComponents extends Sizer{constructor(t,n){n===void 0&&(n={}),n.orientation=0,super(t,n),this.type="rexColorComponents",this.colorObject=new Color;var f=GetValue$q(n,"background",void 0),T=GetValue$q(n,"formatLabel",void 0);IsGameObject(T)||(T=CreateLabel(t,T).resetDisplayContent());var E=[];if(n.inputText0&&n.inputText1&&n.inputText2)E.push(n.inputText0),E.push(n.inputText1),E.push(n.inputText2);else for(var h=GetValue$q(n,"inputText"),S=0;S<3;S++){var e=CreateInputText$1(t,h).setMaxLength(3).setNumberInput();E.push(e)}f&&this.addBackground(f);var y=GetValue$q(n,"proportion.formatLabel",0),d=!!T.isRexContainerLite,c=GetValue$q(n,"expand.formatLabel",d);this.add(T,{proportion:y,expand:c});for(var y=GetValue$q(h,"width")===void 0?1:0,c=GetValue$q(h,"height")===void 0,S=0,u=E.length;S<u;S++)this.add(E[S],{proportion:y,expand:c});this.addChildrenMap("background",f),this.addChildrenMap("formatLabel",T),this.addChildrenMap("components",E),this.onClick(T,this.toggleColorFormat,this);for(var S=0,u=E.length;S<u;S++)E[S].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var l=GetValue$q(n,"valuechangeCallback",null);if(l!==null){var r=GetValue$q(n,"valuechangeCallbackScope",void 0);this.on("valuechange",l,r)}T.setText("RGB"),this.setValue(GetValue$q(n,"value",16777215))}get value(){return this._value}set value(t){t=Clamp(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(ColorToRGBA(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,n,f,T;return this.colorFormat==="RGB"?(n=this.colorObject.red,f=this.colorObject.green,T=this.colorObject.blue):(n=Math.floor(this.colorObject.h*360),f=Math.floor(this.colorObject.s*100),T=Math.floor(this.colorObject.v*100)),t[0].setValue(n),t[1].setValue(f),t[2].setValue(T),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var n=Clamp(t[0].value,0,255),f=Clamp(t[1].value,0,255),T=Clamp(t[2].value,0,255);this.colorObject.setTo(n,f,T)}else{var E=Clamp(t[0].value,0,359)/360,h=Clamp(t[1].value,0,100)/100,S=Clamp(t[2].value,0,100)/100;this.colorObject.setFromRGB(HSVToRGB(E,h,S))}return this}}const GetValue$p=Phaser.Utils.Objects.GetValue;class ColorPickerPanel extends Sizer{constructor(t,n){n===void 0&&(n={}),n.orientation=1,super(t,n),this.type="rexColorInput.ColorPickerPanel";var f=GetValue$p(n,"background",void 0),T=new ColorPicker(t,{hPalette:n.hPalette||{},svPalette:n.svPalette||{},space:{item:GetValue$p(n,"space.hPalette",8)}});t.add.existing(T);var E;n.colorComponents&&(E=new ColorComponents(t,n.colorComponents),t.add.existing(E)),f&&(this.addBackground(f),new TouchEventStop(f,{stopAllLevels:!1})),this.add(T,{proportion:1,expand:!0}),E&&this.add(E,{proportion:0,expand:!0}),this.addChildrenMap("background",f),this.addChildrenMap("colorPicker",T),this.addChildrenMap("colorComponents",E),T.on("valuechange",function(h){this.setValue(h)},this),E&&E.on("valuechange",function(h){this.setValue(h)},this),this.setValue(GetValue$p(n,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var n=this.childrenMap.colorPicker;n.setValue(t);var f=this.childrenMap.colorComponents;f&&f.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var CreateColorPicker=function(t){var t=this.scene,n,f=this.colorPickerCreateBackgroundCallback;f&&(n=f.call(this,t),t.add.existing(n));var T=this.colorPickerWidth;T===void 0&&(T=this.width);var E=this.colorPickerHeight;E===void 0&&(E=T);var h;this.colorComponentsHeight>0?h={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:h=!1;var S=new ColorPickerPanel(t,{width:T,height:E,background:n,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:h,value:this.value});return t.add.existing(S),S},OpenColorPicker=function(){if(!this.colorPicker){var s=CreateColorPicker.call(this).layout(),t=new DropDown(s,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){s.on("valuechange",function(n){this.setValue(n)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=s,this.dropDownBehavior=t,this.pin(s),this}},methods$3={openColorPicker:OpenColorPicker};Object.assign(methods$3,methods$4);const GetValue$o=Phaser.Utils.Objects.GetValue;class ColorInput extends ColorInput$1{constructor(t,n){n===void 0&&(n={}),super(t,n),this.type="rexColorInput",n.hasOwnProperty("colorPicker")||(n.colorPicker={background:{color:0}});var f=n.colorPicker,T=f!==!1&&f!==null;if(T){this.setColorPickerSize(GetValue$o(f,"width",160),GetValue$o(f,"height",170));var E,h=GetValue$o(f,"background");h?E=function(l){return CreateBackground$2(l,h)}:E=GetValue$o(f,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(E),this.setColorPickerHPalettePosition(GetValue$o(f,"hPalettePosition",0)),this.setColorPickerExpandDirection(GetValue$o(f,"expandDirection")),this.setColorPickerEaseInDuration(GetValue$o(f,"easeIn",200)),this.setColorPickerEaseOutDuration(GetValue$o(f,"easeOut",200)),this.setColorPickerTransitInCallback(GetValue$o(f,"transitIn")),this.setColorPickerTransitOutCallback(GetValue$o(f,"transitOut")),this.setColorPickerBounds(GetValue$o(f,"bounds"));var S=GetValue$o(f,"space");S===void 0&&(S={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(S)}var e=n.colorComponents,d=e!==!1&&e!==null;if(T&&d){this.setColorComponentsHeight(GetValue$o(e,"height",30)),this.setColorComponentsFormatLabelConfig(GetValue$o(e,"formatLabel"));var y=GetValue$o(e,"inputText");y||(y=GetValue$o(n,"inputText")),this.setColorComponentsInputTextConfig(y);var c=GetValue$o(e,"space");c===void 0&&(c={item:8}),this.setColorComponentsSpace(c)}var u=this.childrenMap.swatch;u&&T&&this.onClick(u,this.openColorPicker,this)}}Object.assign(ColorInput.prototype,methods$3);ObjectFactory.register("colorInput",function(s){var t=new ColorInput(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.ColorInput",ColorInput);ObjectFactory.register("colorInputLite",function(s){var t=new ColorInput$1(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.ColorInputBase",ColorInput$1);ObjectFactory.register("colorPicker",function(s){var t=new ColorPicker(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.ColorPicker",ColorPicker);ObjectFactory.register("colorComponents",function(s){var t=new ColorComponents(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.ColorComponents",ColorComponents);var GetShowCallback$1=function(){return function(s,t,n,f){t!=="panel"&&n.setChildVisible(s,!0)}},GetHideCallback$1=function(){return function(s,t,n,f){t!=="panel"&&n.setChildVisible(s,!1)}};const VisibleCallbacks={show:GetShowCallback$1,hide:GetHideCallback$1};var GetShowCallback=function(s,t){return t===void 0&&(t=1),function(n,f,T,E){f!=="panel"&&T.fadeChild(n,E?0:s,t)}},GetHideCallback=function(s,t){return t===void 0&&(t=0),function(n,f,T,E){f!=="panel"&&T.fadeChild(n,E?0:s,t)}};const FadeCallbacks={show:GetShowCallback,hide:GetHideCallback};var GetCallback$1=function(s,t){return function(n,f,T,E){f!=="panel"&&T.moveChild(n,E?0:s,t)}};const MoveCallbacks={show:GetCallback$1,hide:GetCallback$1};var GetCallback=function(s,t){return function(n,f,T,E){f==="panel"&&T.moveChild(n,E?0:s,t)}};const MovePanelCallbacks={show:GetCallback,hide:GetCallback},DefaultCallbacks={visible:VisibleCallbacks,fade:FadeCallbacks,move:MoveCallbacks,"move-panel":MovePanelCallbacks};var GetDefaultCallbacks=function(s){var t,n;[t,...n]=typeof s=="string"?[s]:s;var f,T;return DefaultCallbacks.hasOwnProperty(t)?(f=DefaultCallbacks[t].show.apply(null,n),T=DefaultCallbacks[t].hide.apply(null,n)):(f=NOOP,T=NOOP),{show:f,hide:T}};const ShowChildMethods={showChild(s,t){var n=this.sizerChildren[s];return n&&(this.emit("showchild",n,s,this,t),this.resetChildState(n)),this},hideChild(s,t){var n=this.sizerChildren[s];return n&&(this.emit("hidechild",n,s,this,t),this.resetChildState(n)),this},swapChild(s,t){return this.currentChildKey===s||(this.currentChildKey==="panel"||s==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=s,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(s,t))),this},showPanel(s){return this.swapChild("panel",s),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var s=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(s),this},toggleRightSide(){var s=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(s),this},toggleTopSide(){var s=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(s),this},toggleBottomSide(){var s=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(s),this}},ContainerSetChildVisible=ContainerLite.prototype.setChildVisible,Visible={setChildVisible(s,t){var n;if(typeof s=="string"){var n=s;s=this.sizerChildren[n]}else n=IndexOf(this.sizerChildren,s);return t===void 0&&(t=this.currentChildKey===n),ContainerSetChildVisible.call(this,s,t),this}},Fade={fadeChild(s,t,n){var f;return typeof s=="string"?(f=s,s=this.sizerChildren[f]):f=IndexOf(this.sizerChildren,s),t===void 0&&(t=500),n===void 0&&(n=this.currentChildKey===f?1:0),s.fadeIn(t,{start:s.alpha,end:n}),this},fadeChildPromise(s,t,n){return typeof s=="string"&&(s=this.sizerChildren[key]),this.fadeChild(s,t,n),s._fade?WaitComplete(s._fade):Promise.resolve()}},Move={moveChild(s,t,n,f){var T;typeof s=="string"?(T=s,s=this.sizerChildren[T]):T=IndexOf(this.sizerChildren,s),t===void 0&&(t=500);var E=this.currentChildKey===T;if(f===void 0)switch(T){case"leftSide":case"rightSide":f=GetDisplayWidth(s);break;case"topSide":case"bottomSide":f=GetDisplayHeight(s);break;default:if(E)switch(this.previousChildKey){case"leftSide":case"rightSide":f=GetDisplayWidth(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":f=GetDisplayHeight(this.sizerChildren[this.previousChildKey]);break;default:f=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":f=GetDisplayWidth(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":f=GetDisplayHeight(this.sizerChildren[this.currentChildKey]);break;default:f=0;break}break}var h,S,e,d;if(E)switch(T){case"panel":switch(this.previousChildKey){case"leftSide":h=!0;break;case"rightSide":S=!0;break;case"topSide":e=!0;break;case"bottomSide":d=!0;break}break;case"leftSide":S=!0;break;case"rightSide":h=!0;break;case"topSide":d=!0;break;case"bottomSide":e=!0;break}else switch(T){case"panel":switch(this.currentChildKey){case"leftSide":S=!0;break;case"rightSide":h=!0;break;case"topSide":d=!0;break;case"bottomSide":e=!0;break}break;case"leftSide":h=!0;break;case"rightSide":S=!0;break;case"topSide":e=!0;break;case"bottomSide":d=!0;break}return h?s.moveTo(t,`-=${f}`,void 0,n):S?s.moveTo(t,`+=${f}`,void 0,n):e?s.moveTo(t,void 0,`-=${f}`,n):d?s.moveTo(t,void 0,`+=${f}`,n):s.moveTo(0),this},moveChildPromise(s,t,n,f){return typeof s=="string"&&(s=this.sizerChildren[key]),this.moveChild(s,t,n,f),s._easeMove?WaitComplete(s._easeMove):Promise.resolve()}};var methods$2={};Object.assign(methods$2,Visible,Fade,Move);const GetValue$n=Phaser.Utils.Objects.GetValue;class Sides extends OverlapSizer{constructor(t,n){super(t,n),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var f=GetValue$n(n,"showChildCallback",void 0);if(f)if(IsFunction(f)){var T=GetValue$n(n,"showChildCallbackScope",void 0);this.on("showchild",f,T);var E=GetValue$n(n,"hideChildCallback",void 0),h=GetValue$n(n,"hideChildCallbackScope",void 0);this.on("hidechild",E,h)}else{var S=GetDefaultCallbacks(f);this.on("showchild",S.show),this.on("hidechild",S.hide)}var e=GetValue$n(n,"background",void 0),d=GetValue$n(n,"panel",void 0),y=GetValue$n(n,"leftSide",void 0),c=GetValue$n(n,"rightSide",void 0),u=GetValue$n(n,"topSide",void 0),l=GetValue$n(n,"bottomSide",void 0);if(e&&this.addBackground(e),d&&this.add(d,"panel","center",0,!0),y){var r=GetValue$n(n,"expand.left",!0);this.add(y,"leftSide","left-top",0,{height:r})}if(c){var r=GetValue$n(n,"expand.right",!0);this.add(c,"rightSide","right-top",0,{height:r})}if(u){var r=GetValue$n(n,"expand.top",!0);this.add(u,"topSide","left-top",0,{width:r})}if(l){var r=GetValue$n(n,"expand.bottom",!0);this.add(l,"bottomSide","left-bottom",0,{width:r})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Sides.prototype,ShowChildMethods,methods$2);ObjectFactory.register("sides",function(s){var t=new Sides(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Sides",Sides);var RegisterInputHandler=function(s){var t=!0;return s.hasOwnProperty("accept")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${s.name}', missing 'accept' callback.`)),s.hasOwnProperty("build")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${s.name}', missing 'build' callback.`)),t&&this.inputHandlers.unshift(s),this};const GetFirst=Phaser.Utils.Array.GetFirst,Remove=Phaser.Utils.Array.Remove;var RemoveInputHandler=function(s){var t=GetFirst(this.inputHandlers,"name",s);return t&&Remove(this.inputHandlers,t),this};class Title extends Label{constructor(t,n){n=BuildLabelConfig(t,n),super(t,n),this.type="rexTweaker.Title"}setTitle(t){return t=t?DeepClone(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class FolderTitle extends Title{constructor(t,n){n===void 0&&(n={}),super(t,n),this.type="rexTweaker.FolderTitle";var f=new Triangle(t,n.expandedIcon);t.add.existing(f),this.addSpace().add(f,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",f)}setExpandedState(t){t===void 0&&(t=!0);var n=t?"down":"right",f=this.childrenMap.expandedIcon;return f.setDirection(n),this}}var CreateTweaker=function(s,t){var n=new TweakerShell(s,t);return s.add.existing(n),n},CreateBackground=function(s,t,n){return CreateBackground$2(s,n)};const BindingTargetMethods$2={setBindingTarget(s){var t=this.childrenMap.child;return t.setBindingTarget(s),this}},InputRowTitleWidthMethods$1={getMaxInputRowTitleWidth(){var s=this.childrenMap.child,t=s.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(s){s-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(s),this}};class Folder extends Folder$1{constructor(t,n){super(t,n),this.type="rexTweaker.Folder"}setTitle(t){var n=this.childrenMap.title;return n.setTitle(t),this}}Object.assign(Folder.prototype,BindingTargetMethods$2,InputRowTitleWidthMethods$1);const GetValue$m=Phaser.Utils.Objects.GetValue;var CreateFolder=function(s,t,n){var f=GetValue$m(n,"title")||{},T=new FolderTitle(s,f);s.add.existing(T),T.on("folder.expand",function(){T.setExpandedState(!0)}).on("folder.collapse",function(){T.setExpandedState(!1)});var E={root:GetValue$m(n,"root"),styles:GetValue$m(n,"tweaker"),space:GetValue$m(n,"space")||{}},h=CreateTweaker(s,E),S=GetValue$m(n,"background"),e=CreateBackground(s,t,S),d=new Folder(s,{orientation:1,title:T,child:h,background:e,transition:{duration:GetValue$m(n,"transition.duration",200)}});return s.add.existing(d),d};const GetValue$l=Phaser.Utils.Objects.GetValue;var AddFolder=function(s){var t=this.scene,n=GetValue$l(this.styles,"folder")||{};n.tweaker=this.styles,n.root=this.root;var f=CreateFolder(t,s,n);delete n.tweaker,delete n.root,this.add(f,{expand:!0}),f.setTitle(s);var T=GetValue$l(s,"expanded",!0);T?f.expand(0):f.collapse(0);var E=f.getElement("child");return s.key&&this.root.addChildrenMap(s.key,E),E};const BindingTargetMethods$1={setBindingTarget(s){for(var t=this.childrenMap.pages.children,n=0,f=t.length;n<f;n++)t[n].setBindingTarget(s);return this}},InputRowTitleWidthMethods={getMaxInputRowTitleWidth(){for(var s=0,t=this.childrenMap.pages.children,n=0,f=t.length;n<f;n++)s=Math.max(s,t[n].getMaxInputRowTitleWidth());return s+this.getInnerPadding("left")},setInputRowTitleWidth(s){s-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,n=0,f=t.length;n<f;n++)t[n].setInputRowTitleWidth(s);return this}};class TabPages extends TabPages$1{constructor(t,n){super(t,n),this.type="rexTweaker.TabPages"}}Object.assign(TabPages.prototype,BindingTargetMethods$1,InputRowTitleWidthMethods);const GetValue$k=Phaser.Utils.Objects.GetValue;var CreateTab=function(s,t,n){var f=new TabPages(s,n);s.add.existing(f);for(var T=GetValue$k(n,"tab"),E={root:GetValue$k(n,"root"),styles:GetValue$k(n,"tweaker")},h=GetValue$k(t,"pages")||[],S=0,e=h.length;S<e;S++){var d=h[S];f.addPage({key:d.title,tab:CreateLabel(s,T).setActiveState(!1).resetDisplayContent({text:d.title}),page:CreateTweaker(s,E)})}return f.on("tab.focus",function(y,c){y.setActiveState(!0)}).on("tab.blur",function(y,c){y.setActiveState(!1)}),f};const GetValue$j=Phaser.Utils.Objects.GetValue;var AddTab=function(s){var t=this.scene,n=GetValue$j(this.styles,"tab")||{};n.tweaker=this.styles,n.root=this.root;var f=CreateTab(t,s,n);delete n.tweaker,delete n.root,this.add(f,{expand:!0});for(var T=GetValue$j(s,"pages")||[],E=[],h=0,S=0,e=T.length;S<e;S++){var d=f.getPage(S),y=T[S].show;y&&(h=S);var c=T[S].key;c&&this.root.addChildrenMap(c,d),E.push(d)}return f.swapPage(h,0),E};const GetValue$i=Phaser.Utils.Objects.GetValue,BindingTargetMethods={setupBinding(){var s=this.childrenMap.inputField;return s.on("valuechange",function(t){this.autoUpdateEnable&&this.setTargetValue(t)},this),this},setAutoUpdateEnable(s){return s===void 0&&(s=!0),this.autoUpdateEnable=s,this},setBindingTarget(s,t){return this.bindingTarget=s,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue(),this},setBindingTargetKey(s){return this.bindTargetKey=s,this},setValueCallbacks(s){return this.onGetValue=GetValue$i(s,"onGetValue"),this.onSetValue=GetValue$i(s,"onSetValue"),this},getTargetValue(){if(this.bindingTarget){if(this.bindTargetKey!=null)return this.bindingTarget[this.bindTargetKey];if(this.onGetValue)return this.onGetValue(this.bindingTarget)}},setTargetValue(s){return this.bindingTarget?this.bindTargetKey!=null?(this.bindingTarget[this.bindTargetKey]=s,this):(this.onSetValue&&this.onSetValue(this.bindingTarget,s),this):this},syncTargetValue(){if(!this.bindingTarget)return this;var s=this.childrenMap.inputField;return s.syncValue&&s.syncValue(this.getTargetValue()),this}},MonitorTargetMethods={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var s=this.getTargetValue(),t=this.childrenMap.inputField;t.value!==s&&t.syncValue(s)}}},MinTitleWidthMethods={getMinTitleWidth(){var s=this.childrenMap.title;if(!s||s.orientation!==0)return 0;var t=s.rexSizer.padding,n=this.getChildWidth(this.childrenMap.title)+t.left+t.right;return n+this.getInnerPadding("left")},setMinTitleWidth(s){var t=this.childrenMap.title;if(!t||t.orientation!==0)return this;var n=t.rexSizer.padding;return s-=n.left+n.right,t.minWidth=s,this}},GetValue$h=Phaser.Utils.Objects.GetValue;class InputRow extends Sizer{constructor(t,n){super(t,n),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var f=n.inputTitle,T=n.inputField,E=n.background,d=GetValue$h(n,"proportion.title",0),h=GetValue$h(n,"space.title",0),S;this.orientation===0?S={right:h}:S={bottom:h},this.add(f,{proportion:d,expand:!0,padding:S});var e=T.defaultProportion;e===void 0&&(e=n.parentOrientation===1?1:0);var d=GetValue$h(n,"proportion.inputField",e);this.add(T,{proportion:d,expand:!0}),E&&this.addBackground(E),this.addChildrenMap("title",f),this.addChildrenMap("inputField",T),this.addChildrenMap("background",E),this.setupBinding()}destroy(t){!this.scene||this.ignoreDestroy||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var n=this.childrenMap.title;return n.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(InputRow.prototype,BindingTargetMethods,MonitorTargetMethods,MinTitleWidthMethods);var CreateTitleLabel=function(s,t,n){var f=new Title(s,n);return s.add.existing(f),f},GenerateInputFieldClass=function(s){s===void 0&&(s=Sizer);class t extends s{get bindingTarget(){return this.getParentSizer().bindingTarget}get bindingKey(){return this.getParentSizer().bindTargetKey}get value(){return this._value}validate(f){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(f,this._value,this.bindingTarget,this.bindingKey)}getFotmatText(f){return this.textFormatCallback?f=this.textFormatCallback(f):f=f.toString(),f}set value(f){if(this._value!==f&&(this.validate(f)||(f=this._value),this.displayValueCallback&&this.displayValueCallback(this,f),this._value!==f)){var T=this._value;this._value=f,this.syncValueFlag||this.emit("valuechange",f,T,this.bindingTarget,this.bindingKey)}}getValue(){return this.value}setValue(f){return this.value=f,this}syncValue(f){return this.syncValueFlag=!0,this.value=f,this.syncValueFlag=!1,this}setup(f,T){return T===void 0&&(T=!1),(T||f.hasOwnProperty("format"))&&this.setTextFormatCallback(f.format),(T||f.hasOwnProperty("onValidate"))&&this.setValidateCallback(f.onValidate),this.setupCallback&&this.setupCallback(this,f,T),this}setSetupCallback(f){return this.setupCallback=f,this}setDisplayValueCallback(f){return this.displayValueCallback=f,this}setTextFormatCallback(f){return this.textFormatCallback=f,this}setValidateCallback(f){return this.validateCallback=f,this}}return t},CreateInputField=function(s,t,n){for(var f,T=this.inputHandlers,E=0,h=T.length;E<h;E++){var S=T[E];if(S.accept(t)){var e=GenerateInputFieldClass(S.baseClass);f=new e(s),s.add.existing(f),f.setSetupCallback(S.setup).setDisplayValueCallback(S.displayValue),S.build(f,n);break}}return f&&f.setup(t,!0),f};const GetValue$g=Phaser.Utils.Objects.GetValue;var CreateInputRow=function(s,t,n){var f=CreateInputField.call(this,s,t,n);if(!f)return null;var T=GetValue$g(n,"title")||{},E=CreateTitleLabel(s,t,T),h=GetValue$g(n,"background")||{},S=CreateBackground$2(s,h),e=new InputRow(s,{...n,...t,inputTitle:E,inputField:f,background:S});return s.add.existing(e),e.setTitle(t),e.setValueCallbacks(t),e},AddInput=function(s,t,n){arguments.length===1?(n=s,s=n.bindingTarget,t=n.bindingKey):(n===void 0&&(n={}),n.bindingTarget=s,n.bindingKey=t),n.title||(n.title=t),n.bindingTarget&&n.bindingKey?n.value=n.bindingTarget[n.bindingKey]:n.value=void 0;var f=this.styles.inputRow||{};f.parentOrientation=this.styles.orientation;var T=CreateInputRow.call(this,this.scene,n,f);if(!T)return console.error(`[Tweaker] Can't add Input
    title: ${n.title}
    view: ${n.view}
`),this;var E=T.childrenMap.inputField,h;return this.orientation===1?h=0:(h=this.itemWidth>0?0:1,T.setMinWidth(this.itemWidth)),this.add(T,{proportion:h,expand:!0}),n.onValueChange&&E.on("valuechange",n.onValueChange),T.setAutoUpdateEnable(n.autoUpdate),T.setBindingTarget(s,t),n.monitor&&T.startMonitorTarget(),n.key&&this.root.addChildrenMap(n.key,T),this},CreateRoundRectangle=function(s,t){var n=new RoundRectangle$2(s,t);return s.add.existing(n),n};const GetValue$f=Phaser.Utils.Objects.GetValue;var CreateButtons$2=function(s,t){var n=GetValue$f(t,"wrap",!1),f=n?Buttons:Buttons$1,T=new f(s,t);return s.add.existing(T),T};const GetValue$e=Phaser.Utils.Objects.GetValue;var CreateButtons$1=function(s,t,n){for(var f=GetValue$e(n,"title")||{},T=CreateTitleLabel(s,t,f),E=t.buttons,h=GetValue$e(n,"button")||{},S=[],e=0,d=E.length;e<d;e++){var y=CreateLabel(s,h);S.push(y);var c=E[e];y.resetDisplayContent(c.label),y.callback=c.callback}var u=CreateButtons$2(s,{buttons:S,expand:!0,wrap:GetValue$e(t,"wrap",!1)});u.defaultProportion=1;var l=GetValue$e(n,"background")||{},r=CreateRoundRectangle(s,l),a=new InputRow(s,{...n,inputTitle:T,inputField:u,background:r});return s.add.existing(a),a.setTitle(t),u.on("button.click",function(v){v.callback(a.bindingTarget)}),a};const GetValue$d=Phaser.Utils.Objects.GetValue;var AddButtons=function(s){var t=this.scene;s===void 0&&(s={});var n=s.bindingTarget;delete s.bindingTarget;var f=GetValue$d(this.styles,"inputRow")||{},T=CreateButtons$1(t,s,f);return this.add(T,{expand:!0}),n&&T.setBindingTarget(n),s.key&&this.root.addChildrenMap(s.key,T),this},AddButton=function(s){return s===void 0&&(s={}),s.buttons=[{label:s.label,callback:s.callback}],delete s.label,delete s.callback,this.addButtons(s),this};const GetValue$c=Phaser.Utils.Objects.GetValue;var AddSeparator=function(s){var t=this.scene,n=GetValue$c(this.styles,"separator"),f=CreateBackground(t,s,n);return this.add(f,{expand:!0}),this},SetBindingTarget=function(s){for(var t=this.sizerChildren,n=0,f=t.length;n<f;n++){var T=t[n];T.setBindingTarget&&T.setBindingTarget(s)}return this},GetMaxInputRowTitleWidth=function(){for(var s=0,t=this.sizerChildren,n=0,f=t.length;n<f;n++){var T=t[n];T.rexSizer.hidden||(T.getMinTitleWidth?s=Math.max(s,T.getMinTitleWidth()):T.getMaxInputRowTitleWidth&&(s=Math.max(s,T.getMaxInputRowTitleWidth())))}return s+this.getInnerPadding("left")},SetInputRowTitleWidth=function(s){s-=this.getInnerPadding("left");for(var t=this.sizerChildren,n=0,f=t.length;n<f;n++){var T=t[n];T.rexSizer.hidden||(T.setMinTitleWidth?T.setMinTitleWidth(s):T.setInputRowTitleWidth&&T.setInputRowTitleWidth(s))}return this},methods$1={registerInputHandler:RegisterInputHandler,removeInputHandler:RemoveInputHandler,addFolder:AddFolder,addTab:AddTab,addInput:AddInput,addButtons:AddButtons,addButton:AddButton,addSeparator:AddSeparator,setBindingTarget:SetBindingTarget,getMaxInputRowTitleWidth:GetMaxInputRowTitleWidth,setInputRowTitleWidth:SetInputRowTitleWidth};const GetValue$b=Phaser.Utils.Objects.GetValue;class TweakerShell extends Sizer{constructor(t,n){if(n===void 0&&(n={}),n.orientation===void 0&&(n.orientation=1),super(t,n),this.type="rexTweakerShell",this.root=n.root||this,this.styles=GetValue$b(n,"styles")||{},this.styles.orientation=this.orientation,this.itemWidth=GetValue$b(this.styles,"itemWidth",0),this.root===this&&this.orientation===1){var f=GetValue$b(n,"inputRow.alignTitle");if(f===void 0){var T=GetValue$b(this.styles,"inputRow.proportion.title");f=!T}else f&&SetValue(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitle=f}else this.alignInputRowTitle=!1,this.inputHandlers=this.root.inputHandlers;var E=CreateBackground(t,void 0,n.background);E&&this.addBackground(E)}preLayout(){super.preLayout(),this.alignInputRowTitle&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}}Object.assign(TweakerShell.prototype,methods$1);var SetInputTextReadOnly$3=function(s,t){t===void 0&&(t=!0);var n=s.getElement("inputText");n.setReadOnly(t)};const TextInputHandler={name:"TextInput",accept(s){return s.hasOwnProperty("view")?s.view==="string":typeof s.value=="string"},build(s,t){var n=s.scene;s.type="rexTweaker.TextInput";var f=t.inputText,T=CreateInputText$1(n,f);s.add(T,{proportion:1,expand:!0,key:"inputText"}),T.on("close",function(){s.setValue(T.value)})},setup(s,t,n){(n||t.hasOwnProperty("inputTextReadOnly"))&&SetInputTextReadOnly$3(s,!!t.inputTextReadOnly)},displayValue(s,t){var n=s.getElement("inputText");n.setText(s.getFotmatText(t))}};var CreateInputTextArea=function(s,t,n){n===void 0&&(n=!0),n?t=t?DeepClone(t):{}:t||(t={});var f=new TextAreaInput(s,t);return s.add.existing(f),f},SetInputTextReadOnly$2=function(s,t){t===void 0&&(t=!0);var n=s.getElement("inputText");n.setReadOnly(t)};const TextAreaInputHandler={name:"TextAreaInput",accept(s){return s.hasOwnProperty("view")?s.view==="textarea":!1},build(s,t){var n=s.scene;this.type="rexTweaker.TextAreaInput";var f=t.inputTextArea;f===void 0&&(f={}),f.hasOwnProperty("text")||(f.text=t.inputText),f.hasOwnProperty("slider")||(f.slider=t.slider);var T=CreateInputTextArea(n,f);s.add(T,{proportion:1,expand:!0,key:"inputText"}),T.on("close",function(){s.setValue(T.value)})},setup(s,t,n){(n||t.hasOwnProperty("inputTextReadOnly"))&&SetInputTextReadOnly$2(s,!!t.inputTextReadOnly)},displayValue(s,t){var n=s.getElement("inputText");n.setText(s.getFotmatText(t))}};var SetInputTextReadOnly$1=function(s,t){t===void 0&&(t=!0);var n=s.getElement("inputText");n.setReadOnly(t)};const NumberInputHandler={name:"NumberInput",accept(s){return s.hasOwnProperty("view")?s.view==="number":typeof s.value=="number"},build(s,t){var n=s.scene;s.type="rexTweaker.NumberInput";var f=t.inputNumber||t.inputText,T=CreateInputText$1(n,f).setNumberInput();s.add(T,{proportion:1,expand:!0,key:"inputText"}),T.on("close",function(){s.setValue(T.value)})},setup(s,t,n){(n||t.hasOwnProperty("inputTextReadOnly"))&&SetInputTextReadOnly$1(s,!!t.inputTextReadOnly)},displayValue(s,t){var n=s.getElement("inputText");n.setText(s.getFotmatText(t))}};var CreateSlider=function(s,t){var n=new Slider(s,t);return s.add.existing(n),n};const GetValue$a=Phaser.Utils.Objects.GetValue,Linear$1=Phaser.Math.Linear,SnapFloor=Phaser.Math.Snap.Floor;var SetRange=function(s,t,n,f){s.minValue=t,s.maxValue=n,s.step=f;var T=s.getElement("slider");T.setGap(f,t,n)},SetInputTextReadOnly=function(s,t){t===void 0&&(t=!0);var n=s.getElement("inputText");n.setReadOnly(t)};const RangeInputHandler={name:"RangeInput",accept(s){return s.hasOwnProperty("view")?s.view==="range":typeof s.value=="number"&&s.hasOwnProperty("min")&&s.hasOwnProperty("max")},build(s,t){var n=s.scene;s.type="rexTweaker.RangeInput";var f=t.slider,T=s.orientation===0?"track.height":"track.width",E=GetValue$a(f,T),h=CreateSlider(n,f),y=t.parentOrientation===1?2:0,c=GetValue$a(t,"proportion.range.slider",y),S=E===void 0;s.add(h,{proportion:c,expand:S,key:"slider"});var e=t.inputNumber||t.inputText,d=CreateInputText$1(n,e).setNumberInput(),y=t.parentOrientation===1?1:0,c=GetValue$a(t,"proportion.range.inputText",y);s.add(d,{proportion:c,expand:!0,key:"inputText"}),d.on("close",function(){s.setValue(d.value)}),h.on("valuechange",function(){var u=Linear$1(s.minValue,s.maxValue,h.value);s.step&&(u=SnapFloor(u,s.step,s.minValue)),s.setValue(u)})},setup(s,t,n){(n||t.hasOwnProperty("max"))&&SetRange(s,t.min,t.max,t.step),(n||t.hasOwnProperty("inputTextReadOnly"))&&SetInputTextReadOnly(s,!!t.inputTextReadOnly)},displayValue(s,t){var n=s.getElement("slider");n.setValue(t,s.minValue,s.maxValue);var f=s.getElement("inputText");f.setText("").setText(s.getFotmatText(t))}};var CreateColorInput=function(s,t,n){n===void 0&&(n=!0),n?t=t?DeepClone(t):{}:t||(t={});var f=new ColorInput(s,t);return s.add.existing(f),f};const ColorInputHandler={name:"ColorInput",accept(s){return s.hasOwnProperty("view")?s.view==="color":!1},build(s,t){var n=s.scene;s.type="rexTweaker.ColorInput";var f=t.colorInput;f===void 0&&(f={}),f.hasOwnProperty("inputText")||(f.inputText=t.inputText);var T=CreateColorInput(n,f);s.add(T,{proportion:1,expand:!0,key:"colorInput"}),T.on("valuechange",function(E){s.setValue(E)})},displayValue(s,t){var n=s.getElement("colorInput");n.setValue(t)}};var CreateCheckbox=function(s,t){var n=new Checkbox(s,t);return s.add.existing(n),n};const CheckboxInputHandler={name:"CheckboxInput",accept(s){return s.hasOwnProperty("view")?s.view==="boolean":typeof s.value=="boolean"},build(s,t){var n=s.scene;s.type="rexTweaker.CheckboxInput";var f=t.checkbox,T=CreateCheckbox(n,f),E=f.size;E!==void 0&&T.setSize(E,E);var h=E!==void 0?0:1;s.add(T,{proportion:0,expand:!1,fitRatio:h,key:"checkbox"}),T.on("valuechange",function(S){s.setValue(S)})},displayValue(s,t){var n=s.getElement("checkbox");n.setValue(t)}};var CreateToggleSwitch=function(s,t){var n=new ToggleSwitch(s,t);return s.add.existing(n),n};const ToggleSwitchInputHandler={name:"ToggleSwitchInput",accept(s){return s.hasOwnProperty("view")?s.view==="toggleSwitch":!1},build(s,t){var n=s.scene;s.type="rexTweaker.ToggleSwitchInput";var f=t.toggleSwitch,T=CreateToggleSwitch(n,f),E=f.size;E!==void 0&&T.setSize(E,E);var h=E!==void 0?0:1;s.addSpace().add(T,{proportion:0,expand:!1,fitRatio:h,key:"toggleSwitch"}),T.on("valuechange",function(S){s.setValue(S)})},displayValue(s,t){var n=s.getElement("toggleSwitch");n.setValue(t)}};var CreateDropDownList=function(s,t){t=BuildListConfig(s,t);var n=new DropDownList(s,t);return s.add.existing(n),n},GetOptionIndex=function(s,t){for(var n=0,f=s.length;n<f;n++){var T=s[n];if(T.value===t)return n}},GetOption=function(s,t){var n=GetOptionIndex(s,t);if(n!=null)return s[n]},SetOptions$1=function(s,t){var n=s.getElement("list");n.setOptions(t)};const ListInputHandler={name:"ListInput",accept(s){return s.hasOwnProperty("view")?s.view==="list":s.hasOwnProperty("options")},build(s,t){var n=s.scene;s.type="rexTweaker.ListInput";var f=CreateDropDownList(n,t.list);s.add(f,{proportion:1,expand:!0,key:"list"}),f.on("button.click",function(T,E,h,S,e,d){s.setValue(h.value)})},setup(s,t,n){(n||t.hasOwnProperty("options"))&&SetOptions$1(s,t.options)},displayValue(s,t){var n=s.getElement("list"),f=GetOption(n.options,t);n.resetDisplayContent(f).setMinSize(n.width,n.height).layout().setMinSize(0,0)}};var CreateButtons=function(s,t){var n=new Buttons$1(s,t);return s.add.existing(n),n},SetButtonsActiveStateByIndex=function(s,t){for(var n=0,f=s.length;n<f;n++){var T=s[n];T&&T.setActiveState(n===t)}};const GetValue$9=Phaser.Utils.Objects.GetValue;var SetOptions=function(s,t){var n=s.getElement("list");n.options=t;var f=s.scene,T=n.buttonConfig;n.clearButtons(!0);for(var E=0,h=t.length;E<h;E++){var S=t[E],e=CreateLabel(f,T).setActiveState(!1).resetDisplayContent({text:S.text});n.addButton(e)}};const ButtonsInputHandler={name:"ButtonsInput",accept(s){return s.hasOwnProperty("view")?s.view==="buttons":!1},build(s,t){var n=s.scene;s.type="rexTweaker.ButtonsInput";var f=t.button?DeepClone(t.button):{},T=GetValue$9(f,"expand",!0);T&&(f.align="center"),delete f.expand;var E=CreateButtons(n,{expand:T});E.buttonConfig=f,s.add(E,{proportion:1,expand:!0,key:"list"}),E.on("button.click",function(h,S,e,d){var y=E.options[S];y&&(s._selectedIndex=S,s.setValue(y.value),s._selectedIndex=void 0)})},setup(s,t,n){(n||t.hasOwnProperty("options"))&&SetOptions(s,t.options)},displayValue(s,t){var n=s.getElement("list"),f=s._selectedIndex;f===void 0&&(f=GetOptionIndex(n.options,t)),SetButtonsActiveStateByIndex(n.getElement("buttons"),f)}};var RegisterDefaultInputHandlers=function(){this.registerInputHandler(TextInputHandler).registerInputHandler(TextAreaInputHandler).registerInputHandler(NumberInputHandler).registerInputHandler(RangeInputHandler).registerInputHandler(ColorInputHandler).registerInputHandler(CheckboxInputHandler).registerInputHandler(ToggleSwitchInputHandler).registerInputHandler(ListInputHandler).registerInputHandler(ButtonsInputHandler)};class Tweaker extends TweakerShell{constructor(t,n){n===void 0&&(n={}),n.styles===void 0&&(n.styles={}),n.background=n.styles.background||{},n.space=n.styles.space||{},super(t,n),this.type="rexTweaker",this.inputHandlers=[],RegisterDefaultInputHandlers.call(this)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.inputHandlers=void 0)}}ObjectFactory.register("tweaker",function(s){var t=new Tweaker(this.scene,s);return this.scene.add.existing(t),t});SetValue(window,"RexPlugins.UI.Tweaker",Tweaker);ObjectFactory.register("click",function(s,t){return new Button(s,t)});SetValue(window,"RexPlugins.UI.Click",Button);ObjectFactory.register("clickOutside",function(s,t){return new ClickOutside(s,t)});SetValue(window,"RexPlugins.UI.ClickOutside",ClickOutside);ObjectFactory.register("inTouching",function(s,t){return new InTouching(s,t)});SetValue(window,"RexPlugins.UI.InTouching",InTouching);ObjectFactory.register("tap",function(s,t){return IsGameObject(s)||(t=s,s=this.scene),new Tap(s,t)});SetValue(window,"RexPlugins.UI.Tap",Tap);ObjectFactory.register("press",function(s,t){return IsGameObject(s)||(t=s,s=this.scene),new Press(s,t)});SetValue(window,"RexPlugins.UI.Press",Press);ObjectFactory.register("swipe",function(s,t){return IsGameObject(s)||(t=s,s=this.scene),new Swipe(s,t)});SetValue(window,"RexPlugins.UI.Swipe",Swipe);ObjectFactory.register("pan",function(s,t){return IsGameObject(s)||(t=s,s=this.scene),new Pan(s,t)});SetValue(window,"RexPlugins.UI.Pan",Pan);ObjectFactory.register("drag",function(s,t){return new Drag(s,t)});SetValue(window,"RexPlugins.UI.Drag",Drag);ObjectFactory.register("pinch",function(s){return new Pinch(this.scene,s)});SetValue(window,"RexPlugins.UI.Pinch",Pinch);ObjectFactory.register("rotate",function(s){return new Rotate(this.scene,s)});SetValue(window,"RexPlugins.UI.Rotate",Rotate);const IsPlainObject$3=Phaser.Utils.Objects.IsPlainObject,GetValue$8=Phaser.Utils.Objects.GetValue;var GetFrameUpdatingCallback=function(s,t,n){var f;if(s===void 0)s=n.texture.key,t=n.frame.name;else if(IsPlainObject$3(s)){var T=s;s=GetValue$8(T,"key",n.texture.key),t=GetValue$8(T,"frame",n.frame.name)}else typeof s=="string"||(f=s);return f===void 0&&(f=function(E){E.setTexture(s,t)}),f};const GetValue$7=Phaser.Utils.Objects.GetValue,GetAdvancedValue=Phaser.Utils.Objects.GetAdvancedValue,Linear=Phaser.Math.Linear;class Flip extends EaseValueTaskBase{constructor(t,n){super(t,n),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(GetAdvancedValue(t,"duration",500)),this.setEase(GetValue$7(t,"ease","Sine")),this.setOrientation(GetValue$7(t,"orientation",0)),this.setFrontFace(GetValue$7(t,"front",void 0)),this.setBackFace(GetValue$7(t,"back",void 0)),this.setFace(GetValue$7(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=ORIENTATIONMODE[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=FACEMODE[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,n){return this.frontFaceCallback=GetFrameUpdatingCallback(t,n,this.parent),this}setBackFace(t,n){return this.backFaceCallback=GetFrameUpdatingCallback(t,n,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateGameObject(t,n){n.justRestart&&this.toggleFace();var f=n.t;n.isOddIteration&&(f=1-f),f=this.easeFn(f);var T=Linear(this.scale0,0,f);this.orientation===0?t.scaleX=T:t.scaleY=T}}const ORIENTATIONMODE={x:0,horizontal:0,y:1,vertical:1},FACEMODE={front:0,back:1};ObjectFactory.register("flip",function(s,t){return new Flip(s,t)});SetValue(window,"RexPlugins.UI.Flip",Flip);ObjectFactory.register("shake",function(s,t){return new ShakePosition(s,t)});SetValue(window,"RexPlugins.UI.Shake",ShakePosition);ObjectFactory.register("touchEventStop",function(s,t){return new TouchEventStop(s,t)});SetValue(window,"RexPlugins.UI.TouchEventStop",TouchEventStop);ObjectFactory.register("perspective",function(s,t){return new ContainerPerspective(s,t)});SetValue(window,"RexPlugins.UI.Perspective",ContainerPerspective);const RotateAround=Phaser.Math.RotateAround;var LocalXYToWorldXY=function(s,t,n){var f=s.width/2,T=s.height/2;return out.x=t-f,out.y=n-T,RotateAround(out,0,0,s.rotation),out.x*=s.scaleX,out.y*=s.scaleY,out.x+=s.x,out.y+=s.y,out},WorldXYToLocalXY=function(s,t,n){var f=s.width/2,T=s.height/2;return out.x=t-s.x,out.y=n-s.y,out.x/=s.scaleX,out.y/=s.scaleY,RotateAround(out,0,0,-s.rotation),out.x+=f,out.y+=T,out},out={x:0,y:0};class ControlPoint{constructor(t,n){this.parent=t,this.vertex=n,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,n){var f=this.parent,T=f.height,E=f.frame.cutWidth/T/2,h=f.frame.cutHeight/T/2,S=t/T-E,e=n/T-h,d=this.vertex;return d.x=S,d.y=-e,f.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,n){return this._localXOrigin=t,this._localYOrigin=n,this._localX=t,this._localY=n,this}setLocalXY(t,n,f){return this._localX===t&&this._localY===n?this:(this._localX=t,this._localY=n,f||this.updateVertexPosition(t,n),this)}setWorldXY(t,n){if(this._worldX===t&&this._worldY===n)return this;var f=WorldXYToLocalXY(this.parent,t,n);return this.setLocalXY(f.x,f.y),this}setPosition(t,n){return this.setWorldXY(t,n),this}getWorldXY(){return LocalXYToWorldXY(this.parent,this._localX,this._localY)}get x(){var t=LocalXYToWorldXY(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=LocalXYToWorldXY(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const Vertex=Phaser.Geom.Mesh.Vertex,Face=Phaser.Geom.Mesh.Face;var InitFaces=function(s){for(var t=s.isNinePointMode,n=t?9:4,f=s.vertices,T=s.faces,E=s.controlPoints,h=0;h<n;h++){var S=new Vertex;f.push(S),E.push(new ControlPoint(s,S))}var e;t?e=NinePointsIndices:s.fourPointsModeRTL?e=FourPointsIndicesRTL:e=FourPointsIndices;for(var h=0,d=e.length;h<d;h+=3){var y=f[e[h+0]],c=f[e[h+1]],u=f[e[h+2]];T.push(new Face(y,c,u))}t?(s.topLeft=E[0],s.topCenter=E[1],s.topRight=E[2],s.centerLeft=E[3],s.center=E[4],s.centerRight=E[5],s.bottomLeft=E[6],s.bottomCenter=E[7],s.bottomRight=E[8]):(s.topLeft=E[0],s.topRight=E[1],s.bottomLeft=E[2],s.bottomRight=E[3])};const FourPointsIndices=[0,2,3,0,3,1],FourPointsIndicesRTL=[1,3,2,1,2,0],NinePointsIndices=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var GetPointPosition=function(s){var t,n=0,f=s.height,T=0,E=s.width;if(s.isNinePointMode){var h=(T+E)/2,S=(n+f)/2;t=[T,n,h,n,E,n,T,S,h,S,E,S,T,f,h,f,E,f]}else t=[T,n,E,n,T,f,E,f];return t};const IsPlainObject$2=Phaser.Utils.Objects.IsPlainObject,GetValue$6=Phaser.Utils.Objects.GetValue;let Image$1=class extends MeshBase{constructor(t,n,f,T,E,h){IsPlainObject$2(n)&&(h=n,n=GetValue$6(h,"x",0),f=GetValue$6(h,"y",0),T=GetValue$6(h,"key",null),E=GetValue$6(h,"frame",null)),super(t,n,f,T,E),this.type="rexQuadImage",this.isNinePointMode=GetValue$6(h,"ninePointMode",!1),this.fourPointsModeRTL=GetValue$6(h,"rtl",!1),this.controlPoints=[],InitFaces(this),this.hideCCW=!1,this.syncSize()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){super.destroy(t);for(var n=0,f=this.controlPoints.length;n<f;n++)this.controlPoints[n].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var t=GetPointPosition(this),n=this.width,f=this.height,T=this.frame.cutWidth/f/2,E=this.frame.cutHeight/f/2,h=this.frame.u0,S=this.frame.u1,e=this.frame.v0,d=this.frame.v1,y=S-h,c=d-e,u=this.controlPoints,l=0,r=t.length;l<r;l+=2){var a=t[l+0],v=t[l+1],o=l/2,p=a/f-T,m=v/f-E,g=h+y*(a/n),x=e+c*(v/f);this.vertices[o].set(p,-m,0).setUVs(g,x),u[o].resetLocalXY(a,v)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}};Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var Skew=function(s,t,n){t===void 0&&(t=0),n===void 0&&(n=0);for(var f=s.width,T=s.height,E=f*.5,h=T*.5,S=Math.tan(t)*h,e=Math.tan(n)*E,d=s.controlPoints,y=0,c=d.length;y<c;y++){var u=d[y],l=u.localXOrigin,r=u.localYOrigin;u.localX=l+(r>h?S:-S),u.localY=r+(l>E?e:-e)}};const IsPlainObject$1=Phaser.Utils.Objects.IsPlainObject,GetValue$5=Phaser.Utils.Objects.GetValue,DegToRad=Phaser.Math.DegToRad,RadToDeg=Phaser.Math.RadToDeg;class SkewImage extends Image$1{constructor(t,n,f,T,E){if(IsPlainObject$1(n)){var h=n;n=GetValue$5(h,"x",0),f=GetValue$5(h,"y",0),T=GetValue$5(h,"key",null),E=GetValue$5(h,"frame",null)}super(t,n,f,T,E),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,Skew(this,this._skewX,this._skewY)}get skewXDeg(){return RadToDeg(this._skewX)}set skewXDeg(t){this.skewX=DegToRad(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,Skew(this,this._skewX,this._skewY)}get skewYDeg(){return RadToDeg(this._skewY)}set skewYDeg(t){this.skewY=DegToRad(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,n){return n===void 0&&(n=t),this.skewX=t,this.skewY=n,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,n){return n===void 0&&(n=t),this.skewXDeg=t,this.skewYDeg=n,this}}const IsPlainObject=Phaser.Utils.Objects.IsPlainObject,GetValue$4=Phaser.Utils.Objects.GetValue;class SkewRenderTexture extends SkewImage{constructor(t,n,f,T,E){if(IsPlainObject(n)){var h=n;n=GetValue$4(h,"x",0),f=GetValue$4(h,"y",0),T=GetValue$4(h,"width",32),E=GetValue$4(h,"height",32)}var S=CreateDynamicTexture(t,T,E);super(t,n,f,S,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}}class ContainerSkew extends MeshRenderTextureBase(SkewRenderTexture){get skewState(){return this.isRunning}}ObjectFactory.register("skew",function(s,t){return new ContainerSkew(s,t)});SetValue(window,"RexPlugins.UI.Skew",ContainerSkew);ObjectFactory.register("anchor",function(s,t){return new Anchor(s,t)});SetValue(window,"RexPlugins.UI.Anchor",Anchor);ObjectFactory.register("textTyping",function(s,t){return new TextTyping(s,t)});SetValue(window,"RexPlugins.UI.TextTyping",TextTyping);ObjectFactory.register("textPage",function(s,t){return new TextPage(s,t)});SetValue(window,"RexPlugins.UI.TextPage",TextPage);var LastOpenedEditor=void 0,SetLastOpenedEditor=function(s){s!==LastOpenedEditor&&(LastOpenedEditor!==void 0&&LastOpenedEditor.close(),LastOpenedEditor=s)},CloseLastOpenEditor=function(s){s===LastOpenedEditor&&(LastOpenedEditor=void 0)};const GetValue$3=Phaser.Utils.Objects.GetValue,Clone=Phaser.Utils.Objects.Clone;var CreateInputText=function(s,t){t===void 0&&(t={}),t=Clone(t);var n=s.scene,f=s.style,T=GetValue$3(t,"backgroundColor",f.backgroundColor);T===null&&(T="transparent"),t.text=GetValue$3(t,"text",s.text),t.fontFamily=GetValue$3(t,"fontFamily",f.fontFamily),t.fontSize=GetValue$3(t,"fontSize",f.fontSize),t.color=GetValue$3(t,"color",f.color),t.backgroundColor=T,t.direction=GetValue$3(t,"rtl",f.rtl)?"rtl":"ltr",t.align=GetValue$3(t,"align",GetHAlign(f)),t.direction==="rtl"&&IsTextGameObject(s)&&(t.align="right");var E=new InputText(n,s.x,s.y,GetValue$3(t,"width",s.width),GetValue$3(t,"height",s.height),t);E.setOrigin(s.originX,s.originY).setScrollFactor(s.scrollFactorX,s.scrollFactorY);var h=s.parentContainer;return h?h.add(E):n.add.existing(E),E},GetHAlign=function(s){return s.hasOwnProperty("align")?s.align:s.hasOwnProperty("halign")?s.halign:"left"},NextTick=function(s,t,n){return s.time.delayedCall(0,t,[],n)};const GetValue$2=Phaser.Utils.Objects.GetValue,Merge=Phaser.Utils.Objects.Merge;var Open=function(s,t){s===void 0&&(s={}),s=Merge(s,this.openConfig),SetLastOpenedEditor(this),IsFunction(s)&&(t=s,s=void 0);var n=GetValue$2(s,"inputType",void 0);n===void 0&&(n=GetValue$2(s,"type","text")),t===void 0&&(t=GetValue$2(s,"onClose",void 0));var f=GetValue$2(s,"onOpen",void 0),T=GetValue$2(s,"onTextChanged",void 0);return this.inputText=CreateInputText(this.parent,s).on("textchange",function(E){var h=E.text;T?T(this.parent,h):this.parent.text=h},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,GetValue$2(s,"enterClose",n!=="textarea")&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=NextTick(this.scene,function(){this.scene.input.once("pointerdown",this.close,this),f&&f(this.parent),this.emit("open",this.parent)},this),this},Close=function(){return CloseLastOpenEditor(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},Methods={open:Open,close:Close};const GetValue$1=Phaser.Utils.Objects.GetValue;class TextEdit extends ComponentBase{constructor(t,n){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(n);var f=GetValue$1(n,"clickEnable",!0);f&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(TextEdit.prototype,Methods);var Edit=function(s,t,n){return s._edit||(s._edit=new TextEdit(s,{clickEnable:!1})),s._edit.open(t,n),s._edit};ObjectFactory.register("textEdit",function(s,t){return new TextEdit(s,t)});SetValue(window,"RexPlugins.UI.TextEdit",TextEdit);const MaxTestCount=65535;var FontSizeFit=function(s,t,n){if(t==null)return s;if(t===0)return SetTextWidth(s,0,n),s;var f=s.text.length;if(f===0)return SetTextWidth(s,t,n),s;var T=Math.floor(t*1.5/f);n!==void 0&&T>n&&(T=Math.floor(n));for(var E={},h=TestFontSize(s,T,t,n,E),S=0;S<=MaxTestCount&&h!==0;S++){if(T+=h,T<0){T=0;break}h=TestFontSize(s,T,t,n,E)}return S===MaxTestCount&&console.warn(`FontSizeFit: Test count exceeds ${MaxTestCount}`),s.setFontSize(T),SetTextWidth(s,t,n),s},GetTextSize=function(s,t,n){return n[t]===void 0&&(s.setFontSize(t),n[t]={width:s.width,height:s.height}),n[t]},TestFontSize=function(s,t,n,f,T){var E=GetTextSize(s,t,T),h=GetTextSize(s,t+1,T),S;if(f!==void 0)if(E.height<=f&&h.height>f)S=0;else{if(E.height>f)return-1;S=Math.floor(f-E.height)}var e;if(E.width<=n&&h.width>n)return 0;if(E.width>n)return-1;var e=Math.floor(n-E.width);return S===void 0?e:Math.min(e,S)},SetTextWidth=function(s,t,n){var f=s.style;f&&(f.fixedWidth=t,f.parent.width=t,n!==void 0&&(f.fixedHeight=n,f.parent.height=n),f.update(!1))};const GetValue=Phaser.Utils.Objects.GetValue;var FontSizeExpandText=function(s,t){typeof t=="number"&&(t={minWidth:t});var n=GetValue(t,"minWidth",0),f=GetValue(t,"minHeight",0),T=GetValue(t,"fitHeight",!1);return s._minWidth=n,s._minHeight=f,T?(s.runWidthWrap=function(E){return s.setFixedSize&&s.setFixedSize(0,0),s.setFontSize(1),s},s.resize=function(E,h){return FontSizeFit(s,E,h),s}):(s.runWidthWrap=function(E){return s.setFixedSize&&s.setFixedSize(0,0),FontSizeFit(s,E,void 0),s},s.resize=function(E,h){return s.width===E&&s.height===h||s.setFixedSize(E,h),s}),s};class UIPlugin extends Phaser.Plugins.ScenePlugin{constructor(t,n){super(t,n),this.add=new ObjectFactory(t)}start(){var t=this.scene.events;t.on("destroy",this.destroy,this)}isInTouching(t,n,f,T){return t.visible?IsPointerInBounds(t,n,f,T):!1}get viewport(){return GetViewport(this.scene,this.scene.cameras.main,!0)}}var methods={getParentSizer:GetParent$1,getTopmostSizer:GetTopmostParent$1,hide:Hide,show:Show,isShown:IsShown,edit:Edit,wrapExpandText:WrapExpandText,fontSizeExpandText:FontSizeExpandText,fontSizeResize:FontSizeFit,setFontSizeToFitWidth:FontSizeFit,waitEvent:WaitEvent,waitComplete:WaitComplete,delayPromise:Delay,setChildrenInteractive:SetChildrenInteractive,fadeIn:FadeIn,fadeOutDestroy:FadeOutDestroy,easeMoveTo:EaseMoveTo,easeMoveFrom:EaseMoveFrom,modal:Modal$1,modalPromise:ModalPromise,modalClose:ModalClose,requestDrag:RequestDrag,openFileChooser:Open$1};Object.assign(UIPlugin.prototype,methods);class AlignGrid{constructor(){}create(t){if(this.config=t,!t.scene){console.log("missing scene");return}t.rows||(t.rows=5),t.cols||(t.cols=5),t.height||(t.height=game.config.height),t.width||(t.width=game.config.width),this.scene=t.scene,this.cw=t.width/t.cols,this.ch=t.height/t.rows}show(){this.graphics=this.scene.add.graphics().setDepth(250),this.graphics.lineStyle(2,16711680);for(var t=0;t<this.config.width;t+=this.cw)this.graphics.moveTo(t,0),this.graphics.lineTo(t,this.config.height);for(t=0;t<this.config.height;t+=this.ch)this.graphics.moveTo(0,t),this.graphics.lineTo(this.config.width,t);this.graphics.strokePath()}placeAt(t,n,f){var T=this.cw*t+this.cw/2,E=this.ch*n+this.ch/2;f.x=T,f.y=E}placeAtIndex(t,n){var f=Math.floor(t/this.config.cols),T=t-f*this.config.cols;return this.placeAt(T,f,n),this}showNumbers(){this.show();for(var t=0,n=0;n<this.config.rows;n++)for(var f=0;f<this.config.cols;f++){var T=this.scene.add.text(0,0,t,{color:"#ff0000"}).setDepth(250);T.setOrigin(.5,.5),this.placeAtIndex(t,T),t++}}scaleToGameW(t,n){t.displayWidth=game.config.width*n,t.scaleY=t.scaleX}centerH(t){t.x=game.config.width/2-t.displayWidth/2}centerV(t){t.y=game.config.height/2-t.displayHeight/2}center2(t){t.x=game.config.width/2-t.displayWidth/2,t.y=game.config.height/2-t.displayHeight/2}center(t){return t.x&&t.y?(t.x=game.config.width/2,t.y=game.config.height/2):t.setX&&t.setY&&(t.setX(game.config.width/2),t.setY(game.config.height/2)),this}}const alignGrid=new AlignGrid;class Controls extends Phaser$1.Cameras.Controls.FixedKeyControl{constructor(n,f,T){super({camera:f,left:n.left,right:n.right,up:n.up,down:n.down,speed:.5});ht(this,"ctrl");ht(this,"shift");this.shift=T.input.keyboard.addKey(Phaser$1.Input.Keyboard.KeyCodes.SHIFT),this.ctrl=T.input.keyboard.addKey(Phaser$1.Input.Keyboard.KeyCodes.CTRL)}justDown(n){return Phaser$1.Input.Keyboard.JustDown(n)}}const eventEmitter=new Phaser$1.Events.EventEmitter;var HudContext=(s=>(s[s.inventory=0]="inventory",s[s.shopInventory=1]="shopInventory",s[s.playerShopInventory=2]="playerShopInventory",s[s.playerInPlay=3]="playerInPlay",s[s.shopInPlay=4]="shopInPlay",s[s.insignia=5]="insignia",s))(HudContext||{});const keys={ui:{inventoryTable:"inventoryTable",inventoryGrid:"inventoryGrid"},itemSlots:{CLICKED:s=>`${s}_slot_clicked`,CTRL_CLICK:s=>`${s}_ctrl_slot_clicked`,M_CLICK:s=>`${s}_m_slot_clicked`},items:{MOVED:s=>`${s}_itemMoved`,ADDED:s=>`${s}_itemAdded`,DROPPED:s=>`${s}_itemDropped`,REMOVED:s=>`${s}_itemRemoved`,QTY_CHANGED:s=>`${s}.quantity.changed`},inventory:{MOVED:`${HudContext.inventory}_itemMoved`,ADDED:`${HudContext.inventory}_itemAdded`,DROPPED:`${HudContext.inventory}_itemDropped`,REMOVED:`${HudContext.inventory}_itemRemoved`},splitStack:{CLICKED:"split_stack_clicked"},menu:{CLICKED:s=>`menu.${s}.clicked`,button:{CLICKED:"menu.button.clicked"}}};function queryKey(s){for(var t=[],n=0;n<s.length;n++){var f=s[n];if(!componentRegistered(f))throw new Error("Tried to create a query with an unregistered component");if(typeof f=="object"){var T=f.operator==="not"?"!":f.operator;t.push(T+f.Component._typeId)}else t.push(f._typeId)}return t.sort().join("-")}const hasWindow=typeof window<"u",now=hasWindow&&typeof window.performance<"u"?performance.now.bind(performance):Date.now.bind(Date);function componentRegistered(s){return typeof s=="object"&&s.Component._typeId!==void 0||s.isComponent&&s._typeId!==void 0}class SystemManager{constructor(t){this._systems=[],this._executeSystems=[],this.world=t,this.lastExecutedSystem=null}registerSystem(t,n){if(!t.isSystem)throw new Error(`System '${t.name}' does not extend 'System' class`);if(this.getSystem(t)!==void 0)return console.warn(`System '${t.getName()}' already registered.`),this;var f=new t(this.world,n);return f.init&&f.init(n),f.order=this._systems.length,this._systems.push(f),f.execute&&(this._executeSystems.push(f),this.sortSystems()),this}unregisterSystem(t){let n=this.getSystem(t);return n===void 0?(console.warn(`Can unregister system '${t.getName()}'. It doesn't exist.`),this):(this._systems.splice(this._systems.indexOf(n),1),n.execute&&this._executeSystems.splice(this._executeSystems.indexOf(n),1),this)}sortSystems(){this._executeSystems.sort((t,n)=>t.priority-n.priority||t.order-n.order)}getSystem(t){return this._systems.find(n=>n instanceof t)}getSystems(){return this._systems}removeSystem(t){var n=this._systems.indexOf(t);~n&&this._systems.splice(n,1)}executeSystem(t,n,f){if(t.initialized&&t.canExecute()){let T=now();t.execute(n,f),t.executeTime=now()-T,this.lastExecutedSystem=t,t.clearEvents()}}stop(){this._executeSystems.forEach(t=>t.stop())}execute(t,n,f){this._executeSystems.forEach(T=>(f||T.enabled)&&this.executeSystem(T,t,n))}stats(){for(var t={numSystems:this._systems.length,systems:{}},n=0;n<this._systems.length;n++){var f=this._systems[n],T=t.systems[f.getName()]={queries:{},executeTime:f.executeTime};for(var E in f.ctx)T.queries[E]=f.ctx[E].stats()}return t}}class ObjectPool{constructor(t,n){this.freeList=[],this.count=0,this.T=t,this.isObjectPool=!0,typeof n<"u"&&this.expand(n)}acquire(){this.freeList.length<=0&&this.expand(Math.round(this.count*.2)+1);var t=this.freeList.pop();return t}release(t){t.reset(),this.freeList.push(t)}expand(t){for(var n=0;n<t;n++){var f=new this.T;f._pool=this,this.freeList.push(f)}this.count+=t}totalSize(){return this.count}totalFree(){return this.freeList.length}totalUsed(){return this.count-this.freeList.length}}class EventDispatcher{constructor(){this._listeners={},this.stats={fired:0,handled:0}}addEventListener(t,n){let f=this._listeners;f[t]===void 0&&(f[t]=[]),f[t].indexOf(n)===-1&&f[t].push(n)}hasEventListener(t,n){return this._listeners[t]!==void 0&&this._listeners[t].indexOf(n)!==-1}removeEventListener(t,n){var f=this._listeners[t];if(f!==void 0){var T=f.indexOf(n);T!==-1&&f.splice(T,1)}}dispatchEvent(t,n,f){this.stats.fired++;var T=this._listeners[t];if(T!==void 0)for(var E=T.slice(0),h=0;h<E.length;h++)E[h].call(this,n,f)}resetCounters(){this.stats.fired=this.stats.handled=0}}class Query{constructor(t,n){if(this.Components=[],this.NotComponents=[],t.forEach(E=>{typeof E=="object"?this.NotComponents.push(E.Component):this.Components.push(E)}),this.Components.length===0)throw new Error("Can't create a query without components");this.entities=[],this.eventDispatcher=new EventDispatcher,this.reactive=!1,this.key=queryKey(t);for(var f=0;f<n._entities.length;f++){var T=n._entities[f];this.match(T)&&(T.queries.push(this),this.entities.push(T))}}addEntity(t){t.queries.push(this),this.entities.push(t),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_ADDED,t)}removeEntity(t){let n=this.entities.indexOf(t);~n&&(this.entities.splice(n,1),n=t.queries.indexOf(this),t.queries.splice(n,1),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_REMOVED,t))}match(t){return t.hasAllComponents(this.Components)&&!t.hasAnyComponents(this.NotComponents)}toJSON(){return{key:this.key,reactive:this.reactive,components:{included:this.Components.map(t=>t.name),not:this.NotComponents.map(t=>t.name)},numEntities:this.entities.length}}stats(){return{numComponents:this.Components.length,numEntities:this.entities.length}}}Query.prototype.ENTITY_ADDED="Query#ENTITY_ADDED";Query.prototype.ENTITY_REMOVED="Query#ENTITY_REMOVED";Query.prototype.COMPONENT_CHANGED="Query#COMPONENT_CHANGED";class QueryManager{constructor(t){this._world=t,this._queries={}}onEntityRemoved(t){for(var n in this._queries){var f=this._queries[n];t.queries.indexOf(f)!==-1&&f.removeEntity(t)}}onEntityComponentAdded(t,n){for(var f in this._queries){var T=this._queries[f];if(~T.NotComponents.indexOf(n)&&~T.entities.indexOf(t)){T.removeEntity(t);continue}!~T.Components.indexOf(n)||!T.match(t)||~T.entities.indexOf(t)||T.addEntity(t)}}onEntityComponentRemoved(t,n){for(var f in this._queries){var T=this._queries[f];if(~T.NotComponents.indexOf(n)&&!~T.entities.indexOf(t)&&T.match(t)){T.addEntity(t);continue}if(~T.Components.indexOf(n)&&~T.entities.indexOf(t)&&!T.match(t)){T.removeEntity(t);continue}}}getQuery(t){var n=queryKey(t),f=this._queries[n];return f||(this._queries[n]=f=new Query(t,this._world)),f}stats(){var t={};for(var n in this._queries)t[n]=this._queries[n].stats();return t}}class Component{constructor(t){if(t!==!1){const n=this.constructor.schema;for(const f in n)if(t&&t.hasOwnProperty(f))this[f]=t[f];else{const T=n[f];if(T.hasOwnProperty("default"))this[f]=T.type.clone(T.default);else{const E=T.type;this[f]=E.clone(E.default)}}}this._pool=null}copy(t){const n=this.constructor.schema;for(const f in n){const T=n[f];t.hasOwnProperty(f)&&(this[f]=T.type.copy(t[f],this[f]))}return this}clone(){return new this.constructor().copy(this)}reset(){const t=this.constructor.schema;for(const n in t){const f=t[n];if(f.hasOwnProperty("default"))this[n]=f.type.copy(f.default,this[n]);else{const T=f.type;this[n]=T.copy(T.default,this[n])}}}dispose(){this._pool&&this._pool.release(this)}getName(){return this.constructor.getName()}checkUndefinedAttributes(t){const n=this.constructor.schema;Object.keys(t).forEach(f=>{n.hasOwnProperty(f)||console.warn(`Trying to set attribute '${f}' not defined in the '${this.constructor.name}' schema. Please fix the schema, the attribute value won't be set`)})}}Component.schema={};Component.isComponent=!0;Component.getName=function(){return this.displayName||this.name};class SystemStateComponent extends Component{}SystemStateComponent.isSystemStateComponent=!0;class EntityPool extends ObjectPool{constructor(t,n,f){super(n,void 0),this.entityManager=t,typeof f<"u"&&this.expand(f)}expand(t){for(var n=0;n<t;n++){var f=new this.T(this.entityManager);f._pool=this,this.freeList.push(f)}this.count+=t}}class EntityManager{constructor(t){this.world=t,this.componentsManager=t.componentsManager,this._entities=[],this._nextEntityId=0,this._entitiesByNames={},this._queryManager=new QueryManager(this),this.eventDispatcher=new EventDispatcher,this._entityPool=new EntityPool(this,this.world.options.entityClass,this.world.options.entityPoolSize),this.entitiesWithComponentsToRemove=[],this.entitiesToRemove=[],this.deferredRemovalEnabled=!0}getEntityByName(t){return this._entitiesByNames[t]}createEntity(t){var n=this._entityPool.acquire();return n.alive=!0,n.name=t||"",t&&(this._entitiesByNames[t]?console.warn(`Entity name '${t}' already exist`):this._entitiesByNames[t]=n),this._entities.push(n),this.eventDispatcher.dispatchEvent(ENTITY_CREATED,n),n}entityAddComponent(t,n,f){if(typeof n._typeId>"u"&&!this.world.componentsManager._ComponentsMap[n._typeId])throw new Error(`Attempted to add unregistered component "${n.getName()}"`);if(!~t._ComponentTypes.indexOf(n)){t._ComponentTypes.push(n),n.__proto__===SystemStateComponent&&t.numStateComponents++;var T=this.world.componentsManager.getComponentsPool(n),E=T?T.acquire():new n(f);T&&f&&E.copy(f),t._components[n._typeId]=E,this._queryManager.onEntityComponentAdded(t,n),this.world.componentsManager.componentAddedToEntity(n),this.eventDispatcher.dispatchEvent(COMPONENT_ADDED,t,n)}}entityRemoveComponent(t,n,f){var T=t._ComponentTypes.indexOf(n);~T&&(this.eventDispatcher.dispatchEvent(COMPONENT_REMOVE,t,n),f?this._entityRemoveComponentSync(t,n,T):(t._ComponentTypesToRemove.length===0&&this.entitiesWithComponentsToRemove.push(t),t._ComponentTypes.splice(T,1),t._ComponentTypesToRemove.push(n),t._componentsToRemove[n._typeId]=t._components[n._typeId],delete t._components[n._typeId]),this._queryManager.onEntityComponentRemoved(t,n),n.__proto__===SystemStateComponent&&(t.numStateComponents--,t.numStateComponents===0&&!t.alive&&t.remove()))}_entityRemoveComponentSync(t,n,f){t._ComponentTypes.splice(f,1);var T=t._components[n._typeId];delete t._components[n._typeId],T.dispose(),this.world.componentsManager.componentRemovedFromEntity(n)}entityRemoveAllComponents(t,n){let f=t._ComponentTypes;for(let T=f.length-1;T>=0;T--)f[T].__proto__!==SystemStateComponent&&this.entityRemoveComponent(t,f[T],n)}removeEntity(t,n){var f=this._entities.indexOf(t);if(!~f)throw new Error("Tried to remove entity not in list");t.alive=!1,this.entityRemoveAllComponents(t,n),t.numStateComponents===0&&(this.eventDispatcher.dispatchEvent(ENTITY_REMOVED,t),this._queryManager.onEntityRemoved(t),n===!0?this._releaseEntity(t,f):this.entitiesToRemove.push(t))}_releaseEntity(t,n){this._entities.splice(n,1),this._entitiesByNames[t.name]&&delete this._entitiesByNames[t.name],t._pool.release(t)}removeAllEntities(){for(var t=this._entities.length-1;t>=0;t--)this.removeEntity(this._entities[t])}processDeferredRemoval(){if(this.deferredRemovalEnabled){for(let n=0;n<this.entitiesToRemove.length;n++){let f=this.entitiesToRemove[n],T=this._entities.indexOf(f);this._releaseEntity(f,T)}this.entitiesToRemove.length=0;for(let n=0;n<this.entitiesWithComponentsToRemove.length;n++){let f=this.entitiesWithComponentsToRemove[n];for(;f._ComponentTypesToRemove.length>0;){let T=f._ComponentTypesToRemove.pop();var t=f._componentsToRemove[T._typeId];delete f._componentsToRemove[T._typeId],t.dispose(),this.world.componentsManager.componentRemovedFromEntity(T)}}this.entitiesWithComponentsToRemove.length=0}}queryComponents(t){return this._queryManager.getQuery(t)}count(){return this._entities.length}stats(){var t={numEntities:this._entities.length,numQueries:Object.keys(this._queryManager._queries).length,queries:this._queryManager.stats(),numComponentPool:Object.keys(this.componentsManager._componentPool).length,componentPool:{},eventDispatcher:this.eventDispatcher.stats};for(var n in this.componentsManager._componentPool){var f=this.componentsManager._componentPool[n];t.componentPool[f.T.getName()]={used:f.totalUsed(),size:f.count}}return t}}const ENTITY_CREATED="EntityManager#ENTITY_CREATE",ENTITY_REMOVED="EntityManager#ENTITY_REMOVED",COMPONENT_ADDED="EntityManager#COMPONENT_ADDED",COMPONENT_REMOVE="EntityManager#COMPONENT_REMOVE";class ComponentManager{constructor(){this.Components=[],this._ComponentsMap={},this._componentPool={},this.numComponents={},this.nextComponentId=0}hasComponent(t){return this.Components.indexOf(t)!==-1}registerComponent(t,n){if(this.Components.indexOf(t)!==-1){console.warn(`Component type: '${t.getName()}' already registered.`);return}const f=t.schema;if(!f)throw new Error(`Component "${t.getName()}" has no schema property.`);for(const T in f)if(!f[T].type)throw new Error(`Invalid schema for component "${t.getName()}". Missing type for "${T}" property.`);t._typeId=this.nextComponentId++,this.Components.push(t),this._ComponentsMap[t._typeId]=t,this.numComponents[t._typeId]=0,n===void 0?n=new ObjectPool(t):n===!1&&(n=void 0),this._componentPool[t._typeId]=n}componentAddedToEntity(t){this.numComponents[t._typeId]++}componentRemovedFromEntity(t){this.numComponents[t._typeId]--}getComponentsPool(t){return this._componentPool[t._typeId]}}const Version="0.3.1";class Entity{constructor(t){this._entityManager=t||null,this.id=t._nextEntityId++,this._ComponentTypes=[],this._components={},this._componentsToRemove={},this.queries=[],this._ComponentTypesToRemove=[],this.alive=!1,this.numStateComponents=0}getComponent(t,n){var f=this._components[t._typeId];return!f&&n===!0&&(f=this._componentsToRemove[t._typeId]),f}getRemovedComponent(t){return this._componentsToRemove[t._typeId]}getComponents(){return this._components}getComponentsToRemove(){return this._componentsToRemove}getComponentTypes(){return this._ComponentTypes}getMutableComponent(t){var n=this._components[t._typeId];if(n){for(var f=0;f<this.queries.length;f++){var T=this.queries[f];T.reactive&&T.Components.indexOf(t)!==-1&&T.eventDispatcher.dispatchEvent(Query.prototype.COMPONENT_CHANGED,this,n)}return n}}addComponent(t,n){return this._entityManager.entityAddComponent(this,t,n),this}removeComponent(t,n){return this._entityManager.entityRemoveComponent(this,t,n),this}hasComponent(t,n){return!!~this._ComponentTypes.indexOf(t)||n===!0&&this.hasRemovedComponent(t)}hasRemovedComponent(t){return!!~this._ComponentTypesToRemove.indexOf(t)}hasAllComponents(t){for(var n=0;n<t.length;n++)if(!this.hasComponent(t[n]))return!1;return!0}hasAnyComponents(t){for(var n=0;n<t.length;n++)if(this.hasComponent(t[n]))return!0;return!1}removeAllComponents(t){return this._entityManager.entityRemoveAllComponents(this,t)}copy(t){for(var n in t._components){var f=t._components[n];this.addComponent(f.constructor);var T=this.getComponent(f.constructor);T.copy(f)}return this}clone(){return new Entity(this._entityManager).copy(this)}reset(){this.id=this._entityManager._nextEntityId++,this._ComponentTypes.length=0,this.queries.length=0;for(var t in this._components)delete this._components[t]}remove(t){return this._entityManager.removeEntity(this,t)}}const DEFAULT_OPTIONS={entityPoolSize:0,entityClass:Entity};class World{constructor(t={}){if(this.options=Object.assign({},DEFAULT_OPTIONS,t),this.componentsManager=new ComponentManager(this),this.entityManager=new EntityManager(this),this.systemManager=new SystemManager(this),this.enabled=!0,this.eventQueues={},hasWindow&&typeof CustomEvent<"u"){var n=new CustomEvent("ecsy-world-created",{detail:{world:this,version:Version}});window.dispatchEvent(n)}this.lastTime=now()/1e3}registerComponent(t,n){return this.componentsManager.registerComponent(t,n),this}registerSystem(t,n){return this.systemManager.registerSystem(t,n),this}hasRegisteredComponent(t){return this.componentsManager.hasComponent(t)}unregisterSystem(t){return this.systemManager.unregisterSystem(t),this}getSystem(t){return this.systemManager.getSystem(t)}getSystems(){return this.systemManager.getSystems()}execute(t,n){t||(n=now()/1e3,t=n-this.lastTime,this.lastTime=n),this.enabled&&(this.systemManager.execute(t,n),this.entityManager.processDeferredRemoval())}stop(){this.enabled=!1}play(){this.enabled=!0}createEntity(t){return this.entityManager.createEntity(t)}stats(){var t={entities:this.entityManager.stats(),system:this.systemManager.stats()};return t}}class System{canExecute(){if(this._mandatoryQueries.length===0)return!0;for(let n=0;n<this._mandatoryQueries.length;n++){var t=this._mandatoryQueries[n];if(t.entities.length===0)return!1}return!0}getName(){return this.constructor.getName()}constructor(t,n){if(this.world=t,this.enabled=!0,this._queries={},this.queries={},this.priority=0,this.executeTime=0,n&&n.priority&&(this.priority=n.priority),this._mandatoryQueries=[],this.initialized=!0,this.constructor.queries)for(var f in this.constructor.queries){var T=this.constructor.queries[f],E=T.components;if(!E||E.length===0)throw new Error("'components' attribute can't be empty in a query");let e=E.filter(y=>!componentRegistered(y));if(e.length>0)throw new Error(`Tried to create a query '${this.constructor.name}.${f}' with unregistered components: [${e.map(y=>y.getName()).join(", ")}]`);var h=this.world.entityManager.queryComponents(E);this._queries[f]=h,T.mandatory===!0&&this._mandatoryQueries.push(h),this.queries[f]={results:h.entities};var S=["added","removed","changed"];const d={added:Query.prototype.ENTITY_ADDED,removed:Query.prototype.ENTITY_REMOVED,changed:Query.prototype.COMPONENT_CHANGED};T.listen&&S.forEach(y=>{if(this.execute||console.warn(`System '${this.getName()}' has defined listen events (${S.join(", ")}) for query '${f}' but it does not implement the 'execute' method.`),T.listen[y]){let c=T.listen[y];if(y==="changed"){if(h.reactive=!0,c===!0){let u=this.queries[f][y]=[];h.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,l=>{u.indexOf(l)===-1&&u.push(l)})}else if(Array.isArray(c)){let u=this.queries[f][y]=[];h.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,(l,r)=>{c.indexOf(r.constructor)!==-1&&u.indexOf(l)===-1&&u.push(l)})}}else{let u=this.queries[f][y]=[];h.eventDispatcher.addEventListener(d[y],l=>{u.indexOf(l)===-1&&u.push(l)})}}})}}stop(){this.executeTime=0,this.enabled=!1}play(){this.enabled=!0}clearEvents(){for(let n in this.queries){var t=this.queries[n];if(t.added&&(t.added.length=0),t.removed&&(t.removed.length=0),t.changed)if(Array.isArray(t.changed))t.changed.length=0;else for(let f in t.changed)t.changed[f].length=0}}toJSON(){var t={name:this.getName(),enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{}};if(this.constructor.queries){var n=this.constructor.queries;for(let f in n){let T=this.queries[f],E=n[f],h=t.queries[f]={key:this._queries[f].key};h.mandatory=E.mandatory===!0,h.reactive=E.listen&&(E.listen.added===!0||E.listen.removed===!0||E.listen.changed===!0||Array.isArray(E.listen.changed)),h.reactive&&(h.listen={},["added","removed","changed"].forEach(e=>{T[e]&&(h.listen[e]={entities:T[e].length})}))}}return t}}System.isSystem=!0;System.getName=function(){return this.displayName||this.name};class TagComponent extends Component{constructor(){super(!1)}}TagComponent.isTagComponent=!0;const copyValue=s=>s,cloneValue=s=>s,copyArray=(s,t)=>{if(!s)return s;if(!t)return s.slice();t.length=0;for(let n=0;n<s.length;n++)t.push(s[n]);return t},cloneArray=s=>s&&s.slice(),copyJSON=s=>JSON.parse(JSON.stringify(s)),cloneJSON=s=>JSON.parse(JSON.stringify(s));function createType(s){var t=["name","default","copy","clone"],n=t.filter(f=>!s.hasOwnProperty(f));if(n.length>0)throw new Error(`createType expects a type definition with the following properties: ${n.join(", ")}`);return s.isType=!0,s}const Types={Number:createType({name:"Number",default:0,copy:copyValue,clone:cloneValue}),Boolean:createType({name:"Boolean",default:!1,copy:copyValue,clone:cloneValue}),String:createType({name:"String",default:"",copy:copyValue,clone:cloneValue}),Array:createType({name:"Array",default:[],copy:copyArray,clone:cloneArray}),Ref:createType({name:"Ref",default:void 0,copy:copyValue,clone:cloneValue}),JSON:createType({name:"JSON",default:null,copy:copyJSON,clone:cloneJSON})};function generateId(s){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",f=n.length,T=0;T<s;T++)t+=n.charAt(Math.floor(Math.random()*f));return t}function injectScript(s,t){var n=document.createElement("script");n.src=s,n.onload=t,(document.head||document.documentElement).appendChild(n)}function hookConsoleAndErrors(s){var t=["error","warning","log"];t.forEach(n=>{if(typeof console[n]=="function"){var f=console[n].bind(console);console[n]=(...T)=>(s.send({method:"console",type:n,args:JSON.stringify(T)}),f.apply(null,T))}}),window.addEventListener("error",n=>{s.send({method:"error",error:JSON.stringify({message:n.error.message,stack:n.error.stack})})})}function includeRemoteIdHTML(s){let t=document.createElement("div");return t.style.cssText=`
    align-items: center;
    background-color: #333;
    color: #aaa;
    display:flex;
    font-family: Arial;
    font-size: 1.1em;
    height: 40px;
    justify-content: center;
    left: 0;
    opacity: 0.9;
    position: absolute;
    right: 0;
    text-align: center;
    top: 0;
  `,t.innerHTML=`Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${s}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`,document.body.appendChild(t),t}function enableRemoteDevtools(remoteId){if(!hasWindow){console.warn("Remote devtools not available outside the browser");return}window.generateNewCode=()=>{window.localStorage.clear(),remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId),window.location.reload(!1)},remoteId=remoteId||window.localStorage.getItem("ecsyRemoteId"),remoteId||(remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId));let infoDiv=includeRemoteIdHTML(remoteId);window.__ECSY_REMOTE_DEVTOOLS_INJECTED=!0,window.__ECSY_REMOTE_DEVTOOLS={};let Version="",worldsBeforeLoading=[],onWorldCreated=s=>{var t=s.detail.world;Version=s.detail.version,worldsBeforeLoading.push(t)};window.addEventListener("ecsy-world-created",onWorldCreated);let onLoaded=()=>{var peer=new Peer(remoteId,{host:"peerjs.ecsy.io",secure:!0,port:443,config:{iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"}]},debug:3});peer.on("open",()=>{peer.on("connection",connection=>{window.__ECSY_REMOTE_DEVTOOLS.connection=connection,connection.on("open",function(){infoDiv.innerHTML="Connected",connection.on("data",function(data){if(data.type==="init"){var script=document.createElement("script");script.setAttribute("type","text/javascript"),script.onload=()=>{script.parentNode.removeChild(script),window.removeEventListener("ecsy-world-created",onWorldCreated),worldsBeforeLoading.forEach(s=>{var t=new CustomEvent("ecsy-world-created",{detail:{world:s,version:Version}});window.dispatchEvent(t)})},script.innerHTML=data.script,(document.head||document.documentElement).appendChild(script),script.onload(),hookConsoleAndErrors(connection)}else if(data.type==="executeScript"){let value=eval(data.script);data.returnEval&&connection.send({method:"evalReturn",value})}})})})})};injectScript("https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",onLoaded)}hasWindow&&new URLSearchParams(window.location.search).has("enable-remote-devtools")&&enableRemoteDevtools();class Currency extends Component{constructor(){super(...arguments);ht(this,"gold",0)}}Currency.schema={gold:{type:Types.Number}};class Descriptor extends Component{constructor(){super(...arguments);ht(this,"description","");ht(this,"name","")}}Descriptor.schema={description:{type:Types.String},name:{type:Types.String}};class EntityId extends Component{constructor(){super(...arguments);ht(this,"value","");ht(this,"itemBase","")}}EntityId.schema={value:{type:Types.String},itemBase:{type:Types.String}};class Gold extends TagComponent{}let ItemSlot$1=class{constructor(t,n){this.item=t,this.slotIndex=n}hasItem(){return this.item&&this.item!=="00000000-0000-0000-0000-000000000000"}addItem(t){if(this.item)throw new Error("ItemSlot already has an item");this.item=t}removeItem(){const t=this.item;return this.item="",t}};const createItemSlot=s=>new ItemSlot$1("",s),createItemSlots=s=>{const t=[];for(let n=0;n<s;n++)t.push(new ItemSlot$1("",n));return t};class Inventory extends Component{constructor(){super(!1);ht(this,"items");ht(this,"slots");this.slots=[],this.items=[]}firstAvailableSlot(){return this.slots.find(n=>!n.hasItem())}copy(n){return this.items=n.items,this.slots=n.slots.map(f=>new ItemSlot$1(f.item,f.slotIndex)),this}}Inventory.schema={items:{type:Types.Array},coins:{type:Types.Number},slots:{type:Types.Array},entityID:{type:Types.Number}};class ItemId extends Component{constructor(){super(...arguments);ht(this,"itemBase","")}}ItemId.schema={itemBase:{type:Types.String}};class PickedUp extends Component{constructor(){super(...arguments);ht(this,"slotIndex",0)}}PickedUp.schema={slotIndex:{type:Types.Number}};class Quantity extends Component{constructor(){super(...arguments);ht(this,"value",0);ht(this,"maxValue")}}Quantity.schema={value:{type:Types.Number},maxValue:{type:Types.Number}};class Renderable extends Component{constructor(){super(...arguments);ht(this,"sprite");ht(this,"model");ht(this,"tradeModel");ht(this,"spriteKey")}}Renderable.schema={sprite:{type:Types.Ref},scale:{type:Types.Number},model:{type:Types.Ref},tradeModel:{type:Types.Ref}};let ShopWindow$1=class extends Component{constructor(){super(!1);ht(this,"inventory");ht(this,"inPlay");ht(this,"npcInPlay");ht(this,"npcInventory");ht(this,"tradingWithEntityId");this.inventory=[],this.inPlay=[],this.npcInPlay=[],this.npcInventory=[],this.tradingWithEntityId=""}copy(n){return this.inventory=n.inventory.map(f=>{const T=createItemSlot(f.slotIndex);return T.item=f.item,T}),this.inPlay=n.inPlay.map(f=>{const T=createItemSlot(f.slotIndex);return T.item=f.item,T}),this.npcInventory=n.npcInventory.map(f=>{const T=createItemSlot(f.slotIndex);return T.item=f.item,T}),this.npcInPlay=n.npcInPlay.map(f=>{const T=createItemSlot(f.slotIndex);return T.item=f.item,T}),this.tradingWithEntityId=n.tradingWithEntityId,this}};ShopWindow$1.schema={inventory:{type:Types.Array},inPlay:{type:Types.Array},npcInPlay:{type:Types.Array},npcInventory:{type:Types.Array},tradingWithEntityId:{type:Types.String}};class Shopkeeper extends Component{constructor(){super(...arguments);ht(this,"baseItemIds",[])}}Shopkeeper.schema={baseItemIds:{type:Types.Array}};class TradeId extends Component{constructor(){super(...arguments);ht(this,"tradeId","")}}TradeId.schema={tradeId:{type:Types.String}};class Valuable extends Component{constructor(){super(...arguments);ht(this,"value",0)}}Valuable.schema={value:{type:Types.Number}};const components={CurrencyComponent:Currency,DescriptorComponent:Descriptor,EntityIdComponent:EntityId,GoldComponent:Gold,InventoryComponent:Inventory,ItemIdComponent:ItemId,PickedUpComponent:PickedUp,QuantityComponent:Quantity,RenderableComponent:Renderable,ShopWindowComponent:ShopWindow$1,ShopkeeperComponent:Shopkeeper,TradeIdComponent:TradeId,ValuableComponent:Valuable},components$1=Object.freeze(Object.defineProperty({__proto__:null,CurrencyComponent:Currency,DescriptorComponent:Descriptor,EntityIdComponent:EntityId,GoldComponent:Gold,InventoryComponent:Inventory,ItemIdComponent:ItemId,PickedUpComponent:PickedUp,QuantityComponent:Quantity,RenderableComponent:Renderable,ShopWindowComponent:ShopWindow$1,ShopkeeperComponent:Shopkeeper,TradeIdComponent:TradeId,ValuableComponent:Valuable,components},Symbol.toStringTag,{value:"Module"}));class ShopViewModel{constructor(){ht(this,"scene");ht(this,"itemsInPlay",[]);ht(this,"shopItemsInPlay",[]);eventEmitter.on(`${HudContext.shopInPlay}_item_moved`,(t,n,f)=>{this.moveItemShopInPlay(t,n),this.removeItemFromShopInventory(f),this.updateShopWindow()}),eventEmitter.on(`${HudContext.playerInPlay}_item_moved`,(t,n,f)=>{this.moveItemInPlay(t,n),this.removeItemFromPlayerInventory(f),this.updateShopWindow()}),eventEmitter.on(`${HudContext.shopInventory}_item_moved`,(t,n,f,T)=>{this.moveItemToShopInventory(t,n),this.removeItemFromShopInPlay(f,T),this.updateShopWindow()}),eventEmitter.on(`${HudContext.playerShopInventory}_item_moved`,(t,n,f,T)=>{this.moveItemToPlayerInventory(t,n),this.removeItemFromPlayerInPlay(f,T),this.updateShopWindow()})}registerScene(t){this.scene=t}closeShopWindow(){this.scene.shopWindow.close(),this.itemsInPlay=[],this.shopItemsInPlay=[],world.entityManager.queryComponents([TradeId]).entities.forEach(n=>{var f;(f=n.renderable.tradeModel)==null||f.destroy(!0)}),this.updateShopWindow(),playerEntity.removeComponent(ShopWindow$1)}calculateInPlayValue(t){let n=0;return t.forEach(f=>{const T=f.valuable,E=f.getComponent(Quantity);E?n+=T.value*E.value:n+=T.value}),n}updateShopWindow(){var t,n,f,T,E,h,S,e;(n=(t=this.scene)==null?void 0:t.shopWindow)==null||n.updatePlayerCoins(this.playerCoins),(T=(f=this.scene)==null?void 0:f.shopWindow)==null||T.updateShopCoins(this.shopCoins),(h=(E=this.scene)==null?void 0:E.shopWindow)==null||h.updateCoinsInPlay(this.inPlayValue),(e=(S=this.scene)==null?void 0:S.shopWindow)==null||e.updateShopCoinsInPlay(this.shopInPlayValue)}showShopWindow(t,n,f,T,E,h){const S=f.map(d=>({entity:d,pickedUp:d.getComponent(PickedUp),descriptor:d.getComponent(Descriptor),renderable:d.renderable_mutable,quantity:d.getComponent(Quantity),tradeId:d.getComponent(TradeId)})),e=h.map(d=>({entity:d,pickedUp:d.getComponent(PickedUp),descriptor:d.getComponent(Descriptor),renderable:d.renderable_mutable,quantity:d.getComponent(Quantity),tradeId:d.getComponent(TradeId)}));this.scene.shopWindow.initialize(n,T,S,e,this.playerCoins,this.shopCoins),this.scene.shopWindow.open()}get playerCoins(){const t=[];playerEntity.getComponent(ShopWindow$1).inventory.forEach(T=>{T.hasItem()&&t.push(world.entityManager.getEntityByName(`${T.item}`))});let f=0;return t.forEach(T=>{T.hasComponent(Gold)&&(f+=T.quantity.value)}),f}get playerCoinsInPlay(){const t=playerEntity.getComponent(ShopWindow$1);let n=0;return t.inPlay.forEach(f=>{if(f.hasItem()){const T=world.entityManager.getEntityByName(`${f.item}`);T.hasComponent(Gold)&&(n+=T.quantity.value)}}),n}get shopCoinsInPlay(){const t=playerEntity.getComponent(ShopWindow$1);let n=0;return t.npcInPlay.forEach(f=>{if(f.hasItem()){const T=world.entityManager.getEntityByName(`${f.item}`);T.hasComponent(Gold)&&(n+=T.quantity.value)}}),n}get shopCoins(){const t=[];playerEntity.getComponent(ShopWindow$1).npcInventory.forEach(T=>{T.hasItem()&&t.push(world.entityManager.getEntityByName(`${T.item}`))});let f=0;return t.forEach(T=>{T.hasComponent(Gold)&&(f+=T.quantity.value)}),f}get inPlayValue(){const t=[];return playerEntity.getComponent(ShopWindow$1).inPlay.forEach(f=>{f.hasItem()&&t.push(world.entityManager.getEntityByName(`${f.item}`))}),this.calculateInPlayValue(t)}get shopInPlayValue(){const t=[];return playerEntity.getComponent(ShopWindow$1).npcInPlay.forEach(f=>{f.hasItem()&&t.push(world.entityManager.getEntityByName(`${f.item}`))}),this.calculateInPlayValue(t)}removeItemFromPlayerInventory(t){this.scene.shopWindow.removeItemFromPlayerInventory(t)}removeItemFromPlayerInPlay(t,n){this.scene.shopWindow.removeItemFromPlayerInPlay(t),this.itemsInPlay=this.itemsInPlay.filter(f=>f.entityId.value===n)}moveItemInPlay(t,n){const f=t.renderable_mutable,T=t.getComponent(Descriptor),E=t.getComponent(Quantity);this.scene.shopWindow.addToPlayerInPlay({renderable:f,descriptor:T,entity:t,quantity:E},n),this.itemsInPlay.push(t)}moveItemShopInPlay(t,n){const f=t.renderable_mutable,T=t.getComponent(Descriptor),E=t.getComponent(Quantity);this.scene.shopWindow.addToShopInPlay({renderable:f,descriptor:T,entity:t,quantity:E},n),this.shopItemsInPlay.push(t)}removeItemFromShopInventory(t){this.scene.shopWindow.removeItemFromShopInventory(t)}removeItemFromShopInPlay(t,n){this.scene.shopWindow.removeItemFromShopInPlay(t),this.shopItemsInPlay=this.shopItemsInPlay.filter(f=>f.entityId.value===n)}moveItemToShopInventory(t,n){const f=t.renderable_mutable,T=t.getComponent(Descriptor),E=t.getComponent(Quantity);this.scene.shopWindow.addToShopInventory({renderable:f,descriptor:T,entity:t,quantity:E},n)}moveItemToPlayerInventory(t,n){const f=t.renderable_mutable,T=t.getComponent(Descriptor),E=t.getComponent(Quantity);this.scene.shopWindow.addToPlayerInventory({renderable:f,descriptor:T,entity:t,quantity:E},n)}}const shopViewModel=new ShopViewModel,constants={ui:{keys:{inventoryPanel:"inventoryPanel",inventoryGrid:"inventoryGrid"}},styles:{text:{fontSize:12,fontFamily:"EightBitDragon",align:"center",wordWrap:{width:200,useAdvancedWrap:!0},colors:{Action:"#71b40c",Info:"#ffd541",Warning:"#ffa500",World:"#249fde",Area:"#b4202a",Tips:"#008080",teal:"#264f58",grey:"#929292",None:"#ffffff",blue:"#249fde",orange:"#f9a31b",hover:"#285cc4"}},colors:{headerText:"#dba463",viewedHeaderText:"#423934",primaryLight:6511673,secondaryLight:5393979,tertiaryLight:4012325,primaryDark:1314835,secondaryDark:3551776,darkMaroon:3872549,primaryGrey:11778513,darkGrey:3748915,black:0,hoverLight:9734484,slateBlue:3098712,teal:2510680,red:12584715,blue:1384614,orange:"#ca8219",green:"#59c135",separator:7422267}},directionThresholds:{up:{startAngle:180,endAngle:360},down:{startAngle:360,endAngle:180},left:{startAngle:90,endAngle:270},right:{startAngle:270,endAngle:90},up_right:{startAngle:240,endAngle:60},up_left:{startAngle:120,endAngle:300},down_left:{startAngle:60,endAngle:240},down_right:{startAngle:300,endAngle:120}}};class InventoryGrid{constructor(t,n){ht(this,"scrollableContainer");ht(this,"grid");this.scrollableContainer=t;const f=n.getElement(keys.ui.inventoryTable);this.grid=f.getElement(keys.ui.inventoryGrid)}addItem(t){const f=this.grid.getElement("items")[t.pickedUp.slotIndex];if(f){const T=f.addItem(t);return this.grid.layout(),T}return null}removeItem(t){const f=this.grid.getElement("items")[t];f==null||f.removeItem(),this.grid.layout()}}class Item extends Phaser$1.GameObjects.Sprite{constructor(n){super(n.scene,n.x,n.y,n.texture,n.frame);ht(this,"entity");ht(this,"description");ht(this,"slotIndex",0);ht(this,"drag");this.entity=n.entity,this.name=n.name,this.description=n.description}}class ItemInfoPanel{static create(t,n){const f=t.rexUI.add.sizer({orientation:"x",width:375,height:300}),T=t.rexUI.add.sizer({orientation:"y",width:150,height:100,space:{item:10,bottom:10,left:10,right:10}}).addBackground(t.rexUI.add.roundRectangle(0,0,150,100,4,7422267).setStrokeStyle(1,0)).add(this.createTitleHeader(t,n),{expand:!0}).add(t.rexUI.add.sizer({orientation:"y",width:250,height:200,space:{item:5,top:10}}).add(t.add.text(0,0,`Value: ${this.getValue(n)}`,{fontSize:"12px",color:"white"}),{align:"center"}).add(t.add.text(0,0,n.descriptor.description,{fontSize:"12px",color:"white"}),{align:"center"}));return f.add(T),f}static getValue(t){return t.hasComponent(Quantity)?t.quantity.value*t.valuable.value:t.valuable.value}static createTitleHeader(t,n){const f=t.rexUI.add.sizer({orientation:"y",height:38}),T=t.add.text(0,0,n.descriptor.name,{fontSize:"12px",color:"white"});return f.add(T,{padding:{top:10},align:"center-center"}),f}}class ItemSlot extends OverlapSizer{constructor(n,f,T,E,h,S,e){super(S,n,f,T,E,h);ht(this,"slotIndex");ht(this,"item");ht(this,"slotType");ht(this,"qty");ht(this,"updateQuantity");this.slotType=e,this.slotIndex=h.slotIndex,this.addBackground(h.background),this.updateQuantity=function(d){var y;(y=this.qty)==null||y.setText(d.toString())}}removeItem(){this.item&&(this.qty&&(this.qty.destroy(),eventEmitter.off(keys.items.QTY_CHANGED(this.item.entity.entityId.value),this.updateQuantity)),this.remove(this.item,!0),this.item.destroy(),this.item=void 0)}addItem(n){return this.item=new Item({scene:this.scene,x:this.x,y:this.y,texture:"icons",frame:n.renderable.sprite.frame,name:n.descriptor.name,description:n.descriptor.description,entity:n.entity}),this.item.slotIndex=this.slotIndex,this.scene.add.existing(this.item),this.add(this.item,{expand:!1,align:"center"}),n.quantity&&(this.qty=this.scene.add.text(0,0,n.quantity.value.toString(),{fontFamily:constants.styles.text.fontFamily,fontSize:"10px"}).setDepth(202),this.add(this.qty,{expand:!1,align:"right-bottom"}),eventEmitter.on(keys.items.QTY_CHANGED(n.entity.entityId.value),this.updateQuantity,this),this.layout()),n.tradeId?n.renderable.tradeModel=this.item:n.renderable.model=this.item,this.item}handle_pointerOver(n,f="below"){if(this.backgroundChildren[0].setStrokeStyle(1,10520162),this.item){n.itemInfoPanel=ItemInfoPanel.create(n,this.item.entity).layout();const E=f&&f==="above"?this.y-this.height/2-n.itemInfoPanel.height/2:this.y+this.height/2+n.itemInfoPanel.height/2;n.itemInfoPanel.setX(this.x).setY(E).setDepth(205)}}handle_pointerDown(n,f){if(!this.item||f.rightButtonDown()||n.controls.shift.isDown||n.controls.justDown(n.controls.shift))return;const T=n.plugins.get("dragPlugin");this.item.drag=T.add(this.item),this.item.drag.drag(),this.item.on("dragend",(h,S,e,d)=>{d||(this.item.x=this.input.dragStartX,this.item.y=this.input.dragStartY,E.layout())});const E=this;this.item.on("drop",function(h,S){S.slotIndex===E.slotIndex&&S.slotType===E.slotType||S.item?(this.x=this.input.dragStartX,this.y=this.input.dragStartY):eventEmitter.emit(`${S.slotType}_itemDropped`,this.entity,S.slotIndex)})}handle_pointerUp(n){this.item&&(n.controls.shift.isDown||n.controls.justDown(n.controls.shift))&&(eventEmitter.emit(keys.itemSlots.CLICKED(this.slotType),this.item.entity),this.handle_pointerOut(this.scene))}handle_pointerOut(n){var T,E;this.backgroundChildren[0].setStrokeStyle(null),(T=n.itemInfoPanel)==null||T.setVisible(!1),(E=n.itemInfoPanel)==null||E.destroy(!0)}}class InventoryGridFactory{static create(t,n){const f=this.createSlots(t,n.slots,n.context),T=this.createPanel(t,f,n),E=t.rexUI.add.scrollablePanel({orientation:1,panel:{child:T,mask:{padding:1}},space:{top:0,right:0},expand:{header:!1,footer:!0},align:{header:"center",footer:"center"},header:n.panelHeader,scrollMode:0,width:n.columns?n.columns*50:206,height:n.height??400});return E.layout(),alignGrid.center(E),new InventoryGrid(E,T)}static createSlots(t,n,f){const T=[];for(let E=0;E<n;E++){const h=new ItemSlot(0,0,32,32,{orientation:"x",slotIndex:E,width:32,height:32,background:t.rexUI.add.roundRectangle(0,0,32,32,2,2235418)},t,f);h.setInteractive({dropZone:!0,hitArea:new Phaser.Geom.Rectangle(0,0,32,32),hitAreaCallback:Phaser.Geom.Rectangle.Contains}).on("pointerover",function(){h.handle_pointerOver(t)}).on("pointerout",function(){h.handle_pointerOut(t)}).on("pointerdown",function(S){h.handle_pointerDown(t,S)}).on("pointerup",function(){h.handle_pointerUp(t)}),T.push(h)}return T}static createPanel(t,n,f){const T=t.rexUI.add.sizer({orientation:"y"}).add(this.createTable(t,n,f.rows??5,f.columns??10),{key:keys.ui.inventoryTable});return T.setDepth(200),T}static createHeader(t,n){const f=t.rexUI.add.label({orientation:"x",text:t.add.text(0,0,n,constants.styles.text)}).setDepth(100);return t.rexUI.add.sizer({orientation:"y",space:{left:5,right:5,top:10}}).add(f)}static createTable(t,n,f,T){const E=Math.ceil(n.length/f),h=t.rexUI.add.gridSizer({column:E,row:f,space:{column:0,row:0},name:"table"});for(let S=0;S<n.length;S++){const e=n[S],d=S%f,y=(S-d)/f,c=y===T-1?5:0,u=d===f-1?5:0;e.slotIndex=d*E+y,h.add(e,{column:y,row:d,padding:{top:5,right:c,left:5,bottom:u},key:e.slotIndex.toString(),align:"center"}),t.add.existing(e)}return t.rexUI.add.sizer({orientation:"y",space:{left:0,right:0,top:10,bottom:10,item:5}}).add(h,{key:keys.ui.inventoryGrid})}}class ShopWindow{constructor(t,n,f,T,E,h,S,e,d,y,c){ht(this,"playerInventoryGrid");ht(this,"shopInventoryGrid");ht(this,"playerInPlay");ht(this,"coinsInPlay");ht(this,"playerName");ht(this,"playerCoins");ht(this,"shopCoins");ht(this,"shopCoinsInPlay");ht(this,"shopInPlay");ht(this,"shopName");ht(this,"sizer");this.sizer=t,this.playerInventoryGrid=E,this.shopInventoryGrid=e,this.playerInPlay=h,this.shopInPlay=S,this.shopCoins=d,this.coinsInPlay=T,this.playerName=f,this.playerCoins=n,this.shopCoinsInPlay=c,this.shopName=y}open(){this.sizer.setVisible(!0)}close(){this.sizer.setVisible(!1),this.playerInventoryGrid.getAllChildren().forEach(t=>{t instanceof ItemSlot&&t.removeItem()}),this.shopInventoryGrid.getAllChildren().forEach(t=>{t instanceof ItemSlot&&t.removeItem()}),this.playerInPlay.getAllChildren().forEach(t=>{t instanceof ItemSlot&&t.removeItem()}),this.shopInPlay.getAllChildren().forEach(t=>{t instanceof ItemSlot&&t.removeItem()})}isOpen(){return this.sizer.visible}initialize(t,n,f,T,E,h){this.updateShopName(t),this.updateShopItems(f),this.updatePlayerItems(T),this.updatePlayerCoins(E),this.updateShopCoins(h),this.playerInventoryGrid.getChildren().forEach(S=>S.setDepth(1)),this.shopInventoryGrid.getChildren().forEach(S=>S.setDepth(1))}updateShopCoins(t){this.shopCoins.setText(`${t}g`)}updatePlayerItems(t){t.forEach(n=>this.addToSlot(this.playerInventoryGrid,n.pickedUp.slotIndex,n))}updateShopItems(t){t.forEach(n=>this.addToSlot(this.shopInventoryGrid,n.pickedUp.slotIndex,n))}updatePlayerCoins(t){this.playerCoins.setText(`${t}g`)}updateShopName(t){this.shopName.setText(t)}updateCoinsInPlay(t){this.coinsInPlay.setText(`${t}g`)}updateShopCoinsInPlay(t){this.shopCoinsInPlay.setText(`${t}g`)}addToPlayerInPlay(t,n){return this.addToSlot(this.playerInPlay,n,t)}addToSlot(t,n,f){const E=t.getElement("items")[n];if(E){const h=E.addItem(f);return t.layout(),h.setDepth(201)}return null}addToShopInPlay(t,n){return this.addToSlot(this.shopInPlay,n,t)}addToPlayerInventory(t,n){return this.addToSlot(this.playerInventoryGrid,n,t)}addToShopInventory(t,n){return this.addToSlot(this.shopInventoryGrid,n,t)}removeFromSlot(t,n){const T=t.getElement("items")[n],E=T==null?void 0:T.removeItem();return t.layout(),E}removeItemFromPlayerInPlay(t){return this.removeFromSlot(this.playerInPlay,t)}removeItemFromPlayerInventory(t){this.removeFromSlot(this.playerInventoryGrid,t)}removeItemFromShopInPlay(t){this.removeFromSlot(this.shopInPlay,t)}removeItemFromShopInventory(t){this.removeFromSlot(this.shopInventoryGrid,t)}}class ShopWindowFactory{static create(t){const n=t.rexUI.add.sizer({orientation:"y"}),f=t.rexUI.add.sizer({orientation:"x",width:824,height:432,space:{top:45}});n.addBackground(t.rexUI.add.roundRectangle(0,0,2,2,2,1314835));const T="tradingWith",E="player",h=t.rexUI.add.sizer({orientation:"x",space:{item:40}}),S=t.add.text(0,0,"Player",{fontFamily:constants.styles.text.fontFamily,fontSize:"12px"}),e=t.add.text(0,0,"0g",{fontFamily:constants.styles.text.fontFamily,fontSize:"12px"});h.add(S).add(e);const d=InventoryGridFactory.create(t,{panelHeader:h,height:390,context:HudContext.playerShopInventory,rows:5,columns:5,slots:25}),y=t.add.text(0,0,"0g",{fontFamily:constants.styles.text.fontFamily,fontSize:"12px"}),c=InventoryGridFactory.create(t,{height:390,slots:14,rows:7,columns:2,panelHeader:y,context:HudContext.playerInPlay}),u=t.add.text(0,0,"0g",{fontFamily:constants.styles.text.fontFamily,fontSize:"12px"}),l=InventoryGridFactory.create(t,{height:390,slots:14,rows:7,columns:2,panelHeader:u,context:HudContext.shopInPlay}),r=t.rexUI.add.sizer({orientation:"x",space:{item:40}}),a=t.add.text(0,0,"NPC",{fontFamily:constants.styles.text.fontFamily,fontSize:"12px"}),v=t.add.text(0,0,"2,000g",{fontFamily:constants.styles.text.fontFamily,fontSize:"12px"});r.add(a).add(v);const o=InventoryGridFactory.create(t,{panelHeader:r,height:390,rows:5,columns:5,slots:25,context:HudContext.shopInventory});f.add(d.scrollableContainer,{key:E,padding:{right:5}}).add(c.scrollableContainer,{key:"middleLeft",padding:{left:10}}).add(l.scrollableContainer,{key:"middleRight",padding:{left:5}}).add(o.scrollableContainer,{key:T,padding:{left:15}});const p=t.rexUI.add.sizer({orientation:"x",height:55,width:250,space:{item:5}}),m=t.add.text(0,0,"Balance").setInteractive().on("pointerup",()=>{eventEmitter.emit(keys.menu.CLICKED("balanceOffer"))}),g=t.add.text(0,0,"Close").setInteractive().on("pointerup",()=>{eventEmitter.emit(keys.menu.CLICKED("closeShop"))}),x=t.add.text(0,0,"Accept").setInteractive().on("pointerup",()=>{eventEmitter.emit(keys.menu.CLICKED("acceptTrade"))});p.add(x).add(m).add(g),n.add(f),n.add(p),n.setVisible(!1),n.layout();const C=new ShopWindow(n,e,S,y,d.grid,c.grid,l.grid,o.grid,v,a,u);return alignGrid.center(C.sizer),C}}class TradeScene extends Phaser.Scene{constructor(){super("TradeScene");ht(this,"shopWindow");ht(this,"rexUI");ht(this,"startTradeText");ht(this,"itemInfoPanel");ht(this,"controls")}preload(){this.load.atlas("icons","/icons.png","/icons.json"),alignGrid.create({rows:20,cols:20,scene:this})}create(){this.shopWindow=ShopWindowFactory.create(this),this.controls=new Controls(this.input.keyboard.createCursorKeys(),this.cameras.main,this),this.startTradeText=this.add.text(0,0,"Start Trade").setInteractive().on("pointerup",()=>{var n;eventEmitter.emit(keys.menu.CLICKED("trade"),(n=shopkeeperEntity.entityId)==null?void 0:n.value),this.startTradeText.setVisible(!1)}),alignGrid.center(this.startTradeText),shopViewModel.registerScene(this)}update(n,f){world.execute(f,n)}}const config={type:Phaser$1.WEBGL,backgroundColor:"black",parent:"app",scale:{mode:Phaser$1.Scale.FIT},scene:[TradeScene],plugins:{global:[{key:"dragPlugin",plugin:DragPlugin,start:!0}],scene:[{key:"rexUI",plugin:UIPlugin,mapping:"rexUI"}]},pixelArt:!0,physics:{default:"arcade",arcade:{gravity:{y:0}}},callbacks:{},disableContextMenu:!1};class ComponentLookup{constructor(){ht(this,"indexedComponents");this.indexedComponents=new Map;let t=components;Object.keys(components).forEach(n=>{this.indexedComponents.set(n.toLowerCase(),t[n])})}getComponent(t){return t.toLowerCase().indexOf("component")>-1?this.indexedComponents.get(t.toLowerCase()):this.indexedComponents.get(`${t.toLowerCase()}component`)}}const componentLookup=new ComponentLookup;function initializeEntity(s){const t=world.createEntity(s.entityID);return Object.keys(s.components).forEach(n=>{const f=componentLookup.getComponent(n);f?t.addComponent(f,s.components[n]):console.log(`${n} was not registered to player because it did not exist`)}),t.addComponent(EntityId,{value:s.entityID}),t}class GameEntity extends Entity{get entityId(){const t=this.getComponent(EntityId);if(!t)throw new Error("EntityIdComponent does not exist on this entity.");return t}get pickedUp(){const t=this.getComponent(PickedUp);if(!t)throw new Error("PickedUpComponent does not exist on this entity.");return t}get quantity(){const t=this.getComponent(Quantity);if(!t)throw new Error("QuantityComponent does not exist on this entity.");return t}get quantity_mutable(){const t=this.getMutableComponent(Quantity);if(!t)throw new Error("QuantityComponent does not exist on this entity.");return t}get renderable(){const t=this.getComponent(Renderable);if(!t)throw new Error("RenderableComponent does not exist on this entity.");return t}get renderable_mutable(){const t=this.getMutableComponent(Renderable);if(!t)throw new Error("RenderableComponent does not exist on this entity.");return t}get valuable(){const t=this.getComponent(Valuable);if(!t)throw new Error("ValuableComponent does not exist on this entity.");return t}get shopWindow(){const t=this.getComponent(ShopWindow$1);if(!t)throw new Error("ShopWindowComponent does not exist on this entity.");return t}get inventory(){const t=this.getComponent(Inventory);if(!t)throw new Error("InventoryComponent does not exist on this entity.");return t}get inventory_mutable(){const t=this.getMutableComponent(Inventory);if(!t)throw new Error("InventoryComponent does not exist on this entity.");return t}get descriptor(){const t=this.getComponent(Descriptor);if(!t)throw new Error("DescriptorComponent does not exist on this entity.");return t}get shopkeeper(){const t=this.getComponent(Shopkeeper);if(!t)throw new Error("ShopkeeperComponent does not exist on this entity.");return t}}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(s){return typeof s=="string"&&REGEX.test(s)}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(byteToHex[s[t+0]]+byteToHex[s[t+1]]+byteToHex[s[t+2]]+byteToHex[s[t+3]]+"-"+byteToHex[s[t+4]]+byteToHex[s[t+5]]+"-"+byteToHex[s[t+6]]+byteToHex[s[t+7]]+"-"+byteToHex[s[t+8]]+byteToHex[s[t+9]]+"-"+byteToHex[s[t+10]]+byteToHex[s[t+11]]+byteToHex[s[t+12]]+byteToHex[s[t+13]]+byteToHex[s[t+14]]+byteToHex[s[t+15]]).toLowerCase();if(!validate(n))throw TypeError("Stringified UUID is invalid");return n}function v4(s,t,n){s=s||{};var f=s.random||(s.rng||rng)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,t){n=n||0;for(var T=0;T<16;++T)t[n+T]=f[T];return t}return stringify(f)}const itemPresets={items:{gold:{renderable:{sprite:{height:45,width:45,texture:"GoldPouch",frame:"GoldPouch.png",name:null,animations:[]},spriteKey:"gold",scale:0},descriptor:{description:"Pretty self explanatory.",name:"Gold"},summary:{summaryText:"Pretty self explanatory."},valuable:{value:1},quantity:{value:1}},bluePendant:{descriptor:{description:"A necklace that would look nice in any occasion.",name:"Blue Pendant"},equippable:{levelRequirement:"0",slot:"neck"},id:6,renderable:{spriteKey:"pendant"},requirements:{levelRequirement:"1"},valuable:{value:2}},blueWizardStaff:{descriptor:{description:"A staff embedded with a magical hue",name:"Wizard's Staff"},equippable:{levelRequirement:"1",slot:0},id:11,implicitModifiers:{modifiersToAdd:["elementalDamage"]},renderable:{spriteKey:"blue_wizard_staff"},requirements:{levelRequirement:"1",attributeRequirements:[{attribute:"intelligence",value:10}]},valuable:{value:6},withSockets:{sockets:[{tier:"1"},{tier:"1"}]}},dagger:{descriptor:{description:"A rusty old dagger, but better than nothing!",name:"Dagger"},equippable:{levelRequirement:"1",slot:"Hand"},itemId:{itemBase:"dagger"},implicitModifiers:{modifiers:[{minValue:8,maxValue:10,description:"8-10",templateId:"Physical Damage",groupDescription:"Physical Damage",groupId:"physicalDamage"}]},renderable:{sprite:{height:45,width:45,texture:"Dagger",frame:"Dagger.png",name:null,animations:[]},spriteKey:"dagger",scale:0},requirements:{levelRequirement:"1",attributeRequirements:[{attribute:"strength",value:10}]},summary:{},valuable:{value:6},withSockets:{sockets:[{tier:"1"},{tier:"1"}]}},multiStrike:{descriptor:{description:"An insignia containing MultiStrike",name:"MultiStrike"},id:3,renderable:{spriteKey:"sword_plunge_insignia"},skillable:{skillId:"MultiStrike",spriteKey:"multistrike"},socketable:{levelRequirement:"1",tier:"1"},requirements:{levelRequirement:"1"},valuable:{value:4}},potionOfHealth:{consumable:{statModifiers:{statModifier:{target:"Health",type:"Flat",value:"10"}},uses:"3"},descriptor:{description:"A small health potion.",name:"Potion of Health"},id:7,renderable:{spriteKey:"health_potion"},requirements:{levelRequirement:"1"},valuable:{value:2}},silverRing:{descriptor:{description:"An imperfect yet pretty ring made out of silver.",name:"Silver Ring"},equippable:{levelRequirement:"0",slot:"Ring"},id:5,renderable:{spriteKey:"silver_ring"},requirements:{levelRequirement:"1"},valuable:{value:3}},swordPlunge:{descriptor:{description:"An insignia containing Sword Plunge",name:"Sword Plunge"},id:2,renderable:{spriteKey:"sword_plunge_insignia"},skillable:{skillId:"SwordPlunge",spriteKey:"sword_plunge_insignia"},requirements:{levelRequirement:"1"},socketable:{levelRequirement:"1",tier:"1"},valuable:{value:4}},mapTemplate:{descriptor:{description:"A map that will teleport you to a new area.",name:"Map"},id:7,mapTemplate:{modifiers:["test"]},consumable:{uses:1},renderable:{spriteKey:"map_1"},requirements:{levelRequirement:"1"},zone:{value:"Cave"},valuable:{value:5}},woodenShield:{descriptor:{description:"A small shield that provides some protection.",name:"Wooden Shield"},equippable:{levelRequirement:"1",slot:"Hand2"},id:4,physicalResistance:{resistance:"2"},renderable:{spriteKey:"wooden_shield"},requirements:{levelRequirement:"1"},valuable:{value:5},withSockets:{sockets:{socket:[{tier:"1"}]}}},firstInsignia:{descriptor:{name:"Splitting Insignia of Health",description:"A small crest that embues you with some added power"},id:12,questItem:{taskId:0,questId:"firstMission",questItemId:"firstInsignia"},equippable:{isEquipped:!1},insignia:{},requirements:{levelRequirement:"1"},renderable:{sprite:{texture:"SwordPlungeInsignia",frame:"SwordPlungeInsignia.png",height:35,width:35},spriteKey:"sword_plunge_insignia"}},splittingInsignia:{descriptor:{name:"Splitting Insignia of Health",description:"A small crest that embues you with some added power"},id:12,questItem:{taskId:0,questId:"firstMission",questItemId:"firstInsignia"},insignia:{},requirements:{levelRequirement:"1"},itemPrefixes:{prefixes:{forkProjectiles:{description:"100% chance for projectiles to fork into 2",value:1}}},itemSuffixes:{suffixes:{increasedHealth:{description:"+10 health",value:10}}},renderable:{sprite:{texture:"SwordPlungeInsignia",frame:"SwordPlungeInsignia.png",height:35,width:35},spriteKey:"sword_plunge_insignia"}}}},getGold=s=>{const t=v4();return{components:{renderable:{sprite:{height:45,width:45,texture:"GoldPouch",frame:"GoldPouch.png",name:null,animations:[]},spriteKey:"gold",scale:0},descriptor:{description:"Pretty self explanatory.",name:"Gold"},itemId:{value:t,itemBase:"gold"},summary:{summaryText:"Pretty self explanatory."},gold:{},valuable:{value:1},quantity:{value:s}},entityID:t}};function initializeItem(s){const t=world.createEntity(`${s.entityID}`);return Object.keys(s.components).filter(n=>s.components[n]!==null).forEach(n=>{const f=componentLookup.getComponent(n);f?t.addComponent(f,s.components[n]):console.log(`${n} was not registered to item because it did not exist`)}),t.addComponent(EntityId,{value:s.entityID}),t}class ItemGenerator{static generateItem(t,n){const f=itemPresets.items[t],T=v4();return initializeItem({components:f,entityID:T})}}function calculateValueDifference(){const s=shopViewModel.inPlayValue;return shopViewModel.shopInPlayValue-s}function getPlayerShopGoldEntities(){const s=playerEntity.getComponent(ShopWindow$1);return world.entityManager.queryComponents([Gold]).entities.filter(t=>{const n=t.entityId.value;return s.inventory.some(f=>f.hasItem()&&f.item===n)})}function getShopGoldEntities(){const s=playerEntity.getComponent(ShopWindow$1);return world.entityManager.queryComponents([Gold]).entities.filter(t=>{const n=t.entityId.value;return s.npcInventory.some(f=>f.hasItem()&&f.item===n)})}function calculateAvailableGold(s){return s.reduce((t,n)=>{if(!n.hasAllComponents([Gold,Quantity]))throw new Error("Tried to sum a gold entity without gold or quantity");const f=n.getComponent(Quantity);return t+f.value},0)}function sortGoldByQuantity(s){return s.sort((t,n)=>{const f=t.getComponent(Quantity).value,T=n.getComponent(Quantity).value;return f-T})}function splitGoldStack(s,t){s.quantity_mutable.value-=t;const n=getGold(t);return initializeItem(n)}function removeItemIfQuantityZero(s,t){s.quantity.value<=0&&itemRemovedFromPlayerInventory(t.find(n=>n.item===s.entityId.value).slotIndex)}function balancePlayerGold(s,t){const n=playerEntity.shopWindow;s.forEach(f=>{var E;if(t<=0)return;const T=f.quantity.value;if(t-T<0){const{itemWithMatchingQuantityType:h,slot:S}=getItemWithQuantityOfType(f,n.inPlay);if(h&&S)h.quantity_mutable.value+=t,f.quantity_mutable.value-=t,removeItemIfQuantityZero(f,n.inventory);else{const e=splitGoldStack(f,t);(E=n.inventory.find(y=>!y.hasItem()))==null||E.addItem(e.entityId.value);const d=n.inPlay.find(y=>!y.hasItem());itemMovedInPlay(e),e.addComponent(TradeId,{tradeId:n.tradingWithEntityId}),e.addComponent(PickedUp,{slotIndex:d.slotIndex}),shopViewModel.updateShopWindow()}}else{const{itemWithMatchingQuantityType:h}=getItemWithQuantityOfType(f,n.inPlay);h?(h.quantity_mutable.value+=T,f.quantity_mutable.value-=t,removeItemIfQuantityZero(f,n.inventory)):itemMovedInPlay(f)}t-=T})}function balanceNpcGold(s,t){const n=playerEntity.shopWindow;s.forEach(f=>{var E;if(t<=0)return;const T=f.quantity.value;if(t-T<0){const{itemWithMatchingQuantityType:h,slot:S}=getItemWithQuantityOfType(f,n.npcInPlay);if(h&&S)h.quantity_mutable.value+=t,f.quantity_mutable.value-=t,removeItemIfQuantityZero(f,n.npcInventory);else{const e=splitGoldStack(f,t);(E=n.npcInventory.find(y=>!y.hasItem()))==null||E.addItem(e.entityId.value);const d=n.npcInPlay.find(y=>!y.hasItem());itemMovedShopInPlay(e),e.addComponent(TradeId,{tradeId:n.tradingWithEntityId}),e.addComponent(PickedUp,{slotIndex:d.slotIndex}),shopViewModel.updateShopWindow()}}else{const{itemWithMatchingQuantityType:h}=getItemWithQuantityOfType(f,n.npcInPlay);h?(h.quantity_mutable.value+=T,f.quantity_mutable.value-=t,removeItemIfQuantityZero(f,n.npcInventory)):itemMovedShopInPlay(f)}t-=T})}function itemRemovedFromPlayerInventory(s){playerEntity.shopWindow.inventory[s].removeItem(),shopViewModel.removeItemFromPlayerInventory(s)}function itemMovedShopInPlay(s,t){const n=playerEntity.shopWindow,f=n.npcInventory.find(h=>h.item===s.entityId.value);if(!f){console.log("Tried to move an item to an invalid slot");return}const T=f.removeItem(),E=t!==void 0?n.npcInPlay[t]:n.npcInPlay.find(h=>!h.hasItem());n.npcInPlay[E.slotIndex].addItem(T),shopViewModel.moveItemShopInPlay(s,E.slotIndex),shopViewModel.removeItemFromShopInventory(f.slotIndex),shopViewModel.updateShopWindow()}function itemMovedInPlay(s,t){const n=playerEntity.shopWindow,f=n.inventory.find(h=>h.item===s.entityId.value);if(!f){console.log("Tried to move an item to an invalid slot");return}const T=f.removeItem(),E=t!==void 0?n.inPlay[t]:n.inPlay.find(h=>!h.hasItem());n.inPlay[E.slotIndex].addItem(T),shopViewModel.moveItemInPlay(s,E.slotIndex),shopViewModel.removeItemFromPlayerInventory(f.slotIndex),shopViewModel.updateShopWindow()}function itemMovedToShopInventory(s,t){const n=playerEntity.shopWindow,f=n.npcInPlay.find(h=>h.item===s.entityId.value);if(!f){console.log("Tried to move an item to an invalid slot");return}const T=f.removeItem(),E=t!==void 0?n.npcInventory[t]:n.npcInventory.find(h=>!h.hasItem());n.npcInventory[E.slotIndex].addItem(T),shopViewModel.moveItemToShopInventory(s,E.slotIndex),shopViewModel.removeItemFromShopInPlay(f.slotIndex,T),shopViewModel.updateShopWindow()}function itemMoved(s,t,n,f,T){const E=t.find(e=>e.item===s.entityId.value);if(!E){console.log("Tried to move an item to an invalid slot");return}const h=E.removeItem(),S=T!==void 0?n[T]:n.find(e=>!e.hasItem());n[S.slotIndex].addItem(h),eventEmitter.emit(`${f}_item_moved`,s,S.slotIndex,E.slotIndex,h)}function itemMovedToPlayerShopInventory(s,t){const n=playerEntity.shopWindow,f=n.inPlay.find(h=>h.item===s.entityId.value);if(!f){console.log("Tried to move an item to an invalid slot");return}const T=f.removeItem(),E=t!==void 0?n.inPlay[t]:n.inventory.find(h=>!h.hasItem());n.inventory[E.slotIndex].item=T,shopViewModel.moveItemToPlayerInventory(s,E.slotIndex),shopViewModel.removeItemFromPlayerInPlay(f.slotIndex,T),shopViewModel.updateShopWindow()}function executeTrade(){const s=shopViewModel.playerCoinsInPlay,t=shopViewModel.shopCoinsInPlay,n=getPlayerItemsToReceive(),f=getNpcItemsToReceive(),T=playerEntity.shopWindow.tradingWithEntityId;transferItemsToPlayer(n,T),transferItemsToNpc(f,T),applyNewGoldValues(s,playerEntity.entityId.value),applyNewGoldValues(t,T),shopViewModel.closeShopWindow()}function applyNewGoldValues(s,t){if(s>0){const n=getItemInInventoryWithMinQuantity(s,t);n&&(n.quantity_mutable.value-=s)}}function transferItemsToPlayer(s,t){const n=world.entityManager.getEntityByName(t);s.forEach(f=>{const T=f.pickedUp.slotIndex;if(f.hasComponent(TradeId)||removeFromInventory(n,T),f.removeComponent(PickedUp),!f.hasComponent(Gold)){addToInventory(playerEntity,f);return}const E=playerEntity.inventory_mutable,{itemWithMatchingQuantityType:h}=getItemWithQuantityOfType(f,E.slots);if(h){h.quantity_mutable.value+=f.quantity.value,f.hasComponent(TradeId)||removeFromInventory(playerEntity,T);return}addToInventory(playerEntity,f)})}function balanceOffer(){const s=shopViewModel.inPlayValue,t=shopViewModel.shopInPlayValue;s!==t&&(s<t?balanceOfferWithPlayerGold():balanceOfferWithNpcGold(),shopViewModel.updateShopWindow())}function balanceOfferWithPlayerGold(){const s=calculateValueDifference(),t=getPlayerShopGoldEntities();if(calculateAvailableGold(t)<s)return;const f=sortGoldByQuantity(t);balancePlayerGold(f,s)}function balanceOfferWithNpcGold(){const s=shopViewModel.inPlayValue-shopViewModel.shopInPlayValue,t=getShopGoldEntities();if(calculateAvailableGold(t)<s)return;const f=sortGoldByQuantity(t);balanceNpcGold(f,s)}function transferItemsToNpc(s,t){const n=world.entityManager.getEntityByName(t);s.forEach(f=>{const T=f.pickedUp.slotIndex;if(f.hasComponent(TradeId)||removeFromInventory(playerEntity,T),f.removeComponent(PickedUp),!f.hasComponent(Gold)){addToInventory(n,f);return}const E=n.inventory,{itemWithMatchingQuantityType:h}=getItemWithQuantityOfType(f,E.slots);if(h){h.quantity_mutable.value+=f.quantity.value,f.hasComponent(TradeId)||removeFromInventory(playerEntity,T);return}addToInventory(n,f)})}function getNpcItemsToReceive(){const s=playerEntity.shopWindow,t=[];return s.inPlay.filter(n=>n.hasItem()).forEach(n=>{const f=n.removeItem();t.push(world.entityManager.getEntityByName(f))}),t}function getPlayerItemsToReceive(){const s=playerEntity.shopWindow,t=[];return s.npcInPlay.filter(n=>n.hasItem()).forEach(n=>{const f=n.removeItem();t.push(world.entityManager.getEntityByName(f))}),t}const getItemWithQuantityOfType=(s,t)=>{let n=null,f=null;return t.find(T=>{if(!T.item)return!1;const E=world.entityManager.getEntityByName(T.item);if(E.hasComponent(Quantity)&&E.entityId.itemBase===s.entityId.itemBase)return n=E,f=T,!0}),{itemWithMatchingQuantityType:n,slot:f}};function mapInventorySlot(s,t){let n="";if(!s.hasItem())return new ItemSlot$1(n,s.slotIndex);const f=world.entityManager.getEntityByName(s.item);if(n=f.entityId.value,f.hasComponent(Gold)){const T=getGold(f.quantity.value),E=initializeEntity(T);E.addComponent(TradeId,{tradeId:t}),E.addComponent(PickedUp,{slotIndex:f.getComponent(PickedUp).slotIndex}),n=E.entityId.value}return new ItemSlot$1(n,s.slotIndex)}function getItemInInventoryWithMinQuantity(s,t){const n=world.entityManager.getEntityByName(t).getComponent(Inventory);let f=null;return n.items.find(T=>{const E=world.entityManager.getEntityByName(T);return E.hasComponent(Quantity)&&E.quantity.value>=s?(f=E,!0):!1}),f}const addToInventory=(s,t)=>{const n=s.inventory_mutable,f=t.hasComponent(PickedUp),T=f?t.pickedUp.slotIndex:n.firstAvailableSlot().slotIndex;f||t.addComponent(PickedUp,{slotIndex:T});const E=t.entityId.value;n.slots[T].item=E,n.items.push(E)},removeFromInventory=(s,t)=>{const n=s.inventory_mutable;if(s==playerEntity){const f=n.slots[t].removeItem();n.items=n.items.filter(T=>T!==f)}else{const f=n.slots[t].removeItem();n.items=n.items.filter(T=>T!==f)}};function getItemsFromSlots(s){return s.filter(t=>t.hasItem()).map(t=>world.entityManager.getEntityByName(t.item))}class ShopSystem extends System{init(){eventEmitter.on(keys.itemSlots.CLICKED(HudContext.playerInPlay),t=>{itemMovedToPlayerShopInventory(t)}),eventEmitter.on(keys.itemSlots.CLICKED(HudContext.playerShopInventory),t=>{itemMovedInPlay(t)}),eventEmitter.on(keys.itemSlots.CLICKED(HudContext.shopInventory),t=>{itemMovedShopInPlay(t)}),eventEmitter.on(keys.itemSlots.CLICKED(HudContext.shopInPlay),t=>{itemMovedToShopInventory(t)}),eventEmitter.on(keys.items.DROPPED(HudContext.playerInPlay),(t,n)=>{itemMoved(t,playerEntity.shopWindow.inventory,playerEntity.shopWindow.inPlay,HudContext.playerInPlay,n)}),eventEmitter.on(keys.items.DROPPED(HudContext.shopInPlay),(t,n)=>{itemMoved(t,playerEntity.shopWindow.npcInventory,playerEntity.shopWindow.npcInPlay,HudContext.shopInPlay,n)}),eventEmitter.on(keys.items.DROPPED(HudContext.playerShopInventory),(t,n)=>{itemMoved(t,playerEntity.shopWindow.inPlay,playerEntity.shopWindow.inventory,HudContext.playerShopInventory,n)}),eventEmitter.on(keys.items.DROPPED(HudContext.shopInventory),(t,n)=>{itemMoved(t,playerEntity.shopWindow.npcInPlay,playerEntity.shopWindow.npcInventory,HudContext.shopInventory,n)}),eventEmitter.on(keys.menu.CLICKED("balanceOffer"),()=>{balanceOffer()}),eventEmitter.on(keys.menu.CLICKED("acceptTrade"),()=>{shopViewModel.inPlayValue<shopViewModel.shopInPlayValue||(executeTrade(),this.tradeInitiated(shopkeeperEntity.entityId.value))}),eventEmitter.on(keys.menu.CLICKED("closeShop"),()=>{shopViewModel.closeShopWindow()}),eventEmitter.on(keys.menu.CLICKED("trade"),t=>{this.tradeInitiated(t)})}tradeInitiated(t){const n=this.world.entityManager.getEntityByName(t),f=playerEntity.inventory.slots.map(d=>mapInventorySlot(d,t)),T=n.inventory.slots.map(d=>mapInventorySlot(d,t)),E=createItemSlots(10),h=createItemSlots(10);playerEntity.addComponent(ShopWindow$1,{inventory:f,inPlay:E,npcInPlay:h,npcInventory:T,tradingWithEntityId:t});const S=getItemsFromSlots(playerEntity.shopWindow.npcInventory),e=getItemsFromSlots(playerEntity.shopWindow.inventory);shopViewModel.showShopWindow(n.inventory,n.descriptor.name,S,playerEntity.descriptor.name,playerEntity.inventory,e)}execute(){this.queries.shopkeeper.added.forEach(t=>{const n=t;n.shopkeeper.baseItemIds.forEach(S=>{var d;const e=ItemGenerator.generateItem(S,(d=n.entityId)==null?void 0:d.value);addToInventory(n,e)});const T=t.getComponent(Currency),E=getGold(T.gold),h=initializeEntity(E);addToInventory(n,h)}),this.queries.quantity.changed.forEach(t=>{const n=t,f=n.quantity;eventEmitter.emit(keys.items.QTY_CHANGED(n.entityId.value),f.value)})}}ShopSystem.queries={shopkeeper:{components:[Shopkeeper,Inventory],listen:{added:!0}},quantity:{components:[Quantity],listen:{changed:!0}}};function initializeWorld(){const s=new World({entityClass:GameEntity});return Object.values(components$1).forEach(t=>{typeof t==typeof Component&&s.registerComponent(t)}),s.registerSystem(ShopSystem),s}function getPlayer(){return{components:{InventoryComponent:{itemsToAdd:[],slots:[{slotIndex:0,isActive:!1,isEnabled:!0,item:"e0057ac8-319d-47fb-b86a-aa72aca9cd9b"},{slotIndex:1,isActive:!1,isEnabled:!0,item:"79aab16f-677d-4624-ba9f-2397d10c2ab3"},{slotIndex:2,isActive:!1,isEnabled:!0,item:"6dae9405-d7cc-4a80-a59a-73a2ecbc5d4c"},{slotIndex:3,isActive:!1,isEnabled:!0,item:"5becd911-8b94-4c05-bab4-2ac258ee2d40"},{slotIndex:4,isActive:!1,isEnabled:!0,item:"82693eb2-df70-4b20-ad01-b88518be8dbf"},{slotIndex:5,isActive:!1,isEnabled:!0,item:""},{slotIndex:6,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:7,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:8,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:9,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:10,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:11,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:12,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:13,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:14,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:15,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:16,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:17,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:18,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:19,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:20,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:21,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:22,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:23,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:24,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:25,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:26,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:27,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:28,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:29,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:30,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:31,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:32,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:33,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:34,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:35,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:36,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:37,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:38,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:39,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:40,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:41,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:42,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:43,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:44,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:45,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:46,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:47,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:48,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:49,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"}],items:["e0057ac8-319d-47fb-b86a-aa72aca9cd9b","79aab16f-677d-4624-ba9f-2397d10c2ab3","6dae9405-d7cc-4a80-a59a-73a2ecbc5d4c","5becd911-8b94-4c05-bab4-2ac258ee2d40","82693eb2-df70-4b20-ad01-b88518be8dbf"],coins:0},DescriptorComponent:{name:"Player"}},entityID:"30bf1e65-d6e0-4766-867c-b158673cfdc1"}}function getPlayerItems(){return[{components:{DescriptorComponent:{description:"",id:null,name:"Dagger"},EquippableComponent:{levelRequirement:1,isEquipped:!1,slotIndex:0,slot:0},ImplicitModifiersComponent:{modifiersToAdd:[],modifiers:[{minValue:8,maxValue:10,description:"8-10",templateId:"Physical Damage",groupDescription:"Physical Damage",groupId:"physicalDamage"}]},ItemIdComponent:{value:"e0057ac8-319d-47fb-b86a-aa72aca9cd9b",itemBase:"dagger",ownedBy:"30bf1e65-d6e0-4766-867c-b158673cfdc1"},PickedUpComponent:{slotIndex:0},RenderableComponent:{sprite:{height:35,width:35,texture:"Dagger",frame:"Dagger.png",name:null,animations:[]},spriteKey:"dagger",scale:0},RequirementsComponent:{levelRequirement:1,attributeRequirements:[{attribute:2,value:10}]},SummaryComponent:{summaryText:""},ValuableComponent:{value:6},WithSocketsComponent:{sockets:[{tier:1,slotIndex:0,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"},{tier:1,slotIndex:1,isActive:!1,isEnabled:!0,item:"00000000-0000-0000-0000-000000000000"}]}},entityID:"e0057ac8-319d-47fb-b86a-aa72aca9cd9b"},{components:{DescriptorComponent:{description:"An insignia that embues you with power.",id:null,name:"First Insignia"},ItemIdComponent:{value:"79aab16f-677d-4624-ba9f-2397d10c2ab3",itemBase:"swordPlunge",ownedBy:"30bf1e65-d6e0-4766-867c-b158673cfdc1"},EquippableComponent:{isEquipped:!1,levelRequirement:1,slotIndex:0,slot:1},PickedUpComponent:{slotIndex:1},RenderableComponent:{sprite:{height:35,width:35,texture:"SwordPlungeInsignia",frame:"SwordPlungeInsignia.png",name:null,animations:[]},spriteKey:"sword_plunge_insignia",scale:0},RequirementsComponent:{levelRequirement:1,attributeRequirements:[]},SkillableComponent:{skillId:0,manaCost:999,coolDown:999,sprite:null,description:null,tier:3},SocketableComponent:{isSocketed:!1,tier:1,levelRequirement:0},InsigniaComponent:{},RarityComponent:{value:1},ItemPrefixesComponent:{prefixes:{forkProjectiles:{description:"100% chance for projectiles to fork into 2",value:1}}},ItemSuffixesComponent:{suffixes:{increasedHealth:{description:"+10 health",value:10}}},SummaryComponent:{summaryText:""},ValuableComponent:{value:4}},entityID:"79aab16f-677d-4624-ba9f-2397d10c2ab3"},{components:{ConsumableComponent:{attributeModifiers:[],uses:1,remainingUses:1},DescriptorComponent:{description:"",id:null,name:"Map"},ItemIdComponent:{value:"6dae9405-d7cc-4a80-a59a-73a2ecbc5d4c",itemBase:"mapTemplate",ownedBy:"30bf1e65-d6e0-4766-867c-b158673cfdc1"},MapTemplateComponent:{modifiers:null},PickedUpComponent:{slotIndex:2},RenderableComponent:{sprite:{height:35,width:35,texture:"Map",frame:"Map.png",name:null,animations:[]},spriteKey:"map_1",scale:0},RequirementsComponent:{levelRequirement:1,attributeRequirements:[]},SummaryComponent:{summaryText:""},ValuableComponent:{value:5},ZoneComponent:{value:"Cave",zoneWidthInTiles:0}},entityID:"6dae9405-d7cc-4a80-a59a-73a2ecbc5d4c"},{components:{ConsumableComponent:{attributeModifiers:[{value:10,type:0,target:0}],uses:3,remainingUses:3},DescriptorComponent:{description:"",id:null,name:"Potion of Health"},ItemIdComponent:{value:"5becd911-8b94-4c05-bab4-2ac258ee2d40",itemBase:"potionOfHealth",ownedBy:"30bf1e65-d6e0-4766-867c-b158673cfdc1"},PickedUpComponent:{slotIndex:3},RenderableComponent:{sprite:{height:48,width:48,texture:"",frame:"HealthPotion.png",name:null,animations:[]},spriteKey:"health_potion",scale:0},RequirementsComponent:{levelRequirement:1,attributeRequirements:[]},SummaryComponent:{summaryText:""},ValuableComponent:{value:2}},entityID:"5becd911-8b94-4c05-bab4-2ac258ee2d40"},{components:{DescriptorComponent:{description:"",id:null,name:"Gold"},ItemIdComponent:{value:"82693eb2-df70-4b20-ad01-b88518be8dbf",itemBase:"gold",ownedBy:"30bf1e65-d6e0-4766-867c-b158673cfdc1"},GoldComponent:{},PickedUpComponent:{slotIndex:4},QuantityComponent:{value:27,maxValue:-1},RenderableComponent:{sprite:{height:48,width:48,texture:"GoldPouch",frame:"GoldPouch.png",name:null,animations:[]},spriteKey:"gold",scale:0},SummaryComponent:{summaryText:""},ValuableComponent:{value:1}},entityID:"82693eb2-df70-4b20-ad01-b88518be8dbf"}]}function getShopkeeper(){const s=v4();return{components:{descriptor:{name:"Goar"},shopkeeper:{baseItemIds:["dagger"]},currency:{gold:832},inventory:{itemsToAdd:[],slots:[{slotIndex:0,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:1,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:2,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:3,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:4,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:5,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:6,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:7,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:8,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:9,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:10,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:11,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:12,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:13,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:14,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:15,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:16,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:17,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:18,item:"00000000-0000-0000-0000-000000000000"},{slotIndex:19,item:"00000000-0000-0000-0000-000000000000"}],items:[],coins:0},playerId:{value:s}},entityID:s}}const style="",game=new Phaser.Game(config),world=initializeWorld(),player=getPlayer(),playerItems=getPlayerItems(),shopkeeper=getShopkeeper();playerItems.forEach(s=>initializeEntity(s));const playerEntity=initializeEntity(player),shopkeeperEntity=initializeEntity(shopkeeper);
